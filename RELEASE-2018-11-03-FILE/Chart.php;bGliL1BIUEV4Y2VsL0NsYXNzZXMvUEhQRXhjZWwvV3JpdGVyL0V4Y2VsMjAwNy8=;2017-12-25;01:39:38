{
    "namaFile": "lib\/PHPExcel\/Classes\/PHPExcel\/Writer\/Excel2007\/Chart.php",
    "lastUpdate": "2017-12-25+01:39:38.00",
    "contentFile": "PD9waHAKCi8qKgogKiBQSFBFeGNlbF9Xcml0ZXJfRXhjZWwyMDA3X0NoYXJ0CiAqCiAqIENvcHlyaWdodCAoYykgMjAwNiAtIDIwMTUgUEhQRXhjZWwKICoKICogVGhpcyBsaWJyYXJ5IGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vcgogKiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljCiAqIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlcgogKiB2ZXJzaW9uIDIuMSBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KICoKICogVGhpcyBsaWJyYXJ5IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUgR05VCiAqIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiAqCiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMKICogTGljZW5zZSBhbG9uZyB3aXRoIHRoaXMgbGlicmFyeTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZQogKiBGb3VuZGF0aW9uLCBJbmMuLCA1MSBGcmFua2xpbiBTdHJlZXQsIEZpZnRoIEZsb29yLCBCb3N0b24sIE1BICAwMjExMC0xMzAxICBVU0EKICoKICogQGNhdGVnb3J5ICAgUEhQRXhjZWwKICogQHBhY2thZ2UgICAgUEhQRXhjZWxfV3JpdGVyX0V4Y2VsMjAwNwogKiBAY29weXJpZ2h0ICBDb3B5cmlnaHQgKGMpIDIwMDYgLSAyMDE1IFBIUEV4Y2VsIChodHRwOi8vd3d3LmNvZGVwbGV4LmNvbS9QSFBFeGNlbCkKICogQGxpY2Vuc2UgICAgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL29sZC1saWNlbnNlcy9sZ3BsLTIuMS50eHQgICAgTEdQTAogKiBAdmVyc2lvbiAgICAjI1ZFUlNJT04jIywgIyNEQVRFIyMKICovCmNsYXNzIFBIUEV4Y2VsX1dyaXRlcl9FeGNlbDIwMDdfQ2hhcnQgZXh0ZW5kcyBQSFBFeGNlbF9Xcml0ZXJfRXhjZWwyMDA3X1dyaXRlclBhcnQKewogICAgcHJvdGVjdGVkICRjYWxjdWxhdGVDZWxsVmFsdWVzOwoKICAgIC8qKgogICAgICogV3JpdGUgY2hhcnRzIHRvIFhNTCBmb3JtYXQKICAgICAqCiAgICAgKiBAcGFyYW0gIFBIUEV4Y2VsX0NoYXJ0ICRwQ2hhcnQKICAgICAqCiAgICAgKiBAcmV0dXJuICBzdHJpbmcgICAgICAgICAgICBYTUwgT3V0cHV0CiAgICAgKiBAdGhyb3dzICBQSFBFeGNlbF9Xcml0ZXJfRXhjZXB0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiB3cml0ZUNoYXJ0KFBIUEV4Y2VsX0NoYXJ0ICRwQ2hhcnQgPSBudWxsLCAkY2FsY3VsYXRlQ2VsbFZhbHVlcyA9IHRydWUpCiAgICB7CiAgICAgICAgJHRoaXMtPmNhbGN1bGF0ZUNlbGxWYWx1ZXMgPSAkY2FsY3VsYXRlQ2VsbFZhbHVlczsKCiAgICAgICAgLy8gQ3JlYXRlIFhNTCB3cml0ZXIKICAgICAgICAkb2JqV3JpdGVyID0gbnVsbDsKICAgICAgICBpZiAoJHRoaXMtPmdldFBhcmVudFdyaXRlcigpLT5nZXRVc2VEaXNrQ2FjaGluZygpKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXIgPSBuZXcgUEhQRXhjZWxfU2hhcmVkX1hNTFdyaXRlcihQSFBFeGNlbF9TaGFyZWRfWE1MV3JpdGVyOjpTVE9SQUdFX0RJU0ssICR0aGlzLT5nZXRQYXJlbnRXcml0ZXIoKS0+Z2V0RGlza0NhY2hpbmdEaXJlY3RvcnkoKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJG9ialdyaXRlciA9IG5ldyBQSFBFeGNlbF9TaGFyZWRfWE1MV3JpdGVyKFBIUEV4Y2VsX1NoYXJlZF9YTUxXcml0ZXI6OlNUT1JBR0VfTUVNT1JZKTsKICAgICAgICB9CiAgICAgICAgLy8gICAgRW5zdXJlIHRoYXQgZGF0YSBzZXJpZXMgdmFsdWVzIGFyZSB1cC10by1kYXRlIGJlZm9yZSB3ZSBzYXZlCiAgICAgICAgaWYgKCR0aGlzLT5jYWxjdWxhdGVDZWxsVmFsdWVzKSB7CiAgICAgICAgICAgICRwQ2hhcnQtPnJlZnJlc2goKTsKICAgICAgICB9CgogICAgICAgIC8vIFhNTCBoZWFkZXIKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydERvY3VtZW50KCcxLjAnLCAnVVRGLTgnLCAneWVzJyk7CgogICAgICAgIC8vIGM6Y2hhcnRTcGFjZQogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpjaGFydFNwYWNlJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3htbG5zOmMnLCAnaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL2RyYXdpbmdtbC8yMDA2L2NoYXJ0Jyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3htbG5zOmEnLCAnaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL2RyYXdpbmdtbC8yMDA2L21haW4nKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgneG1sbnM6cicsICdodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzJyk7CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpkYXRlMTkwNCcpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAwKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOmxhbmcnKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgImVuLUdCIik7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpyb3VuZGVkQ29ybmVycycpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAwKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICR0aGlzLT53cml0ZUFsdGVybmF0ZUNvbnRlbnQoJG9ialdyaXRlcik7CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpjaGFydCcpOwoKICAgICAgICAkdGhpcy0+d3JpdGVUaXRsZSgkcENoYXJ0LT5nZXRUaXRsZSgpLCAkb2JqV3JpdGVyKTsKCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOmF1dG9UaXRsZURlbGV0ZWQnKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgMCk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAkdGhpcy0+d3JpdGVQbG90QXJlYSgkcENoYXJ0LT5nZXRQbG90QXJlYSgpLCAkcENoYXJ0LT5nZXRYQXhpc0xhYmVsKCksICRwQ2hhcnQtPmdldFlBeGlzTGFiZWwoKSwgJG9ialdyaXRlciwgJHBDaGFydC0+Z2V0V29ya3NoZWV0KCksICRwQ2hhcnQtPmdldENoYXJ0QXhpc1goKSwgJHBDaGFydC0+Z2V0Q2hhcnRBeGlzWSgpLCAkcENoYXJ0LT5nZXRNYWpvckdyaWRsaW5lcygpLCAkcENoYXJ0LT5nZXRNaW5vckdyaWRsaW5lcygpKTsKCiAgICAgICAgJHRoaXMtPndyaXRlTGVnZW5kKCRwQ2hhcnQtPmdldExlZ2VuZCgpLCAkb2JqV3JpdGVyKTsKCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnBsb3RWaXNPbmx5Jyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsIDEpOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOmRpc3BCbGFua3NBcycpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAiZ2FwIik7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6c2hvd0RMYmxzT3Zlck1heCcpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAwKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJHRoaXMtPndyaXRlUHJpbnRTZXR0aW5ncygkb2JqV3JpdGVyKTsKCiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAvLyBSZXR1cm4KICAgICAgICByZXR1cm4gJG9ialdyaXRlci0+Z2V0RGF0YSgpOwogICAgfQoKICAgIC8qKgogICAgICogV3JpdGUgQ2hhcnQgVGl0bGUKICAgICAqCiAgICAgKiBAcGFyYW0gIFBIUEV4Y2VsX0NoYXJ0X1RpdGxlICR0aXRsZQogICAgICogQHBhcmFtICBQSFBFeGNlbF9TaGFyZWRfWE1MV3JpdGVyICRvYmpXcml0ZXIgWE1MIFdyaXRlcgogICAgICoKICAgICAqIEB0aHJvd3MgIFBIUEV4Y2VsX1dyaXRlcl9FeGNlcHRpb24KICAgICAqLwogICAgcHJpdmF0ZSBmdW5jdGlvbiB3cml0ZVRpdGxlKFBIUEV4Y2VsX0NoYXJ0X1RpdGxlICR0aXRsZSA9IG51bGwsICRvYmpXcml0ZXIpCiAgICB7CiAgICAgICAgaWYgKGlzX251bGwoJHRpdGxlKSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6dGl0bGUnKTsKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6dHgnKTsKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6cmljaCcpOwoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6Ym9keVByJyk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6bHN0U3R5bGUnKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpwJyk7CgogICAgICAgICRjYXB0aW9uID0gJHRpdGxlLT5nZXRDYXB0aW9uKCk7CiAgICAgICAgaWYgKChpc19hcnJheSgkY2FwdGlvbikpICYmIChjb3VudCgkY2FwdGlvbikgPiAwKSkgewogICAgICAgICAgICAkY2FwdGlvbiA9ICRjYXB0aW9uWzBdOwogICAgICAgIH0KICAgICAgICAkdGhpcy0+Z2V0UGFyZW50V3JpdGVyKCktPmdldFdyaXRlclBhcnQoJ3N0cmluZ3RhYmxlJyktPndyaXRlUmljaFRleHRGb3JDaGFydHMoJG9ialdyaXRlciwgJGNhcHRpb24sICdhJyk7CgogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAkdGhpcy0+d3JpdGVMYXlvdXQoJHRpdGxlLT5nZXRMYXlvdXQoKSwgJG9ialdyaXRlcik7CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpvdmVybGF5Jyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsIDApOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgfQoKICAgIC8qKgogICAgICogV3JpdGUgQ2hhcnQgTGVnZW5kCiAgICAgKgogICAgICogQHBhcmFtICBQSFBFeGNlbF9DaGFydF9MZWdlbmQgJGxlZ2VuZAogICAgICogQHBhcmFtICBQSFBFeGNlbF9TaGFyZWRfWE1MV3JpdGVyICRvYmpXcml0ZXIgWE1MIFdyaXRlcgogICAgICoKICAgICAqIEB0aHJvd3MgIFBIUEV4Y2VsX1dyaXRlcl9FeGNlcHRpb24KICAgICAqLwogICAgcHJpdmF0ZSBmdW5jdGlvbiB3cml0ZUxlZ2VuZChQSFBFeGNlbF9DaGFydF9MZWdlbmQgJGxlZ2VuZCA9IG51bGwsICRvYmpXcml0ZXIpCiAgICB7CiAgICAgICAgaWYgKGlzX251bGwoJGxlZ2VuZCkpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOmxlZ2VuZCcpOwoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6bGVnZW5kUG9zJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICRsZWdlbmQtPmdldFBvc2l0aW9uKCkpOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJHRoaXMtPndyaXRlTGF5b3V0KCRsZWdlbmQtPmdldExheW91dCgpLCAkb2JqV3JpdGVyKTsKCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOm92ZXJsYXknKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgKCRsZWdlbmQtPmdldE92ZXJsYXkoKSkgPyAnMScgOiAnMCcpOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnR4UHInKTsKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6Ym9keVByJyk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6bHN0U3R5bGUnKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpwJyk7CiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdhOnBQcicpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdydGwnLCAwKTsKCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdhOmRlZlJQcicpOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTplbmRQYXJhUlByJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2xhbmcnLCAiZW4tVVMiKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdyaXRlIENoYXJ0IFBsb3QgQXJlYQogICAgICoKICAgICAqIEBwYXJhbSAgUEhQRXhjZWxfQ2hhcnRfUGxvdEFyZWEgJHBsb3RBcmVhCiAgICAgKiBAcGFyYW0gIFBIUEV4Y2VsX0NoYXJ0X1RpdGxlICR4QXhpc0xhYmVsCiAgICAgKiBAcGFyYW0gIFBIUEV4Y2VsX0NoYXJ0X1RpdGxlICR5QXhpc0xhYmVsCiAgICAgKiBAcGFyYW0gIFBIUEV4Y2VsX0NoYXJ0X0F4aXMgJHhBeGlzCiAgICAgKiBAcGFyYW0gIFBIUEV4Y2VsX0NoYXJ0X0F4aXMgJHlBeGlzCiAgICAgKiBAcGFyYW0gIFBIUEV4Y2VsX1NoYXJlZF9YTUxXcml0ZXIgJG9ialdyaXRlciBYTUwgV3JpdGVyCiAgICAgKgogICAgICogQHRocm93cyAgUEhQRXhjZWxfV3JpdGVyX0V4Y2VwdGlvbgogICAgICovCiAgICBwcml2YXRlIGZ1bmN0aW9uIHdyaXRlUGxvdEFyZWEoUEhQRXhjZWxfQ2hhcnRfUGxvdEFyZWEgJHBsb3RBcmVhLCBQSFBFeGNlbF9DaGFydF9UaXRsZSAkeEF4aXNMYWJlbCA9IG51bGwsIFBIUEV4Y2VsX0NoYXJ0X1RpdGxlICR5QXhpc0xhYmVsID0gbnVsbCwgJG9ialdyaXRlciwgUEhQRXhjZWxfV29ya3NoZWV0ICRwU2hlZXQsIFBIUEV4Y2VsX0NoYXJ0X0F4aXMgJHhBeGlzLCBQSFBFeGNlbF9DaGFydF9BeGlzICR5QXhpcywgUEhQRXhjZWxfQ2hhcnRfR3JpZExpbmVzICRtYWpvckdyaWRsaW5lcywgUEhQRXhjZWxfQ2hhcnRfR3JpZExpbmVzICRtaW5vckdyaWRsaW5lcykKICAgIHsKICAgICAgICBpZiAoaXNfbnVsbCgkcGxvdEFyZWEpKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgICRpZDEgPSAkaWQyID0gMDsKICAgICAgICAkdGhpcy0+X3Nlcmllc0luZGV4ID0gMDsKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6cGxvdEFyZWEnKTsKCiAgICAgICAgJGxheW91dCA9ICRwbG90QXJlYS0+Z2V0TGF5b3V0KCk7CgogICAgICAgICR0aGlzLT53cml0ZUxheW91dCgkbGF5b3V0LCAkb2JqV3JpdGVyKTsKCiAgICAgICAgJGNoYXJ0VHlwZXMgPSBzZWxmOjpnZXRDaGFydFR5cGUoJHBsb3RBcmVhKTsKICAgICAgICAkY2F0SXNNdWx0aUxldmVsU2VyaWVzID0gJHZhbElzTXVsdGlMZXZlbFNlcmllcyA9IGZhbHNlOwogICAgICAgICRwbG90R3JvdXBpbmdUeXBlID0gJyc7CiAgICAgICAgZm9yZWFjaCAoJGNoYXJ0VHlwZXMgYXMgJGNoYXJ0VHlwZSkgewogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6JyAuICRjaGFydFR5cGUpOwoKICAgICAgICAgICAgJGdyb3VwQ291bnQgPSAkcGxvdEFyZWEtPmdldFBsb3RHcm91cENvdW50KCk7CiAgICAgICAgICAgIGZvciAoJGkgPSAwOyAkaSA8ICRncm91cENvdW50OyArKyRpKSB7CiAgICAgICAgICAgICAgICAkcGxvdEdyb3VwID0gJHBsb3RBcmVhLT5nZXRQbG90R3JvdXBCeUluZGV4KCRpKTsKICAgICAgICAgICAgICAgICRncm91cFR5cGUgPSAkcGxvdEdyb3VwLT5nZXRQbG90VHlwZSgpOwogICAgICAgICAgICAgICAgaWYgKCRncm91cFR5cGUgPT0gJGNoYXJ0VHlwZSkgewogICAgICAgICAgICAgICAgICAgICRwbG90U3R5bGUgPSAkcGxvdEdyb3VwLT5nZXRQbG90U3R5bGUoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoJGdyb3VwVHlwZSA9PT0gUEhQRXhjZWxfQ2hhcnRfRGF0YVNlcmllczo6VFlQRV9SQURBUkNIQVJUKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpyYWRhclN0eWxlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkcGxvdFN0eWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZWlmICgkZ3JvdXBUeXBlID09PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX1NDQVRURVJDSEFSVCkgewogICAgICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6c2NhdHRlclN0eWxlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkcGxvdFN0eWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPndyaXRlUGxvdEdyb3VwKCRwbG90R3JvdXAsICRjaGFydFR5cGUsICRvYmpXcml0ZXIsICRjYXRJc011bHRpTGV2ZWxTZXJpZXMsICR2YWxJc011bHRpTGV2ZWxTZXJpZXMsICRwbG90R3JvdXBpbmdUeXBlLCAkcFNoZWV0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgJHRoaXMtPndyaXRlRGF0YUxhYmVscygkb2JqV3JpdGVyLCAkbGF5b3V0KTsKCiAgICAgICAgICAgIGlmICgkY2hhcnRUeXBlID09PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX0xJTkVDSEFSVCkgewogICAgICAgICAgICAgICAgLy8gICAgTGluZSBvbmx5LCBMaW5lM0QgY2FuJ3QgYmUgc21vb3RoZWQKCiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6c21vb3RoJyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgKGludGVnZXIpICRwbG90R3JvdXAtPmdldFNtb290aExpbmUoKSk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgIH0gZWxzZWlmICgoJGNoYXJ0VHlwZSA9PT0gUEhQRXhjZWxfQ2hhcnRfRGF0YVNlcmllczo6VFlQRV9CQVJDSEFSVCkgfHwoJGNoYXJ0VHlwZSA9PT0gUEhQRXhjZWxfQ2hhcnRfRGF0YVNlcmllczo6VFlQRV9CQVJDSEFSVF8zRCkpIHsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpnYXBXaWR0aCcpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsIDE1MCk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICAgICAgICAgaWYgKCRwbG90R3JvdXBpbmdUeXBlID09ICdwZXJjZW50U3RhY2tlZCcgfHwgJHBsb3RHcm91cGluZ1R5cGUgPT0gJ3N0YWNrZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOm92ZXJsYXAnKTsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgMTAwKTsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZWlmICgkY2hhcnRUeXBlID09PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX0JVQkJMRUNIQVJUKSB7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6YnViYmxlU2NhbGUnKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAyNSk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnNob3dOZWdCdWJibGVzJyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgMCk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgIH0gZWxzZWlmICgkY2hhcnRUeXBlID09PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX1NUT0NLQ0hBUlQpIHsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpoaUxvd0xpbmVzJyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnVwRG93bkJhcnMnKTsKCiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6Z2FwV2lkdGgnKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAzMDApOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzp1cEJhcnMnKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6ZG93bkJhcnMnKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vICAgIEdlbmVyYXRlIDIgdW5pcXVlIG51bWJlcnMgdG8gdXNlIGZvciBheElkIHZhbHVlcwogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgJGlkMSA9ICRpZDIgPSByYW5kKDEwMDAwMDAwLDk5OTk5OTk5KTsKICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAkaWQyID0gcmFuZCgxMDAwMDAwMCw5OTk5OTk5OSk7CiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICB9IHdoaWxlICgkaWQxID09ICRpZDIpOwogICAgICAgICAgICAkaWQxID0gJzc1MDkxMzI4JzsKICAgICAgICAgICAgJGlkMiA9ICc3NTA4OTQwOCc7CgogICAgICAgICAgICBpZiAoKCRjaGFydFR5cGUgIT09IFBIUEV4Y2VsX0NoYXJ0X0RhdGFTZXJpZXM6OlRZUEVfUElFQ0hBUlQpICYmICgkY2hhcnRUeXBlICE9PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX1BJRUNIQVJUXzNEKSAmJiAoJGNoYXJ0VHlwZSAhPT0gUEhQRXhjZWxfQ2hhcnRfRGF0YVNlcmllczo6VFlQRV9ET05VVENIQVJUKSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOmF4SWQnKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkaWQxKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpheElkJyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgJGlkMik7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6Zmlyc3RTbGljZUFuZycpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsIDApOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAgICAgICAgIGlmICgkY2hhcnRUeXBlID09PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX0RPTlVUQ0hBUlQpIHsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6aG9sZVNpemUnKTsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgNTApOwogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCgkY2hhcnRUeXBlICE9PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX1BJRUNIQVJUKSAmJiAoJGNoYXJ0VHlwZSAhPT0gUEhQRXhjZWxfQ2hhcnRfRGF0YVNlcmllczo6VFlQRV9QSUVDSEFSVF8zRCkgJiYgKCRjaGFydFR5cGUgIT09IFBIUEV4Y2VsX0NoYXJ0X0RhdGFTZXJpZXM6OlRZUEVfRE9OVVRDSEFSVCkpIHsKICAgICAgICAgICAgaWYgKCRjaGFydFR5cGUgPT09IFBIUEV4Y2VsX0NoYXJ0X0RhdGFTZXJpZXM6OlRZUEVfQlVCQkxFQ0hBUlQpIHsKICAgICAgICAgICAgICAgICR0aGlzLT53cml0ZVZhbHVlQXhpcygkb2JqV3JpdGVyLCAkcGxvdEFyZWEsICR4QXhpc0xhYmVsLCAkY2hhcnRUeXBlLCAkaWQxLCAkaWQyLCAkY2F0SXNNdWx0aUxldmVsU2VyaWVzLCAkeEF4aXMsICR5QXhpcywgJG1ham9yR3JpZGxpbmVzLCAkbWlub3JHcmlkbGluZXMpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJHRoaXMtPndyaXRlQ2F0ZWdvcnlBeGlzKCRvYmpXcml0ZXIsICRwbG90QXJlYSwgJHhBeGlzTGFiZWwsICRjaGFydFR5cGUsICRpZDEsICRpZDIsICRjYXRJc011bHRpTGV2ZWxTZXJpZXMsICR4QXhpcywgJHlBeGlzKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJHRoaXMtPndyaXRlVmFsdWVBeGlzKCRvYmpXcml0ZXIsICRwbG90QXJlYSwgJHlBeGlzTGFiZWwsICRjaGFydFR5cGUsICRpZDEsICRpZDIsICR2YWxJc011bHRpTGV2ZWxTZXJpZXMsICR4QXhpcywgJHlBeGlzLCAkbWFqb3JHcmlkbGluZXMsICRtaW5vckdyaWRsaW5lcyk7CiAgICAgICAgfQoKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBXcml0ZSBEYXRhIExhYmVscwogICAgICoKICAgICAqIEBwYXJhbSAgUEhQRXhjZWxfU2hhcmVkX1hNTFdyaXRlciAkb2JqV3JpdGVyIFhNTCBXcml0ZXIKICAgICAqIEBwYXJhbSAgUEhQRXhjZWxfQ2hhcnRfTGF5b3V0ICRjaGFydExheW91dCBDaGFydCBsYXlvdXQKICAgICAqCiAgICAgKiBAdGhyb3dzICBQSFBFeGNlbF9Xcml0ZXJfRXhjZXB0aW9uCiAgICAgKi8KICAgIHByaXZhdGUgZnVuY3Rpb24gd3JpdGVEYXRhTGFiZWxzKCRvYmpXcml0ZXIsICRjaGFydExheW91dCkKICAgIHsKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6ZExibHMnKTsKCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnNob3dMZWdlbmRLZXknKTsKICAgICAgICAkc2hvd0xlZ2VuZEtleSA9IChlbXB0eSgkY2hhcnRMYXlvdXQpKSA\/IDAgOiAkY2hhcnRMYXlvdXQtPmdldFNob3dMZWdlbmRLZXkoKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgKChlbXB0eSgkc2hvd0xlZ2VuZEtleSkpID8gMCA6IDEpKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpzaG93VmFsJyk7CiAgICAgICAgJHNob3dWYWwgPSAoZW1wdHkoJGNoYXJ0TGF5b3V0KSkgPyAwIDogJGNoYXJ0TGF5b3V0LT5nZXRTaG93VmFsKCk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICgoZW1wdHkoJHNob3dWYWwpKSA\/IDAgOiAxKSk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6c2hvd0NhdE5hbWUnKTsKICAgICAgICAkc2hvd0NhdE5hbWUgPSAoZW1wdHkoJGNoYXJ0TGF5b3V0KSkgPyAwIDogJGNoYXJ0TGF5b3V0LT5nZXRTaG93Q2F0TmFtZSgpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAoKGVtcHR5KCRzaG93Q2F0TmFtZSkpID8gMCA6IDEpKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpzaG93U2VyTmFtZScpOwogICAgICAgICRzaG93U2VyTmFtZSA9IChlbXB0eSgkY2hhcnRMYXlvdXQpKSA\/IDAgOiAkY2hhcnRMYXlvdXQtPmdldFNob3dTZXJOYW1lKCk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICgoZW1wdHkoJHNob3dTZXJOYW1lKSkgPyAwIDogMSkpOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnNob3dQZXJjZW50Jyk7CiAgICAgICAgJHNob3dQZXJjZW50ID0gKGVtcHR5KCRjaGFydExheW91dCkpID8gMCA6ICRjaGFydExheW91dC0+Z2V0U2hvd1BlcmNlbnQoKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgKChlbXB0eSgkc2hvd1BlcmNlbnQpKSA\/IDAgOiAxKSk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6c2hvd0J1YmJsZVNpemUnKTsKICAgICAgICAkc2hvd0J1YmJsZVNpemUgPSAoZW1wdHkoJGNoYXJ0TGF5b3V0KSkgPyAwIDogJGNoYXJ0TGF5b3V0LT5nZXRTaG93QnViYmxlU2l6ZSgpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAoKGVtcHR5KCRzaG93QnViYmxlU2l6ZSkpID8gMCA6IDEpKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpzaG93TGVhZGVyTGluZXMnKTsKICAgICAgICAkc2hvd0xlYWRlckxpbmVzID0gKGVtcHR5KCRjaGFydExheW91dCkpID8gMSA6ICRjaGFydExheW91dC0+Z2V0U2hvd0xlYWRlckxpbmVzKCk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICgoZW1wdHkoJHNob3dMZWFkZXJMaW5lcykpID8gMCA6IDEpKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdyaXRlIENhdGVnb3J5IEF4aXMKICAgICAqCiAgICAgKiBAcGFyYW0gIFBIUEV4Y2VsX1NoYXJlZF9YTUxXcml0ZXIgJG9ialdyaXRlciBYTUwgV3JpdGVyCiAgICAgKiBAcGFyYW0gIFBIUEV4Y2VsX0NoYXJ0X1Bsb3RBcmVhICRwbG90QXJlYQogICAgICogQHBhcmFtICBQSFBFeGNlbF9DaGFydF9UaXRsZSAkeEF4aXNMYWJlbAogICAgICogQHBhcmFtICBzdHJpbmcgJGdyb3VwVHlwZSBDaGFydCB0eXBlCiAgICAgKiBAcGFyYW0gIHN0cmluZyAkaWQxCiAgICAgKiBAcGFyYW0gIHN0cmluZyAkaWQyCiAgICAgKiBAcGFyYW0gIGJvb2xlYW4gJGlzTXVsdGlMZXZlbFNlcmllcwogICAgICoKICAgICAqIEB0aHJvd3MgIFBIUEV4Y2VsX1dyaXRlcl9FeGNlcHRpb24KICAgICAqLwogICAgcHJpdmF0ZSBmdW5jdGlvbiB3cml0ZUNhdGVnb3J5QXhpcygkb2JqV3JpdGVyLCBQSFBFeGNlbF9DaGFydF9QbG90QXJlYSAkcGxvdEFyZWEsICR4QXhpc0xhYmVsLCAkZ3JvdXBUeXBlLCAkaWQxLCAkaWQyLCAkaXNNdWx0aUxldmVsU2VyaWVzLCAkeEF4aXMsICR5QXhpcykKICAgIHsKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6Y2F0QXgnKTsKCiAgICAgICAgaWYgKCRpZDEgPiAwKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpheElkJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkaWQxKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgIH0KCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnNjYWxpbmcnKTsKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6b3JpZW50YXRpb24nKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgJHlBeGlzLT5nZXRBeGlzT3B0aW9uc1Byb3BlcnR5KCdvcmllbnRhdGlvbicpKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6ZGVsZXRlJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsIDApOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOmF4UG9zJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICJiIik7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICBpZiAoIWlzX251bGwoJHhBeGlzTGFiZWwpKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzp0aXRsZScpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6dHgnKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnJpY2gnKTsKCiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpib2R5UHInKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdhOmxzdFN0eWxlJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpwJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpyJyk7CgogICAgICAgICAgICAkY2FwdGlvbiA9ICR4QXhpc0xhYmVsLT5nZXRDYXB0aW9uKCk7CiAgICAgICAgICAgIGlmIChpc19hcnJheSgkY2FwdGlvbikpIHsKICAgICAgICAgICAgICAgICRjYXB0aW9uID0gJGNhcHRpb25bMF07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdhOnQnKTsKICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3htbDpzcGFjZScsICdwcmVzZXJ2ZScpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZVJhd0RhdGEoUEhQRXhjZWxfU2hhcmVkX1N0cmluZzo6Q29udHJvbENoYXJhY3RlclBIUDJPT1hNTCgkY2FwdGlvbikpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICAgICAkbGF5b3V0ID0gJHhBeGlzTGFiZWwtPmdldExheW91dCgpOwogICAgICAgICAgICAkdGhpcy0+d3JpdGVMYXlvdXQoJGxheW91dCwgJG9ialdyaXRlcik7CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6b3ZlcmxheScpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgMCk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICB9CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpudW1GbXQnKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnZm9ybWF0Q29kZScsICR5QXhpcy0+Z2V0QXhpc051bWJlckZvcm1hdCgpKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnc291cmNlTGlua2VkJywgJHlBeGlzLT5nZXRBeGlzTnVtYmVyU291cmNlTGlua2VkKCkpOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOm1ham9yVGlja01hcmsnKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgJHlBeGlzLT5nZXRBeGlzT3B0aW9uc1Byb3BlcnR5KCdtYWpvcl90aWNrX21hcmsnKSk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6bWlub3JUaWNrTWFyaycpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkeUF4aXMtPmdldEF4aXNPcHRpb25zUHJvcGVydHkoJ21pbm9yX3RpY2tfbWFyaycpKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzp0aWNrTGJsUG9zJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICR5QXhpcy0+Z2V0QXhpc09wdGlvbnNQcm9wZXJ0eSgnYXhpc19sYWJlbHMnKSk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICBpZiAoJGlkMiA+IDApIHsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOmNyb3NzQXgnKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICRpZDIpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6Y3Jvc3NlcycpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgJHlBeGlzLT5nZXRBeGlzT3B0aW9uc1Byb3BlcnR5KCdob3Jpem9udGFsX2Nyb3NzZXMnKSk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICB9CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzphdXRvJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsIDEpOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOmxibEFsZ24nKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgImN0ciIpOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOmxibE9mZnNldCcpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAxMDApOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgaWYgKCRpc011bHRpTGV2ZWxTZXJpZXMpIHsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOm5vTXVsdGlMdmxMYmwnKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsIDApOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgfQogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdyaXRlIFZhbHVlIEF4aXMKICAgICAqCiAgICAgKiBAcGFyYW0gIFBIUEV4Y2VsX1NoYXJlZF9YTUxXcml0ZXIgJG9ialdyaXRlciBYTUwgV3JpdGVyCiAgICAgKiBAcGFyYW0gIFBIUEV4Y2VsX0NoYXJ0X1Bsb3RBcmVhICRwbG90QXJlYQogICAgICogQHBhcmFtICBQSFBFeGNlbF9DaGFydF9UaXRsZSAkeUF4aXNMYWJlbAogICAgICogQHBhcmFtICBzdHJpbmcgJGdyb3VwVHlwZSBDaGFydCB0eXBlCiAgICAgKiBAcGFyYW0gIHN0cmluZyAkaWQxCiAgICAgKiBAcGFyYW0gIHN0cmluZyAkaWQyCiAgICAgKiBAcGFyYW0gIGJvb2xlYW4gJGlzTXVsdGlMZXZlbFNlcmllcwogICAgICoKICAgICAqIEB0aHJvd3MgIFBIUEV4Y2VsX1dyaXRlcl9FeGNlcHRpb24KICAgICAqLwogICAgcHJpdmF0ZSBmdW5jdGlvbiB3cml0ZVZhbHVlQXhpcygkb2JqV3JpdGVyLCBQSFBFeGNlbF9DaGFydF9QbG90QXJlYSAkcGxvdEFyZWEsICR5QXhpc0xhYmVsLCAkZ3JvdXBUeXBlLCAkaWQxLCAkaWQyLCAkaXNNdWx0aUxldmVsU2VyaWVzLCAkeEF4aXMsICR5QXhpcywgJG1ham9yR3JpZGxpbmVzLCAkbWlub3JHcmlkbGluZXMpCiAgICB7CiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnZhbEF4Jyk7CgogICAgICAgIGlmICgkaWQyID4gMCkgewogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6YXhJZCcpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgJGlkMik7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICB9CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpzY2FsaW5nJyk7CgogICAgICAgIGlmICghaXNfbnVsbCgkeEF4aXMtPmdldEF4aXNPcHRpb25zUHJvcGVydHkoJ21heGltdW0nKSkpIHsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOm1heCcpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgJHhBeGlzLT5nZXRBeGlzT3B0aW9uc1Byb3BlcnR5KCdtYXhpbXVtJykpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIWlzX251bGwoJHhBeGlzLT5nZXRBeGlzT3B0aW9uc1Byb3BlcnR5KCdtaW5pbXVtJykpKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzptaW4nKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICR4QXhpcy0+Z2V0QXhpc09wdGlvbnNQcm9wZXJ0eSgnbWluaW11bScpKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgIH0KCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOm9yaWVudGF0aW9uJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICR4QXhpcy0+Z2V0QXhpc09wdGlvbnNQcm9wZXJ0eSgnb3JpZW50YXRpb24nKSk7CgoKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6ZGVsZXRlJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsIDApOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOmF4UG9zJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICJsIik7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6bWFqb3JHcmlkbGluZXMnKTsKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6c3BQcicpOwoKICAgICAgICBpZiAoIWlzX251bGwoJG1ham9yR3JpZGxpbmVzLT5nZXRMaW5lQ29sb3JQcm9wZXJ0eSgndmFsdWUnKSkpIHsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdhOmxuJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd3JywgJG1ham9yR3JpZGxpbmVzLT5nZXRMaW5lU3R5bGVQcm9wZXJ0eSgnd2lkdGgnKSk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpzb2xpZEZpbGwnKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCJhOnskbWFqb3JHcmlkbGluZXMtPmdldExpbmVDb2xvclByb3BlcnR5KCd0eXBlJyl9Iik7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkbWFqb3JHcmlkbGluZXMtPmdldExpbmVDb2xvclByb3BlcnR5KCd2YWx1ZScpKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdhOmFscGhhJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkbWFqb3JHcmlkbGluZXMtPmdldExpbmVDb2xvclByb3BlcnR5KCdhbHBoYScpKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOyAvL2VuZCBhbHBoYQogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7IC8vZW5kIHNyZ2JDbHIKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOyAvL2VuZCBzb2xpZEZpbGwKCiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpwcnN0RGFzaCcpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgJG1ham9yR3JpZGxpbmVzLT5nZXRMaW5lU3R5bGVQcm9wZXJ0eSgnZGFzaCcpKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAgICAgaWYgKCRtYWpvckdyaWRsaW5lcy0+Z2V0TGluZVN0eWxlUHJvcGVydHkoJ2pvaW4nKSA9PSAnbWl0ZXInKSB7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6bWl0ZXInKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdsaW0nLCAnODAwMDAwJyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6YmV2ZWwnKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCFpc19udWxsKCRtYWpvckdyaWRsaW5lcy0+Z2V0TGluZVN0eWxlUHJvcGVydHkoYXJyYXkoJ2Fycm93JywgJ2hlYWQnLCAndHlwZScpKSkpIHsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpoZWFkRW5kJyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndHlwZScsICRtYWpvckdyaWRsaW5lcy0+Z2V0TGluZVN0eWxlUHJvcGVydHkoYXJyYXkoJ2Fycm93JywgJ2hlYWQnLCAndHlwZScpKSk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndycsICRtYWpvckdyaWRsaW5lcy0+Z2V0TGluZVN0eWxlQXJyb3dQYXJhbWV0ZXJzKCdoZWFkJywgJ3cnKSk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnbGVuJywgJG1ham9yR3JpZGxpbmVzLT5nZXRMaW5lU3R5bGVBcnJvd1BhcmFtZXRlcnMoJ2hlYWQnLCAnbGVuJykpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIWlzX251bGwoJG1ham9yR3JpZGxpbmVzLT5nZXRMaW5lU3R5bGVQcm9wZXJ0eShhcnJheSgnYXJyb3cnLCAnZW5kJywgJ3R5cGUnKSkpKSB7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6dGFpbEVuZCcpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3R5cGUnLCAkbWFqb3JHcmlkbGluZXMtPmdldExpbmVTdHlsZVByb3BlcnR5KGFycmF5KCdhcnJvdycsICdlbmQnLCAndHlwZScpKSk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndycsICRtYWpvckdyaWRsaW5lcy0+Z2V0TGluZVN0eWxlQXJyb3dQYXJhbWV0ZXJzKCdlbmQnLCAndycpKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdsZW4nLCAkbWFqb3JHcmlkbGluZXMtPmdldExpbmVTdHlsZUFycm93UGFyYW1ldGVycygnZW5kJywgJ2xlbicpKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7IC8vZW5kIGxuCiAgICAgICAgfQogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTplZmZlY3RMc3QnKTsKCiAgICAgICAgaWYgKCFpc19udWxsKCRtYWpvckdyaWRsaW5lcy0+Z2V0R2xvd1NpemUoKSkpIHsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdhOmdsb3cnKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3JhZCcsICRtYWpvckdyaWRsaW5lcy0+Z2V0R2xvd1NpemUoKSk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgiYTp7JG1ham9yR3JpZGxpbmVzLT5nZXRHbG93Q29sb3IoJ3R5cGUnKX0iKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICRtYWpvckdyaWRsaW5lcy0+Z2V0R2xvd0NvbG9yKCd2YWx1ZScpKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdhOmFscGhhJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkbWFqb3JHcmlkbGluZXMtPmdldEdsb3dDb2xvcignYWxwaGEnKSk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsgLy9lbmQgYWxwaGEKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOyAvL2VuZCBzY2hlbWVDbHIKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOyAvL2VuZCBnbG93CiAgICAgICAgfQoKICAgICAgICBpZiAoIWlzX251bGwoJG1ham9yR3JpZGxpbmVzLT5nZXRTaGFkb3dQcm9wZXJ0eSgncHJlc2V0cycpKSkgewogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoImE6eyRtYWpvckdyaWRsaW5lcy0+Z2V0U2hhZG93UHJvcGVydHkoJ2VmZmVjdCcpfSIpOwogICAgICAgICAgICBpZiAoIWlzX251bGwoJG1ham9yR3JpZGxpbmVzLT5nZXRTaGFkb3dQcm9wZXJ0eSgnYmx1cicpKSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2JsdXJSYWQnLCAkbWFqb3JHcmlkbGluZXMtPmdldFNoYWRvd1Byb3BlcnR5KCdibHVyJykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghaXNfbnVsbCgkbWFqb3JHcmlkbGluZXMtPmdldFNoYWRvd1Byb3BlcnR5KCdkaXN0YW5jZScpKSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2Rpc3QnLCAkbWFqb3JHcmlkbGluZXMtPmdldFNoYWRvd1Byb3BlcnR5KCdkaXN0YW5jZScpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWlzX251bGwoJG1ham9yR3JpZGxpbmVzLT5nZXRTaGFkb3dQcm9wZXJ0eSgnZGlyZWN0aW9uJykpKSB7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnZGlyJywgJG1ham9yR3JpZGxpbmVzLT5nZXRTaGFkb3dQcm9wZXJ0eSgnZGlyZWN0aW9uJykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghaXNfbnVsbCgkbWFqb3JHcmlkbGluZXMtPmdldFNoYWRvd1Byb3BlcnR5KCdhbGduJykpKSB7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnYWxnbicsICRtYWpvckdyaWRsaW5lcy0+Z2V0U2hhZG93UHJvcGVydHkoJ2FsZ24nKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFpc19udWxsKCRtYWpvckdyaWRsaW5lcy0+Z2V0U2hhZG93UHJvcGVydHkoYXJyYXkoJ3NpemUnLCAnc3gnKSkpKSB7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnc3gnLCAkbWFqb3JHcmlkbGluZXMtPmdldFNoYWRvd1Byb3BlcnR5KGFycmF5KCdzaXplJywgJ3N4JykpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWlzX251bGwoJG1ham9yR3JpZGxpbmVzLT5nZXRTaGFkb3dQcm9wZXJ0eShhcnJheSgnc2l6ZScsICdzeScpKSkpIHsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdzeScsICRtYWpvckdyaWRsaW5lcy0+Z2V0U2hhZG93UHJvcGVydHkoYXJyYXkoJ3NpemUnLCAnc3knKSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghaXNfbnVsbCgkbWFqb3JHcmlkbGluZXMtPmdldFNoYWRvd1Byb3BlcnR5KGFycmF5KCdzaXplJywgJ2t4JykpKSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2t4JywgJG1ham9yR3JpZGxpbmVzLT5nZXRTaGFkb3dQcm9wZXJ0eShhcnJheSgnc2l6ZScsICdreCcpKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFpc19udWxsKCRtYWpvckdyaWRsaW5lcy0+Z2V0U2hhZG93UHJvcGVydHkoJ3JvdFdpdGhTaGFwZScpKSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3JvdFdpdGhTaGFwZScsICRtYWpvckdyaWRsaW5lcy0+Z2V0U2hhZG93UHJvcGVydHkoJ3JvdFdpdGhTaGFwZScpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoImE6eyRtYWpvckdyaWRsaW5lcy0+Z2V0U2hhZG93UHJvcGVydHkoYXJyYXkoJ2NvbG9yJywgJ3R5cGUnKSl9Iik7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkbWFqb3JHcmlkbGluZXMtPmdldFNoYWRvd1Byb3BlcnR5KGFycmF5KCdjb2xvcicsICd2YWx1ZScpKSk7CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6YWxwaGEnKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICRtYWpvckdyaWRsaW5lcy0+Z2V0U2hhZG93UHJvcGVydHkoYXJyYXkoJ2NvbG9yJywgJ2FscGhhJykpKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOyAvL2VuZCBhbHBoYQoKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOyAvL2VuZCBjb2xvcjp0eXBlCiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsgLy9lbmQgc2hhZG93CiAgICAgICAgfQoKICAgICAgICBpZiAoIWlzX251bGwoJG1ham9yR3JpZGxpbmVzLT5nZXRTb2Z0RWRnZXNTaXplKCkpKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpzb2Z0RWRnZScpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgncmFkJywgJG1ham9yR3JpZGxpbmVzLT5nZXRTb2Z0RWRnZXNTaXplKCkpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7IC8vZW5kIHNvZnRFZGdlCiAgICAgICAgfQoKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7IC8vZW5kIGVmZmVjdExzdAogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsgLy9lbmQgc3BQcgogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsgLy9lbmQgbWFqb3JHcmlkTGluZXMKCiAgICAgICAgaWYgKCRtaW5vckdyaWRsaW5lcy0+Z2V0T2JqZWN0U3RhdGUoKSkgewogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6bWlub3JHcmlkbGluZXMnKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnNwUHInKTsKCiAgICAgICAgICAgIGlmICghaXNfbnVsbCgkbWlub3JHcmlkbGluZXMtPmdldExpbmVDb2xvclByb3BlcnR5KCd2YWx1ZScpKSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdhOmxuJyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndycsICRtaW5vckdyaWRsaW5lcy0+Z2V0TGluZVN0eWxlUHJvcGVydHkoJ3dpZHRoJykpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdhOnNvbGlkRmlsbCcpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCJhOnskbWlub3JHcmlkbGluZXMtPmdldExpbmVDb2xvclByb3BlcnR5KCd0eXBlJyl9Iik7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgJG1pbm9yR3JpZGxpbmVzLT5nZXRMaW5lQ29sb3JQcm9wZXJ0eSgndmFsdWUnKSk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6YWxwaGEnKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkbWlub3JHcmlkbGluZXMtPmdldExpbmVDb2xvclByb3BlcnR5KCdhbHBoYScpKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsgLy9lbmQgYWxwaGEKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsgLy9lbmQgc3JnYkNscgogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOyAvL2VuZCBzb2xpZEZpbGwKCiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6cHJzdERhc2gnKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkbWlub3JHcmlkbGluZXMtPmdldExpbmVTdHlsZVByb3BlcnR5KCdkYXNoJykpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAgICAgICAgIGlmICgkbWlub3JHcmlkbGluZXMtPmdldExpbmVTdHlsZVByb3BlcnR5KCdqb2luJykgPT0gJ21pdGVyJykgewogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTptaXRlcicpOwogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdsaW0nLCAnODAwMDAwJyk7CiAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6YmV2ZWwnKTsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCFpc19udWxsKCRtaW5vckdyaWRsaW5lcy0+Z2V0TGluZVN0eWxlUHJvcGVydHkoYXJyYXkoJ2Fycm93JywgJ2hlYWQnLCAndHlwZScpKSkpIHsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6aGVhZEVuZCcpOwogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd0eXBlJywgJG1pbm9yR3JpZGxpbmVzLT5nZXRMaW5lU3R5bGVQcm9wZXJ0eShhcnJheSgnYXJyb3cnLCAnaGVhZCcsICd0eXBlJykpKTsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndycsICRtaW5vckdyaWRsaW5lcy0+Z2V0TGluZVN0eWxlQXJyb3dQYXJhbWV0ZXJzKCdoZWFkJywgJ3cnKSk7CiAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2xlbicsICRtaW5vckdyaWRsaW5lcy0+Z2V0TGluZVN0eWxlQXJyb3dQYXJhbWV0ZXJzKCdoZWFkJywgJ2xlbicpKTsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCFpc19udWxsKCRtaW5vckdyaWRsaW5lcy0+Z2V0TGluZVN0eWxlUHJvcGVydHkoYXJyYXkoJ2Fycm93JywgJ2VuZCcsICd0eXBlJykpKSkgewogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTp0YWlsRW5kJyk7CiAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3R5cGUnLCAkbWlub3JHcmlkbGluZXMtPmdldExpbmVTdHlsZVByb3BlcnR5KGFycmF5KCdhcnJvdycsICdlbmQnLCAndHlwZScpKSk7CiAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3cnLCAkbWlub3JHcmlkbGluZXMtPmdldExpbmVTdHlsZUFycm93UGFyYW1ldGVycygnZW5kJywgJ3cnKSk7CiAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2xlbicsICRtaW5vckdyaWRsaW5lcy0+Z2V0TGluZVN0eWxlQXJyb3dQYXJhbWV0ZXJzKCdlbmQnLCAnbGVuJykpOwogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsgLy9lbmQgbG4KICAgICAgICAgICAgfQoKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdhOmVmZmVjdExzdCcpOwoKICAgICAgICAgICAgaWYgKCFpc19udWxsKCRtaW5vckdyaWRsaW5lcy0+Z2V0R2xvd1NpemUoKSkpIHsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpnbG93Jyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgncmFkJywgJG1pbm9yR3JpZGxpbmVzLT5nZXRHbG93U2l6ZSgpKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgiYTp7JG1pbm9yR3JpZGxpbmVzLT5nZXRHbG93Q29sb3IoJ3R5cGUnKX0iKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkbWlub3JHcmlkbGluZXMtPmdldEdsb3dDb2xvcigndmFsdWUnKSk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6YWxwaGEnKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkbWlub3JHcmlkbGluZXMtPmdldEdsb3dDb2xvcignYWxwaGEnKSk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7IC8vZW5kIGFscGhhCiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7IC8vZW5kIHNjaGVtZUNscgogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOyAvL2VuZCBnbG93CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghaXNfbnVsbCgkbWlub3JHcmlkbGluZXMtPmdldFNoYWRvd1Byb3BlcnR5KCdwcmVzZXRzJykpKSB7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoImE6eyRtaW5vckdyaWRsaW5lcy0+Z2V0U2hhZG93UHJvcGVydHkoJ2VmZmVjdCcpfSIpOwogICAgICAgICAgICAgICAgaWYgKCFpc19udWxsKCRtaW5vckdyaWRsaW5lcy0+Z2V0U2hhZG93UHJvcGVydHkoJ2JsdXInKSkpIHsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnYmx1clJhZCcsICRtaW5vckdyaWRsaW5lcy0+Z2V0U2hhZG93UHJvcGVydHkoJ2JsdXInKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoIWlzX251bGwoJG1pbm9yR3JpZGxpbmVzLT5nZXRTaGFkb3dQcm9wZXJ0eSgnZGlzdGFuY2UnKSkpIHsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnZGlzdCcsICRtaW5vckdyaWRsaW5lcy0+Z2V0U2hhZG93UHJvcGVydHkoJ2Rpc3RhbmNlJykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCFpc19udWxsKCRtaW5vckdyaWRsaW5lcy0+Z2V0U2hhZG93UHJvcGVydHkoJ2RpcmVjdGlvbicpKSkgewogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdkaXInLCAkbWlub3JHcmlkbGluZXMtPmdldFNoYWRvd1Byb3BlcnR5KCdkaXJlY3Rpb24nKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoIWlzX251bGwoJG1pbm9yR3JpZGxpbmVzLT5nZXRTaGFkb3dQcm9wZXJ0eSgnYWxnbicpKSkgewogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdhbGduJywgJG1pbm9yR3JpZGxpbmVzLT5nZXRTaGFkb3dQcm9wZXJ0eSgnYWxnbicpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghaXNfbnVsbCgkbWlub3JHcmlkbGluZXMtPmdldFNoYWRvd1Byb3BlcnR5KGFycmF5KCdzaXplJywgJ3N4JykpKSkgewogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdzeCcsICRtaW5vckdyaWRsaW5lcy0+Z2V0U2hhZG93UHJvcGVydHkoYXJyYXkoJ3NpemUnLCAnc3gnKSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCFpc19udWxsKCRtaW5vckdyaWRsaW5lcy0+Z2V0U2hhZG93UHJvcGVydHkoYXJyYXkoJ3NpemUnLCAnc3knKSkpKSB7CiAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3N5JywgJG1pbm9yR3JpZGxpbmVzLT5nZXRTaGFkb3dQcm9wZXJ0eShhcnJheSgnc2l6ZScsICdzeScpKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoIWlzX251bGwoJG1pbm9yR3JpZGxpbmVzLT5nZXRTaGFkb3dQcm9wZXJ0eShhcnJheSgnc2l6ZScsICdreCcpKSkpIHsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgna3gnLCAkbWlub3JHcmlkbGluZXMtPmdldFNoYWRvd1Byb3BlcnR5KGFycmF5KCdzaXplJywgJ2t4JykpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghaXNfbnVsbCgkbWlub3JHcmlkbGluZXMtPmdldFNoYWRvd1Byb3BlcnR5KCdyb3RXaXRoU2hhcGUnKSkpIHsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgncm90V2l0aFNoYXBlJywgJG1pbm9yR3JpZGxpbmVzLT5nZXRTaGFkb3dQcm9wZXJ0eSgncm90V2l0aFNoYXBlJykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCJhOnskbWlub3JHcmlkbGluZXMtPmdldFNoYWRvd1Byb3BlcnR5KGFycmF5KCdjb2xvcicsICd0eXBlJykpfSIpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICRtaW5vckdyaWRsaW5lcy0+Z2V0U2hhZG93UHJvcGVydHkoYXJyYXkoJ2NvbG9yJywgJ3ZhbHVlJykpKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTphbHBoYScpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICRtaW5vckdyaWRsaW5lcy0+Z2V0U2hhZG93UHJvcGVydHkoYXJyYXkoJ2NvbG9yJywgJ2FscGhhJykpKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsgLy9lbmQgYWxwaGEKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsgLy9lbmQgY29sb3I6dHlwZQogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOyAvL2VuZCBzaGFkb3cKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCFpc19udWxsKCRtaW5vckdyaWRsaW5lcy0+Z2V0U29mdEVkZ2VzU2l6ZSgpKSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdhOnNvZnRFZGdlJyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgncmFkJywgJG1pbm9yR3JpZGxpbmVzLT5nZXRTb2Z0RWRnZXNTaXplKCkpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOyAvL2VuZCBzb2Z0RWRnZQogICAgICAgICAgICB9CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7IC8vZW5kIGVmZmVjdExzdAogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7IC8vZW5kIHNwUHIKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOyAvL2VuZCBtaW5vckdyaWRMaW5lcwogICAgICAgIH0KCiAgICAgICAgaWYgKCFpc19udWxsKCR5QXhpc0xhYmVsKSkgewogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6dGl0bGUnKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnR4Jyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpyaWNoJyk7CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6Ym9keVByJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpsc3RTdHlsZScpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6cCcpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6cicpOwoKICAgICAgICAgICAgJGNhcHRpb24gPSAkeUF4aXNMYWJlbC0+Z2V0Q2FwdGlvbigpOwogICAgICAgICAgICBpZiAoaXNfYXJyYXkoJGNhcHRpb24pKSB7CiAgICAgICAgICAgICAgICAkY2FwdGlvbiA9ICRjYXB0aW9uWzBdOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6dCcpOwogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgneG1sOnNwYWNlJywgJ3ByZXNlcnZlJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlUmF3RGF0YShQSFBFeGNlbF9TaGFyZWRfU3RyaW5nOjpDb250cm9sQ2hhcmFjdGVyUEhQMk9PWE1MKCRjYXB0aW9uKSk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgICAgIGlmICgkZ3JvdXBUeXBlICE9PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX0JVQkJMRUNIQVJUKSB7CiAgICAgICAgICAgICAgICAkbGF5b3V0ID0gJHlBeGlzTGFiZWwtPmdldExheW91dCgpOwogICAgICAgICAgICAgICAgJHRoaXMtPndyaXRlTGF5b3V0KCRsYXlvdXQsICRvYmpXcml0ZXIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6b3ZlcmxheScpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgMCk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICB9CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpudW1GbXQnKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnZm9ybWF0Q29kZScsICR4QXhpcy0+Z2V0QXhpc051bWJlckZvcm1hdCgpKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnc291cmNlTGlua2VkJywgJHhBeGlzLT5nZXRBeGlzTnVtYmVyU291cmNlTGlua2VkKCkpOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOm1ham9yVGlja01hcmsnKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgJHhBeGlzLT5nZXRBeGlzT3B0aW9uc1Byb3BlcnR5KCdtYWpvcl90aWNrX21hcmsnKSk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6bWlub3JUaWNrTWFyaycpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkeEF4aXMtPmdldEF4aXNPcHRpb25zUHJvcGVydHkoJ21pbm9yX3RpY2tfbWFyaycpKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzp0aWNrTGJsUG9zJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICR4QXhpcy0+Z2V0QXhpc09wdGlvbnNQcm9wZXJ0eSgnYXhpc19sYWJlbHMnKSk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6c3BQcicpOwoKICAgICAgICBpZiAoIWlzX251bGwoJHhBeGlzLT5nZXRGaWxsUHJvcGVydHkoJ3ZhbHVlJykpKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpzb2xpZEZpbGwnKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCJhOiIgLiAkeEF4aXMtPmdldEZpbGxQcm9wZXJ0eSgndHlwZScpKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICR4QXhpcy0+Z2V0RmlsbFByb3BlcnR5KCd2YWx1ZScpKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdhOmFscGhhJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkeEF4aXMtPmdldEZpbGxQcm9wZXJ0eSgnYWxwaGEnKSk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgfQoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6bG4nKTsKCiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3cnLCAkeEF4aXMtPmdldExpbmVTdHlsZVByb3BlcnR5KCd3aWR0aCcpKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnY2FwJywgJHhBeGlzLT5nZXRMaW5lU3R5bGVQcm9wZXJ0eSgnY2FwJykpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdjbXBkJywgJHhBeGlzLT5nZXRMaW5lU3R5bGVQcm9wZXJ0eSgnY29tcG91bmQnKSk7CgogICAgICAgIGlmICghaXNfbnVsbCgkeEF4aXMtPmdldExpbmVQcm9wZXJ0eSgndmFsdWUnKSkpIHsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdhOnNvbGlkRmlsbCcpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoImE6IiAuICR4QXhpcy0+Z2V0TGluZVByb3BlcnR5KCd0eXBlJykpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgJHhBeGlzLT5nZXRMaW5lUHJvcGVydHkoJ3ZhbHVlJykpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6YWxwaGEnKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICR4QXhpcy0+Z2V0TGluZVByb3BlcnR5KCdhbHBoYScpKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICB9CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpwcnN0RGFzaCcpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkeEF4aXMtPmdldExpbmVTdHlsZVByb3BlcnR5KCdkYXNoJykpOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgaWYgKCR4QXhpcy0+Z2V0TGluZVN0eWxlUHJvcGVydHkoJ2pvaW4nKSA9PSAnbWl0ZXInKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTptaXRlcicpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnbGltJywgJzgwMDAwMCcpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdhOmJldmVsJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICB9CgogICAgICAgIGlmICghaXNfbnVsbCgkeEF4aXMtPmdldExpbmVTdHlsZVByb3BlcnR5KGFycmF5KCdhcnJvdycsICdoZWFkJywgJ3R5cGUnKSkpKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpoZWFkRW5kJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd0eXBlJywgJHhBeGlzLT5nZXRMaW5lU3R5bGVQcm9wZXJ0eShhcnJheSgnYXJyb3cnLCAnaGVhZCcsICd0eXBlJykpKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3cnLCAkeEF4aXMtPmdldExpbmVTdHlsZUFycm93V2lkdGgoJ2hlYWQnKSk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdsZW4nLCAkeEF4aXMtPmdldExpbmVTdHlsZUFycm93TGVuZ3RoKCdoZWFkJykpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIWlzX251bGwoJHhBeGlzLT5nZXRMaW5lU3R5bGVQcm9wZXJ0eShhcnJheSgnYXJyb3cnLCAnZW5kJywgJ3R5cGUnKSkpKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTp0YWlsRW5kJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd0eXBlJywgJHhBeGlzLT5nZXRMaW5lU3R5bGVQcm9wZXJ0eShhcnJheSgnYXJyb3cnLCAnZW5kJywgJ3R5cGUnKSkpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndycsICR4QXhpcy0+Z2V0TGluZVN0eWxlQXJyb3dXaWR0aCgnZW5kJykpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnbGVuJywgJHhBeGlzLT5nZXRMaW5lU3R5bGVBcnJvd0xlbmd0aCgnZW5kJykpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgfQoKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTplZmZlY3RMc3QnKTsKCiAgICAgICAgaWYgKCFpc19udWxsKCR4QXhpcy0+Z2V0R2xvd1Byb3BlcnR5KCdzaXplJykpKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpnbG93Jyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdyYWQnLCAkeEF4aXMtPmdldEdsb3dQcm9wZXJ0eSgnc2l6ZScpKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCJhOnskeEF4aXMtPmdldEdsb3dQcm9wZXJ0eShhcnJheSgnY29sb3InLCd0eXBlJykpfSIpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgJHhBeGlzLT5nZXRHbG93UHJvcGVydHkoYXJyYXkoJ2NvbG9yJywndmFsdWUnKSkpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6YWxwaGEnKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICR4QXhpcy0+Z2V0R2xvd1Byb3BlcnR5KGFycmF5KCdjb2xvcicsJ2FscGhhJykpKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICB9CgogICAgICAgIGlmICghaXNfbnVsbCgkeEF4aXMtPmdldFNoYWRvd1Byb3BlcnR5KCdwcmVzZXRzJykpKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgiYTp7JHhBeGlzLT5nZXRTaGFkb3dQcm9wZXJ0eSgnZWZmZWN0Jyl9Iik7CgogICAgICAgICAgICBpZiAoIWlzX251bGwoJHhBeGlzLT5nZXRTaGFkb3dQcm9wZXJ0eSgnYmx1cicpKSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2JsdXJSYWQnLCAkeEF4aXMtPmdldFNoYWRvd1Byb3BlcnR5KCdibHVyJykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghaXNfbnVsbCgkeEF4aXMtPmdldFNoYWRvd1Byb3BlcnR5KCdkaXN0YW5jZScpKSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2Rpc3QnLCAkeEF4aXMtPmdldFNoYWRvd1Byb3BlcnR5KCdkaXN0YW5jZScpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWlzX251bGwoJHhBeGlzLT5nZXRTaGFkb3dQcm9wZXJ0eSgnZGlyZWN0aW9uJykpKSB7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnZGlyJywgJHhBeGlzLT5nZXRTaGFkb3dQcm9wZXJ0eSgnZGlyZWN0aW9uJykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghaXNfbnVsbCgkeEF4aXMtPmdldFNoYWRvd1Byb3BlcnR5KCdhbGduJykpKSB7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnYWxnbicsICR4QXhpcy0+Z2V0U2hhZG93UHJvcGVydHkoJ2FsZ24nKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFpc19udWxsKCR4QXhpcy0+Z2V0U2hhZG93UHJvcGVydHkoYXJyYXkoJ3NpemUnLCdzeCcpKSkpIHsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdzeCcsICR4QXhpcy0+Z2V0U2hhZG93UHJvcGVydHkoYXJyYXkoJ3NpemUnLCdzeCcpKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFpc19udWxsKCR4QXhpcy0+Z2V0U2hhZG93UHJvcGVydHkoYXJyYXkoJ3NpemUnLCdzeScpKSkpIHsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdzeScsICR4QXhpcy0+Z2V0U2hhZG93UHJvcGVydHkoYXJyYXkoJ3NpemUnLCdzeScpKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFpc19udWxsKCR4QXhpcy0+Z2V0U2hhZG93UHJvcGVydHkoYXJyYXkoJ3NpemUnLCdreCcpKSkpIHsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdreCcsICR4QXhpcy0+Z2V0U2hhZG93UHJvcGVydHkoYXJyYXkoJ3NpemUnLCdreCcpKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFpc19udWxsKCR4QXhpcy0+Z2V0U2hhZG93UHJvcGVydHkoJ3JvdFdpdGhTaGFwZScpKSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3JvdFdpdGhTaGFwZScsICR4QXhpcy0+Z2V0U2hhZG93UHJvcGVydHkoJ3JvdFdpdGhTaGFwZScpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCJhOnskeEF4aXMtPmdldFNoYWRvd1Byb3BlcnR5KGFycmF5KCdjb2xvcicsJ3R5cGUnKSl9Iik7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkeEF4aXMtPmdldFNoYWRvd1Byb3BlcnR5KGFycmF5KCdjb2xvcicsJ3ZhbHVlJykpKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdhOmFscGhhJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkeEF4aXMtPmdldFNoYWRvd1Byb3BlcnR5KGFycmF5KCdjb2xvcicsJ2FscGhhJykpKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIWlzX251bGwoJHhBeGlzLT5nZXRTb2Z0RWRnZXNTaXplKCkpKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpzb2Z0RWRnZScpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgncmFkJywgJHhBeGlzLT5nZXRTb2Z0RWRnZXNTaXplKCkpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgfQoKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7IC8vZWZmZWN0TGlzdAogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsgLy9lbmQgc3BQcgoKICAgICAgICBpZiAoJGlkMSA+IDApIHsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOmNyb3NzQXgnKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICRpZDIpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICAgICBpZiAoIWlzX251bGwoJHhBeGlzLT5nZXRBeGlzT3B0aW9uc1Byb3BlcnR5KCdob3Jpem9udGFsX2Nyb3NzZXNfdmFsdWUnKSkpIHsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpjcm9zc2VzQXQnKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkeEF4aXMtPmdldEF4aXNPcHRpb25zUHJvcGVydHkoJ2hvcml6b250YWxfY3Jvc3Nlc192YWx1ZScpKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpjcm9zc2VzJyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgJHhBeGlzLT5nZXRBeGlzT3B0aW9uc1Byb3BlcnR5KCdob3Jpem9udGFsX2Nyb3NzZXMnKSk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpjcm9zc0JldHdlZW4nKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICJtaWRDYXQiKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAgICAgaWYgKCFpc19udWxsKCR4QXhpcy0+Z2V0QXhpc09wdGlvbnNQcm9wZXJ0eSgnbWFqb3JfdW5pdCcpKSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOm1ham9yVW5pdCcpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICR4QXhpcy0+Z2V0QXhpc09wdGlvbnNQcm9wZXJ0eSgnbWFqb3JfdW5pdCcpKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCFpc19udWxsKCR4QXhpcy0+Z2V0QXhpc09wdGlvbnNQcm9wZXJ0eSgnbWlub3JfdW5pdCcpKSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOm1pbm9yVW5pdCcpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICR4QXhpcy0+Z2V0QXhpc09wdGlvbnNQcm9wZXJ0eSgnbWlub3JfdW5pdCcpKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKCRpc011bHRpTGV2ZWxTZXJpZXMpIHsKICAgICAgICAgICAgaWYgKCRncm91cFR5cGUgIT09IFBIUEV4Y2VsX0NoYXJ0X0RhdGFTZXJpZXM6OlRZUEVfQlVCQkxFQ0hBUlQpIHsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpub011bHRpTHZsTGJsJyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgMCk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgZGF0YSBzZXJpZXMgdHlwZShzKSBmb3IgYSBjaGFydCBwbG90IHNlcmllcwogICAgICoKICAgICAqIEBwYXJhbSAgUEhQRXhjZWxfQ2hhcnRfUGxvdEFyZWEgJHBsb3RBcmVhCiAgICAgKgogICAgICogQHJldHVybiAgc3RyaW5nfGFycmF5CiAgICAgKiBAdGhyb3dzICBQSFBFeGNlbF9Xcml0ZXJfRXhjZXB0aW9uCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGdldENoYXJ0VHlwZSgkcGxvdEFyZWEpCiAgICB7CiAgICAgICAgJGdyb3VwQ291bnQgPSAkcGxvdEFyZWEtPmdldFBsb3RHcm91cENvdW50KCk7CgogICAgICAgIGlmICgkZ3JvdXBDb3VudCA9PSAxKSB7CiAgICAgICAgICAgICRjaGFydFR5cGUgPSBhcnJheSgkcGxvdEFyZWEtPmdldFBsb3RHcm91cEJ5SW5kZXgoMCktPmdldFBsb3RUeXBlKCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICRjaGFydFR5cGVzID0gYXJyYXkoKTsKICAgICAgICAgICAgZm9yICgkaSA9IDA7ICRpIDwgJGdyb3VwQ291bnQ7ICsrJGkpIHsKICAgICAgICAgICAgICAgICRjaGFydFR5cGVzW10gPSAkcGxvdEFyZWEtPmdldFBsb3RHcm91cEJ5SW5kZXgoJGkpLT5nZXRQbG90VHlwZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRjaGFydFR5cGUgPSBhcnJheV91bmlxdWUoJGNoYXJ0VHlwZXMpOwogICAgICAgICAgICBpZiAoY291bnQoJGNoYXJ0VHlwZXMpID09IDApIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBQSFBFeGNlbF9Xcml0ZXJfRXhjZXB0aW9uKCdDaGFydCBpcyBub3QgeWV0IGltcGxlbWVudGVkJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiAkY2hhcnRUeXBlOwogICAgfQoKICAgIC8qKgogICAgICogV3JpdGUgUGxvdCBHcm91cCAoc2VyaWVzIG9mIHJlbGF0ZWQgcGxvdHMpCiAgICAgKgogICAgICogQHBhcmFtICBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzICRwbG90R3JvdXAKICAgICAqIEBwYXJhbSAgc3RyaW5nICRncm91cFR5cGUgVHlwZSBvZiBwbG90IGZvciBkYXRhc2VyaWVzCiAgICAgKiBAcGFyYW0gIFBIUEV4Y2VsX1NoYXJlZF9YTUxXcml0ZXIgJG9ialdyaXRlciBYTUwgV3JpdGVyCiAgICAgKiBAcGFyYW0gIGJvb2xlYW4gJiRjYXRJc011bHRpTGV2ZWxTZXJpZXMgSXMgY2F0ZWdvcnkgYSBtdWx0aS1zZXJpZXMgY2F0ZWdvcnkKICAgICAqIEBwYXJhbSAgYm9vbGVhbiAmJHZhbElzTXVsdGlMZXZlbFNlcmllcyBJcyB2YWx1ZSBzZXQgYSBtdWx0aS1zZXJpZXMgc2V0CiAgICAgKiBAcGFyYW0gIHN0cmluZyAmJHBsb3RHcm91cGluZ1R5cGUgVHlwZSBvZiBncm91cGluZyBmb3IgbXVsdGktc2VyaWVzIHZhbHVlcwogICAgICogQHBhcmFtICBQSFBFeGNlbF9Xb3Jrc2hlZXQgJHBTaGVldAogICAgICoKICAgICAqIEB0aHJvd3MgIFBIUEV4Y2VsX1dyaXRlcl9FeGNlcHRpb24KICAgICAqLwogICAgcHJpdmF0ZSBmdW5jdGlvbiB3cml0ZVBsb3RHcm91cCgkcGxvdEdyb3VwLCAkZ3JvdXBUeXBlLCAkb2JqV3JpdGVyLCAmJGNhdElzTXVsdGlMZXZlbFNlcmllcywgJiR2YWxJc011bHRpTGV2ZWxTZXJpZXMsICYkcGxvdEdyb3VwaW5nVHlwZSwgUEhQRXhjZWxfV29ya3NoZWV0ICRwU2hlZXQpCiAgICB7CiAgICAgICAgaWYgKGlzX251bGwoJHBsb3RHcm91cCkpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKCgkZ3JvdXBUeXBlID09IFBIUEV4Y2VsX0NoYXJ0X0RhdGFTZXJpZXM6OlRZUEVfQkFSQ0hBUlQpIHx8ICgkZ3JvdXBUeXBlID09IFBIUEV4Y2VsX0NoYXJ0X0RhdGFTZXJpZXM6OlRZUEVfQkFSQ0hBUlRfM0QpKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpiYXJEaXInKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICRwbG90R3JvdXAtPmdldFBsb3REaXJlY3Rpb24oKSk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICB9CgogICAgICAgIGlmICghaXNfbnVsbCgkcGxvdEdyb3VwLT5nZXRQbG90R3JvdXBpbmcoKSkpIHsKICAgICAgICAgICAgJHBsb3RHcm91cGluZ1R5cGUgPSAkcGxvdEdyb3VwLT5nZXRQbG90R3JvdXBpbmcoKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOmdyb3VwaW5nJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkcGxvdEdyb3VwaW5nVHlwZSk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICB9CgogICAgICAgIC8vICAgIEdldCB0aGVzZSBkZXRhaWxzIGJlZm9yZSB0aGUgbG9vcCwgYmVjYXVzZSB3ZSBjYW4gdXNlIHRoZSBjb3VudCB0byBjaGVjayBmb3IgdmFyeUNvbG9ycwogICAgICAgICRwbG90U2VyaWVzT3JkZXIgPSAkcGxvdEdyb3VwLT5nZXRQbG90T3JkZXIoKTsKICAgICAgICAkcGxvdFNlcmllc0NvdW50ID0gY291bnQoJHBsb3RTZXJpZXNPcmRlcik7CgogICAgICAgIGlmICgoJGdyb3VwVHlwZSAhPT0gUEhQRXhjZWxfQ2hhcnRfRGF0YVNlcmllczo6VFlQRV9SQURBUkNIQVJUKSAmJiAoJGdyb3VwVHlwZSAhPT0gUEhQRXhjZWxfQ2hhcnRfRGF0YVNlcmllczo6VFlQRV9TVE9DS0NIQVJUKSkgewogICAgICAgICAgICBpZiAoJGdyb3VwVHlwZSAhPT0gUEhQRXhjZWxfQ2hhcnRfRGF0YVNlcmllczo6VFlQRV9MSU5FQ0hBUlQpIHsKICAgICAgICAgICAgICAgIGlmICgoJGdyb3VwVHlwZSA9PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX1BJRUNIQVJUKSB8fCAoJGdyb3VwVHlwZSA9PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX1BJRUNIQVJUXzNEKSB8fCAoJGdyb3VwVHlwZSA9PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX0RPTlVUQ0hBUlQpIHx8ICgkcGxvdFNlcmllc0NvdW50ID4gMSkpIHsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6dmFyeUNvbG9ycycpOwogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAxKTsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzp2YXJ5Q29sb3JzJyk7CiAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsIDApOwogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZm9yZWFjaCAoJHBsb3RTZXJpZXNPcmRlciBhcyAkcGxvdFNlcmllc0lkeCA9PiAkcGxvdFNlcmllc1JlZikgewogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6c2VyJyk7CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6aWR4Jyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkdGhpcy0+X3Nlcmllc0luZGV4ICsgJHBsb3RTZXJpZXNJZHgpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6b3JkZXInKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICR0aGlzLT5fc2VyaWVzSW5kZXggKyAkcGxvdFNlcmllc1JlZik7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgICAgIGlmICgoJGdyb3VwVHlwZSA9PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX1BJRUNIQVJUKSB8fCAoJGdyb3VwVHlwZSA9PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX1BJRUNIQVJUXzNEKSB8fCAoJGdyb3VwVHlwZSA9PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX0RPTlVUQ0hBUlQpKSB7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6ZFB0Jyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6aWR4Jyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgMyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOmJ1YmJsZTNEJyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgMCk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnNwUHInKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpzb2xpZEZpbGwnKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpzcmdiQ2xyJyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgJ0ZGOTkwMCcpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyAgICBMYWJlbHMKICAgICAgICAgICAgJHBsb3RTZXJpZXNMYWJlbCA9ICRwbG90R3JvdXAtPmdldFBsb3RMYWJlbEJ5SW5kZXgoJHBsb3RTZXJpZXNSZWYpOwogICAgICAgICAgICBpZiAoJHBsb3RTZXJpZXNMYWJlbCAmJiAoJHBsb3RTZXJpZXNMYWJlbC0+Z2V0UG9pbnRDb3VudCgpID4gMCkpIHsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzp0eCcpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnN0clJlZicpOwogICAgICAgICAgICAgICAgJHRoaXMtPndyaXRlUGxvdFNlcmllc0xhYmVsKCRwbG90U2VyaWVzTGFiZWwsICRvYmpXcml0ZXIpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyAgICBGb3JtYXR0aW5nIGZvciB0aGUgcG9pbnRzCiAgICAgICAgICAgIGlmICgoJGdyb3VwVHlwZSA9PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX0xJTkVDSEFSVCkgfHwgKCRncm91cFR5cGUgPT0gUEhQRXhjZWxfQ2hhcnRfRGF0YVNlcmllczo6VFlQRV9TVE9DS0NIQVJUKSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnNwUHInKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYTpsbicpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3cnLCAxMjcwMCk7CiAgICAgICAgICAgICAgICBpZiAoJGdyb3VwVHlwZSA9PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX1NUT0NLQ0hBUlQpIHsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2E6bm9GaWxsJyk7CiAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkcGxvdFNlcmllc1ZhbHVlcyA9ICRwbG90R3JvdXAtPmdldFBsb3RWYWx1ZXNCeUluZGV4KCRwbG90U2VyaWVzUmVmKTsKICAgICAgICAgICAgaWYgKCRwbG90U2VyaWVzVmFsdWVzKSB7CiAgICAgICAgICAgICAgICAkcGxvdFNlcmllc01hcmtlciA9ICRwbG90U2VyaWVzVmFsdWVzLT5nZXRQb2ludE1hcmtlcigpOwogICAgICAgICAgICAgICAgaWYgKCRwbG90U2VyaWVzTWFya2VyKSB7CiAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOm1hcmtlcicpOwogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpzeW1ib2wnKTsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgJHBsb3RTZXJpZXNNYXJrZXIpOwogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCRwbG90U2VyaWVzTWFya2VyICE9PSAnbm9uZScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnNpemUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsIDMpOwogICAgICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICgoJGdyb3VwVHlwZSA9PT0gUEhQRXhjZWxfQ2hhcnRfRGF0YVNlcmllczo6VFlQRV9CQVJDSEFSVCkgfHwgKCRncm91cFR5cGUgPT09IFBIUEV4Y2VsX0NoYXJ0X0RhdGFTZXJpZXM6OlRZUEVfQkFSQ0hBUlRfM0QpIHx8ICgkZ3JvdXBUeXBlID09PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX0JVQkJMRUNIQVJUKSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOmludmVydElmTmVnYXRpdmUnKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAwKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gICAgQ2F0ZWdvcnkgTGFiZWxzCiAgICAgICAgICAgICRwbG90U2VyaWVzQ2F0ZWdvcnkgPSAkcGxvdEdyb3VwLT5nZXRQbG90Q2F0ZWdvcnlCeUluZGV4KCRwbG90U2VyaWVzUmVmKTsKICAgICAgICAgICAgaWYgKCRwbG90U2VyaWVzQ2F0ZWdvcnkgJiYgKCRwbG90U2VyaWVzQ2F0ZWdvcnktPmdldFBvaW50Q291bnQoKSA+IDApKSB7CiAgICAgICAgICAgICAgICAkY2F0SXNNdWx0aUxldmVsU2VyaWVzID0gJGNhdElzTXVsdGlMZXZlbFNlcmllcyB8fCAkcGxvdFNlcmllc0NhdGVnb3J5LT5pc011bHRpTGV2ZWxTZXJpZXMoKTsKCiAgICAgICAgICAgICAgICBpZiAoKCRncm91cFR5cGUgPT0gUEhQRXhjZWxfQ2hhcnRfRGF0YVNlcmllczo6VFlQRV9QSUVDSEFSVCkgfHwgKCRncm91cFR5cGUgPT0gUEhQRXhjZWxfQ2hhcnRfRGF0YVNlcmllczo6VFlQRV9QSUVDSEFSVF8zRCkgfHwgKCRncm91cFR5cGUgPT0gUEhQRXhjZWxfQ2hhcnRfRGF0YVNlcmllczo6VFlQRV9ET05VVENIQVJUKSkgewogICAgICAgICAgICAgICAgICAgIGlmICghaXNfbnVsbCgkcGxvdEdyb3VwLT5nZXRQbG90U3R5bGUoKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHBsb3RTdHlsZSA9ICRwbG90R3JvdXAtPmdldFBsb3RTdHlsZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHBsb3RTdHlsZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOmV4cGxvc2lvbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsIDI1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoKCRncm91cFR5cGUgPT09IFBIUEV4Y2VsX0NoYXJ0X0RhdGFTZXJpZXM6OlRZUEVfQlVCQkxFQ0hBUlQpIHx8ICgkZ3JvdXBUeXBlID09PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX1NDQVRURVJDSEFSVCkpIHsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6eFZhbCcpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6Y2F0Jyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJHRoaXMtPndyaXRlUGxvdFNlcmllc1ZhbHVlcygkcGxvdFNlcmllc0NhdGVnb3J5LCAkb2JqV3JpdGVyLCAkZ3JvdXBUeXBlLCAnc3RyJywgJHBTaGVldCk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vICAgIFZhbHVlcwogICAgICAgICAgICBpZiAoJHBsb3RTZXJpZXNWYWx1ZXMpIHsKICAgICAgICAgICAgICAgICR2YWxJc011bHRpTGV2ZWxTZXJpZXMgPSAkdmFsSXNNdWx0aUxldmVsU2VyaWVzIHx8ICRwbG90U2VyaWVzVmFsdWVzLT5pc011bHRpTGV2ZWxTZXJpZXMoKTsKCiAgICAgICAgICAgICAgICBpZiAoKCRncm91cFR5cGUgPT09IFBIUEV4Y2VsX0NoYXJ0X0RhdGFTZXJpZXM6OlRZUEVfQlVCQkxFQ0hBUlQpIHx8ICgkZ3JvdXBUeXBlID09PSBQSFBFeGNlbF9DaGFydF9EYXRhU2VyaWVzOjpUWVBFX1NDQVRURVJDSEFSVCkpIHsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6eVZhbCcpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6dmFsJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJHRoaXMtPndyaXRlUGxvdFNlcmllc1ZhbHVlcygkcGxvdFNlcmllc1ZhbHVlcywgJG9ialdyaXRlciwgJGdyb3VwVHlwZSwgJ251bScsICRwU2hlZXQpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJGdyb3VwVHlwZSA9PT0gUEhQRXhjZWxfQ2hhcnRfRGF0YVNlcmllczo6VFlQRV9CVUJCTEVDSEFSVCkgewogICAgICAgICAgICAgICAgJHRoaXMtPndyaXRlQnViYmxlcygkcGxvdFNlcmllc1ZhbHVlcywgJG9ialdyaXRlciwgJHBTaGVldCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICB9CgogICAgICAgICR0aGlzLT5fc2VyaWVzSW5kZXggKz0gJHBsb3RTZXJpZXNJZHggKyAxOwogICAgfQoKICAgIC8qKgogICAgICogV3JpdGUgUGxvdCBTZXJpZXMgTGFiZWwKICAgICAqCiAgICAgKiBAcGFyYW0gIFBIUEV4Y2VsX0NoYXJ0X0RhdGFTZXJpZXNWYWx1ZXMgJHBsb3RTZXJpZXNMYWJlbAogICAgICogQHBhcmFtICBQSFBFeGNlbF9TaGFyZWRfWE1MV3JpdGVyICRvYmpXcml0ZXIgWE1MIFdyaXRlcgogICAgICoKICAgICAqIEB0aHJvd3MgIFBIUEV4Y2VsX1dyaXRlcl9FeGNlcHRpb24KICAgICAqLwogICAgcHJpdmF0ZSBmdW5jdGlvbiB3cml0ZVBsb3RTZXJpZXNMYWJlbCgkcGxvdFNlcmllc0xhYmVsLCAkb2JqV3JpdGVyKQogICAgewogICAgICAgIGlmIChpc19udWxsKCRwbG90U2VyaWVzTGFiZWwpKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpmJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVSYXdEYXRhKCRwbG90U2VyaWVzTGFiZWwtPmdldERhdGFTb3VyY2UoKSk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6c3RyQ2FjaGUnKTsKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6cHRDb3VudCcpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkcGxvdFNlcmllc0xhYmVsLT5nZXRQb2ludENvdW50KCkpOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgZm9yZWFjaCAoJHBsb3RTZXJpZXNMYWJlbC0+Z2V0RGF0YVZhbHVlcygpIGFzICRwbG90TGFiZWxLZXkgPT4gJHBsb3RMYWJlbFZhbHVlKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpwdCcpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnaWR4JywgJHBsb3RMYWJlbEtleSk7CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6dicpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZVJhd0RhdGEoJHBsb3RMYWJlbFZhbHVlKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgfQogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdyaXRlIFBsb3QgU2VyaWVzIFZhbHVlcwogICAgICoKICAgICAqIEBwYXJhbSAgUEhQRXhjZWxfQ2hhcnRfRGF0YVNlcmllc1ZhbHVlcyAkcGxvdFNlcmllc1ZhbHVlcwogICAgICogQHBhcmFtICBQSFBFeGNlbF9TaGFyZWRfWE1MV3JpdGVyICRvYmpXcml0ZXIgWE1MIFdyaXRlcgogICAgICogQHBhcmFtICBzdHJpbmcgJGdyb3VwVHlwZSBUeXBlIG9mIHBsb3QgZm9yIGRhdGFzZXJpZXMKICAgICAqIEBwYXJhbSAgc3RyaW5nICRkYXRhVHlwZSBEYXRhdHlwZSBvZiBzZXJpZXMgdmFsdWVzCiAgICAgKiBAcGFyYW0gIFBIUEV4Y2VsX1dvcmtzaGVldCAkcFNoZWV0CiAgICAgKgogICAgICogQHRocm93cyAgUEhQRXhjZWxfV3JpdGVyX0V4Y2VwdGlvbgogICAgICovCiAgICBwcml2YXRlIGZ1bmN0aW9uIHdyaXRlUGxvdFNlcmllc1ZhbHVlcygkcGxvdFNlcmllc1ZhbHVlcywgJG9ialdyaXRlciwgJGdyb3VwVHlwZSwgJGRhdGFUeXBlID0gJ3N0cicsIFBIUEV4Y2VsX1dvcmtzaGVldCAkcFNoZWV0KQogICAgewogICAgICAgIGlmIChpc19udWxsKCRwbG90U2VyaWVzVmFsdWVzKSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoJHBsb3RTZXJpZXNWYWx1ZXMtPmlzTXVsdGlMZXZlbFNlcmllcygpKSB7CiAgICAgICAgICAgICRsZXZlbENvdW50ID0gJHBsb3RTZXJpZXNWYWx1ZXMtPm11bHRpTGV2ZWxDb3VudCgpOwoKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOm11bHRpTHZsU3RyUmVmJyk7CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6ZicpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZVJhd0RhdGEoJHBsb3RTZXJpZXNWYWx1ZXMtPmdldERhdGFTb3VyY2UoKSk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzptdWx0aUx2bFN0ckNhY2hlJyk7CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6cHRDb3VudCcpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgJHBsb3RTZXJpZXNWYWx1ZXMtPmdldFBvaW50Q291bnQoKSk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgICAgIGZvciAoJGxldmVsID0gMDsgJGxldmVsIDwgJGxldmVsQ291bnQ7ICsrJGxldmVsKSB7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6bHZsJyk7CgogICAgICAgICAgICAgICAgZm9yZWFjaCAoJHBsb3RTZXJpZXNWYWx1ZXMtPmdldERhdGFWYWx1ZXMoKSBhcyAkcGxvdFNlcmllc0tleSA9PiAkcGxvdFNlcmllc1ZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzc2V0KCRwbG90U2VyaWVzVmFsdWVbJGxldmVsXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnB0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdpZHgnLCAkcGxvdFNlcmllc0tleSk7CgogICAgICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6dicpOwogICAgICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZVJhd0RhdGEoJHBsb3RTZXJpZXNWYWx1ZVskbGV2ZWxdKTsKICAgICAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzonIC4gJGRhdGFUeXBlIC4gJ1JlZicpOwoKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOmYnKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVSYXdEYXRhKCRwbG90U2VyaWVzVmFsdWVzLT5nZXREYXRhU291cmNlKCkpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6JyAuICRkYXRhVHlwZSAuICdDYWNoZScpOwoKICAgICAgICAgICAgaWYgKCgkZ3JvdXBUeXBlICE9IFBIUEV4Y2VsX0NoYXJ0X0RhdGFTZXJpZXM6OlRZUEVfUElFQ0hBUlQpICYmICgkZ3JvdXBUeXBlICE9IFBIUEV4Y2VsX0NoYXJ0X0RhdGFTZXJpZXM6OlRZUEVfUElFQ0hBUlRfM0QpICYmICgkZ3JvdXBUeXBlICE9IFBIUEV4Y2VsX0NoYXJ0X0RhdGFTZXJpZXM6OlRZUEVfRE9OVVRDSEFSVCkpIHsKICAgICAgICAgICAgICAgIGlmICgoJHBsb3RTZXJpZXNWYWx1ZXMtPmdldEZvcm1hdENvZGUoKSAhPT0gbnVsbCkgJiYgKCRwbG90U2VyaWVzVmFsdWVzLT5nZXRGb3JtYXRDb2RlKCkgIT09ICcnKSkgewogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpmb3JtYXRDb2RlJyk7CiAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVSYXdEYXRhKCRwbG90U2VyaWVzVmFsdWVzLT5nZXRGb3JtYXRDb2RlKCkpOwogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnB0Q291bnQnKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICRwbG90U2VyaWVzVmFsdWVzLT5nZXRQb2ludENvdW50KCkpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICAgICAkZGF0YVZhbHVlcyA9ICRwbG90U2VyaWVzVmFsdWVzLT5nZXREYXRhVmFsdWVzKCk7CiAgICAgICAgICAgIGlmICghZW1wdHkoJGRhdGFWYWx1ZXMpKSB7CiAgICAgICAgICAgICAgICBpZiAoaXNfYXJyYXkoJGRhdGFWYWx1ZXMpKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJGRhdGFWYWx1ZXMgYXMgJHBsb3RTZXJpZXNLZXkgPT4gJHBsb3RTZXJpZXNWYWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6cHQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2lkeCcsICRwbG90U2VyaWVzS2V5KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzp2Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlUmF3RGF0YSgkcGxvdFNlcmllc1ZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogV3JpdGUgQnViYmxlIENoYXJ0IERldGFpbHMKICAgICAqCiAgICAgKiBAcGFyYW0gIFBIUEV4Y2VsX0NoYXJ0X0RhdGFTZXJpZXNWYWx1ZXMgJHBsb3RTZXJpZXNWYWx1ZXMKICAgICAqIEBwYXJhbSAgUEhQRXhjZWxfU2hhcmVkX1hNTFdyaXRlciAkb2JqV3JpdGVyIFhNTCBXcml0ZXIKICAgICAqCiAgICAgKiBAdGhyb3dzICBQSFBFeGNlbF9Xcml0ZXJfRXhjZXB0aW9uCiAgICAgKi8KICAgIHByaXZhdGUgZnVuY3Rpb24gd3JpdGVCdWJibGVzKCRwbG90U2VyaWVzVmFsdWVzLCAkb2JqV3JpdGVyLCBQSFBFeGNlbF9Xb3Jrc2hlZXQgJHBTaGVldCkKICAgIHsKICAgICAgICBpZiAoaXNfbnVsbCgkcGxvdFNlcmllc1ZhbHVlcykpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOmJ1YmJsZVNpemUnKTsKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6bnVtTGl0Jyk7CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpmb3JtYXRDb2RlJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVSYXdEYXRhKCdHZW5lcmFsJyk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6cHRDb3VudCcpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkcGxvdFNlcmllc1ZhbHVlcy0+Z2V0UG9pbnRDb3VudCgpKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICRkYXRhVmFsdWVzID0gJHBsb3RTZXJpZXNWYWx1ZXMtPmdldERhdGFWYWx1ZXMoKTsKICAgICAgICBpZiAoIWVtcHR5KCRkYXRhVmFsdWVzKSkgewogICAgICAgICAgICBpZiAoaXNfYXJyYXkoJGRhdGFWYWx1ZXMpKSB7CiAgICAgICAgICAgICAgICBmb3JlYWNoICgkZGF0YVZhbHVlcyBhcyAkcGxvdFNlcmllc0tleSA9PiAkcGxvdFNlcmllc1ZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnB0Jyk7CiAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2lkeCcsICRwbG90U2VyaWVzS2V5KTsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6dicpOwogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlUmF3RGF0YSgxKTsKICAgICAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6YnViYmxlM0QnKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgMCk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgfQoKICAgIC8qKgogICAgICogV3JpdGUgTGF5b3V0CiAgICAgKgogICAgICogQHBhcmFtICBQSFBFeGNlbF9DaGFydF9MYXlvdXQgJGxheW91dAogICAgICogQHBhcmFtICBQSFBFeGNlbF9TaGFyZWRfWE1MV3JpdGVyICRvYmpXcml0ZXIgWE1MIFdyaXRlcgogICAgICoKICAgICAqIEB0aHJvd3MgIFBIUEV4Y2VsX1dyaXRlcl9FeGNlcHRpb24KICAgICAqLwogICAgcHJpdmF0ZSBmdW5jdGlvbiB3cml0ZUxheW91dChQSFBFeGNlbF9DaGFydF9MYXlvdXQgJGxheW91dCA9IG51bGwsICRvYmpXcml0ZXIpCiAgICB7CiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOmxheW91dCcpOwoKICAgICAgICBpZiAoIWlzX251bGwoJGxheW91dCkpIHsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOm1hbnVhbExheW91dCcpOwoKICAgICAgICAgICAgJGxheW91dFRhcmdldCA9ICRsYXlvdXQtPmdldExheW91dFRhcmdldCgpOwogICAgICAgICAgICBpZiAoIWlzX251bGwoJGxheW91dFRhcmdldCkpIHsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpsYXlvdXRUYXJnZXQnKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkbGF5b3V0VGFyZ2V0KTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJHhNb2RlID0gJGxheW91dC0+Z2V0WE1vZGUoKTsKICAgICAgICAgICAgaWYgKCFpc19udWxsKCR4TW9kZSkpIHsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzp4TW9kZScpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICR4TW9kZSk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICR5TW9kZSA9ICRsYXlvdXQtPmdldFlNb2RlKCk7CiAgICAgICAgICAgIGlmICghaXNfbnVsbCgkeU1vZGUpKSB7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6eU1vZGUnKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkeU1vZGUpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkeCA9ICRsYXlvdXQtPmdldFhQb3NpdGlvbigpOwogICAgICAgICAgICBpZiAoIWlzX251bGwoJHgpKSB7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2M6eCcpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICR4KTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJHkgPSAkbGF5b3V0LT5nZXRZUG9zaXRpb24oKTsKICAgICAgICAgICAgaWYgKCFpc19udWxsKCR5KSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnknKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkeSk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICR3ID0gJGxheW91dC0+Z2V0V2lkdGgoKTsKICAgICAgICAgICAgaWYgKCFpc19udWxsKCR3KSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOncnKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkdyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRoID0gJGxheW91dC0+Z2V0SGVpZ2h0KCk7CiAgICAgICAgICAgIGlmICghaXNfbnVsbCgkaCkpIHsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpoJyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgJGgpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgfQoKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBXcml0ZSBBbHRlcm5hdGUgQ29udGVudCBibG9jawogICAgICoKICAgICAqIEBwYXJhbSAgUEhQRXhjZWxfU2hhcmVkX1hNTFdyaXRlciAkb2JqV3JpdGVyIFhNTCBXcml0ZXIKICAgICAqCiAgICAgKiBAdGhyb3dzICBQSFBFeGNlbF9Xcml0ZXJfRXhjZXB0aW9uCiAgICAgKi8KICAgIHByaXZhdGUgZnVuY3Rpb24gd3JpdGVBbHRlcm5hdGVDb250ZW50KCRvYmpXcml0ZXIpCiAgICB7CiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdtYzpBbHRlcm5hdGVDb250ZW50Jyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3htbG5zOm1jJywgJ2h0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9tYXJrdXAtY29tcGF0aWJpbGl0eS8yMDA2Jyk7CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnbWM6Q2hvaWNlJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3htbG5zOmMxNCcsICdodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL29mZmljZS9kcmF3aW5nLzIwMDcvOC8yL2NoYXJ0Jyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ1JlcXVpcmVzJywgJ2MxNCcpOwoKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2MxNDpzdHlsZScpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAnMTAyJyk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdtYzpGYWxsYmFjaycpOwogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpzdHlsZScpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAnMicpOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdyaXRlIFByaW50ZXIgU2V0dGluZ3MKICAgICAqCiAgICAgKiBAcGFyYW0gIFBIUEV4Y2VsX1NoYXJlZF9YTUxXcml0ZXIgJG9ialdyaXRlciBYTUwgV3JpdGVyCiAgICAgKgogICAgICogQHRocm93cyAgUEhQRXhjZWxfV3JpdGVyX0V4Y2VwdGlvbgogICAgICovCiAgICBwcml2YXRlIGZ1bmN0aW9uIHdyaXRlUHJpbnRTZXR0aW5ncygkb2JqV3JpdGVyKQogICAgewogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpwcmludFNldHRpbmdzJyk7CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpoZWFkZXJGb290ZXInKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYzpwYWdlTWFyZ2lucycpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdmb290ZXInLCAwLjMpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdoZWFkZXInLCAwLjMpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdyJywgMC43KTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnbCcsIDAuNyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3QnLCAwLjc1KTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnYicsIDAuNzUpOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjOnBhZ2VTZXR1cCcpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdvcmllbnRhdGlvbicsICJwb3J0cmFpdCIpOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgfQp9Cg==",
    "size": "64177"
}