{
    "namaFile": "lib\/phpqrcode\/qrmask.php",
    "lastUpdate": "2017-04-26+08:28:03.15",
    "contentFile": "PD9waHANCi8qDQogKiBQSFAgUVIgQ29kZSBlbmNvZGVyDQogKg0KICogTWFza2luZw0KICoNCiAqIEJhc2VkIG9uIGxpYnFyZW5jb2RlIEMgbGlicmFyeSBkaXN0cmlidXRlZCB1bmRlciBMR1BMIDIuMQ0KICogQ29weXJpZ2h0IChDKSAyMDA2LCAyMDA3LCAyMDA4LCAyMDA5IEtlbnRhcm8gRnVrdWNoaSA8ZnVrdWNoaUBtZWdhdWkubmV0Pg0KICoNCiAqIFBIUCBRUiBDb2RlIGlzIGRpc3RyaWJ1dGVkIHVuZGVyIExHUEwgMw0KICogQ29weXJpZ2h0IChDKSAyMDEwIERvbWluaWsgRHppZW5pYSA8ZGVsdGFsYWIgYXQgcG9jenRhIGRvdCBmbT4NCiAqDQogKiBUaGlzIGxpYnJhcnkgaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yDQogKiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljDQogKiBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXINCiAqIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3IgYW55IGxhdGVyIHZlcnNpb24uDQogKg0KICogVGhpcyBsaWJyYXJ5IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsDQogKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZg0KICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlIEdOVQ0KICogTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4NCiAqDQogKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljDQogKiBMaWNlbnNlIGFsb25nIHdpdGggdGhpcyBsaWJyYXJ5OyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlDQogKiBGb3VuZGF0aW9uLCBJbmMuLCA1MSBGcmFua2xpbiBTdCwgRmlmdGggRmxvb3IsIEJvc3RvbiwgTUEgMDIxMTAtMTMwMSBVU0ENCiAqLw0KIA0KCWRlZmluZSgnTjEnLCAzKTsNCglkZWZpbmUoJ04yJywgMyk7DQoJZGVmaW5lKCdOMycsIDQwKTsNCglkZWZpbmUoJ040JywgMTApOw0KDQoJY2xhc3MgUVJtYXNrIHsNCgkNCgkJcHVibGljICRydW5MZW5ndGggPSBhcnJheSgpOw0KCQkNCgkJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpIA0KICAgICAgICB7DQogICAgICAgICAgICAkdGhpcy0+cnVuTGVuZ3RoID0gYXJyYXlfZmlsbCgwLCBRUlNQRUNfV0lEVEhfTUFYICsgMSwgMCk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBwdWJsaWMgZnVuY3Rpb24gd3JpdGVGb3JtYXRJbmZvcm1hdGlvbigkd2lkdGgsICYkZnJhbWUsICRtYXNrLCAkbGV2ZWwpDQogICAgICAgIHsNCiAgICAgICAgICAgICRibGFja3MgPSAwOw0KICAgICAgICAgICAgJGZvcm1hdCA9ICBRUnNwZWM6OmdldEZvcm1hdEluZm8oJG1hc2ssICRsZXZlbCk7DQoNCiAgICAgICAgICAgIGZvcigkaT0wOyAkaTw4OyAkaSsrKSB7DQogICAgICAgICAgICAgICAgaWYoJGZvcm1hdCAmIDEpIHsNCiAgICAgICAgICAgICAgICAgICAgJGJsYWNrcyArPSAyOw0KICAgICAgICAgICAgICAgICAgICAkdiA9IDB4ODU7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgJHYgPSAweDg0Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAkZnJhbWVbOF1bJHdpZHRoIC0gMSAtICRpXSA9IGNocigkdik7DQogICAgICAgICAgICAgICAgaWYoJGkgPCA2KSB7DQogICAgICAgICAgICAgICAgICAgICRmcmFtZVskaV1bOF0gPSBjaHIoJHYpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICRmcmFtZVskaSArIDFdWzhdID0gY2hyKCR2KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgJGZvcm1hdCA9ICRmb3JtYXQgPj4gMTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZm9yKCRpPTA7ICRpPDc7ICRpKyspIHsNCiAgICAgICAgICAgICAgICBpZigkZm9ybWF0ICYgMSkgew0KICAgICAgICAgICAgICAgICAgICAkYmxhY2tzICs9IDI7DQogICAgICAgICAgICAgICAgICAgICR2ID0gMHg4NTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAkdiA9IDB4ODQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICRmcmFtZVskd2lkdGggLSA3ICsgJGldWzhdID0gY2hyKCR2KTsNCiAgICAgICAgICAgICAgICBpZigkaSA9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICRmcmFtZVs4XVs3XSA9IGNocigkdik7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgJGZyYW1lWzhdWzYgLSAkaV0gPSBjaHIoJHYpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAkZm9ybWF0ID0gJGZvcm1hdCA+PiAxOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gJGJsYWNrczsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIHB1YmxpYyBmdW5jdGlvbiBtYXNrMCgkeCwgJHkpIHsgcmV0dXJuICgkeCskeSkmMTsgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgcHVibGljIGZ1bmN0aW9uIG1hc2sxKCR4LCAkeSkgeyByZXR1cm4gKCR5JjEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICBwdWJsaWMgZnVuY3Rpb24gbWFzazIoJHgsICR5KSB7IHJldHVybiAoJHglMyk7ICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgIHB1YmxpYyBmdW5jdGlvbiBtYXNrMygkeCwgJHkpIHsgcmV0dXJuICgkeCskeSklMzsgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgcHVibGljIGZ1bmN0aW9uIG1hc2s0KCR4LCAkeSkgeyByZXR1cm4gKCgoaW50KSgkeS8yKSkrKChpbnQpKCR4LzMpKSkmMTsgfQ0KICAgICAgICBwdWJsaWMgZnVuY3Rpb24gbWFzazUoJHgsICR5KSB7IHJldHVybiAoKCR4KiR5KSYxKSsoJHgqJHkpJTM7ICAgICAgICAgICB9DQogICAgICAgIHB1YmxpYyBmdW5jdGlvbiBtYXNrNigkeCwgJHkpIHsgcmV0dXJuICgoKCR4KiR5KSYxKSsoJHgqJHkpJTMpJjE7ICAgICAgIH0NCiAgICAgICAgcHVibGljIGZ1bmN0aW9uIG1hc2s3KCR4LCAkeSkgeyByZXR1cm4gKCgoJHgqJHkpJTMpKygoJHgrJHkpJjEpKSYxOyAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIHByaXZhdGUgZnVuY3Rpb24gZ2VuZXJhdGVNYXNrTm8oJG1hc2tObywgJHdpZHRoLCAkZnJhbWUpDQogICAgICAgIHsNCiAgICAgICAgICAgICRiaXRNYXNrID0gYXJyYXlfZmlsbCgwLCAkd2lkdGgsIGFycmF5X2ZpbGwoMCwgJHdpZHRoLCAwKSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGZvcigkeT0wOyAkeTwkd2lkdGg7ICR5KyspIHsNCiAgICAgICAgICAgICAgICBmb3IoJHg9MDsgJHg8JHdpZHRoOyAkeCsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmKG9yZCgkZnJhbWVbJHldWyR4XSkgJiAweDgwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAkYml0TWFza1skeV1bJHhdID0gMDsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICRtYXNrRnVuYyA9IGNhbGxfdXNlcl9mdW5jKGFycmF5KCR0aGlzLCAnbWFzaycuJG1hc2tObyksICR4LCAkeSk7DQogICAgICAgICAgICAgICAgICAgICAgICAkYml0TWFza1skeV1bJHhdID0gKCRtYXNrRnVuYyA9PSAwKT8xOjA7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICByZXR1cm4gJGJpdE1hc2s7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHNlcmlhbCgkYml0RnJhbWUpDQogICAgICAgIHsNCiAgICAgICAgICAgICRjb2RlQXJyID0gYXJyYXkoKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZm9yZWFjaCAoJGJpdEZyYW1lIGFzICRsaW5lKQ0KICAgICAgICAgICAgICAgICRjb2RlQXJyW10gPSBqb2luKCcnLCAkbGluZSk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICByZXR1cm4gZ3pjb21wcmVzcyhqb2luKCJcbiIsICRjb2RlQXJyKSwgOSk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHVuc2VyaWFsKCRjb2RlKQ0KICAgICAgICB7DQogICAgICAgICAgICAkY29kZUFyciA9IGFycmF5KCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgICRjb2RlTGluZXMgPSBleHBsb2RlKCJcbiIsIGd6dW5jb21wcmVzcygkY29kZSkpOw0KICAgICAgICAgICAgZm9yZWFjaCAoJGNvZGVMaW5lcyBhcyAkbGluZSkNCiAgICAgICAgICAgICAgICAkY29kZUFycltdID0gc3RyX3NwbGl0KCRsaW5lKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuICRjb2RlQXJyOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgcHVibGljIGZ1bmN0aW9uIG1ha2VNYXNrTm8oJG1hc2tObywgJHdpZHRoLCAkcywgJiRkLCAkbWFza0dlbk9ubHkgPSBmYWxzZSkgDQogICAgICAgIHsNCiAgICAgICAgICAgICRiID0gMDsNCiAgICAgICAgICAgICRiaXRNYXNrID0gYXJyYXkoKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgJGZpbGVOYW1lID0gUVJfQ0FDSEVfRElSLidtYXNrXycuJG1hc2tOby5ESVJFQ1RPUllfU0VQQVJBVE9SLidtYXNrXycuJHdpZHRoLidfJy4kbWFza05vLicuZGF0JzsNCg0KICAgICAgICAgICAgaWYgKFFSX0NBQ0hFQUJMRSkgew0KICAgICAgICAgICAgICAgIGlmIChmaWxlX2V4aXN0cygkZmlsZU5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgICRiaXRNYXNrID0gc2VsZjo6dW5zZXJpYWwoZmlsZV9nZXRfY29udGVudHMoJGZpbGVOYW1lKSk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgJGJpdE1hc2sgPSAkdGhpcy0+Z2VuZXJhdGVNYXNrTm8oJG1hc2tObywgJHdpZHRoLCAkcywgJGQpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbGVfZXhpc3RzKFFSX0NBQ0hFX0RJUi4nbWFza18nLiRtYXNrTm8pKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbWtkaXIoUVJfQ0FDSEVfRElSLidtYXNrXycuJG1hc2tObyk7DQogICAgICAgICAgICAgICAgICAgIGZpbGVfcHV0X2NvbnRlbnRzKCRmaWxlTmFtZSwgc2VsZjo6c2VyaWFsKCRiaXRNYXNrKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAkYml0TWFzayA9ICR0aGlzLT5nZW5lcmF0ZU1hc2tObygkbWFza05vLCAkd2lkdGgsICRzLCAkZCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICgkbWFza0dlbk9ubHkpDQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgJGQgPSAkczsNCg0KICAgICAgICAgICAgZm9yKCR5PTA7ICR5PCR3aWR0aDsgJHkrKykgew0KICAgICAgICAgICAgICAgIGZvcigkeD0wOyAkeDwkd2lkdGg7ICR4KyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYoJGJpdE1hc2tbJHldWyR4XSA9PSAxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAkZFskeV1bJHhdID0gY2hyKG9yZCgkc1skeV1bJHhdKSBeIChpbnQpJGJpdE1hc2tbJHldWyR4XSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgJGIgKz0gKGludCkob3JkKCRkWyR5XVskeF0pICYgMSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gJGI7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBwdWJsaWMgZnVuY3Rpb24gbWFrZU1hc2soJHdpZHRoLCAkZnJhbWUsICRtYXNrTm8sICRsZXZlbCkNCiAgICAgICAgew0KICAgICAgICAgICAgJG1hc2tlZCA9IGFycmF5X2ZpbGwoMCwgJHdpZHRoLCBzdHJfcmVwZWF0KCJcMCIsICR3aWR0aCkpOw0KICAgICAgICAgICAgJHRoaXMtPm1ha2VNYXNrTm8oJG1hc2tObywgJHdpZHRoLCAkZnJhbWUsICRtYXNrZWQpOw0KICAgICAgICAgICAgJHRoaXMtPndyaXRlRm9ybWF0SW5mb3JtYXRpb24oJHdpZHRoLCAkbWFza2VkLCAkbWFza05vLCAkbGV2ZWwpOw0KICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuICRtYXNrZWQ7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBwdWJsaWMgZnVuY3Rpb24gY2FsY04xTjMoJGxlbmd0aCkNCiAgICAgICAgew0KICAgICAgICAgICAgJGRlbWVyaXQgPSAwOw0KDQogICAgICAgICAgICBmb3IoJGk9MDsgJGk8JGxlbmd0aDsgJGkrKykgew0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmKCR0aGlzLT5ydW5MZW5ndGhbJGldID49IDUpIHsNCiAgICAgICAgICAgICAgICAgICAgJGRlbWVyaXQgKz0gKE4xICsgKCR0aGlzLT5ydW5MZW5ndGhbJGldIC0gNSkpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZigkaSAmIDEpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYoKCRpID49IDMpICYmICgkaSA8ICgkbGVuZ3RoLTIpKSAmJiAoJHRoaXMtPnJ1bkxlbmd0aFskaV0gJSAzID09IDApKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAkZmFjdCA9IChpbnQpKCR0aGlzLT5ydW5MZW5ndGhbJGldIC8gMyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZigoJHRoaXMtPnJ1bkxlbmd0aFskaS0yXSA9PSAkZmFjdCkgJiYNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICgkdGhpcy0+cnVuTGVuZ3RoWyRpLTFdID09ICRmYWN0KSAmJg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgKCR0aGlzLT5ydW5MZW5ndGhbJGkrMV0gPT0gJGZhY3QpICYmDQogICAgICAgICAgICAgICAgICAgICAgICAgICAoJHRoaXMtPnJ1bkxlbmd0aFskaSsyXSA9PSAkZmFjdCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigoJHRoaXMtPnJ1bkxlbmd0aFskaS0zXSA8IDApIHx8ICgkdGhpcy0+cnVuTGVuZ3RoWyRpLTNdID49ICg0ICogJGZhY3QpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZGVtZXJpdCArPSBOMzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoKCgkaSszKSA+PSAkbGVuZ3RoKSB8fCAoJHRoaXMtPnJ1bkxlbmd0aFskaSszXSA+PSAoNCAqICRmYWN0KSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGRlbWVyaXQgKz0gTjM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuICRkZW1lcml0Ow0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgcHVibGljIGZ1bmN0aW9uIGV2YWx1YXRlU3ltYm9sKCR3aWR0aCwgJGZyYW1lKQ0KICAgICAgICB7DQogICAgICAgICAgICAkaGVhZCA9IDA7DQogICAgICAgICAgICAkZGVtZXJpdCA9IDA7DQoNCiAgICAgICAgICAgIGZvcigkeT0wOyAkeTwkd2lkdGg7ICR5KyspIHsNCiAgICAgICAgICAgICAgICAkaGVhZCA9IDA7DQogICAgICAgICAgICAgICAgJHRoaXMtPnJ1bkxlbmd0aFswXSA9IDE7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgJGZyYW1lWSA9ICRmcmFtZVskeV07DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKCR5PjApDQogICAgICAgICAgICAgICAgICAgICRmcmFtZVlNID0gJGZyYW1lWyR5LTFdOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGZvcigkeD0wOyAkeDwkd2lkdGg7ICR4KyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYoKCR4ID4gMCkgJiYgKCR5ID4gMCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICRiMjIgPSBvcmQoJGZyYW1lWVskeF0pICYgb3JkKCRmcmFtZVlbJHgtMV0pICYgb3JkKCRmcmFtZVlNWyR4XSkgJiBvcmQoJGZyYW1lWU1bJHgtMV0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgJHcyMiA9IG9yZCgkZnJhbWVZWyR4XSkgfCBvcmQoJGZyYW1lWVskeC0xXSkgfCBvcmQoJGZyYW1lWU1bJHhdKSB8IG9yZCgkZnJhbWVZTVskeC0xXSk7DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCgkYjIyIHwgKCR3MjIgXiAxKSkmMSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRkZW1lcml0ICs9IE4yOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmKCgkeCA9PSAwKSAmJiAob3JkKCRmcmFtZVlbJHhdKSAmIDEpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+cnVuTGVuZ3RoWzBdID0gLTE7DQogICAgICAgICAgICAgICAgICAgICAgICAkaGVhZCA9IDE7DQogICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+cnVuTGVuZ3RoWyRoZWFkXSA9IDE7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZigkeCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKChvcmQoJGZyYW1lWVskeF0pIF4gb3JkKCRmcmFtZVlbJHgtMV0pKSAmIDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaGVhZCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLT5ydW5MZW5ndGhbJGhlYWRdID0gMTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPnJ1bkxlbmd0aFskaGVhZF0rKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICAgICAgICAkZGVtZXJpdCArPSAkdGhpcy0+Y2FsY04xTjMoJGhlYWQrMSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGZvcigkeD0wOyAkeDwkd2lkdGg7ICR4KyspIHsNCiAgICAgICAgICAgICAgICAkaGVhZCA9IDA7DQogICAgICAgICAgICAgICAgJHRoaXMtPnJ1bkxlbmd0aFswXSA9IDE7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgZm9yKCR5PTA7ICR5PCR3aWR0aDsgJHkrKykgew0KICAgICAgICAgICAgICAgICAgICBpZigkeSA9PSAwICYmIChvcmQoJGZyYW1lWyR5XVskeF0pICYgMSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLT5ydW5MZW5ndGhbMF0gPSAtMTsNCiAgICAgICAgICAgICAgICAgICAgICAgICRoZWFkID0gMTsNCiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLT5ydW5MZW5ndGhbJGhlYWRdID0gMTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKCR5ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoKG9yZCgkZnJhbWVbJHldWyR4XSkgXiBvcmQoJGZyYW1lWyR5LTFdWyR4XSkpICYgMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRoZWFkKys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPnJ1bkxlbmd0aFskaGVhZF0gPSAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+cnVuTGVuZ3RoWyRoZWFkXSsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgJGRlbWVyaXQgKz0gJHRoaXMtPmNhbGNOMU4zKCRoZWFkKzEpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gJGRlbWVyaXQ7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgcHVibGljIGZ1bmN0aW9uIG1hc2soJHdpZHRoLCAkZnJhbWUsICRsZXZlbCkNCiAgICAgICAgew0KICAgICAgICAgICAgJG1pbkRlbWVyaXQgPSBQSFBfSU5UX01BWDsNCiAgICAgICAgICAgICRiZXN0TWFza051bSA9IDA7DQogICAgICAgICAgICAkYmVzdE1hc2sgPSBhcnJheSgpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAkY2hlY2tlZF9tYXNrcyA9IGFycmF5KDAsMSwyLDMsNCw1LDYsNyk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChRUl9GSU5EX0ZST01fUkFORE9NICE9PSBmYWxzZSkgew0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgJGhvd01hbnVPdXQgPSA4LShRUl9GSU5EX0ZST01fUkFORE9NICUgOSk7DQogICAgICAgICAgICAgICAgZm9yICgkaSA9IDA7ICRpIDwgICRob3dNYW51T3V0OyAkaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICRyZW1Qb3MgPSByYW5kICgwLCBjb3VudCgkY2hlY2tlZF9tYXNrcyktMSk7DQogICAgICAgICAgICAgICAgICAgIHVuc2V0KCRjaGVja2VkX21hc2tzWyRyZW1Qb3NdKTsNCiAgICAgICAgICAgICAgICAgICAgJGNoZWNrZWRfbWFza3MgPSBhcnJheV92YWx1ZXMoJGNoZWNrZWRfbWFza3MpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAkYmVzdE1hc2sgPSAkZnJhbWU7DQogICAgICAgICAgICAgDQogICAgICAgICAgICBmb3JlYWNoKCRjaGVja2VkX21hc2tzIGFzICRpKSB7DQogICAgICAgICAgICAgICAgJG1hc2sgPSBhcnJheV9maWxsKDAsICR3aWR0aCwgc3RyX3JlcGVhdCgiXDAiLCAkd2lkdGgpKTsNCg0KICAgICAgICAgICAgICAgICRkZW1lcml0ID0gMDsNCiAgICAgICAgICAgICAgICAkYmxhY2tzID0gMDsNCiAgICAgICAgICAgICAgICAkYmxhY2tzICA9ICR0aGlzLT5tYWtlTWFza05vKCRpLCAkd2lkdGgsICRmcmFtZSwgJG1hc2spOw0KICAgICAgICAgICAgICAgICRibGFja3MgKz0gJHRoaXMtPndyaXRlRm9ybWF0SW5mb3JtYXRpb24oJHdpZHRoLCAkbWFzaywgJGksICRsZXZlbCk7DQogICAgICAgICAgICAgICAgJGJsYWNrcyAgPSAoaW50KSgxMDAgKiAkYmxhY2tzIC8gKCR3aWR0aCAqICR3aWR0aCkpOw0KICAgICAgICAgICAgICAgICRkZW1lcml0ID0gKGludCkoKGludCkoYWJzKCRibGFja3MgLSA1MCkgLyA1KSAqIE40KTsNCiAgICAgICAgICAgICAgICAkZGVtZXJpdCArPSAkdGhpcy0+ZXZhbHVhdGVTeW1ib2woJHdpZHRoLCAkbWFzayk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYoJGRlbWVyaXQgPCAkbWluRGVtZXJpdCkgew0KICAgICAgICAgICAgICAgICAgICAkbWluRGVtZXJpdCA9ICRkZW1lcml0Ow0KICAgICAgICAgICAgICAgICAgICAkYmVzdE1hc2sgPSAkbWFzazsNCiAgICAgICAgICAgICAgICAgICAgJGJlc3RNYXNrTnVtID0gJGk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICByZXR1cm4gJGJlc3RNYXNrOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICB9DQo=",
    "size": "12584"
}