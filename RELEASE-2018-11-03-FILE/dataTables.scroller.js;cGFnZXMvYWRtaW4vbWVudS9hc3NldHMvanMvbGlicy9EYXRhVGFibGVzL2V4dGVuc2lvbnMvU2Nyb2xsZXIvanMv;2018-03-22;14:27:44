{
    "namaFile": "pages\/admin\/menu\/assets\/js\/libs\/DataTables\/extensions\/Scroller\/js\/dataTables.scroller.js",
    "lastUpdate": "2018-03-22+14:27:44.56",
    "contentFile": "LyohIFNjcm9sbGVyIDEuMi4yCiAqIMKpMjAxMS0yMDE0IFNwcnlNZWRpYSBMdGQgLSBkYXRhdGFibGVzLm5ldC9saWNlbnNlCiAqLwoKLyoqCiAqIEBzdW1tYXJ5ICAgICBTY3JvbGxlcgogKiBAZGVzY3JpcHRpb24gVmlydHVhbCByZW5kZXJpbmcgZm9yIERhdGFUYWJsZXMKICogQHZlcnNpb24gICAgIDEuMi4yCiAqIEBmaWxlICAgICAgICBkYXRhVGFibGVzLnNjcm9sbGVyLmpzCiAqIEBhdXRob3IgICAgICBTcHJ5TWVkaWEgTHRkICh3d3cuc3ByeW1lZGlhLmNvLnVrKQogKiBAY29udGFjdCAgICAgd3d3LnNwcnltZWRpYS5jby51ay9jb250YWN0CiAqIEBjb3B5cmlnaHQgICBDb3B5cmlnaHQgMjAxMS0yMDE0IFNwcnlNZWRpYSBMdGQuCiAqCiAqIFRoaXMgc291cmNlIGZpbGUgaXMgZnJlZSBzb2Z0d2FyZSwgYXZhaWxhYmxlIHVuZGVyIHRoZSBmb2xsb3dpbmcgbGljZW5zZToKICogICBNSVQgbGljZW5zZSAtIGh0dHA6Ly9kYXRhdGFibGVzLm5ldC9saWNlbnNlL21pdAogKgogKiBUaGlzIHNvdXJjZSBmaWxlIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dAogKiBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mIE1FUkNIQU5UQUJJTElUWQogKiBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZSBsaWNlbnNlIGZpbGVzIGZvciBkZXRhaWxzLgogKgogKiBGb3IgZGV0YWlscyBwbGVhc2UgcmVmZXIgdG86IGh0dHA6Ly93d3cuZGF0YXRhYmxlcy5uZXQKICovCgooZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKXsKCgp2YXIgZmFjdG9yeSA9IGZ1bmN0aW9uKCAkLCBEYXRhVGFibGUgKSB7CiJ1c2Ugc3RyaWN0IjsKCi8qKgogKiBTY3JvbGxlciBpcyBhIHZpcnR1YWwgcmVuZGVyaW5nIHBsdWctaW4gZm9yIERhdGFUYWJsZXMgd2hpY2ggYWxsb3dzIGxhcmdlCiAqIGRhdGFzZXRzIHRvIGJlIGRyYXduIG9uIHNjcmVlbiBldmVyeSBxdWlja2x5LiBXaGF0IHRoZSB2aXJ0dWFsIHJlbmRlcmluZyBtZWFucwogKiBpcyB0aGF0IG9ubHkgdGhlIHZpc2libGUgcG9ydGlvbiBvZiB0aGUgdGFibGUgKGFuZCBhIGJpdCB0byBlaXRoZXIgc2lkZSB0byBtYWtlCiAqIHRoZSBzY3JvbGxpbmcgc21vb3RoKSBpcyBkcmF3biwgd2hpbGUgdGhlIHNjcm9sbGluZyBjb250YWluZXIgZ2l2ZXMgdGhlCiAqIHZpc3VhbCBpbXByZXNzaW9uIHRoYXQgdGhlIHdob2xlIHRhYmxlIGlzIHZpc2libGUuIFRoaXMgaXMgZG9uZSBieSBtYWtpbmcgdXNlCiAqIG9mIHRoZSBwYWdpbmF0aW9uIGFiaWxpdGllcyBvZiBEYXRhVGFibGVzIGFuZCBtb3ZpbmcgdGhlIHRhYmxlIGFyb3VuZCBpbiB0aGUKICogc2Nyb2xsaW5nIGNvbnRhaW5lciBEYXRhVGFibGVzIGFkZHMgdG8gdGhlIHBhZ2UuIFRoZSBzY3JvbGxpbmcgY29udGFpbmVyIGlzCiAqIGZvcmNlZCB0byB0aGUgaGVpZ2h0IGl0IHdvdWxkIGJlIGZvciB0aGUgZnVsbCB0YWJsZSBkaXNwbGF5IHVzaW5nIGFuIGV4dHJhCiAqIGVsZW1lbnQuCiAqCiAqIE5vdGUgdGhhdCByb3dzIGluIHRoZSB0YWJsZSBNVVNUIGFsbCBiZSB0aGUgc2FtZSBoZWlnaHQuIEluZm9ybWF0aW9uIGluIGEgY2VsbAogKiB3aGljaCBleHBhbmRzIG9uIHRvIG11bHRpcGxlIGxpbmVzIHdpbGwgY2F1c2Ugc29tZSBvZGQgYmVoYXZpb3VyIGluIHRoZSBzY3JvbGxpbmcuCiAqCiAqIFNjcm9sbGVyIGlzIGluaXRpYWxpc2VkIGJ5IHNpbXBseSBpbmNsdWRpbmcgdGhlIGxldHRlciAnUycgaW4gdGhlIHNEb20gZm9yIHRoZQogKiB0YWJsZSB5b3Ugd2FudCB0byBoYXZlIHRoaXMgZmVhdHVyZSBlbmFibGVkIG9uLiBOb3RlIHRoYXQgdGhlICdTJyBtdXN0IGNvbWUKICogQUZURVIgdGhlICd0JyBwYXJhbWV0ZXIgaW4gYGRvbWAuCiAqCiAqIEtleSBmZWF0dXJlcyBpbmNsdWRlOgogKiAgIDx1bCBjbGFzcz0ibGltaXRfbGVuZ3RoIj4KICogICAgIDxsaT5TcGVlZCEgVGhlIGFpbSBvZiBTY3JvbGxlciBmb3IgRGF0YVRhYmxlcyBpcyB0byBtYWtlIHJlbmRlcmluZyBsYXJnZSBkYXRhIHNldHMgZmFzdDwvbGk+CiAqICAgICA8bGk+RnVsbCBjb21wYXRpYmlsaXR5IHdpdGggZGVmZXJyZWQgcmVuZGVyaW5nIGluIERhdGFUYWJsZXMgMS45IGZvciBtYXhpbXVtIHNwZWVkPC9saT4KICogICAgIDxsaT5EaXNwbGF5IG1pbGxpb25zIG9mIHJvd3M8L2xpPgogKiAgICAgPGxpPkludGVncmF0aW9uIHdpdGggc3RhdGUgc2F2aW5nIGluIERhdGFUYWJsZXMgKHNjcm9sbGluZyBwb3NpdGlvbiBpcyBzYXZlZCk8L2xpPgogKiAgICAgPGxpPkVhc3kgdG8gdXNlPC9saT4KICogICA8L3VsPgogKgogKiAgQGNsYXNzCiAqICBAY29uc3RydWN0b3IKICogIEBnbG9iYWwKICogIEBwYXJhbSB7b2JqZWN0fSBvRFQgRGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QKICogIEBwYXJhbSB7b2JqZWN0fSBbb09wdHM9e31dIENvbmZpZ3VyYXRpb24gb2JqZWN0IGZvciBGaXhlZENvbHVtbnMuIE9wdGlvbnMgCiAqICAgIGFyZSBkZWZpbmVkIGJ5IHtAbGluayBTY3JvbGxlci5kZWZhdWx0c30KICoKICogIEByZXF1aXJlcyBqUXVlcnkgMS43KwogKiAgQHJlcXVpcmVzIERhdGFUYWJsZXMgMS45LjArCiAqCiAqICBAZXhhbXBsZQogKiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHsKICogICAgICAgICQoJyNleGFtcGxlJykuZGF0YVRhYmxlKCB7CiAqICAgICAgICAgICAgInNTY3JvbGxZIjogIjIwMHB4IiwKICogICAgICAgICAgICAic0FqYXhTb3VyY2UiOiAibWVkaWEvZGF0YXNldC9sYXJnZS50eHQiLAogKiAgICAgICAgICAgICJzRG9tIjogImZydGlTIiwKICogICAgICAgICAgICAiYkRlZmVyUmVuZGVyIjogdHJ1ZQogKiAgICAgICAgfSApOwogKiAgICB9ICk7CiAqLwp2YXIgU2Nyb2xsZXIgPSBmdW5jdGlvbiAoIG9EVFNldHRpbmdzLCBvT3B0cyApIHsKCS8qIFNhbml0eSBjaGVjayAtIHlvdSBqdXN0IGtub3cgaXQgd2lsbCBoYXBwZW4gKi8KCWlmICggISB0aGlzIGluc3RhbmNlb2YgU2Nyb2xsZXIgKQoJewoJCWFsZXJ0KCAiU2Nyb2xsZXIgd2FybmluZzogU2Nyb2xsZXIgbXVzdCBiZSBpbml0aWFsaXNlZCB3aXRoIHRoZSAnbmV3JyBrZXl3b3JkLiIgKTsKCQlyZXR1cm47Cgl9CgoJaWYgKCB0eXBlb2Ygb09wdHMgPT0gJ3VuZGVmaW5lZCcgKQoJewoJCW9PcHRzID0ge307Cgl9CgoJLyoqCgkgKiBTZXR0aW5ncyBvYmplY3Qgd2hpY2ggY29udGFpbnMgY3VzdG9taXNhYmxlIGluZm9ybWF0aW9uIGZvciB0aGUgU2Nyb2xsZXIgaW5zdGFuY2UKCSAqIEBuYW1lc3BhY2UKCSAqIEBwcml2YXRlCgkgKiBAZXh0ZW5kcyBTY3JvbGxlci5kZWZhdWx0cwoJICovCgl0aGlzLnMgPSB7CgkJLyoqCgkJICogRGF0YVRhYmxlcyBzZXR0aW5ncyBvYmplY3QKCQkgKiAgQHR5cGUgICAgIG9iamVjdAoJCSAqICBAZGVmYXVsdCAgUGFzc2VkIGluIGFzIGZpcnN0IHBhcmFtZXRlciB0byBjb25zdHJ1Y3RvcgoJCSAqLwoJCSJkdCI6IG9EVFNldHRpbmdzLAoKCQkvKioKCQkgKiBQaXhlbCBsb2NhdGlvbiBvZiB0aGUgdG9wIG9mIHRoZSBkcmF3biB0YWJsZSBpbiB0aGUgdmlld3BvcnQKCQkgKiAgQHR5cGUgICAgIGludAoJCSAqICBAZGVmYXVsdCAgMAoJCSAqLwoJCSJ0YWJsZVRvcCI6IDAsCgoJCS8qKgoJCSAqIFBpeGVsIGxvY2F0aW9uIG9mIHRoZSBib3R0b20gb2YgdGhlIGRyYXduIHRhYmxlIGluIHRoZSB2aWV3cG9ydAoJCSAqICBAdHlwZSAgICAgaW50CgkJICogIEBkZWZhdWx0ICAwCgkJICovCgkJInRhYmxlQm90dG9tIjogMCwKCgkJLyoqCgkJICogUGl4ZWwgbG9jYXRpb24gb2YgdGhlIGJvdW5kYXJ5IGZvciB3aGVuIHRoZSBuZXh0IGRhdGEgc2V0IHNob3VsZCBiZSBsb2FkZWQgYW5kIGRyYXduCgkJICogd2hlbiBzY3JvbGxpbmcgdXAgdGhlIHdheS4KCQkgKiAgQHR5cGUgICAgIGludAoJCSAqICBAZGVmYXVsdCAgMAoJCSAqICBAcHJpdmF0ZQoJCSAqLwoJCSJyZWRyYXdUb3AiOiAwLAoKCQkvKioKCQkgKiBQaXhlbCBsb2NhdGlvbiBvZiB0aGUgYm91bmRhcnkgZm9yIHdoZW4gdGhlIG5leHQgZGF0YSBzZXQgc2hvdWxkIGJlIGxvYWRlZCBhbmQgZHJhd24KCQkgKiB3aGVuIHNjcm9sbGluZyBkb3duIHRoZSB3YXkuIE5vdGUgdGhhdCB0aGlzIGlzIGFjdHVhbGx5IGNhbGN1bGF0ZWQgYXMgdGhlIG9mZnNldCBmcm9tCgkJICogdGhlIHRvcC4KCQkgKiAgQHR5cGUgICAgIGludAoJCSAqICBAZGVmYXVsdCAgMAoJCSAqICBAcHJpdmF0ZQoJCSAqLwoJCSJyZWRyYXdCb3R0b20iOiAwLAoKCQkvKioKCQkgKiBBdXRvIHJvdyBoZWlnaHQgb3Igbm90IGluZGljYXRvcgoJCSAqICBAdHlwZSAgICAgYm9vbAoJCSAqICBAZGVmYXVsdCAgMAoJCSAqLwoJCSJhdXRvSGVpZ2h0IjogdHJ1ZSwKCgkJLyoqCgkJICogTnVtYmVyIG9mIHJvd3MgY2FsY3VsYXRlZCBhcyB2aXNpYmxlIGluIHRoZSB2aXNpYmxlIHZpZXdwb3J0CgkJICogIEB0eXBlICAgICBpbnQKCQkgKiAgQGRlZmF1bHQgIDAKCQkgKi8KCQkidmlld3BvcnRSb3dzIjogMCwKCgkJLyoqCgkJICogc2V0VGltZW91dCByZWZlcmVuY2UgZm9yIHN0YXRlIHNhdmluZywgdXNlZCB3aGVuIHN0YXRlIHNhdmluZyBpcyBlbmFibGVkIGluIHRoZSBEYXRhVGFibGUKCQkgKiBhbmQgd2hlbiB0aGUgdXNlciBzY3JvbGxzIHRoZSB2aWV3cG9ydCBpbiBvcmRlciB0byBzdG9wIHRoZSBjb29raWUgc2V0IHRha2luZyB0b28gbXVjaAoJCSAqIENQVSEKCQkgKiAgQHR5cGUgICAgIGludAoJCSAqICBAZGVmYXVsdCAgMAoJCSAqLwoJCSJzdGF0ZVRPIjogbnVsbCwKCgkJLyoqCgkJICogc2V0VGltZW91dCByZWZlcmVuY2UgZm9yIHRoZSByZWRyYXcsIHVzZWQgd2hlbiBzZXJ2ZXItc2lkZSBwcm9jZXNzaW5nIGlzIGVuYWJsZWQgaW4gdGhlCgkJICogRGF0YVRhYmxlcyBpbiBvcmRlciB0byBwcmV2ZW50IERvU2luZyB0aGUgc2VydmVyCgkJICogIEB0eXBlICAgICBpbnQKCQkgKiAgQGRlZmF1bHQgIG51bGwKCQkgKi8KCQkiZHJhd1RPIjogbnVsbCwKCgkJaGVpZ2h0czogewoJCQlqdW1wOiBudWxsLAoJCQlwYWdlOiBudWxsLAoJCQl2aXJ0dWFsOiBudWxsLAoJCQlzY3JvbGw6IG51bGwsCgoJCQkvKioKCQkJICogSGVpZ2h0IG9mIHJvd3MgaW4gdGhlIHRhYmxlCgkJCSAqICBAdHlwZSAgICAgaW50CgkJCSAqICBAZGVmYXVsdCAgMAoJCQkgKi8KCQkJcm93OiBudWxsLAoKCQkJLyoqCgkJCSAqIFBpeGVsIGhlaWdodCBvZiB0aGUgdmlld3BvcnQKCQkJICogIEB0eXBlICAgICBpbnQKCQkJICogIEBkZWZhdWx0ICAwCgkJCSAqLwoJCQl2aWV3cG9ydDogbnVsbAoJCX0sCgoJCXRvcFJvd0Zsb2F0OiAwLAoJCXNjcm9sbERyYXdEaWZmOiBudWxsLAoJCWxvYWRlclZpc2libGU6IGZhbHNlCgl9OwoKCS8vIEB0b2RvIFRoZSBkZWZhdWx0cyBzaG91bGQgZXh0ZW5kIGEgYGNgIHByb3BlcnR5IGFuZCB0aGUgaW50ZXJuYWwgc2V0dGluZ3MKCS8vIG9ubHkgaGVsZCBpbiB0aGUgYHNgIHByb3BlcnR5LiBBdCB0aGUgbW9tZW50IHRoZXkgYXJlIG1peGVkCgl0aGlzLnMgPSAkLmV4dGVuZCggdGhpcy5zLCBTY3JvbGxlci5vRGVmYXVsdHMsIG9PcHRzICk7CgoJLy8gV29ya2Fyb3VuZCBmb3Igcm93IGhlaWdodCBiZWluZyByZWFkIGZyb20gaGVpZ2h0IG9iamVjdCAoc2VlIGFib3ZlIGNvbW1lbnQpCgl0aGlzLnMuaGVpZ2h0cy5yb3cgPSB0aGlzLnMucm93SGVpZ2h0OwoKCS8qKgoJICogRE9NIGVsZW1lbnRzIHVzZWQgYnkgdGhlIGNsYXNzIGluc3RhbmNlCgkgKiBAcHJpdmF0ZQoJICogQG5hbWVzcGFjZQoJICoKCSAqLwoJdGhpcy5kb20gPSB7CgkJImZvcmNlIjogICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksCgkJInNjcm9sbGVyIjogbnVsbCwKCQkidGFibGUiOiAgICBudWxsLAoJCSJsb2FkZXIiOiAgIG51bGwKCX07CgoJLyogQXR0YWNoIHRoZSBpbnN0YW5jZSB0byB0aGUgRGF0YVRhYmxlcyBpbnN0YW5jZSBzbyBpdCBjYW4gYmUgYWNjZXNzZWQgKi8KCXRoaXMucy5kdC5vU2Nyb2xsZXIgPSB0aGlzOwoKCS8qIExldCdzIGRvIGl0ICovCgl0aGlzLl9mbkNvbnN0cnVjdCgpOwp9OwoKCgpTY3JvbGxlci5wcm90b3R5cGUgPSAvKiogQGxlbmRzIFNjcm9sbGVyLnByb3RvdHlwZSAqL3sKCS8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoKCSAqIFB1YmxpYyBtZXRob2RzCgkgKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqLwoKCS8qKgoJICogQ2FsY3VsYXRlIHRoZSBwaXhlbCBwb3NpdGlvbiBmcm9tIHRoZSB0b3Agb2YgdGhlIHNjcm9sbGluZyBjb250YWluZXIgZm9yCgkgKiBhIGdpdmVuIHJvdwoJICogIEBwYXJhbSB7aW50fSBpUm93IFJvdyBudW1iZXIgdG8gY2FsY3VsYXRlIHRoZSBwb3NpdGlvbiBvZgoJICogIEByZXR1cm5zIHtpbnR9IFBpeGVscwoJICogIEBleGFtcGxlCgkgKiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHsKCSAqICAgICAgJCgnI2V4YW1wbGUnKS5kYXRhVGFibGUoIHsKCSAqICAgICAgICAic1Njcm9sbFkiOiAiMjAwcHgiLAoJICogICAgICAgICJzQWpheFNvdXJjZSI6ICJtZWRpYS9kYXRhc2V0L2xhcmdlLnR4dCIsCgkgKiAgICAgICAgInNEb20iOiAiZnJ0aVMiLAoJICogICAgICAgICJiRGVmZXJSZW5kZXIiOiB0cnVlLAoJICogICAgICAgICJmbkluaXRDb21wbGV0ZSI6IGZ1bmN0aW9uIChvKSB7CgkgKiAgICAgICAgICAvLyBGaW5kIHdoZXJlIHJvdyAyNSBpcwoJICogICAgICAgICAgYWxlcnQoIG8ub1Njcm9sbGVyLmZuUm93VG9QaXhlbHMoIDI1ICkgKTsKCSAqICAgICAgICB9CgkgKiAgICAgIH0gKTsKCSAqICAgIH0gKTsKCSAqLwoJImZuUm93VG9QaXhlbHMiOiBmdW5jdGlvbiAoIHJvd0lkeCwgaW50UGFyc2UsIHZpcnR1YWwgKQoJewoJCXZhciBwaXhlbHM7CgoJCWlmICggdmlydHVhbCApIHsKCQkJcGl4ZWxzID0gdGhpcy5fZG9tYWluKCAndmlydHVhbFRvUGh5c2ljYWwnLCByb3dJZHggKiB0aGlzLnMuaGVpZ2h0cy5yb3cgKTsKCQl9CgkJZWxzZSB7CgkJCXZhciBkaWZmID0gcm93SWR4IC0gdGhpcy5zLmJhc2VSb3dUb3A7CgkJCXBpeGVscyA9IHRoaXMucy5iYXNlU2Nyb2xsVG9wICsgKGRpZmYgKiB0aGlzLnMuaGVpZ2h0cy5yb3cpOwoJCX0KCgkJcmV0dXJuIGludFBhcnNlIHx8IGludFBhcnNlID09PSB1bmRlZmluZWQgPwoJCQlwYXJzZUludCggcGl4ZWxzLCAxMCApIDoKCQkJcGl4ZWxzOwoJfSwKCgoJLyoqCgkgKiBDYWxjdWxhdGUgdGhlIHJvdyBudW1iZXIgdGhhdCB3aWxsIGJlIGZvdW5kIGF0IHRoZSBnaXZlbiBwaXhlbCBwb3NpdGlvbgoJICogKHktc2Nyb2xsKS4KCSAqCgkgKiBQbGVhc2Ugbm90ZSB0aGF0IHdoZW4gdGhlIGhlaWdodCBvZiB0aGUgZnVsbCB0YWJsZSBleGNlZWRzIDEgbWlsbGlvbgoJICogcGl4ZWxzLCBTY3JvbGxlciBzd2l0Y2hlcyBpbnRvIGEgbm9uLWxpbmVhciBtb2RlIGZvciB0aGUgc2Nyb2xsYmFyIHRvIGZpdAoJICogYWxsIG9mIHRoZSByZWNvcmRzIGludG8gYSBmaW5pdGUgYXJlYSwgYnV0IHRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIGxpbmVhcgoJICogdmFsdWUgKHJlbGF0aXZlIHRvIHRoZSBsYXN0IG5vbi1saW5lYXIgcG9zaXRpb25pbmcpLgoJICogIEBwYXJhbSB7aW50fSBpUGl4ZWxzIE9mZnNldCBmcm9tIHRvcCB0byBjYWxjdWxhdGUgdGhlIHJvdyBudW1iZXIgb2YKCSAqICBAcGFyYW0ge2ludH0gW2ludFBhcnNlPXRydWVdIElmIGFuIGludGVnZXIgdmFsdWUgc2hvdWxkIGJlIHJldHVybmVkCgkgKiAgQHBhcmFtIHtpbnR9IFt2aXJ0dWFsPWZhbHNlXSBQZXJmb3JtIHRoZSBjYWxjdWxhdGlvbnMgaW4gdGhlIHZpcnR1YWwgZG9tYWluCgkgKiAgQHJldHVybnMge2ludH0gUm93IGluZGV4CgkgKiAgQGV4YW1wbGUKCSAqICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkgewoJICogICAgICAkKCcjZXhhbXBsZScpLmRhdGFUYWJsZSggewoJICogICAgICAgICJzU2Nyb2xsWSI6ICIyMDBweCIsCgkgKiAgICAgICAgInNBamF4U291cmNlIjogIm1lZGlhL2RhdGFzZXQvbGFyZ2UudHh0IiwKCSAqICAgICAgICAic0RvbSI6ICJmcnRpUyIsCgkgKiAgICAgICAgImJEZWZlclJlbmRlciI6IHRydWUsCgkgKiAgICAgICAgImZuSW5pdENvbXBsZXRlIjogZnVuY3Rpb24gKG8pIHsKCSAqICAgICAgICAgIC8vIEZpbmQgd2hhdCByb3cgbnVtYmVyIGlzIGF0IDUwMHB4CgkgKiAgICAgICAgICBhbGVydCggby5vU2Nyb2xsZXIuZm5QaXhlbHNUb1JvdyggNTAwICkgKTsKCSAqICAgICAgICB9CgkgKiAgICAgIH0gKTsKCSAqICAgIH0gKTsKCSAqLwoJImZuUGl4ZWxzVG9Sb3ciOiBmdW5jdGlvbiAoIHBpeGVscywgaW50UGFyc2UsIHZpcnR1YWwgKQoJewoJCXZhciBkaWZmID0gcGl4ZWxzIC0gdGhpcy5zLmJhc2VTY3JvbGxUb3A7CgkJdmFyIHJvdyA9IHZpcnR1YWwgPwoJCQl0aGlzLl9kb21haW4oICdwaHlzaWNhbFRvVmlydHVhbCcsIHBpeGVscyApIC8gdGhpcy5zLmhlaWdodHMucm93IDoKCQkJKCBkaWZmIC8gdGhpcy5zLmhlaWdodHMucm93ICkgKyB0aGlzLnMuYmFzZVJvd1RvcDsKCgkJcmV0dXJuIGludFBhcnNlIHx8IGludFBhcnNlID09PSB1bmRlZmluZWQgPwoJCQlwYXJzZUludCggcm93LCAxMCApIDoKCQkJcm93OwoJfSwKCgoJLyoqCgkgKiBDYWxjdWxhdGUgdGhlIHJvdyBudW1iZXIgdGhhdCB3aWxsIGJlIGZvdW5kIGF0IHRoZSBnaXZlbiBwaXhlbCBwb3NpdGlvbiAoeS1zY3JvbGwpCgkgKiAgQHBhcmFtIHtpbnR9IGlSb3cgUm93IGluZGV4IHRvIHNjcm9sbCB0bwoJICogIEBwYXJhbSB7Ym9vbH0gW2JBbmltYXRlPXRydWVdIEFuaW1hdGUgdGhlIHRyYW5zaXRpb24gb3Igbm90CgkgKiAgQHJldHVybnMge3ZvaWR9CgkgKiAgQGV4YW1wbGUKCSAqICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkgewoJICogICAgICAkKCcjZXhhbXBsZScpLmRhdGFUYWJsZSggewoJICogICAgICAgICJzU2Nyb2xsWSI6ICIyMDBweCIsCgkgKiAgICAgICAgInNBamF4U291cmNlIjogIm1lZGlhL2RhdGFzZXQvbGFyZ2UudHh0IiwKCSAqICAgICAgICAic0RvbSI6ICJmcnRpUyIsCgkgKiAgICAgICAgImJEZWZlclJlbmRlciI6IHRydWUsCgkgKiAgICAgICAgImZuSW5pdENvbXBsZXRlIjogZnVuY3Rpb24gKG8pIHsKCSAqICAgICAgICAgIC8vIEltbWVkaWF0ZWx5IHNjcm9sbCB0byByb3cgMTAwMAoJICogICAgICAgICAgby5vU2Nyb2xsZXIuZm5TY3JvbGxUb1JvdyggMTAwMCApOwoJICogICAgICAgIH0KCSAqICAgICAgfSApOwoJICogICAgIAoJICogICAgICAvLyBTb21ldGltZSBsYXRlciBvbiB1c2UgdGhlIGZvbGxvd2luZyB0byBzY3JvbGwgdG8gcm93IDUwMC4uLgoJICogICAgICAgICAgdmFyIG9TZXR0aW5ncyA9ICQoJyNleGFtcGxlJykuZGF0YVRhYmxlKCkuZm5TZXR0aW5ncygpOwoJICogICAgICBvU2V0dGluZ3Mub1Njcm9sbGVyLmZuU2Nyb2xsVG9Sb3coIDUwMCApOwoJICogICAgfSApOwoJICovCgkiZm5TY3JvbGxUb1JvdyI6IGZ1bmN0aW9uICggaVJvdywgYkFuaW1hdGUgKQoJewoJCXZhciB0aGF0ID0gdGhpczsKCQl2YXIgYW5pID0gZmFsc2U7CgkJdmFyIHB4ID0gdGhpcy5mblJvd1RvUGl4ZWxzKCBpUm93ICk7CgoJCS8vIFdlIG5lZWQgdG8ga25vdyBpZiB0aGUgdGFibGUgd2lsbCByZWRyYXcgb3Igbm90IGJlZm9yZSBkb2luZyB0aGUKCQkvLyBzY3JvbGwuIElmIGl0IHdpbGwgbm90IHJlZHJhdywgdGhlbiB3ZSBuZWVkIHRvIHVzZSB0aGUgY3VycmVudGx5CgkJLy8gZGlzcGxheWVkIHRhYmxlLCBhbmQgc2Nyb2xsIHdpdGggdGhlIHBoeXNpY2FsIHBpeGVscy4gT3RoZXJ3aXNlLCB3ZQoJCS8vIG5lZWQgdG8gY2FsY3VsYXRlIHRoZSB0YWJsZSdzIG5ldyBwb3NpdGlvbiBmcm9tIHRoZSB2aXJ0dWFsCgkJLy8gdHJhbnNmb3JtLgoJCXZhciBwcmVSb3dzID0gKCh0aGlzLnMuZGlzcGxheUJ1ZmZlci0xKS8yKSAqIHRoaXMucy52aWV3cG9ydFJvd3M7CgkJdmFyIGRyYXdSb3cgPSBpUm93IC0gcHJlUm93czsKCQlpZiAoIGRyYXdSb3cgPCAwICkgewoJCQlkcmF3Um93ID0gMDsKCQl9CgoJCWlmICggKHB4ID4gdGhpcy5zLnJlZHJhd0JvdHRvbSB8fCBweCA8IHRoaXMucy5yZWRyYXdUb3ApICYmIHRoaXMucy5kdC5faURpc3BsYXlTdGFydCAhPT0gZHJhd1JvdyApIHsKCQkJYW5pID0gdHJ1ZTsKCQkJcHggPSB0aGlzLmZuUm93VG9QaXhlbHMoIGlSb3csIGZhbHNlLCB0cnVlICk7CgkJfQoKCQlpZiAoIHR5cGVvZiBiQW5pbWF0ZSA9PSAndW5kZWZpbmVkJyB8fCBiQW5pbWF0ZSApCgkJewoJCQl0aGlzLnMuYW5pID0gYW5pOwoJCQkkKHRoaXMuZG9tLnNjcm9sbGVyKS5hbmltYXRlKCB7CgkJCQkic2Nyb2xsVG9wIjogcHgKCQkJfSwgZnVuY3Rpb24gKCkgewoJCQkJLy8gVGhpcyBuZWVkcyB0byBoYXBwZW4gYWZ0ZXIgdGhlIGFuaW1hdGlvbiBoYXMgY29tcGxldGVkIGFuZAoJCQkJLy8gdGhlIGZpbmFsIHNjcm9sbCBldmVudCBmaXJlZAoJCQkJc2V0VGltZW91dCggZnVuY3Rpb24gKCkgewoJCQkJCXRoYXQucy5hbmkgPSBmYWxzZTsKCQkJCX0sIDI1ICk7CgkJCX0gKTsKCQl9CgkJZWxzZQoJCXsKCQkJJCh0aGlzLmRvbS5zY3JvbGxlcikuc2Nyb2xsVG9wKCBweCApOwoJCX0KCX0sCgoKCS8qKgoJICogQ2FsY3VsYXRlIGFuZCBzdG9yZSBpbmZvcm1hdGlvbiBhYm91dCBob3cgbWFueSByb3dzIGFyZSB0byBiZSBkaXNwbGF5ZWQKCSAqIGluIHRoZSBzY3JvbGxpbmcgdmlld3BvcnQsIGJhc2VkIG9uIGN1cnJlbnQgZGltZW5zaW9ucyBpbiB0aGUgYnJvd3NlcidzCgkgKiByZW5kZXJpbmcuIFRoaXMgY2FuIGJlIHBhcnRpY3VsYXJseSB1c2VmdWwgaWYgdGhlIHRhYmxlIGlzIGluaXRpYWxseQoJICogZHJhd24gaW4gYSBoaWRkZW4gZWxlbWVudCAtIGZvciBleGFtcGxlIGluIGEgdGFiLgoJICogIEBwYXJhbSB7Ym9vbH0gW2JSZWRyYXc9dHJ1ZV0gUmVkcmF3IHRoZSB0YWJsZSBhdXRvbWF0aWNhbGx5IGFmdGVyIHRoZSByZWNhbGN1bGF0aW9uLCB3aXRoCgkgKiAgICB0aGUgbmV3IGRpbWVuc2lvbnMgZm9ybWluZyB0aGUgYmFzaXMgZm9yIHRoZSBkcmF3LgoJICogIEByZXR1cm5zIHt2b2lkfQoJICogIEBleGFtcGxlCgkgKiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHsKCSAqICAgICAgLy8gTWFrZSB0aGUgZXhhbXBsZSBjb250YWluZXIgaGlkZGVuIHRvIHRocm93IG9mZiB0aGUgYnJvd3NlcidzIHNpemluZwoJICogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJykuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKCSAqICAgICAgdmFyIG9UYWJsZSA9ICQoJyNleGFtcGxlJykuZGF0YVRhYmxlKCB7CgkgKiAgICAgICAgInNTY3JvbGxZIjogIjIwMHB4IiwKCSAqICAgICAgICAic0FqYXhTb3VyY2UiOiAibWVkaWEvZGF0YXNldC9sYXJnZS50eHQiLAoJICogICAgICAgICJzRG9tIjogImZydGlTIiwKCSAqICAgICAgICAiYkRlZmVyUmVuZGVyIjogdHJ1ZSwKCSAqICAgICAgICAiZm5Jbml0Q29tcGxldGUiOiBmdW5jdGlvbiAobykgewoJICogICAgICAgICAgLy8gSW1tZWRpYXRlbHkgc2Nyb2xsIHRvIHJvdyAxMDAwCgkgKiAgICAgICAgICBvLm9TY3JvbGxlci5mblNjcm9sbFRvUm93KCAxMDAwICk7CgkgKiAgICAgICAgfQoJICogICAgICB9ICk7CgkgKiAgICAgCgkgKiAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHsKCSAqICAgICAgICAvLyBNYWtlIHRoZSBleGFtcGxlIGNvbnRhaW5lciB2aXNpYmxlIGFuZCByZWNhbGN1bGF0ZSB0aGUgc2Nyb2xsZXIgc2l6ZXMKCSAqICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJykuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CgkgKiAgICAgICAgb1RhYmxlLmZuU2V0dGluZ3MoKS5vU2Nyb2xsZXIuZm5NZWFzdXJlKCk7CgkgKiAgICAgIH0sIDMwMDAgKTsKCSAqLwoJImZuTWVhc3VyZSI6IGZ1bmN0aW9uICggYlJlZHJhdyApCgl7CgkJaWYgKCB0aGlzLnMuYXV0b0hlaWdodCApCgkJewoJCQl0aGlzLl9mbkNhbGNSb3dIZWlnaHQoKTsKCQl9CgoJCXZhciBoZWlnaHRzID0gdGhpcy5zLmhlaWdodHM7CgoJCWhlaWdodHMudmlld3BvcnQgPSAkKHRoaXMuZG9tLnNjcm9sbGVyKS5oZWlnaHQoKTsKCQl0aGlzLnMudmlld3BvcnRSb3dzID0gcGFyc2VJbnQoIGhlaWdodHMudmlld3BvcnQgLyBoZWlnaHRzLnJvdywgMTAgKSsxOwoJCXRoaXMucy5kdC5faURpc3BsYXlMZW5ndGggPSB0aGlzLnMudmlld3BvcnRSb3dzICogdGhpcy5zLmRpc3BsYXlCdWZmZXI7CgoJCWlmICggYlJlZHJhdyA9PT0gdW5kZWZpbmVkIHx8IGJSZWRyYXcgKQoJCXsKCQkJdGhpcy5zLmR0Lm9JbnN0YW5jZS5mbkRyYXcoKTsKCQl9Cgl9LAoKCgoJLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKgoJICogUHJpdmF0ZSBtZXRob2RzICh0aGV5IGFyZSBvZiBjb3Vyc2UgcHVibGljIGluIEpTLCBidXQgcmVjb21tZW5kZWQgYXMgcHJpdmF0ZSkKCSAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICovCgoJLyoqCgkgKiBJbml0aWFsaXNhdGlvbiBmb3IgU2Nyb2xsZXIKCSAqICBAcmV0dXJucyB7dm9pZH0KCSAqICBAcHJpdmF0ZQoJICovCgkiX2ZuQ29uc3RydWN0IjogZnVuY3Rpb24gKCkKCXsKCQl2YXIgdGhhdCA9IHRoaXM7CgoJCS8qIFNhbml0eSBjaGVjayAqLwoJCWlmICggIXRoaXMucy5kdC5vRmVhdHVyZXMuYlBhZ2luYXRlICkgewoJCQl0aGlzLnMuZHQub0FwaS5fZm5Mb2coIHRoaXMucy5kdCwgMCwgJ1BhZ2luYXRpb24gbXVzdCBiZSBlbmFibGVkIGZvciBTY3JvbGxlcicgKTsKCQkJcmV0dXJuOwoJCX0KCgkJLyogSW5zZXJ0IGEgZGl2IGVsZW1lbnQgdGhhdCB3ZSBjYW4gdXNlIHRvIGZvcmNlIHRoZSBEVCBzY3JvbGxpbmcgY29udGFpbmVyIHRvCgkJICogdGhlIGhlaWdodCB0aGF0IHdvdWxkIGJlIHJlcXVpcmVkIGlmIHRoZSB3aG9sZSB0YWJsZSB3YXMgYmVpbmcgZGlzcGxheWVkCgkJICovCgkJdGhpcy5kb20uZm9yY2Uuc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwoJCXRoaXMuZG9tLmZvcmNlLnN0eWxlLnRvcCA9ICIwcHgiOwoJCXRoaXMuZG9tLmZvcmNlLnN0eWxlLmxlZnQgPSAiMHB4IjsKCQl0aGlzLmRvbS5mb3JjZS5zdHlsZS53aWR0aCA9ICIxcHgiOwoKCQl0aGlzLmRvbS5zY3JvbGxlciA9ICQoJ2Rpdi4nK3RoaXMucy5kdC5vQ2xhc3Nlcy5zU2Nyb2xsQm9keSwgdGhpcy5zLmR0Lm5UYWJsZVdyYXBwZXIpWzBdOwoJCXRoaXMuZG9tLnNjcm9sbGVyLmFwcGVuZENoaWxkKCB0aGlzLmRvbS5mb3JjZSApOwoJCXRoaXMuZG9tLnNjcm9sbGVyLnN0eWxlLnBvc2l0aW9uID0gInJlbGF0aXZlIjsKCgkJdGhpcy5kb20udGFibGUgPSAkKCc+dGFibGUnLCB0aGlzLmRvbS5zY3JvbGxlcilbMF07CgkJdGhpcy5kb20udGFibGUuc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwoJCXRoaXMuZG9tLnRhYmxlLnN0eWxlLnRvcCA9ICIwcHgiOwoJCXRoaXMuZG9tLnRhYmxlLnN0eWxlLmxlZnQgPSAiMHB4IjsKCgkJLy8gQWRkIGNsYXNzIHRvICdhbm5vdW5jZScgdGhhdCB3ZSBhcmUgYSBTY3JvbGxlciB0YWJsZQoJCSQodGhpcy5zLmR0Lm5UYWJsZVdyYXBwZXIpLmFkZENsYXNzKCdEVFMnKTsKCgkJLy8gQWRkIGEgJ2xvYWRpbmcnIGluZGljYXRvcgoJCWlmICggdGhpcy5zLmxvYWRpbmdJbmRpY2F0b3IgKQoJCXsKCQkJdGhpcy5kb20ubG9hZGVyID0gJCgnPGRpdiBjbGFzcz0iRFRTX0xvYWRpbmciPicrdGhpcy5zLmR0Lm9MYW5ndWFnZS5zTG9hZGluZ1JlY29yZHMrJzwvZGl2PicpCgkJCQkuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTsKCgkJCSQodGhpcy5kb20uc2Nyb2xsZXIucGFyZW50Tm9kZSkKCQkJCS5jc3MoJ3Bvc2l0aW9uJywgJ3JlbGF0aXZlJykKCQkJCS5hcHBlbmQoIHRoaXMuZG9tLmxvYWRlciApOwoJCX0KCgkJLyogSW5pdGlhbCBzaXplIGNhbGN1bGF0aW9ucyAqLwoJCWlmICggdGhpcy5zLmhlaWdodHMucm93ICYmIHRoaXMucy5oZWlnaHRzLnJvdyAhPSAnYXV0bycgKQoJCXsKCQkJdGhpcy5zLmF1dG9IZWlnaHQgPSBmYWxzZTsKCQl9CgkJdGhpcy5mbk1lYXN1cmUoIGZhbHNlICk7CgoJCS8qIFNjcm9sbGluZyBjYWxsYmFjayB0byBzZWUgaWYgYSBwYWdlIGNoYW5nZSBpcyBuZWVkZWQgLSB1c2UgYSB0aHJvdHRsZWQKCQkgKiBmdW5jdGlvbiBmb3IgdGhlIHNhdmUgc2F2ZSBjYWxsYmFjayBzbyB3ZSBhcmVuJ3QgaGl0dGluZyBpdCBvbiBldmVyeQoJCSAqIHNjcm9sbAoJCSAqLwoJCXRoaXMucy5pbmdub3JlU2Nyb2xsID0gdHJ1ZTsKCQl0aGlzLnMuc3RhdGVTYXZlVGhyb3R0bGUgPSB0aGlzLnMuZHQub0FwaS5fZm5UaHJvdHRsZSggZnVuY3Rpb24gKCkgewoJCQl0aGF0LnMuZHQub0FwaS5fZm5TYXZlU3RhdGUoIHRoYXQucy5kdCApOwoJCX0sIDUwMCApOwoJCSQodGhpcy5kb20uc2Nyb2xsZXIpLm9uKCAnc2Nyb2xsLkRUUycsIGZ1bmN0aW9uIChlKSB7CgkJCXRoYXQuX2ZuU2Nyb2xsLmNhbGwoIHRoYXQgKTsKCQl9ICk7CgoJCS8qIEluIGlPUyB3ZSBjYXRjaCB0aGUgdG91Y2hzdGFydCBldmVudCBpbiBjYXNlIHRoZSB1c2VyIHRyaWVzIHRvIHNjcm9sbAoJCSAqIHdoaWxlIHRoZSBkaXNwbGF5IGlzIGFscmVhZHkgc2Nyb2xsaW5nCgkJICovCgkJJCh0aGlzLmRvbS5zY3JvbGxlcikub24oJ3RvdWNoc3RhcnQuRFRTJywgZnVuY3Rpb24gKCkgewoJCQl0aGF0Ll9mblNjcm9sbC5jYWxsKCB0aGF0ICk7CgkJfSApOwoKCQkvKiBVcGRhdGUgdGhlIHNjcm9sbGVyIHdoZW4gdGhlIERhdGFUYWJsZSBpcyByZWRyYXduICovCgkJdGhpcy5zLmR0LmFvRHJhd0NhbGxiYWNrLnB1c2goIHsKCQkJImZuIjogZnVuY3Rpb24gKCkgewoJCQkJaWYgKCB0aGF0LnMuZHQuYkluaXRpYWxpc2VkICkgewoJCQkJCXRoYXQuX2ZuRHJhd0NhbGxiYWNrLmNhbGwoIHRoYXQgKTsKCQkJCX0KCQkJfSwKCQkJInNOYW1lIjogIlNjcm9sbGVyIgoJCX0gKTsKCgkJLyogT24gcmVzaXplLCB1cGRhdGUgdGhlIGluZm9ybWF0aW9uIGVsZW1lbnQsIHNpbmNlIHRoZSBudW1iZXIgb2Ygcm93cyBzaG93biBtaWdodCBjaGFuZ2UgKi8KCQkkKHdpbmRvdykub24oICdyZXNpemUuRFRTJywgZnVuY3Rpb24gKCkgewoJCQl0aGF0LmZuTWVhc3VyZSggZmFsc2UgKTsKCQkJdGhhdC5fZm5JbmZvKCk7CgkJfSApOwoKCQkvKiBBZGQgYSBzdGF0ZSBzYXZpbmcgcGFyYW1ldGVyIHRvIHRoZSBEVCBzdGF0ZSBzYXZpbmcgc28gd2UgY2FuIHJlc3RvcmUgdGhlIGV4YWN0CgkJICogcG9zaXRpb24gb2YgdGhlIHNjcm9sbGluZwoJCSAqLwoJCXZhciBpbml0aWFsU3RhdGVTYXZlID0gdHJ1ZTsKCQl0aGlzLnMuZHQub0FwaS5fZm5DYWxsYmFja1JlZyggdGhpcy5zLmR0LCAnYW9TdGF0ZVNhdmVQYXJhbXMnLCBmdW5jdGlvbiAob1MsIG9EYXRhKSB7CgkJCS8qIFNldCBpU2Nyb2xsZXIgdG8gc2F2ZWQgc2Nyb2xsIHBvc2l0aW9uIG9uIGluaXRpYWxpemF0aW9uLgoJCQkgKi8KCQkJaWYoaW5pdGlhbFN0YXRlU2F2ZSAmJiB0aGF0LnMuZHQub0xvYWRlZFN0YXRlKXsKCQkJCW9EYXRhLmlTY3JvbGxlciA9IHRoYXQucy5kdC5vTG9hZGVkU3RhdGUuaVNjcm9sbGVyOwoJCQkJb0RhdGEuaVNjcm9sbGVyVG9wUm93ID0gdGhhdC5zLmR0Lm9Mb2FkZWRTdGF0ZS5pU2Nyb2xsZXJUb3BSb3c7CgkJCQlpbml0aWFsU3RhdGVTYXZlID0gZmFsc2U7CgkJCX0gZWxzZSB7CgkJCQlvRGF0YS5pU2Nyb2xsZXIgPSB0aGF0LmRvbS5zY3JvbGxlci5zY3JvbGxUb3A7CgkJCQlvRGF0YS5pU2Nyb2xsZXJUb3BSb3cgPSB0aGF0LnMudG9wUm93RmxvYXQ7CgkJCX0KCQl9LCAiU2Nyb2xsZXJfU3RhdGUiICk7CgoJCWlmICggdGhpcy5zLmR0Lm9Mb2FkZWRTdGF0ZSApIHsKCQkJdGhpcy5zLnRvcFJvd0Zsb2F0ID0gdGhpcy5zLmR0Lm9Mb2FkZWRTdGF0ZS5pU2Nyb2xsZXJUb3BSb3cgfHwgMDsKCQl9CgoJCS8qIERlc3RydWN0b3IgKi8KCQl0aGlzLnMuZHQuYW9EZXN0cm95Q2FsbGJhY2sucHVzaCggewoJCQkic05hbWUiOiAiU2Nyb2xsZXIiLAoJCQkiZm4iOiBmdW5jdGlvbiAoKSB7CgkJCQkkKHdpbmRvdykub2ZmKCAncmVzaXplLkRUUycgKTsKCQkJCSQodGhhdC5kb20uc2Nyb2xsZXIpLm9mZigndG91Y2hzdGFydC5EVFMgc2Nyb2xsLkRUUycpOwoJCQkJJCh0aGF0LnMuZHQublRhYmxlV3JhcHBlcikucmVtb3ZlQ2xhc3MoJ0RUUycpOwoJCQkJJCgnZGl2LkRUU19Mb2FkaW5nJywgdGhhdC5kb20uc2Nyb2xsZXIucGFyZW50Tm9kZSkucmVtb3ZlKCk7CgoJCQkJdGhhdC5kb20udGFibGUuc3R5bGUucG9zaXRpb24gPSAiIjsKCQkJCXRoYXQuZG9tLnRhYmxlLnN0eWxlLnRvcCA9ICIiOwoJCQkJdGhhdC5kb20udGFibGUuc3R5bGUubGVmdCA9ICIiOwoJCQl9CgkJfSApOwoJfSwKCgoJLyoqCgkgKiBTY3JvbGxpbmcgZnVuY3Rpb24gLSBmaXJlZCB3aGVuZXZlciB0aGUgc2Nyb2xsaW5nIHBvc2l0aW9uIGlzIGNoYW5nZWQuCgkgKiBUaGlzIG1ldGhvZCBuZWVkcyB0byB1c2UgdGhlIHN0b3JlZCB2YWx1ZXMgdG8gc2VlIGlmIHRoZSB0YWJsZSBzaG91bGQgYmUKCSAqIHJlZHJhd24gYXMgd2UgYXJlIG1vdmluZyB0b3dhcmRzIHRoZSBlbmQgb2YgdGhlIGluZm9ybWF0aW9uIHRoYXQgaXMKCSAqIGN1cnJlbnRseSBkcmF3biBvciBub3QuIElmIG5lZWRlZCwgdGhlbiBpdCB3aWxsIHJlZHJhdyB0aGUgdGFibGUgYmFzZWQgb24KCSAqIHRoZSBuZXcgcG9zaXRpb24uCgkgKiAgQHJldHVybnMge3ZvaWR9CgkgKiAgQHByaXZhdGUKCSAqLwoJIl9mblNjcm9sbCI6IGZ1bmN0aW9uICgpCgl7CgkJdmFyCgkJCXRoYXQgPSB0aGlzLAoJCQloZWlnaHRzID0gdGhpcy5zLmhlaWdodHMsCgkJCWlTY3JvbGxUb3AgPSB0aGlzLmRvbS5zY3JvbGxlci5zY3JvbGxUb3AsCgkJCWlUb3BSb3c7CgoJCWlmICggdGhpcy5zLnNraXAgKSB7CgkJCXJldHVybjsKCQl9CgoJCWlmICggdGhpcy5zLmluZ25vcmVTY3JvbGwgKSB7CgkJCXJldHVybjsKCQl9CgoJCS8qIElmIHRoZSB0YWJsZSBoYXMgYmVlbiBzb3J0ZWQgb3IgZmlsdGVyZWQsIHRoZW4gd2UgdXNlIHRoZSByZWRyYXcgdGhhdAoJCSAqIERhdGFUYWJsZXMgYXMgZG9uZSwgcmF0aGVyIHRoYW4gcGVyZm9ybWluZyBvdXIgb3duCgkJICovCgkJaWYgKCB0aGlzLnMuZHQuYkZpbHRlcmVkIHx8IHRoaXMucy5kdC5iU29ydGVkICkgewoJCQl0aGlzLnMubGFzdFNjcm9sbFRvcCA9IDA7CgkJCXJldHVybjsKCQl9CgoJCS8qIFVwZGF0ZSB0aGUgdGFibGUncyBpbmZvcm1hdGlvbiBkaXNwbGF5IGZvciB3aGF0IGlzIG5vdyBpbiB0aGUgdmlld3BvcnQgKi8KCQl0aGlzLl9mbkluZm8oKTsKCgkJLyogV2UgZG9uJ3Qgd2FudCB0byBzdGF0ZSBzYXZlIG9uIGV2ZXJ5IHNjcm9sbCBldmVudCAtIHRoYXQncyBoZWF2eQoJCSAqIGhhbmRlZCwgc28gdXNlIGEgdGltZW91dCB0byB1cGRhdGUgdGhlIHN0YXRlIHNhdmluZyBvbmx5IHdoZW4gdGhlCgkJICogc2Nyb2xsaW5nIGhhcyBmaW5pc2hlZAoJCSAqLwoJCWNsZWFyVGltZW91dCggdGhpcy5zLnN0YXRlVE8gKTsKCQl0aGlzLnMuc3RhdGVUTyA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHsKCQkJdGhhdC5zLmR0Lm9BcGkuX2ZuU2F2ZVN0YXRlKCB0aGF0LnMuZHQgKTsKCQl9LCAyNTAgKTsKCgkJLyogQ2hlY2sgaWYgdGhlIHNjcm9sbCBwb2ludCBpcyBvdXRzaWRlIHRoZSB0cmlnZ2VyIGJvdW5kYXJ5IHdoaWNoIHdvdWxkIHJlcXVpcmVkCgkJICogYSBEYXRhVGFibGVzIHJlZHJhdwoJCSAqLwoJCWlmICggaVNjcm9sbFRvcCA8IHRoaXMucy5yZWRyYXdUb3AgfHwgaVNjcm9sbFRvcCA+IHRoaXMucy5yZWRyYXdCb3R0b20gKSB7CgkJCXZhciBwcmVSb3dzID0gTWF0aC5jZWlsKCAoKHRoaXMucy5kaXNwbGF5QnVmZmVyLTEpLzIpICogdGhpcy5zLnZpZXdwb3J0Um93cyApOwoKCQkJaWYgKCBNYXRoLmFicyggaVNjcm9sbFRvcCAtIHRoaXMucy5sYXN0U2Nyb2xsVG9wICkgPiBoZWlnaHRzLnZpZXdwb3J0IHx8IHRoaXMucy5hbmkgKSB7CgkJCQlpVG9wUm93ID0gcGFyc2VJbnQodGhpcy5fZG9tYWluKCAncGh5c2ljYWxUb1ZpcnR1YWwnLCBpU2Nyb2xsVG9wICkgLyBoZWlnaHRzLnJvdywgMTApIC0gcHJlUm93czsKCQkJCXRoaXMucy50b3BSb3dGbG9hdCA9ICh0aGlzLl9kb21haW4oICdwaHlzaWNhbFRvVmlydHVhbCcsIGlTY3JvbGxUb3AgKSAvIGhlaWdodHMucm93KTsKCQkJfQoJCQllbHNlIHsKCQkJCWlUb3BSb3cgPSB0aGlzLmZuUGl4ZWxzVG9Sb3coIGlTY3JvbGxUb3AgKSAtIHByZVJvd3M7CgkJCQl0aGlzLnMudG9wUm93RmxvYXQgPSB0aGlzLmZuUGl4ZWxzVG9Sb3coIGlTY3JvbGxUb3AsIGZhbHNlICk7CgkJCX0KCgkJCWlmICggaVRvcFJvdyA8PSAwICkgewoJCQkJLyogQXQgdGhlIHN0YXJ0IG9mIHRoZSB0YWJsZSAqLwoJCQkJaVRvcFJvdyA9IDA7CgkJCX0KCQkJZWxzZSBpZiAoIGlUb3BSb3cgKyB0aGlzLnMuZHQuX2lEaXNwbGF5TGVuZ3RoID4gdGhpcy5zLmR0LmZuUmVjb3Jkc0Rpc3BsYXkoKSApIHsKCQkJCS8qIEF0IHRoZSBlbmQgb2YgdGhlIHRhYmxlICovCgkJCQlpVG9wUm93ID0gdGhpcy5zLmR0LmZuUmVjb3Jkc0Rpc3BsYXkoKSAtIHRoaXMucy5kdC5faURpc3BsYXlMZW5ndGg7CgkJCQlpZiAoIGlUb3BSb3cgPCAwICkgewoJCQkJCWlUb3BSb3cgPSAwOwoJCQkJfQoJCQl9CgkJCWVsc2UgaWYgKCBpVG9wUm93ICUgMiAhPT0gMCApIHsKCQkJCS8vIEZvciB0aGUgcm93LXN0cmlwaW5nIGNsYXNzZXMgKG9kZC9ldmVuKSB3ZSB3YW50IG9ubHkgdG8gc3RhcnQKCQkJCS8vIG9uIGV2ZW5zIG90aGVyd2lzZSB0aGUgc3RyaXBlcyB3aWxsIGNoYW5nZSBiZXR3ZWVuIGRyYXdzIGFuZAoJCQkJLy8gbG9vayBydWJiaXNoCgkJCQlpVG9wUm93Kys7CgkJCX0KCgkJCWlmICggaVRvcFJvdyAhPSB0aGlzLnMuZHQuX2lEaXNwbGF5U3RhcnQgKSB7CgkJCQkvKiBDYWNoZSB0aGUgbmV3IHRhYmxlIHBvc2l0aW9uIGZvciBxdWljayBsb29rdXBzICovCgkJCQl0aGlzLnMudGFibGVUb3AgPSAkKHRoaXMucy5kdC5uVGFibGUpLm9mZnNldCgpLnRvcDsKCQkJCXRoaXMucy50YWJsZUJvdHRvbSA9ICQodGhpcy5zLmR0Lm5UYWJsZSkuaGVpZ2h0KCkgKyB0aGlzLnMudGFibGVUb3A7CgoJCQkJdmFyIGRyYXcgPSAgZnVuY3Rpb24gKCkgewoJCQkJCWlmICggdGhhdC5zLnNjcm9sbERyYXdSZXEgPT09IG51bGwgKSB7CgkJCQkJCXRoYXQucy5zY3JvbGxEcmF3UmVxID0gaVNjcm9sbFRvcDsKCQkJCQl9CgoJCQkJCXRoYXQucy5kdC5faURpc3BsYXlTdGFydCA9IGlUb3BSb3c7CgkJCQkJaWYgKCB0aGF0LnMuZHQub0FwaS5fZm5DYWxjdWxhdGVFbmQgKSB7IC8vIFJlbW92ZWQgaW4gMS4xMAoJCQkJCQl0aGF0LnMuZHQub0FwaS5fZm5DYWxjdWxhdGVFbmQoIHRoYXQucy5kdCApOwoJCQkJCX0KCQkJCQl0aGF0LnMuZHQub0FwaS5fZm5EcmF3KCB0aGF0LnMuZHQgKTsKCQkJCX07CgoJCQkJLyogRG8gdGhlIERhdGFUYWJsZXMgcmVkcmF3IGJhc2VkIG9uIHRoZSBjYWxjdWxhdGVkIHN0YXJ0IHBvaW50IC0gbm90ZSB0aGF0IHdoZW4KCQkJCSAqIHVzaW5nIHNlcnZlci1zaWRlIHByb2Nlc3Npbmcgd2UgaW50cm9kdWNlIGEgc21hbGwgZGVsYXkgdG8gbm90IERvUyB0aGUgc2VydmVyLi4uCgkJCQkgKi8KCQkJCWlmICggdGhpcy5zLmR0Lm9GZWF0dXJlcy5iU2VydmVyU2lkZSApIHsKCQkJCQljbGVhclRpbWVvdXQoIHRoaXMucy5kcmF3VE8gKTsKCQkJCQl0aGlzLnMuZHJhd1RPID0gc2V0VGltZW91dCggZHJhdywgdGhpcy5zLnNlcnZlcldhaXQgKTsKCQkJCX0KCQkJCWVsc2UgewoJCQkJCWRyYXcoKTsKCQkJCX0KCgkJCQlpZiAoIHRoaXMuZG9tLmxvYWRlciAmJiAhIHRoaXMucy5sb2FkZXJWaXNpYmxlICkgewoJCQkJCXRoaXMuZG9tLmxvYWRlci5jc3MoICdkaXNwbGF5JywgJ2Jsb2NrJyApOwoJCQkJCXRoaXMucy5sb2FkZXJWaXNpYmxlID0gdHJ1ZTsKCQkJCX0KCQkJfQoJCX0KCgkJdGhpcy5zLmxhc3RTY3JvbGxUb3AgPSBpU2Nyb2xsVG9wOwoJCXRoaXMucy5zdGF0ZVNhdmVUaHJvdHRsZSgpOwoJfSwKCgoJLyoqCgkgKiBDb252ZXJ0IGZyb20gb25lIGRvbWFpbiB0byBhbm90aGVyLiBUaGUgcGh5c2ljYWwgZG9tYWluIGlzIHRoZSBhY3R1YWwKCSAqIHBpeGVsIGNvdW50IG9uIHRoZSBzY3JlZW4sIHdoaWxlIHRoZSB2aXJ0dWFsIGlzIGlmIHdlIGhhZCBicm93c2VycyB3aGljaAoJICogaGFkIHNjcm9sbGluZyBjb250YWluZXJzIG9mIGluZmluaXRlIGhlaWdodCAoaS5lLiB0aGUgYWJzb2x1dGUgdmFsdWUpCgkgKgoJICogIEBwYXJhbSB7c3RyaW5nfSBkaXIgRG9tYWluIHRyYW5zZm9ybSBkaXJlY3Rpb24sIGB2aXJ0dWFsVG9QaHlzaWNhbGAgb3IKCSAqICAgIGBwaHlzaWNhbFRvVmlydHVhbGAgCgkgKiAgQHJldHVybnMge251bWJlcn0gQ2FsY3VsYXRlZCB0cmFuc2Zvcm0KCSAqICBAcHJpdmF0ZQoJICovCglfZG9tYWluOiBmdW5jdGlvbiAoIGRpciwgdmFsICkKCXsKCQl2YXIgaGVpZ2h0cyA9IHRoaXMucy5oZWlnaHRzOwoJCXZhciBjb2VmZjsKCgkJLy8gSWYgdGhlIHZpcnR1YWwgYW5kIHBoeXNpY2FsIGhlaWdodCBtYXRjaCwgdGhlbiB3ZSB1c2UgYSBsaW5lYXIKCQkvLyB0cmFuc2Zvcm0gYmV0d2VlbiB0aGUgdHdvLCBhbGxvd2luZyB0aGUgc2Nyb2xsYmFyIHRvIGJlIGxpbmVhcgoJCWlmICggaGVpZ2h0cy52aXJ0dWFsID09PSBoZWlnaHRzLnNjcm9sbCApIHsKCQkJY29lZmYgPSAoaGVpZ2h0cy52aXJ0dWFsLWhlaWdodHMudmlld3BvcnQpIC8gKGhlaWdodHMuc2Nyb2xsLWhlaWdodHMudmlld3BvcnQpOwoKCQkJaWYgKCBkaXIgPT09ICd2aXJ0dWFsVG9QaHlzaWNhbCcgKSB7CgkJCQlyZXR1cm4gdmFsIC8gY29lZmY7CgkJCX0KCQkJZWxzZSBpZiAoIGRpciA9PT0gJ3BoeXNpY2FsVG9WaXJ0dWFsJyApIHsKCQkJCXJldHVybiB2YWwgKiBjb2VmZjsKCQkJfQoJCX0KCgkJLy8gT3RoZXJ3aXNlLCB3ZSB3YW50IGEgbm9uLWxpbmVhciBzY3JvbGxiYXIgdG8gdGFrZSBhY2NvdW50IG9mIHRoZQoJCS8vIHJlZHJhd2luZyByZWdpb25zIGF0IHRoZSBzdGFydCBhbmQgZW5kIG9mIHRoZSB0YWJsZSwgb3RoZXJ3aXNlIHRoZXNlCgkJLy8gY2FuIHN0dXR0ZXIgYmFkbHkgLSBvbiBsYXJnZSB0YWJsZXMgMzBweCAoZm9yIGV4YW1wbGUpIHNjcm9sbCBtaWdodAoJCS8vIGJlIGh1bmRyZWRzIG9mIHJvd3MsIHNvIHRoZSB0YWJsZSB3b3VsZCBiZSByZWRyYXdpbmcgZXZlcnkgZmV3IHB4IGF0CgkJLy8gdGhlIHN0YXJ0IGFuZCBlbmQuIFVzZSBhIHNpbXBsZSBxdWFkcmF0aWMgdG8gc3RvcCB0aGlzLiBJdCBkb2VzIG1lYW4KCQkvLyB0aGUgc2Nyb2xsYmFyIGlzIG5vbi1saW5lYXIsIGJ1dCB3aXRoIHN1Y2ggbWFzc2l2ZSBkYXRhIHNldHMsIHRoZQoJCS8vIHNjcm9sbGJhciBpcyBnb2luZyB0byBiZSBhIGJlc3QgZ3Vlc3MgYW55d2F5CgkJdmFyIHhNYXggPSAoaGVpZ2h0cy5zY3JvbGwgLSBoZWlnaHRzLnZpZXdwb3J0KSAvIDI7CgkJdmFyIHlNYXggPSAoaGVpZ2h0cy52aXJ0dWFsIC0gaGVpZ2h0cy52aWV3cG9ydCkgLyAyOwoKCQljb2VmZiA9IHlNYXggLyAoIHhNYXggKiB4TWF4ICk7CgoJCWlmICggZGlyID09PSAndmlydHVhbFRvUGh5c2ljYWwnICkgewoJCQlpZiAoIHZhbCA8IHlNYXggKSB7CgkJCQlyZXR1cm4gTWF0aC5wb3codmFsIC8gY29lZmYsIDAuNSk7CgkJCX0KCQkJZWxzZSB7CgkJCQl2YWwgPSAoeU1heCoyKSAtIHZhbDsKCQkJCXJldHVybiB2YWwgPCAwID8KCQkJCQloZWlnaHRzLnNjcm9sbCA6CgkJCQkJKHhNYXgqMikgLSBNYXRoLnBvdyh2YWwgLyBjb2VmZiwgMC41KTsKCQkJfQoJCX0KCQllbHNlIGlmICggZGlyID09PSAncGh5c2ljYWxUb1ZpcnR1YWwnICkgewoJCQlpZiAoIHZhbCA8IHhNYXggKSB7CgkJCQlyZXR1cm4gdmFsICogdmFsICogY29lZmY7CgkJCX0KCQkJZWxzZSB7CgkJCQl2YWwgPSAoeE1heCoyKSAtIHZhbDsKCQkJCXJldHVybiB2YWwgPCAwID8KCQkJCQloZWlnaHRzLnZpcnR1YWwgOgoJCQkJCSh5TWF4KjIpIC0gKHZhbCAqIHZhbCAqIGNvZWZmKTsKCQkJfQoJCX0KCX0sCgoKCS8qKgoJICogRHJhdyBjYWxsYmFjayBmdW5jdGlvbiB3aGljaCBpcyBmaXJlZCB3aGVuIHRoZSBEYXRhVGFibGUgaXMgcmVkcmF3bi4gVGhlIG1haW4gZnVuY3Rpb24gb2YKCSAqIHRoaXMgbWV0aG9kIGlzIHRvIHBvc2l0aW9uIHRoZSBkcmF3biB0YWJsZSBjb3JyZWN0bHkgdGhlIHNjcm9sbGluZyBjb250YWluZXIgZm9yIHRoZSByb3dzCgkgKiB0aGF0IGlzIGRpc3BsYXlzIGFzIGEgcmVzdWx0IG9mIHRoZSBzY3JvbGxpbmcgcG9zaXRpb24uCgkgKiAgQHJldHVybnMge3ZvaWR9CgkgKiAgQHByaXZhdGUKCSAqLwoJIl9mbkRyYXdDYWxsYmFjayI6IGZ1bmN0aW9uICgpCgl7CgkJdmFyCgkJCXRoYXQgPSB0aGlzLAoJCQloZWlnaHRzID0gdGhpcy5zLmhlaWdodHMsCgkJCWlTY3JvbGxUb3AgPSB0aGlzLmRvbS5zY3JvbGxlci5zY3JvbGxUb3AsCgkJCWlBY3R1YWxTY3JvbGxUb3AgPSBpU2Nyb2xsVG9wLAoJCQlpU2Nyb2xsQm90dG9tID0gaVNjcm9sbFRvcCArIGhlaWdodHMudmlld3BvcnQsCgkJCWlUYWJsZUhlaWdodCA9ICQodGhpcy5zLmR0Lm5UYWJsZSkuaGVpZ2h0KCksCgkJCWRpc3BsYXlTdGFydCA9IHRoaXMucy5kdC5faURpc3BsYXlTdGFydCwKCQkJZGlzcGxheUxlbiA9IHRoaXMucy5kdC5faURpc3BsYXlMZW5ndGgsCgkJCWRpc3BsYXlFbmQgPSB0aGlzLnMuZHQuZm5SZWNvcmRzRGlzcGxheSgpOwoKCQkvLyBEaXNhYmxlIHRoZSBzY3JvbGwgZXZlbnQgbGlzdGVuZXIgd2hpbGUgd2UgYXJlIHVwZGF0aW5nIHRoZSBET00KCQl0aGlzLnMuc2tpcCA9IHRydWU7CgoJCS8vIFJlc2l6ZSB0aGUgc2Nyb2xsIGZvcmNpbmcgZWxlbWVudAoJCXRoaXMuX2ZuU2Nyb2xsRm9yY2UoKTsKCgkJLy8gUmVwb3NpdGlvbiB0aGUgc2Nyb2xsaW5nIGZvciB0aGUgdXBkYXRlZCB2aXJ0dWFsIHBvc2l0aW9uIGlmIG5lZWRlZAoJCWlmICggZGlzcGxheVN0YXJ0ID09PSAwICkgewoJCQkvLyBMaW5lYXIgY2FsY3VsYXRpb24gYXQgdGhlIHRvcCBvZiB0aGUgdGFibGUKCQkJaVNjcm9sbFRvcCA9IHRoaXMucy50b3BSb3dGbG9hdCAqIGhlaWdodHMucm93OwoJCX0KCQllbHNlIGlmICggZGlzcGxheVN0YXJ0ICsgZGlzcGxheUxlbiA+PSBkaXNwbGF5RW5kICkgewoJCQkvLyBMaW5lYXIgY2FsY3VsYXRpb24gdGhhdCB0aGUgYm90dG9tIGFzIHdlbGwKCQkJaVNjcm9sbFRvcCA9IGhlaWdodHMuc2Nyb2xsIC0gKChkaXNwbGF5RW5kIC0gdGhpcy5zLnRvcFJvd0Zsb2F0KSAqIGhlaWdodHMucm93KTsKCQl9CgkJZWxzZSB7CgkJCS8vIERvbWFpbiBzY2FsZWQgaW4gdGhlIG1pZGRsZQoJCQlpU2Nyb2xsVG9wID0gdGhpcy5fZG9tYWluKCAndmlydHVhbFRvUGh5c2ljYWwnLCB0aGlzLnMudG9wUm93RmxvYXQgKiBoZWlnaHRzLnJvdyApOwoJCX0KCgkJdGhpcy5kb20uc2Nyb2xsZXIuc2Nyb2xsVG9wID0gaVNjcm9sbFRvcDsKCgkJLy8gU3RvcmUgcG9zaXRpb25hbCBpbmZvcm1hdGlvbiBzbyBwb3NpdGlvbmFsIGNhbGN1bGF0aW9ucyBjYW4gYmUgYmFzZWQKCQkvLyB1cG9uIHRoZSBjdXJyZW50IHRhYmxlIGRyYXcgcG9zaXRpb24KCQl0aGlzLnMuYmFzZVNjcm9sbFRvcCA9IGlTY3JvbGxUb3A7CgkJdGhpcy5zLmJhc2VSb3dUb3AgPSB0aGlzLnMudG9wUm93RmxvYXQ7CgoJCS8vIFBvc2l0aW9uIHRoZSB0YWJsZSBpbiB0aGUgdmlydHVhbCBzY3JvbGxlcgoJCXZhciB0YWJsZVRvcCA9IGlTY3JvbGxUb3AgLSAoKHRoaXMucy50b3BSb3dGbG9hdCAtIGRpc3BsYXlTdGFydCkgKiBoZWlnaHRzLnJvdyk7CgkJaWYgKCBkaXNwbGF5U3RhcnQgPT09IDAgKSB7CgkJCXRhYmxlVG9wID0gMDsKCQl9CgkJZWxzZSBpZiAoIGRpc3BsYXlTdGFydCArIGRpc3BsYXlMZW4gPj0gZGlzcGxheUVuZCApIHsKCQkJdGFibGVUb3AgPSBoZWlnaHRzLnNjcm9sbCAtIGlUYWJsZUhlaWdodDsKCQl9CgoJCXRoaXMuZG9tLnRhYmxlLnN0eWxlLnRvcCA9IHRhYmxlVG9wKydweCc7CgoJCS8qIENhY2hlIHNvbWUgaW5mb3JtYXRpb24gZm9yIHRoZSBzY3JvbGxlciAqLwoJCXRoaXMucy50YWJsZVRvcCA9IHRhYmxlVG9wOwoJCXRoaXMucy50YWJsZUJvdHRvbSA9IGlUYWJsZUhlaWdodCArIHRoaXMucy50YWJsZVRvcDsKCgkJLy8gQ2FsY3VsYXRlIHRoZSBib3VuZGFyaWVzIGZvciB3aGVyZSBhIHJlZHJhdyB3aWxsIGJlIHRyaWdnZXJlZCBieSB0aGUKCQkvLyBzY3JvbGwgZXZlbnQgbGlzdGVuZXIKCQl2YXIgYm91bmRhcnlQeCA9IChpU2Nyb2xsVG9wIC0gdGhpcy5zLnRhYmxlVG9wKSAqIHRoaXMucy5ib3VuZGFyeVNjYWxlOwoJCXRoaXMucy5yZWRyYXdUb3AgPSBpU2Nyb2xsVG9wIC0gYm91bmRhcnlQeDsKCQl0aGlzLnMucmVkcmF3Qm90dG9tID0gaVNjcm9sbFRvcCArIGJvdW5kYXJ5UHg7CgoJCXRoaXMucy5za2lwID0gZmFsc2U7CgoJCS8vIFJlc3RvcmUgdGhlIHNjcm9sbGluZyBwb3NpdGlvbiB0aGF0IHdhcyBzYXZlZCBieSBEYXRhVGFibGUncyBzdGF0ZQoJCS8vIHNhdmluZyBOb3RlIHRoYXQgdGhpcyBpcyBkb25lIG9uIHRoZSBzZWNvbmQgZHJhdyB3aGVuIGRhdGEgaXMgQWpheAoJCS8vIHNvdXJjZWQsIGFuZCB0aGUgZmlyc3QgZHJhdyB3aGVuIERPTSBzb3VyZWQKCQlpZiAoIHRoaXMucy5kdC5vRmVhdHVyZXMuYlN0YXRlU2F2ZSAmJiB0aGlzLnMuZHQub0xvYWRlZFN0YXRlICE9PSBudWxsICYmCgkJCSB0eXBlb2YgdGhpcy5zLmR0Lm9Mb2FkZWRTdGF0ZS5pU2Nyb2xsZXIgIT0gJ3VuZGVmaW5lZCcgKQoJCXsKCQkJLy8gQSBxdWlyayBvZiBEYXRhVGFibGVzIGlzIHRoYXQgdGhlIGRyYXcgY2FsbGJhY2sgd2lsbCBvY2N1ciBvbiBhbgoJCQkvLyBlbXB0eSBzZXQgaWYgQWpheCBzb3VyY2VkLCBidXQgbm90IGlmIHNlcnZlci1zaWRlIHByb2Nlc3NpbmcuCgkJCXZhciBhamF4U291cmNlZCA9ICh0aGlzLnMuZHQuc0FqYXhTb3VyY2UgfHwgdGhhdC5zLmR0LmFqYXgpICYmICEgdGhpcy5zLmR0Lm9GZWF0dXJlcy5iU2VydmVyU2lkZSA\/CgkJCQl0cnVlIDoKCQkJCWZhbHNlOwoKCQkJaWYgKCAoIGFqYXhTb3VyY2VkICYmIHRoaXMucy5kdC5pRHJhdyA9PSAyKSB8fAoJCQkgICAgICghYWpheFNvdXJjZWQgJiYgdGhpcy5zLmR0LmlEcmF3ID09IDEpICkKCQkJewoJCQkJc2V0VGltZW91dCggZnVuY3Rpb24gKCkgewoJCQkJCSQodGhhdC5kb20uc2Nyb2xsZXIpLnNjcm9sbFRvcCggdGhhdC5zLmR0Lm9Mb2FkZWRTdGF0ZS5pU2Nyb2xsZXIgKTsKCQkJCQl0aGF0LnMucmVkcmF3VG9wID0gdGhhdC5zLmR0Lm9Mb2FkZWRTdGF0ZS5pU2Nyb2xsZXIgLSAoaGVpZ2h0cy52aWV3cG9ydC8yKTsKCgkJCQkJLy8gSW4gb3JkZXIgdG8gcHJldmVudCBsYXlvdXQgdGhyYXNoaW5nIHdlIG5lZWQgYW5vdGhlcgoJCQkJCS8vIHNtYWxsIGRlbGF5CgkJCQkJc2V0VGltZW91dCggZnVuY3Rpb24gKCkgewoJCQkJCQl0aGF0LnMuaW5nbm9yZVNjcm9sbCA9IGZhbHNlOwoJCQkJCX0sIDAgKTsKCQkJCX0sIDAgKTsKCQkJfQoJCX0KCQllbHNlIHsKCQkJdGhhdC5zLmluZ25vcmVTY3JvbGwgPSBmYWxzZTsKCQl9CgoJCS8vIEJlY2F1c2Ugb2YgdGhlIG9yZGVyIG9mIHRoZSBEVCBjYWxsYmFja3MsIHRoZSBpbmZvIHVwZGF0ZSB3aWxsCgkJLy8gdGFrZSBwcmVjZWRlbmNlIG92ZXIgdGhlIG9uZSB3ZSB3YW50IGhlcmUuIFNvIGEgJ3RocmVhZCcgYnJlYWsgaXMKCQkvLyBuZWVkZWQKCQlzZXRUaW1lb3V0KCBmdW5jdGlvbiAoKSB7CgkJCXRoYXQuX2ZuSW5mby5jYWxsKCB0aGF0ICk7CgkJfSwgMCApOwoKCQkvLyBIaWRlIHRoZSBsb2FkaW5nIGluZGljYXRvcgoJCWlmICggdGhpcy5kb20ubG9hZGVyICYmIHRoaXMucy5sb2FkZXJWaXNpYmxlICkgewoJCQl0aGlzLmRvbS5sb2FkZXIuY3NzKCAnZGlzcGxheScsICdub25lJyApOwoJCQl0aGlzLnMubG9hZGVyVmlzaWJsZSA9IGZhbHNlOwoJCX0KCX0sCgoKCS8qKgoJICogRm9yY2UgdGhlIHNjcm9sbGluZyBjb250YWluZXIgdG8gaGF2ZSBoZWlnaHQgYmV5b25kIHRoYXQgb2YganVzdCB0aGUKCSAqIHRhYmxlIHRoYXQgaGFzIGJlZW4gZHJhd24gc28gdGhlIHVzZXIgY2FuIHNjcm9sbCB0aGUgd2hvbGUgZGF0YSBzZXQuCgkgKgoJICogTm90ZSB0aGF0IGlmIHRoZSBjYWxjdWxhdGVkIHJlcXVpcmVkIHNjcm9sbGluZyBoZWlnaHQgZXhjZWVkcyBhIG1heGltdW0KCSAqIHZhbHVlICgxIG1pbGxpb24gcGl4ZWxzIC0gaGFyZC1jb2RlZCkgdGhlIGZvcmNpbmcgZWxlbWVudCB3aWxsIGJlIHNldAoJICogb25seSB0byB0aGF0IG1heGltdW0gdmFsdWUgYW5kIHZpcnR1YWwgLyBwaHlzaWNhbCBkb21haW4gdHJhbnNmb3JtcyB3aWxsCgkgKiBiZSB1c2VkIHRvIGFsbG93IFNjcm9sbGVyIHRvIGRpc3BsYXkgdGFibGVzIG9mIGFueSBudW1iZXIgb2YgcmVjb3Jkcy4KCSAqICBAcmV0dXJucyB7dm9pZH0KCSAqICBAcHJpdmF0ZQoJICovCglfZm5TY3JvbGxGb3JjZTogZnVuY3Rpb24gKCkKCXsKCQl2YXIgaGVpZ2h0cyA9IHRoaXMucy5oZWlnaHRzOwoJCXZhciBtYXggPSAxMDAwMDAwOwoKCQloZWlnaHRzLnZpcnR1YWwgPSBoZWlnaHRzLnJvdyAqIHRoaXMucy5kdC5mblJlY29yZHNEaXNwbGF5KCk7CgkJaGVpZ2h0cy5zY3JvbGwgPSBoZWlnaHRzLnZpcnR1YWw7CgoJCWlmICggaGVpZ2h0cy5zY3JvbGwgPiBtYXggKSB7CgkJCWhlaWdodHMuc2Nyb2xsID0gbWF4OwoJCX0KCgkJdGhpcy5kb20uZm9yY2Uuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0cy5zY3JvbGwrInB4IjsKCX0sCgoKCS8qKgoJICogQXV0b21hdGljIGNhbGN1bGF0aW9uIG9mIHRhYmxlIHJvdyBoZWlnaHQuIFRoaXMgaXMganVzdCBhIGxpdHRsZSB0cmlja3kgaGVyZSBhcyB1c2luZwoJICogaW5pdGlhbGlzYXRpb24gRGF0YVRhYmxlcyBoYXMgdGFsZSB0aGUgdGFibGUgb3V0IG9mIHRoZSBkb2N1bWVudCwgc28gd2UgbmVlZCB0byBjcmVhdGUKCSAqIGEgbmV3IHRhYmxlIGFuZCBpbnNlcnQgaXQgaW50byB0aGUgZG9jdW1lbnQsIGNhbGN1bGF0ZSB0aGUgcm93IGhlaWdodCBhbmQgdGhlbiB3aGlwIHRoZQoJICogdGFibGUgb3V0LgoJICogIEByZXR1cm5zIHt2b2lkfQoJICogIEBwcml2YXRlCgkgKi8KCSJfZm5DYWxjUm93SGVpZ2h0IjogZnVuY3Rpb24gKCkKCXsKCQl2YXIgZHQgPSB0aGlzLnMuZHQ7CgkJdmFyIG9yaWdUYWJsZSA9IGR0Lm5UYWJsZTsKCQl2YXIgblRhYmxlID0gb3JpZ1RhYmxlLmNsb25lTm9kZSggZmFsc2UgKTsKCQl2YXIgdGJvZHkgPSAkKCc8dGJvZHkvPicpLmFwcGVuZFRvKCBuVGFibGUgKTsKCQl2YXIgY29udGFpbmVyID0gJCgKCQkJJzxkaXYgY2xhc3M9IicrZHQub0NsYXNzZXMuc1dyYXBwZXIrJyBEVFMiPicrCgkJCQknPGRpdiBjbGFzcz0iJytkdC5vQ2xhc3Nlcy5zU2Nyb2xsV3JhcHBlcisnIj4nKwoJCQkJCSc8ZGl2IGNsYXNzPSInK2R0Lm9DbGFzc2VzLnNTY3JvbGxCb2R5KyciPjwvZGl2PicrCgkJCQknPC9kaXY+JysKCQkJJzwvZGl2PicKCQkpOwoKCQkvLyBXYW50IDMgcm93cyBpbiB0aGUgc2l6aW5nIHRhYmxlIHNvIDpmaXJzdC1jaGlsZCBhbmQgOmxhc3QtY2hpbGQKCQkvLyBDU1Mgc3R5bGVzIGRvbid0IGNvbWUgaW50byBwbGF5IC0gdGFrZSB0aGUgc2l6ZSBvZiB0aGUgbWlkZGxlIHJvdwoJCSQoJ3Rib2R5IHRyOmx0KDQpJywgb3JpZ1RhYmxlKS5jbG9uZSgpLmFwcGVuZFRvKCB0Ym9keSApOwoJCXdoaWxlKCAkKCd0cicsIHRib2R5KS5sZW5ndGggPCAzICkgewoJCQl0Ym9keS5hcHBlbmQoICc8dHI+PHRkPiZuYnNwOzwvdGQ+PC90cj4nICk7CgkJfQoKCQkkKCdkaXYuJytkdC5vQ2xhc3Nlcy5zU2Nyb2xsQm9keSwgY29udGFpbmVyKS5hcHBlbmQoIG5UYWJsZSApOwoKCQl2YXIgYXBwZW5kVG87CgkJaWYgKGR0Ll9iSW5pdENvbXBsZXRlKSB7CgkJCWFwcGVuZFRvID0gb3JpZ1RhYmxlLnBhcmVudE5vZGU7CgkJfSBlbHNlIHsKCQkJaWYgKCF0aGlzLnMuZHQubkhvbGRpbmcpIHsKCQkJCXRoaXMucy5kdC5uSG9sZGluZyA9ICQoICc8ZGl2PjwvZGl2PicgKS5pbnNlcnRCZWZvcmUoIHRoaXMucy5kdC5uVGFibGUgKTsKCQkJfQoJCQlhcHBlbmRUbyA9IHRoaXMucy5kdC5uSG9sZGluZzsKCQl9CgoJCWNvbnRhaW5lci5hcHBlbmRUbyggYXBwZW5kVG8gKTsKCQl0aGlzLnMuaGVpZ2h0cy5yb3cgPSAkKCd0cicsIHRib2R5KS5lcSgxKS5vdXRlckhlaWdodCgpOwoJCWNvbnRhaW5lci5yZW1vdmUoKTsKCX0sCgoKCS8qKgoJICogVXBkYXRlIGFueSBpbmZvcm1hdGlvbiBlbGVtZW50cyB0aGF0IGFyZSBjb250cm9sbGVkIGJ5IHRoZSBEYXRhVGFibGUgYmFzZWQgb24gdGhlIHNjcm9sbGluZwoJICogdmlld3BvcnQgYW5kIHdoYXQgcm93cyBhcmUgdmlzaWJsZSBpbiBpdC4gVGhpcyBmdW5jdGlvbiBiYXNpY2FsbHkgYWN0cyBpbiB0aGUgc2FtZSB3YXkgYXMKCSAqIF9mblVwZGF0ZUluZm8gaW4gRGF0YVRhYmxlcywgYW5kIGVmZmVjdGl2ZWx5IHJlcGxhY2VzIHRoYXQgZnVuY3Rpb24uCgkgKiAgQHJldHVybnMge3ZvaWR9CgkgKiAgQHByaXZhdGUKCSAqLwoJIl9mbkluZm8iOiBmdW5jdGlvbiAoKQoJewoJCWlmICggIXRoaXMucy5kdC5vRmVhdHVyZXMuYkluZm8gKQoJCXsKCQkJcmV0dXJuOwoJCX0KCgkJdmFyCgkJCWR0ID0gdGhpcy5zLmR0LAoJCQlsYW5ndWFnZSA9IGR0Lm9MYW5ndWFnZSwKCQkJaVNjcm9sbFRvcCA9IHRoaXMuZG9tLnNjcm9sbGVyLnNjcm9sbFRvcCwKCQkJaVN0YXJ0ID0gTWF0aC5mbG9vciggdGhpcy5mblBpeGVsc1RvUm93KGlTY3JvbGxUb3AsIGZhbHNlLCB0aGlzLnMuYW5pKSsxICksCgkJCWlNYXggPSBkdC5mblJlY29yZHNUb3RhbCgpLAoJCQlpVG90YWwgPSBkdC5mblJlY29yZHNEaXNwbGF5KCksCgkJCWlQb3NzaWJsZUVuZCA9IE1hdGguY2VpbCggdGhpcy5mblBpeGVsc1RvUm93KGlTY3JvbGxUb3ArdGhpcy5zLmhlaWdodHMudmlld3BvcnQsIGZhbHNlLCB0aGlzLnMuYW5pKSApLAoJCQlpRW5kID0gaVRvdGFsIDwgaVBvc3NpYmxlRW5kID8gaVRvdGFsIDogaVBvc3NpYmxlRW5kLAoJCQlzU3RhcnQgPSBkdC5mbkZvcm1hdE51bWJlciggaVN0YXJ0ICksCgkJCXNFbmQgPSBkdC5mbkZvcm1hdE51bWJlciggaUVuZCApLAoJCQlzTWF4ID0gZHQuZm5Gb3JtYXROdW1iZXIoIGlNYXggKSwKCQkJc1RvdGFsID0gZHQuZm5Gb3JtYXROdW1iZXIoIGlUb3RhbCApLAoJCQlzT3V0OwoKCQlpZiAoIGR0LmZuUmVjb3Jkc0Rpc3BsYXkoKSA9PT0gMCAmJgoJCQkgICBkdC5mblJlY29yZHNEaXNwbGF5KCkgPT0gZHQuZm5SZWNvcmRzVG90YWwoKSApCgkJewoJCQkvKiBFbXB0eSByZWNvcmQgc2V0ICovCgkJCXNPdXQgPSBsYW5ndWFnZS5zSW5mb0VtcHR5KyBsYW5ndWFnZS5zSW5mb1Bvc3RGaXg7CgkJfQoJCWVsc2UgaWYgKCBkdC5mblJlY29yZHNEaXNwbGF5KCkgPT09IDAgKQoJCXsKCQkJLyogRW1wdHkgcmVjb3JkIHNldCBhZnRlciBmaWx0ZXJpbmcgKi8KCQkJc091dCA9IGxhbmd1YWdlLnNJbmZvRW1wdHkgKycgJysKCQkJCWxhbmd1YWdlLnNJbmZvRmlsdGVyZWQucmVwbGFjZSgnX01BWF8nLCBzTWF4KSsKCQkJCQlsYW5ndWFnZS5zSW5mb1Bvc3RGaXg7CgkJfQoJCWVsc2UgaWYgKCBkdC5mblJlY29yZHNEaXNwbGF5KCkgPT0gZHQuZm5SZWNvcmRzVG90YWwoKSApCgkJewoJCQkvKiBOb3JtYWwgcmVjb3JkIHNldCAqLwoJCQlzT3V0ID0gbGFuZ3VhZ2Uuc0luZm8uCgkJCQkJcmVwbGFjZSgnX1NUQVJUXycsIHNTdGFydCkuCgkJCQkJcmVwbGFjZSgnX0VORF8nLCAgIHNFbmQpLgoJCQkJCXJlcGxhY2UoJ19NQVhfJywgICBzTWF4KS4KCQkJCQlyZXBsYWNlKCdfVE9UQUxfJywgc1RvdGFsKSsKCQkJCWxhbmd1YWdlLnNJbmZvUG9zdEZpeDsKCQl9CgkJZWxzZQoJCXsKCQkJLyogUmVjb3JkIHNldCBhZnRlciBmaWx0ZXJpbmcgKi8KCQkJc091dCA9IGxhbmd1YWdlLnNJbmZvLgoJCQkJCXJlcGxhY2UoJ19TVEFSVF8nLCBzU3RhcnQpLgoJCQkJCXJlcGxhY2UoJ19FTkRfJywgICBzRW5kKS4KCQkJCQlyZXBsYWNlKCdfTUFYXycsICAgc01heCkuCgkJCQkJcmVwbGFjZSgnX1RPVEFMXycsIHNUb3RhbCkgKycgJysKCQkJCWxhbmd1YWdlLnNJbmZvRmlsdGVyZWQucmVwbGFjZSgKCQkJCQknX01BWF8nLAoJCQkJCWR0LmZuRm9ybWF0TnVtYmVyKGR0LmZuUmVjb3Jkc1RvdGFsKCkpCgkJCQkpKwoJCQkJbGFuZ3VhZ2Uuc0luZm9Qb3N0Rml4OwoJCX0KCgkJdmFyIGNhbGxiYWNrID0gbGFuZ3VhZ2UuZm5JbmZvQ2FsbGJhY2s7CgkJaWYgKCBjYWxsYmFjayApIHsKCQkJc091dCA9IGNhbGxiYWNrLmNhbGwoIGR0Lm9JbnN0YW5jZSwKCQkJCWR0LCBpU3RhcnQsIGlFbmQsIGlNYXgsIGlUb3RhbCwgc091dAoJCQkpOwoJCX0KCgkJdmFyIG4gPSBkdC5hYW5GZWF0dXJlcy5pOwoJCWlmICggdHlwZW9mIG4gIT0gJ3VuZGVmaW5lZCcgKQoJCXsKCQkJZm9yICggdmFyIGk9MCwgaUxlbj1uLmxlbmd0aCA7IGk8aUxlbiA7IGkrKyApCgkJCXsKCQkJCSQobltpXSkuaHRtbCggc091dCApOwoJCQl9CgkJfQoJfQp9OwoKCgovKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoKICogU3RhdGljcwogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICovCgoKLyoqCiAqIFNjcm9sbGVyIGRlZmF1bHQgc2V0dGluZ3MgZm9yIGluaXRpYWxpc2F0aW9uCiAqICBAbmFtZXNwYWNlCiAqICBAbmFtZSBTY3JvbGxlci5kZWZhdWx0cwogKiAgQHN0YXRpYwogKi8KU2Nyb2xsZXIuZGVmYXVsdHMgPSAvKiogQGxlbmRzIFNjcm9sbGVyLmRlZmF1bHRzICovewoJLyoqCgkgKiBJbmRpY2F0ZSBpZiBTY3JvbGxlciBzaG93IHNob3cgdHJhY2UgaW5mb3JtYXRpb24gb24gdGhlIGNvbnNvbGUgb3Igbm90LiBUaGlzIGNhbiBiZQoJICogdXNlZnVsIHdoZW4gZGVidWdnaW5nIFNjcm9sbGVyIG9yIGlmIGp1c3QgY3VyaW91cyBhcyB0byB3aGF0IGl0IGlzIGRvaW5nLCBidXQgc2hvdWxkCgkgKiBiZSB0dXJuZWQgb2ZmIGZvciBwcm9kdWN0aW9uLgoJICogIEB0eXBlICAgICBib29sCgkgKiAgQGRlZmF1bHQgIGZhbHNlCgkgKiAgQHN0YXRpYwoJICogIEBleGFtcGxlCgkgKiAgICB2YXIgb1RhYmxlID0gJCgnI2V4YW1wbGUnKS5kYXRhVGFibGUoIHsKCSAqICAgICAgICAic1Njcm9sbFkiOiAiMjAwcHgiLAoJICogICAgICAgICJzRG9tIjogImZydGlTIiwKCSAqICAgICAgICAiYkRlZmVyUmVuZGVyIjogdHJ1ZSwKCSAqICAgICAgICAib1Njcm9sbGVyIjogewoJICogICAgICAgICAgInRyYWNlIjogdHJ1ZQoJICogICAgICAgIH0KCSAqICAgIH0gKTsKCSAqLwoJInRyYWNlIjogZmFsc2UsCgoJLyoqCgkgKiBTY3JvbGxlciB3aWxsIGF0dGVtcHQgdG8gYXV0b21hdGljYWxseSBjYWxjdWxhdGUgdGhlIGhlaWdodCBvZiByb3dzIGZvciBpdCdzIGludGVybmFsCgkgKiBjYWxjdWxhdGlvbnMuIEhvd2V2ZXIgdGhlIGhlaWdodCB0aGF0IGlzIHVzZWQgY2FuIGJlIG92ZXJyaWRkZW4gdXNpbmcgdGhpcyBwYXJhbWV0ZXIuCgkgKiAgQHR5cGUgICAgIGludHxzdHJpbmcKCSAqICBAZGVmYXVsdCAgYXV0bwoJICogIEBzdGF0aWMKCSAqICBAZXhhbXBsZQoJICogICAgdmFyIG9UYWJsZSA9ICQoJyNleGFtcGxlJykuZGF0YVRhYmxlKCB7CgkgKiAgICAgICAgInNTY3JvbGxZIjogIjIwMHB4IiwKCSAqICAgICAgICAic0RvbSI6ICJmcnRpUyIsCgkgKiAgICAgICAgImJEZWZlclJlbmRlciI6IHRydWUsCgkgKiAgICAgICAgIm9TY3JvbGxlciI6IHsKCSAqICAgICAgICAgICJyb3dIZWlnaHQiOiAzMAoJICogICAgICAgIH0KCSAqICAgIH0gKTsKCSAqLwoJInJvd0hlaWdodCI6ICJhdXRvIiwKCgkvKioKCSAqIFdoZW4gdXNpbmcgc2VydmVyLXNpZGUgcHJvY2Vzc2luZywgU2Nyb2xsZXIgd2lsbCB3YWl0IGEgc21hbGwgYW1vdW50IG9mIHRpbWUgdG8gYWxsb3cKCSAqIHRoZSBzY3JvbGxpbmcgdG8gZmluaXNoIGJlZm9yZSByZXF1ZXN0aW5nIG1vcmUgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIuIFRoaXMgcHJldmVudHMKCSAqIHlvdSBmcm9tIERvU2luZyB5b3VyIG93biBzZXJ2ZXIhIFRoZSB3YWl0IHRpbWUgY2FuIGJlIGNvbmZpZ3VyZWQgYnkgdGhpcyBwYXJhbWV0ZXIuCgkgKiAgQHR5cGUgICAgIGludAoJICogIEBkZWZhdWx0ICAyMDAKCSAqICBAc3RhdGljCgkgKiAgQGV4YW1wbGUKCSAqICAgIHZhciBvVGFibGUgPSAkKCcjZXhhbXBsZScpLmRhdGFUYWJsZSggewoJICogICAgICAgICJzU2Nyb2xsWSI6ICIyMDBweCIsCgkgKiAgICAgICAgInNEb20iOiAiZnJ0aVMiLAoJICogICAgICAgICJiRGVmZXJSZW5kZXIiOiB0cnVlLAoJICogICAgICAgICJvU2Nyb2xsZXIiOiB7CgkgKiAgICAgICAgICAic2VydmVyV2FpdCI6IDEwMAoJICogICAgICAgIH0KCSAqICAgIH0gKTsKCSAqLwoJInNlcnZlcldhaXQiOiAyMDAsCgoJLyoqCgkgKiBUaGUgZGlzcGxheSBidWZmZXIgaXMgd2hhdCBTY3JvbGxlciB1c2VzIHRvIGNhbGN1bGF0ZSBob3cgbWFueSByb3dzIGl0IHNob3VsZCBwcmUtZmV0Y2gKCSAqIGZvciBzY3JvbGxpbmcuIFNjcm9sbGVyIGF1dG9tYXRpY2FsbHkgYWRqdXN0cyBEYXRhVGFibGVzJyBkaXNwbGF5IGxlbmd0aCB0byBwcmUtZmV0Y2gKCSAqIHJvd3MgdGhhdCB3aWxsIGJlIHNob3duIGluICJuZWFyIHNjcm9sbGluZyIgKGkuZS4ganVzdCBiZXlvbmQgdGhlIGN1cnJlbnQgZGlzcGxheSBhcmVhKS4KCSAqIFRoZSB2YWx1ZSBpcyBiYXNlZCB1cG9uIHRoZSBudW1iZXIgb2Ygcm93cyB0aGF0IGNhbiBiZSBkaXNwbGF5ZWQgaW4gdGhlIHZpZXdwb3J0IChpLmUuCgkgKiBhIHZhbHVlIG9mIDEpLCBhbmQgd2lsbCBhcHBseSB0aGUgZGlzcGxheSByYW5nZSB0byByZWNvcmRzIGJlZm9yZSBiZWZvcmUgYW5kIGFmdGVyIHRoZQoJICogY3VycmVudCB2aWV3cG9ydCAtIGkuZS4gYSBmYWN0b3Igb2YgMyB3aWxsIGFsbG93IFNjcm9sbGVyIHRvIHByZS1mZXRjaCAxIHZpZXdwb3J0J3Mgd29ydGgKCSAqIG9mIHJvd3MgYmVmb3JlIHRoZSBjdXJyZW50IHZpZXdwb3J0LCB0aGUgY3VycmVudCB2aWV3cG9ydCdzIHJvd3MgYW5kIDEgdmlld3BvcnQncyB3b3J0aAoJICogb2Ygcm93cyBhZnRlciB0aGUgY3VycmVudCB2aWV3cG9ydC4gQWRqdXN0aW5nIHRoaXMgdmFsdWUgY2FuIGJlIHVzZWZ1bCBmb3IgZW5zdXJpbmcKCSAqIHNtb290aCBzY3JvbGxpbmcgYmFzZWQgb24geW91ciBkYXRhIHNldC4KCSAqICBAdHlwZSAgICAgaW50CgkgKiAgQGRlZmF1bHQgIDcKCSAqICBAc3RhdGljCgkgKiAgQGV4YW1wbGUKCSAqICAgIHZhciBvVGFibGUgPSAkKCcjZXhhbXBsZScpLmRhdGFUYWJsZSggewoJICogICAgICAgICJzU2Nyb2xsWSI6ICIyMDBweCIsCgkgKiAgICAgICAgInNEb20iOiAiZnJ0aVMiLAoJICogICAgICAgICJiRGVmZXJSZW5kZXIiOiB0cnVlLAoJICogICAgICAgICJvU2Nyb2xsZXIiOiB7CgkgKiAgICAgICAgICAiZGlzcGxheUJ1ZmZlciI6IDEwCgkgKiAgICAgICAgfQoJICogICAgfSApOwoJICovCgkiZGlzcGxheUJ1ZmZlciI6IDksCgoJLyoqCgkgKiBTY3JvbGxlciB1c2VzIHRoZSBib3VuZGFyeSBzY2FsaW5nIGZhY3RvciB0byBkZWNpZGUgd2hlbiB0byByZWRyYXcgdGhlIHRhYmxlIC0gd2hpY2ggaXQKCSAqIHR5cGljYWxseSBkb2VzIGJlZm9yZSB5b3UgcmVhY2ggdGhlIGVuZCBvZiB0aGUgY3VycmVudGx5IGxvYWRlZCBkYXRhIHNldCAoaW4gb3JkZXIgdG8KCSAqIGFsbG93IHRoZSBkYXRhIHRvIGxvb2sgY29udGludW91cyB0byBhIHVzZXIgc2Nyb2xsaW5nIHRocm91Z2ggdGhlIGRhdGEpLiBJZiBnaXZlbiBhcyAwCgkgKiB0aGVuIHRoZSB0YWJsZSB3aWxsIGJlIHJlZHJhd24gd2hlbmV2ZXIgdGhlIHZpZXdwb3J0IGlzIHNjcm9sbGVkLCB3aGlsZSAxIHdvdWxkIG5vdAoJICogcmVkcmF3IHRoZSB0YWJsZSB1bnRpbCB0aGUgY3VycmVudGx5IGxvYWRlZCBkYXRhIGhhcyBhbGwgYmVlbiBzaG93bi4gWW91IHdpbGwgd2FudAoJICogc29tZXRoaW5nIGluIHRoZSBtaWRkbGUgLSB0aGUgZGVmYXVsdCBmYWN0b3Igb2YgMC41IGlzIHVzdWFsbHkgc3VpdGFibGUuCgkgKiAgQHR5cGUgICAgIGZsb2F0CgkgKiAgQGRlZmF1bHQgIDAuNQoJICogIEBzdGF0aWMKCSAqICBAZXhhbXBsZQoJICogICAgdmFyIG9UYWJsZSA9ICQoJyNleGFtcGxlJykuZGF0YVRhYmxlKCB7CgkgKiAgICAgICAgInNTY3JvbGxZIjogIjIwMHB4IiwKCSAqICAgICAgICAic0RvbSI6ICJmcnRpUyIsCgkgKiAgICAgICAgImJEZWZlclJlbmRlciI6IHRydWUsCgkgKiAgICAgICAgIm9TY3JvbGxlciI6IHsKCSAqICAgICAgICAgICJib3VuZGFyeVNjYWxlIjogMC43NQoJICogICAgICAgIH0KCSAqICAgIH0gKTsKCSAqLwoJImJvdW5kYXJ5U2NhbGUiOiAwLjUsCgoJLyoqCgkgKiBTaG93IChvciBub3QpIHRoZSBsb2FkaW5nIGVsZW1lbnQgaW4gdGhlIGJhY2tncm91bmQgb2YgdGhlIHRhYmxlLiBOb3RlIHRoYXQgeW91IHNob3VsZAoJICogaW5jbHVkZSB0aGUgZGF0YVRhYmxlcy5zY3JvbGxlci5jc3MgZmlsZSBmb3IgdGhpcyB0byBiZSBkaXNwbGF5ZWQgY29ycmVjdGx5LgoJICogIEB0eXBlICAgICBib29sZWFuCgkgKiAgQGRlZmF1bHQgIGZhbHNlCgkgKiAgQHN0YXRpYwoJICogIEBleGFtcGxlCgkgKiAgICB2YXIgb1RhYmxlID0gJCgnI2V4YW1wbGUnKS5kYXRhVGFibGUoIHsKCSAqICAgICAgICAic1Njcm9sbFkiOiAiMjAwcHgiLAoJICogICAgICAgICJzRG9tIjogImZydGlTIiwKCSAqICAgICAgICAiYkRlZmVyUmVuZGVyIjogdHJ1ZSwKCSAqICAgICAgICAib1Njcm9sbGVyIjogewoJICogICAgICAgICAgImxvYWRpbmdJbmRpY2F0b3IiOiB0cnVlCgkgKiAgICAgICAgfQoJICogICAgfSApOwoJICovCgkibG9hZGluZ0luZGljYXRvciI6IGZhbHNlCn07CgpTY3JvbGxlci5vRGVmYXVsdHMgPSBTY3JvbGxlci5kZWZhdWx0czsKCgoKLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqCiAqIENvbnN0YW50cwogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICovCgovKioKICogU2Nyb2xsZXIgdmVyc2lvbgogKiAgQHR5cGUgICAgICBTdHJpbmcKICogIEBkZWZhdWx0ICAgU2VlIGNvZGUKICogIEBuYW1lICAgICAgU2Nyb2xsZXIudmVyc2lvbgogKiAgQHN0YXRpYwogKi8KU2Nyb2xsZXIudmVyc2lvbiA9ICIxLjIuMiI7CgoKCi8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKgogKiBJbml0aWFsaXNhdGlvbgogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICovCgovKgogKiBSZWdpc3RlciBhIG5ldyBmZWF0dXJlIHdpdGggRGF0YVRhYmxlcwogKi8KaWYgKCB0eXBlb2YgJC5mbi5kYXRhVGFibGUgPT0gImZ1bmN0aW9uIiAmJgogICAgIHR5cGVvZiAkLmZuLmRhdGFUYWJsZUV4dC5mblZlcnNpb25DaGVjayA9PSAiZnVuY3Rpb24iICYmCiAgICAgJC5mbi5kYXRhVGFibGVFeHQuZm5WZXJzaW9uQ2hlY2soJzEuOS4wJykgKQp7CgkkLmZuLmRhdGFUYWJsZUV4dC5hb0ZlYXR1cmVzLnB1c2goIHsKCQkiZm5Jbml0IjogZnVuY3Rpb24oIG9EVFNldHRpbmdzICkgewoJCQl2YXIgaW5pdCA9IG9EVFNldHRpbmdzLm9Jbml0OwoJCQl2YXIgb3B0cyA9IGluaXQuc2Nyb2xsZXIgfHwgaW5pdC5vU2Nyb2xsZXIgfHwge307CgkJCXZhciBvU2Nyb2xsZXIgPSBuZXcgU2Nyb2xsZXIoIG9EVFNldHRpbmdzLCBvcHRzICk7CgkJCXJldHVybiBvU2Nyb2xsZXIuZG9tLndyYXBwZXI7CgkJfSwKCQkiY0ZlYXR1cmUiOiAiUyIsCgkJInNGZWF0dXJlIjogIlNjcm9sbGVyIgoJfSApOwp9CmVsc2UKewoJYWxlcnQoICJXYXJuaW5nOiBTY3JvbGxlciByZXF1aXJlcyBEYXRhVGFibGVzIDEuOS4wIG9yIGdyZWF0ZXIgLSB3d3cuZGF0YXRhYmxlcy5uZXQvZG93bmxvYWQiKTsKfQoKCi8vIEF0dGFjaCBTY3JvbGxlciB0byBEYXRhVGFibGVzIHNvIGl0IGNhbiBiZSBhY2Nlc3NlZCBhcyBhbiAnZXh0cmEnCiQuZm4uZGF0YVRhYmxlLlNjcm9sbGVyID0gU2Nyb2xsZXI7CiQuZm4uRGF0YVRhYmxlLlNjcm9sbGVyID0gU2Nyb2xsZXI7CgoKLy8gRGF0YVRhYmxlcyAxLjEwIEFQSSBtZXRob2QgYWxpYXNlcwppZiAoICQuZm4uZGF0YVRhYmxlLkFwaSApIHsKCXZhciBBcGkgPSAkLmZuLmRhdGFUYWJsZS5BcGk7CgoJQXBpLnJlZ2lzdGVyKCAnc2Nyb2xsZXIoKScsIGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gdGhpczsKCX0gKTsKCglBcGkucmVnaXN0ZXIoICdzY3JvbGxlcigpLnJvd1RvUGl4ZWxzKCknLCBmdW5jdGlvbiAoIHJvd0lkeCwgaW50UGFyc2UsIHZpcnR1YWwgKSB7CgkJdmFyIGN0eCA9IHRoaXMuY29udGV4dDsKCgkJaWYgKCBjdHgubGVuZ3RoICYmIGN0eFswXS5vU2Nyb2xsZXIgKSB7CgkJCXJldHVybiBjdHhbMF0ub1Njcm9sbGVyLmZuUm93VG9QaXhlbHMoIHJvd0lkeCwgaW50UGFyc2UsIHZpcnR1YWwgKTsKCQl9CgkJLy8gdW5kZWZpbmVkCgl9ICk7CgoJQXBpLnJlZ2lzdGVyKCAnc2Nyb2xsZXIoKS5waXhlbHNUb1JvdygpJywgZnVuY3Rpb24gKCBwaXhlbHMsIGludFBhcnNlLCB2aXJ0dWFsICkgewoJCXZhciBjdHggPSB0aGlzLmNvbnRleHQ7CgoJCWlmICggY3R4Lmxlbmd0aCAmJiBjdHhbMF0ub1Njcm9sbGVyICkgewoJCQlyZXR1cm4gY3R4WzBdLm9TY3JvbGxlci5mblBpeGVsc1RvUm93KCBwaXhlbHMsIGludFBhcnNlLCB2aXJ0dWFsICk7CgkJfQoJCS8vIHVuZGVmaW5lZAoJfSApOwoKCUFwaS5yZWdpc3RlciggJ3Njcm9sbGVyKCkuc2Nyb2xsVG9Sb3coKScsIGZ1bmN0aW9uICggcm93LCBhbmkgKSB7CgkJdGhpcy5pdGVyYXRvciggJ3RhYmxlJywgZnVuY3Rpb24gKCBjdHggKSB7CgkJCWlmICggY3R4Lm9TY3JvbGxlciApIHsKCQkJCWN0eC5vU2Nyb2xsZXIuZm5TY3JvbGxUb1Jvdyggcm93LCBhbmkgKTsKCQkJfQoJCX0gKTsKCgkJcmV0dXJuIHRoaXM7Cgl9ICk7CgoJQXBpLnJlZ2lzdGVyKCAnc2Nyb2xsZXIoKS5tZWFzdXJlKCknLCBmdW5jdGlvbiAoIHJlZHJhdyApIHsKCQl0aGlzLml0ZXJhdG9yKCAndGFibGUnLCBmdW5jdGlvbiAoIGN0eCApIHsKCQkJaWYgKCBjdHgub1Njcm9sbGVyICkgewoJCQkJY3R4Lm9TY3JvbGxlci5mbk1lYXN1cmUoIHJlZHJhdyApOwoJCQl9CgkJfSApOwoKCQlyZXR1cm4gdGhpczsKCX0gKTsKfQoKCnJldHVybiBTY3JvbGxlcjsKfTsgLy8gL2ZhY3RvcnkKCgovLyBEZWZpbmUgYXMgYW4gQU1EIG1vZHVsZSBpZiBwb3NzaWJsZQppZiAoIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHsKCWRlZmluZSggWydqcXVlcnknLCAnZGF0YXRhYmxlcyddLCBmYWN0b3J5ICk7Cn0KZWxzZSBpZiAoIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyApIHsKICAgIC8vIE5vZGUvQ29tbW9uSlMKICAgIGZhY3RvcnkoIHJlcXVpcmUoJ2pxdWVyeScpLCByZXF1aXJlKCdkYXRhdGFibGVzJykgKTsKfQplbHNlIGlmICggalF1ZXJ5ICYmICFqUXVlcnkuZm4uZGF0YVRhYmxlLlNjcm9sbGVyICkgewoJLy8gT3RoZXJ3aXNlIHNpbXBseSBpbml0aWFsaXNlIGFzIG5vcm1hbCwgc3RvcHBpbmcgbXVsdGlwbGUgZXZhbHVhdGlvbgoJZmFjdG9yeSggalF1ZXJ5LCBqUXVlcnkuZm4uZGF0YVRhYmxlICk7Cn0KCgp9KSh3aW5kb3csIGRvY3VtZW50KTsKCg==",
    "size": "37984"
}