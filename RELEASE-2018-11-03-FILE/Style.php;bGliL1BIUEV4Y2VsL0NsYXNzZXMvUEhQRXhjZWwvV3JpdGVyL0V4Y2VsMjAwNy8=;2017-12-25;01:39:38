{
    "namaFile": "lib\/PHPExcel\/Classes\/PHPExcel\/Writer\/Excel2007\/Style.php",
    "lastUpdate": "2017-12-25+01:39:38.00",
    "contentFile": "PD9waHAKCi8qKgogKiBQSFBFeGNlbF9Xcml0ZXJfRXhjZWwyMDA3X1N0eWxlCiAqCiAqIENvcHlyaWdodCAoYykgMjAwNiAtIDIwMTUgUEhQRXhjZWwKICoKICogVGhpcyBsaWJyYXJ5IGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vcgogKiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljCiAqIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlcgogKiB2ZXJzaW9uIDIuMSBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KICoKICogVGhpcyBsaWJyYXJ5IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUgR05VCiAqIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiAqCiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMKICogTGljZW5zZSBhbG9uZyB3aXRoIHRoaXMgbGlicmFyeTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZQogKiBGb3VuZGF0aW9uLCBJbmMuLCA1MSBGcmFua2xpbiBTdHJlZXQsIEZpZnRoIEZsb29yLCBCb3N0b24sIE1BICAwMjExMC0xMzAxICBVU0EKICoKICogQGNhdGVnb3J5ICAgUEhQRXhjZWwKICogQHBhY2thZ2UgICAgUEhQRXhjZWxfV3JpdGVyX0V4Y2VsMjAwNwogKiBAY29weXJpZ2h0ICBDb3B5cmlnaHQgKGMpIDIwMDYgLSAyMDE1IFBIUEV4Y2VsIChodHRwOi8vd3d3LmNvZGVwbGV4LmNvbS9QSFBFeGNlbCkKICogQGxpY2Vuc2UgICAgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL29sZC1saWNlbnNlcy9sZ3BsLTIuMS50eHQgICAgTEdQTAogKiBAdmVyc2lvbiAgICAjI1ZFUlNJT04jIywgIyNEQVRFIyMKICovCmNsYXNzIFBIUEV4Y2VsX1dyaXRlcl9FeGNlbDIwMDdfU3R5bGUgZXh0ZW5kcyBQSFBFeGNlbF9Xcml0ZXJfRXhjZWwyMDA3X1dyaXRlclBhcnQKewogICAgLyoqCiAgICAgKiBXcml0ZSBzdHlsZXMgdG8gWE1MIGZvcm1hdAogICAgICoKICAgICAqIEBwYXJhbSAgICAgUEhQRXhjZWwgICAgJHBQSFBFeGNlbAogICAgICogQHJldHVybiAgICAgc3RyaW5nICAgICAgICAgWE1MIE91dHB1dAogICAgICogQHRocm93cyAgICAgUEhQRXhjZWxfV3JpdGVyX0V4Y2VwdGlvbgogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gd3JpdGVTdHlsZXMoUEhQRXhjZWwgJHBQSFBFeGNlbCA9IG51bGwpCiAgICB7CiAgICAgICAgLy8gQ3JlYXRlIFhNTCB3cml0ZXIKICAgICAgICAkb2JqV3JpdGVyID0gbnVsbDsKICAgICAgICBpZiAoJHRoaXMtPmdldFBhcmVudFdyaXRlcigpLT5nZXRVc2VEaXNrQ2FjaGluZygpKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXIgPSBuZXcgUEhQRXhjZWxfU2hhcmVkX1hNTFdyaXRlcihQSFBFeGNlbF9TaGFyZWRfWE1MV3JpdGVyOjpTVE9SQUdFX0RJU0ssICR0aGlzLT5nZXRQYXJlbnRXcml0ZXIoKS0+Z2V0RGlza0NhY2hpbmdEaXJlY3RvcnkoKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJG9ialdyaXRlciA9IG5ldyBQSFBFeGNlbF9TaGFyZWRfWE1MV3JpdGVyKFBIUEV4Y2VsX1NoYXJlZF9YTUxXcml0ZXI6OlNUT1JBR0VfTUVNT1JZKTsKICAgICAgICB9CgogICAgICAgIC8vIFhNTCBoZWFkZXIKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydERvY3VtZW50KCcxLjAnLCAnVVRGLTgnLCAneWVzJyk7CgogICAgICAgIC8vIHN0eWxlU2hlZXQKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ3N0eWxlU2hlZXQnKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgneG1sOnNwYWNlJywgJ3ByZXNlcnZlJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3htbG5zJywgJ2h0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9zcHJlYWRzaGVldG1sLzIwMDYvbWFpbicpOwoKICAgICAgICAvLyBudW1GbXRzCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdudW1GbXRzJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2NvdW50JywgJHRoaXMtPmdldFBhcmVudFdyaXRlcigpLT5nZXROdW1GbXRIYXNoVGFibGUoKS0+Y291bnQoKSk7CgogICAgICAgIC8vIG51bUZtdAogICAgICAgIGZvciAoJGkgPSAwOyAkaSA8ICR0aGlzLT5nZXRQYXJlbnRXcml0ZXIoKS0+Z2V0TnVtRm10SGFzaFRhYmxlKCktPmNvdW50KCk7ICsrJGkpIHsKICAgICAgICAgICAgJHRoaXMtPndyaXRlTnVtRm10KCRvYmpXcml0ZXIsICR0aGlzLT5nZXRQYXJlbnRXcml0ZXIoKS0+Z2V0TnVtRm10SGFzaFRhYmxlKCktPmdldEJ5SW5kZXgoJGkpLCAkaSk7CiAgICAgICAgfQoKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgIC8vIGZvbnRzCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdmb250cycpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdjb3VudCcsICR0aGlzLT5nZXRQYXJlbnRXcml0ZXIoKS0+Z2V0Rm9udEhhc2hUYWJsZSgpLT5jb3VudCgpKTsKCiAgICAgICAgLy8gZm9udAogICAgICAgIGZvciAoJGkgPSAwOyAkaSA8ICR0aGlzLT5nZXRQYXJlbnRXcml0ZXIoKS0+Z2V0Rm9udEhhc2hUYWJsZSgpLT5jb3VudCgpOyArKyRpKSB7CiAgICAgICAgICAgICR0aGlzLT53cml0ZUZvbnQoJG9ialdyaXRlciwgJHRoaXMtPmdldFBhcmVudFdyaXRlcigpLT5nZXRGb250SGFzaFRhYmxlKCktPmdldEJ5SW5kZXgoJGkpKTsKICAgICAgICB9CgogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgLy8gZmlsbHMKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2ZpbGxzJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2NvdW50JywgJHRoaXMtPmdldFBhcmVudFdyaXRlcigpLT5nZXRGaWxsSGFzaFRhYmxlKCktPmNvdW50KCkpOwoKICAgICAgICAvLyBmaWxsCiAgICAgICAgZm9yICgkaSA9IDA7ICRpIDwgJHRoaXMtPmdldFBhcmVudFdyaXRlcigpLT5nZXRGaWxsSGFzaFRhYmxlKCktPmNvdW50KCk7ICsrJGkpIHsKICAgICAgICAgICAgJHRoaXMtPndyaXRlRmlsbCgkb2JqV3JpdGVyLCAkdGhpcy0+Z2V0UGFyZW50V3JpdGVyKCktPmdldEZpbGxIYXNoVGFibGUoKS0+Z2V0QnlJbmRleCgkaSkpOwogICAgICAgIH0KCiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAvLyBib3JkZXJzCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdib3JkZXJzJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2NvdW50JywgJHRoaXMtPmdldFBhcmVudFdyaXRlcigpLT5nZXRCb3JkZXJzSGFzaFRhYmxlKCktPmNvdW50KCkpOwoKICAgICAgICAvLyBib3JkZXIKICAgICAgICBmb3IgKCRpID0gMDsgJGkgPCAkdGhpcy0+Z2V0UGFyZW50V3JpdGVyKCktPmdldEJvcmRlcnNIYXNoVGFibGUoKS0+Y291bnQoKTsgKyskaSkgewogICAgICAgICAgICAkdGhpcy0+d3JpdGVCb3JkZXIoJG9ialdyaXRlciwgJHRoaXMtPmdldFBhcmVudFdyaXRlcigpLT5nZXRCb3JkZXJzSGFzaFRhYmxlKCktPmdldEJ5SW5kZXgoJGkpKTsKICAgICAgICB9CgogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgLy8gY2VsbFN0eWxlWGZzCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjZWxsU3R5bGVYZnMnKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnY291bnQnLCAxKTsKCiAgICAgICAgLy8geGYKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ3hmJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ251bUZtdElkJywgMCk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2ZvbnRJZCcsIDApOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdmaWxsSWQnLCAwKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnYm9yZGVySWQnLCAwKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgLy8gY2VsbFhmcwogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnY2VsbFhmcycpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdjb3VudCcsIGNvdW50KCRwUEhQRXhjZWwtPmdldENlbGxYZkNvbGxlY3Rpb24oKSkpOwoKICAgICAgICAvLyB4ZgogICAgICAgIGZvcmVhY2ggKCRwUEhQRXhjZWwtPmdldENlbGxYZkNvbGxlY3Rpb24oKSBhcyAkY2VsbFhmKSB7CiAgICAgICAgICAgICR0aGlzLT53cml0ZUNlbGxTdHlsZVhmKCRvYmpXcml0ZXIsICRjZWxsWGYsICRwUEhQRXhjZWwpOwogICAgICAgIH0KCiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAvLyBjZWxsU3R5bGVzCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdjZWxsU3R5bGVzJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2NvdW50JywgMSk7CgogICAgICAgIC8vIGNlbGxTdHlsZQogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnY2VsbFN0eWxlJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ25hbWUnLCAnTm9ybWFsJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3hmSWQnLCAwKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnYnVpbHRpbklkJywgMCk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgIC8vIGR4ZnMKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2R4ZnMnKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnY291bnQnLCAkdGhpcy0+Z2V0UGFyZW50V3JpdGVyKCktPmdldFN0eWxlc0NvbmRpdGlvbmFsSGFzaFRhYmxlKCktPmNvdW50KCkpOwoKICAgICAgICAvLyBkeGYKICAgICAgICBmb3IgKCRpID0gMDsgJGkgPCAkdGhpcy0+Z2V0UGFyZW50V3JpdGVyKCktPmdldFN0eWxlc0NvbmRpdGlvbmFsSGFzaFRhYmxlKCktPmNvdW50KCk7ICsrJGkpIHsKICAgICAgICAgICAgJHRoaXMtPndyaXRlQ2VsbFN0eWxlRHhmKCRvYmpXcml0ZXIsICR0aGlzLT5nZXRQYXJlbnRXcml0ZXIoKS0+Z2V0U3R5bGVzQ29uZGl0aW9uYWxIYXNoVGFibGUoKS0+Z2V0QnlJbmRleCgkaSktPmdldFN0eWxlKCkpOwogICAgICAgIH0KCiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAvLyB0YWJsZVN0eWxlcwogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgndGFibGVTdHlsZXMnKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnZGVmYXVsdFRhYmxlU3R5bGUnLCAnVGFibGVTdHlsZU1lZGl1bTknKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnZGVmYXVsdFBpdm90U3R5bGUnLCAnUGl2b3RUYWJsZVN0eWxlMScpOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAvLyBSZXR1cm4KICAgICAgICByZXR1cm4gJG9ialdyaXRlci0+Z2V0RGF0YSgpOwogICAgfQoKICAgIC8qKgogICAgICogV3JpdGUgRmlsbAogICAgICoKICAgICAqIEBwYXJhbSAgICAgUEhQRXhjZWxfU2hhcmVkX1hNTFdyaXRlciAgICAgJG9ialdyaXRlciAgICAgICAgIFhNTCBXcml0ZXIKICAgICAqIEBwYXJhbSAgICAgUEhQRXhjZWxfU3R5bGVfRmlsbCAgICAgICAgICAgICRwRmlsbCAgICAgICAgICAgIEZpbGwgc3R5bGUKICAgICAqIEB0aHJvd3MgICAgIFBIUEV4Y2VsX1dyaXRlcl9FeGNlcHRpb24KICAgICAqLwogICAgcHJpdmF0ZSBmdW5jdGlvbiB3cml0ZUZpbGwoUEhQRXhjZWxfU2hhcmVkX1hNTFdyaXRlciAkb2JqV3JpdGVyID0gbnVsbCwgUEhQRXhjZWxfU3R5bGVfRmlsbCAkcEZpbGwgPSBudWxsKQogICAgewogICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBwYXR0ZXJuIHR5cGUgb3IgZ3JhZGllbnQgdHlwZQogICAgICAgIGlmICgkcEZpbGwtPmdldEZpbGxUeXBlKCkgPT09IFBIUEV4Y2VsX1N0eWxlX0ZpbGw6OkZJTExfR1JBRElFTlRfTElORUFSIHx8CiAgICAgICAgICAgICRwRmlsbC0+Z2V0RmlsbFR5cGUoKSA9PT0gUEhQRXhjZWxfU3R5bGVfRmlsbDo6RklMTF9HUkFESUVOVF9QQVRIKSB7CiAgICAgICAgICAgIC8vIEdyYWRpZW50IGZpbGwKICAgICAgICAgICAgJHRoaXMtPndyaXRlR3JhZGllbnRGaWxsKCRvYmpXcml0ZXIsICRwRmlsbCk7CiAgICAgICAgfSBlbHNlaWYgKCRwRmlsbC0+Z2V0RmlsbFR5cGUoKSAhPT0gbnVsbCkgewogICAgICAgICAgICAvLyBQYXR0ZXJuIGZpbGwKICAgICAgICAgICAgJHRoaXMtPndyaXRlUGF0dGVybkZpbGwoJG9ialdyaXRlciwgJHBGaWxsKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBXcml0ZSBHcmFkaWVudCBGaWxsCiAgICAgKgogICAgICogQHBhcmFtICAgICBQSFBFeGNlbF9TaGFyZWRfWE1MV3JpdGVyICAgICAkb2JqV3JpdGVyICAgICAgICAgWE1MIFdyaXRlcgogICAgICogQHBhcmFtICAgICBQSFBFeGNlbF9TdHlsZV9GaWxsICAgICAgICAgICAgJHBGaWxsICAgICAgICAgICAgRmlsbCBzdHlsZQogICAgICogQHRocm93cyAgICAgUEhQRXhjZWxfV3JpdGVyX0V4Y2VwdGlvbgogICAgICovCiAgICBwcml2YXRlIGZ1bmN0aW9uIHdyaXRlR3JhZGllbnRGaWxsKFBIUEV4Y2VsX1NoYXJlZF9YTUxXcml0ZXIgJG9ialdyaXRlciA9IG51bGwsIFBIUEV4Y2VsX1N0eWxlX0ZpbGwgJHBGaWxsID0gbnVsbCkKICAgIHsKICAgICAgICAvLyBmaWxsCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdmaWxsJyk7CgogICAgICAgIC8vIGdyYWRpZW50RmlsbAogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnZ3JhZGllbnRGaWxsJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3R5cGUnLCAkcEZpbGwtPmdldEZpbGxUeXBlKCkpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdkZWdyZWUnLCAkcEZpbGwtPmdldFJvdGF0aW9uKCkpOwoKICAgICAgICAvLyBzdG9wCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdzdG9wJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJzAnKTsKCiAgICAgICAgLy8gY29sb3IKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2NvbG9yJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3JnYicsICRwRmlsbC0+Z2V0U3RhcnRDb2xvcigpLT5nZXRBUkdCKCkpOwogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAvLyBzdG9wCiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdzdG9wJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJzEnKTsKCiAgICAgICAgLy8gY29sb3IKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2NvbG9yJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3JnYicsICRwRmlsbC0+Z2V0RW5kQ29sb3IoKS0+Z2V0QVJHQigpKTsKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBXcml0ZSBQYXR0ZXJuIEZpbGwKICAgICAqCiAgICAgKiBAcGFyYW0gICAgIFBIUEV4Y2VsX1NoYXJlZF9YTUxXcml0ZXIgICAgICAgICAgICAkb2JqV3JpdGVyICAgICAgICAgWE1MIFdyaXRlcgogICAgICogQHBhcmFtICAgICBQSFBFeGNlbF9TdHlsZV9GaWxsICAgICAgICAgICAgICAgICAgICAkcEZpbGwgICAgICAgICAgICBGaWxsIHN0eWxlCiAgICAgKiBAdGhyb3dzICAgICBQSFBFeGNlbF9Xcml0ZXJfRXhjZXB0aW9uCiAgICAgKi8KICAgIHByaXZhdGUgZnVuY3Rpb24gd3JpdGVQYXR0ZXJuRmlsbChQSFBFeGNlbF9TaGFyZWRfWE1MV3JpdGVyICRvYmpXcml0ZXIgPSBudWxsLCBQSFBFeGNlbF9TdHlsZV9GaWxsICRwRmlsbCA9IG51bGwpCiAgICB7CiAgICAgICAgLy8gZmlsbAogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnZmlsbCcpOwoKICAgICAgICAvLyBwYXR0ZXJuRmlsbAogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgncGF0dGVybkZpbGwnKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgncGF0dGVyblR5cGUnLCAkcEZpbGwtPmdldEZpbGxUeXBlKCkpOwoKICAgICAgICBpZiAoJHBGaWxsLT5nZXRGaWxsVHlwZSgpICE9PSBQSFBFeGNlbF9TdHlsZV9GaWxsOjpGSUxMX05PTkUpIHsKICAgICAgICAgICAgLy8gZmdDb2xvcgogICAgICAgICAgICBpZiAoJHBGaWxsLT5nZXRTdGFydENvbG9yKCktPmdldEFSR0IoKSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdmZ0NvbG9yJyk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgncmdiJywgJHBGaWxsLT5nZXRTdGFydENvbG9yKCktPmdldEFSR0IoKSk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCRwRmlsbC0+Z2V0RmlsbFR5cGUoKSAhPT0gUEhQRXhjZWxfU3R5bGVfRmlsbDo6RklMTF9OT05FKSB7CiAgICAgICAgICAgIC8vIGJnQ29sb3IKICAgICAgICAgICAgaWYgKCRwRmlsbC0+Z2V0RW5kQ29sb3IoKS0+Z2V0QVJHQigpKSB7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2JnQ29sb3InKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdyZ2InLCAkcEZpbGwtPmdldEVuZENvbG9yKCktPmdldEFSR0IoKSk7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKCiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgfQoKICAgIC8qKgogICAgICogV3JpdGUgRm9udAogICAgICoKICAgICAqIEBwYXJhbSAgICAgUEhQRXhjZWxfU2hhcmVkX1hNTFdyaXRlciAgICAgICAgJG9ialdyaXRlciAgICAgICAgIFhNTCBXcml0ZXIKICAgICAqIEBwYXJhbSAgICAgUEhQRXhjZWxfU3R5bGVfRm9udCAgICAgICAgICAgICAgICAkcEZvbnQgICAgICAgICAgICBGb250IHN0eWxlCiAgICAgKiBAdGhyb3dzICAgICBQSFBFeGNlbF9Xcml0ZXJfRXhjZXB0aW9uCiAgICAgKi8KICAgIHByaXZhdGUgZnVuY3Rpb24gd3JpdGVGb250KFBIUEV4Y2VsX1NoYXJlZF9YTUxXcml0ZXIgJG9ialdyaXRlciA9IG51bGwsIFBIUEV4Y2VsX1N0eWxlX0ZvbnQgJHBGb250ID0gbnVsbCkKICAgIHsKICAgICAgICAvLyBmb250CiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdmb250Jyk7CiAgICAgICAgLy8gICAgV2VpcmQhIFRoZSBvcmRlciBvZiB0aGVzZSBlbGVtZW50cyBhY3R1YWxseSBtYWtlcyBhIGRpZmZlcmVuY2Ugd2hlbiBvcGVuaW5nIEV4Y2VsMjAwNwogICAgICAgIC8vICAgICAgICBmaWxlcyBpbiBFeGNlbDIwMDMgd2l0aCB0aGUgY29tcGF0aWJpbGl0eSBwYWNrLiBJdCdzIG5vdCBkb2N1bWVudGVkIGJlaGF2aW91ciwKICAgICAgICAvLyAgICAgICAgYW5kIG1ha2VzIGZvciBhIHJlYWwgV1RGIQoKICAgICAgICAvLyBCb2xkLiBXZSBleHBsaWNpdGx5IHdyaXRlIHRoaXMgZWxlbWVudCBhbHNvIHdoZW4gZmFsc2UgKGxpa2UgTVMgT2ZmaWNlIEV4Y2VsIDIwMDcgZG9lcwogICAgICAgIC8vIGZvciBjb25kaXRpb25hbCBmb3JtYXR0aW5nKS4gT3RoZXJ3aXNlIGl0IHdpbGwgYXBwYXJlbnRseSBub3QgYmUgcGlja2VkIHVwIGluIGNvbmRpdGlvbmFsCiAgICAgICAgLy8gZm9ybWF0dGluZyBzdHlsZSBkaWFsb2cKICAgICAgICBpZiAoJHBGb250LT5nZXRCb2xkKCkgIT09IG51bGwpIHsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdiJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkcEZvbnQtPmdldEJvbGQoKSA\/ICcxJyA6ICcwJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICB9CgogICAgICAgIC8vIEl0YWxpYwogICAgICAgIGlmICgkcEZvbnQtPmdldEl0YWxpYygpICE9PSBudWxsKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnaScpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmFsJywgJHBGb250LT5nZXRJdGFsaWMoKSA\/ICcxJyA6ICcwJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICB9CgogICAgICAgIC8vIFN0cmlrZXRocm91Z2gKICAgICAgICBpZiAoJHBGb250LT5nZXRTdHJpa2V0aHJvdWdoKCkgIT09IG51bGwpIHsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdzdHJpa2UnKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICRwRm9udC0+Z2V0U3RyaWtldGhyb3VnaCgpID8gJzEnIDogJzAnKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgIH0KCiAgICAgICAgLy8gVW5kZXJsaW5lCiAgICAgICAgaWYgKCRwRm9udC0+Z2V0VW5kZXJsaW5lKCkgIT09IG51bGwpIHsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCd1Jyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkcEZvbnQtPmdldFVuZGVybGluZSgpKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgIH0KCiAgICAgICAgLy8gU3VwZXJzY3JpcHQgLyBzdWJzY3JpcHQKICAgICAgICBpZiAoJHBGb250LT5nZXRTdXBlclNjcmlwdCgpID09PSB0cnVlIHx8ICRwRm9udC0+Z2V0U3ViU2NyaXB0KCkgPT09IHRydWUpIHsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCd2ZXJ0QWxpZ24nKTsKICAgICAgICAgICAgaWYgKCRwRm9udC0+Z2V0U3VwZXJTY3JpcHQoKSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICdzdXBlcnNjcmlwdCcpOwogICAgICAgICAgICB9IGVsc2VpZiAoJHBGb250LT5nZXRTdWJTY3JpcHQoKSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICdzdWJzY3JpcHQnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgfQoKICAgICAgICAvLyBTaXplCiAgICAgICAgaWYgKCRwRm9udC0+Z2V0U2l6ZSgpICE9PSBudWxsKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnc3onKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3ZhbCcsICRwRm9udC0+Z2V0U2l6ZSgpKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgIH0KCiAgICAgICAgLy8gRm9yZWdyb3VuZCBjb2xvcgogICAgICAgIGlmICgkcEZvbnQtPmdldENvbG9yKCktPmdldEFSR0IoKSAhPT0gbnVsbCkgewogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2NvbG9yJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdyZ2InLCAkcEZvbnQtPmdldENvbG9yKCktPmdldEFSR0IoKSk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICB9CgogICAgICAgIC8vIE5hbWUKICAgICAgICBpZiAoJHBGb250LT5nZXROYW1lKCkgIT09IG51bGwpIHsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCduYW1lJyk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2YWwnLCAkcEZvbnQtPmdldE5hbWUoKSk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICB9CgogICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdyaXRlIEJvcmRlcgogICAgICoKICAgICAqIEBwYXJhbSAgICAgUEhQRXhjZWxfU2hhcmVkX1hNTFdyaXRlciAgICAgICAgICAgICRvYmpXcml0ZXIgICAgICAgICBYTUwgV3JpdGVyCiAgICAgKiBAcGFyYW0gICAgIFBIUEV4Y2VsX1N0eWxlX0JvcmRlcnMgICAgICAgICAgICAgICAgJHBCb3JkZXJzICAgICAgICBCb3JkZXJzIHN0eWxlCiAgICAgKiBAdGhyb3dzICAgICBQSFBFeGNlbF9Xcml0ZXJfRXhjZXB0aW9uCiAgICAgKi8KICAgIHByaXZhdGUgZnVuY3Rpb24gd3JpdGVCb3JkZXIoUEhQRXhjZWxfU2hhcmVkX1hNTFdyaXRlciAkb2JqV3JpdGVyID0gbnVsbCwgUEhQRXhjZWxfU3R5bGVfQm9yZGVycyAkcEJvcmRlcnMgPSBudWxsKQogICAgewogICAgICAgIC8vIFdyaXRlIGJvcmRlcgogICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnYm9yZGVyJyk7CiAgICAgICAgLy8gRGlhZ29uYWw\/CiAgICAgICAgc3dpdGNoICgkcEJvcmRlcnMtPmdldERpYWdvbmFsRGlyZWN0aW9uKCkpIHsKICAgICAgICAgICAgY2FzZSBQSFBFeGNlbF9TdHlsZV9Cb3JkZXJzOjpESUFHT05BTF9VUDoKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdkaWFnb25hbFVwJywgJ3RydWUnKTsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdkaWFnb25hbERvd24nLCAnZmFsc2UnKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIFBIUEV4Y2VsX1N0eWxlX0JvcmRlcnM6OkRJQUdPTkFMX0RPV046CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnZGlhZ29uYWxVcCcsICdmYWxzZScpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2RpYWdvbmFsRG93bicsICd0cnVlJyk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBQSFBFeGNlbF9TdHlsZV9Cb3JkZXJzOjpESUFHT05BTF9CT1RIOgogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2RpYWdvbmFsVXAnLCAndHJ1ZScpOwogICAgICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2RpYWdvbmFsRG93bicsICd0cnVlJyk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIC8vIEJvcmRlclByCiAgICAgICAgJHRoaXMtPndyaXRlQm9yZGVyUHIoJG9ialdyaXRlciwgJ2xlZnQnLCAkcEJvcmRlcnMtPmdldExlZnQoKSk7CiAgICAgICAgJHRoaXMtPndyaXRlQm9yZGVyUHIoJG9ialdyaXRlciwgJ3JpZ2h0JywgJHBCb3JkZXJzLT5nZXRSaWdodCgpKTsKICAgICAgICAkdGhpcy0+d3JpdGVCb3JkZXJQcigkb2JqV3JpdGVyLCAndG9wJywgJHBCb3JkZXJzLT5nZXRUb3AoKSk7CiAgICAgICAgJHRoaXMtPndyaXRlQm9yZGVyUHIoJG9ialdyaXRlciwgJ2JvdHRvbScsICRwQm9yZGVycy0+Z2V0Qm90dG9tKCkpOwogICAgICAgICR0aGlzLT53cml0ZUJvcmRlclByKCRvYmpXcml0ZXIsICdkaWFnb25hbCcsICRwQm9yZGVycy0+Z2V0RGlhZ29uYWwoKSk7CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgfQoKICAgIC8qKgogICAgICogV3JpdGUgQ2VsbCBTdHlsZSBYZgogICAgICoKICAgICAqIEBwYXJhbSAgICAgUEhQRXhjZWxfU2hhcmVkX1hNTFdyaXRlciAgICAgICAgICAgICRvYmpXcml0ZXIgICAgICAgICBYTUwgV3JpdGVyCiAgICAgKiBAcGFyYW0gICAgIFBIUEV4Y2VsX1N0eWxlICAgICAgICAgICAgICAgICAgICAgICAgJHBTdHlsZSAgICAgICAgICAgIFN0eWxlCiAgICAgKiBAcGFyYW0gICAgIFBIUEV4Y2VsICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwUEhQRXhjZWwgICAgICAgIFdvcmtib29rCiAgICAgKiBAdGhyb3dzICAgICBQSFBFeGNlbF9Xcml0ZXJfRXhjZXB0aW9uCiAgICAgKi8KICAgIHByaXZhdGUgZnVuY3Rpb24gd3JpdGVDZWxsU3R5bGVYZihQSFBFeGNlbF9TaGFyZWRfWE1MV3JpdGVyICRvYmpXcml0ZXIgPSBudWxsLCBQSFBFeGNlbF9TdHlsZSAkcFN0eWxlID0gbnVsbCwgUEhQRXhjZWwgJHBQSFBFeGNlbCA9IG51bGwpCiAgICB7CiAgICAgICAgLy8geGYKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ3hmJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3hmSWQnLCAwKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnZm9udElkJywgKGludCkkdGhpcy0+Z2V0UGFyZW50V3JpdGVyKCktPmdldEZvbnRIYXNoVGFibGUoKS0+Z2V0SW5kZXhGb3JIYXNoQ29kZSgkcFN0eWxlLT5nZXRGb250KCktPmdldEhhc2hDb2RlKCkpKTsKICAgICAgICBpZiAoJHBTdHlsZS0+Z2V0UXVvdGVQcmVmaXgoKSkgewogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgncXVvdGVQcmVmaXgnLCAxKTsKICAgICAgICB9CgogICAgICAgIGlmICgkcFN0eWxlLT5nZXROdW1iZXJGb3JtYXQoKS0+Z2V0QnVpbHRJbkZvcm1hdENvZGUoKSA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ251bUZtdElkJywgKGludCkoJHRoaXMtPmdldFBhcmVudFdyaXRlcigpLT5nZXROdW1GbXRIYXNoVGFibGUoKS0+Z2V0SW5kZXhGb3JIYXNoQ29kZSgkcFN0eWxlLT5nZXROdW1iZXJGb3JtYXQoKS0+Z2V0SGFzaENvZGUoKSkgKyAxNjQpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnbnVtRm10SWQnLCAoaW50KSRwU3R5bGUtPmdldE51bWJlckZvcm1hdCgpLT5nZXRCdWlsdEluRm9ybWF0Q29kZSgpKTsKICAgICAgICB9CgogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdmaWxsSWQnLCAoaW50KSR0aGlzLT5nZXRQYXJlbnRXcml0ZXIoKS0+Z2V0RmlsbEhhc2hUYWJsZSgpLT5nZXRJbmRleEZvckhhc2hDb2RlKCRwU3R5bGUtPmdldEZpbGwoKS0+Z2V0SGFzaENvZGUoKSkpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdib3JkZXJJZCcsIChpbnQpJHRoaXMtPmdldFBhcmVudFdyaXRlcigpLT5nZXRCb3JkZXJzSGFzaFRhYmxlKCktPmdldEluZGV4Rm9ySGFzaENvZGUoJHBTdHlsZS0+Z2V0Qm9yZGVycygpLT5nZXRIYXNoQ29kZSgpKSk7CgogICAgICAgIC8vIEFwcGx5IHN0eWxlcz8KICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnYXBwbHlGb250JywgKCRwUEhQRXhjZWwtPmdldERlZmF1bHRTdHlsZSgpLT5nZXRGb250KCktPmdldEhhc2hDb2RlKCkgIT0gJHBTdHlsZS0+Z2V0Rm9udCgpLT5nZXRIYXNoQ29kZSgpKSA\/ICcxJyA6ICcwJyk7CiAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ2FwcGx5TnVtYmVyRm9ybWF0JywgKCRwUEhQRXhjZWwtPmdldERlZmF1bHRTdHlsZSgpLT5nZXROdW1iZXJGb3JtYXQoKS0+Z2V0SGFzaENvZGUoKSAhPSAkcFN0eWxlLT5nZXROdW1iZXJGb3JtYXQoKS0+Z2V0SGFzaENvZGUoKSkgPyAnMScgOiAnMCcpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdhcHBseUZpbGwnLCAoJHBQSFBFeGNlbC0+Z2V0RGVmYXVsdFN0eWxlKCktPmdldEZpbGwoKS0+Z2V0SGFzaENvZGUoKSAhPSAkcFN0eWxlLT5nZXRGaWxsKCktPmdldEhhc2hDb2RlKCkpID8gJzEnIDogJzAnKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnYXBwbHlCb3JkZXInLCAoJHBQSFBFeGNlbC0+Z2V0RGVmYXVsdFN0eWxlKCktPmdldEJvcmRlcnMoKS0+Z2V0SGFzaENvZGUoKSAhPSAkcFN0eWxlLT5nZXRCb3JkZXJzKCktPmdldEhhc2hDb2RlKCkpID8gJzEnIDogJzAnKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnYXBwbHlBbGlnbm1lbnQnLCAoJHBQSFBFeGNlbC0+Z2V0RGVmYXVsdFN0eWxlKCktPmdldEFsaWdubWVudCgpLT5nZXRIYXNoQ29kZSgpICE9ICRwU3R5bGUtPmdldEFsaWdubWVudCgpLT5nZXRIYXNoQ29kZSgpKSA\/ICcxJyA6ICcwJyk7CiAgICAgICAgaWYgKCRwU3R5bGUtPmdldFByb3RlY3Rpb24oKS0+Z2V0TG9ja2VkKCkgIT0gUEhQRXhjZWxfU3R5bGVfUHJvdGVjdGlvbjo6UFJPVEVDVElPTl9JTkhFUklUIHx8ICRwU3R5bGUtPmdldFByb3RlY3Rpb24oKS0+Z2V0SGlkZGVuKCkgIT0gUEhQRXhjZWxfU3R5bGVfUHJvdGVjdGlvbjo6UFJPVEVDVElPTl9JTkhFUklUKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdhcHBseVByb3RlY3Rpb24nLCAndHJ1ZScpOwogICAgICAgIH0KCiAgICAgICAgLy8gYWxpZ25tZW50CiAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCdhbGlnbm1lbnQnKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnaG9yaXpvbnRhbCcsICRwU3R5bGUtPmdldEFsaWdubWVudCgpLT5nZXRIb3Jpem9udGFsKCkpOwogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd2ZXJ0aWNhbCcsICRwU3R5bGUtPmdldEFsaWdubWVudCgpLT5nZXRWZXJ0aWNhbCgpKTsKCiAgICAgICAgJHRleHRSb3RhdGlvbiA9IDA7CiAgICAgICAgaWYgKCRwU3R5bGUtPmdldEFsaWdubWVudCgpLT5nZXRUZXh0Um90YXRpb24oKSA+PSAwKSB7CiAgICAgICAgICAgICR0ZXh0Um90YXRpb24gPSAkcFN0eWxlLT5nZXRBbGlnbm1lbnQoKS0+Z2V0VGV4dFJvdGF0aW9uKCk7CiAgICAgICAgfSBlbHNlaWYgKCRwU3R5bGUtPmdldEFsaWdubWVudCgpLT5nZXRUZXh0Um90YXRpb24oKSA8IDApIHsKICAgICAgICAgICAgJHRleHRSb3RhdGlvbiA9IDkwIC0gJHBTdHlsZS0+Z2V0QWxpZ25tZW50KCktPmdldFRleHRSb3RhdGlvbigpOwogICAgICAgIH0KICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndGV4dFJvdGF0aW9uJywgJHRleHRSb3RhdGlvbik7CgogICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCd3cmFwVGV4dCcsICgkcFN0eWxlLT5nZXRBbGlnbm1lbnQoKS0+Z2V0V3JhcFRleHQoKSA\/ICd0cnVlJyA6ICdmYWxzZScpKTsKICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnc2hyaW5rVG9GaXQnLCAoJHBTdHlsZS0+Z2V0QWxpZ25tZW50KCktPmdldFNocmlua1RvRml0KCkgPyAndHJ1ZScgOiAnZmFsc2UnKSk7CgogICAgICAgIGlmICgkcFN0eWxlLT5nZXRBbGlnbm1lbnQoKS0+Z2V0SW5kZW50KCkgPiAwKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdpbmRlbnQnLCAkcFN0eWxlLT5nZXRBbGlnbm1lbnQoKS0+Z2V0SW5kZW50KCkpOwogICAgICAgIH0KICAgICAgICBpZiAoJHBTdHlsZS0+Z2V0QWxpZ25tZW50KCktPmdldFJlYWRvcmRlcigpID4gMCkgewogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgncmVhZGluZ09yZGVyJywgJHBTdHlsZS0+Z2V0QWxpZ25tZW50KCktPmdldFJlYWRvcmRlcigpKTsKICAgICAgICB9CiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwoKICAgICAgICAvLyBwcm90ZWN0aW9uCiAgICAgICAgaWYgKCRwU3R5bGUtPmdldFByb3RlY3Rpb24oKS0+Z2V0TG9ja2VkKCkgIT0gUEhQRXhjZWxfU3R5bGVfUHJvdGVjdGlvbjo6UFJPVEVDVElPTl9JTkhFUklUIHx8ICRwU3R5bGUtPmdldFByb3RlY3Rpb24oKS0+Z2V0SGlkZGVuKCkgIT0gUEhQRXhjZWxfU3R5bGVfUHJvdGVjdGlvbjo6UFJPVEVDVElPTl9JTkhFUklUKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgncHJvdGVjdGlvbicpOwogICAgICAgICAgICBpZiAoJHBTdHlsZS0+Z2V0UHJvdGVjdGlvbigpLT5nZXRMb2NrZWQoKSAhPSBQSFBFeGNlbF9TdHlsZV9Qcm90ZWN0aW9uOjpQUk9URUNUSU9OX0lOSEVSSVQpIHsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdsb2NrZWQnLCAoJHBTdHlsZS0+Z2V0UHJvdGVjdGlvbigpLT5nZXRMb2NrZWQoKSA9PSBQSFBFeGNlbF9TdHlsZV9Qcm90ZWN0aW9uOjpQUk9URUNUSU9OX1BST1RFQ1RFRCA\/ICd0cnVlJyA6ICdmYWxzZScpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoJHBTdHlsZS0+Z2V0UHJvdGVjdGlvbigpLT5nZXRIaWRkZW4oKSAhPSBQSFBFeGNlbF9TdHlsZV9Qcm90ZWN0aW9uOjpQUk9URUNUSU9OX0lOSEVSSVQpIHsKICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdoaWRkZW4nLCAoJHBTdHlsZS0+Z2V0UHJvdGVjdGlvbigpLT5nZXRIaWRkZW4oKSA9PSBQSFBFeGNlbF9TdHlsZV9Qcm90ZWN0aW9uOjpQUk9URUNUSU9OX1BST1RFQ1RFRCA\/ICd0cnVlJyA6ICdmYWxzZScpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgfQoKICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBXcml0ZSBDZWxsIFN0eWxlIER4ZgogICAgICoKICAgICAqIEBwYXJhbSAgICAgUEhQRXhjZWxfU2hhcmVkX1hNTFdyaXRlciAgICAgICAgICRvYmpXcml0ZXIgICAgICAgICBYTUwgV3JpdGVyCiAgICAgKiBAcGFyYW0gICAgIFBIUEV4Y2VsX1N0eWxlICAgICAgICAgICAgICAgICAgICAkcFN0eWxlICAgICAgICAgICAgU3R5bGUKICAgICAqIEB0aHJvd3MgICAgIFBIUEV4Y2VsX1dyaXRlcl9FeGNlcHRpb24KICAgICAqLwogICAgcHJpdmF0ZSBmdW5jdGlvbiB3cml0ZUNlbGxTdHlsZUR4ZihQSFBFeGNlbF9TaGFyZWRfWE1MV3JpdGVyICRvYmpXcml0ZXIgPSBudWxsLCBQSFBFeGNlbF9TdHlsZSAkcFN0eWxlID0gbnVsbCkKICAgIHsKICAgICAgICAvLyBkeGYKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2R4ZicpOwoKICAgICAgICAvLyBmb250CiAgICAgICAgJHRoaXMtPndyaXRlRm9udCgkb2JqV3JpdGVyLCAkcFN0eWxlLT5nZXRGb250KCkpOwoKICAgICAgICAvLyBudW1GbXQKICAgICAgICAkdGhpcy0+d3JpdGVOdW1GbXQoJG9ialdyaXRlciwgJHBTdHlsZS0+Z2V0TnVtYmVyRm9ybWF0KCkpOwoKICAgICAgICAvLyBmaWxsCiAgICAgICAgJHRoaXMtPndyaXRlRmlsbCgkb2JqV3JpdGVyLCAkcFN0eWxlLT5nZXRGaWxsKCkpOwoKICAgICAgICAvLyBhbGlnbm1lbnQKICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ2FsaWdubWVudCcpOwogICAgICAgIGlmICgkcFN0eWxlLT5nZXRBbGlnbm1lbnQoKS0+Z2V0SG9yaXpvbnRhbCgpICE9PSBudWxsKSB7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdob3Jpem9udGFsJywgJHBTdHlsZS0+Z2V0QWxpZ25tZW50KCktPmdldEhvcml6b250YWwoKSk7CiAgICAgICAgfQogICAgICAgIGlmICgkcFN0eWxlLT5nZXRBbGlnbm1lbnQoKS0+Z2V0VmVydGljYWwoKSAhPT0gbnVsbCkgewogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgndmVydGljYWwnLCAkcFN0eWxlLT5nZXRBbGlnbm1lbnQoKS0+Z2V0VmVydGljYWwoKSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoJHBTdHlsZS0+Z2V0QWxpZ25tZW50KCktPmdldFRleHRSb3RhdGlvbigpICE9PSBudWxsKSB7CiAgICAgICAgICAgICR0ZXh0Um90YXRpb24gPSAwOwogICAgICAgICAgICBpZiAoJHBTdHlsZS0+Z2V0QWxpZ25tZW50KCktPmdldFRleHRSb3RhdGlvbigpID49IDApIHsKICAgICAgICAgICAgICAgICR0ZXh0Um90YXRpb24gPSAkcFN0eWxlLT5nZXRBbGlnbm1lbnQoKS0+Z2V0VGV4dFJvdGF0aW9uKCk7CiAgICAgICAgICAgIH0gZWxzZWlmICgkcFN0eWxlLT5nZXRBbGlnbm1lbnQoKS0+Z2V0VGV4dFJvdGF0aW9uKCkgPCAwKSB7CiAgICAgICAgICAgICAgICAkdGV4dFJvdGF0aW9uID0gOTAgLSAkcFN0eWxlLT5nZXRBbGlnbm1lbnQoKS0+Z2V0VGV4dFJvdGF0aW9uKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3RleHRSb3RhdGlvbicsICR0ZXh0Um90YXRpb24pOwogICAgICAgIH0KICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgIC8vIGJvcmRlcgogICAgICAgICR0aGlzLT53cml0ZUJvcmRlcigkb2JqV3JpdGVyLCAkcFN0eWxlLT5nZXRCb3JkZXJzKCkpOwoKICAgICAgICAvLyBwcm90ZWN0aW9uCiAgICAgICAgaWYgKCgkcFN0eWxlLT5nZXRQcm90ZWN0aW9uKCktPmdldExvY2tlZCgpICE9PSBudWxsKSB8fCAoJHBTdHlsZS0+Z2V0UHJvdGVjdGlvbigpLT5nZXRIaWRkZW4oKSAhPT0gbnVsbCkpIHsKICAgICAgICAgICAgaWYgKCRwU3R5bGUtPmdldFByb3RlY3Rpb24oKS0+Z2V0TG9ja2VkKCkgIT09IFBIUEV4Y2VsX1N0eWxlX1Byb3RlY3Rpb246OlBST1RFQ1RJT05fSU5IRVJJVCB8fAogICAgICAgICAgICAgICAgJHBTdHlsZS0+Z2V0UHJvdGVjdGlvbigpLT5nZXRIaWRkZW4oKSAhPT0gUEhQRXhjZWxfU3R5bGVfUHJvdGVjdGlvbjo6UFJPVEVDVElPTl9JTkhFUklUKSB7CiAgICAgICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ3Byb3RlY3Rpb24nKTsKICAgICAgICAgICAgICAgIGlmICgoJHBTdHlsZS0+Z2V0UHJvdGVjdGlvbigpLT5nZXRMb2NrZWQoKSAhPT0gbnVsbCkgJiYKICAgICAgICAgICAgICAgICAgICAoJHBTdHlsZS0+Z2V0UHJvdGVjdGlvbigpLT5nZXRMb2NrZWQoKSAhPT0gUEhQRXhjZWxfU3R5bGVfUHJvdGVjdGlvbjo6UFJPVEVDVElPTl9JTkhFUklUKSkgewogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdsb2NrZWQnLCAoJHBTdHlsZS0+Z2V0UHJvdGVjdGlvbigpLT5nZXRMb2NrZWQoKSA9PSBQSFBFeGNlbF9TdHlsZV9Qcm90ZWN0aW9uOjpQUk9URUNUSU9OX1BST1RFQ1RFRCA\/ICd0cnVlJyA6ICdmYWxzZScpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICgoJHBTdHlsZS0+Z2V0UHJvdGVjdGlvbigpLT5nZXRIaWRkZW4oKSAhPT0gbnVsbCkgJiYKICAgICAgICAgICAgICAgICAgICAoJHBTdHlsZS0+Z2V0UHJvdGVjdGlvbigpLT5nZXRIaWRkZW4oKSAhPT0gUEhQRXhjZWxfU3R5bGVfUHJvdGVjdGlvbjo6UFJPVEVDVElPTl9JTkhFUklUKSkgewogICAgICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdoaWRkZW4nLCAoJHBTdHlsZS0+Z2V0UHJvdGVjdGlvbigpLT5nZXRIaWRkZW4oKSA9PSBQSFBFeGNlbF9TdHlsZV9Qcm90ZWN0aW9uOjpQUk9URUNUSU9OX1BST1RFQ1RFRCA\/ICd0cnVlJyA6ICdmYWxzZScpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRvYmpXcml0ZXItPmVuZEVsZW1lbnQoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgfQoKICAgIC8qKgogICAgICogV3JpdGUgQm9yZGVyUHIKICAgICAqCiAgICAgKiBAcGFyYW0gICAgIFBIUEV4Y2VsX1NoYXJlZF9YTUxXcml0ZXIgICAgICAgICRvYmpXcml0ZXIgICAgICAgICBYTUwgV3JpdGVyCiAgICAgKiBAcGFyYW0gICAgIHN0cmluZyAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcE5hbWUgICAgICAgICAgICBFbGVtZW50IG5hbWUKICAgICAqIEBwYXJhbSAgICAgUEhQRXhjZWxfU3R5bGVfQm9yZGVyICAgICAgICAgICAgJHBCb3JkZXIgICAgICAgIEJvcmRlciBzdHlsZQogICAgICogQHRocm93cyAgICAgUEhQRXhjZWxfV3JpdGVyX0V4Y2VwdGlvbgogICAgICovCiAgICBwcml2YXRlIGZ1bmN0aW9uIHdyaXRlQm9yZGVyUHIoUEhQRXhjZWxfU2hhcmVkX1hNTFdyaXRlciAkb2JqV3JpdGVyID0gbnVsbCwgJHBOYW1lID0gJ2xlZnQnLCBQSFBFeGNlbF9TdHlsZV9Cb3JkZXIgJHBCb3JkZXIgPSBudWxsKQogICAgewogICAgICAgIC8vIFdyaXRlIEJvcmRlclByCiAgICAgICAgaWYgKCRwQm9yZGVyLT5nZXRCb3JkZXJTdHlsZSgpICE9IFBIUEV4Y2VsX1N0eWxlX0JvcmRlcjo6Qk9SREVSX05PTkUpIHsKICAgICAgICAgICAgJG9ialdyaXRlci0+c3RhcnRFbGVtZW50KCRwTmFtZSk7CiAgICAgICAgICAgICRvYmpXcml0ZXItPndyaXRlQXR0cmlidXRlKCdzdHlsZScsICRwQm9yZGVyLT5nZXRCb3JkZXJTdHlsZSgpKTsKCiAgICAgICAgICAgIC8vIGNvbG9yCiAgICAgICAgICAgICRvYmpXcml0ZXItPnN0YXJ0RWxlbWVudCgnY29sb3InKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+d3JpdGVBdHRyaWJ1dGUoJ3JnYicsICRwQm9yZGVyLT5nZXRDb2xvcigpLT5nZXRBUkdCKCkpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CgogICAgICAgICAgICAkb2JqV3JpdGVyLT5lbmRFbGVtZW50KCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogV3JpdGUgTnVtYmVyRm9ybWF0CiAgICAgKgogICAgICogQHBhcmFtICAgICBQSFBFeGNlbF9TaGFyZWRfWE1MV3JpdGVyICAgICAgICAgICAgJG9ialdyaXRlciAgICAgICAgIFhNTCBXcml0ZXIKICAgICAqIEBwYXJhbSAgICAgUEhQRXhjZWxfU3R5bGVfTnVtYmVyRm9ybWF0ICAgICAgICAgICAgJHBOdW1iZXJGb3JtYXQgICAgTnVtYmVyIEZvcm1hdAogICAgICogQHBhcmFtICAgICBpbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcElkICAgICAgICAgICAgTnVtYmVyIEZvcm1hdCBpZGVudGlmaWVyCiAgICAgKiBAdGhyb3dzICAgICBQSFBFeGNlbF9Xcml0ZXJfRXhjZXB0aW9uCiAgICAgKi8KICAgIHByaXZhdGUgZnVuY3Rpb24gd3JpdGVOdW1GbXQoUEhQRXhjZWxfU2hhcmVkX1hNTFdyaXRlciAkb2JqV3JpdGVyID0gbnVsbCwgUEhQRXhjZWxfU3R5bGVfTnVtYmVyRm9ybWF0ICRwTnVtYmVyRm9ybWF0ID0gbnVsbCwgJHBJZCA9IDApCiAgICB7CiAgICAgICAgLy8gVHJhbnNsYXRlIGZvcm1hdGNvZGUKICAgICAgICAkZm9ybWF0Q29kZSA9ICRwTnVtYmVyRm9ybWF0LT5nZXRGb3JtYXRDb2RlKCk7CgogICAgICAgIC8vIG51bUZtdAogICAgICAgIGlmICgkZm9ybWF0Q29kZSAhPT0gbnVsbCkgewogICAgICAgICAgICAkb2JqV3JpdGVyLT5zdGFydEVsZW1lbnQoJ251bUZtdCcpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnbnVtRm10SWQnLCAoJHBJZCArIDE2NCkpOwogICAgICAgICAgICAkb2JqV3JpdGVyLT53cml0ZUF0dHJpYnV0ZSgnZm9ybWF0Q29kZScsICRmb3JtYXRDb2RlKTsKICAgICAgICAgICAgJG9ialdyaXRlci0+ZW5kRWxlbWVudCgpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEdldCBhbiBhcnJheSBvZiBhbGwgc3R5bGVzCiAgICAgKgogICAgICogQHBhcmFtICAgICBQSFBFeGNlbCAgICAgICAgICAgICAgICAkcFBIUEV4Y2VsCiAgICAgKiBAcmV0dXJuICAgICBQSFBFeGNlbF9TdHlsZVtdICAgICAgICBBbGwgc3R5bGVzIGluIFBIUEV4Y2VsCiAgICAgKiBAdGhyb3dzICAgICBQSFBFeGNlbF9Xcml0ZXJfRXhjZXB0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBhbGxTdHlsZXMoUEhQRXhjZWwgJHBQSFBFeGNlbCA9IG51bGwpCiAgICB7CiAgICAgICAgcmV0dXJuICRwUEhQRXhjZWwtPmdldENlbGxYZkNvbGxlY3Rpb24oKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBhbiBhcnJheSBvZiBhbGwgY29uZGl0aW9uYWwgc3R5bGVzCiAgICAgKgogICAgICogQHBhcmFtICAgICBQSFBFeGNlbCAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcFBIUEV4Y2VsCiAgICAgKiBAcmV0dXJuICAgICBQSFBFeGNlbF9TdHlsZV9Db25kaXRpb25hbFtdICAgICAgICBBbGwgY29uZGl0aW9uYWwgc3R5bGVzIGluIFBIUEV4Y2VsCiAgICAgKiBAdGhyb3dzICAgICBQSFBFeGNlbF9Xcml0ZXJfRXhjZXB0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBhbGxDb25kaXRpb25hbFN0eWxlcyhQSFBFeGNlbCAkcFBIUEV4Y2VsID0gbnVsbCkKICAgIHsKICAgICAgICAvLyBHZXQgYW4gYXJyYXkgb2YgYWxsIHN0eWxlcwogICAgICAgICRhU3R5bGVzID0gYXJyYXkoKTsKCiAgICAgICAgJHNoZWV0Q291bnQgPSAkcFBIUEV4Y2VsLT5nZXRTaGVldENvdW50KCk7CiAgICAgICAgZm9yICgkaSA9IDA7ICRpIDwgJHNoZWV0Q291bnQ7ICsrJGkpIHsKICAgICAgICAgICAgZm9yZWFjaCAoJHBQSFBFeGNlbC0+Z2V0U2hlZXQoJGkpLT5nZXRDb25kaXRpb25hbFN0eWxlc0NvbGxlY3Rpb24oKSBhcyAkY29uZGl0aW9uYWxTdHlsZXMpIHsKICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRjb25kaXRpb25hbFN0eWxlcyBhcyAkY29uZGl0aW9uYWxTdHlsZSkgewogICAgICAgICAgICAgICAgICAgICRhU3R5bGVzW10gPSAkY29uZGl0aW9uYWxTdHlsZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICRhU3R5bGVzOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IGFuIGFycmF5IG9mIGFsbCBmaWxscwogICAgICoKICAgICAqIEBwYXJhbSAgICAgUEhQRXhjZWwgICAgICAgICAgICAgICAgICAgICAgICAkcFBIUEV4Y2VsCiAgICAgKiBAcmV0dXJuICAgICBQSFBFeGNlbF9TdHlsZV9GaWxsW10gICAgICAgIEFsbCBmaWxscyBpbiBQSFBFeGNlbAogICAgICogQHRocm93cyAgICAgUEhQRXhjZWxfV3JpdGVyX0V4Y2VwdGlvbgogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gYWxsRmlsbHMoUEhQRXhjZWwgJHBQSFBFeGNlbCA9IG51bGwpCiAgICB7CiAgICAgICAgLy8gR2V0IGFuIGFycmF5IG9mIHVuaXF1ZSBmaWxscwogICAgICAgICRhRmlsbHMgPSBhcnJheSgpOwoKICAgICAgICAvLyBUd28gZmlyc3QgZmlsbHMgYXJlIHByZWRlZmluZWQKICAgICAgICAkZmlsbDAgPSBuZXcgUEhQRXhjZWxfU3R5bGVfRmlsbCgpOwogICAgICAgICRmaWxsMC0+c2V0RmlsbFR5cGUoUEhQRXhjZWxfU3R5bGVfRmlsbDo6RklMTF9OT05FKTsKICAgICAgICAkYUZpbGxzW10gPSAkZmlsbDA7CgogICAgICAgICRmaWxsMSA9IG5ldyBQSFBFeGNlbF9TdHlsZV9GaWxsKCk7CiAgICAgICAgJGZpbGwxLT5zZXRGaWxsVHlwZShQSFBFeGNlbF9TdHlsZV9GaWxsOjpGSUxMX1BBVFRFUk5fR1JBWTEyNSk7CiAgICAgICAgJGFGaWxsc1tdID0gJGZpbGwxOwogICAgICAgIC8vIFRoZSByZW1haW5pbmcgZmlsbHMKICAgICAgICAkYVN0eWxlcyA9ICR0aGlzLT5hbGxTdHlsZXMoJHBQSFBFeGNlbCk7CiAgICAgICAgZm9yZWFjaCAoJGFTdHlsZXMgYXMgJHN0eWxlKSB7CiAgICAgICAgICAgIGlmICghYXJyYXlfa2V5X2V4aXN0cygkc3R5bGUtPmdldEZpbGwoKS0+Z2V0SGFzaENvZGUoKSwgJGFGaWxscykpIHsKICAgICAgICAgICAgICAgICRhRmlsbHNbICRzdHlsZS0+Z2V0RmlsbCgpLT5nZXRIYXNoQ29kZSgpIF0gPSAkc3R5bGUtPmdldEZpbGwoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICRhRmlsbHM7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgYW4gYXJyYXkgb2YgYWxsIGZvbnRzCiAgICAgKgogICAgICogQHBhcmFtICAgICBQSFBFeGNlbCAgICAgICAgICAgICAgICAgICAgICAgICRwUEhQRXhjZWwKICAgICAqIEByZXR1cm4gICAgIFBIUEV4Y2VsX1N0eWxlX0ZvbnRbXSAgICAgICAgQWxsIGZvbnRzIGluIFBIUEV4Y2VsCiAgICAgKiBAdGhyb3dzICAgICBQSFBFeGNlbF9Xcml0ZXJfRXhjZXB0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBhbGxGb250cyhQSFBFeGNlbCAkcFBIUEV4Y2VsID0gbnVsbCkKICAgIHsKICAgICAgICAvLyBHZXQgYW4gYXJyYXkgb2YgdW5pcXVlIGZvbnRzCiAgICAgICAgJGFGb250cyA9IGFycmF5KCk7CiAgICAgICAgJGFTdHlsZXMgPSAkdGhpcy0+YWxsU3R5bGVzKCRwUEhQRXhjZWwpOwoKICAgICAgICBmb3JlYWNoICgkYVN0eWxlcyBhcyAkc3R5bGUpIHsKICAgICAgICAgICAgaWYgKCFhcnJheV9rZXlfZXhpc3RzKCRzdHlsZS0+Z2V0Rm9udCgpLT5nZXRIYXNoQ29kZSgpLCAkYUZvbnRzKSkgewogICAgICAgICAgICAgICAgJGFGb250c1sgJHN0eWxlLT5nZXRGb250KCktPmdldEhhc2hDb2RlKCkgXSA9ICRzdHlsZS0+Z2V0Rm9udCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJGFGb250czsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBhbiBhcnJheSBvZiBhbGwgYm9yZGVycwogICAgICoKICAgICAqIEBwYXJhbSAgICAgUEhQRXhjZWwgICAgICAgICAgICAgICAgICAgICAgICAkcFBIUEV4Y2VsCiAgICAgKiBAcmV0dXJuICAgICBQSFBFeGNlbF9TdHlsZV9Cb3JkZXJzW10gICAgICAgIEFsbCBib3JkZXJzIGluIFBIUEV4Y2VsCiAgICAgKiBAdGhyb3dzICAgICBQSFBFeGNlbF9Xcml0ZXJfRXhjZXB0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBhbGxCb3JkZXJzKFBIUEV4Y2VsICRwUEhQRXhjZWwgPSBudWxsKQogICAgewogICAgICAgIC8vIEdldCBhbiBhcnJheSBvZiB1bmlxdWUgYm9yZGVycwogICAgICAgICRhQm9yZGVycyA9IGFycmF5KCk7CiAgICAgICAgJGFTdHlsZXMgPSAkdGhpcy0+YWxsU3R5bGVzKCRwUEhQRXhjZWwpOwoKICAgICAgICBmb3JlYWNoICgkYVN0eWxlcyBhcyAkc3R5bGUpIHsKICAgICAgICAgICAgaWYgKCFhcnJheV9rZXlfZXhpc3RzKCRzdHlsZS0+Z2V0Qm9yZGVycygpLT5nZXRIYXNoQ29kZSgpLCAkYUJvcmRlcnMpKSB7CiAgICAgICAgICAgICAgICAkYUJvcmRlcnNbICRzdHlsZS0+Z2V0Qm9yZGVycygpLT5nZXRIYXNoQ29kZSgpIF0gPSAkc3R5bGUtPmdldEJvcmRlcnMoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICRhQm9yZGVyczsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBhbiBhcnJheSBvZiBhbGwgbnVtYmVyIGZvcm1hdHMKICAgICAqCiAgICAgKiBAcGFyYW0gICAgIFBIUEV4Y2VsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcFBIUEV4Y2VsCiAgICAgKiBAcmV0dXJuICAgICBQSFBFeGNlbF9TdHlsZV9OdW1iZXJGb3JtYXRbXSAgICAgICAgQWxsIG51bWJlciBmb3JtYXRzIGluIFBIUEV4Y2VsCiAgICAgKiBAdGhyb3dzICAgICBQSFBFeGNlbF9Xcml0ZXJfRXhjZXB0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBhbGxOdW1iZXJGb3JtYXRzKFBIUEV4Y2VsICRwUEhQRXhjZWwgPSBudWxsKQogICAgewogICAgICAgIC8vIEdldCBhbiBhcnJheSBvZiB1bmlxdWUgbnVtYmVyIGZvcm1hdHMKICAgICAgICAkYU51bUZtdHMgPSBhcnJheSgpOwogICAgICAgICRhU3R5bGVzID0gJHRoaXMtPmFsbFN0eWxlcygkcFBIUEV4Y2VsKTsKCiAgICAgICAgZm9yZWFjaCAoJGFTdHlsZXMgYXMgJHN0eWxlKSB7CiAgICAgICAgICAgIGlmICgkc3R5bGUtPmdldE51bWJlckZvcm1hdCgpLT5nZXRCdWlsdEluRm9ybWF0Q29kZSgpID09PSBmYWxzZSAmJiAhYXJyYXlfa2V5X2V4aXN0cygkc3R5bGUtPmdldE51bWJlckZvcm1hdCgpLT5nZXRIYXNoQ29kZSgpLCAkYU51bUZtdHMpKSB7CiAgICAgICAgICAgICAgICAkYU51bUZtdHNbICRzdHlsZS0+Z2V0TnVtYmVyRm9ybWF0KCktPmdldEhhc2hDb2RlKCkgXSA9ICRzdHlsZS0+Z2V0TnVtYmVyRm9ybWF0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiAkYU51bUZtdHM7CiAgICB9Cn0K",
    "size": "28059"
}