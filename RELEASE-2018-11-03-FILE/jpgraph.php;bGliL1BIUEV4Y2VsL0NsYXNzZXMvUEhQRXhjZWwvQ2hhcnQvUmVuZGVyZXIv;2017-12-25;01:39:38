{
    "namaFile": "lib\/PHPExcel\/Classes\/PHPExcel\/Chart\/Renderer\/jpgraph.php",
    "lastUpdate": "2017-12-25+01:39:38.00",
    "contentFile": "PD9waHAKCnJlcXVpcmVfb25jZShQSFBFeGNlbF9TZXR0aW5nczo6Z2V0Q2hhcnRSZW5kZXJlclBhdGgoKS4nL2pwZ3JhcGgucGhwJyk7CgovKioKICogUEhQRXhjZWxfQ2hhcnRfUmVuZGVyZXJfanBncmFwaAogKgogKiBDb3B5cmlnaHQgKGMpIDIwMDYgLSAyMDE1IFBIUEV4Y2VsCiAqCiAqIFRoaXMgbGlicmFyeSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IKICogbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYwogKiBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIKICogdmVyc2lvbiAyLjEgb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCiAqCiAqIFRoaXMgbGlicmFyeSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAogKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgogKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlIEdOVQogKiBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgogKgogKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljCiAqIExpY2Vuc2UgYWxvbmcgd2l0aCB0aGlzIGxpYnJhcnk7IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmUKICogRm91bmRhdGlvbiwgSW5jLiwgNTEgRnJhbmtsaW4gU3RyZWV0LCBGaWZ0aCBGbG9vciwgQm9zdG9uLCBNQSAgMDIxMTAtMTMwMSAgVVNBCiAqCiAqIEBjYXRlZ29yeSAgICBQSFBFeGNlbAogKiBAcGFja2FnZSAgICAgICAgUEhQRXhjZWxfQ2hhcnRfUmVuZGVyZXIKICogQGNvcHlyaWdodCAgICBDb3B5cmlnaHQgKGMpIDIwMDYgLSAyMDE1IFBIUEV4Y2VsIChodHRwOi8vd3d3LmNvZGVwbGV4LmNvbS9QSFBFeGNlbCkKICogQGxpY2Vuc2UgICAgICAgIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9vbGQtbGljZW5zZXMvbGdwbC0yLjEudHh0ICAgIExHUEwKICogQHZlcnNpb24gICAgICAgICMjVkVSU0lPTiMjLCAjI0RBVEUjIwogKi8KY2xhc3MgUEhQRXhjZWxfQ2hhcnRfUmVuZGVyZXJfanBncmFwaAp7CiAgICBwcml2YXRlIHN0YXRpYyAkd2lkdGggICAgPSA2NDA7CgogICAgcHJpdmF0ZSBzdGF0aWMgJGhlaWdodCAgICA9IDQ4MDsKCiAgICBwcml2YXRlIHN0YXRpYyAkY29sb3VyU2V0ID0gYXJyYXkoCiAgICAgICAgJ21lZGl1bXB1cnBsZTEnLCAgICAncGFsZWdyZWVuMycsICAgICAnZ29sZDEnLCAgICAgICAgICAnY2FkZXRibHVlMScsCiAgICAgICAgJ2RhcmttYWdlbnRhJywgICAgICAnY29yYWwnLCAgICAgICAgICAnZG9kZ2VyYmx1ZTMnLCAgICAnZWdncGxhbnQnLAogICAgICAgICdtZWRpdW1ibHVlJywgICAgICAgJ21hZ2VudGEnLCAgICAgICAgJ3NhbmR5YnJvd24nLCAgICAgJ2N5YW4nLAogICAgICAgICdmaXJlYnJpY2sxJywgICAgICAgJ2ZvcmVzdGdyZWVuJywgICAgJ2RlZXBwaW5rNCcsICAgICAgJ2RhcmtvbGl2ZWdyZWVuJywKICAgICAgICAnZ29sZGVucm9kMicKICAgICk7CgogICAgcHJpdmF0ZSBzdGF0aWMgJG1hcmtTZXQgPSBhcnJheSgKICAgICAgICAnZGlhbW9uZCcgID0+IE1BUktfRElBTU9ORCwKICAgICAgICAnc3F1YXJlJyAgID0+IE1BUktfU1FVQVJFLAogICAgICAgICd0cmlhbmdsZScgPT4gTUFSS19VVFJJQU5HTEUsCiAgICAgICAgJ3gnICAgICAgICA9PiBNQVJLX1gsCiAgICAgICAgJ3N0YXInICAgICA9PiBNQVJLX1NUQVIsCiAgICAgICAgJ2RvdCcgICAgICA9PiBNQVJLX0ZJTExFRENJUkNMRSwKICAgICAgICAnZGFzaCcgICAgID0+IE1BUktfRFRSSUFOR0xFLAogICAgICAgICdjaXJjbGUnICAgPT4gTUFSS19DSVJDTEUsCiAgICAgICAgJ3BsdXMnICAgICA9PiBNQVJLX0NST1NTCiAgICApOwoKCiAgICBwcml2YXRlICRjaGFydDsKCiAgICBwcml2YXRlICRncmFwaDsKCiAgICBwcml2YXRlIHN0YXRpYyAkcGxvdENvbG91ciA9IDA7CgogICAgcHJpdmF0ZSBzdGF0aWMgJHBsb3RNYXJrID0gMDsKCgogICAgcHJpdmF0ZSBmdW5jdGlvbiBmb3JtYXRQb2ludE1hcmtlcigkc2VyaWVzUGxvdCwgJG1hcmtlcklEKQogICAgewogICAgICAgICRwbG90TWFya0tleXMgPSBhcnJheV9rZXlzKHNlbGY6OiRtYXJrU2V0KTsKICAgICAgICBpZiAoaXNfbnVsbCgkbWFya2VySUQpKSB7CiAgICAgICAgICAgIC8vICAgIFVzZSBkZWZhdWx0IHBsb3QgbWFya2VyIChuZXh0IG1hcmtlciBpbiB0aGUgc2VyaWVzKQogICAgICAgICAgICBzZWxmOjokcGxvdE1hcmsgJT0gY291bnQoc2VsZjo6JG1hcmtTZXQpOwogICAgICAgICAgICAkc2VyaWVzUGxvdC0+bWFyay0+U2V0VHlwZShzZWxmOjokbWFya1NldFskcGxvdE1hcmtLZXlzW3NlbGY6OiRwbG90TWFyaysrXV0pOwogICAgICAgIH0gZWxzZWlmICgkbWFya2VySUQgIT09ICdub25lJykgewogICAgICAgICAgICAvLyAgICBVc2Ugc3BlY2lmaWVkIHBsb3QgbWFya2VyIChpZiBpdCBleGlzdHMpCiAgICAgICAgICAgIGlmIChpc3NldChzZWxmOjokbWFya1NldFskbWFya2VySURdKSkgewogICAgICAgICAgICAgICAgJHNlcmllc1Bsb3QtPm1hcmstPlNldFR5cGUoc2VsZjo6JG1hcmtTZXRbJG1hcmtlcklEXSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyAgICBJZiB0aGUgc3BlY2lmaWVkIHBsb3QgbWFya2VyIGRvZXNuJ3QgZXhpc3QsIHVzZSBkZWZhdWx0IHBsb3QgbWFya2VyIChuZXh0IG1hcmtlciBpbiB0aGUgc2VyaWVzKQogICAgICAgICAgICAgICAgc2VsZjo6JHBsb3RNYXJrICU9IGNvdW50KHNlbGY6OiRtYXJrU2V0KTsKICAgICAgICAgICAgICAgICRzZXJpZXNQbG90LT5tYXJrLT5TZXRUeXBlKHNlbGY6OiRtYXJrU2V0WyRwbG90TWFya0tleXNbc2VsZjo6JHBsb3RNYXJrKytdXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyAgICBIaWRlIHBsb3QgbWFya2VyCiAgICAgICAgICAgICRzZXJpZXNQbG90LT5tYXJrLT5IaWRlKCk7CiAgICAgICAgfQogICAgICAgICRzZXJpZXNQbG90LT5tYXJrLT5TZXRDb2xvcihzZWxmOjokY29sb3VyU2V0W3NlbGY6OiRwbG90Q29sb3VyXSk7CiAgICAgICAgJHNlcmllc1Bsb3QtPm1hcmstPlNldEZpbGxDb2xvcihzZWxmOjokY29sb3VyU2V0W3NlbGY6OiRwbG90Q29sb3VyXSk7CiAgICAgICAgJHNlcmllc1Bsb3QtPlNldENvbG9yKHNlbGY6OiRjb2xvdXJTZXRbc2VsZjo6JHBsb3RDb2xvdXIrK10pOwoKICAgICAgICByZXR1cm4gJHNlcmllc1Bsb3Q7CiAgICB9CgoKICAgIHByaXZhdGUgZnVuY3Rpb24gZm9ybWF0RGF0YVNldExhYmVscygkZ3JvdXBJRCwgJGRhdGFzZXRMYWJlbHMsICRsYWJlbENvdW50LCAkcm90YXRpb24gPSAnJykKICAgIHsKICAgICAgICAkZGF0YXNldExhYmVsRm9ybWF0Q29kZSA9ICR0aGlzLT5jaGFydC0+Z2V0UGxvdEFyZWEoKS0+Z2V0UGxvdEdyb3VwQnlJbmRleCgkZ3JvdXBJRCktPmdldFBsb3RDYXRlZ29yeUJ5SW5kZXgoMCktPmdldEZvcm1hdENvZGUoKTsKICAgICAgICBpZiAoIWlzX251bGwoJGRhdGFzZXRMYWJlbEZvcm1hdENvZGUpKSB7CiAgICAgICAgICAgIC8vICAgIFJldHJpZXZlIGFueSBsYWJlbCBmb3JtYXR0aW5nIGNvZGUKICAgICAgICAgICAgJGRhdGFzZXRMYWJlbEZvcm1hdENvZGUgPSBzdHJpcHNsYXNoZXMoJGRhdGFzZXRMYWJlbEZvcm1hdENvZGUpOwogICAgICAgIH0KCiAgICAgICAgJHRlc3RDdXJyZW50SW5kZXggPSAwOwogICAgICAgIGZvcmVhY2ggKCRkYXRhc2V0TGFiZWxzIGFzICRpID0+ICRkYXRhc2V0TGFiZWwpIHsKICAgICAgICAgICAgaWYgKGlzX2FycmF5KCRkYXRhc2V0TGFiZWwpKSB7CiAgICAgICAgICAgICAgICBpZiAoJHJvdGF0aW9uID09ICdiYXInKSB7CiAgICAgICAgICAgICAgICAgICAgJGRhdGFzZXRMYWJlbHNbJGldID0gaW1wbG9kZSgiICIsICRkYXRhc2V0TGFiZWwpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAkZGF0YXNldExhYmVsID0gYXJyYXlfcmV2ZXJzZSgkZGF0YXNldExhYmVsKTsKICAgICAgICAgICAgICAgICAgICAkZGF0YXNldExhYmVsc1skaV0gPSBpbXBsb2RlKCJcbiIsICRkYXRhc2V0TGFiZWwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gICAgRm9ybWF0IGxhYmVscyBhY2NvcmRpbmcgdG8gYW55IGZvcm1hdHRpbmcgY29kZQogICAgICAgICAgICAgICAgaWYgKCFpc19udWxsKCRkYXRhc2V0TGFiZWxGb3JtYXRDb2RlKSkgewogICAgICAgICAgICAgICAgICAgICRkYXRhc2V0TGFiZWxzWyRpXSA9IFBIUEV4Y2VsX1N0eWxlX051bWJlckZvcm1hdDo6dG9Gb3JtYXR0ZWRTdHJpbmcoJGRhdGFzZXRMYWJlbCwgJGRhdGFzZXRMYWJlbEZvcm1hdENvZGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgICsrJHRlc3RDdXJyZW50SW5kZXg7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJGRhdGFzZXRMYWJlbHM7CiAgICB9CgoKICAgIHByaXZhdGUgZnVuY3Rpb24gcGVyY2VudGFnZVN1bUNhbGN1bGF0aW9uKCRncm91cElELCAkc2VyaWVzQ291bnQpCiAgICB7CiAgICAgICAgLy8gICAgQWRqdXN0IG91ciB2YWx1ZXMgdG8gYSBwZXJjZW50YWdlIHZhbHVlIGFjcm9zcyBhbGwgc2VyaWVzIGluIHRoZSBncm91cAogICAgICAgIGZvciAoJGkgPSAwOyAkaSA8ICRzZXJpZXNDb3VudDsgKyskaSkgewogICAgICAgICAgICBpZiAoJGkgPT0gMCkgewogICAgICAgICAgICAgICAgJHN1bVZhbHVlcyA9ICR0aGlzLT5jaGFydC0+Z2V0UGxvdEFyZWEoKS0+Z2V0UGxvdEdyb3VwQnlJbmRleCgkZ3JvdXBJRCktPmdldFBsb3RWYWx1ZXNCeUluZGV4KCRpKS0+Z2V0RGF0YVZhbHVlcygpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJG5leHRWYWx1ZXMgPSAkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoJGdyb3VwSUQpLT5nZXRQbG90VmFsdWVzQnlJbmRleCgkaSktPmdldERhdGFWYWx1ZXMoKTsKICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRuZXh0VmFsdWVzIGFzICRrID0+ICR2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChpc3NldCgkc3VtVmFsdWVzWyRrXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHN1bVZhbHVlc1ska10gKz0gJHZhbHVlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRzdW1WYWx1ZXNbJGtdID0gJHZhbHVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICRzdW1WYWx1ZXM7CiAgICB9CgoKICAgIHByaXZhdGUgZnVuY3Rpb24gcGVyY2VudGFnZUFkanVzdFZhbHVlcygkZGF0YVZhbHVlcywgJHN1bVZhbHVlcykKICAgIHsKICAgICAgICBmb3JlYWNoICgkZGF0YVZhbHVlcyBhcyAkayA9PiAkZGF0YVZhbHVlKSB7CiAgICAgICAgICAgICRkYXRhVmFsdWVzWyRrXSA9ICRkYXRhVmFsdWUgLyAkc3VtVmFsdWVzWyRrXSAqIDEwMDsKICAgICAgICB9CgogICAgICAgIHJldHVybiAkZGF0YVZhbHVlczsKICAgIH0KCgogICAgcHJpdmF0ZSBmdW5jdGlvbiBnZXRDYXB0aW9uKCRjYXB0aW9uRWxlbWVudCkKICAgIHsKICAgICAgICAvLyAgICBSZWFkIGFueSBjYXB0aW9uCiAgICAgICAgJGNhcHRpb24gPSAoIWlzX251bGwoJGNhcHRpb25FbGVtZW50KSkgPyAkY2FwdGlvbkVsZW1lbnQtPmdldENhcHRpb24oKSA6IG51bGw7CiAgICAgICAgLy8gICAgVGVzdCBpZiB3ZSBoYXZlIGEgdGl0bGUgY2FwdGlvbiB0byBkaXNwbGF5CiAgICAgICAgaWYgKCFpc19udWxsKCRjYXB0aW9uKSkgewogICAgICAgICAgICAvLyAgICBJZiB3ZSBkbywgaXQgY291bGQgYmUgYSBwbGFpbiBzdHJpbmcgb3IgYW4gYXJyYXkKICAgICAgICAgICAgaWYgKGlzX2FycmF5KCRjYXB0aW9uKSkgewogICAgICAgICAgICAgICAgLy8gICAgSW1wbG9kZSBhbiBhcnJheSB0byBhIHBsYWluIHN0cmluZwogICAgICAgICAgICAgICAgJGNhcHRpb24gPSBpbXBsb2RlKCcnLCAkY2FwdGlvbik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuICRjYXB0aW9uOwogICAgfQoKCiAgICBwcml2YXRlIGZ1bmN0aW9uIHJlbmRlclRpdGxlKCkKICAgIHsKICAgICAgICAkdGl0bGUgPSAkdGhpcy0+Z2V0Q2FwdGlvbigkdGhpcy0+Y2hhcnQtPmdldFRpdGxlKCkpOwogICAgICAgIGlmICghaXNfbnVsbCgkdGl0bGUpKSB7CiAgICAgICAgICAgICR0aGlzLT5ncmFwaC0+dGl0bGUtPlNldCgkdGl0bGUpOwogICAgICAgIH0KICAgIH0KCgogICAgcHJpdmF0ZSBmdW5jdGlvbiByZW5kZXJMZWdlbmQoKQogICAgewogICAgICAgICRsZWdlbmQgPSAkdGhpcy0+Y2hhcnQtPmdldExlZ2VuZCgpOwogICAgICAgIGlmICghaXNfbnVsbCgkbGVnZW5kKSkgewogICAgICAgICAgICAkbGVnZW5kUG9zaXRpb24gPSAkbGVnZW5kLT5nZXRQb3NpdGlvbigpOwogICAgICAgICAgICAkbGVnZW5kT3ZlcmxheSA9ICRsZWdlbmQtPmdldE92ZXJsYXkoKTsKICAgICAgICAgICAgc3dpdGNoICgkbGVnZW5kUG9zaXRpb24pIHsKICAgICAgICAgICAgICAgIGNhc2UgJ3InOgogICAgICAgICAgICAgICAgICAgICR0aGlzLT5ncmFwaC0+bGVnZW5kLT5TZXRQb3MoMC4wMSwgMC41LCAncmlnaHQnLCAnY2VudGVyJyk7ICAgIC8vICAgIHJpZ2h0CiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmdyYXBoLT5sZWdlbmQtPlNldENvbHVtbnMoMSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdsJzoKICAgICAgICAgICAgICAgICAgICAkdGhpcy0+Z3JhcGgtPmxlZ2VuZC0+U2V0UG9zKDAuMDEsIDAuNSwgJ2xlZnQnLCAnY2VudGVyJyk7ICAgIC8vICAgIGxlZnQKICAgICAgICAgICAgICAgICAgICAkdGhpcy0+Z3JhcGgtPmxlZ2VuZC0+U2V0Q29sdW1ucygxKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ3QnOgogICAgICAgICAgICAgICAgICAgICR0aGlzLT5ncmFwaC0+bGVnZW5kLT5TZXRQb3MoMC41LCAwLjAxLCAnY2VudGVyJywgJ3RvcCcpOyAgICAvLyAgICB0b3AKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ2InOgogICAgICAgICAgICAgICAgICAgICR0aGlzLT5ncmFwaC0+bGVnZW5kLT5TZXRQb3MoMC41LCAwLjk5LCAnY2VudGVyJywgJ2JvdHRvbScpOyAgICAvLyAgICBib3R0b20KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmdyYXBoLT5sZWdlbmQtPlNldFBvcygwLjAxLCAwLjAxLCAncmlnaHQnLCAndG9wJyk7ICAgIC8vICAgIHRvcC1yaWdodAogICAgICAgICAgICAgICAgICAgICR0aGlzLT5ncmFwaC0+bGVnZW5kLT5TZXRDb2x1bW5zKDEpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJHRoaXMtPmdyYXBoLT5sZWdlbmQtPkhpZGUoKTsKICAgICAgICB9CiAgICB9CgoKICAgIHByaXZhdGUgZnVuY3Rpb24gcmVuZGVyQ2FydGVzaWFuUGxvdEFyZWEoJHR5cGUgPSAndGV4dGxpbicpCiAgICB7CiAgICAgICAgJHRoaXMtPmdyYXBoID0gbmV3IEdyYXBoKHNlbGY6OiR3aWR0aCwgc2VsZjo6JGhlaWdodCk7CiAgICAgICAgJHRoaXMtPmdyYXBoLT5TZXRTY2FsZSgkdHlwZSk7CgogICAgICAgICR0aGlzLT5yZW5kZXJUaXRsZSgpOwoKICAgICAgICAvLyAgICBSb3RhdGUgZm9yIGJhciByYXRoZXIgdGhhbiBjb2x1bW4gY2hhcnQKICAgICAgICAkcm90YXRpb24gPSAkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoMCktPmdldFBsb3REaXJlY3Rpb24oKTsKICAgICAgICAkcmV2ZXJzZSA9ICgkcm90YXRpb24gPT0gJ2JhcicpID8gdHJ1ZSA6IGZhbHNlOwoKICAgICAgICAkeEF4aXNMYWJlbCA9ICR0aGlzLT5jaGFydC0+Z2V0WEF4aXNMYWJlbCgpOwogICAgICAgIGlmICghaXNfbnVsbCgkeEF4aXNMYWJlbCkpIHsKICAgICAgICAgICAgJHRpdGxlID0gJHRoaXMtPmdldENhcHRpb24oJHhBeGlzTGFiZWwpOwogICAgICAgICAgICBpZiAoIWlzX251bGwoJHRpdGxlKSkgewogICAgICAgICAgICAgICAgJHRoaXMtPmdyYXBoLT54YXhpcy0+U2V0VGl0bGUoJHRpdGxlLCAnY2VudGVyJyk7CiAgICAgICAgICAgICAgICAkdGhpcy0+Z3JhcGgtPnhheGlzLT50aXRsZS0+U2V0TWFyZ2luKDM1KTsKICAgICAgICAgICAgICAgIGlmICgkcmV2ZXJzZSkgewogICAgICAgICAgICAgICAgICAgICR0aGlzLT5ncmFwaC0+eGF4aXMtPnRpdGxlLT5TZXRBbmdsZSg5MCk7CiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmdyYXBoLT54YXhpcy0+dGl0bGUtPlNldE1hcmdpbig5MCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICR5QXhpc0xhYmVsID0gJHRoaXMtPmNoYXJ0LT5nZXRZQXhpc0xhYmVsKCk7CiAgICAgICAgaWYgKCFpc19udWxsKCR5QXhpc0xhYmVsKSkgewogICAgICAgICAgICAkdGl0bGUgPSAkdGhpcy0+Z2V0Q2FwdGlvbigkeUF4aXNMYWJlbCk7CiAgICAgICAgICAgIGlmICghaXNfbnVsbCgkdGl0bGUpKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+Z3JhcGgtPnlheGlzLT5TZXRUaXRsZSgkdGl0bGUsICdjZW50ZXInKTsKICAgICAgICAgICAgICAgIGlmICgkcmV2ZXJzZSkgewogICAgICAgICAgICAgICAgICAgICR0aGlzLT5ncmFwaC0+eWF4aXMtPnRpdGxlLT5TZXRBbmdsZSgwKTsKICAgICAgICAgICAgICAgICAgICAkdGhpcy0+Z3JhcGgtPnlheGlzLT50aXRsZS0+U2V0TWFyZ2luKC01NSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgoKICAgIHByaXZhdGUgZnVuY3Rpb24gcmVuZGVyUGllUGxvdEFyZWEoJGRvdWdobnV0ID0gZmFsc2UpCiAgICB7CiAgICAgICAgJHRoaXMtPmdyYXBoID0gbmV3IFBpZUdyYXBoKHNlbGY6OiR3aWR0aCwgc2VsZjo6JGhlaWdodCk7CgogICAgICAgICR0aGlzLT5yZW5kZXJUaXRsZSgpOwogICAgfQoKCiAgICBwcml2YXRlIGZ1bmN0aW9uIHJlbmRlclJhZGFyUGxvdEFyZWEoKQogICAgewogICAgICAgICR0aGlzLT5ncmFwaCA9IG5ldyBSYWRhckdyYXBoKHNlbGY6OiR3aWR0aCwgc2VsZjo6JGhlaWdodCk7CiAgICAgICAgJHRoaXMtPmdyYXBoLT5TZXRTY2FsZSgnbGluJyk7CgogICAgICAgICR0aGlzLT5yZW5kZXJUaXRsZSgpOwogICAgfQoKCiAgICBwcml2YXRlIGZ1bmN0aW9uIHJlbmRlclBsb3RMaW5lKCRncm91cElELCAkZmlsbGVkID0gZmFsc2UsICRjb21iaW5hdGlvbiA9IGZhbHNlLCAkZGltZW5zaW9ucyA9ICcyZCcpCiAgICB7CiAgICAgICAgJGdyb3VwaW5nID0gJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRncm91cElEKS0+Z2V0UGxvdEdyb3VwaW5nKCk7CgogICAgICAgICRsYWJlbENvdW50ID0gY291bnQoJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRncm91cElEKS0+Z2V0UGxvdFZhbHVlc0J5SW5kZXgoMCktPmdldFBvaW50Q291bnQoKSk7CiAgICAgICAgaWYgKCRsYWJlbENvdW50ID4gMCkgewogICAgICAgICAgICAkZGF0YXNldExhYmVscyA9ICR0aGlzLT5jaGFydC0+Z2V0UGxvdEFyZWEoKS0+Z2V0UGxvdEdyb3VwQnlJbmRleCgkZ3JvdXBJRCktPmdldFBsb3RDYXRlZ29yeUJ5SW5kZXgoMCktPmdldERhdGFWYWx1ZXMoKTsKICAgICAgICAgICAgJGRhdGFzZXRMYWJlbHMgPSAkdGhpcy0+Zm9ybWF0RGF0YVNldExhYmVscygkZ3JvdXBJRCwgJGRhdGFzZXRMYWJlbHMsICRsYWJlbENvdW50KTsKICAgICAgICAgICAgJHRoaXMtPmdyYXBoLT54YXhpcy0+U2V0VGlja0xhYmVscygkZGF0YXNldExhYmVscyk7CiAgICAgICAgfQoKICAgICAgICAkc2VyaWVzQ291bnQgPSAkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoJGdyb3VwSUQpLT5nZXRQbG90U2VyaWVzQ291bnQoKTsKICAgICAgICAkc2VyaWVzUGxvdHMgPSBhcnJheSgpOwogICAgICAgIGlmICgkZ3JvdXBpbmcgPT0gJ3BlcmNlbnRTdGFja2VkJykgewogICAgICAgICAgICAkc3VtVmFsdWVzID0gJHRoaXMtPnBlcmNlbnRhZ2VTdW1DYWxjdWxhdGlvbigkZ3JvdXBJRCwgJHNlcmllc0NvdW50KTsKICAgICAgICB9CgogICAgICAgIC8vICAgIExvb3AgdGhyb3VnaCBlYWNoIGRhdGEgc2VyaWVzIGluIHR1cm4KICAgICAgICBmb3IgKCRpID0gMDsgJGkgPCAkc2VyaWVzQ291bnQ7ICsrJGkpIHsKICAgICAgICAgICAgJGRhdGFWYWx1ZXMgPSAkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoJGdyb3VwSUQpLT5nZXRQbG90VmFsdWVzQnlJbmRleCgkaSktPmdldERhdGFWYWx1ZXMoKTsKICAgICAgICAgICAgJG1hcmtlciA9ICR0aGlzLT5jaGFydC0+Z2V0UGxvdEFyZWEoKS0+Z2V0UGxvdEdyb3VwQnlJbmRleCgkZ3JvdXBJRCktPmdldFBsb3RWYWx1ZXNCeUluZGV4KCRpKS0+Z2V0UG9pbnRNYXJrZXIoKTsKCiAgICAgICAgICAgIGlmICgkZ3JvdXBpbmcgPT0gJ3BlcmNlbnRTdGFja2VkJykgewogICAgICAgICAgICAgICAgJGRhdGFWYWx1ZXMgPSAkdGhpcy0+cGVyY2VudGFnZUFkanVzdFZhbHVlcygkZGF0YVZhbHVlcywgJHN1bVZhbHVlcyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vICAgIEZpbGwgaW4gYW55IG1pc3NpbmcgdmFsdWVzIGluIHRoZSAkZGF0YVZhbHVlcyBhcnJheQogICAgICAgICAgICAkdGVzdEN1cnJlbnRJbmRleCA9IDA7CiAgICAgICAgICAgIGZvcmVhY2ggKCRkYXRhVmFsdWVzIGFzICRrID0+ICRkYXRhVmFsdWUpIHsKICAgICAgICAgICAgICAgIHdoaWxlICgkayAhPSAkdGVzdEN1cnJlbnRJbmRleCkgewogICAgICAgICAgICAgICAgICAgICRkYXRhVmFsdWVzWyR0ZXN0Q3VycmVudEluZGV4XSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgKyskdGVzdEN1cnJlbnRJbmRleDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICsrJHRlc3RDdXJyZW50SW5kZXg7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRzZXJpZXNQbG90ID0gbmV3IExpbmVQbG90KCRkYXRhVmFsdWVzKTsKICAgICAgICAgICAgaWYgKCRjb21iaW5hdGlvbikgewogICAgICAgICAgICAgICAgJHNlcmllc1Bsb3QtPlNldEJhckNlbnRlcigpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJGZpbGxlZCkgewogICAgICAgICAgICAgICAgJHNlcmllc1Bsb3QtPlNldEZpbGxlZCh0cnVlKTsKICAgICAgICAgICAgICAgICRzZXJpZXNQbG90LT5TZXRDb2xvcignYmxhY2snKTsKICAgICAgICAgICAgICAgICRzZXJpZXNQbG90LT5TZXRGaWxsQ29sb3Ioc2VsZjo6JGNvbG91clNldFtzZWxmOjokcGxvdENvbG91cisrXSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyAgICBTZXQgdGhlIGFwcHJvcHJpYXRlIHBsb3QgbWFya2VyCiAgICAgICAgICAgICAgICAkdGhpcy0+Zm9ybWF0UG9pbnRNYXJrZXIoJHNlcmllc1Bsb3QsICRtYXJrZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRkYXRhTGFiZWwgPSAkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoJGdyb3VwSUQpLT5nZXRQbG90TGFiZWxCeUluZGV4KCRpKS0+Z2V0RGF0YVZhbHVlKCk7CiAgICAgICAgICAgICRzZXJpZXNQbG90LT5TZXRMZWdlbmQoJGRhdGFMYWJlbCk7CgogICAgICAgICAgICAkc2VyaWVzUGxvdHNbXSA9ICRzZXJpZXNQbG90OwogICAgICAgIH0KCiAgICAgICAgaWYgKCRncm91cGluZyA9PSAnc3RhbmRhcmQnKSB7CiAgICAgICAgICAgICRncm91cFBsb3QgPSAkc2VyaWVzUGxvdHM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJGdyb3VwUGxvdCA9IG5ldyBBY2NMaW5lUGxvdCgkc2VyaWVzUGxvdHMpOwogICAgICAgIH0KICAgICAgICAkdGhpcy0+Z3JhcGgtPkFkZCgkZ3JvdXBQbG90KTsKICAgIH0KCgogICAgcHJpdmF0ZSBmdW5jdGlvbiByZW5kZXJQbG90QmFyKCRncm91cElELCAkZGltZW5zaW9ucyA9ICcyZCcpCiAgICB7CiAgICAgICAgJHJvdGF0aW9uID0gJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRncm91cElEKS0+Z2V0UGxvdERpcmVjdGlvbigpOwogICAgICAgIC8vICAgIFJvdGF0ZSBmb3IgYmFyIHJhdGhlciB0aGFuIGNvbHVtbiBjaGFydAogICAgICAgIGlmICgoJGdyb3VwSUQgPT0gMCkgJiYgKCRyb3RhdGlvbiA9PSAnYmFyJykpIHsKICAgICAgICAgICAgJHRoaXMtPmdyYXBoLT5TZXQ5MEFuZE1hcmdpbigpOwogICAgICAgIH0KICAgICAgICAkZ3JvdXBpbmcgPSAkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoJGdyb3VwSUQpLT5nZXRQbG90R3JvdXBpbmcoKTsKCiAgICAgICAgJGxhYmVsQ291bnQgPSBjb3VudCgkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoJGdyb3VwSUQpLT5nZXRQbG90VmFsdWVzQnlJbmRleCgwKS0+Z2V0UG9pbnRDb3VudCgpKTsKICAgICAgICBpZiAoJGxhYmVsQ291bnQgPiAwKSB7CiAgICAgICAgICAgICRkYXRhc2V0TGFiZWxzID0gJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRncm91cElEKS0+Z2V0UGxvdENhdGVnb3J5QnlJbmRleCgwKS0+Z2V0RGF0YVZhbHVlcygpOwogICAgICAgICAgICAkZGF0YXNldExhYmVscyA9ICR0aGlzLT5mb3JtYXREYXRhU2V0TGFiZWxzKCRncm91cElELCAkZGF0YXNldExhYmVscywgJGxhYmVsQ291bnQsICRyb3RhdGlvbik7CiAgICAgICAgICAgIC8vICAgIFJvdGF0ZSBmb3IgYmFyIHJhdGhlciB0aGFuIGNvbHVtbiBjaGFydAogICAgICAgICAgICBpZiAoJHJvdGF0aW9uID09ICdiYXInKSB7CiAgICAgICAgICAgICAgICAkZGF0YXNldExhYmVscyA9IGFycmF5X3JldmVyc2UoJGRhdGFzZXRMYWJlbHMpOwogICAgICAgICAgICAgICAgJHRoaXMtPmdyYXBoLT55YXhpcy0+U2V0UG9zKCdtYXgnKTsKICAgICAgICAgICAgICAgICR0aGlzLT5ncmFwaC0+eWF4aXMtPlNldExhYmVsQWxpZ24oJ2NlbnRlcicsICd0b3AnKTsKICAgICAgICAgICAgICAgICR0aGlzLT5ncmFwaC0+eWF4aXMtPlNldExhYmVsU2lkZShTSURFX1JJR0hUKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkdGhpcy0+Z3JhcGgtPnhheGlzLT5TZXRUaWNrTGFiZWxzKCRkYXRhc2V0TGFiZWxzKTsKICAgICAgICB9CgoKICAgICAgICAkc2VyaWVzQ291bnQgPSAkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoJGdyb3VwSUQpLT5nZXRQbG90U2VyaWVzQ291bnQoKTsKICAgICAgICAkc2VyaWVzUGxvdHMgPSBhcnJheSgpOwogICAgICAgIGlmICgkZ3JvdXBpbmcgPT0gJ3BlcmNlbnRTdGFja2VkJykgewogICAgICAgICAgICAkc3VtVmFsdWVzID0gJHRoaXMtPnBlcmNlbnRhZ2VTdW1DYWxjdWxhdGlvbigkZ3JvdXBJRCwgJHNlcmllc0NvdW50KTsKICAgICAgICB9CgogICAgICAgIC8vICAgIExvb3AgdGhyb3VnaCBlYWNoIGRhdGEgc2VyaWVzIGluIHR1cm4KICAgICAgICBmb3IgKCRqID0gMDsgJGogPCAkc2VyaWVzQ291bnQ7ICsrJGopIHsKICAgICAgICAgICAgJGRhdGFWYWx1ZXMgPSAkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoJGdyb3VwSUQpLT5nZXRQbG90VmFsdWVzQnlJbmRleCgkaiktPmdldERhdGFWYWx1ZXMoKTsKICAgICAgICAgICAgaWYgKCRncm91cGluZyA9PSAncGVyY2VudFN0YWNrZWQnKSB7CiAgICAgICAgICAgICAgICAkZGF0YVZhbHVlcyA9ICR0aGlzLT5wZXJjZW50YWdlQWRqdXN0VmFsdWVzKCRkYXRhVmFsdWVzLCAkc3VtVmFsdWVzKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gICAgRmlsbCBpbiBhbnkgbWlzc2luZyB2YWx1ZXMgaW4gdGhlICRkYXRhVmFsdWVzIGFycmF5CiAgICAgICAgICAgICR0ZXN0Q3VycmVudEluZGV4ID0gMDsKICAgICAgICAgICAgZm9yZWFjaCAoJGRhdGFWYWx1ZXMgYXMgJGsgPT4gJGRhdGFWYWx1ZSkgewogICAgICAgICAgICAgICAgd2hpbGUgKCRrICE9ICR0ZXN0Q3VycmVudEluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgJGRhdGFWYWx1ZXNbJHRlc3RDdXJyZW50SW5kZXhdID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICArKyR0ZXN0Q3VycmVudEluZGV4OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKyskdGVzdEN1cnJlbnRJbmRleDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gICAgUmV2ZXJzZSB0aGUgJGRhdGFWYWx1ZXMgb3JkZXIgZm9yIGJhciByYXRoZXIgdGhhbiBjb2x1bW4gY2hhcnQKICAgICAgICAgICAgaWYgKCRyb3RhdGlvbiA9PSAnYmFyJykgewogICAgICAgICAgICAgICAgJGRhdGFWYWx1ZXMgPSBhcnJheV9yZXZlcnNlKCRkYXRhVmFsdWVzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkc2VyaWVzUGxvdCA9IG5ldyBCYXJQbG90KCRkYXRhVmFsdWVzKTsKICAgICAgICAgICAgJHNlcmllc1Bsb3QtPlNldENvbG9yKCdibGFjaycpOwogICAgICAgICAgICAkc2VyaWVzUGxvdC0+U2V0RmlsbENvbG9yKHNlbGY6OiRjb2xvdXJTZXRbc2VsZjo6JHBsb3RDb2xvdXIrK10pOwogICAgICAgICAgICBpZiAoJGRpbWVuc2lvbnMgPT0gJzNkJykgewogICAgICAgICAgICAgICAgJHNlcmllc1Bsb3QtPlNldFNoYWRvdygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRncm91cElEKS0+Z2V0UGxvdExhYmVsQnlJbmRleCgkaikpIHsKICAgICAgICAgICAgICAgICRkYXRhTGFiZWwgPSAnJzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICRkYXRhTGFiZWwgPSAkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoJGdyb3VwSUQpLT5nZXRQbG90TGFiZWxCeUluZGV4KCRqKS0+Z2V0RGF0YVZhbHVlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJHNlcmllc1Bsb3QtPlNldExlZ2VuZCgkZGF0YUxhYmVsKTsKCiAgICAgICAgICAgICRzZXJpZXNQbG90c1tdID0gJHNlcmllc1Bsb3Q7CiAgICAgICAgfQogICAgICAgIC8vICAgIFJldmVyc2UgdGhlIHBsb3Qgb3JkZXIgZm9yIGJhciByYXRoZXIgdGhhbiBjb2x1bW4gY2hhcnQKICAgICAgICBpZiAoKCRyb3RhdGlvbiA9PSAnYmFyJykgJiYgKCEoJGdyb3VwaW5nID09ICdwZXJjZW50U3RhY2tlZCcpKSkgewogICAgICAgICAgICAkc2VyaWVzUGxvdHMgPSBhcnJheV9yZXZlcnNlKCRzZXJpZXNQbG90cyk7CiAgICAgICAgfQoKICAgICAgICBpZiAoJGdyb3VwaW5nID09ICdjbHVzdGVyZWQnKSB7CiAgICAgICAgICAgICRncm91cFBsb3QgPSBuZXcgR3JvdXBCYXJQbG90KCRzZXJpZXNQbG90cyk7CiAgICAgICAgfSBlbHNlaWYgKCRncm91cGluZyA9PSAnc3RhbmRhcmQnKSB7CiAgICAgICAgICAgICRncm91cFBsb3QgPSBuZXcgR3JvdXBCYXJQbG90KCRzZXJpZXNQbG90cyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJGdyb3VwUGxvdCA9IG5ldyBBY2NCYXJQbG90KCRzZXJpZXNQbG90cyk7CiAgICAgICAgICAgIGlmICgkZGltZW5zaW9ucyA9PSAnM2QnKSB7CiAgICAgICAgICAgICAgICAkZ3JvdXBQbG90LT5TZXRTaGFkb3coKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgJHRoaXMtPmdyYXBoLT5BZGQoJGdyb3VwUGxvdCk7CiAgICB9CgoKICAgIHByaXZhdGUgZnVuY3Rpb24gcmVuZGVyUGxvdFNjYXR0ZXIoJGdyb3VwSUQsICRidWJibGUpCiAgICB7CiAgICAgICAgJGdyb3VwaW5nID0gJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRncm91cElEKS0+Z2V0UGxvdEdyb3VwaW5nKCk7CiAgICAgICAgJHNjYXR0ZXJTdHlsZSA9ICRidWJibGVTaXplID0gJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRncm91cElEKS0+Z2V0UGxvdFN0eWxlKCk7CgogICAgICAgICRzZXJpZXNDb3VudCA9ICR0aGlzLT5jaGFydC0+Z2V0UGxvdEFyZWEoKS0+Z2V0UGxvdEdyb3VwQnlJbmRleCgkZ3JvdXBJRCktPmdldFBsb3RTZXJpZXNDb3VudCgpOwogICAgICAgICRzZXJpZXNQbG90cyA9IGFycmF5KCk7CgogICAgICAgIC8vICAgIExvb3AgdGhyb3VnaCBlYWNoIGRhdGEgc2VyaWVzIGluIHR1cm4KICAgICAgICBmb3IgKCRpID0gMDsgJGkgPCAkc2VyaWVzQ291bnQ7ICsrJGkpIHsKICAgICAgICAgICAgJGRhdGFWYWx1ZXNZID0gJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRncm91cElEKS0+Z2V0UGxvdENhdGVnb3J5QnlJbmRleCgkaSktPmdldERhdGFWYWx1ZXMoKTsKICAgICAgICAgICAgJGRhdGFWYWx1ZXNYID0gJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRncm91cElEKS0+Z2V0UGxvdFZhbHVlc0J5SW5kZXgoJGkpLT5nZXREYXRhVmFsdWVzKCk7CgogICAgICAgICAgICBmb3JlYWNoICgkZGF0YVZhbHVlc1kgYXMgJGsgPT4gJGRhdGFWYWx1ZVkpIHsKICAgICAgICAgICAgICAgICRkYXRhVmFsdWVzWVska10gPSAkazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJHNlcmllc1Bsb3QgPSBuZXcgU2NhdHRlclBsb3QoJGRhdGFWYWx1ZXNYLCAkZGF0YVZhbHVlc1kpOwogICAgICAgICAgICBpZiAoJHNjYXR0ZXJTdHlsZSA9PSAnbGluZU1hcmtlcicpIHsKICAgICAgICAgICAgICAgICRzZXJpZXNQbG90LT5TZXRMaW5rUG9pbnRzKCk7CiAgICAgICAgICAgICAgICAkc2VyaWVzUGxvdC0+bGluay0+U2V0Q29sb3Ioc2VsZjo6JGNvbG91clNldFtzZWxmOjokcGxvdENvbG91cl0pOwogICAgICAgICAgICB9IGVsc2VpZiAoJHNjYXR0ZXJTdHlsZSA9PSAnc21vb3RoTWFya2VyJykgewogICAgICAgICAgICAgICAgJHNwbGluZSA9IG5ldyBTcGxpbmUoJGRhdGFWYWx1ZXNZLCAkZGF0YVZhbHVlc1gpOwogICAgICAgICAgICAgICAgbGlzdCgkc3BsaW5lRGF0YVksICRzcGxpbmVEYXRhWCkgPSAkc3BsaW5lLT5HZXQoY291bnQoJGRhdGFWYWx1ZXNYKSAqIHNlbGY6OiR3aWR0aCAvIDIwKTsKICAgICAgICAgICAgICAgICRscGxvdCA9IG5ldyBMaW5lUGxvdCgkc3BsaW5lRGF0YVgsICRzcGxpbmVEYXRhWSk7CiAgICAgICAgICAgICAgICAkbHBsb3QtPlNldENvbG9yKHNlbGY6OiRjb2xvdXJTZXRbc2VsZjo6JHBsb3RDb2xvdXJdKTsKCiAgICAgICAgICAgICAgICAkdGhpcy0+Z3JhcGgtPkFkZCgkbHBsb3QpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJGJ1YmJsZSkgewogICAgICAgICAgICAgICAgJHRoaXMtPmZvcm1hdFBvaW50TWFya2VyKCRzZXJpZXNQbG90LCAnZG90Jyk7CiAgICAgICAgICAgICAgICAkc2VyaWVzUGxvdC0+bWFyay0+U2V0Q29sb3IoJ2JsYWNrJyk7CiAgICAgICAgICAgICAgICAkc2VyaWVzUGxvdC0+bWFyay0+U2V0U2l6ZSgkYnViYmxlU2l6ZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkbWFya2VyID0gJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRncm91cElEKS0+Z2V0UGxvdFZhbHVlc0J5SW5kZXgoJGkpLT5nZXRQb2ludE1hcmtlcigpOwogICAgICAgICAgICAgICAgJHRoaXMtPmZvcm1hdFBvaW50TWFya2VyKCRzZXJpZXNQbG90LCAkbWFya2VyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkZGF0YUxhYmVsID0gJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRncm91cElEKS0+Z2V0UGxvdExhYmVsQnlJbmRleCgkaSktPmdldERhdGFWYWx1ZSgpOwogICAgICAgICAgICAkc2VyaWVzUGxvdC0+U2V0TGVnZW5kKCRkYXRhTGFiZWwpOwoKICAgICAgICAgICAgJHRoaXMtPmdyYXBoLT5BZGQoJHNlcmllc1Bsb3QpOwogICAgICAgIH0KICAgIH0KCgogICAgcHJpdmF0ZSBmdW5jdGlvbiByZW5kZXJQbG90UmFkYXIoJGdyb3VwSUQpCiAgICB7CiAgICAgICAgJHJhZGFyU3R5bGUgPSAkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoJGdyb3VwSUQpLT5nZXRQbG90U3R5bGUoKTsKCiAgICAgICAgJHNlcmllc0NvdW50ID0gJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRncm91cElEKS0+Z2V0UGxvdFNlcmllc0NvdW50KCk7CiAgICAgICAgJHNlcmllc1Bsb3RzID0gYXJyYXkoKTsKCiAgICAgICAgLy8gICAgTG9vcCB0aHJvdWdoIGVhY2ggZGF0YSBzZXJpZXMgaW4gdHVybgogICAgICAgIGZvciAoJGkgPSAwOyAkaSA8ICRzZXJpZXNDb3VudDsgKyskaSkgewogICAgICAgICAgICAkZGF0YVZhbHVlc1kgPSAkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoJGdyb3VwSUQpLT5nZXRQbG90Q2F0ZWdvcnlCeUluZGV4KCRpKS0+Z2V0RGF0YVZhbHVlcygpOwogICAgICAgICAgICAkZGF0YVZhbHVlc1ggPSAkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoJGdyb3VwSUQpLT5nZXRQbG90VmFsdWVzQnlJbmRleCgkaSktPmdldERhdGFWYWx1ZXMoKTsKICAgICAgICAgICAgJG1hcmtlciA9ICR0aGlzLT5jaGFydC0+Z2V0UGxvdEFyZWEoKS0+Z2V0UGxvdEdyb3VwQnlJbmRleCgkZ3JvdXBJRCktPmdldFBsb3RWYWx1ZXNCeUluZGV4KCRpKS0+Z2V0UG9pbnRNYXJrZXIoKTsKCiAgICAgICAgICAgICRkYXRhVmFsdWVzID0gYXJyYXkoKTsKICAgICAgICAgICAgZm9yZWFjaCAoJGRhdGFWYWx1ZXNZIGFzICRrID0+ICRkYXRhVmFsdWVZKSB7CiAgICAgICAgICAgICAgICAkZGF0YVZhbHVlc1ska10gPSBpbXBsb2RlKCcgJywgYXJyYXlfcmV2ZXJzZSgkZGF0YVZhbHVlWSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICR0bXAgPSBhcnJheV9zaGlmdCgkZGF0YVZhbHVlcyk7CiAgICAgICAgICAgICRkYXRhVmFsdWVzW10gPSAkdG1wOwogICAgICAgICAgICAkdG1wID0gYXJyYXlfc2hpZnQoJGRhdGFWYWx1ZXNYKTsKICAgICAgICAgICAgJGRhdGFWYWx1ZXNYW10gPSAkdG1wOwoKICAgICAgICAgICAgJHRoaXMtPmdyYXBoLT5TZXRUaXRsZXMoYXJyYXlfcmV2ZXJzZSgkZGF0YVZhbHVlcykpOwoKICAgICAgICAgICAgJHNlcmllc1Bsb3QgPSBuZXcgUmFkYXJQbG90KGFycmF5X3JldmVyc2UoJGRhdGFWYWx1ZXNYKSk7CgogICAgICAgICAgICAkZGF0YUxhYmVsID0gJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRncm91cElEKS0+Z2V0UGxvdExhYmVsQnlJbmRleCgkaSktPmdldERhdGFWYWx1ZSgpOwogICAgICAgICAgICAkc2VyaWVzUGxvdC0+U2V0Q29sb3Ioc2VsZjo6JGNvbG91clNldFtzZWxmOjokcGxvdENvbG91cisrXSk7CiAgICAgICAgICAgIGlmICgkcmFkYXJTdHlsZSA9PSAnZmlsbGVkJykgewogICAgICAgICAgICAgICAgJHNlcmllc1Bsb3QtPlNldEZpbGxDb2xvcihzZWxmOjokY29sb3VyU2V0W3NlbGY6OiRwbG90Q29sb3VyXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJHRoaXMtPmZvcm1hdFBvaW50TWFya2VyKCRzZXJpZXNQbG90LCAkbWFya2VyKTsKICAgICAgICAgICAgJHNlcmllc1Bsb3QtPlNldExlZ2VuZCgkZGF0YUxhYmVsKTsKCiAgICAgICAgICAgICR0aGlzLT5ncmFwaC0+QWRkKCRzZXJpZXNQbG90KTsKICAgICAgICB9CiAgICB9CgoKICAgIHByaXZhdGUgZnVuY3Rpb24gcmVuZGVyUGxvdENvbnRvdXIoJGdyb3VwSUQpCiAgICB7CiAgICAgICAgJGNvbnRvdXJTdHlsZSA9ICR0aGlzLT5jaGFydC0+Z2V0UGxvdEFyZWEoKS0+Z2V0UGxvdEdyb3VwQnlJbmRleCgkZ3JvdXBJRCktPmdldFBsb3RTdHlsZSgpOwoKICAgICAgICAkc2VyaWVzQ291bnQgPSAkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoJGdyb3VwSUQpLT5nZXRQbG90U2VyaWVzQ291bnQoKTsKICAgICAgICAkc2VyaWVzUGxvdHMgPSBhcnJheSgpOwoKICAgICAgICAkZGF0YVZhbHVlcyA9IGFycmF5KCk7CiAgICAgICAgLy8gICAgTG9vcCB0aHJvdWdoIGVhY2ggZGF0YSBzZXJpZXMgaW4gdHVybgogICAgICAgIGZvciAoJGkgPSAwOyAkaSA8ICRzZXJpZXNDb3VudDsgKyskaSkgewogICAgICAgICAgICAkZGF0YVZhbHVlc1kgPSAkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoJGdyb3VwSUQpLT5nZXRQbG90Q2F0ZWdvcnlCeUluZGV4KCRpKS0+Z2V0RGF0YVZhbHVlcygpOwogICAgICAgICAgICAkZGF0YVZhbHVlc1ggPSAkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoJGdyb3VwSUQpLT5nZXRQbG90VmFsdWVzQnlJbmRleCgkaSktPmdldERhdGFWYWx1ZXMoKTsKCiAgICAgICAgICAgICRkYXRhVmFsdWVzWyRpXSA9ICRkYXRhVmFsdWVzWDsKICAgICAgICB9CiAgICAgICAgJHNlcmllc1Bsb3QgPSBuZXcgQ29udG91clBsb3QoJGRhdGFWYWx1ZXMpOwoKICAgICAgICAkdGhpcy0+Z3JhcGgtPkFkZCgkc2VyaWVzUGxvdCk7CiAgICB9CgoKICAgIHByaXZhdGUgZnVuY3Rpb24gcmVuZGVyUGxvdFN0b2NrKCRncm91cElEKQogICAgewogICAgICAgICRzZXJpZXNDb3VudCA9ICR0aGlzLT5jaGFydC0+Z2V0UGxvdEFyZWEoKS0+Z2V0UGxvdEdyb3VwQnlJbmRleCgkZ3JvdXBJRCktPmdldFBsb3RTZXJpZXNDb3VudCgpOwogICAgICAgICRwbG90T3JkZXIgPSAkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoJGdyb3VwSUQpLT5nZXRQbG90T3JkZXIoKTsKCiAgICAgICAgJGRhdGFWYWx1ZXMgPSBhcnJheSgpOwogICAgICAgIC8vICAgIExvb3AgdGhyb3VnaCBlYWNoIGRhdGEgc2VyaWVzIGluIHR1cm4gYW5kIGJ1aWxkIHRoZSBwbG90IGFycmF5cwogICAgICAgIGZvcmVhY2ggKCRwbG90T3JkZXIgYXMgJGkgPT4gJHYpIHsKICAgICAgICAgICAgJGRhdGFWYWx1ZXNYID0gJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRncm91cElEKS0+Z2V0UGxvdFZhbHVlc0J5SW5kZXgoJHYpLT5nZXREYXRhVmFsdWVzKCk7CiAgICAgICAgICAgIGZvcmVhY2ggKCRkYXRhVmFsdWVzWCBhcyAkaiA9PiAkZGF0YVZhbHVlWCkgewogICAgICAgICAgICAgICAgJGRhdGFWYWx1ZXNbJHBsb3RPcmRlclskaV1dWyRqXSA9ICRkYXRhVmFsdWVYOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChlbXB0eSgkZGF0YVZhbHVlcykpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgJGRhdGFWYWx1ZXNQbG90ID0gYXJyYXkoKTsKICAgICAgICAvLyBGbGF0dGVuIHRoZSBwbG90IGFycmF5cyB0byBhIHNpbmdsZSBkaW1lbnNpb25hbCBhcnJheSB0byB3b3JrIHdpdGgganBncmFwaAogICAgICAgIGZvciAoJGogPSAwOyAkaiA8IGNvdW50KCRkYXRhVmFsdWVzWzBdKTsgKyskaikgewogICAgICAgICAgICBmb3IgKCRpID0gMDsgJGkgPCAkc2VyaWVzQ291bnQ7ICsrJGkpIHsKICAgICAgICAgICAgICAgICRkYXRhVmFsdWVzUGxvdFtdID0gJGRhdGFWYWx1ZXNbJGldWyRqXTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gU2V0IHRoZSB4LWF4aXMgbGFiZWxzCiAgICAgICAgJGxhYmVsQ291bnQgPSBjb3VudCgkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoJGdyb3VwSUQpLT5nZXRQbG90VmFsdWVzQnlJbmRleCgwKS0+Z2V0UG9pbnRDb3VudCgpKTsKICAgICAgICBpZiAoJGxhYmVsQ291bnQgPiAwKSB7CiAgICAgICAgICAgICRkYXRhc2V0TGFiZWxzID0gJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRncm91cElEKS0+Z2V0UGxvdENhdGVnb3J5QnlJbmRleCgwKS0+Z2V0RGF0YVZhbHVlcygpOwogICAgICAgICAgICAkZGF0YXNldExhYmVscyA9ICR0aGlzLT5mb3JtYXREYXRhU2V0TGFiZWxzKCRncm91cElELCAkZGF0YXNldExhYmVscywgJGxhYmVsQ291bnQpOwogICAgICAgICAgICAkdGhpcy0+Z3JhcGgtPnhheGlzLT5TZXRUaWNrTGFiZWxzKCRkYXRhc2V0TGFiZWxzKTsKICAgICAgICB9CgogICAgICAgICRzZXJpZXNQbG90ID0gbmV3IFN0b2NrUGxvdCgkZGF0YVZhbHVlc1Bsb3QpOwogICAgICAgICRzZXJpZXNQbG90LT5TZXRXaWR0aCgyMCk7CgogICAgICAgICR0aGlzLT5ncmFwaC0+QWRkKCRzZXJpZXNQbG90KTsKICAgIH0KCgogICAgcHJpdmF0ZSBmdW5jdGlvbiByZW5kZXJBcmVhQ2hhcnQoJGdyb3VwQ291bnQsICRkaW1lbnNpb25zID0gJzJkJykKICAgIHsKICAgICAgICByZXF1aXJlX29uY2UoUEhQRXhjZWxfU2V0dGluZ3M6OmdldENoYXJ0UmVuZGVyZXJQYXRoKCkuJ2pwZ3JhcGhfbGluZS5waHAnKTsKCiAgICAgICAgJHRoaXMtPnJlbmRlckNhcnRlc2lhblBsb3RBcmVhKCk7CgogICAgICAgIGZvciAoJGkgPSAwOyAkaSA8ICRncm91cENvdW50OyArKyRpKSB7CiAgICAgICAgICAgICR0aGlzLT5yZW5kZXJQbG90TGluZSgkaSwgdHJ1ZSwgZmFsc2UsICRkaW1lbnNpb25zKTsKICAgICAgICB9CiAgICB9CgoKICAgIHByaXZhdGUgZnVuY3Rpb24gcmVuZGVyTGluZUNoYXJ0KCRncm91cENvdW50LCAkZGltZW5zaW9ucyA9ICcyZCcpCiAgICB7CiAgICAgICAgcmVxdWlyZV9vbmNlKFBIUEV4Y2VsX1NldHRpbmdzOjpnZXRDaGFydFJlbmRlcmVyUGF0aCgpLidqcGdyYXBoX2xpbmUucGhwJyk7CgogICAgICAgICR0aGlzLT5yZW5kZXJDYXJ0ZXNpYW5QbG90QXJlYSgpOwoKICAgICAgICBmb3IgKCRpID0gMDsgJGkgPCAkZ3JvdXBDb3VudDsgKyskaSkgewogICAgICAgICAgICAkdGhpcy0+cmVuZGVyUGxvdExpbmUoJGksIGZhbHNlLCBmYWxzZSwgJGRpbWVuc2lvbnMpOwogICAgICAgIH0KICAgIH0KCgogICAgcHJpdmF0ZSBmdW5jdGlvbiByZW5kZXJCYXJDaGFydCgkZ3JvdXBDb3VudCwgJGRpbWVuc2lvbnMgPSAnMmQnKQogICAgewogICAgICAgIHJlcXVpcmVfb25jZShQSFBFeGNlbF9TZXR0aW5nczo6Z2V0Q2hhcnRSZW5kZXJlclBhdGgoKS4nanBncmFwaF9iYXIucGhwJyk7CgogICAgICAgICR0aGlzLT5yZW5kZXJDYXJ0ZXNpYW5QbG90QXJlYSgpOwoKICAgICAgICBmb3IgKCRpID0gMDsgJGkgPCAkZ3JvdXBDb3VudDsgKyskaSkgewogICAgICAgICAgICAkdGhpcy0+cmVuZGVyUGxvdEJhcigkaSwgJGRpbWVuc2lvbnMpOwogICAgICAgIH0KICAgIH0KCgogICAgcHJpdmF0ZSBmdW5jdGlvbiByZW5kZXJTY2F0dGVyQ2hhcnQoJGdyb3VwQ291bnQpCiAgICB7CiAgICAgICAgcmVxdWlyZV9vbmNlKFBIUEV4Y2VsX1NldHRpbmdzOjpnZXRDaGFydFJlbmRlcmVyUGF0aCgpLidqcGdyYXBoX3NjYXR0ZXIucGhwJyk7CiAgICAgICAgcmVxdWlyZV9vbmNlKFBIUEV4Y2VsX1NldHRpbmdzOjpnZXRDaGFydFJlbmRlcmVyUGF0aCgpLidqcGdyYXBoX3JlZ3N0YXQucGhwJyk7CiAgICAgICAgcmVxdWlyZV9vbmNlKFBIUEV4Y2VsX1NldHRpbmdzOjpnZXRDaGFydFJlbmRlcmVyUGF0aCgpLidqcGdyYXBoX2xpbmUucGhwJyk7CgogICAgICAgICR0aGlzLT5yZW5kZXJDYXJ0ZXNpYW5QbG90QXJlYSgnbGlubGluJyk7CgogICAgICAgIGZvciAoJGkgPSAwOyAkaSA8ICRncm91cENvdW50OyArKyRpKSB7CiAgICAgICAgICAgICR0aGlzLT5yZW5kZXJQbG90U2NhdHRlcigkaSwgZmFsc2UpOwogICAgICAgIH0KICAgIH0KCgogICAgcHJpdmF0ZSBmdW5jdGlvbiByZW5kZXJCdWJibGVDaGFydCgkZ3JvdXBDb3VudCkKICAgIHsKICAgICAgICByZXF1aXJlX29uY2UoUEhQRXhjZWxfU2V0dGluZ3M6OmdldENoYXJ0UmVuZGVyZXJQYXRoKCkuJ2pwZ3JhcGhfc2NhdHRlci5waHAnKTsKCiAgICAgICAgJHRoaXMtPnJlbmRlckNhcnRlc2lhblBsb3RBcmVhKCdsaW5saW4nKTsKCiAgICAgICAgZm9yICgkaSA9IDA7ICRpIDwgJGdyb3VwQ291bnQ7ICsrJGkpIHsKICAgICAgICAgICAgJHRoaXMtPnJlbmRlclBsb3RTY2F0dGVyKCRpLCB0cnVlKTsKICAgICAgICB9CiAgICB9CgoKICAgIHByaXZhdGUgZnVuY3Rpb24gcmVuZGVyUGllQ2hhcnQoJGdyb3VwQ291bnQsICRkaW1lbnNpb25zID0gJzJkJywgJGRvdWdobnV0ID0gZmFsc2UsICRtdWx0aXBsZVBsb3RzID0gZmFsc2UpCiAgICB7CiAgICAgICAgcmVxdWlyZV9vbmNlKFBIUEV4Y2VsX1NldHRpbmdzOjpnZXRDaGFydFJlbmRlcmVyUGF0aCgpLidqcGdyYXBoX3BpZS5waHAnKTsKICAgICAgICBpZiAoJGRpbWVuc2lvbnMgPT0gJzNkJykgewogICAgICAgICAgICByZXF1aXJlX29uY2UoUEhQRXhjZWxfU2V0dGluZ3M6OmdldENoYXJ0UmVuZGVyZXJQYXRoKCkuJ2pwZ3JhcGhfcGllM2QucGhwJyk7CiAgICAgICAgfQoKICAgICAgICAkdGhpcy0+cmVuZGVyUGllUGxvdEFyZWEoJGRvdWdobnV0KTsKCiAgICAgICAgJGlMaW1pdCA9ICgkbXVsdGlwbGVQbG90cykgPyAkZ3JvdXBDb3VudCA6IDE7CiAgICAgICAgZm9yICgkZ3JvdXBJRCA9IDA7ICRncm91cElEIDwgJGlMaW1pdDsgKyskZ3JvdXBJRCkgewogICAgICAgICAgICAkZ3JvdXBpbmcgPSAkdGhpcy0+Y2hhcnQtPmdldFBsb3RBcmVhKCktPmdldFBsb3RHcm91cEJ5SW5kZXgoJGdyb3VwSUQpLT5nZXRQbG90R3JvdXBpbmcoKTsKICAgICAgICAgICAgJGV4cGxvZGVkID0gJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRncm91cElEKS0+Z2V0UGxvdFN0eWxlKCk7CiAgICAgICAgICAgIGlmICgkZ3JvdXBJRCA9PSAwKSB7CiAgICAgICAgICAgICAgICAkbGFiZWxDb3VudCA9IGNvdW50KCR0aGlzLT5jaGFydC0+Z2V0UGxvdEFyZWEoKS0+Z2V0UGxvdEdyb3VwQnlJbmRleCgkZ3JvdXBJRCktPmdldFBsb3RWYWx1ZXNCeUluZGV4KDApLT5nZXRQb2ludENvdW50KCkpOwogICAgICAgICAgICAgICAgaWYgKCRsYWJlbENvdW50ID4gMCkgewogICAgICAgICAgICAgICAgICAgICRkYXRhc2V0TGFiZWxzID0gJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRncm91cElEKS0+Z2V0UGxvdENhdGVnb3J5QnlJbmRleCgwKS0+Z2V0RGF0YVZhbHVlcygpOwogICAgICAgICAgICAgICAgICAgICRkYXRhc2V0TGFiZWxzID0gJHRoaXMtPmZvcm1hdERhdGFTZXRMYWJlbHMoJGdyb3VwSUQsICRkYXRhc2V0TGFiZWxzLCAkbGFiZWxDb3VudCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRzZXJpZXNDb3VudCA9ICR0aGlzLT5jaGFydC0+Z2V0UGxvdEFyZWEoKS0+Z2V0UGxvdEdyb3VwQnlJbmRleCgkZ3JvdXBJRCktPmdldFBsb3RTZXJpZXNDb3VudCgpOwogICAgICAgICAgICAkc2VyaWVzUGxvdHMgPSBhcnJheSgpOwogICAgICAgICAgICAvLyAgICBGb3IgcGllIGNoYXJ0cywgd2Ugb25seSBkaXNwbGF5IHRoZSBmaXJzdCBzZXJpZXM6IGRvdWdobnV0IGNoYXJ0cyBnZW5lcmFsbHkgZGlzcGxheSBhbGwgc2VyaWVzCiAgICAgICAgICAgICRqTGltaXQgPSAoJG11bHRpcGxlUGxvdHMpID8gJHNlcmllc0NvdW50IDogMTsKICAgICAgICAgICAgLy8gICAgTG9vcCB0aHJvdWdoIGVhY2ggZGF0YSBzZXJpZXMgaW4gdHVybgogICAgICAgICAgICBmb3IgKCRqID0gMDsgJGogPCAkakxpbWl0OyArKyRqKSB7CiAgICAgICAgICAgICAgICAkZGF0YVZhbHVlcyA9ICR0aGlzLT5jaGFydC0+Z2V0UGxvdEFyZWEoKS0+Z2V0UGxvdEdyb3VwQnlJbmRleCgkZ3JvdXBJRCktPmdldFBsb3RWYWx1ZXNCeUluZGV4KCRqKS0+Z2V0RGF0YVZhbHVlcygpOwoKICAgICAgICAgICAgICAgIC8vICAgIEZpbGwgaW4gYW55IG1pc3NpbmcgdmFsdWVzIGluIHRoZSAkZGF0YVZhbHVlcyBhcnJheQogICAgICAgICAgICAgICAgJHRlc3RDdXJyZW50SW5kZXggPSAwOwogICAgICAgICAgICAgICAgZm9yZWFjaCAoJGRhdGFWYWx1ZXMgYXMgJGsgPT4gJGRhdGFWYWx1ZSkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgkayAhPSAkdGVzdEN1cnJlbnRJbmRleCkgewogICAgICAgICAgICAgICAgICAgICAgICAkZGF0YVZhbHVlc1skdGVzdEN1cnJlbnRJbmRleF0gPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICArKyR0ZXN0Q3VycmVudEluZGV4OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICArKyR0ZXN0Q3VycmVudEluZGV4OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICgkZGltZW5zaW9ucyA9PSAnM2QnKSB7CiAgICAgICAgICAgICAgICAgICAgJHNlcmllc1Bsb3QgPSBuZXcgUGllUGxvdDNEKCRkYXRhVmFsdWVzKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCRkb3VnaG51dCkgewogICAgICAgICAgICAgICAgICAgICAgICAkc2VyaWVzUGxvdCA9IG5ldyBQaWVQbG90QygkZGF0YVZhbHVlcyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHNlcmllc1Bsb3QgPSBuZXcgUGllUGxvdCgkZGF0YVZhbHVlcyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICgkbXVsdGlwbGVQbG90cykgewogICAgICAgICAgICAgICAgICAgICRzZXJpZXNQbG90LT5TZXRTaXplKCgkakxpbWl0LSRqKSAvICgkakxpbWl0ICogNCkpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICgkZG91Z2hudXQpIHsKICAgICAgICAgICAgICAgICAgICAkc2VyaWVzUGxvdC0+U2V0TWlkQ29sb3IoJ3doaXRlJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJHNlcmllc1Bsb3QtPlNldENvbG9yKHNlbGY6OiRjb2xvdXJTZXRbc2VsZjo6JHBsb3RDb2xvdXIrK10pOwogICAgICAgICAgICAgICAgaWYgKGNvdW50KCRkYXRhc2V0TGFiZWxzKSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAkc2VyaWVzUGxvdC0+U2V0TGFiZWxzKGFycmF5X2ZpbGwoMCwgY291bnQoJGRhdGFzZXRMYWJlbHMpLCAnJykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCRkaW1lbnNpb25zICE9ICczZCcpIHsKICAgICAgICAgICAgICAgICAgICAkc2VyaWVzUGxvdC0+U2V0R3VpZGVMaW5lcyhmYWxzZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoJGogPT0gMCkgewogICAgICAgICAgICAgICAgICAgIGlmICgkZXhwbG9kZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHNlcmllc1Bsb3QtPkV4cGxvZGVBbGwoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgJHNlcmllc1Bsb3QtPlNldExlZ2VuZHMoJGRhdGFzZXRMYWJlbHMpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICR0aGlzLT5ncmFwaC0+QWRkKCRzZXJpZXNQbG90KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCgogICAgcHJpdmF0ZSBmdW5jdGlvbiByZW5kZXJSYWRhckNoYXJ0KCRncm91cENvdW50KQogICAgewogICAgICAgIHJlcXVpcmVfb25jZShQSFBFeGNlbF9TZXR0aW5nczo6Z2V0Q2hhcnRSZW5kZXJlclBhdGgoKS4nanBncmFwaF9yYWRhci5waHAnKTsKCiAgICAgICAgJHRoaXMtPnJlbmRlclJhZGFyUGxvdEFyZWEoKTsKCiAgICAgICAgZm9yICgkZ3JvdXBJRCA9IDA7ICRncm91cElEIDwgJGdyb3VwQ291bnQ7ICsrJGdyb3VwSUQpIHsKICAgICAgICAgICAgJHRoaXMtPnJlbmRlclBsb3RSYWRhcigkZ3JvdXBJRCk7CiAgICAgICAgfQogICAgfQoKCiAgICBwcml2YXRlIGZ1bmN0aW9uIHJlbmRlclN0b2NrQ2hhcnQoJGdyb3VwQ291bnQpCiAgICB7CiAgICAgICAgcmVxdWlyZV9vbmNlKFBIUEV4Y2VsX1NldHRpbmdzOjpnZXRDaGFydFJlbmRlcmVyUGF0aCgpLidqcGdyYXBoX3N0b2NrLnBocCcpOwoKICAgICAgICAkdGhpcy0+cmVuZGVyQ2FydGVzaWFuUGxvdEFyZWEoJ2ludGludCcpOwoKICAgICAgICBmb3IgKCRncm91cElEID0gMDsgJGdyb3VwSUQgPCAkZ3JvdXBDb3VudDsgKyskZ3JvdXBJRCkgewogICAgICAgICAgICAkdGhpcy0+cmVuZGVyUGxvdFN0b2NrKCRncm91cElEKTsKICAgICAgICB9CiAgICB9CgoKICAgIHByaXZhdGUgZnVuY3Rpb24gcmVuZGVyQ29udG91ckNoYXJ0KCRncm91cENvdW50LCAkZGltZW5zaW9ucykKICAgIHsKICAgICAgICByZXF1aXJlX29uY2UoUEhQRXhjZWxfU2V0dGluZ3M6OmdldENoYXJ0UmVuZGVyZXJQYXRoKCkuJ2pwZ3JhcGhfY29udG91ci5waHAnKTsKCiAgICAgICAgJHRoaXMtPnJlbmRlckNhcnRlc2lhblBsb3RBcmVhKCdpbnRpbnQnKTsKCiAgICAgICAgZm9yICgkaSA9IDA7ICRpIDwgJGdyb3VwQ291bnQ7ICsrJGkpIHsKICAgICAgICAgICAgJHRoaXMtPnJlbmRlclBsb3RDb250b3VyKCRpKTsKICAgICAgICB9CiAgICB9CgoKICAgIHByaXZhdGUgZnVuY3Rpb24gcmVuZGVyQ29tYmluYXRpb25DaGFydCgkZ3JvdXBDb3VudCwgJGRpbWVuc2lvbnMsICRvdXRwdXREZXN0aW5hdGlvbikKICAgIHsKICAgICAgICByZXF1aXJlX29uY2UoUEhQRXhjZWxfU2V0dGluZ3M6OmdldENoYXJ0UmVuZGVyZXJQYXRoKCkuJ2pwZ3JhcGhfbGluZS5waHAnKTsKICAgICAgICByZXF1aXJlX29uY2UoUEhQRXhjZWxfU2V0dGluZ3M6OmdldENoYXJ0UmVuZGVyZXJQYXRoKCkuJ2pwZ3JhcGhfYmFyLnBocCcpOwogICAgICAgIHJlcXVpcmVfb25jZShQSFBFeGNlbF9TZXR0aW5nczo6Z2V0Q2hhcnRSZW5kZXJlclBhdGgoKS4nanBncmFwaF9zY2F0dGVyLnBocCcpOwogICAgICAgIHJlcXVpcmVfb25jZShQSFBFeGNlbF9TZXR0aW5nczo6Z2V0Q2hhcnRSZW5kZXJlclBhdGgoKS4nanBncmFwaF9yZWdzdGF0LnBocCcpOwogICAgICAgIHJlcXVpcmVfb25jZShQSFBFeGNlbF9TZXR0aW5nczo6Z2V0Q2hhcnRSZW5kZXJlclBhdGgoKS4nanBncmFwaF9saW5lLnBocCcpOwoKICAgICAgICAkdGhpcy0+cmVuZGVyQ2FydGVzaWFuUGxvdEFyZWEoKTsKCiAgICAgICAgZm9yICgkaSA9IDA7ICRpIDwgJGdyb3VwQ291bnQ7ICsrJGkpIHsKICAgICAgICAgICAgJGRpbWVuc2lvbnMgPSBudWxsOwogICAgICAgICAgICAkY2hhcnRUeXBlID0gJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRpKS0+Z2V0UGxvdFR5cGUoKTsKICAgICAgICAgICAgc3dpdGNoICgkY2hhcnRUeXBlKSB7CiAgICAgICAgICAgICAgICBjYXNlICdhcmVhM0RDaGFydCc6CiAgICAgICAgICAgICAgICAgICAgJGRpbWVuc2lvbnMgPSAnM2QnOwogICAgICAgICAgICAgICAgICAgIC8vIG5vIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlICdhcmVhQ2hhcnQnOgogICAgICAgICAgICAgICAgICAgICR0aGlzLT5yZW5kZXJQbG90TGluZSgkaSwgdHJ1ZSwgdHJ1ZSwgJGRpbWVuc2lvbnMpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnYmFyM0RDaGFydCc6CiAgICAgICAgICAgICAgICAgICAgJGRpbWVuc2lvbnMgPSAnM2QnOwogICAgICAgICAgICAgICAgICAgIC8vIG5vIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlICdiYXJDaGFydCc6CiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPnJlbmRlclBsb3RCYXIoJGksICRkaW1lbnNpb25zKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ2xpbmUzRENoYXJ0JzoKICAgICAgICAgICAgICAgICAgICAkZGltZW5zaW9ucyA9ICczZCc7CiAgICAgICAgICAgICAgICAgICAgLy8gbm8gYnJlYWsKICAgICAgICAgICAgICAgIGNhc2UgJ2xpbmVDaGFydCc6CiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPnJlbmRlclBsb3RMaW5lKCRpLCBmYWxzZSwgdHJ1ZSwgJGRpbWVuc2lvbnMpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnc2NhdHRlckNoYXJ0JzoKICAgICAgICAgICAgICAgICAgICAkdGhpcy0+cmVuZGVyUGxvdFNjYXR0ZXIoJGksIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ2J1YmJsZUNoYXJ0JzoKICAgICAgICAgICAgICAgICAgICAkdGhpcy0+cmVuZGVyUGxvdFNjYXR0ZXIoJGksIHRydWUpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAkdGhpcy0+Z3JhcGggPSBudWxsOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgJHRoaXMtPnJlbmRlckxlZ2VuZCgpOwoKICAgICAgICAkdGhpcy0+Z3JhcGgtPlN0cm9rZSgkb3V0cHV0RGVzdGluYXRpb24pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICBwdWJsaWMgZnVuY3Rpb24gcmVuZGVyKCRvdXRwdXREZXN0aW5hdGlvbikKICAgIHsKICAgICAgICBzZWxmOjokcGxvdENvbG91ciA9IDA7CgogICAgICAgICRncm91cENvdW50ID0gJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBDb3VudCgpOwoKICAgICAgICAkZGltZW5zaW9ucyA9IG51bGw7CiAgICAgICAgaWYgKCRncm91cENvdW50ID09IDEpIHsKICAgICAgICAgICAgJGNoYXJ0VHlwZSA9ICR0aGlzLT5jaGFydC0+Z2V0UGxvdEFyZWEoKS0+Z2V0UGxvdEdyb3VwQnlJbmRleCgwKS0+Z2V0UGxvdFR5cGUoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkY2hhcnRUeXBlcyA9IGFycmF5KCk7CiAgICAgICAgICAgIGZvciAoJGkgPSAwOyAkaSA8ICRncm91cENvdW50OyArKyRpKSB7CiAgICAgICAgICAgICAgICAkY2hhcnRUeXBlc1tdID0gJHRoaXMtPmNoYXJ0LT5nZXRQbG90QXJlYSgpLT5nZXRQbG90R3JvdXBCeUluZGV4KCRpKS0+Z2V0UGxvdFR5cGUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkY2hhcnRUeXBlcyA9IGFycmF5X3VuaXF1ZSgkY2hhcnRUeXBlcyk7CiAgICAgICAgICAgIGlmIChjb3VudCgkY2hhcnRUeXBlcykgPT0gMSkgewogICAgICAgICAgICAgICAgJGNoYXJ0VHlwZSA9IGFycmF5X3BvcCgkY2hhcnRUeXBlcyk7CiAgICAgICAgICAgIH0gZWxzZWlmIChjb3VudCgkY2hhcnRUeXBlcykgPT0gMCkgewogICAgICAgICAgICAgICAgZWNobyAnQ2hhcnQgaXMgbm90IHlldCBpbXBsZW1lbnRlZDxiciAvPic7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJHRoaXMtPnJlbmRlckNvbWJpbmF0aW9uQ2hhcnQoJGdyb3VwQ291bnQsICRkaW1lbnNpb25zLCAkb3V0cHV0RGVzdGluYXRpb24pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBzd2l0Y2ggKCRjaGFydFR5cGUpIHsKICAgICAgICAgICAgY2FzZSAnYXJlYTNEQ2hhcnQnOgogICAgICAgICAgICAgICAgJGRpbWVuc2lvbnMgPSAnM2QnOwogICAgICAgICAgICAgICAgLy8gbm8gYnJlYWsKICAgICAgICAgICAgY2FzZSAnYXJlYUNoYXJ0JzoKICAgICAgICAgICAgICAgICR0aGlzLT5yZW5kZXJBcmVhQ2hhcnQoJGdyb3VwQ291bnQsICRkaW1lbnNpb25zKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdiYXIzRENoYXJ0JzoKICAgICAgICAgICAgICAgICRkaW1lbnNpb25zID0gJzNkJzsKICAgICAgICAgICAgICAgIC8vIG5vIGJyZWFrCiAgICAgICAgICAgIGNhc2UgJ2JhckNoYXJ0JzoKICAgICAgICAgICAgICAgICR0aGlzLT5yZW5kZXJCYXJDaGFydCgkZ3JvdXBDb3VudCwgJGRpbWVuc2lvbnMpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ2xpbmUzRENoYXJ0JzoKICAgICAgICAgICAgICAgICRkaW1lbnNpb25zID0gJzNkJzsKICAgICAgICAgICAgICAgIC8vIG5vIGJyZWFrCiAgICAgICAgICAgIGNhc2UgJ2xpbmVDaGFydCc6CiAgICAgICAgICAgICAgICAkdGhpcy0+cmVuZGVyTGluZUNoYXJ0KCRncm91cENvdW50LCAkZGltZW5zaW9ucyk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAncGllM0RDaGFydCc6CiAgICAgICAgICAgICAgICAkZGltZW5zaW9ucyA9ICczZCc7CiAgICAgICAgICAgICAgICAvLyBubyBicmVhawogICAgICAgICAgICBjYXNlICdwaWVDaGFydCc6CiAgICAgICAgICAgICAgICAkdGhpcy0+cmVuZGVyUGllQ2hhcnQoJGdyb3VwQ291bnQsICRkaW1lbnNpb25zLCBmYWxzZSwgZmFsc2UpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ2RvdWdobnV0M0RDaGFydCc6CiAgICAgICAgICAgICAgICAkZGltZW5zaW9ucyA9ICczZCc7CiAgICAgICAgICAgICAgICAvLyBubyBicmVhawogICAgICAgICAgICBjYXNlICdkb3VnaG51dENoYXJ0JzoKICAgICAgICAgICAgICAgICR0aGlzLT5yZW5kZXJQaWVDaGFydCgkZ3JvdXBDb3VudCwgJGRpbWVuc2lvbnMsIHRydWUsIHRydWUpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ3NjYXR0ZXJDaGFydCc6CiAgICAgICAgICAgICAgICAkdGhpcy0+cmVuZGVyU2NhdHRlckNoYXJ0KCRncm91cENvdW50KTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdidWJibGVDaGFydCc6CiAgICAgICAgICAgICAgICAkdGhpcy0+cmVuZGVyQnViYmxlQ2hhcnQoJGdyb3VwQ291bnQpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ3JhZGFyQ2hhcnQnOgogICAgICAgICAgICAgICAgJHRoaXMtPnJlbmRlclJhZGFyQ2hhcnQoJGdyb3VwQ291bnQpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ3N1cmZhY2UzRENoYXJ0JzoKICAgICAgICAgICAgICAgICRkaW1lbnNpb25zID0gJzNkJzsKICAgICAgICAgICAgICAgIC8vIG5vIGJyZWFrCiAgICAgICAgICAgIGNhc2UgJ3N1cmZhY2VDaGFydCc6CiAgICAgICAgICAgICAgICAkdGhpcy0+cmVuZGVyQ29udG91ckNoYXJ0KCRncm91cENvdW50LCAkZGltZW5zaW9ucyk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnc3RvY2tDaGFydCc6CiAgICAgICAgICAgICAgICAkdGhpcy0+cmVuZGVyU3RvY2tDaGFydCgkZ3JvdXBDb3VudCwgJGRpbWVuc2lvbnMpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICBlY2hvICRjaGFydFR5cGUuJyBpcyBub3QgeWV0IGltcGxlbWVudGVkPGJyIC8+JzsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgJHRoaXMtPnJlbmRlckxlZ2VuZCgpOwoKICAgICAgICAkdGhpcy0+Z3JhcGgtPlN0cm9rZSgkb3V0cHV0RGVzdGluYXRpb24pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICAvKioKICAgICAqIENyZWF0ZSBhIG5ldyBQSFBFeGNlbF9DaGFydF9SZW5kZXJlcl9qcGdyYXBoCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdChQSFBFeGNlbF9DaGFydCAkY2hhcnQpCiAgICB7CiAgICAgICAgJHRoaXMtPmdyYXBoICAgID0gbnVsbDsKICAgICAgICAkdGhpcy0+Y2hhcnQgICAgPSAkY2hhcnQ7CiAgICB9Cn0K",
    "size": "33903"
}