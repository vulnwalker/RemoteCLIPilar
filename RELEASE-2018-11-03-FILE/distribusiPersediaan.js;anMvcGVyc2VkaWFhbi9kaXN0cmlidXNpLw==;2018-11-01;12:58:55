{
    "namaFile": "js\/persediaan\/distribusi\/distribusiPersediaan.js",
    "lastUpdate": "2018-11-01+12:58:55.42",
    "contentFile": "dmFyIGRpc3RyaWJ1c2lQZXJzZWRpYWFuRmlsdGVyU0tQRCA9IG5ldyBTa3BkQ2xzKHsKICBwcmVmaXg6ICJkaXN0cmlidXNpUGVyc2VkaWFhbiIsCiAgZm9ybU5hbWU6ICJkaXN0cmlidXNpUGVyc2VkaWFhbkZvcm0iLAogIHBpbGloVXJ1c2FuZnRlcjogZnVuY3Rpb24oKSB7CiAgICBkaXN0cmlidXNpUGVyc2VkaWFhbi5maWx0ZXJSZW5kZXIodHJ1ZSk7CiAgfSwKICBwaWxpaEJpZGFuZ0FmdGVyOiBmdW5jdGlvbigpIHsKICAgIGRpc3RyaWJ1c2lQZXJzZWRpYWFuLmZpbHRlclJlbmRlcih0cnVlKTsKICB9LAogIHBpbGloVW5pdEFmdGVyOiBmdW5jdGlvbigpIHsKICAgIGRpc3RyaWJ1c2lQZXJzZWRpYWFuLmZpbHRlclJlbmRlcih0cnVlKTsKICB9LAogIHBpbGloU3ViVW5pdEFmdGVyOiBmdW5jdGlvbigpIHsKICAgIGRpc3RyaWJ1c2lQZXJzZWRpYWFuLmZpbHRlclJlbmRlcih0cnVlKTsKICB9LAogIHBpbGloU2Vrc2lBZnRlcjogZnVuY3Rpb24oKSB7CiAgICBkaXN0cmlidXNpUGVyc2VkaWFhbi5maWx0ZXJSZW5kZXIodHJ1ZSk7CiAgfQp9KTsKdmFyIGRpc3RyaWJ1c2lQZXJzZWRpYWFuID0gbmV3IERhZnRhck9iajIoewogIHByZWZpeDogImRpc3RyaWJ1c2lQZXJzZWRpYWFuIiwKICB1cmw6ICJwZ1BlcnNlZGlhYW4ucGhwP1BnPWRpc3RyaWJ1c2lQZXJzZWRpYWFuIiwKICBmb3JtTmFtZTogImRpc3RyaWJ1c2lQZXJzZWRpYWFuRm9ybSIsCiAgZGlzdHJpYnVzaVBlcnNlZGlhYW5fZm9ybTogIjAiLCAvL2RlZmF1bHQganMgZGlzdHJpYnVzaVBlcnNlZGlhYW4KICBsb2FkaW5nOiBmdW5jdGlvbigpIHsKICAgIC8vYWxlcnQoJ2xvYWRpbmcnKTsKICAgIHRoaXMudG9wQmFyUmVuZGVyKCk7CiAgICB0aGlzLmZpbHRlclJlbmRlcigpOwogICAgdGhpcy5kYWZ0YXJSZW5kZXIoKTsKICAgIHRoaXMuc3VtSGFsUmVuZGVyKCk7CiAgfSwKICBmaWx0ZXJSZW5kZXJBZnRlcjogZnVuY3Rpb24oKSB7CiAgICAvLyB0aGlzLmRhZnRhclJlbmRlcigpOwogIH0sCiAgUmVwb3J0OiBmdW5jdGlvbigpIHsKICAgIHZhciBhRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucHJlZml4ICsgIl9mb3JtIik7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgdGhpcy5PbkVycm9yQ2xvc2UgPSBmYWxzZTsKICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAiaGlkZGVuIjsKICAgIHZhciBjb3ZlciA9IHRoaXMucHJlZml4ICsgIl9mb3Jtc2ltcGFuIjsKICAgIGFkZENvdmVyUGFnZTIoY292ZXIsIDEsIHRydWUsIGZhbHNlKTsKICAgIHZhciB1cmwyID0gdGhpcy51cmw7CiAgICAkLmFqYXgoewogICAgICB0eXBlOiAiUE9TVCIsCiAgICAgIGRhdGE6IHsKICAgICAgICBqZW5pc0tlZ2lhdGFuOiAkKCIjamVuaXNLZWdpYXRhbiIpLnZhbCgpLAogICAgICAgIGNldGFramFuZzogJCgiI2NldGFramFuZyIpLnZhbCgpLAogICAgICAgIHR0ZDogJCgiI3R0ZCIpLnZhbCgpLAogICAgICAgIGMxOiAkKCIjZmlsdGVyVXJ1c2FuIikudmFsKCksCiAgICAgICAgYzogJCgiI2ZpbHRlckJpZGFuZyIpLnZhbCgpLAogICAgICAgIGQ6ICQoIiNmaWx0ZXJTS1BEIikudmFsKCksCiAgICAgICAgZTogJCgiI2ZpbHRlclVuaXQiKS52YWwoKSwKICAgICAgICBlMTogJCgiI2ZpbHRlclN1YlVuaXQiKS52YWwoKQogICAgICB9LAogICAgICB1cmw6IHRoaXMudXJsICsgIiZ0aXBlPVJlcG9ydCIsCiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICB2YXIgcmVzcCA9IGV2YWwoIigiICsgZGF0YSArICIpIik7CiAgICAgICAgZGVsRWxlbShjb3Zlcik7CiAgICAgICAgaWYgKHJlc3AuZXJyID09ICIiKSB7CiAgICAgICAgICBhRm9ybS5hY3Rpb24gPQogICAgICAgICAgICB1cmwyICsKICAgICAgICAgICAgIiZ0aXBlPSIgKwogICAgICAgICAgICByZXNwLmNvbnRlbnQudG8gKwogICAgICAgICAgICAiJnVydXNhbj0iICsKICAgICAgICAgICAgJCgiI2ZpbHRlclVydXNhbiIpLnZhbCgpICsKICAgICAgICAgICAgIiZiaWRhbmc9IiArCiAgICAgICAgICAgICQoIiNmaWx0ZXJCaWRhbmciKS52YWwoKSArCiAgICAgICAgICAgICImc2twZD0iICsKICAgICAgICAgICAgJCgiI2ZpbHRlclNLUEQiKS52YWwoKSArCiAgICAgICAgICAgICImdW5pdD0iICsKICAgICAgICAgICAgJCgiI2ZpbHRlclVuaXQiKS52YWwoKSArCiAgICAgICAgICAgICImc3VidW5pdD0iICsKICAgICAgICAgICAgJCgiI2ZpbHRlclN1YlVuaXQiKS52YWwoKSArCiAgICAgICAgICAgICIma290YT0iICsKICAgICAgICAgICAgcmVzcC5jb250ZW50Lm5hbWFQZW1kYSArCiAgICAgICAgICAgICImdGFuZ2dhbENldGFrPSIgKwogICAgICAgICAgICByZXNwLmNvbnRlbnQuY2V0YWtqYW5nICsKICAgICAgICAgICAgIiZ0dGQ9IiArCiAgICAgICAgICAgIHJlc3AuY29udGVudC50dGQ7CiAgICAgICAgICBhRm9ybS50YXJnZXQgPSAiX2JsYW5rIjsKICAgICAgICAgIGFGb3JtLnN1Ym1pdCgpOwogICAgICAgICAgYUZvcm0udGFyZ2V0ID0gIiI7CiAgICAgICAgICBtZS5DbG9zZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydChyZXNwLmVycik7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIHByb2dyYW1DaGFuZ2VkOiBmdW5jdGlvbigpIHsKICAgIHZhciBhcnJheVAgPSAkKCIjcCIpCiAgICAgIC52YWwoKQogICAgICAuc3BsaXQoIi4iKTsKICAgIHZhciBiayA9IGFycmF5UFswXTsKICAgIHZhciBjayA9IGFycmF5UFsxXTsKICAgIHZhciBoaWRkZW5QID0gYXJyYXlQWzJdOwoKICAgICQoIiNiayIpLnZhbChiayk7CiAgICAkKCIjY2siKS52YWwoY2spOwogICAgJCgiI2hpZGRlblAiKS52YWwoaGlkZGVuUCk7CiAgICAkKCIjcSIpLnZhbCgiIik7CiAgICBkaXN0cmlidXNpUGVyc2VkaWFhbi5yZWZyZXNoTGlzdCh0cnVlKTsKICB9LAogIGRldGFpbDogZnVuY3Rpb24oKSB7CiAgICAvL2FsZXJ0KCdkZXRhaWwnKTsKICAgIHZhciBtZSA9IHRoaXM7CiAgICBlcnJtc2cgPSB0aGlzLkNla0NoZWNrYm94KCk7CiAgICBpZiAoZXJybXNnID09ICIiKSB7CiAgICAgIHZhciBib3ggPSB0aGlzLkdldENieENoZWNrZWQoKTsKICAgICAgLy9Vc2VyQWt0aXZpdGFzRGV0LmdlbkRldGFpbCgpOwogICAgfSBlbHNlIHsKICAgICAgYWxlcnQoZXJybXNnKTsKICAgIH0KICB9LAogIHBpbGloQmlkYW5nOiBmdW5jdGlvbigpIHsKICAgIGRpc3RyaWJ1c2lQZXJzZWRpYWFuLnJlZnJlc2hMaXN0KHRydWUpOwogIH0sCiAgQmlkYW5nQWZ0ZXIyOiBmdW5jdGlvbigpIHsKICAgIGRpc3RyaWJ1c2lQZXJzZWRpYWFuLnJlZnJlc2hMaXN0KHRydWUpOwogIH0sCiAgY29tYm9TS1BEQ2hhbmdlZDogZnVuY3Rpb24oKSB7CiAgICBkaXN0cmlidXNpUGVyc2VkaWFhbi5yZWZyZXNoTGlzdCh0cnVlKTsKICB9LAogIENhcmlNb2R1bDogZnVuY3Rpb24oKSB7CiAgICB2YXIgbWUgPSB0aGlzOwoKICAgIHBvcHVwTW9kdWwuZWxfbmFtYU1vZHVsID0gIm5hbWFNb2R1bCI7CiAgICBwb3B1cE1vZHVsLmVsX2lkTW9kdWwgPSAiaWRNb2R1bCI7CiAgICAvKgkJUmVmQmFyYW5nQnV0dWguZWxfbmFtYV9iYXJhbmc9ICduYW1hX2JhcmFuZyc7CQkqLwogICAgcG9wdXBNb2R1bC53aW5kb3dTYXZlQWZ0ZXIgPSBmdW5jdGlvbigpIHt9OwogICAgcG9wdXBNb2R1bC53aW5kb3dTaG93KCk7CiAgfSwKCiAgaGlzdG9yaTogZnVuY3Rpb24oaWQpIHsKICAgIHZhciBtZSA9IHRoaXM7CgogICAgcG9wdXBIaXN0b3JpLmVsX25hbWFIaXN0b3JpID0gIm5hbWFIaXN0b3JpIjsKICAgIHBvcHVwSGlzdG9yaS5lbF9pZEhpc3RvcmkgPSAiaWRIaXN0b3JpIjsKICAgIHBvcHVwSGlzdG9yaS53aW5kb3dTYXZlQWZ0ZXIgPSBmdW5jdGlvbigpIHt9OwogICAgcG9wdXBIaXN0b3JpLndpbmRvd1Nob3coaWQpOwogIH0sCiAgZGFmdGFyUmVuZGVyOiBmdW5jdGlvbigpIHsKICAgIHZhciBtZSA9IHRoaXM7IC8vcmVuZGVyIGRhZnRhcgogICAgYWRkQ292ZXJQYWdlMigiZGFmdGFyX2NvdmVyIiwgMSwgdHJ1ZSwgdHJ1ZSwgewogICAgICByZW5kZXJUbzogdGhpcy5wcmVmaXggKyAiX2NvbnRfZGFmdGFyIiwKICAgICAgaW1nc3JjOiAiaW1hZ2VzL3dhaXQuZ2lmIiwKICAgICAgc3R5bGU6IHsgcG9zaXRpb246ICJhYnNvbHV0ZSIsIHRvcDogIjUiLCBsZWZ0OiAiNSIgfQogICAgfSk7CgogICAgJC5hamF4KHsKICAgICAgdXJsOiB0aGlzLnVybCArICImdGlwZT1kYWZ0YXIiLAogICAgICB0eXBlOiAiUE9TVCIsCiAgICAgIGRhdGE6ICQoIiMiICsgdGhpcy5mb3JtTmFtZSkuc2VyaWFsaXplKCksCiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICB2YXIgcmVzcCA9IGV2YWwoIigiICsgZGF0YSArICIpIik7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobWUucHJlZml4ICsgIl9jb250X2RhZnRhciIpLmlubmVySFRNTCA9CiAgICAgICAgICByZXNwLmNvbnRlbnQ7CgogICAgICAgIG1lLnN1bUhhbFJlbmRlcigpOwogICAgICB9CiAgICB9KTsKICB9LAogIHBpbGloUGFuZ2thdDogZnVuY3Rpb24oKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgJC5hamF4KHsKICAgICAgdXJsOiB0aGlzLnVybCArICImdGlwZT1waWxpaFBhbmdrYXQiLAogICAgICB0eXBlOiAiUE9TVCIsCiAgICAgIGRhdGE6IHsKICAgICAgICBjMTogJCgiI2ZpbHRlclVydXNhbiIpLnZhbCgpLAogICAgICAgIGM6ICQoIiNmaWx0ZXJCaWRhbmciKS52YWwoKSwKICAgICAgICBkOiAkKCIjZmlsdGVyU0tQRCIpLnZhbCgpLAogICAgICAgIGU6ICQoIiNmaWx0ZXJVbml0IikudmFsKCksCiAgICAgICAgZTE6ICQoIiNmaWx0ZXJTdWJVbml0IikudmFsKCksCiAgICAgICAgZGMxOiAkKCIjZGMxIikudmFsKCksCiAgICAgICAgZGM6ICQoIiNkYyIpLnZhbCgpLAogICAgICAgIGRkOiAkKCIjZGQiKS52YWwoKSwKICAgICAgICBrYXRlZ29yaTogJCgiI2thdGVnb3JpIikudmFsKCksCiAgICAgICAgbmFtYXBlZ2F3YWk6ICQoIiNuYW1hcGVnYXdhaSIpLnZhbCgpLAogICAgICAgIG5pcHBlZ2F3YWk6ICQoIiNuaXBwZWdhd2FpIikudmFsKCksCiAgICAgICAgcGFuZ2thdGFraGlyOiAkKCIjcGFuZ2thdGFraGlyIikudmFsKCksCiAgICAgICAgZ29sYW5nX2FraGlyOiAkKCIjZ29sYW5nX2FraGlyIikudmFsKCksCiAgICAgICAgamFiYXRhbjogJCgiI2phYmF0YW4iKS52YWwoKSwKICAgICAgICBlc2Vsb25fYWtoaXI6ICQoIiNlc2Vsb25fYWtoaXIiKS52YWwoKQogICAgICB9LAogICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgdmFyIHJlc3AgPSBldmFsKCIoIiArIGRhdGEgKyAiKSIpOwoKICAgICAgICBpZiAocmVzcC5lcnIgPT0gIiIpIHsKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJnb2xhbmdfYWtoaXIiKS52YWx1ZSA9IHJlc3AuY29udGVudDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQocmVzcC5lcnIpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICBTaW1wYW5UVEQ6IGZ1bmN0aW9uKCkgewogICAgdmFyIG1lID0gdGhpczsKICAgIHRoaXMuT25FcnJvckNsb3NlID0gZmFsc2U7CiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gImhpZGRlbiI7CiAgICB2YXIgY292ZXIgPSAicmVuamFBc2V0IiArICJfZm9ybXNpbXBhbiI7CiAgICBhZGRDb3ZlclBhZ2UyKGNvdmVyLCAxLCB0cnVlLCBmYWxzZSk7CiAgICAkLmFqYXgoewogICAgICB0eXBlOiAiUE9TVCIsCiAgICAgIGRhdGE6IHsKICAgICAgICBqZW5pc0tlZ2lhdGFuOiAkKCIjamVuaXNLZWdpYXRhbiIpLnZhbCgpLAogICAgICAgIGMxOiAkKCIjZmlsdGVyVXJ1c2FuIikudmFsKCksCiAgICAgICAgYzogJCgiI2ZpbHRlckJpZGFuZyIpLnZhbCgpLAogICAgICAgIGQ6ICQoIiNmaWx0ZXJTS1BEIikudmFsKCksCiAgICAgICAgZTogJCgiI2ZpbHRlclVuaXQiKS52YWwoKSwKICAgICAgICBlMTogJCgiI2ZpbHRlclN1YlVuaXQiKS52YWwoKSwKICAgICAgICBkYzE6ICQoIiNkYzEiKS52YWwoKSwKICAgICAgICBkYzogJCgiI2RjIikudmFsKCksCiAgICAgICAgZGQ6ICQoIiNkZCIpLnZhbCgpLAogICAgICAgIGthdGVnb3JpOiAkKCIja2F0ZWdvcmkiKS52YWwoKSwKICAgICAgICBuYW1hcGVnYXdhaTogJCgiI25hbWFwZWdhd2FpIikudmFsKCksCiAgICAgICAgbmlwcGVnYXdhaTogJCgiI25pcHBlZ2F3YWkiKS52YWwoKSwKICAgICAgICBwYW5na2F0YWtoaXI6ICQoIiNwYW5na2F0YWtoaXIiKS52YWwoKSwKICAgICAgICBnb2xhbmdfYWtoaXI6ICQoIiNnb2xhbmdfYWtoaXIiKS52YWwoKSwKICAgICAgICBqYWJhdGFuOiAkKCIjamFiYXRhbiIpLnZhbCgpLAogICAgICAgIGVzZWxvbl9ha2hpcjogJCgiI2VzZWxvbl9ha2hpciIpLnZhbCgpCiAgICAgIH0sCiAgICAgIHVybDogdGhpcy51cmwgKyAiJnRpcGU9c2ltcGFuVFREIiwKICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICAgIHZhciByZXNwID0gZXZhbCgiKCIgKyBkYXRhICsgIikiKTsKICAgICAgICBkZWxFbGVtKGNvdmVyKTsKICAgICAgICAvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvdmVyKS5pbm5lckhUTUwgPSByZXNwLmNvbnRlbnQ7CiAgICAgICAgaWYgKHJlc3AuZXJyID09ICIiKSB7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidHRkIikuaW5uZXJIVE1MID0gcmVzcC5jb250ZW50LmNvbWJvdHRkOwogICAgICAgICAgZGlzdHJpYnVzaVBlcnNlZGlhYW4uQ2xvc2UoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQocmVzcC5lcnIpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICBCYXJ1VFREOiBmdW5jdGlvbigpIHsKICAgIHZhciBtZSA9IHRoaXM7CiAgICB2YXIgZXJyID0gIiI7CiAgICB2YXIgdXJ1c2FuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZpbHRlclVydXNhbiIpLnZhbHVlOwogICAgdmFyIGJpZGFuZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmaWx0ZXJCaWRhbmciKS52YWx1ZTsKICAgIHZhciBza3BkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZpbHRlclNLUEQiKS52YWx1ZTsKICAgIHZhciB1bml0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZpbHRlclVuaXQiKS52YWx1ZTsKICAgIHZhciBzdWJ1bml0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZpbHRlclN1YlVuaXQiKS52YWx1ZTsKCiAgICB2YXIgY292ZXIgPSB0aGlzLnByZWZpeCArICJfZm9ybWNvdmVyIjsKICAgIGlmIChlcnIgPT0gIiIpIHsKICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICJoaWRkZW4iOwogICAgICBhZGRDb3ZlclBhZ2UyKGNvdmVyLCA5OTksIHRydWUsIGZhbHNlKTsKICAgICAgJC5hamF4KHsKICAgICAgICB0eXBlOiAiUE9TVCIsCiAgICAgICAgZGF0YToKICAgICAgICAgICQoIiMiICsgdGhpcy5mb3JtTmFtZSkuc2VyaWFsaXplKCkgKwogICAgICAgICAgIiZ1cnVzYW49IiArCiAgICAgICAgICB1cnVzYW4gKwogICAgICAgICAgIiZiaWRhbmc9IiArCiAgICAgICAgICBiaWRhbmcgKwogICAgICAgICAgIiZza3BkPSIgKwogICAgICAgICAgc2twZCArCiAgICAgICAgICAiJnVuaXQ9IiArCiAgICAgICAgICB1bml0ICsKICAgICAgICAgICImc3VidW5pdD0iICsKICAgICAgICAgIHN1YnVuaXQsCiAgICAgICAgdXJsOiB0aGlzLnVybCArICImdGlwZT1mb3JtQmFydVRURCIsCiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgZGVsRWxlbShjb3Zlcik7CiAgICAgICAgICB2YXIgcmVzcCA9IGV2YWwoIigiICsgZGF0YSArICIpIik7CiAgICAgICAgICBpZiAocmVzcC5lcnIgPT0gIiIpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY292ZXIpLmlubmVySFRNTCA9IHJlc3AuY29udGVudDsKICAgICAgICAgICAgbWUuQWZ0ZXJGb3JtQmFydShyZXNwKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsZXJ0KHJlc3AuZXJyKTsKCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAiYXV0byI7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGFsZXJ0KGVycik7CiAgICB9CiAgfSwKICBCYXJ1OiBmdW5jdGlvbigpIHsKICAgIHZhciBtZSA9IHRoaXM7CiAgICBpZiAoJCgiI2ZpbHRlclVydXNhbiIpLnZhbCgpID09ICIwIikgewogICAgICBhbGVydCgiUGlsaWggVXJ1c2FuIik7CiAgICB9IGVsc2UgaWYgKCQoIiNmaWx0ZXJCaWRhbmciKS52YWwoKSA9PSAiMDAiKSB7CiAgICAgIGFsZXJ0KCJQaWxpaCBCaWRhbmciKTsKICAgIH0gZWxzZSBpZiAoJCgiI2ZpbHRlclNLUEQiKS52YWwoKSA9PSAiMDAiKSB7CiAgICAgIGFsZXJ0KCJQaWxpaCBTS1BEIik7CiAgICB9IGVsc2UgaWYgKCQoIiNmaWx0ZXJVbml0IikudmFsKCkgPT0gIjAwIikgewogICAgICBhbGVydCgiUGlsaWggVW5pdCIpOwogICAgfSBlbHNlIGlmICgkKCIjZmlsdGVyU3ViVW5pdCIpLnZhbCgpID09ICIwMDAiKSB7CiAgICAgIGFsZXJ0KCJQaWxpaCBTdWIgVW5pdCIpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHNrcGQgPQogICAgICAgICQoIiNmaWx0ZXJVcnVzYW4iKS52YWwoKSArCiAgICAgICAgIi4iICsKICAgICAgICAkKCIjZmlsdGVyQmlkYW5nIikudmFsKCkgKwogICAgICAgICIuIiArCiAgICAgICAgJCgiI2ZpbHRlclNLUEQiKS52YWwoKSArCiAgICAgICAgIi4iICsKICAgICAgICAkKCIjZmlsdGVyVW5pdCIpLnZhbCgpICsKICAgICAgICAiLiIgKwogICAgICAgICQoIiNmaWx0ZXJTdWJVbml0IikudmFsKCk7CgogICAgICB2YXIgYUZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmZvcm1OYW1lKTsKICAgICAgJC5hamF4KHsKICAgICAgICB0eXBlOiAiUE9TVCIsCiAgICAgICAgZGF0YTogewogICAgICAgICAgYzE6ICQoIiNmaWx0ZXJVcnVzYW4iKS52YWwoKSwKICAgICAgICAgIGM6ICQoIiNmaWx0ZXJCaWRhbmciKS52YWwoKSwKICAgICAgICAgIGQ6ICQoIiNmaWx0ZXJTS1BEIikudmFsKCksCiAgICAgICAgICBlOiAkKCIjZmlsdGVyVW5pdCIpLnZhbCgpLAogICAgICAgICAgZTE6ICQoIiNmaWx0ZXJTdWJVbml0IikudmFsKCkKICAgICAgICB9LAogICAgICAgIHVybDogdGhpcy51cmwgKyAiJnRpcGU9bmV3VGFiIiwKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICB2YXIgcmVzcCA9IGV2YWwoIigiICsgZGF0YSArICIpIik7CiAgICAgICAgICBpZiAocmVzcC5lcnIgPT0gIiIpIHsKICAgICAgICAgICAgYUZvcm0uYWN0aW9uID0KICAgICAgICAgICAgICAicGdQZXJzZWRpYWFuLnBocD9QZz1kaXN0cmlidXNpUGVyc2VkaWFhbl9pbnMmc2twZD0iICsKICAgICAgICAgICAgICBza3BkICsKICAgICAgICAgICAgICAiJm5vbW9yPSIgKwogICAgICAgICAgICAgIHJlc3AuY29udGVudC5ub21vcjsKICAgICAgICAgICAgYUZvcm0udGFyZ2V0ID0gIl9ibGFuayI7CiAgICAgICAgICAgIGFGb3JtLnN1Ym1pdCgpOwogICAgICAgICAgICBhRm9ybS50YXJnZXQgPSAiIjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsZXJ0KHJlc3AuZXJyKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCiAgSW5mbzogZnVuY3Rpb24oKSB7CiAgICB2YXIgYUZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmZvcm1OYW1lKTsKICAgICQuYWpheCh7CiAgICAgIHVybDogdGhpcy51cmwgKyAiJnRpcGU9aHVibGEiLAogICAgICB0eXBlOiAiUE9TVCIsCiAgICAgIGRhdGE6ICQoIiMiICsgdGhpcy5mb3JtTmFtZSkuc2VyaWFsaXplKCksCiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICB2YXIgcmVzcCA9IGV2YWwoIigiICsgZGF0YSArICIpIik7CiAgICAgICAgaWYgKHJlc3AuZXJyID09ICIiKSB7CiAgICAgICAgICB2YXIga29kZVJlayA9IHJlc3AuY29udGVudC5rb2RlUmVrOwogICAgICAgICAgYUZvcm0uYWN0aW9uID0gInBnUGVyc2VkaWFhbi5waHA\/UGc9YWxva2FzaURwYSI7CiAgICAgICAgICBhRm9ybS50YXJnZXQgPSAiX2JsYW5rIjsKICAgICAgICAgIGFGb3JtLnN1Ym1pdCgpOwogICAgICAgICAgYUZvcm0udGFyZ2V0ID0gIiI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KHJlc3AuZXJyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgdW5sb2NrRmluZFJla2VuaW5nOiBmdW5jdGlvbigpIHsKICAgIHZhciBtZSA9IHRoaXM7CiAgICBpZiAoJCgiI2NtYkplbmlzUktBRm9ybSIpLnZhbCgpID09ICIiKSB7CiAgICAgICQoIiNmaW5kUmVrZW5pbmciKS5hdHRyKCJkaXNhYmxlZCIsIHRydWUpOwogICAgfSBlbHNlIHsKICAgICAgJCgiI2ZpbmRSZWtlbmluZyIpLmF0dHIoImRpc2FibGVkIiwgZmFsc2UpOwogICAgICAkKCIjZmluZFJla2VuaW5nIikuYXR0cigKICAgICAgICAib25jbGljayIsCiAgICAgICAgImRpc3RyaWJ1c2lQZXJzZWRpYWFuLmZpbmRSZWtlbmluZygnIiArCiAgICAgICAgICAkKCIjY21iSmVuaXNSS0FGb3JtIikudmFsKCkgKwogICAgICAgICAgIicpOyIKICAgICAgKTsKICAgIH0KICB9LAogIEVkaXQ6IGZ1bmN0aW9uKCkgewogICAgdmFyIG1lID0gdGhpczsKICAgIGVycm1zZyA9IHRoaXMuQ2VrQ2hlY2tib3goKTsKICAgIHZhciBjb3ZlciA9IHRoaXMucHJlZml4ICsgIl9mb3JtY292ZXIiOwogICAgYWRkQ292ZXJQYWdlMihjb3ZlciwgMiwgdHJ1ZSwgZmFsc2UpOwogICAgaWYgKGVycm1zZyA9PSAiIikgewogICAgICB2YXIgYm94ID0gdGhpcy5HZXRDYnhDaGVja2VkKCk7CiAgICAgIHZhciBhRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZm9ybU5hbWUpOwogICAgICAkLmFqYXgoewogICAgICAgIHVybDogdGhpcy51cmwgKyAiJnRpcGU9ZWRpdFRhYiIsCiAgICAgICAgdHlwZTogIlBPU1QiLAogICAgICAgIGRhdGE6ICQoIiMiICsgdGhpcy5mb3JtTmFtZSkuc2VyaWFsaXplKCksCiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgZGVsRWxlbShjb3Zlcik7CiAgICAgICAgICB2YXIgcmVzcCA9IGV2YWwoIigiICsgZGF0YSArICIpIik7CiAgICAgICAgICBpZiAocmVzcC5lcnIgPT0gIiIpIHsKICAgICAgICAgICAgYUZvcm0uYWN0aW9uID0KICAgICAgICAgICAgICAicGdQZXJzZWRpYWFuLnBocD9QZz1kaXN0cmlidXNpUGVyc2VkaWFhbl9pbnMmc2twZD0iICsKICAgICAgICAgICAgICByZXNwLmNvbnRlbnQuc2twZCArCiAgICAgICAgICAgICAgIiZub21vcj0iICsKICAgICAgICAgICAgICByZXNwLmNvbnRlbnQubm9tb3I7CiAgICAgICAgICAgIGFGb3JtLnRhcmdldCA9ICJfYmxhbmsiOwogICAgICAgICAgICBhRm9ybS5zdWJtaXQoKTsKICAgICAgICAgICAgYUZvcm0udGFyZ2V0ID0gIiI7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGVydChyZXNwLmVycik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGFsZXJ0KGVycm1zZyk7CiAgICAgIGRlbEVsZW0oY292ZXIpOwogICAgfQogIH0sCiAgUG9zdGluZzogZnVuY3Rpb24oKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgZXJybXNnID0gdGhpcy5DZWtDaGVja2JveCgpOwogICAgaWYgKGVycm1zZyA9PSAiIikgewogICAgICB2YXIgYm94ID0gdGhpcy5HZXRDYnhDaGVja2VkKCk7CiAgICAgIHZhciBjb3ZlciA9IHRoaXMucHJlZml4ICsgIl9mb3JtY292ZXIiOwogICAgICBhZGRDb3ZlclBhZ2UyKGNvdmVyLCAyLCB0cnVlLCBmYWxzZSk7CiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAiaGlkZGVuIjsKICAgICAgJC5hamF4KHsKICAgICAgICB0eXBlOiAiUE9TVCIsCiAgICAgICAgZGF0YTogJCgiIyIgKyB0aGlzLmZvcm1OYW1lKS5zZXJpYWxpemUoKSwKICAgICAgICB1cmw6IHRoaXMudXJsICsgIiZ0aXBlPVBvc3RpbmciLAogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgIHZhciByZXNwID0gZXZhbCgiKCIgKyBkYXRhICsgIikiKTsKICAgICAgICAgIGlmIChyZXNwLmVyciA9PSAiIikgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb3ZlcikuaW5uZXJIVE1MID0gcmVzcC5jb250ZW50OwogICAgICAgICAgICBtZS5BZnRlckZvcm1FZGl0KHJlc3ApOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWxlcnQocmVzcC5lcnIpOwogICAgICAgICAgICBkZWxFbGVtKGNvdmVyKTsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICJhdXRvIjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgYWxlcnQoZXJybXNnKTsKICAgIH0KICB9LAoKICBzYXZlUG9zdGluZzogZnVuY3Rpb24oKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgdGhpcy5PbkVycm9yQ2xvc2UgPSBmYWxzZTsKICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAiaGlkZGVuIjsKICAgIHZhciBjb3ZlciA9IHRoaXMucHJlZml4ICsgIl9mb3Jtc2ltcGFuIjsKICAgIGFkZENvdmVyUGFnZTIoY292ZXIsIDEsIHRydWUsIGZhbHNlKTsKICAgICQuYWpheCh7CiAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgZGF0YTogJCgiIyIgKyB0aGlzLnByZWZpeCArICJfZm9ybSIpLnNlcmlhbGl6ZSgpLAogICAgICB1cmw6IHRoaXMudXJsICsgIiZ0aXBlPXNhdmVQb3N0aW5nIiwKICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICAgIHZhciByZXNwID0gZXZhbCgiKCIgKyBkYXRhICsgIikiKTsKICAgICAgICBkZWxFbGVtKGNvdmVyKTsKICAgICAgICBpZiAocmVzcC5lcnIgPT0gIiIpIHsKICAgICAgICAgIHZhciBjb3ZlcjIgPSAicGVsYXBvcmFuUGVyc2VkaWFhbl9mb3JtY292ZXJfbG9hZCI7CiAgICAgICAgICBhZGRDb3ZlclBhZ2UyKGNvdmVyMiwgMjAsIHRydWUsIGZhbHNlKTsKICAgICAgICAgIG1lLnByb3Nlc1Bvc3RpbmcoMCwgImJlbG9tIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KHJlc3AuZXJyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgcHJvc2VzUG9zdGluZzogZnVuY3Rpb24gKHVydXRhbiwgc3RhdHVzU2VsZXNhaSkgewogICAgICB2YXIgbWUgPSB0aGlzOwogICAgICB2YXIgY292ZXIgPSB0aGlzLnByZWZpeCArICJfZm9ybWNvdmVyIjsKICAgICAgdmFyIG9iaiA9IEpTT04ucGFyc2UoJCgiI2FycmF5RGF0YVBvc3QiKS52YWwoKSk7CiAgICAgIHZhciBjaGVja2JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzdGF0dXNQb3N0aW5nIik7CiAgICAgIHZhciBjaGVja2JveFN0YXR1cyA9ICIiOwogICAgICBpZihjaGVja2JveC5jaGVja2VkKXsKICAgICAgICBjaGVja2JveFN0YXR1cyA9ICJvbiI7CiAgICAgIH1lbHNlewogICAgICAgIGNoZWNrYm94U3RhdHVzID0gIiI7CiAgICAgIH0KICAgICAgaWYgKHN0YXR1c1NlbGVzYWkgIT0gIk9LIikgewogICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICB0eXBlOiAiUE9TVCIsCiAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICBub21vclBvc3Q6IHVydXRhbiwKICAgICAgICAgICAgICAgICAgaWREaXN0cmlidXNpOiAkKCIjaWREaXN0cmlidXNpIikudmFsKCksCiAgICAgICAgICAgICAgICAgIGlkUG9zdGluZzogb2JqW3VydXRhbl0sCiAgICAgICAgICAgICAgICAgIHN0YXR1c1Bvc3Rpbmc6IGNoZWNrYm94U3RhdHVzLAogICAgICAgICAgICAgICAgICBqdW1sYWhEYXRhOiAkKCIjbGVuZ3RoUHJvY2Nlc3MiKS52YWwoKSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHVybDogdGhpcy51cmwgKyAiJnRpcGU9cHJvc2VzUG9zdGluZyIsCiAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgdmFyIHJlc3AgPSBldmFsKCIoIiArIGRhdGEgKyAiKSIpOwogICAgICAgICAgICAgICAgICBpZiAocmVzcC5lcnIgPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzdGF0dXN0eHQiKS5zdHlsZS53aWR0aCA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcC5jb250ZW50LnBlcnNlbiArICIlIjsKICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzdGF0dXN0eHQiKS5pbm5lckhUTUwgPQogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3AuY29udGVudC5wZXJzZW4gKyAiJSI7CiAgICAgICAgICAgICAgICAgICAgICAvLyAkKCcjbG9nQ2xvc2luZycpLnZhbCgkKCcjbG9nQ2xvc2luZycpLnZhbCgpICsgJ1xuJyArIHJlc3AuY29udGVudC5sb2dDbG9zaW5nKTsKICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciB0ZXh0QXJlYU9iamVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dDbG9zaW5nJyk7CiAgICAgICAgICAgICAgICAgICAgICAvLyB0ZXh0QXJlYU9iamVjdC5zY3JvbGxUb3AgPSB0ZXh0QXJlYU9iamVjdC5zY3JvbGxIZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICB1cnV0YW4gPSB1cnV0YW4gKyAxOwogICAgICAgICAgICAgICAgICAgICAgbWUucHJvc2VzUG9zdGluZygKICAgICAgICAgICAgICAgICAgICAgICAgICB1cnV0YW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcC5jb250ZW50LnN0YXR1c1NlbGVzYWkKICAgICAgICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgYWxlcnQocmVzcC5lcnIpOwogICAgICAgICAgICAgICAgICAgICAgJCgnI2xvZ0Nsb3NpbmcnKS52YWwocmVzcC5lcnIpOwogICAgICAgICAgICAgICAgICAgICAgZGVsRWxlbSgicGVsYXBvcmFuUGVyc2VkaWFhbl9mb3JtY292ZXJfbG9hZCIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkZWxFbGVtKCJwZWxhcG9yYW5QZXJzZWRpYWFuX2Zvcm1jb3Zlcl9sb2FkIik7CiAgICAgICAgICBhbGVydCgiUG9zdGluZyBTZWxlc2FpICEiKTsKICAgICAgICAgIG1lLkNsb3NlKCk7CiAgICAgICAgICBtZS5yZWZyZXNoTGlzdCh0cnVlKTsKICAgICAgfQogIH0sCiAgYmFudHVWb2x1bWVCYXJhbmc6IGZ1bmN0aW9uKGlkKSB7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgKICAgICAgImJhbnR1Vm9sdW1lQmFyYW5nIiArIGlkCiAgICApLmlubmVySFRNTCA9IGRpc3RyaWJ1c2lQZXJzZWRpYWFuLmZvcm1hdEN1cnJlbmN5MigKICAgICAgJCgiI3ZvbHVtZUJhcmFuZyIgKyBpZCkudmFsKCkKICAgICk7CiAgICB2YXIgaGFzaWxLYWxpID0KICAgICAgTnVtYmVyKCQoIiN2b2x1bWVCYXJhbmciICsgaWQpLnZhbCgpKSAqCiAgICAgIE51bWJlcigkKCIjc2F0dWFuSGFyZ2EiICsgaWQpLnZhbCgpKTsKICAgICQoIiNzcGFuSnVtbGFoSGFyZ2EiICsgaWQpLnRleHQoCiAgICAgIGRpc3RyaWJ1c2lQZXJzZWRpYWFuLmZvcm1hdEN1cnJlbmN5KGhhc2lsS2FsaSkKICAgICk7CiAgfSwKICBiYW50dVNhdHVhbkhhcmdhOiBmdW5jdGlvbihpZCkgewogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoCiAgICAgICJiYW50dVNhdHVhbkhhcmdhIiArIGlkCiAgICApLmlubmVySFRNTCA9IGRpc3RyaWJ1c2lQZXJzZWRpYWFuLmZvcm1hdEN1cnJlbmN5KAogICAgICAkKCIjc2F0dWFuSGFyZ2EiICsgaWQpLnZhbCgpCiAgICApOwogICAgdmFyIGhhc2lsS2FsaSA9CiAgICAgIE51bWJlcigkKCIjdm9sdW1lQmFyYW5nIiArIGlkKS52YWwoKSkgKgogICAgICBOdW1iZXIoJCgiI3NhdHVhbkhhcmdhIiArIGlkKS52YWwoKSk7CiAgICAkKCIjc3Bhbkp1bWxhaEhhcmdhIiArIGlkKS50ZXh0KAogICAgICBkaXN0cmlidXNpUGVyc2VkaWFhbi5mb3JtYXRDdXJyZW5jeShoYXNpbEthbGkpCiAgICApOwogIH0sCgogIGZvcm1hdEN1cnJlbmN5OiBmdW5jdGlvbihudW0pIHsKICAgIG51bSA9IG51bS50b1N0cmluZygpLnJlcGxhY2UoL1wkfFwsL2csICIiKTsKICAgIGlmIChpc05hTihudW0pKSBudW0gPSAiMCI7CiAgICBzaWduID0gbnVtID09IChudW0gPSBNYXRoLmFicyhudW0pKTsKICAgIG51bSA9IE1hdGguZmxvb3IobnVtICogMTAwICsgMC41MDAwMDAwMDAwMSk7CiAgICBjZW50cyA9IG51bSAlIDEwMDsKICAgIG51bSA9IE1hdGguZmxvb3IobnVtIC8gMTAwKS50b1N0cmluZygpOwogICAgaWYgKGNlbnRzIDwgMTApIGNlbnRzID0gIjAiICsgY2VudHM7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IE1hdGguZmxvb3IoKG51bS5sZW5ndGggLSAoMSArIGkpKSAvIDMpOyBpKyspCiAgICAgIG51bSA9CiAgICAgICAgbnVtLnN1YnN0cmluZygwLCBudW0ubGVuZ3RoIC0gKDQgKiBpICsgMykpICsKICAgICAgICAiLiIgKwogICAgICAgIG51bS5zdWJzdHJpbmcobnVtLmxlbmd0aCAtICg0ICogaSArIDMpKTsKICAgIHJldHVybiAoc2lnbiA\/ICIiIDogIi0iKSArICIiICsgbnVtICsgIiwiICsgY2VudHM7CiAgfSwKICBmb3JtYXRDdXJyZW5jeTI6IGZ1bmN0aW9uKG51bSkgewogICAgbnVtID0gbnVtLnRvU3RyaW5nKCkucmVwbGFjZSgvXCR8XCwvZywgIiIpOwogICAgaWYgKGlzTmFOKG51bSkpIG51bSA9ICIwIjsKICAgIHNpZ24gPSBudW0gPT0gKG51bSA9IE1hdGguYWJzKG51bSkpOwogICAgbnVtID0gTWF0aC5mbG9vcihudW0gKiAxMDAgKyAwLjUwMDAwMDAwMDAxKTsKICAgIGNlbnRzID0gbnVtICUgMTAwOwogICAgbnVtID0gTWF0aC5mbG9vcihudW0gLyAxMDApLnRvU3RyaW5nKCk7CiAgICBpZiAoY2VudHMgPCAxMCkgY2VudHMgPSAiMCIgKyBjZW50czsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTWF0aC5mbG9vcigobnVtLmxlbmd0aCAtICgxICsgaSkpIC8gMyk7IGkrKykKICAgICAgbnVtID0KICAgICAgICBudW0uc3Vic3RyaW5nKDAsIG51bS5sZW5ndGggLSAoNCAqIGkgKyAzKSkgKwogICAgICAgICIuIiArCiAgICAgICAgbnVtLnN1YnN0cmluZyhudW0ubGVuZ3RoIC0gKDQgKiBpICsgMykpOwogICAgcmV0dXJuIChzaWduID8gIiIgOiAiLSIpICsgIiIgKyBudW07CiAgfSwKCiAgYmFudHU6IGZ1bmN0aW9uKCkgewogICAgJCgiI2JhbnR1IikudGV4dCgKICAgICAgIlJwLiAiICsgZGlzdHJpYnVzaVBlcnNlZGlhYW4uZm9ybWF0Q3VycmVuY3koJCgiI2hhcmdhU2F0dWFuIikudmFsKCkpCiAgICApOwogIH0sCgogIGZpbmRSZWtlbmluZzogZnVuY3Rpb24oamVuaXNSa2EpIHsKICAgIHZhciBtZSA9IHRoaXM7CiAgICB2YXIgZmlsdGVyUmVrID0gIiI7CiAgICBpZiAoamVuaXNSa2EgPT0gIjIuMi4xIikgewogICAgICBmaWx0ZXJSZWsgPSAiUktBIDIuMi4xIjsKICAgIH0gZWxzZSBpZiAoamVuaXNSa2EgPT0gIjIuMSIpIHsKICAgICAgZmlsdGVyUmVrID0gIlJLQSAyLjEiOwogICAgfQogICAgcG9wdXBSZWtlbmluZy5lbF9rb2RlX3Jla2VuaW5nID0gImtvZGVSZWtlbmluZyI7CiAgICBwb3B1cFJla2VuaW5nLmVsX25hbWFfcmVrZW5pbmcgPSAibmFtYVJla2VuaW5nIjsKICAgIHBvcHVwUmVrZW5pbmcud2luZG93U2F2ZUFmdGVyID0gZnVuY3Rpb24oKSB7fTsKICAgIHBvcHVwUmVrZW5pbmcuZmlsdGVyQWt1biA9IGZpbHRlclJlazsKICAgIHBvcHVwUmVrZW5pbmcud2luZG93U2hvdygpOwogIH0sCgogIGZpbmRCYXJhbmc6IGZ1bmN0aW9uKGtvZGVSRU5KQSkgewogICAgdmFyIG1lID0gdGhpczsKICAgIHBvcHVwQmFyYW5nUktBLndpbmRvd1Nob3coa29kZVJFTkpBKTsKICB9LAoKICBjYXRhdGFuOiBmdW5jdGlvbihpZCkgewogICAgdmFyIG1lID0gdGhpczsKCiAgICB2YXIgY292ZXIgPSB0aGlzLnByZWZpeCArICJfZm9ybWNvdmVyIjsKCiAgICAkLmFqYXgoewogICAgICB0eXBlOiAiUE9TVCIsCiAgICAgIGRhdGE6IHsgaWRBd2FsOiBpZCB9LAogICAgICB1cmw6IHRoaXMudXJsICsgIiZ0aXBlPUNhdGF0YW4iLAogICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgdmFyIHJlc3AgPSBldmFsKCIoIiArIGRhdGEgKyAiKSIpOwogICAgICAgIGlmIChyZXNwLmVyciA9PSAiIikgewogICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICJoaWRkZW4iOwogICAgICAgICAgYWRkQ292ZXJQYWdlMihjb3ZlciwgOTk5LCB0cnVlLCBmYWxzZSk7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb3ZlcikuaW5uZXJIVE1MID0gcmVzcC5jb250ZW50OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvKglkZWxFbGVtKGNvdmVyKTsqLwogICAgICAgICAgYWxlcnQocmVzcC5lcnIpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICBWYWxpZGFzaTogZnVuY3Rpb24oKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgZXJybXNnID0gdGhpcy5DZWtDaGVja2JveCgpOwogICAgaWYgKGVycm1zZyA9PSAiIikgewogICAgICB2YXIgYm94ID0gdGhpcy5HZXRDYnhDaGVja2VkKCk7CgogICAgICB2YXIgY292ZXIgPSB0aGlzLnByZWZpeCArICJfZm9ybWNvdmVyIjsKICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICJoaWRkZW4iOwogICAgICBpZiAobWUuc2F0dWFuX2Zvcm0gPT0gMCkgewogICAgICAgIC8vYmFydSBkYXJpIHNhdHVhbgogICAgICAgIGFkZENvdmVyUGFnZTIoY292ZXIsIDEsIHRydWUsIGZhbHNlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvL2JhcnUgZGFyaSBiYXJhbmcKICAgICAgICBhZGRDb3ZlclBhZ2UyKGNvdmVyLCA5OTksIHRydWUsIGZhbHNlKTsKICAgICAgfQogICAgICAkLmFqYXgoewogICAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgICBkYXRhOiAkKCIjIiArIHRoaXMuZm9ybU5hbWUpLnNlcmlhbGl6ZSgpLAogICAgICAgIHVybDogdGhpcy51cmwgKyAiJnRpcGU9VmFsaWRhc2kiLAogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgIHZhciByZXNwID0gZXZhbCgiKCIgKyBkYXRhICsgIikiKTsKICAgICAgICAgIGlmIChyZXNwLmVyciA9PSAiIikgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb3ZlcikuaW5uZXJIVE1MID0gcmVzcC5jb250ZW50OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZGVsRWxlbShjb3Zlcik7CiAgICAgICAgICAgIGFsZXJ0KHJlc3AuZXJyKTsKICAgICAgICAgICAgaWYgKHJlc3AuZXJyID09ICJUYWhhcCBWYWxpZGFzaSBUZWxhaCBIYWJpcyIpIHsKICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAvL3NldFRpbWVvdXQoZnVuY3Rpb24gbXlGdW5jdGlvbigpIHtkaXN0cmlidXNpUGVyc2VkaWFhbi5qYW0oKX0sMTAwKTsKICAgICAgICAgIC8vbWUuQWZ0ZXJGb3JtQmFydSgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBhbGVydChlcnJtc2cpOwogICAgfQogIH0sCgogIFNpbXBhbjogZnVuY3Rpb24oKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgdGhpcy5PbkVycm9yQ2xvc2UgPSBmYWxzZTsKICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAiaGlkZGVuIjsKICAgIHZhciBjb3ZlciA9IHRoaXMucHJlZml4ICsgIl9mb3Jtc2ltcGFuIjsKICAgIGFkZENvdmVyUGFnZTIoY292ZXIsIDEsIHRydWUsIGZhbHNlKTsKICAgICQuYWpheCh7CiAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgZGF0YTogJCgiIyIgKyB0aGlzLnByZWZpeCArICJfZm9ybSIpLnNlcmlhbGl6ZSgpLAogICAgICB1cmw6IHRoaXMudXJsICsgIiZ0aXBlPXNpbXBhbiIsCiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICB2YXIgcmVzcCA9IGV2YWwoIigiICsgZGF0YSArICIpIik7CiAgICAgICAgZGVsRWxlbShjb3Zlcik7CiAgICAgICAgLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb3ZlcikuaW5uZXJIVE1MID0gcmVzcC5jb250ZW50OwogICAgICAgIGlmIChyZXNwLmVyciA9PSAiIikgewogICAgICAgICAgaWYgKG1lLmRpc3RyaWJ1c2lQZXJzZWRpYWFuX2Zvcm0gPT0gMCkgewogICAgICAgICAgICBtZS5DbG9zZSgpOwogICAgICAgICAgICBtZS5BZnRlclNpbXBhbigpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWUuQ2xvc2UoKTsKICAgICAgICAgICAgYmFyYW5nLnJlZnJlc2hDb21ib2Rpc3RyaWJ1c2lQZXJzZWRpYWFuKCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KHJlc3AuZXJyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgTGFwb3JhbjogZnVuY3Rpb24oKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgdmFyIGVyciA9ICIiOwogICAgdmFyIGNvdmVyID0gdGhpcy5wcmVmaXggKyAiX2Zvcm1jb3ZlciI7CiAgICBpZiAoJCgiI2ZpbHRlclVydXNhbiIpLnZhbCgpID09ICIwMCIpIHsKICAgICAgZXJyID0gIlBpbGloIFVydXNhbiI7CiAgICB9IGVsc2UgaWYgKCQoIiNmaWx0ZXJCaWRhbmciKS52YWwoKSA9PSAiMDAiKSB7CiAgICAgIGVyciA9ICJQaWxpaCBCaWRhbmciOwogICAgfSBlbHNlIGlmICgkKCIjZmlsdGVyU0tQRCIpLnZhbCgpID09ICIwMCIpIHsKICAgICAgZXJyID0gIlBpbGloIFNLUEQiOwogICAgfSBlbHNlIGlmICgkKCIjZmlsdGVyVW5pdCIpLnZhbCgpID09ICIwMCIpIHsKICAgICAgZXJyID0gIlBpbGloIFVuaXQiOwogICAgfSBlbHNlIGlmICgkKCIjZmlsdGVyU3ViVW5pdCIpLnZhbCgpID09ICIwMCIpIHsKICAgICAgZXJyID0gIlBpbGloIFN1YiBVbml0IjsKICAgIH0KICAgIGlmIChlcnIgPT0gIiIpIHsKICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICJoaWRkZW4iOwogICAgICBhZGRDb3ZlclBhZ2UyKGNvdmVyLCAyLCB0cnVlLCBmYWxzZSk7CiAgICAgICQuYWpheCh7CiAgICAgICAgdHlwZTogIlBPU1QiLAogICAgICAgIGRhdGE6ICQoIiMiICsgdGhpcy5mb3JtTmFtZSkuc2VyaWFsaXplKCksCiAgICAgICAgdXJsOiB0aGlzLnVybCArICImdGlwZT1MYXBvcmFuIiwKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICB2YXIgcmVzcCA9IGV2YWwoIigiICsgZGF0YSArICIpIik7CiAgICAgICAgICBpZiAocmVzcC5lcnIgPT0gIiIpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY292ZXIpLmlubmVySFRNTCA9IHJlc3AuY29udGVudDsKICAgICAgICAgICAgbWUuQWZ0ZXJGb3JtQmFydShyZXNwKTsKICAgICAgICAgICAgdmFyIGJhc2VMaW1pdERhdGUgPSBhdG9iKCAkKCIjeWVhclJhbmdlIikudmFsKCkpOwogICAgICAgICAgICB2YXIgYXJyYXlMaW1pdERhdGUgPSBiYXNlTGltaXREYXRlLnNwbGl0KCc7Jyk7CiAgICAgICAgICAgICQoICIjdGFuZ2dhbENldGFrIiApLmRhdGVwaWNrZXIoewogICAgICAgICAgICBkYXRlRm9ybWF0OiAiZGQtbW0teXkiLAogICAgICAgICAgICBzaG93QW5pbTogInNsaWRlRG93biIsCiAgICAgICAgICAgIGlubGluZTogdHJ1ZSwKICAgICAgICAgICAgc2hvd09uOiAiYnV0dG9uIiwKICAgICAgICAgICAgYnV0dG9uSW1hZ2U6ICJkYXRlcGlja2VyL2NhbGVuZGVyMS5wbmciLAogICAgICAgICAgICBidXR0b25JbWFnZU9ubHk6IHRydWUsCiAgICAgICAgICAgIGNoYW5nZU1vbnRoOiB0cnVlLAogICAgICAgICAgICBjaGFuZ2VZZWFyOiBmYWxzZSwKICAgICAgICAgICAgbWluRGF0ZSA6IGFycmF5TGltaXREYXRlWzBdLAogICAgICAgICAgICBtYXhEYXRlIDogYXJyYXlMaW1pdERhdGVbMV0sCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWxlcnQocmVzcC5lcnIpOwogICAgICAgICAgICBkZWxFbGVtKGNvdmVyKTsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICJhdXRvIjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgYWxlcnQoZXJyKTsKICAgIH0KICB9LAogIG5ld1RhbmRhVGFuZ2FuZ2FuOiBmdW5jdGlvbigpewoJCXZhciBtZSA9IHRoaXM7CgkJdmFyIGVycj0nJzsKCQl2YXIgY292ZXIgPSB0aGlzLnByZWZpeCsnX2Zvcm1jb3ZlclRhbmRhVGFuZ2FuJzsKCgkJaWYoZXJyPT0nJyl7CgkJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2hpZGRlbic7CgkJCWFkZENvdmVyUGFnZTIoY292ZXIsOTksdHJ1ZSxmYWxzZSk7CgkJCSQuYWpheCh7CgkJCQl0eXBlOidQT1NUJywKCQkJCWRhdGE6JCgnIycrdGhpcy5wcmVmaXgrIl9mb3JtIikuc2VyaWFsaXplKCksCgkJCSAgCXVybDogdGhpcy51cmwrJyZ0aXBlPW5ld1RhbmRhVGFuZ2FuZ2FuJywKCQkJICAJc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewoJCQkJCXZhciByZXNwID0gZXZhbCgnKCcgKyBkYXRhICsgJyknKTsKCQkJCQlpZiAocmVzcC5lcnIgPT0nJyl7CgkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvdmVyKS5pbm5lckhUTUwgPSByZXNwLmNvbnRlbnQ7CgkJCQkJCW1lLkFmdGVyRm9ybUJhcnUocmVzcCk7CgkJCQkJfWVsc2V7CgkJCQkJCWFsZXJ0KHJlc3AuZXJyKTsKCQkJCQkJZGVsRWxlbShjb3Zlcik7CgkJCQkJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2F1dG8nOwoJCQkJCX0KCgkJCSAgCX0KCQkJfSk7CgkJfWVsc2V7CgkJCWFsZXJ0KGVycik7CgkJfQoJfSwKICB2aWV3TGFwb3JhbjogZnVuY3Rpb24oKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgZXJybXNnID0gIiI7CiAgICBpZiAoZXJybXNnID09ICIiKSB7CiAgICAgIHZhciBtZSA9IHRoaXM7CiAgICAgIHZhciBhRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucHJlZml4ICsgIl9mb3JtIik7CiAgICAgIGFGb3JtLmFjdGlvbiA9CiAgICAgICAgInBnUGVyc2VkaWFhbi5waHA\/UGc9ZGlzdHJpYnVzaVBlcnNlZGlhYW4mdGlwZT12aWV3TGFwb3JhbiI7CiAgICAgIGFGb3JtLnRhcmdldCA9ICJfYmxhbmsiOwogICAgICBhRm9ybS5zdWJtaXQoKTsKICAgICAgYUZvcm0udGFyZ2V0ID0gIiI7CiAgICB9IGVsc2UgewogICAgICBhbGVydChlcnJtc2cpOwogICAgfQogIH0sCiAgY2xvc2VUYW5kYVRhbmdhbkZvcm06IGZ1bmN0aW9uKCkgewogICAgdmFyIGNvdmVyID0gdGhpcy5wcmVmaXggKyAiX2Zvcm1jb3ZlclRhbmRhVGFuZ2FuIjsKICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb3ZlcikpIGRlbEVsZW0oY292ZXIpOwogICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICJhdXRvIjsKICB9LAogIHNhdmVOZXdUYW5kYVRhbmdhbjogZnVuY3Rpb24oKXsKCQl2YXIgbWU9IHRoaXM7CgkJdGhpcy5PbkVycm9yQ2xvc2UgPSBmYWxzZQoJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2hpZGRlbic7CgkJdmFyIGNvdmVyID0gJ3JlbmphQXNldCcrJ19mb3Jtc2ltcGFuJzsKCQlhZGRDb3ZlclBhZ2UyKGNvdmVyLDEsdHJ1ZSxmYWxzZSk7CgkJJC5hamF4KHsKCQkJdHlwZTonUE9TVCcsCgkJCWRhdGE6ewoJCQkJYzEJOiAkKCIjYzEiKS52YWwoKSwKCQkJCQljICAgOiAkKCIjYyIpLnZhbCgpLAoJCQkJCWQgICA6ICQoIiNkIikudmFsKCksCgkJCQkJZSAgIDogJCgiI2UiKS52YWwoKSwKCQkJCQllMSAgIDogJCgiI2UxIikudmFsKCksCgkJCQkJa2F0ZWdvcmkgICAgICA6ICQoIiNrYXRlZ29yaSIpLnZhbCgpLAoJCQkJCW5hbWFwZWdhd2FpICAgOiAkKCIjbmFtYXBlZ2F3YWkiKS52YWwoKSwKCQkJCQluaXBwZWdhd2FpICAgIDogJCgiI25pcHBlZ2F3YWkiKS52YWwoKSwKCQkJCQlwYW5na2F0YWtoaXIgIDogJCgiI3BhbmdrYXRha2hpciIpLnZhbCgpLAoJCQkJCWdvbGFuZ19ha2hpciAgOiAkKCIjZ29sYW5nX2FraGlyIikudmFsKCksCgkJCQkJamFiYXRhbiAgICAgICA6ICQoIiNqYWJhdGFuIikudmFsKCksCgkJCQkJZXNlbG9uX2FraGlyICA6ICQoIiNlc2Vsb25fYWtoaXIiKS52YWwoKSwKCQkJfSwKCQkJdXJsOiB0aGlzLnVybCsnJnRpcGU9c2F2ZU5ld1RhbmRhVGFuZ2FuJywKCQkJCXN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsKCQkJCXZhciByZXNwID0gZXZhbCgnKCcgKyBkYXRhICsgJyknKTsKCQkJCWRlbEVsZW0oY292ZXIpOwoJCQkJLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb3ZlcikuaW5uZXJIVE1MID0gcmVzcC5jb250ZW50OwoJCQkJaWYocmVzcC5lcnI9PScnKXsKCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWRQZW5hbmRhVGFuZ2FuJykuaW5uZXJIVE1MID0gcmVzcC5jb250ZW50LmNvbWJvdHRkOwoJCQkJCW1lLmNsb3NlVGFuZGFUYW5nYW5Gb3JtKCk7CgkJCQl9ZWxzZXsKCQkJCQlhbGVydChyZXNwLmVycik7CgkJCQl9CgkJCQl9CgkJfSk7Cgl9LAp9KTsK",
    "size": "24294"
}