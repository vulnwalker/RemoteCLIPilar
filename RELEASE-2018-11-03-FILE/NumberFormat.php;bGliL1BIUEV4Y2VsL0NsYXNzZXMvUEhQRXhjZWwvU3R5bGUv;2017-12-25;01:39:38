{
    "namaFile": "lib\/PHPExcel\/Classes\/PHPExcel\/Style\/NumberFormat.php",
    "lastUpdate": "2017-12-25+01:39:38.00",
    "contentFile": "PD9waHAKCi8qKgogKiBQSFBFeGNlbF9TdHlsZV9OdW1iZXJGb3JtYXQKICoKICogQ29weXJpZ2h0IChjKSAyMDA2IC0gMjAxNSBQSFBFeGNlbAogKgogKiBUaGlzIGxpYnJhcnkgaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yCiAqIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMKICogTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyCiAqIHZlcnNpb24gMi4xIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLgogKgogKiBUaGlzIGxpYnJhcnkgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZSBHTlUKICogTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KICoKICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYwogKiBMaWNlbnNlIGFsb25nIHdpdGggdGhpcyBsaWJyYXJ5OyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlCiAqIEZvdW5kYXRpb24sIEluYy4sIDUxIEZyYW5rbGluIFN0cmVldCwgRmlmdGggRmxvb3IsIEJvc3RvbiwgTUEgIDAyMTEwLTEzMDEgIFVTQQogKgogKiBAY2F0ZWdvcnkgICBQSFBFeGNlbAogKiBAcGFja2FnZSAgICBQSFBFeGNlbF9TdHlsZQogKiBAY29weXJpZ2h0ICBDb3B5cmlnaHQgKGMpIDIwMDYgLSAyMDE1IFBIUEV4Y2VsIChodHRwOi8vd3d3LmNvZGVwbGV4LmNvbS9QSFBFeGNlbCkKICogQGxpY2Vuc2UgICAgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL29sZC1saWNlbnNlcy9sZ3BsLTIuMS50eHQgICAgTEdQTAogKiBAdmVyc2lvbiAgICAjI1ZFUlNJT04jIywgIyNEQVRFIyMKICovCmNsYXNzIFBIUEV4Y2VsX1N0eWxlX051bWJlckZvcm1hdCBleHRlbmRzIFBIUEV4Y2VsX1N0eWxlX1N1cGVydmlzb3IgaW1wbGVtZW50cyBQSFBFeGNlbF9JQ29tcGFyYWJsZQp7CiAgICAvKiBQcmUtZGVmaW5lZCBmb3JtYXRzICovCiAgICBjb25zdCBGT1JNQVRfR0VORVJBTCAgICAgICAgICAgICAgICAgPSAnR2VuZXJhbCc7CgogICAgY29uc3QgRk9STUFUX1RFWFQgICAgICAgICAgICAgICAgICAgID0gJ0AnOwoKICAgIGNvbnN0IEZPUk1BVF9OVU1CRVIgICAgICAgICAgICAgICAgICA9ICcwJzsKICAgIGNvbnN0IEZPUk1BVF9OVU1CRVJfMDAgICAgICAgICAgICAgICA9ICcwLjAwJzsKICAgIGNvbnN0IEZPUk1BVF9OVU1CRVJfQ09NTUFfU0VQQVJBVEVEMSA9ICcjLCMjMC4wMCc7CiAgICBjb25zdCBGT1JNQVRfTlVNQkVSX0NPTU1BX1NFUEFSQVRFRDIgPSAnIywjIzAuMDBfLSc7CgogICAgY29uc3QgRk9STUFUX1BFUkNFTlRBR0UgICAgICAgICAgICAgID0gJzAlJzsKICAgIGNvbnN0IEZPUk1BVF9QRVJDRU5UQUdFXzAwICAgICAgICAgICA9ICcwLjAwJSc7CgogICAgY29uc3QgRk9STUFUX0RBVEVfWVlZWU1NREQyICAgICAgICAgID0gJ3l5eXktbW0tZGQnOwogICAgY29uc3QgRk9STUFUX0RBVEVfWVlZWU1NREQgICAgICAgICAgID0gJ3l5LW1tLWRkJzsKICAgIGNvbnN0IEZPUk1BVF9EQVRFX0RETU1ZWVlZICAgICAgICAgICA9ICdkZC9tbS95eSc7CiAgICBjb25zdCBGT1JNQVRfREFURV9ETVlTTEFTSCAgICAgICAgICAgPSAnZC9tL3knOwogICAgY29uc3QgRk9STUFUX0RBVEVfRE1ZTUlOVVMgICAgICAgICAgID0gJ2QtbS15JzsKICAgIGNvbnN0IEZPUk1BVF9EQVRFX0RNTUlOVVMgICAgICAgICAgICA9ICdkLW0nOwogICAgY29uc3QgRk9STUFUX0RBVEVfTVlNSU5VUyAgICAgICAgICAgID0gJ20teSc7CiAgICBjb25zdCBGT1JNQVRfREFURV9YTFNYMTQgICAgICAgICAgICAgPSAnbW0tZGQteXknOwogICAgY29uc3QgRk9STUFUX0RBVEVfWExTWDE1ICAgICAgICAgICAgID0gJ2QtbW1tLXl5JzsKICAgIGNvbnN0IEZPUk1BVF9EQVRFX1hMU1gxNiAgICAgICAgICAgICA9ICdkLW1tbSc7CiAgICBjb25zdCBGT1JNQVRfREFURV9YTFNYMTcgICAgICAgICAgICAgPSAnbW1tLXl5JzsKICAgIGNvbnN0IEZPUk1BVF9EQVRFX1hMU1gyMiAgICAgICAgICAgICA9ICdtL2QveXkgaDptbSc7CiAgICBjb25zdCBGT1JNQVRfREFURV9EQVRFVElNRSAgICAgICAgICAgPSAnZC9tL3kgaDptbSc7CiAgICBjb25zdCBGT1JNQVRfREFURV9USU1FMSAgICAgICAgICAgICAgPSAnaDptbSBBTS9QTSc7CiAgICBjb25zdCBGT1JNQVRfREFURV9USU1FMiAgICAgICAgICAgICAgPSAnaDptbTpzcyBBTS9QTSc7CiAgICBjb25zdCBGT1JNQVRfREFURV9USU1FMyAgICAgICAgICAgICAgPSAnaDptbSc7CiAgICBjb25zdCBGT1JNQVRfREFURV9USU1FNCAgICAgICAgICAgICAgPSAnaDptbTpzcyc7CiAgICBjb25zdCBGT1JNQVRfREFURV9USU1FNSAgICAgICAgICAgICAgPSAnbW06c3MnOwogICAgY29uc3QgRk9STUFUX0RBVEVfVElNRTYgICAgICAgICAgICAgID0gJ2g6bW06c3MnOwogICAgY29uc3QgRk9STUFUX0RBVEVfVElNRTcgICAgICAgICAgICAgID0gJ2k6cy5TJzsKICAgIGNvbnN0IEZPUk1BVF9EQVRFX1RJTUU4ICAgICAgICAgICAgICA9ICdoOm1tOnNzO0AnOwogICAgY29uc3QgRk9STUFUX0RBVEVfWVlZWU1NRERTTEFTSCAgICAgID0gJ3l5L21tL2RkO0AnOwoKICAgIGNvbnN0IEZPUk1BVF9DVVJSRU5DWV9VU0RfU0lNUExFICAgICA9ICciJCIjLCMjMC4wMF8tJzsKICAgIGNvbnN0IEZPUk1BVF9DVVJSRU5DWV9VU0QgICAgICAgICAgICA9ICckIywjIzBfLSc7CiAgICBjb25zdCBGT1JNQVRfQ1VSUkVOQ1lfRVVSX1NJTVBMRSAgICAgPSAnWyRFVVIgXSMsIyMwLjAwXy0nOwoKICAgIC8qKgogICAgICogRXhjZWwgYnVpbHQtaW4gbnVtYmVyIGZvcm1hdHMKICAgICAqCiAgICAgKiBAdmFyIGFycmF5CiAgICAgKi8KICAgIHByb3RlY3RlZCBzdGF0aWMgJGJ1aWx0SW5Gb3JtYXRzOwoKICAgIC8qKgogICAgICogRXhjZWwgYnVpbHQtaW4gbnVtYmVyIGZvcm1hdHMgKGZsaXBwZWQsIGZvciBmYXN0ZXIgbG9va3VwcykKICAgICAqCiAgICAgKiBAdmFyIGFycmF5CiAgICAgKi8KICAgIHByb3RlY3RlZCBzdGF0aWMgJGZsaXBwZWRCdWlsdEluRm9ybWF0czsKCiAgICAvKioKICAgICAqIEZvcm1hdCBDb2RlCiAgICAgKgogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHJvdGVjdGVkICRmb3JtYXRDb2RlID0gUEhQRXhjZWxfU3R5bGVfTnVtYmVyRm9ybWF0OjpGT1JNQVRfR0VORVJBTDsKCiAgICAvKioKICAgICAqIEJ1aWx0LWluIGZvcm1hdCBDb2RlCiAgICAgKgogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHJvdGVjdGVkICRidWlsdEluRm9ybWF0Q29kZSAgICA9IDA7CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBuZXcgUEhQRXhjZWxfU3R5bGVfTnVtYmVyRm9ybWF0CiAgICAgKgogICAgICogQHBhcmFtICAgIGJvb2xlYW4gICAgJGlzU3VwZXJ2aXNvciAgICBGbGFnIGluZGljYXRpbmcgaWYgdGhpcyBpcyBhIHN1cGVydmlzb3Igb3Igbm90CiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExlYXZlIHRoaXMgdmFsdWUgYXQgZGVmYXVsdCB1bmxlc3MgeW91IHVuZGVyc3RhbmQgZXhhY3RseSB3aGF0CiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdHMgcmFtaWZpY2F0aW9ucyBhcmUKICAgICAqIEBwYXJhbSAgICBib29sZWFuICAgICRpc0NvbmRpdGlvbmFsICAgIEZsYWcgaW5kaWNhdGluZyBpZiB0aGlzIGlzIGEgY29uZGl0aW9uYWwgc3R5bGUgb3Igbm90CiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExlYXZlIHRoaXMgdmFsdWUgYXQgZGVmYXVsdCB1bmxlc3MgeW91IHVuZGVyc3RhbmQgZXhhY3RseSB3aGF0CiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdHMgcmFtaWZpY2F0aW9ucyBhcmUKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRpc1N1cGVydmlzb3IgPSBmYWxzZSwgJGlzQ29uZGl0aW9uYWwgPSBmYWxzZSkKICAgIHsKICAgICAgICAvLyBTdXBlcnZpc29yPwogICAgICAgIHBhcmVudDo6X19jb25zdHJ1Y3QoJGlzU3VwZXJ2aXNvcik7CgogICAgICAgIGlmICgkaXNDb25kaXRpb25hbCkgewogICAgICAgICAgICAkdGhpcy0+Zm9ybWF0Q29kZSA9IG51bGw7CiAgICAgICAgICAgICR0aGlzLT5idWlsdEluRm9ybWF0Q29kZSA9IGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgc2hhcmVkIHN0eWxlIGNvbXBvbmVudCBmb3IgdGhlIGN1cnJlbnRseSBhY3RpdmUgY2VsbCBpbiBjdXJyZW50bHkgYWN0aXZlIHNoZWV0LgogICAgICogT25seSB1c2VkIGZvciBzdHlsZSBzdXBlcnZpc29yCiAgICAgKgogICAgICogQHJldHVybiBQSFBFeGNlbF9TdHlsZV9OdW1iZXJGb3JtYXQKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldFNoYXJlZENvbXBvbmVudCgpCiAgICB7CiAgICAgICAgcmV0dXJuICR0aGlzLT5wYXJlbnQtPmdldFNoYXJlZENvbXBvbmVudCgpLT5nZXROdW1iZXJGb3JtYXQoKTsKICAgIH0KCiAgICAvKioKICAgICAqIEJ1aWxkIHN0eWxlIGFycmF5IGZyb20gc3ViY29tcG9uZW50cwogICAgICoKICAgICAqIEBwYXJhbSBhcnJheSAkYXJyYXkKICAgICAqIEByZXR1cm4gYXJyYXkKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldFN0eWxlQXJyYXkoJGFycmF5KQogICAgewogICAgICAgIHJldHVybiBhcnJheSgnbnVtYmVyZm9ybWF0JyA9PiAkYXJyYXkpOwogICAgfQoKICAgIC8qKgogICAgICogQXBwbHkgc3R5bGVzIGZyb20gYXJyYXkKICAgICAqCiAgICAgKiA8Y29kZT4KICAgICAqICRvYmpQSFBFeGNlbC0+Z2V0QWN0aXZlU2hlZXQoKS0+Z2V0U3R5bGUoJ0IyJyktPmdldE51bWJlckZvcm1hdCgpLT5hcHBseUZyb21BcnJheSgKICAgICAqICAgICAgICBhcnJheSgKICAgICAqICAgICAgICAgICAgJ2NvZGUnID0+IFBIUEV4Y2VsX1N0eWxlX051bWJlckZvcm1hdDo6Rk9STUFUX0NVUlJFTkNZX0VVUl9TSU1QTEUKICAgICAqICAgICAgICApCiAgICAgKiApOwogICAgICogPC9jb2RlPgogICAgICoKICAgICAqIEBwYXJhbSAgICBhcnJheSAgICAkcFN0eWxlcyAgICBBcnJheSBjb250YWluaW5nIHN0eWxlIGluZm9ybWF0aW9uCiAgICAgKiBAdGhyb3dzICAgIFBIUEV4Y2VsX0V4Y2VwdGlvbgogICAgICogQHJldHVybiBQSFBFeGNlbF9TdHlsZV9OdW1iZXJGb3JtYXQKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGFwcGx5RnJvbUFycmF5KCRwU3R5bGVzID0gbnVsbCkKICAgIHsKICAgICAgICBpZiAoaXNfYXJyYXkoJHBTdHlsZXMpKSB7CiAgICAgICAgICAgIGlmICgkdGhpcy0+aXNTdXBlcnZpc29yKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+Z2V0QWN0aXZlU2hlZXQoKS0+Z2V0U3R5bGUoJHRoaXMtPmdldFNlbGVjdGVkQ2VsbHMoKSktPmFwcGx5RnJvbUFycmF5KCR0aGlzLT5nZXRTdHlsZUFycmF5KCRwU3R5bGVzKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAoYXJyYXlfa2V5X2V4aXN0cygnY29kZScsICRwU3R5bGVzKSkgewogICAgICAgICAgICAgICAgICAgICR0aGlzLT5zZXRGb3JtYXRDb2RlKCRwU3R5bGVzWydjb2RlJ10pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFBIUEV4Y2VsX0V4Y2VwdGlvbigiSW52YWxpZCBzdHlsZSBhcnJheSBwYXNzZWQuIik7CiAgICAgICAgfQogICAgICAgIHJldHVybiAkdGhpczsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBGb3JtYXQgQ29kZQogICAgICoKICAgICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRGb3JtYXRDb2RlKCkKICAgIHsKICAgICAgICBpZiAoJHRoaXMtPmlzU3VwZXJ2aXNvcikgewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmdldFNoYXJlZENvbXBvbmVudCgpLT5nZXRGb3JtYXRDb2RlKCk7CiAgICAgICAgfQogICAgICAgIGlmICgkdGhpcy0+YnVpbHRJbkZvcm1hdENvZGUgIT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBzZWxmOjpidWlsdEluRm9ybWF0Q29kZSgkdGhpcy0+YnVpbHRJbkZvcm1hdENvZGUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gJHRoaXMtPmZvcm1hdENvZGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgRm9ybWF0IENvZGUKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRwVmFsdWUKICAgICAqIEByZXR1cm4gUEhQRXhjZWxfU3R5bGVfTnVtYmVyRm9ybWF0CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBzZXRGb3JtYXRDb2RlKCRwVmFsdWUgPSBQSFBFeGNlbF9TdHlsZV9OdW1iZXJGb3JtYXQ6OkZPUk1BVF9HRU5FUkFMKQogICAgewogICAgICAgIGlmICgkcFZhbHVlID09ICcnKSB7CiAgICAgICAgICAgICRwVmFsdWUgPSBQSFBFeGNlbF9TdHlsZV9OdW1iZXJGb3JtYXQ6OkZPUk1BVF9HRU5FUkFMOwogICAgICAgIH0KICAgICAgICBpZiAoJHRoaXMtPmlzU3VwZXJ2aXNvcikgewogICAgICAgICAgICAkc3R5bGVBcnJheSA9ICR0aGlzLT5nZXRTdHlsZUFycmF5KGFycmF5KCdjb2RlJyA9PiAkcFZhbHVlKSk7CiAgICAgICAgICAgICR0aGlzLT5nZXRBY3RpdmVTaGVldCgpLT5nZXRTdHlsZSgkdGhpcy0+Z2V0U2VsZWN0ZWRDZWxscygpKS0+YXBwbHlGcm9tQXJyYXkoJHN0eWxlQXJyYXkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICR0aGlzLT5mb3JtYXRDb2RlID0gJHBWYWx1ZTsKICAgICAgICAgICAgJHRoaXMtPmJ1aWx0SW5Gb3JtYXRDb2RlID0gc2VsZjo6YnVpbHRJbkZvcm1hdENvZGVJbmRleCgkcFZhbHVlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICR0aGlzOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IEJ1aWx0LUluIEZvcm1hdCBDb2RlCiAgICAgKgogICAgICogQHJldHVybiBpbnQKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldEJ1aWx0SW5Gb3JtYXRDb2RlKCkKICAgIHsKICAgICAgICBpZiAoJHRoaXMtPmlzU3VwZXJ2aXNvcikgewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmdldFNoYXJlZENvbXBvbmVudCgpLT5nZXRCdWlsdEluRm9ybWF0Q29kZSgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gJHRoaXMtPmJ1aWx0SW5Gb3JtYXRDb2RlOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IEJ1aWx0LUluIEZvcm1hdCBDb2RlCiAgICAgKgogICAgICogQHBhcmFtIGludCAkcFZhbHVlCiAgICAgKiBAcmV0dXJuIFBIUEV4Y2VsX1N0eWxlX051bWJlckZvcm1hdAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc2V0QnVpbHRJbkZvcm1hdENvZGUoJHBWYWx1ZSA9IDApCiAgICB7CgogICAgICAgIGlmICgkdGhpcy0+aXNTdXBlcnZpc29yKSB7CiAgICAgICAgICAgICRzdHlsZUFycmF5ID0gJHRoaXMtPmdldFN0eWxlQXJyYXkoYXJyYXkoJ2NvZGUnID0+IHNlbGY6OmJ1aWx0SW5Gb3JtYXRDb2RlKCRwVmFsdWUpKSk7CiAgICAgICAgICAgICR0aGlzLT5nZXRBY3RpdmVTaGVldCgpLT5nZXRTdHlsZSgkdGhpcy0+Z2V0U2VsZWN0ZWRDZWxscygpKS0+YXBwbHlGcm9tQXJyYXkoJHN0eWxlQXJyYXkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICR0aGlzLT5idWlsdEluRm9ybWF0Q29kZSA9ICRwVmFsdWU7CiAgICAgICAgICAgICR0aGlzLT5mb3JtYXRDb2RlID0gc2VsZjo6YnVpbHRJbkZvcm1hdENvZGUoJHBWYWx1ZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAkdGhpczsKICAgIH0KCiAgICAvKioKICAgICAqIEZpbGwgYnVpbHQtaW4gZm9ybWF0IGNvZGVzCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGZpbGxCdWlsdEluRm9ybWF0Q29kZXMoKQogICAgewogICAgICAgIC8vICBbTVMtT0kyOTUwMDogTWljcm9zb2Z0IE9mZmljZSBJbXBsZW1lbnRhdGlvbiBJbmZvcm1hdGlvbiBmb3IgSVNPL0lFQy0yOTUwMCBTdGFuZGFyZCBDb21wbGlhbmNlXQogICAgICAgIC8vICAxOC44LjMwLiBudW1GbXQgKE51bWJlciBGb3JtYXQpCiAgICAgICAgLy8KICAgICAgICAvLyAgVGhlIEVDTUEgc3RhbmRhcmQgZGVmaW5lcyBidWlsdC1pbiBmb3JtYXQgSURzCiAgICAgICAgLy8gICAgICAxNDogIm1tLWRkLXl5IgogICAgICAgIC8vICAgICAgMjI6ICJtL2QveXkgaDptbSIKICAgICAgICAvLyAgICAgIDM3OiAiIywjIzAgOygjLCMjMCkiCiAgICAgICAgLy8gICAgICAzODogIiMsIyMwIDtbUmVkXSgjLCMjMCkiCiAgICAgICAgLy8gICAgICAzOTogIiMsIyMwLjAwOygjLCMjMC4wMCkiCiAgICAgICAgLy8gICAgICA0MDogIiMsIyMwLjAwO1tSZWRdKCMsIyMwLjAwKSIKICAgICAgICAvLyAgICAgIDQ3OiAibW1zcy4wIgogICAgICAgIC8vICAgICAgS09SIGZtdCA1NTogInl5eXktbW0tZGQiCiAgICAgICAgLy8gIEV4Y2VsIGRlZmluZXMgYnVpbHQtaW4gZm9ybWF0IElEcwogICAgICAgIC8vICAgICAgMTQ6ICJtL2QveXl5eSIKICAgICAgICAvLyAgICAgIDIyOiAibS9kL3l5eXkgaDptbSIKICAgICAgICAvLyAgICAgIDM3OiAiIywjIzBfKTsoIywjIzApIgogICAgICAgIC8vICAgICAgMzg6ICIjLCMjMF8pO1tSZWRdKCMsIyMwKSIKICAgICAgICAvLyAgICAgIDM5OiAiIywjIzAuMDBfKTsoIywjIzAuMDApIgogICAgICAgIC8vICAgICAgNDA6ICIjLCMjMC4wMF8pO1tSZWRdKCMsIyMwLjAwKSIKICAgICAgICAvLyAgICAgIDQ3OiAibW06c3MuMCIKICAgICAgICAvLyAgICAgIEtPUiBmbXQgNTU6ICJ5eXl5L21tL2RkIgogCiAgICAgICAgLy8gQnVpbHQtaW4gZm9ybWF0IGNvZGVzCiAgICAgICAgaWYgKGlzX251bGwoc2VsZjo6JGJ1aWx0SW5Gb3JtYXRzKSkgewogICAgICAgICAgICBzZWxmOjokYnVpbHRJbkZvcm1hdHMgPSBhcnJheSgpOwoKICAgICAgICAgICAgLy8gR2VuZXJhbAogICAgICAgICAgICBzZWxmOjokYnVpbHRJbkZvcm1hdHNbMF0gPSBQSFBFeGNlbF9TdHlsZV9OdW1iZXJGb3JtYXQ6OkZPUk1BVF9HRU5FUkFMOwogICAgICAgICAgICBzZWxmOjokYnVpbHRJbkZvcm1hdHNbMV0gPSAnMCc7CiAgICAgICAgICAgIHNlbGY6OiRidWlsdEluRm9ybWF0c1syXSA9ICcwLjAwJzsKICAgICAgICAgICAgc2VsZjo6JGJ1aWx0SW5Gb3JtYXRzWzNdID0gJyMsIyMwJzsKICAgICAgICAgICAgc2VsZjo6JGJ1aWx0SW5Gb3JtYXRzWzRdID0gJyMsIyMwLjAwJzsKCiAgICAgICAgICAgIHNlbGY6OiRidWlsdEluRm9ybWF0c1s5XSA9ICcwJSc7CiAgICAgICAgICAgIHNlbGY6OiRidWlsdEluRm9ybWF0c1sxMF0gPSAnMC4wMCUnOwogICAgICAgICAgICBzZWxmOjokYnVpbHRJbkZvcm1hdHNbMTFdID0gJzAuMDBFKzAwJzsKICAgICAgICAgICAgc2VsZjo6JGJ1aWx0SW5Gb3JtYXRzWzEyXSA9ICcjID8vPyc7CiAgICAgICAgICAgIHNlbGY6OiRidWlsdEluRm9ybWF0c1sxM10gPSAnIyA\/Py8\/Pyc7CiAgICAgICAgICAgIHNlbGY6OiRidWlsdEluRm9ybWF0c1sxNF0gPSAnbS9kL3l5eXknOyAgICAgICAgICAgICAgICAgICAgIC8vIERlc3BpdGUgRUNNQSAnbW0tZGQteXknOwogICAgICAgICAgICBzZWxmOjokYnVpbHRJbkZvcm1hdHNbMTVdID0gJ2QtbW1tLXl5JzsKICAgICAgICAgICAgc2VsZjo6JGJ1aWx0SW5Gb3JtYXRzWzE2XSA9ICdkLW1tbSc7CiAgICAgICAgICAgIHNlbGY6OiRidWlsdEluRm9ybWF0c1sxN10gPSAnbW1tLXl5JzsKICAgICAgICAgICAgc2VsZjo6JGJ1aWx0SW5Gb3JtYXRzWzE4XSA9ICdoOm1tIEFNL1BNJzsKICAgICAgICAgICAgc2VsZjo6JGJ1aWx0SW5Gb3JtYXRzWzE5XSA9ICdoOm1tOnNzIEFNL1BNJzsKICAgICAgICAgICAgc2VsZjo6JGJ1aWx0SW5Gb3JtYXRzWzIwXSA9ICdoOm1tJzsKICAgICAgICAgICAgc2VsZjo6JGJ1aWx0SW5Gb3JtYXRzWzIxXSA9ICdoOm1tOnNzJzsKICAgICAgICAgICAgc2VsZjo6JGJ1aWx0SW5Gb3JtYXRzWzIyXSA9ICdtL2QveXl5eSBoOm1tJzsgICAgICAgICAgICAgICAgLy8gRGVzcGl0ZSBFQ01BICdtL2QveXkgaDptbSc7CgogICAgICAgICAgICBzZWxmOjokYnVpbHRJbkZvcm1hdHNbMzddID0gJyMsIyMwXyk7KCMsIyMwKSc7ICAgICAgICAgICAgICAvLyAgRGVzcGl0ZSBFQ01BICcjLCMjMCA7KCMsIyMwKSc7CiAgICAgICAgICAgIHNlbGY6OiRidWlsdEluRm9ybWF0c1szOF0gPSAnIywjIzBfKTtbUmVkXSgjLCMjMCknOyAgICAgICAgIC8vICBEZXNwaXRlIEVDTUEgJyMsIyMwIDtbUmVkXSgjLCMjMCknOwogICAgICAgICAgICBzZWxmOjokYnVpbHRJbkZvcm1hdHNbMzldID0gJyMsIyMwLjAwXyk7KCMsIyMwLjAwKSc7ICAgICAgICAvLyAgRGVzcGl0ZSBFQ01BICcjLCMjMC4wMDsoIywjIzAuMDApJzsKICAgICAgICAgICAgc2VsZjo6JGJ1aWx0SW5Gb3JtYXRzWzQwXSA9ICcjLCMjMC4wMF8pO1tSZWRdKCMsIyMwLjAwKSc7ICAgLy8gIERlc3BpdGUgRUNNQSAnIywjIzAuMDA7W1JlZF0oIywjIzAuMDApJzsKCiAgICAgICAgICAgIHNlbGY6OiRidWlsdEluRm9ybWF0c1s0NF0gPSAnXygiJCIqICMsIyMwLjAwXyk7XygiJCIqIFwoIywjIzAuMDBcKTtfKCIkIiogIi0iPz9fKTtfKEBfKSc7CiAgICAgICAgICAgIHNlbGY6OiRidWlsdEluRm9ybWF0c1s0NV0gPSAnbW06c3MnOwogICAgICAgICAgICBzZWxmOjokYnVpbHRJbkZvcm1hdHNbNDZdID0gJ1toXTptbTpzcyc7CiAgICAgICAgICAgIHNlbGY6OiRidWlsdEluRm9ybWF0c1s0N10gPSAnbW06c3MuMCc7ICAgICAgICAgICAgICAgICAgICAgIC8vICBEZXNwaXRlIEVDTUEgJ21tc3MuMCc7CiAgICAgICAgICAgIHNlbGY6OiRidWlsdEluRm9ybWF0c1s0OF0gPSAnIyMwLjBFKzAnOwogICAgICAgICAgICBzZWxmOjokYnVpbHRJbkZvcm1hdHNbNDldID0gJ0AnOwoKICAgICAgICAgICAgLy8gQ0hUCiAgICAgICAgICAgIHNlbGY6OiRidWlsdEluRm9ybWF0c1syN10gPSAnWyQtNDA0XWUvbS9kJzsKICAgICAgICAgICAgc2VsZjo6JGJ1aWx0SW5Gb3JtYXRzWzMwXSA9ICdtL2QveXknOwogICAgICAgICAgICBzZWxmOjokYnVpbHRJbkZvcm1hdHNbMzZdID0gJ1skLTQwNF1lL20vZCc7CiAgICAgICAgICAgIHNlbGY6OiRidWlsdEluRm9ybWF0c1s1MF0gPSAnWyQtNDA0XWUvbS9kJzsKICAgICAgICAgICAgc2VsZjo6JGJ1aWx0SW5Gb3JtYXRzWzU3XSA9ICdbJC00MDRdZS9tL2QnOwoKICAgICAgICAgICAgLy8gVEhBCiAgICAgICAgICAgIHNlbGY6OiRidWlsdEluRm9ybWF0c1s1OV0gPSAndDAnOwogICAgICAgICAgICBzZWxmOjokYnVpbHRJbkZvcm1hdHNbNjBdID0gJ3QwLjAwJzsKICAgICAgICAgICAgc2VsZjo6JGJ1aWx0SW5Gb3JtYXRzWzYxXSA9ICd0IywjIzAnOwogICAgICAgICAgICBzZWxmOjokYnVpbHRJbkZvcm1hdHNbNjJdID0gJ3QjLCMjMC4wMCc7CiAgICAgICAgICAgIHNlbGY6OiRidWlsdEluRm9ybWF0c1s2N10gPSAndDAlJzsKICAgICAgICAgICAgc2VsZjo6JGJ1aWx0SW5Gb3JtYXRzWzY4XSA9ICd0MC4wMCUnOwogICAgICAgICAgICBzZWxmOjokYnVpbHRJbkZvcm1hdHNbNjldID0gJ3QjID8vPyc7CiAgICAgICAgICAgIHNlbGY6OiRidWlsdEluRm9ybWF0c1s3MF0gPSAndCMgPz8vPz8nOwoKICAgICAgICAgICAgLy8gRmxpcCBhcnJheSAoZm9yIGZhc3RlciBsb29rdXBzKQogICAgICAgICAgICBzZWxmOjokZmxpcHBlZEJ1aWx0SW5Gb3JtYXRzID0gYXJyYXlfZmxpcChzZWxmOjokYnVpbHRJbkZvcm1hdHMpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEdldCBidWlsdC1pbiBmb3JtYXQgY29kZQogICAgICoKICAgICAqIEBwYXJhbSAgICBpbnQgICAgICAgICRwSW5kZXgKICAgICAqIEByZXR1cm4gICAgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gYnVpbHRJbkZvcm1hdENvZGUoJHBJbmRleCkKICAgIHsKICAgICAgICAvLyBDbGVhbiBwYXJhbWV0ZXIKICAgICAgICAkcEluZGV4ID0gaW50dmFsKCRwSW5kZXgpOwoKICAgICAgICAvLyBFbnN1cmUgYnVpbHQtaW4gZm9ybWF0IGNvZGVzIGFyZSBhdmFpbGFibGUKICAgICAgICBzZWxmOjpmaWxsQnVpbHRJbkZvcm1hdENvZGVzKCk7CiAgICAgICAgLy8gTG9va3VwIGZvcm1hdCBjb2RlCiAgICAgICAgaWYgKGlzc2V0KHNlbGY6OiRidWlsdEluRm9ybWF0c1skcEluZGV4XSkpIHsKICAgICAgICAgICAgcmV0dXJuIHNlbGY6OiRidWlsdEluRm9ybWF0c1skcEluZGV4XTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAnJzsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBidWlsdC1pbiBmb3JtYXQgY29kZSBpbmRleAogICAgICoKICAgICAqIEBwYXJhbSAgICBzdHJpbmcgICAgICAgICRmb3JtYXRDb2RlCiAgICAgKiBAcmV0dXJuICAgIGludHxib29sZWFuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gYnVpbHRJbkZvcm1hdENvZGVJbmRleCgkZm9ybWF0Q29kZSkKICAgIHsKICAgICAgICAvLyBFbnN1cmUgYnVpbHQtaW4gZm9ybWF0IGNvZGVzIGFyZSBhdmFpbGFibGUKICAgICAgICBzZWxmOjpmaWxsQnVpbHRJbkZvcm1hdENvZGVzKCk7CgogICAgICAgIC8vIExvb2t1cCBmb3JtYXQgY29kZQogICAgICAgIGlmIChpc3NldChzZWxmOjokZmxpcHBlZEJ1aWx0SW5Gb3JtYXRzWyRmb3JtYXRDb2RlXSkpIHsKICAgICAgICAgICAgcmV0dXJuIHNlbGY6OiRmbGlwcGVkQnVpbHRJbkZvcm1hdHNbJGZvcm1hdENvZGVdOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IGhhc2ggY29kZQogICAgICoKICAgICAqIEByZXR1cm4gc3RyaW5nICAgIEhhc2ggY29kZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0SGFzaENvZGUoKQogICAgewogICAgICAgIGlmICgkdGhpcy0+aXNTdXBlcnZpc29yKSB7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+Z2V0U2hhcmVkQ29tcG9uZW50KCktPmdldEhhc2hDb2RlKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBtZDUoCiAgICAgICAgICAgICR0aGlzLT5mb3JtYXRDb2RlIC4KICAgICAgICAgICAgJHRoaXMtPmJ1aWx0SW5Gb3JtYXRDb2RlIC4KICAgICAgICAgICAgX19DTEFTU19fCiAgICAgICAgKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNlYXJjaC9yZXBsYWNlIHZhbHVlcyB0byBjb252ZXJ0IEV4Y2VsIGRhdGUvdGltZSBmb3JtYXQgbWFza3MgdG8gUEhQIGZvcm1hdCBtYXNrcwogICAgICoKICAgICAqIEB2YXIgYXJyYXkKICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgJGRhdGVGb3JtYXRSZXBsYWNlbWVudHMgPSBhcnJheSgKICAgICAgICAgICAgLy8gZmlyc3QgcmVtb3ZlIGVzY2FwZXMgcmVsYXRlZCB0byBub24tZm9ybWF0IGNoYXJhY3RlcnMKICAgICAgICAgICAgJ1xcJyAgICA9PiAnJywKICAgICAgICAgICAgLy8gICAgMTItaG91ciBzdWZmaXgKICAgICAgICAgICAgJ2FtL3BtJyA9PiAnQScsCiAgICAgICAgICAgIC8vICAgIDQtZGlnaXQgeWVhcgogICAgICAgICAgICAnZScgICAgID0+ICdZJywKICAgICAgICAgICAgJ3l5eXknICA9PiAnWScsCiAgICAgICAgICAgIC8vICAgIDItZGlnaXQgeWVhcgogICAgICAgICAgICAneXknICAgID0+ICd5JywKICAgICAgICAgICAgLy8gICAgZmlyc3QgbGV0dGVyIG9mIG1vbnRoIC0gbm8gcGhwIGVxdWl2YWxlbnQKICAgICAgICAgICAgJ21tbW1tJyA9PiAnTScsCiAgICAgICAgICAgIC8vICAgIGZ1bGwgbW9udGggbmFtZQogICAgICAgICAgICAnbW1tbScgID0+ICdGJywKICAgICAgICAgICAgLy8gICAgc2hvcnQgbW9udGggbmFtZQogICAgICAgICAgICAnbW1tJyAgID0+ICdNJywKICAgICAgICAgICAgLy8gICAgbW0gaXMgbWludXRlcyBpZiB0aW1lLCBidXQgY2FuIGFsc28gYmUgbW9udGggdy9sZWFkaW5nIHplcm8KICAgICAgICAgICAgLy8gICAgc28gd2UgdHJ5IHRvIGlkZW50aWZ5IHRpbWVzIGJlIHRoZSBpbmNsdXNpb24gb2YgYSA6IHNlcGFyYXRvciBpbiB0aGUgbWFzawogICAgICAgICAgICAvLyAgICBJdCBpc24ndCBwZXJmZWN0LCBidXQgdGhlIGJlc3Qgd2F5IEkga25vdyBob3cKICAgICAgICAgICAgJzptbScgICA9PiAnOmknLAogICAgICAgICAgICAnbW06JyAgID0+ICdpOicsCiAgICAgICAgICAgIC8vICAgIG1vbnRoIGxlYWRpbmcgemVybwogICAgICAgICAgICAnbW0nICAgID0+ICdtJywKICAgICAgICAgICAgLy8gICAgbW9udGggbm8gbGVhZGluZyB6ZXJvCiAgICAgICAgICAgICdtJyAgICAgPT4gJ24nLAogICAgICAgICAgICAvLyAgICBmdWxsIGRheSBvZiB3ZWVrIG5hbWUKICAgICAgICAgICAgJ2RkZGQnICA9PiAnbCcsCiAgICAgICAgICAgIC8vICAgIHNob3J0IGRheSBvZiB3ZWVrIG5hbWUKICAgICAgICAgICAgJ2RkZCcgICA9PiAnRCcsCiAgICAgICAgICAgIC8vICAgIGRheXMgbGVhZGluZyB6ZXJvCiAgICAgICAgICAgICdkZCcgICAgPT4gJ2QnLAogICAgICAgICAgICAvLyAgICBkYXlzIG5vIGxlYWRpbmcgemVybwogICAgICAgICAgICAnZCcgICAgID0+ICdqJywKICAgICAgICAgICAgLy8gICAgc2Vjb25kcwogICAgICAgICAgICAnc3MnICAgID0+ICdzJywKICAgICAgICAgICAgLy8gICAgZnJhY3Rpb25hbCBzZWNvbmRzIC0gbm8gcGhwIGVxdWl2YWxlbnQKICAgICAgICAgICAgJy5zJyAgICA9PiAnJwogICAgICAgICk7CiAgICAvKioKICAgICAqIFNlYXJjaC9yZXBsYWNlIHZhbHVlcyB0byBjb252ZXJ0IEV4Y2VsIGRhdGUvdGltZSBmb3JtYXQgbWFza3MgaG91cnMgdG8gUEhQIGZvcm1hdCBtYXNrcyAoMjQgaHIgY2xvY2spCiAgICAgKgogICAgICogQHZhciBhcnJheQogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyAkZGF0ZUZvcm1hdFJlcGxhY2VtZW50czI0ID0gYXJyYXkoCiAgICAgICAgICAgICdoaCcgPT4gJ0gnLAogICAgICAgICAgICAnaCcgID0+ICdHJwogICAgICAgICk7CiAgICAvKioKICAgICAqIFNlYXJjaC9yZXBsYWNlIHZhbHVlcyB0byBjb252ZXJ0IEV4Y2VsIGRhdGUvdGltZSBmb3JtYXQgbWFza3MgaG91cnMgdG8gUEhQIGZvcm1hdCBtYXNrcyAoMTIgaHIgY2xvY2spCiAgICAgKgogICAgICogQHZhciBhcnJheQogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyAkZGF0ZUZvcm1hdFJlcGxhY2VtZW50czEyID0gYXJyYXkoCiAgICAgICAgICAgICdoaCcgPT4gJ2gnLAogICAgICAgICAgICAnaCcgID0+ICdnJwogICAgICAgICk7CgogICAgcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gc2V0TG93ZXJjYXNlQ2FsbGJhY2soJG1hdGNoZXMpIHsKICAgICAgICByZXR1cm4gbWJfc3RydG9sb3dlcigkbWF0Y2hlc1swXSk7CiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gZXNjYXBlUXVvdGVzQ2FsbGJhY2soJG1hdGNoZXMpIHsKICAgICAgICByZXR1cm4gJ1xcJyAuIGltcGxvZGUoJ1xcJywgc3RyX3NwbGl0KCRtYXRjaGVzWzFdKSk7CiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gZm9ybWF0QXNEYXRlKCYkdmFsdWUsICYkZm9ybWF0KQogICAgewogICAgICAgIC8vIHN0cmlwIG9mZiBmaXJzdCBwYXJ0IGNvbnRhaW5pbmcgZS5nLiBbJC1GODAwXSBvciBbJFVTRC00MDldCiAgICAgICAgLy8gZ2VuZXJhbCBzeW50YXg6IFskPEN1cnJlbmN5IHN0cmluZz4tPGxhbmd1YWdlIGluZm8+XQogICAgICAgIC8vIGxhbmd1YWdlIGluZm8gaXMgaW4gaGV4YWRlY2ltYWwKICAgICAgICAkZm9ybWF0ID0gcHJlZ19yZXBsYWNlKCcvXihcW1wkW0EtWl0qLVswLTlBLUZdKlxdKS9pJywgJycsICRmb3JtYXQpOwoKICAgICAgICAvLyBPcGVuT2ZmaWNlLm9yZyB1c2VzIHVwcGVyLWNhc2UgbnVtYmVyIGZvcm1hdHMsIGUuZy4gJ1lZWVknLCBjb252ZXJ0IHRvIGxvd2VyLWNhc2U7CiAgICAgICAgLy8gICAgYnV0IHdlIGRvbid0IHdhbnQgdG8gY2hhbmdlIGFueSBxdW90ZWQgc3RyaW5ncwogICAgICAgICRmb3JtYXQgPSBwcmVnX3JlcGxhY2VfY2FsbGJhY2soJy8oPzpefCIpKFteIl0qKSg\/OiR8IikvJywgYXJyYXkoJ3NlbGYnLCAnc2V0TG93ZXJjYXNlQ2FsbGJhY2snKSwgJGZvcm1hdCk7CgogICAgICAgIC8vIE9ubHkgcHJvY2VzcyB0aGUgbm9uLXF1b3RlZCBibG9ja3MgZm9yIGRhdGUgZm9ybWF0IGNoYXJhY3RlcnMKICAgICAgICAkYmxvY2tzID0gZXhwbG9kZSgnIicsICRmb3JtYXQpOwogICAgICAgIGZvcmVhY2goJGJsb2NrcyBhcyAka2V5ID0+ICYkYmxvY2spIHsKICAgICAgICAgICAgaWYgKCRrZXkgJSAyID09IDApIHsKICAgICAgICAgICAgICAgICRibG9jayA9IHN0cnRyKCRibG9jaywgc2VsZjo6JGRhdGVGb3JtYXRSZXBsYWNlbWVudHMpOwogICAgICAgICAgICAgICAgaWYgKCFzdHJwb3MoJGJsb2NrLCAnQScpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gMjQtaG91ciB0aW1lIGZvcm1hdAogICAgICAgICAgICAgICAgICAgICRibG9jayA9IHN0cnRyKCRibG9jaywgc2VsZjo6JGRhdGVGb3JtYXRSZXBsYWNlbWVudHMyNCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIDEyLWhvdXIgdGltZSBmb3JtYXQKICAgICAgICAgICAgICAgICAgICAkYmxvY2sgPSBzdHJ0cigkYmxvY2ssIHNlbGY6OiRkYXRlRm9ybWF0UmVwbGFjZW1lbnRzMTIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICRmb3JtYXQgPSBpbXBsb2RlKCciJywgJGJsb2Nrcyk7CgogICAgICAgIC8vIGVzY2FwZSBhbnkgcXVvdGVkIGNoYXJhY3RlcnMgc28gdGhhdCBEYXRlVGltZSBmb3JtYXQoKSB3aWxsIHJlbmRlciB0aGVtIGNvcnJlY3RseQogICAgICAgICRmb3JtYXQgPSBwcmVnX3JlcGxhY2VfY2FsbGJhY2soJy8iKC4qKSIvVScsIGFycmF5KCdzZWxmJywgJ2VzY2FwZVF1b3Rlc0NhbGxiYWNrJyksICRmb3JtYXQpOwoKICAgICAgICAkZGF0ZU9iaiA9IFBIUEV4Y2VsX1NoYXJlZF9EYXRlOjpFeGNlbFRvUEhQT2JqZWN0KCR2YWx1ZSk7CiAgICAgICAgJHZhbHVlID0gJGRhdGVPYmotPmZvcm1hdCgkZm9ybWF0KTsKICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiBmb3JtYXRBc1BlcmNlbnRhZ2UoJiR2YWx1ZSwgJiRmb3JtYXQpCiAgICB7CiAgICAgICAgaWYgKCRmb3JtYXQgPT09IHNlbGY6OkZPUk1BVF9QRVJDRU5UQUdFKSB7CiAgICAgICAgICAgICR2YWx1ZSA9IHJvdW5kKCgxMDAgKiAkdmFsdWUpLCAwKSAuICclJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAocHJlZ19tYXRjaCgnL1wuWyMwXSsvaScsICRmb3JtYXQsICRtKSkgewogICAgICAgICAgICAgICAgJHMgPSBzdWJzdHIoJG1bMF0sIDAsIDEpIC4gKHN0cmxlbigkbVswXSkgLSAxKTsKICAgICAgICAgICAgICAgICRmb3JtYXQgPSBzdHJfcmVwbGFjZSgkbVswXSwgJHMsICRmb3JtYXQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChwcmVnX21hdGNoKCcvXlsjMF0rLycsICRmb3JtYXQsICRtKSkgewogICAgICAgICAgICAgICAgJGZvcm1hdCA9IHN0cl9yZXBsYWNlKCRtWzBdLCBzdHJsZW4oJG1bMF0pLCAkZm9ybWF0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkZm9ybWF0ID0gJyUnIC4gc3RyX3JlcGxhY2UoJyUnLCAnZiUlJywgJGZvcm1hdCk7CgogICAgICAgICAgICAkdmFsdWUgPSBzcHJpbnRmKCRmb3JtYXQsIDEwMCAqICR2YWx1ZSk7CiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGZvcm1hdEFzRnJhY3Rpb24oJiR2YWx1ZSwgJiRmb3JtYXQpCiAgICB7CiAgICAgICAgJHNpZ24gPSAoJHZhbHVlIDwgMCkgPyAnLScgOiAnJzsKCiAgICAgICAgJGludGVnZXJQYXJ0ID0gZmxvb3IoYWJzKCR2YWx1ZSkpOwogICAgICAgICRkZWNpbWFsUGFydCA9IHRyaW0oZm1vZChhYnMoJHZhbHVlKSwgMSksICcwLicpOwogICAgICAgICRkZWNpbWFsTGVuZ3RoID0gc3RybGVuKCRkZWNpbWFsUGFydCk7CiAgICAgICAgJGRlY2ltYWxEaXZpc29yID0gcG93KDEwLCAkZGVjaW1hbExlbmd0aCk7CgogICAgICAgICRHQ0QgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9NYXRoVHJpZzo6R0NEKCRkZWNpbWFsUGFydCwgJGRlY2ltYWxEaXZpc29yKTsKCiAgICAgICAgJGFkanVzdGVkRGVjaW1hbFBhcnQgPSAkZGVjaW1hbFBhcnQvJEdDRDsKICAgICAgICAkYWRqdXN0ZWREZWNpbWFsRGl2aXNvciA9ICRkZWNpbWFsRGl2aXNvci8kR0NEOwoKICAgICAgICBpZiAoKHN0cnBvcygkZm9ybWF0LCAnMCcpICE9PSBmYWxzZSkgfHwgKHN0cnBvcygkZm9ybWF0LCAnIycpICE9PSBmYWxzZSkgfHwgKHN1YnN0cigkZm9ybWF0LCAwLCAzKSA9PSAnPyA\/JykpIHsKICAgICAgICAgICAgaWYgKCRpbnRlZ2VyUGFydCA9PSAwKSB7CiAgICAgICAgICAgICAgICAkaW50ZWdlclBhcnQgPSAnJzsKICAgICAgICAgICAgfQogICAgICAgICAgICAkdmFsdWUgPSAiJHNpZ24kaW50ZWdlclBhcnQgJGFkanVzdGVkRGVjaW1hbFBhcnQvJGFkanVzdGVkRGVjaW1hbERpdmlzb3IiOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICRhZGp1c3RlZERlY2ltYWxQYXJ0ICs9ICRpbnRlZ2VyUGFydCAqICRhZGp1c3RlZERlY2ltYWxEaXZpc29yOwogICAgICAgICAgICAkdmFsdWUgPSAiJHNpZ24kYWRqdXN0ZWREZWNpbWFsUGFydC8kYWRqdXN0ZWREZWNpbWFsRGl2aXNvciI7CiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGNvbXBsZXhOdW1iZXJGb3JtYXRNYXNrKCRudW1iZXIsICRtYXNrLCAkbGV2ZWwgPSAwKQogICAgewogICAgICAgICRzaWduID0gKCRudW1iZXIgPCAwLjApOwogICAgICAgICRudW1iZXIgPSBhYnMoJG51bWJlcik7CiAgICAgICAgaWYgKHN0cnBvcygkbWFzaywgJy4nKSAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgJG51bWJlcnMgPSBleHBsb2RlKCcuJywgJG51bWJlciAuICcuMCcpOwogICAgICAgICAgICAkbWFza3MgPSBleHBsb2RlKCcuJywgJG1hc2sgLiAnLjAnKTsKICAgICAgICAgICAgJHJlc3VsdDEgPSBzZWxmOjpjb21wbGV4TnVtYmVyRm9ybWF0TWFzaygkbnVtYmVyc1swXSwgJG1hc2tzWzBdLCAxKTsKICAgICAgICAgICAgJHJlc3VsdDIgPSBzdHJyZXYoc2VsZjo6Y29tcGxleE51bWJlckZvcm1hdE1hc2soc3RycmV2KCRudW1iZXJzWzFdKSwgc3RycmV2KCRtYXNrc1sxXSksIDEpKTsKICAgICAgICAgICAgcmV0dXJuICgoJHNpZ24pID8gJy0nIDogJycpIC4gJHJlc3VsdDEgLiAnLicgLiAkcmVzdWx0MjsKICAgICAgICB9CgogICAgICAgICRyID0gcHJlZ19tYXRjaF9hbGwoJy8wKy8nLCAkbWFzaywgJHJlc3VsdCwgUFJFR19PRkZTRVRfQ0FQVFVSRSk7CiAgICAgICAgaWYgKCRyID4gMSkgewogICAgICAgICAgICAkcmVzdWx0ID0gYXJyYXlfcmV2ZXJzZSgkcmVzdWx0WzBdKTsKCiAgICAgICAgICAgIGZvcmVhY2ggKCRyZXN1bHQgYXMgJGJsb2NrKSB7CiAgICAgICAgICAgICAgICAkZGl2aXNvciA9IDEgLiAkYmxvY2tbMF07CiAgICAgICAgICAgICAgICAkc2l6ZSA9IHN0cmxlbigkYmxvY2tbMF0pOwogICAgICAgICAgICAgICAgJG9mZnNldCA9ICRibG9ja1sxXTsKCiAgICAgICAgICAgICAgICAkYmxvY2tWYWx1ZSA9IHNwcmludGYoCiAgICAgICAgICAgICAgICAgICAgJyUwJyAuICRzaXplIC4gJ2QnLAogICAgICAgICAgICAgICAgICAgIGZtb2QoJG51bWJlciwgJGRpdmlzb3IpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgJG51bWJlciA9IGZsb29yKCRudW1iZXIgLyAkZGl2aXNvcik7CiAgICAgICAgICAgICAgICAkbWFzayA9IHN1YnN0cl9yZXBsYWNlKCRtYXNrLCAkYmxvY2tWYWx1ZSwgJG9mZnNldCwgJHNpemUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgkbnVtYmVyID4gMCkgewogICAgICAgICAgICAgICAgJG1hc2sgPSBzdWJzdHJfcmVwbGFjZSgkbWFzaywgJG51bWJlciwgJG9mZnNldCwgMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJHJlc3VsdCA9ICRtYXNrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICRyZXN1bHQgPSAkbnVtYmVyOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICgoJHNpZ24pID8gJy0nIDogJycpIC4gJHJlc3VsdDsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnZlcnQgYSB2YWx1ZSBpbiBhIHByZS1kZWZpbmVkIGZvcm1hdCB0byBhIFBIUCBzdHJpbmcKICAgICAqCiAgICAgKiBAcGFyYW0gbWl4ZWQgICAgJHZhbHVlICAgICAgICBWYWx1ZSB0byBmb3JtYXQKICAgICAqIEBwYXJhbSBzdHJpbmcgICAgJGZvcm1hdCAgICAgICAgRm9ybWF0IGNvZGUKICAgICAqIEBwYXJhbSBhcnJheSAgICAgICAgJGNhbGxCYWNrICAgIENhbGxiYWNrIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGZvcm1hdHRpbmcgb2Ygc3RyaW5nCiAgICAgKiBAcmV0dXJuIHN0cmluZyAgICBGb3JtYXR0ZWQgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gdG9Gb3JtYXR0ZWRTdHJpbmcoJHZhbHVlID0gJzAnLCAkZm9ybWF0ID0gUEhQRXhjZWxfU3R5bGVfTnVtYmVyRm9ybWF0OjpGT1JNQVRfR0VORVJBTCwgJGNhbGxCYWNrID0gbnVsbCkKICAgIHsKICAgICAgICAvLyBGb3Igbm93IHdlIGRvIG5vdCB0cmVhdCBzdHJpbmdzIGFsdGhvdWdoIHNlY3Rpb24gNCBvZiBhIGZvcm1hdCBjb2RlIGFmZmVjdHMgc3RyaW5ncwogICAgICAgIGlmICghaXNfbnVtZXJpYygkdmFsdWUpKSB7CiAgICAgICAgICAgIHJldHVybiAkdmFsdWU7CiAgICAgICAgfQoKICAgICAgICAvLyBGb3IgJ0dlbmVyYWwnIGZvcm1hdCBjb2RlLCB3ZSBqdXN0IHBhc3MgdGhlIHZhbHVlIGFsdGhvdWdoIHRoaXMgaXMgbm90IGVudGlyZWx5IHRoZSB3YXkgRXhjZWwgZG9lcyBpdCwKICAgICAgICAvLyBpdCBzZWVtcyB0byByb3VuZCBudW1iZXJzIHRvIGEgdG90YWwgb2YgMTAgZGlnaXRzLgogICAgICAgIGlmICgoJGZvcm1hdCA9PT0gUEhQRXhjZWxfU3R5bGVfTnVtYmVyRm9ybWF0OjpGT1JNQVRfR0VORVJBTCkgfHwgKCRmb3JtYXQgPT09IFBIUEV4Y2VsX1N0eWxlX051bWJlckZvcm1hdDo6Rk9STUFUX1RFWFQpKSB7CiAgICAgICAgICAgIHJldHVybiAkdmFsdWU7CiAgICAgICAgfQoKICAgICAgICAvLyBDb252ZXJ0IGFueSBvdGhlciBlc2NhcGVkIGNoYXJhY3RlcnMgdG8gcXVvdGVkIHN0cmluZ3MsIGUuZy4gKFxUIHRvICJUIikKICAgICAgICAkZm9ybWF0ID0gcHJlZ19yZXBsYWNlKCcvKFxcXCguKSkoPz0oPzpbXiJdfCJbXiJdKiIpKiQpL3UnLCAnIiR7Mn0iJywgJGZvcm1hdCk7CgogICAgICAgIC8vIEdldCB0aGUgc2VjdGlvbnMsIHRoZXJlIGNhbiBiZSB1cCB0byBmb3VyIHNlY3Rpb25zLCBzZXBhcmF0ZWQgd2l0aCBhIHNlbWktY29sb24gKGJ1dCBvbmx5IGlmIG5vdCBhIHF1b3RlZCBsaXRlcmFsKQogICAgICAgICRzZWN0aW9ucyA9IHByZWdfc3BsaXQoJy8oOykoPz0oPzpbXiJdfCJbXiJdKiIpKiQpL3UnLCAkZm9ybWF0KTsKCiAgICAgICAgLy8gRXh0cmFjdCB0aGUgcmVsZXZhbnQgc2VjdGlvbiBkZXBlbmRpbmcgb24gd2hldGhlciBudW1iZXIgaXMgcG9zaXRpdmUsIG5lZ2F0aXZlLCBvciB6ZXJvPwogICAgICAgIC8vIFRleHQgbm90IHN1cHBvcnRlZCB5ZXQuCiAgICAgICAgLy8gSGVyZSBpcyBob3cgdGhlIHNlY3Rpb25zIGFwcGx5IHRvIHZhcmlvdXMgdmFsdWVzIGluIEV4Y2VsOgogICAgICAgIC8vICAgMSBzZWN0aW9uOiAgIFtQT1NJVElWRS9ORUdBVElWRS9aRVJPL1RFWFRdCiAgICAgICAgLy8gICAyIHNlY3Rpb25zOiAgW1BPU0lUSVZFL1pFUk8vVEVYVF0gW05FR0FUSVZFXQogICAgICAgIC8vICAgMyBzZWN0aW9uczogIFtQT1NJVElWRS9URVhUXSBbTkVHQVRJVkVdIFtaRVJPXQogICAgICAgIC8vICAgNCBzZWN0aW9uczogIFtQT1NJVElWRV0gW05FR0FUSVZFXSBbWkVST10gW1RFWFRdCiAgICAgICAgc3dpdGNoIChjb3VudCgkc2VjdGlvbnMpKSB7CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICRmb3JtYXQgPSAkc2VjdGlvbnNbMF07CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgJGZvcm1hdCA9ICgkdmFsdWUgPj0gMCkgPyAkc2VjdGlvbnNbMF0gOiAkc2VjdGlvbnNbMV07CiAgICAgICAgICAgICAgICAkdmFsdWUgPSBhYnMoJHZhbHVlKTsgLy8gVXNlIHRoZSBhYnNvbHV0ZSB2YWx1ZQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICRmb3JtYXQgPSAoJHZhbHVlID4gMCkgPwogICAgICAgICAgICAgICAgICAgICRzZWN0aW9uc1swXSA6ICggKCR2YWx1ZSA8IDApID8KICAgICAgICAgICAgICAgICAgICAgICAgJHNlY3Rpb25zWzFdIDogJHNlY3Rpb25zWzJdKTsKICAgICAgICAgICAgICAgICR2YWx1ZSA9IGFicygkdmFsdWUpOyAvLyBVc2UgdGhlIGFic29sdXRlIHZhbHVlCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgJGZvcm1hdCA9ICgkdmFsdWUgPiAwKSA\/CiAgICAgICAgICAgICAgICAgICAgJHNlY3Rpb25zWzBdIDogKCAoJHZhbHVlIDwgMCkgPwogICAgICAgICAgICAgICAgICAgICAgICAkc2VjdGlvbnNbMV0gOiAkc2VjdGlvbnNbMl0pOwogICAgICAgICAgICAgICAgJHZhbHVlID0gYWJzKCR2YWx1ZSk7IC8vIFVzZSB0aGUgYWJzb2x1dGUgdmFsdWUKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgLy8gc29tZXRoaW5nIGlzIHdyb25nLCBqdXN0IHVzZSBmaXJzdCBzZWN0aW9uCiAgICAgICAgICAgICAgICAkZm9ybWF0ID0gJHNlY3Rpb25zWzBdOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICAvLyBJbiBFeGNlbCBmb3JtYXRzLCAiXyIgaXMgdXNlZCB0byBhZGQgc3BhY2luZywKICAgICAgICAvLyAgICBUaGUgZm9sbG93aW5nIGNoYXJhY3RlciBpbmRpY2F0ZXMgdGhlIHNpemUgb2YgdGhlIHNwYWNpbmcsIHdoaWNoIHdlIGNhbid0IGRvIGluIEhUTUwsIHNvIHdlIGp1c3QgdXNlIGEgc3RhbmRhcmQgc3BhY2UKICAgICAgICAkZm9ybWF0ID0gcHJlZ19yZXBsYWNlKCcvXy4vJywgJyAnLCAkZm9ybWF0KTsKCiAgICAgICAgLy8gU2F2ZSBmb3JtYXQgd2l0aCBjb2xvciBpbmZvcm1hdGlvbiBmb3IgbGF0ZXIgdXNlIGJlbG93CiAgICAgICAgJGZvcm1hdENvbG9yID0gJGZvcm1hdDsKCiAgICAgICAgLy8gU3RyaXAgY29sb3IgaW5mb3JtYXRpb24KICAgICAgICAkY29sb3JfcmVnZXggPSAnL15cXFtbYS16QS1aXStcXF0vJzsKICAgICAgICAkZm9ybWF0ID0gcHJlZ19yZXBsYWNlKCRjb2xvcl9yZWdleCwgJycsICRmb3JtYXQpOwoKICAgICAgICAvLyBMZXQncyBiZWdpbiBpbnNwZWN0aW5nIHRoZSBmb3JtYXQgYW5kIGNvbnZlcnRpbmcgdGhlIHZhbHVlIHRvIGEgZm9ybWF0dGVkIHN0cmluZwoKICAgICAgICAvLyAgQ2hlY2sgZm9yIGRhdGUvdGltZSBjaGFyYWN0ZXJzIChub3QgaW5zaWRlIHF1b3RlcykKICAgICAgICBpZiAocHJlZ19tYXRjaCgnLyhcW1wkW0EtWl0qLVswLTlBLUZdKlxdKSpbaG1zZHldKD89KD86W14iXXwiW14iXSoiKSokKS9taXUnLCAkZm9ybWF0LCAkbWF0Y2hlcykpIHsKICAgICAgICAgICAgLy8gZGF0ZXRpbWUgZm9ybWF0CiAgICAgICAgICAgIHNlbGY6OmZvcm1hdEFzRGF0ZSgkdmFsdWUsICRmb3JtYXQpOwogICAgICAgIH0gZWxzZWlmIChwcmVnX21hdGNoKCcvJSQvJywgJGZvcm1hdCkpIHsKICAgICAgICAgICAgLy8gJSBudW1iZXIgZm9ybWF0CiAgICAgICAgICAgIHNlbGY6OmZvcm1hdEFzUGVyY2VudGFnZSgkdmFsdWUsICRmb3JtYXQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmICgkZm9ybWF0ID09PSBzZWxmOjpGT1JNQVRfQ1VSUkVOQ1lfRVVSX1NJTVBMRSkgewogICAgICAgICAgICAgICAgJHZhbHVlID0gJ0VVUiAnIC4gc3ByaW50ZignJTEuMmYnLCAkdmFsdWUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gU29tZSBub24tbnVtYmVyIHN0cmluZ3MgYXJlIHF1b3RlZCwgc28gd2UnbGwgZ2V0IHJpZCBvZiB0aGUgcXVvdGVzLCBsaWtld2lzZSBhbnkgcG9zaXRpb25hbCAqIHN5bWJvbHMKICAgICAgICAgICAgICAgICRmb3JtYXQgPSBzdHJfcmVwbGFjZShhcnJheSgnIicsICcqJyksICcnLCAkZm9ybWF0KTsKCiAgICAgICAgICAgICAgICAvLyBGaW5kIG91dCBpZiB3ZSBuZWVkIHRob3VzYW5kcyBzZXBhcmF0b3IKICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgaW5kaWNhdGVkIGJ5IGEgY29tbWEgZW5jbG9zZWQgYnkgYSBkaWdpdCBwbGFjZWhvbGRlcjoKICAgICAgICAgICAgICAgIC8vICAgICAgICAjLCMgICBvciAgIDAsMAogICAgICAgICAgICAgICAgJHVzZVRob3VzYW5kcyA9IHByZWdfbWF0Y2goJy8oIywjfDAsMCkvJywgJGZvcm1hdCk7CiAgICAgICAgICAgICAgICBpZiAoJHVzZVRob3VzYW5kcykgewogICAgICAgICAgICAgICAgICAgICRmb3JtYXQgPSBwcmVnX3JlcGxhY2UoJy8wLDAvJywgJzAwJywgJGZvcm1hdCk7CiAgICAgICAgICAgICAgICAgICAgJGZvcm1hdCA9IHByZWdfcmVwbGFjZSgnLyMsIy8nLCAnIyMnLCAkZm9ybWF0KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBTY2FsZSB0aG91c2FuZHMsIG1pbGxpb25zLC4uLgogICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBpbmRpY2F0ZWQgYnkgYSBudW1iZXIgb2YgY29tbWFzIGFmdGVyIGEgZGlnaXQgcGxhY2Vob2xkZXI6CiAgICAgICAgICAgICAgICAvLyAgICAgICAgIywgICBvciAgICAwLjAsLAogICAgICAgICAgICAgICAgJHNjYWxlID0gMTsgLy8gc2FtZSBhcyBubyBzY2FsZQogICAgICAgICAgICAgICAgJG1hdGNoZXMgPSBhcnJheSgpOwogICAgICAgICAgICAgICAgaWYgKHByZWdfbWF0Y2goJy8oI3wwKSgsKykvJywgJGZvcm1hdCwgJG1hdGNoZXMpKSB7CiAgICAgICAgICAgICAgICAgICAgJHNjYWxlID0gcG93KDEwMDAsIHN0cmxlbigkbWF0Y2hlc1syXSkpOwoKICAgICAgICAgICAgICAgICAgICAvLyBzdHJpcCB0aGUgY29tbWFzCiAgICAgICAgICAgICAgICAgICAgJGZvcm1hdCA9IHByZWdfcmVwbGFjZSgnLzAsKy8nLCAnMCcsICRmb3JtYXQpOwogICAgICAgICAgICAgICAgICAgICRmb3JtYXQgPSBwcmVnX3JlcGxhY2UoJy8jLCsvJywgJyMnLCAkZm9ybWF0KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAocHJlZ19tYXRjaCgnLyM\/LipcP1wvXD8vJywgJGZvcm1hdCwgJG0pKSB7CiAgICAgICAgICAgICAgICAgICAgLy9lY2hvICdGb3JtYXQgbWFzayBpcyBmcmFjdGlvbmFsICcuJGZvcm1hdC4nIDxiciAvPic7CiAgICAgICAgICAgICAgICAgICAgaWYgKCR2YWx1ZSAhPSAoaW50KSR2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmOjpmb3JtYXRBc0ZyYWN0aW9uKCR2YWx1ZSwgJGZvcm1hdCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIHRoZSBudW1iZXIgaXRzZWxmCgogICAgICAgICAgICAgICAgICAgIC8vIHNjYWxlIG51bWJlcgogICAgICAgICAgICAgICAgICAgICR2YWx1ZSA9ICR2YWx1ZSAvICRzY2FsZTsKCiAgICAgICAgICAgICAgICAgICAgLy8gU3RyaXAgIwogICAgICAgICAgICAgICAgICAgICRmb3JtYXQgPSBwcmVnX3JlcGxhY2UoJy9cXCMvJywgJzAnLCAkZm9ybWF0KTsKCiAgICAgICAgICAgICAgICAgICAgJG4gPSAiL1xbW15cXV0rXF0vIjsKICAgICAgICAgICAgICAgICAgICAkbSA9IHByZWdfcmVwbGFjZSgkbiwgJycsICRmb3JtYXQpOwogICAgICAgICAgICAgICAgICAgICRudW1iZXJfcmVnZXggPSAiLygwKykoXC4\/KSgwKikvIjsKICAgICAgICAgICAgICAgICAgICBpZiAocHJlZ19tYXRjaCgkbnVtYmVyX3JlZ2V4LCAkbSwgJG1hdGNoZXMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRsZWZ0ID0gJG1hdGNoZXNbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICRkZWMgPSAkbWF0Y2hlc1syXTsKICAgICAgICAgICAgICAgICAgICAgICAgJHJpZ2h0ID0gJG1hdGNoZXNbM107CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBtaW5pbXVuIHdpZHRoIG9mIGZvcm1hdHRlZCBudW1iZXIgKGluY2x1ZGluZyBkb3QpCiAgICAgICAgICAgICAgICAgICAgICAgICRtaW5XaWR0aCA9IHN0cmxlbigkbGVmdCkgKyBzdHJsZW4oJGRlYykgKyBzdHJsZW4oJHJpZ2h0KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCR1c2VUaG91c2FuZHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR2YWx1ZSA9IG51bWJlcl9mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmxlbigkcmlnaHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBIUEV4Y2VsX1NoYXJlZF9TdHJpbmc6OmdldERlY2ltYWxTZXBhcmF0b3IoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQSFBFeGNlbF9TaGFyZWRfU3RyaW5nOjpnZXRUaG91c2FuZHNTZXBhcmF0b3IoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR2YWx1ZSA9IHByZWdfcmVwbGFjZSgkbnVtYmVyX3JlZ2V4LCAkdmFsdWUsICRmb3JtYXQpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZWdfbWF0Y2goJy9bMCNdRVsrLV0wL2knLCAkZm9ybWF0KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIFNjaWVudGlmaWMgZm9ybWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHZhbHVlID0gc3ByaW50ZignJTUuMkUnLCAkdmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlaWYgKHByZWdfbWF0Y2goJy8wKFteXGRcLl0rKTAvJywgJGZvcm1hdCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdmFsdWUgPSBzZWxmOjpjb21wbGV4TnVtYmVyRm9ybWF0TWFzaygkdmFsdWUsICRmb3JtYXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3ByaW50Zl9wYXR0ZXJuID0gIiUwJG1pbldpZHRoLiIgLiBzdHJsZW4oJHJpZ2h0KSAuICJmIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdmFsdWUgPSBzcHJpbnRmKCRzcHJpbnRmX3BhdHRlcm4sICR2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHZhbHVlID0gcHJlZ19yZXBsYWNlKCRudW1iZXJfcmVnZXgsICR2YWx1ZSwgJGZvcm1hdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAocHJlZ19tYXRjaCgnL1xbXCQoLiopXF0vdScsICRmb3JtYXQsICRtKSkgewogICAgICAgICAgICAgICAgICAgIC8vICBDdXJyZW5jeSBvciBBY2NvdW50aW5nCiAgICAgICAgICAgICAgICAgICAgJGN1cnJlbmN5Rm9ybWF0ID0gJG1bMF07CiAgICAgICAgICAgICAgICAgICAgJGN1cnJlbmN5Q29kZSA9ICRtWzFdOwogICAgICAgICAgICAgICAgICAgIGxpc3QoJGN1cnJlbmN5Q29kZSkgPSBleHBsb2RlKCctJywgJGN1cnJlbmN5Q29kZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCRjdXJyZW5jeUNvZGUgPT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGN1cnJlbmN5Q29kZSA9IFBIUEV4Y2VsX1NoYXJlZF9TdHJpbmc6OmdldEN1cnJlbmN5Q29kZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkdmFsdWUgPSBwcmVnX3JlcGxhY2UoJy9cW1wkKFteXF1dKilcXS91JywgJGN1cnJlbmN5Q29kZSwgJHZhbHVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gRXNjYXBlIGFueSBlc2NhcGVkIHNsYXNoZXMgdG8gYSBzaW5nbGUgc2xhc2gKICAgICAgICAkZm9ybWF0ID0gcHJlZ19yZXBsYWNlKCIvXFxcXC91IiwgJ1xcJywgJGZvcm1hdCk7CgogICAgICAgIC8vIEFkZGl0aW9uYWwgZm9ybWF0dGluZyBwcm92aWRlZCBieSBjYWxsYmFjayBmdW5jdGlvbgogICAgICAgIGlmICgkY2FsbEJhY2sgIT09IG51bGwpIHsKICAgICAgICAgICAgbGlzdCgkd3JpdGVySW5zdGFuY2UsICRmdW5jdGlvbikgPSAkY2FsbEJhY2s7CiAgICAgICAgICAgICR2YWx1ZSA9ICR3cml0ZXJJbnN0YW5jZS0+JGZ1bmN0aW9uKCR2YWx1ZSwgJGZvcm1hdENvbG9yKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAkdmFsdWU7CiAgICB9Cn0K",
    "size": "28488"
}