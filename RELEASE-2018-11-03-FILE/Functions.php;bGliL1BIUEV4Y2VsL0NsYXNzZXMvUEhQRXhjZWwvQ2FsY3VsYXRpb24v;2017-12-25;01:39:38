{
    "namaFile": "lib\/PHPExcel\/Classes\/PHPExcel\/Calculation\/Functions.php",
    "lastUpdate": "2017-12-25+01:39:38.00",
    "contentFile": "PD9waHAKCi8qKiBQSFBFeGNlbCByb290IGRpcmVjdG9yeSAqLwppZiAoIWRlZmluZWQoJ1BIUEVYQ0VMX1JPT1QnKSkgewogICAgLyoqCiAgICAgKiBAaWdub3JlCiAgICAgKi8KICAgIGRlZmluZSgnUEhQRVhDRUxfUk9PVCcsIGRpcm5hbWUoX19GSUxFX18pIC4gJy8uLi8uLi8nKTsKICAgIHJlcXVpcmUoUEhQRVhDRUxfUk9PVCAuICdQSFBFeGNlbC9BdXRvbG9hZGVyLnBocCcpOwp9CgoKLyoqIE1BWF9WQUxVRSAqLwpkZWZpbmUoJ01BWF9WQUxVRScsIDEuMmUzMDgpOwoKLyoqIDIgLyBQSSAqLwpkZWZpbmUoJ01fMkRJVlBJJywgMC42MzY2MTk3NzIzNjc1ODEzNDMwNzU1MzUwNTM0OTAwNik7CgovKiogTUFYX0lURVJBVElPTlMgKi8KZGVmaW5lKCdNQVhfSVRFUkFUSU9OUycsIDI1Nik7CgovKiogUFJFQ0lTSU9OICovCmRlZmluZSgnUFJFQ0lTSU9OJywgOC44OEUtMDE2KTsKCgovKioKICogUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zCiAqCiAqIENvcHlyaWdodCAoYykgMjAwNiAtIDIwMTUgUEhQRXhjZWwKICoKICogVGhpcyBsaWJyYXJ5IGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vcgogKiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljCiAqIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlcgogKiB2ZXJzaW9uIDIuMSBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KICoKICogVGhpcyBsaWJyYXJ5IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZSBHTlUKICogTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KICoKICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYwogKiBMaWNlbnNlIGFsb25nIHdpdGggdGhpcyBsaWJyYXJ5OyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlCiAqIEZvdW5kYXRpb24sIEluYy4sIDUxIEZyYW5rbGluIFN0cmVldCwgRmlmdGggRmxvb3IsIEJvc3RvbiwgTUEgMDIxMTAtMTMwMSBVU0EKICoKICogQGNhdGVnb3J5ICAgIFBIUEV4Y2VsCiAqIEBwYWNrYWdlICAgICAgICBQSFBFeGNlbF9DYWxjdWxhdGlvbgogKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAwNiAtIDIwMTUgUEhQRXhjZWwgKGh0dHA6Ly93d3cuY29kZXBsZXguY29tL1BIUEV4Y2VsKQogKiBAbGljZW5zZSAgICAgICAgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL29sZC1saWNlbnNlcy9sZ3BsLTIuMS50eHQgICAgTEdQTAogKiBAdmVyc2lvbiAgICAgICAgIyNWRVJTSU9OIyMsICMjREFURSMjCiAqLwpjbGFzcyBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnMKewoKICAgIC8qKiBjb25zdGFudHMgKi8KICAgIGNvbnN0IENPTVBBVElCSUxJVFlfRVhDRUwgICAgICA9ICdFeGNlbCc7CiAgICBjb25zdCBDT01QQVRJQklMSVRZX0dOVU1FUklDICAgPSAnR251bWVyaWMnOwogICAgY29uc3QgQ09NUEFUSUJJTElUWV9PUEVOT0ZGSUNFID0gJ09wZW5PZmZpY2VDYWxjJzsKCiAgICBjb25zdCBSRVRVUk5EQVRFX1BIUF9OVU1FUklDID0gJ1AnOwogICAgY29uc3QgUkVUVVJOREFURV9QSFBfT0JKRUNUICA9ICdPJzsKICAgIGNvbnN0IFJFVFVSTkRBVEVfRVhDRUwgICAgICAgPSAnRSc7CgoKICAgIC8qKgogICAgICogQ29tcGF0aWJpbGl0eSBtb2RlIHRvIHVzZSBmb3IgZXJyb3IgY2hlY2tpbmcgYW5kIHJlc3BvbnNlcwogICAgICoKICAgICAqIEBhY2Nlc3MgICAgcHJpdmF0ZQogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHJvdGVjdGVkIHN0YXRpYyAkY29tcGF0aWJpbGl0eU1vZGUgPSBzZWxmOjpDT01QQVRJQklMSVRZX0VYQ0VMOwoKICAgIC8qKgogICAgICogRGF0YSBUeXBlIHRvIHVzZSB3aGVuIHJldHVybmluZyBkYXRlIHZhbHVlcwogICAgICoKICAgICAqIEBhY2Nlc3MgICAgcHJpdmF0ZQogICAgICogQHZhciBzdHJpbmcKICAgICAqLwogICAgcHJvdGVjdGVkIHN0YXRpYyAkcmV0dXJuRGF0ZVR5cGUgPSBzZWxmOjpSRVRVUk5EQVRFX0VYQ0VMOwoKICAgIC8qKgogICAgICogTGlzdCBvZiBlcnJvciBjb2RlcwogICAgICoKICAgICAqIEBhY2Nlc3MgICAgcHJpdmF0ZQogICAgICogQHZhciBhcnJheQogICAgICovCiAgICBwcm90ZWN0ZWQgc3RhdGljICRlcnJvckNvZGVzID0gYXJyYXkoCiAgICAgICAgJ251bGwnICAgICAgICAgICA9PiAnI05VTEwhJywKICAgICAgICAnZGl2aXNpb25ieXplcm8nID0+ICcjRElWLzAhJywKICAgICAgICAndmFsdWUnICAgICAgICAgID0+ICcjVkFMVUUhJywKICAgICAgICAncmVmZXJlbmNlJyAgICAgID0+ICcjUkVGIScsCiAgICAgICAgJ25hbWUnICAgICAgICAgICA9PiAnI05BTUU\/JywKICAgICAgICAnbnVtJyAgICAgICAgICAgID0+ICcjTlVNIScsCiAgICAgICAgJ25hJyAgICAgICAgICAgICA9PiAnI04vQScsCiAgICAgICAgJ2dldHRpbmdkYXRhJyAgICA9PiAnI0dFVFRJTkdfREFUQScKICAgICk7CgoKICAgIC8qKgogICAgICogU2V0IHRoZSBDb21wYXRpYmlsaXR5IE1vZGUKICAgICAqCiAgICAgKiBAYWNjZXNzICAgIHB1YmxpYwogICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uIENvbmZpZ3VyYXRpb24KICAgICAqIEBwYXJhbSAgICAgc3RyaW5nICAgICAgICAkY29tcGF0aWJpbGl0eU1vZGUgICAgICAgIENvbXBhdGliaWxpdHkgTW9kZQogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQZXJtaXR0ZWQgdmFsdWVzIGFyZToKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6Q09NUEFUSUJJTElUWV9FWENFTCAgICAgICAgICAgICdFeGNlbCcKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6Q09NUEFUSUJJTElUWV9HTlVNRVJJQyAgICAgICAgJ0dudW1lcmljJwogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpDT01QQVRJQklMSVRZX09QRU5PRkZJQ0UgICAgJ09wZW5PZmZpY2VDYWxjJwogICAgICogQHJldHVybiAgICAgYm9vbGVhbiAgICAoU3VjY2VzcyBvciBGYWlsdXJlKQogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHNldENvbXBhdGliaWxpdHlNb2RlKCRjb21wYXRpYmlsaXR5TW9kZSkKICAgIHsKICAgICAgICBpZiAoKCRjb21wYXRpYmlsaXR5TW9kZSA9PSBzZWxmOjpDT01QQVRJQklMSVRZX0VYQ0VMKSB8fAogICAgICAgICAgICAoJGNvbXBhdGliaWxpdHlNb2RlID09IHNlbGY6OkNPTVBBVElCSUxJVFlfR05VTUVSSUMpIHx8CiAgICAgICAgICAgICgkY29tcGF0aWJpbGl0eU1vZGUgPT0gc2VsZjo6Q09NUEFUSUJJTElUWV9PUEVOT0ZGSUNFKSkgewogICAgICAgICAgICBzZWxmOjokY29tcGF0aWJpbGl0eU1vZGUgPSAkY29tcGF0aWJpbGl0eU1vZGU7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBjdXJyZW50IENvbXBhdGliaWxpdHkgTW9kZQogICAgICoKICAgICAqIEBhY2Nlc3MgICAgcHVibGljCiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb24gQ29uZmlndXJhdGlvbgogICAgICogQHJldHVybiAgICAgc3RyaW5nICAgICAgICBDb21wYXRpYmlsaXR5IE1vZGUKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvc3NpYmxlIFJldHVybiB2YWx1ZXMgYXJlOgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6Q09NUEFUSUJJTElUWV9FWENFTCAgICAgICAgICAgICdFeGNlbCcKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OkNPTVBBVElCSUxJVFlfR05VTUVSSUMgICAgICAgICdHbnVtZXJpYycKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OkNPTVBBVElCSUxJVFlfT1BFTk9GRklDRSAgICAnT3Blbk9mZmljZUNhbGMnCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0Q29tcGF0aWJpbGl0eU1vZGUoKQogICAgewogICAgICAgIHJldHVybiBzZWxmOjokY29tcGF0aWJpbGl0eU1vZGU7CiAgICB9CgoKICAgIC8qKgogICAgICogU2V0IHRoZSBSZXR1cm4gRGF0ZSBGb3JtYXQgdXNlZCBieSBmdW5jdGlvbnMgdGhhdCByZXR1cm4gYSBkYXRlL3RpbWUgKEV4Y2VsLCBQSFAgU2VyaWFsaXplZCBOdW1lcmljIG9yIFBIUCBPYmplY3QpCiAgICAgKgogICAgICogQGFjY2VzcyAgICBwdWJsaWMKICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbiBDb25maWd1cmF0aW9uCiAgICAgKiBAcGFyYW0gICAgIHN0cmluZyAgICAkcmV0dXJuRGF0ZVR5cGUgICAgICAgICAgICBSZXR1cm4gRGF0ZSBGb3JtYXQKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGVybWl0dGVkIHZhbHVlcyBhcmU6CiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OlJFVFVSTkRBVEVfUEhQX05VTUVSSUMgICAgICAgICdQJwogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpSRVRVUk5EQVRFX1BIUF9PQkpFQ1QgICAgICAgICdPJwogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpSRVRVUk5EQVRFX0VYQ0VMICAgICAgICAgICAgJ0UnCiAgICAgKiBAcmV0dXJuICAgICBib29sZWFuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN1Y2Nlc3Mgb3IgZmFpbHVyZQogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHNldFJldHVybkRhdGVUeXBlKCRyZXR1cm5EYXRlVHlwZSkKICAgIHsKICAgICAgICBpZiAoKCRyZXR1cm5EYXRlVHlwZSA9PSBzZWxmOjpSRVRVUk5EQVRFX1BIUF9OVU1FUklDKSB8fAogICAgICAgICAgICAoJHJldHVybkRhdGVUeXBlID09IHNlbGY6OlJFVFVSTkRBVEVfUEhQX09CSkVDVCkgfHwKICAgICAgICAgICAgKCRyZXR1cm5EYXRlVHlwZSA9PSBzZWxmOjpSRVRVUk5EQVRFX0VYQ0VMKSkgewogICAgICAgICAgICBzZWxmOjokcmV0dXJuRGF0ZVR5cGUgPSAkcmV0dXJuRGF0ZVR5cGU7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBjdXJyZW50IFJldHVybiBEYXRlIEZvcm1hdCBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIGEgZGF0ZS90aW1lIChFeGNlbCwgUEhQIFNlcmlhbGl6ZWQgTnVtZXJpYyBvciBQSFAgT2JqZWN0KQogICAgICoKICAgICAqIEBhY2Nlc3MgICAgcHVibGljCiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb24gQ29uZmlndXJhdGlvbgogICAgICogQHJldHVybiAgICAgc3RyaW5nICAgICAgICBSZXR1cm4gRGF0ZSBGb3JtYXQKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvc3NpYmxlIFJldHVybiB2YWx1ZXMgYXJlOgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6UkVUVVJOREFURV9QSFBfTlVNRVJJQyAgICAgICAgJ1AnCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpSRVRVUk5EQVRFX1BIUF9PQkpFQ1QgICAgICAgICdPJwogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6UkVUVVJOREFURV9FWENFTCAgICAgICAgICAgICdFJwogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFJldHVybkRhdGVUeXBlKCkKICAgIHsKICAgICAgICByZXR1cm4gc2VsZjo6JHJldHVybkRhdGVUeXBlOwogICAgfQoKCiAgICAvKioKICAgICAqIERVTU1ZCiAgICAgKgogICAgICogQGFjY2VzcyAgICBwdWJsaWMKICAgICAqIEBjYXRlZ29yeSBFcnJvciBSZXR1cm5zCiAgICAgKiBAcmV0dXJuICAgIHN0cmluZyAgICAjTm90IFlldCBJbXBsZW1lbnRlZAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIERVTU1ZKCkKICAgIHsKICAgICAgICByZXR1cm4gJyNOb3QgWWV0IEltcGxlbWVudGVkJzsKICAgIH0KCgogICAgLyoqCiAgICAgKiBESVYwCiAgICAgKgogICAgICogQGFjY2VzcyAgICBwdWJsaWMKICAgICAqIEBjYXRlZ29yeSBFcnJvciBSZXR1cm5zCiAgICAgKiBAcmV0dXJuICAgIHN0cmluZyAgICAjTm90IFlldCBJbXBsZW1lbnRlZAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIERJVjAoKQogICAgewogICAgICAgIHJldHVybiBzZWxmOjokZXJyb3JDb2Rlc1snZGl2aXNpb25ieXplcm8nXTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBOQQogICAgICoKICAgICAqIEV4Y2VsIEZ1bmN0aW9uOgogICAgICogICAgICAgID1OQSgpCiAgICAgKgogICAgICogUmV0dXJucyB0aGUgZXJyb3IgdmFsdWUgI04vQQogICAgICogICAgICAgICNOL0EgaXMgdGhlIGVycm9yIHZhbHVlIHRoYXQgbWVhbnMgIm5vIHZhbHVlIGlzIGF2YWlsYWJsZS4iCiAgICAgKgogICAgICogQGFjY2VzcyAgICBwdWJsaWMKICAgICAqIEBjYXRlZ29yeSBMb2dpY2FsIEZ1bmN0aW9ucwogICAgICogQHJldHVybiAgICBzdHJpbmcgICAgI04vQSEKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBOQSgpCiAgICB7CiAgICAgICAgcmV0dXJuIHNlbGY6OiRlcnJvckNvZGVzWyduYSddOwogICAgfQoKCiAgICAvKioKICAgICAqIE5hTgogICAgICoKICAgICAqIFJldHVybnMgdGhlIGVycm9yIHZhbHVlICNOVU0hCiAgICAgKgogICAgICogQGFjY2VzcyAgICBwdWJsaWMKICAgICAqIEBjYXRlZ29yeSBFcnJvciBSZXR1cm5zCiAgICAgKiBAcmV0dXJuICAgIHN0cmluZyAgICAjTlVNIQogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIE5hTigpCiAgICB7CiAgICAgICAgcmV0dXJuIHNlbGY6OiRlcnJvckNvZGVzWydudW0nXTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBOQU1FCiAgICAgKgogICAgICogUmV0dXJucyB0aGUgZXJyb3IgdmFsdWUgI05BTUU\/CiAgICAgKgogICAgICogQGFjY2VzcyAgICBwdWJsaWMKICAgICAqIEBjYXRlZ29yeSBFcnJvciBSZXR1cm5zCiAgICAgKiBAcmV0dXJuICAgIHN0cmluZyAgICAjTkFNRT8KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBOQU1FKCkKICAgIHsKICAgICAgICByZXR1cm4gc2VsZjo6JGVycm9yQ29kZXNbJ25hbWUnXTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBSRUYKICAgICAqCiAgICAgKiBSZXR1cm5zIHRoZSBlcnJvciB2YWx1ZSAjUkVGIQogICAgICoKICAgICAqIEBhY2Nlc3MgICAgcHVibGljCiAgICAgKiBAY2F0ZWdvcnkgRXJyb3IgUmV0dXJucwogICAgICogQHJldHVybiAgICBzdHJpbmcgICAgI1JFRiEKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBSRUYoKQogICAgewogICAgICAgIHJldHVybiBzZWxmOjokZXJyb3JDb2Rlc1sncmVmZXJlbmNlJ107CiAgICB9CgoKICAgIC8qKgogICAgICogTlVMTAogICAgICoKICAgICAqIFJldHVybnMgdGhlIGVycm9yIHZhbHVlICNOVUxMIQogICAgICoKICAgICAqIEBhY2Nlc3MgICAgcHVibGljCiAgICAgKiBAY2F0ZWdvcnkgRXJyb3IgUmV0dXJucwogICAgICogQHJldHVybiAgICBzdHJpbmcgICAgI05VTEwhCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gTlVMTCgpCiAgICB7CiAgICAgICAgcmV0dXJuIHNlbGY6OiRlcnJvckNvZGVzWydudWxsJ107CiAgICB9CgoKICAgIC8qKgogICAgICogVkFMVUUKICAgICAqCiAgICAgKiBSZXR1cm5zIHRoZSBlcnJvciB2YWx1ZSAjVkFMVUUhCiAgICAgKgogICAgICogQGFjY2VzcyAgICBwdWJsaWMKICAgICAqIEBjYXRlZ29yeSBFcnJvciBSZXR1cm5zCiAgICAgKiBAcmV0dXJuICAgIHN0cmluZyAgICAjVkFMVUUhCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gVkFMVUUoKQogICAgewogICAgICAgIHJldHVybiBzZWxmOjokZXJyb3JDb2Rlc1sndmFsdWUnXTsKICAgIH0KCgogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc01hdHJpeFZhbHVlKCRpZHgpCiAgICB7CiAgICAgICAgcmV0dXJuICgoc3Vic3RyX2NvdW50KCRpZHgsICcuJykgPD0gMSkgfHwgKHByZWdfbWF0Y2goJy9cLltBLVpdLycsICRpZHgpID4gMCkpOwogICAgfQoKCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlzVmFsdWUoJGlkeCkKICAgIHsKICAgICAgICByZXR1cm4gKHN1YnN0cl9jb3VudCgkaWR4LCAnLicpID09IDApOwogICAgfQoKCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlzQ2VsbFZhbHVlKCRpZHgpCiAgICB7CiAgICAgICAgcmV0dXJuIChzdWJzdHJfY291bnQoJGlkeCwgJy4nKSA+IDEpOwogICAgfQoKCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlmQ29uZGl0aW9uKCRjb25kaXRpb24pCiAgICB7CiAgICAgICAgJGNvbmRpdGlvbiAgICA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCRjb25kaXRpb24pOwogICAgICAgIGlmICghaXNzZXQoJGNvbmRpdGlvbnswfSkpIHsKICAgICAgICAgICAgJGNvbmRpdGlvbiA9ICc9IiInOwogICAgICAgIH0KICAgICAgICBpZiAoIWluX2FycmF5KCRjb25kaXRpb257MH0sIGFycmF5KCc+JywgJzwnLCAnPScpKSkgewogICAgICAgICAgICBpZiAoIWlzX251bWVyaWMoJGNvbmRpdGlvbikpIHsKICAgICAgICAgICAgICAgICRjb25kaXRpb24gPSBQSFBFeGNlbF9DYWxjdWxhdGlvbjo6d3JhcFJlc3VsdChzdHJ0b3VwcGVyKCRjb25kaXRpb24pKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gJz0nIC4gJGNvbmRpdGlvbjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwcmVnX21hdGNoKCcvKFs8Pj1dKykoLiopLycsICRjb25kaXRpb24sICRtYXRjaGVzKTsKICAgICAgICAgICAgbGlzdCgsICRvcGVyYXRvciwgJG9wZXJhbmQpID0gJG1hdGNoZXM7CgogICAgICAgICAgICBpZiAoIWlzX251bWVyaWMoJG9wZXJhbmQpKSB7CiAgICAgICAgICAgICAgICAkb3BlcmFuZCA9IHN0cl9yZXBsYWNlKCciJywgJyIiJywgJG9wZXJhbmQpOwogICAgICAgICAgICAgICAgJG9wZXJhbmQgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbjo6d3JhcFJlc3VsdChzdHJ0b3VwcGVyKCRvcGVyYW5kKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiAkb3BlcmF0b3IuJG9wZXJhbmQ7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogRVJST1JfVFlQRQogICAgICoKICAgICAqIEBwYXJhbSAgICBtaXhlZCAgICAkdmFsdWUgICAgVmFsdWUgdG8gY2hlY2sKICAgICAqIEByZXR1cm4gICAgYm9vbGVhbgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIEVSUk9SX1RZUEUoJHZhbHVlID0gJycpCiAgICB7CiAgICAgICAgJHZhbHVlID0gc2VsZjo6ZmxhdHRlblNpbmdsZVZhbHVlKCR2YWx1ZSk7CgogICAgICAgICRpID0gMTsKICAgICAgICBmb3JlYWNoIChzZWxmOjokZXJyb3JDb2RlcyBhcyAkZXJyb3JDb2RlKSB7CiAgICAgICAgICAgIGlmICgkdmFsdWUgPT09ICRlcnJvckNvZGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiAkaTsKICAgICAgICAgICAgfQogICAgICAgICAgICArKyRpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc2VsZjo6TkEoKTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBJU19CTEFOSwogICAgICoKICAgICAqIEBwYXJhbSAgICBtaXhlZCAgICAkdmFsdWUgICAgVmFsdWUgdG8gY2hlY2sKICAgICAqIEByZXR1cm4gICAgYm9vbGVhbgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIElTX0JMQU5LKCR2YWx1ZSA9IG51bGwpCiAgICB7CiAgICAgICAgaWYgKCFpc19udWxsKCR2YWx1ZSkpIHsKICAgICAgICAgICAgJHZhbHVlICAgID0gc2VsZjo6ZmxhdHRlblNpbmdsZVZhbHVlKCR2YWx1ZSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gaXNfbnVsbCgkdmFsdWUpOwogICAgfQoKCiAgICAvKioKICAgICAqIElTX0VSUgogICAgICoKICAgICAqIEBwYXJhbSAgICBtaXhlZCAgICAkdmFsdWUgICAgVmFsdWUgdG8gY2hlY2sKICAgICAqIEByZXR1cm4gICAgYm9vbGVhbgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIElTX0VSUigkdmFsdWUgPSAnJykKICAgIHsKICAgICAgICAkdmFsdWUgPSBzZWxmOjpmbGF0dGVuU2luZ2xlVmFsdWUoJHZhbHVlKTsKCiAgICAgICAgcmV0dXJuIHNlbGY6OklTX0VSUk9SKCR2YWx1ZSkgJiYgKCFzZWxmOjpJU19OQSgkdmFsdWUpKTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBJU19FUlJPUgogICAgICoKICAgICAqIEBwYXJhbSAgICBtaXhlZCAgICAkdmFsdWUgICAgVmFsdWUgdG8gY2hlY2sKICAgICAqIEByZXR1cm4gICAgYm9vbGVhbgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIElTX0VSUk9SKCR2YWx1ZSA9ICcnKQogICAgewogICAgICAgICR2YWx1ZSA9IHNlbGY6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkdmFsdWUpOwoKICAgICAgICBpZiAoIWlzX3N0cmluZygkdmFsdWUpKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGluX2FycmF5KCR2YWx1ZSwgYXJyYXlfdmFsdWVzKHNlbGY6OiRlcnJvckNvZGVzKSk7CiAgICB9CgoKICAgIC8qKgogICAgICogSVNfTkEKICAgICAqCiAgICAgKiBAcGFyYW0gICAgbWl4ZWQgICAgJHZhbHVlICAgIFZhbHVlIHRvIGNoZWNrCiAgICAgKiBAcmV0dXJuICAgIGJvb2xlYW4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBJU19OQSgkdmFsdWUgPSAnJykKICAgIHsKICAgICAgICAkdmFsdWUgPSBzZWxmOjpmbGF0dGVuU2luZ2xlVmFsdWUoJHZhbHVlKTsKCiAgICAgICAgcmV0dXJuICgkdmFsdWUgPT09IHNlbGY6Ok5BKCkpOwogICAgfQoKCiAgICAvKioKICAgICAqIElTX0VWRU4KICAgICAqCiAgICAgKiBAcGFyYW0gICAgbWl4ZWQgICAgJHZhbHVlICAgIFZhbHVlIHRvIGNoZWNrCiAgICAgKiBAcmV0dXJuICAgIGJvb2xlYW4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBJU19FVkVOKCR2YWx1ZSA9IG51bGwpCiAgICB7CiAgICAgICAgJHZhbHVlID0gc2VsZjo6ZmxhdHRlblNpbmdsZVZhbHVlKCR2YWx1ZSk7CgogICAgICAgIGlmICgkdmFsdWUgPT09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIHNlbGY6Ok5BTUUoKTsKICAgICAgICB9IGVsc2VpZiAoKGlzX2Jvb2woJHZhbHVlKSkgfHwgKChpc19zdHJpbmcoJHZhbHVlKSkgJiYgKCFpc19udW1lcmljKCR2YWx1ZSkpKSkgewogICAgICAgICAgICByZXR1cm4gc2VsZjo6VkFMVUUoKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAoJHZhbHVlICUgMiA9PSAwKTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBJU19PREQKICAgICAqCiAgICAgKiBAcGFyYW0gICAgbWl4ZWQgICAgJHZhbHVlICAgIFZhbHVlIHRvIGNoZWNrCiAgICAgKiBAcmV0dXJuICAgIGJvb2xlYW4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBJU19PREQoJHZhbHVlID0gbnVsbCkKICAgIHsKICAgICAgICAkdmFsdWUgPSBzZWxmOjpmbGF0dGVuU2luZ2xlVmFsdWUoJHZhbHVlKTsKCiAgICAgICAgaWYgKCR2YWx1ZSA9PT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gc2VsZjo6TkFNRSgpOwogICAgICAgIH0gZWxzZWlmICgoaXNfYm9vbCgkdmFsdWUpKSB8fCAoKGlzX3N0cmluZygkdmFsdWUpKSAmJiAoIWlzX251bWVyaWMoJHZhbHVlKSkpKSB7CiAgICAgICAgICAgIHJldHVybiBzZWxmOjpWQUxVRSgpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIChhYnMoJHZhbHVlKSAlIDIgPT0gMSk7CiAgICB9CgoKICAgIC8qKgogICAgICogSVNfTlVNQkVSCiAgICAgKgogICAgICogQHBhcmFtICAgIG1peGVkICAgICR2YWx1ZSAgICAgICAgVmFsdWUgdG8gY2hlY2sKICAgICAqIEByZXR1cm4gICAgYm9vbGVhbgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIElTX05VTUJFUigkdmFsdWUgPSBudWxsKQogICAgewogICAgICAgICR2YWx1ZSA9IHNlbGY6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkdmFsdWUpOwoKICAgICAgICBpZiAoaXNfc3RyaW5nKCR2YWx1ZSkpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gaXNfbnVtZXJpYygkdmFsdWUpOwogICAgfQoKCiAgICAvKioKICAgICAqIElTX0xPR0lDQUwKICAgICAqCiAgICAgKiBAcGFyYW0gICAgbWl4ZWQgICAgJHZhbHVlICAgICAgICBWYWx1ZSB0byBjaGVjawogICAgICogQHJldHVybiAgICBib29sZWFuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gSVNfTE9HSUNBTCgkdmFsdWUgPSBudWxsKQogICAgewogICAgICAgICR2YWx1ZSA9IHNlbGY6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkdmFsdWUpOwoKICAgICAgICByZXR1cm4gaXNfYm9vbCgkdmFsdWUpOwogICAgfQoKCiAgICAvKioKICAgICAqIElTX1RFWFQKICAgICAqCiAgICAgKiBAcGFyYW0gICAgbWl4ZWQgICAgJHZhbHVlICAgICAgICBWYWx1ZSB0byBjaGVjawogICAgICogQHJldHVybiAgICBib29sZWFuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gSVNfVEVYVCgkdmFsdWUgPSBudWxsKQogICAgewogICAgICAgICR2YWx1ZSA9IHNlbGY6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkdmFsdWUpOwoKICAgICAgICByZXR1cm4gKGlzX3N0cmluZygkdmFsdWUpICYmICFzZWxmOjpJU19FUlJPUigkdmFsdWUpKTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBJU19OT05URVhUCiAgICAgKgogICAgICogQHBhcmFtICAgIG1peGVkICAgICR2YWx1ZSAgICAgICAgVmFsdWUgdG8gY2hlY2sKICAgICAqIEByZXR1cm4gICAgYm9vbGVhbgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIElTX05PTlRFWFQoJHZhbHVlID0gbnVsbCkKICAgIHsKICAgICAgICByZXR1cm4gIXNlbGY6OklTX1RFWFQoJHZhbHVlKTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBWRVJTSU9OCiAgICAgKgogICAgICogQHJldHVybiAgICBzdHJpbmcgICAgVmVyc2lvbiBpbmZvcm1hdGlvbgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIFZFUlNJT04oKQogICAgewogICAgICAgIHJldHVybiAnUEhQRXhjZWwgIyNWRVJTSU9OIyMsICMjREFURSMjJzsKICAgIH0KCgogICAgLyoqCiAgICAgKiBOCiAgICAgKgogICAgICogUmV0dXJucyBhIHZhbHVlIGNvbnZlcnRlZCB0byBhIG51bWJlcgogICAgICoKICAgICAqIEBwYXJhbSAgICB2YWx1ZSAgICAgICAgVGhlIHZhbHVlIHlvdSB3YW50IGNvbnZlcnRlZAogICAgICogQHJldHVybiAgICBudW1iZXIgICAgICAgIE4gY29udmVydHMgdmFsdWVzIGxpc3RlZCBpbiB0aGUgZm9sbG93aW5nIHRhYmxlCiAgICAgKiAgICAgICAgSWYgdmFsdWUgaXMgb3IgcmVmZXJzIHRvIE4gcmV0dXJucwogICAgICogICAgICAgIEEgbnVtYmVyICAgICAgICAgICAgVGhhdCBudW1iZXIKICAgICAqICAgICAgICBBIGRhdGUgICAgICAgICAgICAgICAgVGhlIHNlcmlhbCBudW1iZXIgb2YgdGhhdCBkYXRlCiAgICAgKiAgICAgICAgVFJVRSAgICAgICAgICAgICAgICAxCiAgICAgKiAgICAgICAgRkFMU0UgICAgICAgICAgICAgICAgMAogICAgICogICAgICAgIEFuIGVycm9yIHZhbHVlICAgICAgICBUaGUgZXJyb3IgdmFsdWUKICAgICAqICAgICAgICBBbnl0aGluZyBlbHNlICAgICAgICAwCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gTigkdmFsdWUgPSBudWxsKQogICAgewogICAgICAgIHdoaWxlIChpc19hcnJheSgkdmFsdWUpKSB7CiAgICAgICAgICAgICR2YWx1ZSA9IGFycmF5X3NoaWZ0KCR2YWx1ZSk7CiAgICAgICAgfQoKICAgICAgICBzd2l0Y2ggKGdldHR5cGUoJHZhbHVlKSkgewogICAgICAgICAgICBjYXNlICdkb3VibGUnOgogICAgICAgICAgICBjYXNlICdmbG9hdCc6CiAgICAgICAgICAgIGNhc2UgJ2ludGVnZXInOgogICAgICAgICAgICAgICAgcmV0dXJuICR2YWx1ZTsKICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6CiAgICAgICAgICAgICAgICByZXR1cm4gKGludGVnZXIpICR2YWx1ZTsKICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzoKICAgICAgICAgICAgICAgIC8vICAgIEVycm9ycwogICAgICAgICAgICAgICAgaWYgKChzdHJsZW4oJHZhbHVlKSA+IDApICYmICgkdmFsdWV7MH0gPT0gJyMnKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkdmFsdWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIDA7CiAgICB9CgoKICAgIC8qKgogICAgICogVFlQRQogICAgICoKICAgICAqIFJldHVybnMgYSBudW1iZXIgdGhhdCBpZGVudGlmaWVzIHRoZSB0eXBlIG9mIGEgdmFsdWUKICAgICAqCiAgICAgKiBAcGFyYW0gICAgdmFsdWUgICAgICAgIFRoZSB2YWx1ZSB5b3Ugd2FudCB0ZXN0ZWQKICAgICAqIEByZXR1cm4gICAgbnVtYmVyICAgICAgICBOIGNvbnZlcnRzIHZhbHVlcyBsaXN0ZWQgaW4gdGhlIGZvbGxvd2luZyB0YWJsZQogICAgICogICAgICAgIElmIHZhbHVlIGlzIG9yIHJlZmVycyB0byBOIHJldHVybnMKICAgICAqICAgICAgICBBIG51bWJlciAgICAgICAgICAgIDEKICAgICAqICAgICAgICBUZXh0ICAgICAgICAgICAgICAgIDIKICAgICAqICAgICAgICBMb2dpY2FsIFZhbHVlICAgICAgICA0CiAgICAgKiAgICAgICAgQW4gZXJyb3IgdmFsdWUgICAgICAgIDE2CiAgICAgKiAgICAgICAgQXJyYXkgb3IgTWF0cml4ICAgICAgICA2NAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIFRZUEUoJHZhbHVlID0gbnVsbCkKICAgIHsKICAgICAgICAkdmFsdWUgPSBzZWxmOjpmbGF0dGVuQXJyYXlJbmRleGVkKCR2YWx1ZSk7CiAgICAgICAgaWYgKGlzX2FycmF5KCR2YWx1ZSkgJiYgKGNvdW50KCR2YWx1ZSkgPiAxKSkgewogICAgICAgICAgICBlbmQoJHZhbHVlKTsKICAgICAgICAgICAgJGEgPSBrZXkoJHZhbHVlKTsKICAgICAgICAgICAgLy8gICAgUmFuZ2Ugb2YgY2VsbHMgaXMgYW4gZXJyb3IKICAgICAgICAgICAgaWYgKHNlbGY6OmlzQ2VsbFZhbHVlKCRhKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIDE2OwogICAgICAgICAgICAvLyAgICBUZXN0IGZvciBNYXRyaXgKICAgICAgICAgICAgfSBlbHNlaWYgKHNlbGY6OmlzTWF0cml4VmFsdWUoJGEpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gNjQ7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2VpZiAoZW1wdHkoJHZhbHVlKSkgewogICAgICAgICAgICAvLyAgICBFbXB0eSBDZWxsCiAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0KICAgICAgICAkdmFsdWUgPSBzZWxmOjpmbGF0dGVuU2luZ2xlVmFsdWUoJHZhbHVlKTsKCiAgICAgICAgaWYgKCgkdmFsdWUgPT09IG51bGwpIHx8IChpc19mbG9hdCgkdmFsdWUpKSB8fCAoaXNfaW50KCR2YWx1ZSkpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICB9IGVsc2VpZiAoaXNfYm9vbCgkdmFsdWUpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gNDsKICAgICAgICB9IGVsc2VpZiAoaXNfYXJyYXkoJHZhbHVlKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIDY0OwogICAgICAgIH0gZWxzZWlmIChpc19zdHJpbmcoJHZhbHVlKSkgewogICAgICAgICAgICAvLyAgICBFcnJvcnMKICAgICAgICAgICAgaWYgKChzdHJsZW4oJHZhbHVlKSA+IDApICYmICgkdmFsdWV7MH0gPT0gJyMnKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIDE2OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAyOwogICAgICAgIH0KICAgICAgICByZXR1cm4gMDsKICAgIH0KCgogICAgLyoqCiAgICAgKiBDb252ZXJ0IGEgbXVsdGktZGltZW5zaW9uYWwgYXJyYXkgdG8gYSBzaW1wbGUgMS1kaW1lbnNpb25hbCBhcnJheQogICAgICoKICAgICAqIEBwYXJhbSAgICBhcnJheSAgICAkYXJyYXkgICAgQXJyYXkgdG8gYmUgZmxhdHRlbmVkCiAgICAgKiBAcmV0dXJuICAgIGFycmF5ICAgIEZsYXR0ZW5lZCBhcnJheQogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGZsYXR0ZW5BcnJheSgkYXJyYXkpCiAgICB7CiAgICAgICAgaWYgKCFpc19hcnJheSgkYXJyYXkpKSB7CiAgICAgICAgICAgIHJldHVybiAoYXJyYXkpICRhcnJheTsKICAgICAgICB9CgogICAgICAgICRhcnJheVZhbHVlcyA9IGFycmF5KCk7CiAgICAgICAgZm9yZWFjaCAoJGFycmF5IGFzICR2YWx1ZSkgewogICAgICAgICAgICBpZiAoaXNfYXJyYXkoJHZhbHVlKSkgewogICAgICAgICAgICAgICAgZm9yZWFjaCAoJHZhbHVlIGFzICR2YWwpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaXNfYXJyYXkoJHZhbCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJHZhbCBhcyAkdikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFycmF5VmFsdWVzW10gPSAkdjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRhcnJheVZhbHVlc1tdID0gJHZhbDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkYXJyYXlWYWx1ZXNbXSA9ICR2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICRhcnJheVZhbHVlczsKICAgIH0KCgogICAgLyoqCiAgICAgKiBDb252ZXJ0IGEgbXVsdGktZGltZW5zaW9uYWwgYXJyYXkgdG8gYSBzaW1wbGUgMS1kaW1lbnNpb25hbCBhcnJheSwgYnV0IHJldGFpbiBhbiBlbGVtZW50IG9mIGluZGV4aW5nCiAgICAgKgogICAgICogQHBhcmFtICAgIGFycmF5ICAgICRhcnJheSAgICBBcnJheSB0byBiZSBmbGF0dGVuZWQKICAgICAqIEByZXR1cm4gICAgYXJyYXkgICAgRmxhdHRlbmVkIGFycmF5CiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZmxhdHRlbkFycmF5SW5kZXhlZCgkYXJyYXkpCiAgICB7CiAgICAgICAgaWYgKCFpc19hcnJheSgkYXJyYXkpKSB7CiAgICAgICAgICAgIHJldHVybiAoYXJyYXkpICRhcnJheTsKICAgICAgICB9CgogICAgICAgICRhcnJheVZhbHVlcyA9IGFycmF5KCk7CiAgICAgICAgZm9yZWFjaCAoJGFycmF5IGFzICRrMSA9PiAkdmFsdWUpIHsKICAgICAgICAgICAgaWYgKGlzX2FycmF5KCR2YWx1ZSkpIHsKICAgICAgICAgICAgICAgIGZvcmVhY2ggKCR2YWx1ZSBhcyAkazIgPT4gJHZhbCkgewogICAgICAgICAgICAgICAgICAgIGlmIChpc19hcnJheSgkdmFsKSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICgkdmFsIGFzICRrMyA9PiAkdikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFycmF5VmFsdWVzWyRrMS4nLicuJGsyLicuJy4kazNdID0gJHY7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAkYXJyYXlWYWx1ZXNbJGsxLicuJy4kazJdID0gJHZhbDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkYXJyYXlWYWx1ZXNbJGsxXSA9ICR2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICRhcnJheVZhbHVlczsKICAgIH0KCgogICAgLyoqCiAgICAgKiBDb252ZXJ0IGFuIGFycmF5IHRvIGEgc2luZ2xlIHNjYWxhciB2YWx1ZSBieSBleHRyYWN0aW5nIHRoZSBmaXJzdCBlbGVtZW50CiAgICAgKgogICAgICogQHBhcmFtICAgIG1peGVkICAgICAgICAkdmFsdWUgICAgICAgIEFycmF5IG9yIHNjYWxhciB2YWx1ZQogICAgICogQHJldHVybiAgICBtaXhlZAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGZsYXR0ZW5TaW5nbGVWYWx1ZSgkdmFsdWUgPSAnJykKICAgIHsKICAgICAgICB3aGlsZSAoaXNfYXJyYXkoJHZhbHVlKSkgewogICAgICAgICAgICAkdmFsdWUgPSBhcnJheV9wb3AoJHZhbHVlKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAkdmFsdWU7CiAgICB9Cn0KCgovLwovLyAgICBUaGVyZSBhcmUgYSBmZXcgbWF0aGVtYXRpY2FsIGZ1bmN0aW9ucyB0aGF0IGFyZW4ndCBhdmFpbGFibGUgb24gYWxsIHZlcnNpb25zIG9mIFBIUCBmb3IgYWxsIHBsYXRmb3JtcwovLyAgICBUaGVzZSBmdW5jdGlvbnMgYXJlbid0IGF2YWlsYWJsZSBpbiBXaW5kb3dzIGltcGxlbWVudGF0aW9ucyBvZiBQSFAgcHJpb3IgdG8gdmVyc2lvbiA1LjMuMAovLyAgICBTbyB3ZSB0ZXN0IGlmIHRoZXkgZG8gZXhpc3QgZm9yIHRoaXMgdmVyc2lvbiBvZiBQSFAvb3BlcmF0aW5nIHBsYXRmb3JtOyBhbmQgaWYgbm90IHdlIGNyZWF0ZSB0aGVtCi8vCmlmICghZnVuY3Rpb25fZXhpc3RzKCdhY29zaCcpKSB7CiAgICBmdW5jdGlvbiBhY29zaCgkeCkKICAgIHsKICAgICAgICByZXR1cm4gMiAqIGxvZyhzcXJ0KCgkeCArIDEpIC8gMikgKyBzcXJ0KCgkeCAtIDEpIC8gMikpOwogICAgfSAgICAvLyAgICBmdW5jdGlvbiBhY29zaCgpCn0KCmlmICghZnVuY3Rpb25fZXhpc3RzKCdhc2luaCcpKSB7CiAgICBmdW5jdGlvbiBhc2luaCgkeCkKICAgIHsKICAgICAgICByZXR1cm4gbG9nKCR4ICsgc3FydCgxICsgJHggKiAkeCkpOwogICAgfSAgICAvLyAgICBmdW5jdGlvbiBhc2luaCgpCn0KCmlmICghZnVuY3Rpb25fZXhpc3RzKCdhdGFuaCcpKSB7CiAgICBmdW5jdGlvbiBhdGFuaCgkeCkKICAgIHsKICAgICAgICByZXR1cm4gKGxvZygxICsgJHgpIC0gbG9nKDEgLSAkeCkpIC8gMjsKICAgIH0gICAgLy8gICAgZnVuY3Rpb24gYXRhbmgoKQp9CgoKLy8KLy8gICAgU3RyYW5nZWx5LCBQSFAgZG9lc24ndCBoYXZlIGEgbWJfc3RyX3JlcGxhY2UgbXVsdGlieXRlIGZ1bmN0aW9uCi8vICAgIEFzIHdlJ2xsIG9ubHkgZXZlciB1c2UgdGhpcyBmdW5jdGlvbiB3aXRoIFVURi04IGNoYXJhY3RlcnMsIHdlIGNhbiBzaW1wbHkgImhhcmQtY29kZSIgdGhlIGNoYXJhY3RlciBzZXQKLy8KaWYgKCghZnVuY3Rpb25fZXhpc3RzKCdtYl9zdHJfcmVwbGFjZScpKSAmJgogICAgKGZ1bmN0aW9uX2V4aXN0cygnbWJfc3Vic3RyJykpICYmIChmdW5jdGlvbl9leGlzdHMoJ21iX3N0cmxlbicpKSAmJiAoZnVuY3Rpb25fZXhpc3RzKCdtYl9zdHJwb3MnKSkpIHsKICAgIGZ1bmN0aW9uIG1iX3N0cl9yZXBsYWNlKCRzZWFyY2gsICRyZXBsYWNlLCAkc3ViamVjdCkKICAgIHsKICAgICAgICBpZiAoaXNfYXJyYXkoJHN1YmplY3QpKSB7CiAgICAgICAgICAgICRyZXQgPSBhcnJheSgpOwogICAgICAgICAgICBmb3JlYWNoICgkc3ViamVjdCBhcyAka2V5ID0+ICR2YWwpIHsKICAgICAgICAgICAgICAgICRyZXRbJGtleV0gPSBtYl9zdHJfcmVwbGFjZSgkc2VhcmNoLCAkcmVwbGFjZSwgJHZhbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICRyZXQ7CiAgICAgICAgfQoKICAgICAgICBmb3JlYWNoICgoYXJyYXkpICRzZWFyY2ggYXMgJGtleSA9PiAkcykgewogICAgICAgICAgICBpZiAoJHMgPT0gJycgJiYgJHMgIT09IDApIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRyID0gIWlzX2FycmF5KCRyZXBsYWNlKSA\/ICRyZXBsYWNlIDogKGFycmF5X2tleV9leGlzdHMoJGtleSwgJHJlcGxhY2UpID8gJHJlcGxhY2VbJGtleV0gOiAnJyk7CiAgICAgICAgICAgICRwb3MgPSBtYl9zdHJwb3MoJHN1YmplY3QsICRzLCAwLCAnVVRGLTgnKTsKICAgICAgICAgICAgd2hpbGUgKCRwb3MgIT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAkc3ViamVjdCA9IG1iX3N1YnN0cigkc3ViamVjdCwgMCwgJHBvcywgJ1VURi04JykgLiAkciAuIG1iX3N1YnN0cigkc3ViamVjdCwgJHBvcyArIG1iX3N0cmxlbigkcywgJ1VURi04JyksIDY1NTM1LCAnVVRGLTgnKTsKICAgICAgICAgICAgICAgICRwb3MgPSBtYl9zdHJwb3MoJHN1YmplY3QsICRzLCAkcG9zICsgbWJfc3RybGVuKCRyLCAnVVRGLTgnKSwgJ1VURi04Jyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuICRzdWJqZWN0OwogICAgfQp9Cg==",
    "size": "20659"
}