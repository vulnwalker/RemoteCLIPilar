{
    "namaFile": "lib\/js\/joomla.javascript.js",
    "lastUpdate": "2013-12-16+17:18:26.00",
    "contentFile": "Ly8gPD9waHAgISEgVGhpcyBmb29scyBwaHBkb2N1bWVudG9yIGludG8gcGFyc2luZyB0aGlzIGZpbGUNCi8qKg0KKiBAdmVyc2lvbiAkSWQ6IGpvb21sYS5qYXZhc2NyaXB0LmpzIDU2OTEgMjAwNi0xMS0wOSAwMDo1NTo0MlogU2FrYSAkDQoqIEBwYWNrYWdlIEpvb21sYQ0KKiBAY29weXJpZ2h0IENvcHlyaWdodCAoQykgMjAwNSBPcGVuIFNvdXJjZSBNYXR0ZXJzLiBBbGwgcmlnaHRzIHJlc2VydmVkLg0KKiBAbGljZW5zZSBodHRwOi8vd3d3LmdudS5vcmcvY29weWxlZnQvZ3BsLmh0bWwgR05VL0dQTA0KKiBKb29tbGEhIGlzIEZyZWUgU29mdHdhcmUNCiovDQoNCi8vIGdlbmVyYWwgdXRpbGl0eSBmb3IgYnJvd3NpbmcgYSBuYW1lZCBhcnJheSBvciBvYmplY3QNCmZ1bmN0aW9uIHhzaG93KG8pIHsNCglzID0gJyc7DQoJZm9yKGUgaW4gbykge3MgKz0gZSsnPScrb1tlXSsnXG4nO30NCglhbGVydCggcyApOw0KfQ0KDQovKioNCiogV3JpdGVzIGEgZHluYW1pY2FsbHkgZ2VuZXJhdGVkIGxpc3QNCiogQHBhcmFtIHN0cmluZyBUaGUgcGFyYW1ldGVycyB0byBpbnNlcnQgaW50byB0aGUgPHNlbGVjdD4gdGFnDQoqIEBwYXJhbSBhcnJheSBBIGphdmFzY3JpcHQgYXJyYXkgb2YgbGlzdCBvcHRpb25zIGluIHRoZSBmb3JtIFtrZXksdmFsdWUsdGV4dF0NCiogQHBhcmFtIHN0cmluZyBUaGUga2V5IHRvIGRpc3BsYXkgZm9yIHRoZSBpbml0aWFsIHN0YXRlIG9mIHRoZSBsaXN0DQoqIEBwYXJhbSBzdHJpbmcgVGhlIG9yaWdpbmFsIGtleSB0aGF0IHdhcyBzZWxlY3RlZA0KKiBAcGFyYW0gc3RyaW5nIFRoZSBvcmlnaW5hbCBpdGVtIHZhbHVlIHRoYXQgd2FzIHNlbGVjdGVkDQoqLw0KZnVuY3Rpb24gd3JpdGVEeW5hTGlzdCggc2VsZWN0UGFyYW1zLCBzb3VyY2UsIGtleSwgb3JpZ19rZXksIG9yaWdfdmFsICkgew0KCXZhciBodG1sID0gJ1xuCTxzZWxlY3QgJyArIHNlbGVjdFBhcmFtcyArICc+JzsNCgl2YXIgaSA9IDA7DQoJZm9yICh4IGluIHNvdXJjZSkgew0KCQlpZiAoc291cmNlW3hdWzBdID09IGtleSkgew0KCQkJdmFyIHNlbGVjdGVkID0gJyc7DQoJCQlpZiAoKG9yaWdfa2V5ID09IGtleSAmJiBvcmlnX3ZhbCA9PSBzb3VyY2VbeF1bMV0pIHx8IChpID09IDAgJiYgb3JpZ19rZXkgIT0ga2V5KSkgew0KCQkJCXNlbGVjdGVkID0gJ3NlbGVjdGVkPSJzZWxlY3RlZCInOw0KCQkJfQ0KCQkJaHRtbCArPSAnXG4JCTxvcHRpb24gdmFsdWU9Iicrc291cmNlW3hdWzFdKyciICcrc2VsZWN0ZWQrJz4nK3NvdXJjZVt4XVsyXSsnPC9vcHRpb24+JzsNCgkJfQ0KCQlpKys7DQoJfQ0KCWh0bWwgKz0gJ1xuCTwvc2VsZWN0Pic7DQoNCglkb2N1bWVudC53cml0ZWxuKCBodG1sICk7DQp9DQoNCi8qKg0KKiBDaGFuZ2VzIGEgZHluYW1pY2FsbHkgZ2VuZXJhdGVkIGxpc3QNCiogQHBhcmFtIHN0cmluZyBUaGUgbmFtZSBvZiB0aGUgbGlzdCB0byBjaGFuZ2UNCiogQHBhcmFtIGFycmF5IEEgamF2YXNjcmlwdCBhcnJheSBvZiBsaXN0IG9wdGlvbnMgaW4gdGhlIGZvcm0gW2tleSx2YWx1ZSx0ZXh0XQ0KKiBAcGFyYW0gc3RyaW5nIFRoZSBrZXkgdG8gZGlzcGxheQ0KKiBAcGFyYW0gc3RyaW5nIFRoZSBvcmlnaW5hbCBrZXkgdGhhdCB3YXMgc2VsZWN0ZWQNCiogQHBhcmFtIHN0cmluZyBUaGUgb3JpZ2luYWwgaXRlbSB2YWx1ZSB0aGF0IHdhcyBzZWxlY3RlZA0KKi8NCmZ1bmN0aW9uIGNoYW5nZUR5bmFMaXN0KCBsaXN0bmFtZSwgc291cmNlLCBrZXksIG9yaWdfa2V5LCBvcmlnX3ZhbCApIHsNCgl2YXIgbGlzdCA9IGV2YWwoICdkb2N1bWVudC5hZG1pbkZvcm0uJyArIGxpc3RuYW1lICk7DQoNCgkvLyBlbXB0eSB0aGUgbGlzdA0KCWZvciAoaSBpbiBsaXN0Lm9wdGlvbnMubGVuZ3RoKSB7DQoJCWxpc3Qub3B0aW9uc1tpXSA9IG51bGw7DQoJfQ0KCWkgPSAwOw0KCWZvciAoeCBpbiBzb3VyY2UpIHsNCgkJaWYgKHNvdXJjZVt4XVswXSA9PSBrZXkpIHsNCgkJCW9wdCA9IG5ldyBPcHRpb24oKTsNCgkJCW9wdC52YWx1ZSA9IHNvdXJjZVt4XVsxXTsNCgkJCW9wdC50ZXh0ID0gc291cmNlW3hdWzJdOw0KDQoJCQlpZiAoKG9yaWdfa2V5ID09IGtleSAmJiBvcmlnX3ZhbCA9PSBvcHQudmFsdWUpIHx8IGkgPT0gMCkgew0KCQkJCW9wdC5zZWxlY3RlZCA9IHRydWU7DQoJCQl9DQoJCQlsaXN0Lm9wdGlvbnNbaSsrXSA9IG9wdDsNCgkJfQ0KCX0NCglsaXN0Lmxlbmd0aCA9IGk7DQp9DQoNCi8qKg0KKiBBZGRzIGEgc2VsZWN0IGl0ZW0ocykgZnJvbSBvbmUgbGlzdCB0byBhbm90aGVyDQoqLw0KZnVuY3Rpb24gYWRkU2VsZWN0ZWRUb0xpc3QoIGZybU5hbWUsIHNyY0xpc3ROYW1lLCB0Z3RMaXN0TmFtZSApIHsNCgl2YXIgZm9ybSA9IGV2YWwoICdkb2N1bWVudC4nICsgZnJtTmFtZSApOw0KCXZhciBzcmNMaXN0ID0gZXZhbCggJ2Zvcm0uJyArIHNyY0xpc3ROYW1lICk7DQoJdmFyIHRndExpc3QgPSBldmFsKCAnZm9ybS4nICsgdGd0TGlzdE5hbWUgKTsNCg0KCXZhciBzcmNMZW4gPSBzcmNMaXN0Lmxlbmd0aDsNCgl2YXIgdGd0TGVuID0gdGd0TGlzdC5sZW5ndGg7DQoJdmFyIHRndCA9ICJ4IjsNCg0KCS8vYnVpbGQgYXJyYXkgb2YgdGFyZ2V0IGl0ZW1zDQoJZm9yICh2YXIgaT10Z3RMZW4tMTsgaSA+IC0xOyBpLS0pIHsNCgkJdGd0ICs9ICIsIiArIHRndExpc3Qub3B0aW9uc1tpXS52YWx1ZSArICIsIg0KCX0NCg0KCS8vUHVsbCBzZWxlY3RlZCByZXNvdXJjZXMgYW5kIGFkZCB0aGVtIHRvIGxpc3QNCgkvL2ZvciAodmFyIGk9c3JjTGVuLTE7IGkgPiAtMTsgaS0tKSB7DQoJZm9yICh2YXIgaT0wOyBpIDwgc3JjTGVuOyBpKyspIHsNCgkJaWYgKHNyY0xpc3Qub3B0aW9uc1tpXS5zZWxlY3RlZCAmJiB0Z3QuaW5kZXhPZiggIiwiICsgc3JjTGlzdC5vcHRpb25zW2ldLnZhbHVlICsgIiwiICkgPT0gLTEpIHsNCgkJCW9wdCA9IG5ldyBPcHRpb24oIHNyY0xpc3Qub3B0aW9uc1tpXS50ZXh0LCBzcmNMaXN0Lm9wdGlvbnNbaV0udmFsdWUgKTsNCgkJCXRndExpc3Qub3B0aW9uc1t0Z3RMaXN0Lmxlbmd0aF0gPSBvcHQ7DQoJCX0NCgl9DQp9DQoNCmZ1bmN0aW9uIGRlbFNlbGVjdGVkRnJvbUxpc3QoIGZybU5hbWUsIHNyY0xpc3ROYW1lICkgew0KCXZhciBmb3JtID0gZXZhbCggJ2RvY3VtZW50LicgKyBmcm1OYW1lICk7DQoJdmFyIHNyY0xpc3QgPSBldmFsKCAnZm9ybS4nICsgc3JjTGlzdE5hbWUgKTsNCg0KCXZhciBzcmNMZW4gPSBzcmNMaXN0Lmxlbmd0aDsNCg0KCWZvciAodmFyIGk9c3JjTGVuLTE7IGkgPiAtMTsgaS0tKSB7DQoJCWlmIChzcmNMaXN0Lm9wdGlvbnNbaV0uc2VsZWN0ZWQpIHsNCgkJCXNyY0xpc3Qub3B0aW9uc1tpXSA9IG51bGw7DQoJCX0NCgl9DQp9DQoNCmZ1bmN0aW9uIG1vdmVJbkxpc3QoIGZybU5hbWUsIHNyY0xpc3ROYW1lLCBpbmRleCwgdG8pIHsNCgl2YXIgZm9ybSA9IGV2YWwoICdkb2N1bWVudC4nICsgZnJtTmFtZSApOw0KCXZhciBzcmNMaXN0ID0gZXZhbCggJ2Zvcm0uJyArIHNyY0xpc3ROYW1lICk7DQoJdmFyIHRvdGFsID0gc3JjTGlzdC5vcHRpb25zLmxlbmd0aC0xOw0KDQoJaWYgKGluZGV4ID09IC0xKSB7DQoJCXJldHVybiBmYWxzZTsNCgl9DQoJaWYgKHRvID09ICsxICYmIGluZGV4ID09IHRvdGFsKSB7DQoJCXJldHVybiBmYWxzZTsNCgl9DQoJaWYgKHRvID09IC0xICYmIGluZGV4ID09IDApIHsNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCg0KCXZhciBpdGVtcyA9IG5ldyBBcnJheTsNCgl2YXIgdmFsdWVzID0gbmV3IEFycmF5Ow0KDQoJZm9yIChpPXRvdGFsOyBpID49IDA7IGktLSkgew0KCQlpdGVtc1tpXSA9IHNyY0xpc3Qub3B0aW9uc1tpXS50ZXh0Ow0KCQl2YWx1ZXNbaV0gPSBzcmNMaXN0Lm9wdGlvbnNbaV0udmFsdWU7DQoJfQ0KCWZvciAoaSA9IHRvdGFsOyBpID49IDA7IGktLSkgew0KCQlpZiAoaW5kZXggPT0gaSkgew0KCQkJc3JjTGlzdC5vcHRpb25zW2kgKyB0b10gPSBuZXcgT3B0aW9uKGl0ZW1zW2ldLHZhbHVlc1tpXSwgMCwgMSk7DQoJCQlzcmNMaXN0Lm9wdGlvbnNbaV0gPSBuZXcgT3B0aW9uKGl0ZW1zW2krdG9dLCB2YWx1ZXNbaSt0b10pOw0KCQkJaS0tOw0KCQl9IGVsc2Ugew0KCQkJc3JjTGlzdC5vcHRpb25zW2ldID0gbmV3IE9wdGlvbihpdGVtc1tpXSwgdmFsdWVzW2ldKTsNCgkgICB9DQoJfQ0KCXNyY0xpc3QuZm9jdXMoKTsNCn0NCg0KZnVuY3Rpb24gZ2V0U2VsZWN0ZWRPcHRpb24oIGZybU5hbWUsIHNyY0xpc3ROYW1lICkgew0KCXZhciBmb3JtID0gZXZhbCggJ2RvY3VtZW50LicgKyBmcm1OYW1lICk7DQoJdmFyIHNyY0xpc3QgPSBldmFsKCAnZm9ybS4nICsgc3JjTGlzdE5hbWUgKTsNCg0KCWkgPSBzcmNMaXN0LnNlbGVjdGVkSW5kZXg7DQoJaWYgKGkgIT0gbnVsbCAmJiBpID4gLTEpIHsNCgkJcmV0dXJuIHNyY0xpc3Qub3B0aW9uc1tpXTsNCgl9IGVsc2Ugew0KCQlyZXR1cm4gbnVsbDsNCgl9DQp9DQoNCmZ1bmN0aW9uIHNldFNlbGVjdGVkVmFsdWUoIGZybU5hbWUsIHNyY0xpc3ROYW1lLCB2YWx1ZSApIHsNCgl2YXIgZm9ybSA9IGV2YWwoICdkb2N1bWVudC4nICsgZnJtTmFtZSApOw0KCXZhciBzcmNMaXN0ID0gZXZhbCggJ2Zvcm0uJyArIHNyY0xpc3ROYW1lICk7DQoNCgl2YXIgc3JjTGVuID0gc3JjTGlzdC5sZW5ndGg7DQoNCglmb3IgKHZhciBpPTA7IGkgPCBzcmNMZW47IGkrKykgew0KCQlzcmNMaXN0Lm9wdGlvbnNbaV0uc2VsZWN0ZWQgPSBmYWxzZTsNCgkJaWYgKHNyY0xpc3Qub3B0aW9uc1tpXS52YWx1ZSA9PSB2YWx1ZSkgew0KCQkJc3JjTGlzdC5vcHRpb25zW2ldLnNlbGVjdGVkID0gdHJ1ZTsNCgkJfQ0KCX0NCn0NCg0KZnVuY3Rpb24gZ2V0U2VsZWN0ZWRSYWRpbyggZnJtTmFtZSwgc3JjR3JvdXBOYW1lICkgew0KCXZhciBmb3JtID0gZXZhbCggJ2RvY3VtZW50LicgKyBmcm1OYW1lICk7DQoJdmFyIHNyY0dyb3VwID0gZXZhbCggJ2Zvcm0uJyArIHNyY0dyb3VwTmFtZSApOw0KDQoJaWYgKHNyY0dyb3VwWzBdKSB7DQoJCWZvciAodmFyIGk9MCwgbj1zcmNHcm91cC5sZW5ndGg7IGkgPCBuOyBpKyspIHsNCgkJCWlmIChzcmNHcm91cFtpXS5jaGVja2VkKSB7DQoJCQkJcmV0dXJuIHNyY0dyb3VwW2ldLnZhbHVlOw0KCQkJfQ0KCQl9DQoJfSBlbHNlIHsNCgkJaWYgKHNyY0dyb3VwLmNoZWNrZWQpIHsNCgkJCXJldHVybiBzcmNHcm91cC52YWx1ZTsNCgkJfSAvLyBpZiB0aGUgb25lIGJ1dHRvbiBpcyBjaGVja2VkLCByZXR1cm4gemVybw0KCX0NCiAgIC8vIGlmIHdlIGdldCB0byB0aGlzIHBvaW50LCBubyByYWRpbyBidXR0b24gaXMgc2VsZWN0ZWQNCiAgIHJldHVybiBudWxsOw0KfQ0KDQpmdW5jdGlvbiBnZXRTZWxlY3RlZFZhbHVlKCBmcm1OYW1lLCBzcmNMaXN0TmFtZSApIHsNCgl2YXIgZm9ybSA9IGV2YWwoICdkb2N1bWVudC4nICsgZnJtTmFtZSApOw0KCXZhciBzcmNMaXN0ID0gZXZhbCggJ2Zvcm0uJyArIHNyY0xpc3ROYW1lICk7DQoNCglpID0gc3JjTGlzdC5zZWxlY3RlZEluZGV4Ow0KCWlmIChpICE9IG51bGwgJiYgaSA+IC0xKSB7DQoJCXJldHVybiBzcmNMaXN0Lm9wdGlvbnNbaV0udmFsdWU7DQoJfSBlbHNlIHsNCgkJcmV0dXJuIG51bGw7DQoJfQ0KfQ0KDQpmdW5jdGlvbiBnZXRTZWxlY3RlZFRleHQoIGZybU5hbWUsIHNyY0xpc3ROYW1lICkgew0KCXZhciBmb3JtID0gZXZhbCggJ2RvY3VtZW50LicgKyBmcm1OYW1lICk7DQoJdmFyIHNyY0xpc3QgPSBldmFsKCAnZm9ybS4nICsgc3JjTGlzdE5hbWUgKTsNCg0KCWkgPSBzcmNMaXN0LnNlbGVjdGVkSW5kZXg7DQoJaWYgKGkgIT0gbnVsbCAmJiBpID4gLTEpIHsNCgkJcmV0dXJuIHNyY0xpc3Qub3B0aW9uc1tpXS50ZXh0Ow0KCX0gZWxzZSB7DQoJCXJldHVybiBudWxsOw0KCX0NCn0NCg0KZnVuY3Rpb24gY2hnU2VsZWN0ZWRWYWx1ZSggZnJtTmFtZSwgc3JjTGlzdE5hbWUsIHZhbHVlICkgew0KCXZhciBmb3JtID0gZXZhbCggJ2RvY3VtZW50LicgKyBmcm1OYW1lICk7DQoJdmFyIHNyY0xpc3QgPSBldmFsKCAnZm9ybS4nICsgc3JjTGlzdE5hbWUgKTsNCg0KCWkgPSBzcmNMaXN0LnNlbGVjdGVkSW5kZXg7DQoJaWYgKGkgIT0gbnVsbCAmJiBpID4gLTEpIHsNCgkJc3JjTGlzdC5vcHRpb25zW2ldLnZhbHVlID0gdmFsdWU7DQoJCXJldHVybiB0cnVlOw0KCX0gZWxzZSB7DQoJCXJldHVybiBmYWxzZTsNCgl9DQp9DQoNCi8vIEZvcm0gc3BlY2lmaWMgZnVuY3Rpb25zIGZvciBlZGl0dGluZyBjb250ZW50IGltYWdlcw0KDQpmdW5jdGlvbiBzaG93SW1hZ2VQcm9wcyhiYXNlX3BhdGgpIHsNCglmb3JtID0gZG9jdW1lbnQuYWRtaW5Gb3JtOw0KCXZhbHVlID0gZ2V0U2VsZWN0ZWRWYWx1ZSggJ2FkbWluRm9ybScsICdpbWFnZWxpc3QnICk7DQoJcGFydHMgPSB2YWx1ZS5zcGxpdCggJ3wnICk7DQoJZm9ybS5fc291cmNlLnZhbHVlID0gcGFydHNbMF07DQoJc2V0U2VsZWN0ZWRWYWx1ZSggJ2FkbWluRm9ybScsICdfYWxpZ24nLCBwYXJ0c1sxXSB8fCAnJyApOw0KCWZvcm0uX2FsdC52YWx1ZSA9IHBhcnRzWzJdIHx8ICcnOw0KCWZvcm0uX2JvcmRlci52YWx1ZSA9IHBhcnRzWzNdIHx8ICcwJzsNCglmb3JtLl9jYXB0aW9uLnZhbHVlID0gcGFydHNbNF0gfHwgJyc7DQoJc2V0U2VsZWN0ZWRWYWx1ZSggJ2FkbWluRm9ybScsICdfY2FwdGlvbl9wb3NpdGlvbicsIHBhcnRzWzVdIHx8ICcnICk7DQoJc2V0U2VsZWN0ZWRWYWx1ZSggJ2FkbWluRm9ybScsICdfY2FwdGlvbl9hbGlnbicsIHBhcnRzWzZdIHx8ICcnICk7DQoJZm9ybS5fd2lkdGgudmFsdWUgPSBwYXJ0c1s3XSB8fCAnJzsNCg0KCS8vcHJldmlld0ltYWdlKCAnaW1hZ2VsaXN0JywgJ3ZpZXdfaW1hZ2VsaXN0JywgYmFzZV9wYXRoICk7DQoJc3JjSW1hZ2UgPSBldmFsKCAiZG9jdW1lbnQuIiArICd2aWV3X2ltYWdlbGlzdCcgKTsNCglzcmNJbWFnZS5zcmMgPSBiYXNlX3BhdGggKyBwYXJ0c1swXTsNCn0NCg0KZnVuY3Rpb24gYXBwbHlJbWFnZVByb3BzKCkgew0KCWZvcm0gPSBkb2N1bWVudC5hZG1pbkZvcm07DQoJaWYgKCFnZXRTZWxlY3RlZFZhbHVlKCAnYWRtaW5Gb3JtJywgJ2ltYWdlbGlzdCcgKSkgew0KCQlhbGVydCggIlNlbGVjdCBhbmQgaW1hZ2UgZnJvbSB0aGUgbGlzdCIgKTsNCgkJcmV0dXJuOw0KCX0NCgl2YWx1ZSA9IGZvcm0uX3NvdXJjZS52YWx1ZSArICd8Jw0KCSsgZ2V0U2VsZWN0ZWRWYWx1ZSggJ2FkbWluRm9ybScsICdfYWxpZ24nICkgKyAnfCcNCgkrIGZvcm0uX2FsdC52YWx1ZSArICd8Jw0KCSsgcGFyc2VJbnQoIGZvcm0uX2JvcmRlci52YWx1ZSApICsgJ3wnDQoJKyBmb3JtLl9jYXB0aW9uLnZhbHVlICsgJ3wnDQoJKyBnZXRTZWxlY3RlZFZhbHVlKCAnYWRtaW5Gb3JtJywgJ19jYXB0aW9uX3Bvc2l0aW9uJyApICsgJ3wnDQoJKyBnZXRTZWxlY3RlZFZhbHVlKCAnYWRtaW5Gb3JtJywgJ19jYXB0aW9uX2FsaWduJyApICsgJ3wnDQoJKyBmb3JtLl93aWR0aC52YWx1ZTsNCgljaGdTZWxlY3RlZFZhbHVlKCAnYWRtaW5Gb3JtJywgJ2ltYWdlbGlzdCcsIHZhbHVlICk7DQp9DQoNCmZ1bmN0aW9uIHByZXZpZXdJbWFnZSggbGlzdCwgaW1hZ2UsIGJhc2VfcGF0aCApIHsNCglmb3JtID0gZG9jdW1lbnQuYWRtaW5Gb3JtOw0KCXNyY0xpc3QgPSBldmFsKCAiZm9ybS4iICsgbGlzdCApOw0KCXNyY0ltYWdlID0gZXZhbCggImRvY3VtZW50LiIgKyBpbWFnZSApOw0KCXZhciBzcmNPcHRpb24gPSBzcmNMaXN0Lm9wdGlvbnNbKHNyY0xpc3Quc2VsZWN0ZWRJbmRleCA8IDApID8gMCA6IHNyY0xpc3Quc2VsZWN0ZWRJbmRleF07DQoJdmFyIGZpbGVOYW1lID0gc3JjT3B0aW9uLnRleHQ7DQoJdmFyIGZpbGVOYW1lMiA9IHNyY09wdGlvbi52YWx1ZTsNCglpZiAoZmlsZU5hbWUubGVuZ3RoID09IDAgfHwgZmlsZU5hbWUyLmxlbmd0aCA9PSAwKSB7DQoJCXNyY0ltYWdlLnNyYyA9ICdpbWFnZXMvYmxhbmsuZ2lmJzsNCgl9IGVsc2Ugew0KCQlzcmNJbWFnZS5zcmMgPSBiYXNlX3BhdGggKyBmaWxlTmFtZTI7DQoJfQ0KfQ0KDQovKioNCiogVG9nZ2xlcyB0aGUgY2hlY2sgc3RhdGUgb2YgYSBncm91cCBvZiBib3hlcw0KKg0KKiBDaGVja2JveGVzIG11c3QgaGF2ZSBhbiBpZCBhdHRyaWJ1dGUgaW4gdGhlIGZvcm0gY2IwLCBjYjEuLi4NCiogQHBhcmFtIFRoZSBudW1iZXIgb2YgYm94IHRvICdjaGVjaycNCiogQHBhcmFtIEFuIGFsdGVybmF0aXZlIGZpZWxkIG5hbWUNCiovDQpmdW5jdGlvbiBjaGVja0FsbCggbiwgZmxkTmFtZSApIHsNCgkNCiAgaWYgKCFmbGROYW1lKSB7DQogICAgIGZsZE5hbWUgPSAnY2InOw0KICB9DQoJdmFyIGYgPSBkb2N1bWVudC5hZG1pbkZvcm07DQoJdmFyIGMgPSBmLnRvZ2dsZS5jaGVja2VkOw0KCXZhciBuMiA9IDA7DQoJZm9yIChpPTA7IGkgPCBuOyBpKyspIHsNCgkJY2IgPSBldmFsKCAnZi4nICsgZmxkTmFtZSArICcnICsgaSApOw0KCQlpZiAoY2IpIHsNCgkJCWNiLmNoZWNrZWQgPSBjOw0KCQkJbjIrKzsNCgkJfQ0KCX0NCglpZiAoYykgew0KCQlkb2N1bWVudC5hZG1pbkZvcm0uYm94Y2hlY2tlZC52YWx1ZSA9IG4yOw0KCX0gZWxzZSB7DQoJCWRvY3VtZW50LmFkbWluRm9ybS5ib3hjaGVja2VkLnZhbHVlID0gMDsNCgl9DQp9DQpmdW5jdGlvbiBjaGVja0FsbDEoIG4sIGZsZE5hbWUgLGZsZENoZWNrZWQpIHsNCgkNCiAgaWYgKCFmbGROYW1lKSB7DQogICAgIGZsZE5hbWUgPSAnY2InOw0KICB9DQogICBpZiAoIWZsZENoZWNrZWQpIHsNCiAgICAgZmxkQ2hlY2tlZCA9ICd0b2dnbGUnOw0KICB9DQoJdmFyIGYgPSBkb2N1bWVudC5hZG1pbkZvcm07DQoJdmFyIGMgPSBldmFsKCdmLicrZmxkQ2hlY2tlZCsnLmNoZWNrZWQnKTsNCgl2YXIgbjIgPSAwOw0KCWZvciAoaT0wOyBpIDwgbjsgaSsrKSB7DQoJCWNiID0gZXZhbCggJ2YuJyArIGZsZE5hbWUgKyAnJyArIGkgKTsNCgkJaWYgKGNiKSB7DQoJCQljYi5jaGVja2VkID0gYzsNCgkJCW4yKys7DQoJCX0NCgl9DQoJaWYgKGMpIHsNCgkJZG9jdW1lbnQuYWRtaW5Gb3JtLmJveGNoZWNrZWQudmFsdWUgPSBuMjsNCgl9IGVsc2Ugew0KCQlkb2N1bWVudC5hZG1pbkZvcm0uYm94Y2hlY2tlZC52YWx1ZSA9IDA7DQoJfQ0KfQ0KZnVuY3Rpb24gY2hlY2tBbGwxYiggbiwgZmxkTmFtZSAsZmxkQ2hlY2tlZCwgZWxjaGVja2JveCkgew0KCQ0KICBpZiAoIWZsZE5hbWUpIHsNCiAgICAgZmxkTmFtZSA9ICdjYic7DQogIH0NCiAgIGlmICghZmxkQ2hlY2tlZCkgew0KICAgICBmbGRDaGVja2VkID0gJ3RvZ2dsZSc7DQogIH0NCgl2YXIgZiA9IGRvY3VtZW50LmFkbWluRm9ybTsNCgl2YXIgYyA9IGV2YWwoJ2YuJytmbGRDaGVja2VkKycuY2hlY2tlZCcpOw0KCXZhciBuMiA9IDA7DQoJZm9yIChpPTA7IGkgPCBuOyBpKyspIHsNCgkJY2IgPSBldmFsKCAnZi4nICsgZmxkTmFtZSArICcnICsgaSApOw0KCQlpZiAoY2IpIHsNCgkJCWNiLmNoZWNrZWQgPSBjOw0KCQkJbjIrKzsNCgkJfQ0KCX0NCglpZiAoYykgew0KCQkvL2RvY3VtZW50LmFkbWluRm9ybS5ib3hjaGVja2VkLnZhbHVlID0gbjI7DQoJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsY2hlY2tib3gpLnZhbHVlID0gbjI7DQoJfSBlbHNlIHsNCgkJLy9kb2N1bWVudC5hZG1pbkZvcm0uYm94Y2hlY2tlZC52YWx1ZSA9IDA7DQoJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsY2hlY2tib3gpLnZhbHVlID0gMDsNCgl9DQp9DQoNCmZ1bmN0aW9uIGNoZWNrQWxsMiggbiwgZmxkTmFtZSwgbSkgew0KCQ0KICBpZiAoIWZsZE5hbWUpIHsNCiAgICAgZmxkTmFtZSA9ICdjYic7DQogIH0NCgl2YXIgZiA9IGRvY3VtZW50LmFkbWluRm9ybTsNCgl2YXIgYyA9IHRydWU7DQoJdmFyIG4yID0gMDsNCglmb3IgKGk9MDsgaSA8IG47IGkrKykgew0KCQljYiA9IGV2YWwoICdmLicgKyBmbGROYW1lICsgJycgKyBpICk7DQoJCWlmIChjYikgew0KCQkJY2IuY2hlY2tlZCA9IGZhbHNlOw0KCQkJbjIrKzsNCgkJCQ0KCQl9DQoJfQ0KCW0uY2hlY2tlZCA9IHRydWU7DQoJaWYgKGMpIHsNCgkJZG9jdW1lbnQuYWRtaW5Gb3JtLmJveGNoZWNrZWQudmFsdWUgPSAxOw0KCX0gZWxzZSB7DQoJCWRvY3VtZW50LmFkbWluRm9ybS5ib3hjaGVja2VkLnZhbHVlID0gMDsNCgl9DQp9DQoNCmZ1bmN0aW9uIENoZWNrQWxsMyggbiwgZmxkTmFtZSwgbSkgew0KLy91bmNoZWsgYWxsIGV4Y2VwdCBtDQoJDQogIGlmICghZmxkTmFtZSkgew0KICAgICBmbGROYW1lID0gJ2NiJzsNCiAgfQ0KCXZhciBmID0gZG9jdW1lbnQuYWRtaW5Gb3JtOw0KCXZhciBjID0gdHJ1ZTsNCgl2YXIgbjIgPSAwOw0KCWZvciAoaT0wOyBpIDwgbjsgaSsrKSB7CQkNCgkJY2IgPSBldmFsKCAnZi4nICsgZmxkTmFtZSArICcnICsgaSApOw0KCQlpZiAoY2IpIHsNCgkJCWlmKGkgPT1tKXsNCgkJCQljYi5jaGVja2VkID0gdHJ1ZTsNCgkJCX1lbHNlew0KCQkJCWNiLmNoZWNrZWQgPSBmYWxzZTsJDQoJCQl9DQoJCQkNCgkJCW4yKys7DQoJCQkNCgkJfQ0KCX0NCgkvL20uY2hlY2tlZCA9IHRydWU7DQoJaWYgKGMpIHsNCgkJZG9jdW1lbnQuYWRtaW5Gb3JtLmJveGNoZWNrZWQudmFsdWUgPSAxOw0KCX0gZWxzZSB7DQoJCWRvY3VtZW50LmFkbWluRm9ybS5ib3hjaGVja2VkLnZhbHVlID0gMDsNCgl9DQp9DQoNCmZ1bmN0aW9uIGNoZWNrQWxsNCggbiwgZmxkTmFtZSAsZWxIZWFkZXJDaGVja2VkLCBlbEptbENlaykgew0KCQ0KICBpZiAoIWZsZE5hbWUpIHsNCiAgICAgZmxkTmFtZSA9ICdjYic7DQogIH0NCiAgIGlmICghZWxIZWFkZXJDaGVja2VkKSB7DQogICAgIGVsSGVhZGVyQ2hlY2tlZCA9ICd0b2dnbGUnOw0KICB9DQoJLy92YXIgZiA9IGRvY3VtZW50LmFkbWluRm9ybTsNCgkvL3ZhciBjID0gZXZhbCgnZi4nK2ZsZENoZWNrZWQrJy5jaGVja2VkJyk7DQoJdmFyIGMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbEhlYWRlckNoZWNrZWQpLmNoZWNrZWQ7DQoJdmFyIG4yID0gMDsNCgkvL3ZhciBuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxKbWxEYXRhKS52YWx1ZTsNCglmb3IgKGk9MDsgaSA8IG47IGkrKykgew0KCQkvL2FsZXJ0KGZsZE5hbWUraSsnICcrYyk7CQkNCgkJY2IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmbGROYW1lK2kpOw0KCQlpZiAoY2IpIHsNCgkJCWNiLmNoZWNrZWQgPSBjOw0KCQkJbjIrKzsNCgkJfQ0KCX0NCglpZiAoYykgewkJDQoJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsSm1sQ2VrKS52YWx1ZSA9IG4yOw0KCX0gZWxzZSB7CQkNCgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxKbWxDZWspLnZhbHVlID0gMDsNCgl9DQp9DQoNCg0KDQpmdW5jdGlvbiBsaXN0SXRlbVRhc2soIGlkLCB0YXNrICkgew0KICAgIHZhciBmID0gZG9jdW1lbnQuYWRtaW5Gb3JtOw0KICAgIGNiID0gZXZhbCggJ2YuJyArIGlkICk7DQogICAgaWYgKGNiKSB7DQogICAgICAgIGZvciAoaSA9IDA7IHRydWU7IGkrKykgew0KICAgICAgICAgICAgY2J4ID0gZXZhbCgnZi5jYicraSk7DQogICAgICAgICAgICBpZiAoIWNieCkgYnJlYWs7DQogICAgICAgICAgICBjYnguY2hlY2tlZCA9IGZhbHNlOw0KICAgICAgICB9IC8vIGZvcg0KICAgICAgICBjYi5jaGVja2VkID0gdHJ1ZTsNCiAgICAgICAgZi5ib3hjaGVja2VkLnZhbHVlID0gMTsNCiAgICAgICAgc3VibWl0YnV0dG9uKHRhc2spOw0KICAgIH0NCiAgICByZXR1cm4gZmFsc2U7DQp9DQoNCmZ1bmN0aW9uIGhpZGVNYWluTWVudSgpDQp7DQoJZG9jdW1lbnQuYWRtaW5Gb3JtLmhpZGVtYWlubWVudS52YWx1ZT0xOw0KfQ0KDQpmdW5jdGlvbiBpc0NoZWNrZWQoaXNpdGNoZWNrZWQpew0KCWlmIChpc2l0Y2hlY2tlZCA9PSB0cnVlKXsNCgkJZG9jdW1lbnQuYWRtaW5Gb3JtLmJveGNoZWNrZWQudmFsdWUrKzsNCgkJDQoJfQ0KCWVsc2Ugew0KCQlkb2N1bWVudC5hZG1pbkZvcm0uYm94Y2hlY2tlZC52YWx1ZS0tOw0KCX0NCn0NCg0KZnVuY3Rpb24gaXNDaGVja2VkMihpc2l0Y2hlY2tlZCwgZWxuYW1lKXsNCglpZiAoaXNpdGNoZWNrZWQgPT0gdHJ1ZSl7DQoJCS8vZG9jdW1lbnQuYWRtaW5Gb3JtLmJveGNoZWNrZWQudmFsdWUrKzsNCgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxuYW1lKS52YWx1ZSsrOw0KCX0NCgllbHNlIHsNCgkJLy9kb2N1bWVudC5hZG1pbkZvcm0uYm94Y2hlY2tlZC52YWx1ZS0tOw0KCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbG5hbWUpLnZhbHVlLS07DQoJfQ0KfQ0KDQovKioNCiogRGVmYXVsdCBmdW5jdGlvbi4gIFVzdWFsbHkgd291bGQgYmUgb3ZlcnJpZGVuIGJ5IHRoZSBjb21wb25lbnQNCiovDQpmdW5jdGlvbiBzdWJtaXRidXR0b24ocHJlc3NidXR0b24pIHsNCglzdWJtaXRmb3JtKHByZXNzYnV0dG9uKTsNCn0NCg0KLyoqDQoqIFN1Ym1pdCB0aGUgYWRtaW4gZm9ybQ0KKi8NCmZ1bmN0aW9uIHN1Ym1pdGZvcm0ocHJlc3NidXR0b24pew0KCWRvY3VtZW50LmFkbWluRm9ybS50YXNrLnZhbHVlPXByZXNzYnV0dG9uOw0KCXRyeSB7DQoJCWRvY3VtZW50LmFkbWluRm9ybS5vbnN1Ym1pdCgpOw0KCQl9DQoJY2F0Y2goZSl7fQ0KCWRvY3VtZW50LmFkbWluRm9ybS5zdWJtaXQoKTsNCn0NCg0KLyoqDQoqIFN1Ym1pdCB0aGUgY29udHJvbCBwYW5lbCBhZG1pbiBmb3JtDQoqLw0KZnVuY3Rpb24gc3VibWl0Y3Bmb3JtKHNlY3Rpb25pZCwgaWQpew0KCWRvY3VtZW50LmFkbWluRm9ybS5zZWN0aW9uaWQudmFsdWU9c2VjdGlvbmlkOw0KCWRvY3VtZW50LmFkbWluRm9ybS5pZC52YWx1ZT1pZDsNCglzdWJtaXRidXR0b24oImVkaXQiKTsNCn0NCg0KLyoqDQoqIEdldHRpbmcgcmFkaW8gYnV0dG9uIHRoYXQgaXMgc2VsZWN0ZWQuDQoqLw0KZnVuY3Rpb24gZ2V0U2VsZWN0ZWQoYWxsYnV0dG9ucyl7DQoJZm9yIChpPTA7aTxhbGxidXR0b25zLmxlbmd0aDtpKyspIHsNCgkJaWYgKGFsbGJ1dHRvbnNbaV0uY2hlY2tlZCkgew0KCQkJcmV0dXJuIGFsbGJ1dHRvbnNbaV0udmFsdWUNCgkJfQ0KCX0NCn0NCg0KLy8gSlMgQ2FsZW5kYXINCnZhciBjYWxlbmRhciA9IG51bGw7IC8vIHJlbWVtYmVyIHRoZSBjYWxlbmRhciBvYmplY3Qgc28gdGhhdCB3ZSByZXVzZQ0KLy8gaXQgYW5kIGF2b2lkIGNyZWF0aW5nIGFub3RoZXINCg0KLy8gVGhpcyBmdW5jdGlvbiBnZXRzIGNhbGxlZCB3aGVuIGFuIGVuZC11c2VyIGNsaWNrcyBvbiBzb21lIGRhdGUNCmZ1bmN0aW9uIHNlbGVjdGVkKGNhbCwgZGF0ZSkgew0KCWNhbC5zZWwudmFsdWUgPSBkYXRlOyAvLyBqdXN0IHVwZGF0ZSB0aGUgdmFsdWUgb2YgdGhlIGlucHV0IGZpZWxkDQp9DQoNCi8vIEFuZCB0aGlzIGdldHMgY2FsbGVkIHdoZW4gdGhlIGVuZC11c2VyIGNsaWNrcyBvbiB0aGUgX3NlbGVjdGVkXyBkYXRlLA0KLy8gb3IgY2xpY2tzIHRoZSAiQ2xvc2UiIChYKSBidXR0b24uICBJdCBqdXN0IGhpZGVzIHRoZSBjYWxlbmRhciB3aXRob3V0DQovLyBkZXN0cm95aW5nIGl0Lg0KZnVuY3Rpb24gY2xvc2VIYW5kbGVyKGNhbCkgew0KCWNhbC5oaWRlKCk7CQkJLy8gaGlkZSB0aGUgY2FsZW5kYXINCg0KCS8vIGRvbid0IGNoZWNrIG1vdXNlZG93biBvbiBkb2N1bWVudCBhbnltb3JlICh1c2VkIHRvIGJlIGFibGUgdG8gaGlkZSB0aGUNCgkvLyBjYWxlbmRhciB3aGVuIHNvbWVvbmUgY2xpY2tzIG91dHNpZGUgaXQsIHNlZSB0aGUgc2hvd0NhbGVuZGFyIGZ1bmN0aW9uKS4NCglDYWxlbmRhci5yZW1vdmVFdmVudChkb2N1bWVudCwgIm1vdXNlZG93biIsIGNoZWNrQ2FsZW5kYXIpOw0KfQ0KDQovLyBUaGlzIGdldHMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgcHJlc3NlcyBhIG1vdXNlIGJ1dHRvbiBhbnl3aGVyZSBpbiB0aGUNCi8vIGRvY3VtZW50LCBpZiB0aGUgY2FsZW5kYXIgaXMgc2hvd24uICBJZiB0aGUgY2xpY2sgd2FzIG91dHNpZGUgdGhlIG9wZW4NCi8vIGNhbGVuZGFyIHRoaXMgZnVuY3Rpb24gY2xvc2VzIGl0Lg0KZnVuY3Rpb24gY2hlY2tDYWxlbmRhcihldikgew0KCXZhciBlbCA9IENhbGVuZGFyLmlzX2llID8gQ2FsZW5kYXIuZ2V0RWxlbWVudChldikgOiBDYWxlbmRhci5nZXRUYXJnZXRFbGVtZW50KGV2KTsNCglmb3IgKDsgZWwgIT0gbnVsbDsgZWwgPSBlbC5wYXJlbnROb2RlKQ0KCS8vIEZJWE1FOiBhbGxvdyBlbmQtdXNlciB0byBjbGljayBzb21lIGxpbmsgd2l0aG91dCBjbG9zaW5nIHRoZQ0KCS8vIGNhbGVuZGFyLiAgR29vZCB0byBzZWUgcmVhbC10aW1lIHN0eWxlc2hlZXQgY2hhbmdlIDopDQoJaWYgKGVsID09IGNhbGVuZGFyLmVsZW1lbnQgfHwgZWwudGFnTmFtZSA9PSAiQSIpIGJyZWFrOw0KCWlmIChlbCA9PSBudWxsKSB7DQoJCS8vIGNhbGxzIGNsb3NlSGFuZGxlciB3aGljaCBzaG91bGQgaGlkZSB0aGUgY2FsZW5kYXIuDQoJCWNhbGVuZGFyLmNhbGxDbG9zZUhhbmRsZXIoKTsgQ2FsZW5kYXIuc3RvcEV2ZW50KGV2KTsNCgl9DQp9DQoNCi8vIFRoaXMgZnVuY3Rpb24gc2hvd3MgdGhlIGNhbGVuZGFyIHVuZGVyIHRoZSBlbGVtZW50IGhhdmluZyB0aGUgZ2l2ZW4gaWQuDQovLyBJdCB0YWtlcyBjYXJlIG9mIGNhdGNoaW5nICJtb3VzZWRvd24iIHNpZ25hbHMgb24gZG9jdW1lbnQgYW5kIGhpZGluZyB0aGUNCi8vIGNhbGVuZGFyIGlmIHRoZSBjbGljayB3YXMgb3V0c2lkZS4NCmZ1bmN0aW9uIHNob3dDYWxlbmRhcihpZCkgew0KCXZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsNCglpZiAoY2FsZW5kYXIgIT0gbnVsbCkgew0KCQkvLyB3ZSBhbHJlYWR5IGhhdmUgb25lIGNyZWF0ZWQsIHNvIGp1c3QgdXBkYXRlIGl0Lg0KCQljYWxlbmRhci5oaWRlKCk7CQkvLyBoaWRlIHRoZSBleGlzdGluZyBjYWxlbmRhcg0KCQljYWxlbmRhci5wYXJzZURhdGUoZWwudmFsdWUpOyAvLyBzZXQgaXQgdG8gYSBuZXcgZGF0ZQ0KCX0gZWxzZSB7DQoJCS8vIGZpcnN0LXRpbWUgY2FsbCwgY3JlYXRlIHRoZSBjYWxlbmRhcg0KCQl2YXIgY2FsID0gbmV3IENhbGVuZGFyKHRydWUsIG51bGwsIHNlbGVjdGVkLCBjbG9zZUhhbmRsZXIpOw0KCQljYWxlbmRhciA9IGNhbDsJCS8vIHJlbWVtYmVyIHRoZSBjYWxlbmRhciBpbiB0aGUgZ2xvYmFsDQoJCWNhbC5zZXRSYW5nZSgxOTAwLCAyMDcwKTsJLy8gbWluL21heCB5ZWFyIGFsbG93ZWQNCgkJY2FsZW5kYXIuY3JlYXRlKCk7CQkvLyBjcmVhdGUgYSBwb3B1cCBjYWxlbmRhcg0KCQljYWxlbmRhci5wYXJzZURhdGUoZWwudmFsdWUpOyAvLyBzZXQgaXQgdG8gYSBuZXcgZGF0ZQ0KCX0NCgljYWxlbmRhci5zZWwgPSBlbDsJCS8vIGluZm9ybSBpdCBhYm91dCB0aGUgaW5wdXQgZmllbGQgaW4gdXNlDQoJY2FsZW5kYXIuc2hvd0F0RWxlbWVudChlbCk7CS8vIHNob3cgdGhlIGNhbGVuZGFyIG5leHQgdG8gdGhlIGlucHV0IGZpZWxkDQoNCgkvLyBjYXRjaCBtb3VzZWRvd24gb24gdGhlIGRvY3VtZW50DQoJQ2FsZW5kYXIuYWRkRXZlbnQoZG9jdW1lbnQsICJtb3VzZWRvd24iLCBjaGVja0NhbGVuZGFyKTsNCglyZXR1cm4gZmFsc2U7DQp9DQoNCi8qKg0KKiBQb3BzIHVwIGEgbmV3IHdpbmRvdyBpbiB0aGUgbWlkZGxlIG9mIHRoZSBzY3JlZW4NCiovDQpmdW5jdGlvbiBwb3B1cFdpbmRvdyhteXBhZ2UsIG15bmFtZSwgdywgaCwgc2Nyb2xsKSB7DQoJdmFyIHdpbmwgPSAoc2NyZWVuLndpZHRoIC0gdykgLyAyOw0KCXZhciB3aW50ID0gKHNjcmVlbi5oZWlnaHQgLSBoKSAvIDI7DQoJd2lucHJvcHMgPSAnaGVpZ2h0PScraCsnLHdpZHRoPScrdysnLHRvcD0nK3dpbnQrJyxsZWZ0PScrd2lubCsnLHNjcm9sbGJhcnM9JytzY3JvbGwrJyxyZXNpemFibGUnDQoJd2luID0gd2luZG93Lm9wZW4obXlwYWdlLCBteW5hbWUsIHdpbnByb3BzKQ0KCWlmIChwYXJzZUludChuYXZpZ2F0b3IuYXBwVmVyc2lvbikgPj0gNCkgeyB3aW4ud2luZG93LmZvY3VzKCk7IH0NCn0NCg0KLy8gTFRyaW0oc3RyaW5nKSA6IFJldHVybnMgYSBjb3B5IG9mIGEgc3RyaW5nIHdpdGhvdXQgbGVhZGluZyBzcGFjZXMuDQpmdW5jdGlvbiBsdHJpbShzdHIpDQp7DQogICB2YXIgd2hpdGVzcGFjZSA9IG5ldyBTdHJpbmcoIiBcdFxuXHIiKTsNCiAgIHZhciBzID0gbmV3IFN0cmluZyhzdHIpOw0KICAgaWYgKHdoaXRlc3BhY2UuaW5kZXhPZihzLmNoYXJBdCgwKSkgIT0gLTEpIHsNCiAgICAgIHZhciBqPTAsIGkgPSBzLmxlbmd0aDsNCiAgICAgIHdoaWxlIChqIDwgaSAmJiB3aGl0ZXNwYWNlLmluZGV4T2Yocy5jaGFyQXQoaikpICE9IC0xKQ0KICAgICAgICAgaisrOw0KICAgICAgcyA9IHMuc3Vic3RyaW5nKGosIGkpOw0KICAgfQ0KICAgcmV0dXJuIHM7DQp9DQoNCi8vUlRyaW0oc3RyaW5nKSA6IFJldHVybnMgYSBjb3B5IG9mIGEgc3RyaW5nIHdpdGhvdXQgdHJhaWxpbmcgc3BhY2VzLg0KZnVuY3Rpb24gcnRyaW0oc3RyKQ0Kew0KICAgdmFyIHdoaXRlc3BhY2UgPSBuZXcgU3RyaW5nKCIgXHRcblxyIik7DQogICB2YXIgcyA9IG5ldyBTdHJpbmcoc3RyKTsNCiAgIGlmICh3aGl0ZXNwYWNlLmluZGV4T2Yocy5jaGFyQXQocy5sZW5ndGgtMSkpICE9IC0xKSB7DQogICAgICB2YXIgaSA9IHMubGVuZ3RoIC0gMTsgICAgICAgLy8gR2V0IGxlbmd0aCBvZiBzdHJpbmcNCiAgICAgIHdoaWxlIChpID49IDAgJiYgd2hpdGVzcGFjZS5pbmRleE9mKHMuY2hhckF0KGkpKSAhPSAtMSkNCiAgICAgICAgIGktLTsNCiAgICAgIHMgPSBzLnN1YnN0cmluZygwLCBpKzEpOw0KICAgfQ0KICAgcmV0dXJuIHM7DQp9DQoNCi8vIFRyaW0oc3RyaW5nKSA6IFJldHVybnMgYSBjb3B5IG9mIGEgc3RyaW5nIHdpdGhvdXQgbGVhZGluZyBvciB0cmFpbGluZyBzcGFjZXMNCmZ1bmN0aW9uIHRyaW0oc3RyKSB7DQogICByZXR1cm4gcnRyaW0obHRyaW0oc3RyKSk7DQp9DQoNCmZ1bmN0aW9uIG1vc0RIVE1MKCl7DQoJdGhpcy52ZXI9bmF2aWdhdG9yLmFwcFZlcnNpb24NCgl0aGlzLmFnZW50PW5hdmlnYXRvci51c2VyQWdlbnQNCgl0aGlzLmRvbT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZD8xOjANCgl0aGlzLm9wZXJhNT10aGlzLmFnZW50LmluZGV4T2YoIk9wZXJhIDUiKTwtMQ0KCXRoaXMuaWU1PSh0aGlzLnZlci5pbmRleE9mKCJNU0lFIDUiKTwtMSAmJiB0aGlzLmRvbSAmJiAhdGhpcy5vcGVyYTUpPzE6MDsNCgl0aGlzLmllNj0odGhpcy52ZXIuaW5kZXhPZigiTVNJRSA2Iik8LTEgJiYgdGhpcy5kb20gJiYgIXRoaXMub3BlcmE1KT8xOjA7DQoJdGhpcy5pZTQ9KGRvY3VtZW50LmFsbCAmJiAhdGhpcy5kb20gJiYgIXRoaXMub3BlcmE1KT8xOjA7DQoJdGhpcy5pZT10aGlzLmllNHx8dGhpcy5pZTV8fHRoaXMuaWU2DQoJdGhpcy5tYWM9dGhpcy5hZ2VudC5pbmRleE9mKCJNYWMiKTwtMQ0KCXRoaXMubnM2PSh0aGlzLmRvbSAmJiBwYXJzZUludCh0aGlzLnZlcikgPD0gNSkgPzE6MDsNCgl0aGlzLm5zND0oZG9jdW1lbnQubGF5ZXJzICYmICF0aGlzLmRvbSk\/MTowOw0KCXRoaXMuYnc9KHRoaXMuaWU2fHx0aGlzLmllNXx8dGhpcy5pZTR8fHRoaXMubnM0fHx0aGlzLm5zNnx8dGhpcy5vcGVyYTUpOw0KDQoJdGhpcy5hY3RpdmVUYWIgPSAnJzsNCgl0aGlzLm9uVGFiU3R5bGUgPSAnb250YWInOw0KCXRoaXMub2ZmVGFiU3R5bGUgPSAnb2ZmdGFiJzsNCg0KCXRoaXMuc2V0RWxlbVN0eWxlID0gZnVuY3Rpb24oZWxlbSxzdHlsZSkgew0KCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtKS5jbGFzc05hbWUgPSBzdHlsZTsNCgl9DQoJdGhpcy5zaG93RWxlbSA9IGZ1bmN0aW9uKGlkKSB7DQoJCWlmIChlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpKSB7DQoJCQllbGVtLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7DQoJCQllbGVtLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KCQl9DQoJfQ0KCXRoaXMuaGlkZUVsZW0gPSBmdW5jdGlvbihpZCkgew0KCQlpZiAoZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSkgew0KCQkJZWxlbS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7DQoJCQllbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQoJCX0NCgl9DQoJdGhpcy5jeWNsZVRhYiA9IGZ1bmN0aW9uKG5hbWUpIHsNCgkJaWYgKHRoaXMuYWN0aXZlVGFiKSB7DQoJCQl0aGlzLnNldEVsZW1TdHlsZSggdGhpcy5hY3RpdmVUYWIsIHRoaXMub2ZmVGFiU3R5bGUgKTsNCgkJCXBhZ2UgPSB0aGlzLmFjdGl2ZVRhYi5yZXBsYWNlKCAndGFiJywgJ3BhZ2UnICk7DQoJCQl0aGlzLmhpZGVFbGVtKHBhZ2UpOw0KCQl9DQoJCXRoaXMuc2V0RWxlbVN0eWxlKCBuYW1lLCB0aGlzLm9uVGFiU3R5bGUgKTsNCgkJdGhpcy5hY3RpdmVUYWIgPSBuYW1lOw0KCQlwYWdlID0gdGhpcy5hY3RpdmVUYWIucmVwbGFjZSggJ3RhYicsICdwYWdlJyApOw0KCQl0aGlzLnNob3dFbGVtKHBhZ2UpOw0KCX0NCglyZXR1cm4gdGhpczsNCn0NCnZhciBkaHRtbCA9IG5ldyBtb3NESFRNTCgpOw0KDQpmdW5jdGlvbiBNTV9maW5kT2JqKG4sIGQpIHsgLy92NC4wMQ0KCXZhciBwLGkseDsNCglpZighZCkgZD1kb2N1bWVudDsNCglpZigocD1uLmluZGV4T2YoIj8iKSk+MCYmcGFyZW50LmZyYW1lcy5sZW5ndGgpIHsNCgkJZD1wYXJlbnQuZnJhbWVzW24uc3Vic3RyaW5nKHArMSldLmRvY3VtZW50OyBuPW4uc3Vic3RyaW5nKDAscCk7DQoJfQ0KCWlmKCEoeD1kW25dKSYmZC5hbGwpIHg9ZC5hbGxbbl07DQoJZm9yIChpPTA7IXgmJmk8ZC5mb3Jtcy5sZW5ndGg7aSsrKSB4PWQuZm9ybXNbaV1bbl07DQoJZm9yKGk9MDsheCYmZC5sYXllcnMmJmk8ZC5sYXllcnMubGVuZ3RoO2krKykgeD1NTV9maW5kT2JqKG4sZC5sYXllcnNbaV0uZG9jdW1lbnQpOw0KCWlmKCF4ICYmIGQuZ2V0RWxlbWVudEJ5SWQpIHg9ZC5nZXRFbGVtZW50QnlJZChuKTsNCglyZXR1cm4geDsNCn0NCmZ1bmN0aW9uIE1NX3N3YXBJbWFnZSgpIHsgLy92My4wDQoJdmFyIGksaj0wLHgsYT1NTV9zd2FwSW1hZ2UuYXJndW1lbnRzOw0KCWRvY3VtZW50Lk1NX3NyPW5ldyBBcnJheTsNCglmb3IoaT0wO2k8KGEubGVuZ3RoLTIpO2krPTMpDQoJaWYgKCh4PU1NX2ZpbmRPYmooYVtpXSkpIT1udWxsKXtkb2N1bWVudC5NTV9zcltqKytdPXg7DQoJaWYoIXgub1NyYykgeC5vU3JjPXguc3JjOyB4LnNyYz1hW2krMl07fQ0KfQ0KZnVuY3Rpb24gTU1fc3dhcEltZ1Jlc3RvcmUoKSB7IC8vdjMuMA0KCXZhciBpLHgsYT1kb2N1bWVudC5NTV9zcjsNCglmb3IoaT0wO2EmJmk8YS5sZW5ndGgmJih4PWFbaV0pJiZ4Lm9TcmM7aSsrKSB4LnNyYz14Lm9TcmM7DQp9DQoNCmZ1bmN0aW9uIE1NX3ByZWxvYWRJbWFnZXMoKSB7IC8vdjMuMA0KCXZhciBkPWRvY3VtZW50Ow0KCWlmKGQuaW1hZ2VzKXsNCglpZighZC5NTV9wKSBkLk1NX3A9bmV3IEFycmF5KCk7DQoJdmFyIGksaj1kLk1NX3AubGVuZ3RoLGE9TU1fcHJlbG9hZEltYWdlcy5hcmd1bWVudHM7DQoJZm9yKGk9MDsgaTxhLmxlbmd0aDsgaSsrKQ0KCWlmIChhW2ldLmluZGV4T2YoIiMiKSE9MCl7IGQuTU1fcFtqXT1uZXcgSW1hZ2U7IGQuTU1fcFtqKytdLnNyYz1hW2ldO319DQp9DQoNCg0KZnVuY3Rpb24gc2F2ZW9yZGVyKCBuICkgew0KCWNoZWNrQWxsX2J1dHRvbiggbiApOw0KfQ0KDQovL25lZWRlZCBieSBzYXZlb3JkZXIgZnVuY3Rpb24NCmZ1bmN0aW9uIGNoZWNrQWxsX2J1dHRvbiggbiApIHsNCglmb3IgKCB2YXIgaiA9IDA7IGogPD0gbjsgaisrICkgew0KCQlib3ggPSBldmFsKCAiZG9jdW1lbnQuYWRtaW5Gb3JtLmNiIiArIGogKTsNCgkJaWYgKCBib3ggKSB7DQoJCQlpZiAoIGJveC5jaGVja2VkID09IGZhbHNlICkgew0KCQkJCWJveC5jaGVja2VkID0gdHJ1ZTsNCgkJCX0NCgkJfSBlbHNlIHsNCgkJCWFsZXJ0KCJZb3UgY2Fubm90IGNoYW5nZSB0aGUgb3JkZXIgb2YgaXRlbXMsIGFzIGFuIGl0ZW0gaW4gdGhlIGxpc3QgaXMgYENoZWNrZWQgT3V0YCIpOw0KCQkJcmV0dXJuOw0KCQl9DQoJfQ0KCXN1Ym1pdGZvcm0oJ3NhdmVvcmRlcicpOw0KfQ0KLyoqDQoqIEBwYXJhbSBvYmplY3QgQSBmb3JtIGVsZW1lbnQNCiogQHBhcmFtIHN0cmluZyBUaGUgbmFtZSBvZiB0aGUgZWxlbWVudCB0byBmaW5kDQoqLw0KZnVuY3Rpb24gZ2V0RWxlbWVudEJ5TmFtZSggZiwgbmFtZSApIHsNCglpZiAoZi5lbGVtZW50cykgew0KCQlmb3IgKGk9MCwgbj1mLmVsZW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykgew0KCQkJaWYgKGYuZWxlbWVudHNbaV0ubmFtZSA9PSBuYW1lKSB7DQoJCQkJcmV0dXJuIGYuZWxlbWVudHNbaV07DQoJCQl9DQoJCX0NCgl9DQoJcmV0dXJuIG51bGw7DQp9",
    "size": "19989"
}