{
    "namaFile": "lib\/PHPExcel\/Classes\/PHPExcel\/Calculation\/Engineering.php",
    "lastUpdate": "2017-12-25+01:39:38.00",
    "contentFile": "PD9waHAKCi8qKiBQSFBFeGNlbCByb290IGRpcmVjdG9yeSAqLwppZiAoIWRlZmluZWQoJ1BIUEVYQ0VMX1JPT1QnKSkgewogICAgLyoqCiAgICAgKiBAaWdub3JlCiAgICAgKi8KICAgIGRlZmluZSgnUEhQRVhDRUxfUk9PVCcsIGRpcm5hbWUoX19GSUxFX18pIC4gJy8uLi8uLi8nKTsKICAgIHJlcXVpcmUoUEhQRVhDRUxfUk9PVCAuICdQSFBFeGNlbC9BdXRvbG9hZGVyLnBocCcpOwp9CgovKiogRVVMRVIgKi8KZGVmaW5lKCdFVUxFUicsIDIuNzE4MjgxODI4NDU5MDQ1MjM1MzYpOwoKLyoqCiAqIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0VuZ2luZWVyaW5nCiAqCiAqIENvcHlyaWdodCAoYykgMjAwNiAtIDIwMTUgUEhQRXhjZWwKICoKICogVGhpcyBsaWJyYXJ5IGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vcgogKiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljCiAqIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlcgogKiB2ZXJzaW9uIDIuMSBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KICoKICogVGhpcyBsaWJyYXJ5IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZSBHTlUKICogTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KICoKICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYwogKiBMaWNlbnNlIGFsb25nIHdpdGggdGhpcyBsaWJyYXJ5OyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlCiAqIEZvdW5kYXRpb24sIEluYy4sIDUxIEZyYW5rbGluIFN0cmVldCwgRmlmdGggRmxvb3IsIEJvc3RvbiwgTUEgMDIxMTAtMTMwMSBVU0EKICoKICogQGNhdGVnb3J5ICAgIFBIUEV4Y2VsCiAqIEBwYWNrYWdlICAgICAgICBQSFBFeGNlbF9DYWxjdWxhdGlvbgogKiBAY29weXJpZ2h0ICAgIENvcHlyaWdodCAoYykgMjAwNiAtIDIwMTUgUEhQRXhjZWwgKGh0dHA6Ly93d3cuY29kZXBsZXguY29tL1BIUEV4Y2VsKQogKiBAbGljZW5zZSAgICAgICAgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL29sZC1saWNlbnNlcy9sZ3BsLTIuMS50eHQgICAgTEdQTAogKiBAdmVyc2lvbiAgICAgICAgIyNWRVJTSU9OIyMsICMjREFURSMjCiAqLwpjbGFzcyBQSFBFeGNlbF9DYWxjdWxhdGlvbl9FbmdpbmVlcmluZwp7CiAgICAvKioKICAgICAqIERldGFpbHMgb2YgdGhlIFVuaXRzIG9mIG1lYXN1cmUgdGhhdCBjYW4gYmUgdXNlZCBpbiBDT05WRVJUVU9NKCkKICAgICAqCiAgICAgKiBAdmFyIG1peGVkW10KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgJGNvbnZlcnNpb25Vbml0cyA9IGFycmF5KAogICAgICAgICdnJyAgICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnTWFzcycsICAgICAgICAnVW5pdCBOYW1lJyA9PiAnR3JhbScsICAgICAgICAgICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiB0cnVlKSwKICAgICAgICAnc2cnICAgID0+IGFycmF5KCdHcm91cCcgPT4gJ01hc3MnLCAgICAgICAgJ1VuaXQgTmFtZScgPT4gJ1NsdWcnLCAgICAgICAgICAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gZmFsc2UpLAogICAgICAgICdsYm0nICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnTWFzcycsICAgICAgICAnVW5pdCBOYW1lJyA9PiAnUG91bmQgbWFzcyAoYXZvaXJkdXBvaXMpJywgJ0FsbG93UHJlZml4JyA9PiBmYWxzZSksCiAgICAgICAgJ3UnICAgICA9PiBhcnJheSgnR3JvdXAnID0+ICdNYXNzJywgICAgICAgICdVbml0IE5hbWUnID0+ICdVIChhdG9taWMgbWFzcyB1bml0KScsICAgICAnQWxsb3dQcmVmaXgnID0+IHRydWUpLAogICAgICAgICdvem0nICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnTWFzcycsICAgICAgICAnVW5pdCBOYW1lJyA9PiAnT3VuY2UgbWFzcyAoYXZvaXJkdXBvaXMpJywgJ0FsbG93UHJlZml4JyA9PiBmYWxzZSksCiAgICAgICAgJ20nICAgICA9PiBhcnJheSgnR3JvdXAnID0+ICdEaXN0YW5jZScsICAgICdVbml0IE5hbWUnID0+ICdNZXRlcicsICAgICAgICAgICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IHRydWUpLAogICAgICAgICdtaScgICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnRGlzdGFuY2UnLCAgICAnVW5pdCBOYW1lJyA9PiAnU3RhdHV0ZSBtaWxlJywgICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiBmYWxzZSksCiAgICAgICAgJ05taScgICA9PiBhcnJheSgnR3JvdXAnID0+ICdEaXN0YW5jZScsICAgICdVbml0IE5hbWUnID0+ICdOYXV0aWNhbCBtaWxlJywgICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IGZhbHNlKSwKICAgICAgICAnaW4nICAgID0+IGFycmF5KCdHcm91cCcgPT4gJ0Rpc3RhbmNlJywgICAgJ1VuaXQgTmFtZScgPT4gJ0luY2gnLCAgICAgICAgICAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gZmFsc2UpLAogICAgICAgICdmdCcgICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnRGlzdGFuY2UnLCAgICAnVW5pdCBOYW1lJyA9PiAnRm9vdCcsICAgICAgICAgICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiBmYWxzZSksCiAgICAgICAgJ3lkJyAgICA9PiBhcnJheSgnR3JvdXAnID0+ICdEaXN0YW5jZScsICAgICdVbml0IE5hbWUnID0+ICdZYXJkJywgICAgICAgICAgICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IGZhbHNlKSwKICAgICAgICAnYW5nJyAgID0+IGFycmF5KCdHcm91cCcgPT4gJ0Rpc3RhbmNlJywgICAgJ1VuaXQgTmFtZScgPT4gJ0FuZ3N0cm9tJywgICAgICAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gdHJ1ZSksCiAgICAgICAgJ1BpY2EnICA9PiBhcnJheSgnR3JvdXAnID0+ICdEaXN0YW5jZScsICAgICdVbml0IE5hbWUnID0+ICdQaWNhICgxLzcyIGluKScsICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IGZhbHNlKSwKICAgICAgICAneXInICAgID0+IGFycmF5KCdHcm91cCcgPT4gJ1RpbWUnLCAgICAgICAgJ1VuaXQgTmFtZScgPT4gJ1llYXInLCAgICAgICAgICAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gZmFsc2UpLAogICAgICAgICdkYXknICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnVGltZScsICAgICAgICAnVW5pdCBOYW1lJyA9PiAnRGF5JywgICAgICAgICAgICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiBmYWxzZSksCiAgICAgICAgJ2hyJyAgICA9PiBhcnJheSgnR3JvdXAnID0+ICdUaW1lJywgICAgICAgICdVbml0IE5hbWUnID0+ICdIb3VyJywgICAgICAgICAgICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IGZhbHNlKSwKICAgICAgICAnbW4nICAgID0+IGFycmF5KCdHcm91cCcgPT4gJ1RpbWUnLCAgICAgICAgJ1VuaXQgTmFtZScgPT4gJ01pbnV0ZScsICAgICAgICAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gZmFsc2UpLAogICAgICAgICdzZWMnICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnVGltZScsICAgICAgICAnVW5pdCBOYW1lJyA9PiAnU2Vjb25kJywgICAgICAgICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiB0cnVlKSwKICAgICAgICAnUGEnICAgID0+IGFycmF5KCdHcm91cCcgPT4gJ1ByZXNzdXJlJywgICAgJ1VuaXQgTmFtZScgPT4gJ1Bhc2NhbCcsICAgICAgICAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gdHJ1ZSksCiAgICAgICAgJ3AnICAgICA9PiBhcnJheSgnR3JvdXAnID0+ICdQcmVzc3VyZScsICAgICdVbml0IE5hbWUnID0+ICdQYXNjYWwnLCAgICAgICAgICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IHRydWUpLAogICAgICAgICdhdG0nICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnUHJlc3N1cmUnLCAgICAnVW5pdCBOYW1lJyA9PiAnQXRtb3NwaGVyZScsICAgICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiB0cnVlKSwKICAgICAgICAnYXQnICAgID0+IGFycmF5KCdHcm91cCcgPT4gJ1ByZXNzdXJlJywgICAgJ1VuaXQgTmFtZScgPT4gJ0F0bW9zcGhlcmUnLCAgICAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gdHJ1ZSksCiAgICAgICAgJ21tSGcnICA9PiBhcnJheSgnR3JvdXAnID0+ICdQcmVzc3VyZScsICAgICdVbml0IE5hbWUnID0+ICdtbSBvZiBNZXJjdXJ5JywgICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IHRydWUpLAogICAgICAgICdOJyAgICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnRm9yY2UnLCAgICAgICAnVW5pdCBOYW1lJyA9PiAnTmV3dG9uJywgICAgICAgICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiB0cnVlKSwKICAgICAgICAnZHluJyAgID0+IGFycmF5KCdHcm91cCcgPT4gJ0ZvcmNlJywgICAgICAgJ1VuaXQgTmFtZScgPT4gJ0R5bmUnLCAgICAgICAgICAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gdHJ1ZSksCiAgICAgICAgJ2R5JyAgICA9PiBhcnJheSgnR3JvdXAnID0+ICdGb3JjZScsICAgICAgICdVbml0IE5hbWUnID0+ICdEeW5lJywgICAgICAgICAgICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IHRydWUpLAogICAgICAgICdsYmYnICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnRm9yY2UnLCAgICAgICAnVW5pdCBOYW1lJyA9PiAnUG91bmQgZm9yY2UnLCAgICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiBmYWxzZSksCiAgICAgICAgJ0onICAgICA9PiBhcnJheSgnR3JvdXAnID0+ICdFbmVyZ3knLCAgICAgICdVbml0IE5hbWUnID0+ICdKb3VsZScsICAgICAgICAgICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IHRydWUpLAogICAgICAgICdlJyAgICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnRW5lcmd5JywgICAgICAnVW5pdCBOYW1lJyA9PiAnRXJnJywgICAgICAgICAgICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiB0cnVlKSwKICAgICAgICAnYycgICAgID0+IGFycmF5KCdHcm91cCcgPT4gJ0VuZXJneScsICAgICAgJ1VuaXQgTmFtZScgPT4gJ1RoZXJtb2R5bmFtaWMgY2Fsb3JpZScsICAgICdBbGxvd1ByZWZpeCcgPT4gdHJ1ZSksCiAgICAgICAgJ2NhbCcgICA9PiBhcnJheSgnR3JvdXAnID0+ICdFbmVyZ3knLCAgICAgICdVbml0IE5hbWUnID0+ICdJVCBjYWxvcmllJywgICAgICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IHRydWUpLAogICAgICAgICdlVicgICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnRW5lcmd5JywgICAgICAnVW5pdCBOYW1lJyA9PiAnRWxlY3Ryb24gdm9sdCcsICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiB0cnVlKSwKICAgICAgICAnZXYnICAgID0+IGFycmF5KCdHcm91cCcgPT4gJ0VuZXJneScsICAgICAgJ1VuaXQgTmFtZScgPT4gJ0VsZWN0cm9uIHZvbHQnLCAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gdHJ1ZSksCiAgICAgICAgJ0hQaCcgICA9PiBhcnJheSgnR3JvdXAnID0+ICdFbmVyZ3knLCAgICAgICdVbml0IE5hbWUnID0+ICdIb3JzZXBvd2VyLWhvdXInLCAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IGZhbHNlKSwKICAgICAgICAnaGgnICAgID0+IGFycmF5KCdHcm91cCcgPT4gJ0VuZXJneScsICAgICAgJ1VuaXQgTmFtZScgPT4gJ0hvcnNlcG93ZXItaG91cicsICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gZmFsc2UpLAogICAgICAgICdXaCcgICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnRW5lcmd5JywgICAgICAnVW5pdCBOYW1lJyA9PiAnV2F0dC1ob3VyJywgICAgICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiB0cnVlKSwKICAgICAgICAnd2gnICAgID0+IGFycmF5KCdHcm91cCcgPT4gJ0VuZXJneScsICAgICAgJ1VuaXQgTmFtZScgPT4gJ1dhdHQtaG91cicsICAgICAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gdHJ1ZSksCiAgICAgICAgJ2ZsYicgICA9PiBhcnJheSgnR3JvdXAnID0+ICdFbmVyZ3knLCAgICAgICdVbml0IE5hbWUnID0+ICdGb290LXBvdW5kJywgICAgICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IGZhbHNlKSwKICAgICAgICAnQlRVJyAgID0+IGFycmF5KCdHcm91cCcgPT4gJ0VuZXJneScsICAgICAgJ1VuaXQgTmFtZScgPT4gJ0JUVScsICAgICAgICAgICAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gZmFsc2UpLAogICAgICAgICdidHUnICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnRW5lcmd5JywgICAgICAnVW5pdCBOYW1lJyA9PiAnQlRVJywgICAgICAgICAgICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiBmYWxzZSksCiAgICAgICAgJ0hQJyAgICA9PiBhcnJheSgnR3JvdXAnID0+ICdQb3dlcicsICAgICAgICdVbml0IE5hbWUnID0+ICdIb3JzZXBvd2VyJywgICAgICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IGZhbHNlKSwKICAgICAgICAnaCcgICAgID0+IGFycmF5KCdHcm91cCcgPT4gJ1Bvd2VyJywgICAgICAgJ1VuaXQgTmFtZScgPT4gJ0hvcnNlcG93ZXInLCAgICAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gZmFsc2UpLAogICAgICAgICdXJyAgICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnUG93ZXInLCAgICAgICAnVW5pdCBOYW1lJyA9PiAnV2F0dCcsICAgICAgICAgICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiB0cnVlKSwKICAgICAgICAndycgICAgID0+IGFycmF5KCdHcm91cCcgPT4gJ1Bvd2VyJywgICAgICAgJ1VuaXQgTmFtZScgPT4gJ1dhdHQnLCAgICAgICAgICAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gdHJ1ZSksCiAgICAgICAgJ1QnICAgICA9PiBhcnJheSgnR3JvdXAnID0+ICdNYWduZXRpc20nLCAgICdVbml0IE5hbWUnID0+ICdUZXNsYScsICAgICAgICAgICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IHRydWUpLAogICAgICAgICdnYScgICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnTWFnbmV0aXNtJywgICAnVW5pdCBOYW1lJyA9PiAnR2F1c3MnLCAgICAgICAgICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiB0cnVlKSwKICAgICAgICAnQycgICAgID0+IGFycmF5KCdHcm91cCcgPT4gJ1RlbXBlcmF0dXJlJywgJ1VuaXQgTmFtZScgPT4gJ0NlbHNpdXMnLCAgICAgICAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gZmFsc2UpLAogICAgICAgICdjZWwnICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnVGVtcGVyYXR1cmUnLCAnVW5pdCBOYW1lJyA9PiAnQ2Vsc2l1cycsICAgICAgICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiBmYWxzZSksCiAgICAgICAgJ0YnICAgICA9PiBhcnJheSgnR3JvdXAnID0+ICdUZW1wZXJhdHVyZScsICdVbml0IE5hbWUnID0+ICdGYWhyZW5oZWl0JywgICAgICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IGZhbHNlKSwKICAgICAgICAnZmFoJyAgID0+IGFycmF5KCdHcm91cCcgPT4gJ1RlbXBlcmF0dXJlJywgJ1VuaXQgTmFtZScgPT4gJ0ZhaHJlbmhlaXQnLCAgICAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gZmFsc2UpLAogICAgICAgICdLJyAgICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnVGVtcGVyYXR1cmUnLCAnVW5pdCBOYW1lJyA9PiAnS2VsdmluJywgICAgICAgICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiBmYWxzZSksCiAgICAgICAgJ2tlbCcgICA9PiBhcnJheSgnR3JvdXAnID0+ICdUZW1wZXJhdHVyZScsICdVbml0IE5hbWUnID0+ICdLZWx2aW4nLCAgICAgICAgICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IGZhbHNlKSwKICAgICAgICAndHNwJyAgID0+IGFycmF5KCdHcm91cCcgPT4gJ0xpcXVpZCcsICAgICAgJ1VuaXQgTmFtZScgPT4gJ1RlYXNwb29uJywgICAgICAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gZmFsc2UpLAogICAgICAgICd0YnMnICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnTGlxdWlkJywgICAgICAnVW5pdCBOYW1lJyA9PiAnVGFibGVzcG9vbicsICAgICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiBmYWxzZSksCiAgICAgICAgJ296JyAgICA9PiBhcnJheSgnR3JvdXAnID0+ICdMaXF1aWQnLCAgICAgICdVbml0IE5hbWUnID0+ICdGbHVpZCBPdW5jZScsICAgICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IGZhbHNlKSwKICAgICAgICAnY3VwJyAgID0+IGFycmF5KCdHcm91cCcgPT4gJ0xpcXVpZCcsICAgICAgJ1VuaXQgTmFtZScgPT4gJ0N1cCcsICAgICAgICAgICAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gZmFsc2UpLAogICAgICAgICdwdCcgICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnTGlxdWlkJywgICAgICAnVW5pdCBOYW1lJyA9PiAnVS5TLiBQaW50JywgICAgICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiBmYWxzZSksCiAgICAgICAgJ3VzX3B0JyA9PiBhcnJheSgnR3JvdXAnID0+ICdMaXF1aWQnLCAgICAgICdVbml0IE5hbWUnID0+ICdVLlMuIFBpbnQnLCAgICAgICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IGZhbHNlKSwKICAgICAgICAndWtfcHQnID0+IGFycmF5KCdHcm91cCcgPT4gJ0xpcXVpZCcsICAgICAgJ1VuaXQgTmFtZScgPT4gJ1UuSy4gUGludCcsICAgICAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gZmFsc2UpLAogICAgICAgICdxdCcgICAgPT4gYXJyYXkoJ0dyb3VwJyA9PiAnTGlxdWlkJywgICAgICAnVW5pdCBOYW1lJyA9PiAnUXVhcnQnLCAgICAgICAgICAgICAgICAgICAgJ0FsbG93UHJlZml4JyA9PiBmYWxzZSksCiAgICAgICAgJ2dhbCcgICA9PiBhcnJheSgnR3JvdXAnID0+ICdMaXF1aWQnLCAgICAgICdVbml0IE5hbWUnID0+ICdHYWxsb24nLCAgICAgICAgICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IGZhbHNlKSwKICAgICAgICAnbCcgICAgID0+IGFycmF5KCdHcm91cCcgPT4gJ0xpcXVpZCcsICAgICAgJ1VuaXQgTmFtZScgPT4gJ0xpdHJlJywgICAgICAgICAgICAgICAgICAgICdBbGxvd1ByZWZpeCcgPT4gdHJ1ZSksCiAgICAgICAgJ2x0JyAgICA9PiBhcnJheSgnR3JvdXAnID0+ICdMaXF1aWQnLCAgICAgICdVbml0IE5hbWUnID0+ICdMaXRyZScsICAgICAgICAgICAgICAgICAgICAnQWxsb3dQcmVmaXgnID0+IHRydWUpLAogICAgKTsKCiAgICAvKioKICAgICAqIERldGFpbHMgb2YgdGhlIE11bHRpcGxpZXIgcHJlZml4ZXMgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIFVuaXRzIG9mIE1lYXN1cmUgaW4gQ09OVkVSVFVPTSgpCiAgICAgKgogICAgICogQHZhciBtaXhlZFtdCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljICRjb252ZXJzaW9uTXVsdGlwbGllcnMgPSBhcnJheSgKICAgICAgICAnWScgPT4gYXJyYXkoJ211bHRpcGxpZXInID0+IDFFMjQsICAnbmFtZScgPT4gJ3lvdHRhJyksCiAgICAgICAgJ1onID0+IGFycmF5KCdtdWx0aXBsaWVyJyA9PiAxRTIxLCAgJ25hbWUnID0+ICd6ZXR0YScpLAogICAgICAgICdFJyA9PiBhcnJheSgnbXVsdGlwbGllcicgPT4gMUUxOCwgICduYW1lJyA9PiAnZXhhJyksCiAgICAgICAgJ1AnID0+IGFycmF5KCdtdWx0aXBsaWVyJyA9PiAxRTE1LCAgJ25hbWUnID0+ICdwZXRhJyksCiAgICAgICAgJ1QnID0+IGFycmF5KCdtdWx0aXBsaWVyJyA9PiAxRTEyLCAgJ25hbWUnID0+ICd0ZXJhJyksCiAgICAgICAgJ0cnID0+IGFycmF5KCdtdWx0aXBsaWVyJyA9PiAxRTksICAgJ25hbWUnID0+ICdnaWdhJyksCiAgICAgICAgJ00nID0+IGFycmF5KCdtdWx0aXBsaWVyJyA9PiAxRTYsICAgJ25hbWUnID0+ICdtZWdhJyksCiAgICAgICAgJ2snID0+IGFycmF5KCdtdWx0aXBsaWVyJyA9PiAxRTMsICAgJ25hbWUnID0+ICdraWxvJyksCiAgICAgICAgJ2gnID0+IGFycmF5KCdtdWx0aXBsaWVyJyA9PiAxRTIsICAgJ25hbWUnID0+ICdoZWN0bycpLAogICAgICAgICdlJyA9PiBhcnJheSgnbXVsdGlwbGllcicgPT4gMUUxLCAgICduYW1lJyA9PiAnZGVrYScpLAogICAgICAgICdkJyA9PiBhcnJheSgnbXVsdGlwbGllcicgPT4gMUUtMSwgICduYW1lJyA9PiAnZGVjaScpLAogICAgICAgICdjJyA9PiBhcnJheSgnbXVsdGlwbGllcicgPT4gMUUtMiwgICduYW1lJyA9PiAnY2VudGknKSwKICAgICAgICAnbScgPT4gYXJyYXkoJ211bHRpcGxpZXInID0+IDFFLTMsICAnbmFtZScgPT4gJ21pbGxpJyksCiAgICAgICAgJ3UnID0+IGFycmF5KCdtdWx0aXBsaWVyJyA9PiAxRS02LCAgJ25hbWUnID0+ICdtaWNybycpLAogICAgICAgICduJyA9PiBhcnJheSgnbXVsdGlwbGllcicgPT4gMUUtOSwgICduYW1lJyA9PiAnbmFubycpLAogICAgICAgICdwJyA9PiBhcnJheSgnbXVsdGlwbGllcicgPT4gMUUtMTIsICduYW1lJyA9PiAncGljbycpLAogICAgICAgICdmJyA9PiBhcnJheSgnbXVsdGlwbGllcicgPT4gMUUtMTUsICduYW1lJyA9PiAnZmVtdG8nKSwKICAgICAgICAnYScgPT4gYXJyYXkoJ211bHRpcGxpZXInID0+IDFFLTE4LCAnbmFtZScgPT4gJ2F0dG8nKSwKICAgICAgICAneicgPT4gYXJyYXkoJ211bHRpcGxpZXInID0+IDFFLTIxLCAnbmFtZScgPT4gJ3plcHRvJyksCiAgICAgICAgJ3knID0+IGFycmF5KCdtdWx0aXBsaWVyJyA9PiAxRS0yNCwgJ25hbWUnID0+ICd5b2N0bycpLAogICAgKTsKCiAgICAvKioKICAgICAqIERldGFpbHMgb2YgdGhlIFVuaXRzIG9mIG1lYXN1cmUgY29udmVyc2lvbiBmYWN0b3JzLCBvcmdhbmlzZWQgYnkgZ3JvdXAKICAgICAqCiAgICAgKiBAdmFyIG1peGVkW10KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgJHVuaXRDb252ZXJzaW9ucyA9IGFycmF5KAogICAgICAgICdNYXNzJyA9PiBhcnJheSgKICAgICAgICAgICAgJ2cnID0+IGFycmF5KAogICAgICAgICAgICAgICAgJ2cnICAgPT4gMS4wLAogICAgICAgICAgICAgICAgJ3NnJyAgPT4gNi44NTIyMDUwMDA1MzQ3OEUtMDUsCiAgICAgICAgICAgICAgICAnbGJtJyA9PiAyLjIwNDYyMjkxNDY5MTM0RS0wMywKICAgICAgICAgICAgICAgICd1JyAgID0+IDYuMDIyMTcwMDAwMDAwMDBFKzIzLAogICAgICAgICAgICAgICAgJ296bScgPT4gMy41MjczOTcxODAwMzYyN0UtMDIsCiAgICAgICAgICAgICksCiAgICAgICAgICAgICdzZycgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAnZycgICA9PiAxLjQ1OTM4NDI0MTg5Mjg3RSswNCwKICAgICAgICAgICAgICAgICdzZycgID0+IDEuMCwKICAgICAgICAgICAgICAgICdsYm0nID0+IDMuMjE3MzkxOTQxMDE2NDdFKzAxLAogICAgICAgICAgICAgICAgJ3UnICAgPT4gOC43ODg2NjAwMDAwMDAwMEUrMjcsCiAgICAgICAgICAgICAgICAnb3ptJyA9PiA1LjE0NzgyNzg1OTQ0MjI5RSswMiwKICAgICAgICAgICAgKSwKICAgICAgICAgICAgJ2xibScgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAnZycgICA9PiA0LjUzNTkyMzA5NzQ4ODExNDhFKzAyLAogICAgICAgICAgICAgICAgJ3NnJyAgPT4gMy4xMDgxMDc0OTMwNjQ5M0UtMDIsCiAgICAgICAgICAgICAgICAnbGJtJyA9PiAxLjAsCiAgICAgICAgICAgICAgICAndScgICA9PiAyLjczMTYxMDAwMDAwMDAwRSsyNiwKICAgICAgICAgICAgICAgICdvem0nID0+IDEuNjAwMDAwMjM0Mjk0MTBFKzAxLAogICAgICAgICAgICApLAogICAgICAgICAgICAndScgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAnZycgICA9PiAxLjY2MDUzMTAwNDYwNDY1RS0yNCwKICAgICAgICAgICAgICAgICdzZycgID0+IDEuMTM3ODI5ODg1MzI5NTBFLTI4LAogICAgICAgICAgICAgICAgJ2xibScgPT4gMy42NjA4NDQ3MDMzMDY4NEUtMjcsCiAgICAgICAgICAgICAgICAndScgICA9PiAxLjAsCiAgICAgICAgICAgICAgICAnb3ptJyA9PiA1Ljg1NzM1MjM4MzAwNTI0RS0yNiwKICAgICAgICAgICAgKSwKICAgICAgICAgICAgJ296bScgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAnZycgICA9PiAyLjgzNDk1MTUyMDc5NzMyRSswMSwKICAgICAgICAgICAgICAgICdzZycgID0+IDEuOTQyNTY2ODk4NzA4MTFFLTAzLAogICAgICAgICAgICAgICAgJ2xibScgPT4gNi4yNDk5OTkwODQ3ODg4MkUtMDIsCiAgICAgICAgICAgICAgICAndScgICA9PiAxLjcwNzI1NjAwMDAwMDAwRSsyNSwKICAgICAgICAgICAgICAgICdvem0nID0+IDEuMCwKICAgICAgICAgICAgKSwKICAgICAgICApLAogICAgICAgICdEaXN0YW5jZScgPT4gYXJyYXkoCiAgICAgICAgICAgICdtJyA9PiBhcnJheSgKICAgICAgICAgICAgICAgICdtJyAgICA9PiAxLjAsCiAgICAgICAgICAgICAgICAnbWknICAgPT4gNi4yMTM3MTE5MjIzNzMzNEUtMDQsCiAgICAgICAgICAgICAgICAnTm1pJyAgPT4gNS4zOTk1NjgwMzQ1NTcyNEUtMDQsCiAgICAgICAgICAgICAgICAnaW4nICAgPT4gMy45MzcwMDc4NzQwMTU3NUUrMDEsCiAgICAgICAgICAgICAgICAnZnQnICAgPT4gMy4yODA4Mzk4OTUwMTMxMkUrMDAsCiAgICAgICAgICAgICAgICAneWQnICAgPT4gMS4wOTM2MTMyOTc5Nzg5MUUrMDAsCiAgICAgICAgICAgICAgICAnYW5nJyAgPT4gMS4wMDAwMDAwMDAwMDAwMEUrMTAsCiAgICAgICAgICAgICAgICAnUGljYScgPT4gMi44MzQ2NDU2NjkyOTExNkUrMDMsCiAgICAgICAgICAgICksCiAgICAgICAgICAgICdtaScgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAnbScgICAgPT4gMS42MDkzNDQwMDAwMDAwMEUrMDMsCiAgICAgICAgICAgICAgICAnbWknICAgPT4gMS4wLAogICAgICAgICAgICAgICAgJ05taScgID0+IDguNjg5NzYyNDE5MDA2NDhFLTAxLAogICAgICAgICAgICAgICAgJ2luJyAgID0+IDYuMzM2MDAwMDAwMDAwMDBFKzA0LAogICAgICAgICAgICAgICAgJ2Z0JyAgID0+IDUuMjgwMDAwMDAwMDAwMDBFKzAzLAogICAgICAgICAgICAgICAgJ3lkJyAgID0+IDEuNzYwMDAwMDAwMDAwMDBFKzAzLAogICAgICAgICAgICAgICAgJ2FuZycgID0+IDEuNjA5MzQ0MDAwMDAwMDBFKzEzLAogICAgICAgICAgICAgICAgJ1BpY2EnID0+IDQuNTYxOTE5OTk5OTk5NzFFKzA2LAogICAgICAgICAgICApLAogICAgICAgICAgICAnTm1pJyA9PiBhcnJheSgKICAgICAgICAgICAgICAgICdtJyAgICA9PiAxLjg1MjAwMDAwMDAwMDAwRSswMywKICAgICAgICAgICAgICAgICdtaScgICA9PiAxLjE1MDc3OTQ0ODAyMzU0RSswMCwKICAgICAgICAgICAgICAgICdObWknICA9PiAxLjAsCiAgICAgICAgICAgICAgICAnaW4nICAgPT4gNy4yOTEzMzg1ODI2NzcxN0UrMDQsCiAgICAgICAgICAgICAgICAnZnQnICAgPT4gNi4wNzYxMTU0ODU1NjQzMEUrMDMsCiAgICAgICAgICAgICAgICAneWQnICAgPT4gMi4wMjUzNzE4Mjc4NTY5NEUrMDMsCiAgICAgICAgICAgICAgICAnYW5nJyAgPT4gMS44NTIwMDAwMDAwMDAwMEUrMTMsCiAgICAgICAgICAgICAgICAnUGljYScgPT4gNS4yNDk3NjM3Nzk1MjcyM0UrMDYsCiAgICAgICAgICAgICksCiAgICAgICAgICAgICdpbicgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAnbScgICAgPT4gMi41NDAwMDAwMDAwMDAwMEUtMDIsCiAgICAgICAgICAgICAgICAnbWknICAgPT4gMS41NzgyODI4MjgyODI4M0UtMDUsCiAgICAgICAgICAgICAgICAnTm1pJyAgPT4gMS4zNzE0OTAyODA3Nzc1NEUtMDUsCiAgICAgICAgICAgICAgICAnaW4nICAgPT4gMS4wLAogICAgICAgICAgICAgICAgJ2Z0JyAgID0+IDguMzMzMzMzMzMzMzMzMzNFLTAyLAogICAgICAgICAgICAgICAgJ3lkJyAgID0+IDIuNzc3Nzc3Nzc2ODY2NDNFLTAyLAogICAgICAgICAgICAgICAgJ2FuZycgID0+IDIuNTQwMDAwMDAwMDAwMDBFKzA4LAogICAgICAgICAgICAgICAgJ1BpY2EnID0+IDcuMTk5OTk5OTk5OTk5NTVFKzAxLAogICAgICAgICAgICApLAogICAgICAgICAgICAnZnQnID0+IGFycmF5KAogICAgICAgICAgICAgICAgJ20nICAgID0+IDMuMDQ4MDAwMDAwMDAwMDBFLTAxLAogICAgICAgICAgICAgICAgJ21pJyAgID0+IDEuODkzOTM5MzkzOTM5MzlFLTA0LAogICAgICAgICAgICAgICAgJ05taScgID0+IDEuNjQ1Nzg4MzM2OTMzMDVFLTA0LAogICAgICAgICAgICAgICAgJ2luJyAgID0+IDEuMjAwMDAwMDAwMDAwMDBFKzAxLAogICAgICAgICAgICAgICAgJ2Z0JyAgID0+IDEuMCwKICAgICAgICAgICAgICAgICd5ZCcgICA9PiAzLjMzMzMzMzMzMjIzOTcyRS0wMSwKICAgICAgICAgICAgICAgICdhbmcnICA9PiAzLjA0ODAwMDAwMDAwMDAwRSswOSwKICAgICAgICAgICAgICAgICdQaWNhJyA9PiA4LjYzOTk5OTk5OTk5OTQ2RSswMiwKICAgICAgICAgICAgKSwKICAgICAgICAgICAgJ3lkJyA9PiBhcnJheSgKICAgICAgICAgICAgICAgICdtJyAgICA9PiA5LjE0NDAwMDAwMzAwMDAwRS0wMSwKICAgICAgICAgICAgICAgICdtaScgICA9PiA1LjY4MTgxODE4MzY4MjMwRS0wNCwKICAgICAgICAgICAgICAgICdObWknICA9PiA0LjkzNzM2NTAxMjQxOTAxRS0wNCwKICAgICAgICAgICAgICAgICdpbicgICA9PiAzLjYwMDAwMDAwMTE4MTEwRSswMSwKICAgICAgICAgICAgICAgICdmdCcgICA9PiAzLjAwMDAwMDAwMDAwMDAwRSswMCwKICAgICAgICAgICAgICAgICd5ZCcgICA9PiAxLjAsCiAgICAgICAgICAgICAgICAnYW5nJyAgPT4gOS4xNDQwMDAwMDMwMDAwMEUrMDksCiAgICAgICAgICAgICAgICAnUGljYScgPT4gMi41OTIwMDAwMDA4NTAyM0UrMDMsCiAgICAgICAgICAgICksCiAgICAgICAgICAgICdhbmcnID0+IGFycmF5KAogICAgICAgICAgICAgICAgJ20nICAgID0+IDEuMDAwMDAwMDAwMDAwMDBFLTEwLAogICAgICAgICAgICAgICAgJ21pJyAgID0+IDYuMjEzNzExOTIyMzczMzRFLTE0LAogICAgICAgICAgICAgICAgJ05taScgID0+IDUuMzk5NTY4MDM0NTU3MjRFLTE0LAogICAgICAgICAgICAgICAgJ2luJyAgID0+IDMuOTM3MDA3ODc0MDE1NzVFLTA5LAogICAgICAgICAgICAgICAgJ2Z0JyAgID0+IDMuMjgwODM5ODk1MDEzMTJFLTEwLAogICAgICAgICAgICAgICAgJ3lkJyAgID0+IDEuMDkzNjEzMjk3OTc4OTFFLTEwLAogICAgICAgICAgICAgICAgJ2FuZycgID0+IDEuMCwKICAgICAgICAgICAgICAgICdQaWNhJyA9PiAyLjgzNDY0NTY2OTI5MTE2RS0wNywKICAgICAgICAgICAgKSwKICAgICAgICAgICAgJ1BpY2EnID0+IGFycmF5KAogICAgICAgICAgICAgICAgJ20nICAgID0+IDMuNTI3Nzc3Nzc3Nzc4MDBFLTA0LAogICAgICAgICAgICAgICAgJ21pJyAgID0+IDIuMTkyMDU5NDgzNzI2MjlFLTA3LAogICAgICAgICAgICAgICAgJ05taScgID0+IDEuOTA0ODQ3NjEyMTkxMTRFLTA3LAogICAgICAgICAgICAgICAgJ2luJyAgID0+IDEuMzg4ODg4ODg4ODg4OThFLTAyLAogICAgICAgICAgICAgICAgJ2Z0JyAgID0+IDEuMTU3NDA3NDA3NDA3NDhFLTAzLAogICAgICAgICAgICAgICAgJ3lkJyAgID0+IDMuODU4MDI0NjkwMDkyNTFFLTA0LAogICAgICAgICAgICAgICAgJ2FuZycgID0+IDMuNTI3Nzc3Nzc3Nzc4MDBFKzA2LAogICAgICAgICAgICAgICAgJ1BpY2EnID0+IDEuMCwKICAgICAgICAgICAgKSwKICAgICAgICApLAogICAgICAgICdUaW1lJyA9PiBhcnJheSgKICAgICAgICAgICAgJ3lyJyA9PiBhcnJheSgKICAgICAgICAgICAgICAgICd5cicgID0+IDEuMCwKICAgICAgICAgICAgICAgICdkYXknID0+IDM2NS4yNSwKICAgICAgICAgICAgICAgICdocicgID0+IDg3NjYuMCwKICAgICAgICAgICAgICAgICdtbicgID0+IDUyNTk2MC4wLAogICAgICAgICAgICAgICAgJ3NlYycgPT4gMzE1NTc2MDAuMCwKICAgICAgICAgICAgKSwKICAgICAgICAgICAgJ2RheScgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAneXInICA9PiAyLjczNzg1MDc4NzEzMjEwRS0wMywKICAgICAgICAgICAgICAgICdkYXknID0+IDEuMCwKICAgICAgICAgICAgICAgICdocicgID0+IDI0LjAsCiAgICAgICAgICAgICAgICAnbW4nICA9PiAxNDQwLjAsCiAgICAgICAgICAgICAgICAnc2VjJyA9PiA4NjQwMC4wLAogICAgICAgICAgICApLAogICAgICAgICAgICAnaHInID0+IGFycmF5KAogICAgICAgICAgICAgICAgJ3lyJyAgPT4gMS4xNDA3NzExNjEzMDUwNEUtMDQsCiAgICAgICAgICAgICAgICAnZGF5JyA9PiA0LjE2NjY2NjY2NjY2NjY3RS0wMiwKICAgICAgICAgICAgICAgICdocicgID0+IDEuMCwKICAgICAgICAgICAgICAgICdtbicgID0+IDYwLjAsCiAgICAgICAgICAgICAgICAnc2VjJyA9PiAzNjAwLjAsCiAgICAgICAgICAgICksCiAgICAgICAgICAgICdtbicgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAneXInICA9PiAxLjkwMTI4NTI2ODg0MTc0RS0wNiwKICAgICAgICAgICAgICAgICdkYXknID0+IDYuOTQ0NDQ0NDQ0NDQ0NDRFLTA0LAogICAgICAgICAgICAgICAgJ2hyJyAgPT4gMS42NjY2NjY2NjY2NjY2N0UtMDIsCiAgICAgICAgICAgICAgICAnbW4nICA9PiAxLjAsCiAgICAgICAgICAgICAgICAnc2VjJyA9PiA2MC4wLAogICAgICAgICAgICApLAogICAgICAgICAgICAnc2VjJyA9PiBhcnJheSgKICAgICAgICAgICAgICAgICd5cicgID0+IDMuMTY4ODA4NzgxNDAyODlFLTA4LAogICAgICAgICAgICAgICAgJ2RheScgPT4gMS4xNTc0MDc0MDc0MDc0MUUtMDUsCiAgICAgICAgICAgICAgICAnaHInICA9PiAyLjc3Nzc3Nzc3Nzc3Nzc4RS0wNCwKICAgICAgICAgICAgICAgICdtbicgID0+IDEuNjY2NjY2NjY2NjY2NjdFLTAyLAogICAgICAgICAgICAgICAgJ3NlYycgPT4gMS4wLAogICAgICAgICAgICApLAogICAgICAgICksCiAgICAgICAgJ1ByZXNzdXJlJyA9PiBhcnJheSgKICAgICAgICAgICAgJ1BhJyA9PiBhcnJheSgKICAgICAgICAgICAgICAgICdQYScgICA9PiAxLjAsCiAgICAgICAgICAgICAgICAncCcgICAgPT4gMS4wLAogICAgICAgICAgICAgICAgJ2F0bScgID0+IDkuODY5MjMyOTk5OTgxOTNFLTA2LAogICAgICAgICAgICAgICAgJ2F0JyAgID0+IDkuODY5MjMyOTk5OTgxOTNFLTA2LAogICAgICAgICAgICAgICAgJ21tSGcnID0+IDcuNTAwNjE3MDc5OTg2MjdFLTAzLAogICAgICAgICAgICApLAogICAgICAgICAgICAncCcgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAnUGEnICAgPT4gMS4wLAogICAgICAgICAgICAgICAgJ3AnICAgID0+IDEuMCwKICAgICAgICAgICAgICAgICdhdG0nICA9PiA5Ljg2OTIzMjk5OTk4MTkzRS0wNiwKICAgICAgICAgICAgICAgICdhdCcgICA9PiA5Ljg2OTIzMjk5OTk4MTkzRS0wNiwKICAgICAgICAgICAgICAgICdtbUhnJyA9PiA3LjUwMDYxNzA3OTk4NjI3RS0wMywKICAgICAgICAgICAgKSwKICAgICAgICAgICAgJ2F0bScgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAnUGEnICAgPT4gMS4wMTMyNDk5NjU4MzAwMEUrMDUsCiAgICAgICAgICAgICAgICAncCcgICAgPT4gMS4wMTMyNDk5NjU4MzAwMEUrMDUsCiAgICAgICAgICAgICAgICAnYXRtJyAgPT4gMS4wLAogICAgICAgICAgICAgICAgJ2F0JyAgID0+IDEuMCwKICAgICAgICAgICAgICAgICdtbUhnJyA9PiA3NjAuMCwKICAgICAgICAgICAgKSwKICAgICAgICAgICAgJ2F0JyA9PiBhcnJheSgKICAgICAgICAgICAgICAgICdQYScgICA9PiAxLjAxMzI0OTk2NTgzMDAwRSswNSwKICAgICAgICAgICAgICAgICdwJyAgICA9PiAxLjAxMzI0OTk2NTgzMDAwRSswNSwKICAgICAgICAgICAgICAgICdhdG0nICA9PiAxLjAsCiAgICAgICAgICAgICAgICAnYXQnICAgPT4gMS4wLAogICAgICAgICAgICAgICAgJ21tSGcnID0+IDc2MC4wLAogICAgICAgICAgICApLAogICAgICAgICAgICAnbW1IZycgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAnUGEnICAgPT4gMS4zMzMyMjM2MzkyNTAwMEUrMDIsCiAgICAgICAgICAgICAgICAncCcgICAgPT4gMS4zMzMyMjM2MzkyNTAwMEUrMDIsCiAgICAgICAgICAgICAgICAnYXRtJyAgPT4gMS4zMTU3ODk0NzM2ODQyMUUtMDMsCiAgICAgICAgICAgICAgICAnYXQnICAgPT4gMS4zMTU3ODk0NzM2ODQyMUUtMDMsCiAgICAgICAgICAgICAgICAnbW1IZycgPT4gMS4wLAogICAgICAgICAgICApLAogICAgICAgICksCiAgICAgICAgJ0ZvcmNlJyA9PiBhcnJheSgKICAgICAgICAgICAgJ04nID0+IGFycmF5KAogICAgICAgICAgICAgICAgJ04nICAgPT4gMS4wLAogICAgICAgICAgICAgICAgJ2R5bicgPT4gMS4wRSs1LAogICAgICAgICAgICAgICAgJ2R5JyAgPT4gMS4wRSs1LAogICAgICAgICAgICAgICAgJ2xiZicgPT4gMi4yNDgwODkyMzY1NTMzOUUtMDEsCiAgICAgICAgICAgICksCiAgICAgICAgICAgICdkeW4nID0+IGFycmF5KAogICAgICAgICAgICAgICAgJ04nICAgPT4gMS4wRS01LAogICAgICAgICAgICAgICAgJ2R5bicgPT4gMS4wLAogICAgICAgICAgICAgICAgJ2R5JyAgPT4gMS4wLAogICAgICAgICAgICAgICAgJ2xiZicgPT4gMi4yNDgwODkyMzY1NTMzOUUtMDYsCiAgICAgICAgICAgICksCiAgICAgICAgICAgICdkeScgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAnTicgICA9PiAxLjBFLTUsCiAgICAgICAgICAgICAgICAnZHluJyA9PiAxLjAsCiAgICAgICAgICAgICAgICAnZHknICA9PiAxLjAsCiAgICAgICAgICAgICAgICAnbGJmJyA9PiAyLjI0ODA4OTIzNjU1MzM5RS0wNiwKICAgICAgICAgICAgKSwKICAgICAgICAgICAgJ2xiZicgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAnTicgICA9PiA0LjQ0ODIyMiwKICAgICAgICAgICAgICAgICdkeW4nID0+IDQuNDQ4MjIyRSs1LAogICAgICAgICAgICAgICAgJ2R5JyAgPT4gNC40NDgyMjJFKzUsCiAgICAgICAgICAgICAgICAnbGJmJyA9PiAxLjAsCiAgICAgICAgICAgICksCiAgICAgICAgKSwKICAgICAgICAnRW5lcmd5JyA9PiBhcnJheSgKICAgICAgICAgICAgJ0onID0+IGFycmF5KAogICAgICAgICAgICAgICAgJ0onICAgPT4gMS4wLAogICAgICAgICAgICAgICAgJ2UnICAgPT4gOS45OTk5OTUxOTM0MzIzMUUrMDYsCiAgICAgICAgICAgICAgICAnYycgICA9PiAyLjM5MDA2MjQ5NDczNDY3RS0wMSwKICAgICAgICAgICAgICAgICdjYWwnID0+IDIuMzg4NDYxOTA2NDIwMTdFLTAxLAogICAgICAgICAgICAgICAgJ2VWJyAgPT4gNi4yNDE0NTcwMDAwMDAwMEUrMTgsCiAgICAgICAgICAgICAgICAnZXYnICA9PiA2LjI0MTQ1NzAwMDAwMDAwRSsxOCwKICAgICAgICAgICAgICAgICdIUGgnID0+IDMuNzI1MDY0MzA4MDEwMDBFLTA3LAogICAgICAgICAgICAgICAgJ2hoJyAgPT4gMy43MjUwNjQzMDgwMTAwMEUtMDcsCiAgICAgICAgICAgICAgICAnV2gnICA9PiAyLjc3Nzc3OTE2MjM4NzExRS0wNCwKICAgICAgICAgICAgICAgICd3aCcgID0+IDIuNzc3Nzc5MTYyMzg3MTFFLTA0LAogICAgICAgICAgICAgICAgJ2ZsYicgPT4gMi4zNzMwNDIyMjE5MjY1MUUrMDEsCiAgICAgICAgICAgICAgICAnQlRVJyA9PiA5LjQ3ODE1MDY3MzQ5MDE1RS0wNCwKICAgICAgICAgICAgICAgICdidHUnID0+IDkuNDc4MTUwNjczNDkwMTVFLTA0LAogICAgICAgICAgICApLAogICAgICAgICAgICAnZScgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAnSicgICA9PiAxLjAwMDAwMDQ4MDY1NzAwRS0wNywKICAgICAgICAgICAgICAgICdlJyAgID0+IDEuMCwKICAgICAgICAgICAgICAgICdjJyAgID0+IDIuMzkwMDYzNjQzNTM0OTRFLTA4LAogICAgICAgICAgICAgICAgJ2NhbCcgPT4gMi4zODg0NjMwNTQ0NTExMUUtMDgsCiAgICAgICAgICAgICAgICAnZVYnICA9PiA2LjI0MTQ2MDAwMDAwMDAwRSsxMSwKICAgICAgICAgICAgICAgICdldicgID0+IDYuMjQxNDYwMDAwMDAwMDBFKzExLAogICAgICAgICAgICAgICAgJ0hQaCcgPT4gMy43MjUwNjYwOTg0ODgyNEUtMTQsCiAgICAgICAgICAgICAgICAnaGgnICA9PiAzLjcyNTA2NjA5ODQ4ODI0RS0xNCwKICAgICAgICAgICAgICAgICdXaCcgID0+IDIuNzc3NzgwNDk3NTQ2MTFFLTExLAogICAgICAgICAgICAgICAgJ3doJyAgPT4gMi43Nzc3ODA0OTc1NDYxMUUtMTEsCiAgICAgICAgICAgICAgICAnZmxiJyA9PiAyLjM3MzA0MzM2MjU0NTg2RS0wNiwKICAgICAgICAgICAgICAgICdCVFUnID0+IDkuNDc4MTU1MjI5MjI5NjJFLTExLAogICAgICAgICAgICAgICAgJ2J0dScgPT4gOS40NzgxNTUyMjkyMjk2MkUtMTEsCiAgICAgICAgICAgICksCiAgICAgICAgICAgICdjJyA9PiBhcnJheSgKICAgICAgICAgICAgICAgICdKJyAgID0+IDQuMTgzOTkxMDEzNjM2NzJFKzAwLAogICAgICAgICAgICAgICAgJ2UnICAgPT4gNC4xODM5ODkwMDI1NzMxMkUrMDcsCiAgICAgICAgICAgICAgICAnYycgICA9PiAxLjAsCiAgICAgICAgICAgICAgICAnY2FsJyA9PiA5Ljk5MzMwMzE1Mjg3NTYzRS0wMSwKICAgICAgICAgICAgICAgICdlVicgID0+IDIuNjExNDIwMDAwMDAwMDBFKzE5LAogICAgICAgICAgICAgICAgJ2V2JyAgPT4gMi42MTE0MjAwMDAwMDAwMEUrMTksCiAgICAgICAgICAgICAgICAnSFBoJyA9PiAxLjU1ODU2MzU1ODk5MzI3RS0wNiwKICAgICAgICAgICAgICAgICdoaCcgID0+IDEuNTU4NTYzNTU4OTkzMjdFLTA2LAogICAgICAgICAgICAgICAgJ1doJyAgPT4gMS4xNjIyMjAzMDUzMjk1MEUtMDMsCiAgICAgICAgICAgICAgICAnd2gnICA9PiAxLjE2MjIyMDMwNTMyOTUwRS0wMywKICAgICAgICAgICAgICAgICdmbGInID0+IDkuOTI4Nzg3MzMxNTIxMDJFKzAxLAogICAgICAgICAgICAgICAgJ0JUVScgPT4gMy45NjU2NDk3MjQzNzc3NkUtMDMsCiAgICAgICAgICAgICAgICAnYnR1JyA9PiAzLjk2NTY0OTcyNDM3Nzc2RS0wMywKICAgICAgICAgICAgKSwKICAgICAgICAgICAgJ2NhbCcgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAnSicgICA9PiA0LjE4Njc5NDg0NjEzOTI5RSswMCwKICAgICAgICAgICAgICAgICdlJyAgID0+IDQuMTg2NzkyODMzNzI4MDFFKzA3LAogICAgICAgICAgICAgICAgJ2MnICAgPT4gMS4wMDA2NzAxMzM0OTA1OUUrMDAsCiAgICAgICAgICAgICAgICAnY2FsJyA9PiAxLjAsCiAgICAgICAgICAgICAgICAnZVYnICA9PiAyLjYxMzE3MDAwMDAwMDAwRSsxOSwKICAgICAgICAgICAgICAgICdldicgID0+IDIuNjEzMTcwMDAwMDAwMDBFKzE5LAogICAgICAgICAgICAgICAgJ0hQaCcgPT4gMS41NTk2MDgwMDQ2MzEzN0UtMDYsCiAgICAgICAgICAgICAgICAnaGgnICA9PiAxLjU1OTYwODAwNDYzMTM3RS0wNiwKICAgICAgICAgICAgICAgICdXaCcgID0+IDEuMTYyOTk5MTQ4MDc5NTVFLTAzLAogICAgICAgICAgICAgICAgJ3doJyAgPT4gMS4xNjI5OTkxNDgwNzk1NUUtMDMsCiAgICAgICAgICAgICAgICAnZmxiJyA9PiA5LjkzNTQ0MDk0NDQzMjgzRSswMSwKICAgICAgICAgICAgICAgICdCVFUnID0+IDMuOTY4MzA3MjM5MDcwMDJFLTAzLAogICAgICAgICAgICAgICAgJ2J0dScgPT4gMy45NjgzMDcyMzkwNzAwMkUtMDMsCiAgICAgICAgICAgICksCiAgICAgICAgICAgICdlVicgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAnSicgICA9PiAxLjYwMjE5MDAwMTQ2OTIxRS0xOSwKICAgICAgICAgICAgICAgICdlJyAgID0+IDEuNjAyMTg5MjMxMzY1NzRFLTEyLAogICAgICAgICAgICAgICAgJ2MnICAgPT4gMy44MjkzMzQyMzE5NTA0M0UtMjAsCiAgICAgICAgICAgICAgICAnY2FsJyA9PiAzLjgyNjc2OTc4NTM1NjQ4RS0yMCwKICAgICAgICAgICAgICAgICdlVicgID0+IDEuMCwKICAgICAgICAgICAgICAgICdldicgID0+IDEuMCwKICAgICAgICAgICAgICAgICdIUGgnID0+IDUuOTY4MjYwNzg5MTIzNDRFLTI2LAogICAgICAgICAgICAgICAgJ2hoJyAgPT4gNS45NjgyNjA3ODkxMjM0NEUtMjYsCiAgICAgICAgICAgICAgICAnV2gnICA9PiA0LjQ1MDUzMDAwMDI2NjE0RS0yMywKICAgICAgICAgICAgICAgICd3aCcgID0+IDQuNDUwNTMwMDAwMjY2MTRFLTIzLAogICAgICAgICAgICAgICAgJ2ZsYicgPT4gMy44MDIwNjQ1MjEwMzQ5MkUtMTgsCiAgICAgICAgICAgICAgICAnQlRVJyA9PiAxLjUxODU3OTgyNDE0ODQ2RS0yMiwKICAgICAgICAgICAgICAgICdidHUnID0+IDEuNTE4NTc5ODI0MTQ4NDZFLTIyLAogICAgICAgICAgICApLAogICAgICAgICAgICAnZXYnID0+IGFycmF5KAogICAgICAgICAgICAgICAgJ0onICAgPT4gMS42MDIxOTAwMDE0NjkyMUUtMTksCiAgICAgICAgICAgICAgICAnZScgICA9PiAxLjYwMjE4OTIzMTM2NTc0RS0xMiwKICAgICAgICAgICAgICAgICdjJyAgID0+IDMuODI5MzM0MjMxOTUwNDNFLTIwLAogICAgICAgICAgICAgICAgJ2NhbCcgPT4gMy44MjY3Njk3ODUzNTY0OEUtMjAsCiAgICAgICAgICAgICAgICAnZVYnICA9PiAxLjAsCiAgICAgICAgICAgICAgICAnZXYnICA9PiAxLjAsCiAgICAgICAgICAgICAgICAnSFBoJyA9PiA1Ljk2ODI2MDc4OTEyMzQ0RS0yNiwKICAgICAgICAgICAgICAgICdoaCcgID0+IDUuOTY4MjYwNzg5MTIzNDRFLTI2LAogICAgICAgICAgICAgICAgJ1doJyAgPT4gNC40NTA1MzAwMDAyNjYxNEUtMjMsCiAgICAgICAgICAgICAgICAnd2gnICA9PiA0LjQ1MDUzMDAwMDI2NjE0RS0yMywKICAgICAgICAgICAgICAgICdmbGInID0+IDMuODAyMDY0NTIxMDM0OTJFLTE4LAogICAgICAgICAgICAgICAgJ0JUVScgPT4gMS41MTg1Nzk4MjQxNDg0NkUtMjIsCiAgICAgICAgICAgICAgICAnYnR1JyA9PiAxLjUxODU3OTgyNDE0ODQ2RS0yMiwKICAgICAgICAgICAgKSwKICAgICAgICAgICAgJ0hQaCcgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAnSicgICA9PiAyLjY4NDUxNzQxMzE2MTcwRSswNiwKICAgICAgICAgICAgICAgICdlJyAgID0+IDIuNjg0NTE2MTIyODMwMjRFKzEzLAogICAgICAgICAgICAgICAgJ2MnICAgPT4gNi40MTYxNjQzODU2NTk5MUUrMDUsCiAgICAgICAgICAgICAgICAnY2FsJyA9PiA2LjQxMTg2NzU3ODQ1ODM1RSswNSwKICAgICAgICAgICAgICAgICdlVicgID0+IDEuNjc1NTMwMDAwMDAwMDBFKzI1LAogICAgICAgICAgICAgICAgJ2V2JyAgPT4gMS42NzU1MzAwMDAwMDAwMEUrMjUsCiAgICAgICAgICAgICAgICAnSFBoJyA9PiAxLjAsCiAgICAgICAgICAgICAgICAnaGgnICA9PiAxLjAsCiAgICAgICAgICAgICAgICAnV2gnICA9PiA3LjQ1Njk5NjUzMTM0NTkzRSswMiwKICAgICAgICAgICAgICAgICd3aCcgID0+IDcuNDU2OTk2NTMxMzQ1OTNFKzAyLAogICAgICAgICAgICAgICAgJ2ZsYicgPT4gNi4zNzA0NzMxNjY5Mjk2NEUrMDcsCiAgICAgICAgICAgICAgICAnQlRVJyA9PiAyLjU0NDQyNjA1Mjc1NTQ2RSswMywKICAgICAgICAgICAgICAgICdidHUnID0+IDIuNTQ0NDI2MDUyNzU1NDZFKzAzLAogICAgICAgICAgICApLAogICAgICAgICAgICAnaGgnID0+IGFycmF5KAogICAgICAgICAgICAgICAgJ0onICAgPT4gMi42ODQ1MTc0MTMxNjE3MEUrMDYsCiAgICAgICAgICAgICAgICAnZScgICA9PiAyLjY4NDUxNjEyMjgzMDI0RSsxMywKICAgICAgICAgICAgICAgICdjJyAgID0+IDYuNDE2MTY0Mzg1NjU5OTFFKzA1LAogICAgICAgICAgICAgICAgJ2NhbCcgPT4gNi40MTE4Njc1Nzg0NTgzNUUrMDUsCiAgICAgICAgICAgICAgICAnZVYnICA9PiAxLjY3NTUzMDAwMDAwMDAwRSsyNSwKICAgICAgICAgICAgICAgICdldicgID0+IDEuNjc1NTMwMDAwMDAwMDBFKzI1LAogICAgICAgICAgICAgICAgJ0hQaCcgPT4gMS4wLAogICAgICAgICAgICAgICAgJ2hoJyAgPT4gMS4wLAogICAgICAgICAgICAgICAgJ1doJyAgPT4gNy40NTY5OTY1MzEzNDU5M0UrMDIsCiAgICAgICAgICAgICAgICAnd2gnICA9PiA3LjQ1Njk5NjUzMTM0NTkzRSswMiwKICAgICAgICAgICAgICAgICdmbGInID0+IDYuMzcwNDczMTY2OTI5NjRFKzA3LAogICAgICAgICAgICAgICAgJ0JUVScgPT4gMi41NDQ0MjYwNTI3NTU0NkUrMDMsCiAgICAgICAgICAgICAgICAnYnR1JyA9PiAyLjU0NDQyNjA1Mjc1NTQ2RSswMywKICAgICAgICAgICAgKSwKICAgICAgICAgICAgJ1doJyA9PiBhcnJheSgKICAgICAgICAgICAgICAgICdKJyAgID0+IDMuNTk5OTk4MjA1NTQ3MjBFKzAzLAogICAgICAgICAgICAgICAgJ2UnICAgPT4gMy41OTk5OTY0NzUxODM2OUUrMTAsCiAgICAgICAgICAgICAgICAnYycgICA9PiA4LjYwNDIyMDY5MjE5MDQ2RSswMiwKICAgICAgICAgICAgICAgICdjYWwnID0+IDguNTk4NDU4NTc3MTMwNDZFKzAyLAogICAgICAgICAgICAgICAgJ2VWJyAgPT4gMi4yNDY5MjM0MDAwMDAwMEUrMjIsCiAgICAgICAgICAgICAgICAnZXYnICA9PiAyLjI0NjkyMzQwMDAwMDAwRSsyMiwKICAgICAgICAgICAgICAgICdIUGgnID0+IDEuMzQxMDIyNDgyNDM4MzlFLTAzLAogICAgICAgICAgICAgICAgJ2hoJyAgPT4gMS4zNDEwMjI0ODI0MzgzOUUtMDMsCiAgICAgICAgICAgICAgICAnV2gnICA9PiAxLjAsCiAgICAgICAgICAgICAgICAnd2gnICA9PiAxLjAsCiAgICAgICAgICAgICAgICAnZmxiJyA9PiA4LjU0Mjk0Nzc0MDYyMzE2RSswNCwKICAgICAgICAgICAgICAgICdCVFUnID0+IDMuNDEyMTMyNTQxNjQ3MDVFKzAwLAogICAgICAgICAgICAgICAgJ2J0dScgPT4gMy40MTIxMzI1NDE2NDcwNUUrMDAsCiAgICAgICAgICAgICksCiAgICAgICAgICAgICd3aCcgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAnSicgICA9PiAzLjU5OTk5ODIwNTU0NzIwRSswMywKICAgICAgICAgICAgICAgICdlJyAgID0+IDMuNTk5OTk2NDc1MTgzNjlFKzEwLAogICAgICAgICAgICAgICAgJ2MnICAgPT4gOC42MDQyMjA2OTIxOTA0NkUrMDIsCiAgICAgICAgICAgICAgICAnY2FsJyA9PiA4LjU5ODQ1ODU3NzEzMDQ2RSswMiwKICAgICAgICAgICAgICAgICdlVicgID0+IDIuMjQ2OTIzNDAwMDAwMDBFKzIyLAogICAgICAgICAgICAgICAgJ2V2JyAgPT4gMi4yNDY5MjM0MDAwMDAwMEUrMjIsCiAgICAgICAgICAgICAgICAnSFBoJyA9PiAxLjM0MTAyMjQ4MjQzODM5RS0wMywKICAgICAgICAgICAgICAgICdoaCcgID0+IDEuMzQxMDIyNDgyNDM4MzlFLTAzLAogICAgICAgICAgICAgICAgJ1doJyAgPT4gMS4wLAogICAgICAgICAgICAgICAgJ3doJyAgPT4gMS4wLAogICAgICAgICAgICAgICAgJ2ZsYicgPT4gOC41NDI5NDc3NDA2MjMxNkUrMDQsCiAgICAgICAgICAgICAgICAnQlRVJyA9PiAzLjQxMjEzMjU0MTY0NzA1RSswMCwKICAgICAgICAgICAgICAgICdidHUnID0+IDMuNDEyMTMyNTQxNjQ3MDVFKzAwLAogICAgICAgICAgICApLAogICAgICAgICAgICAnZmxiJyA9PiBhcnJheSgKICAgICAgICAgICAgICAgICdKJyAgID0+IDQuMjE0MDAwMDMyMzY0MjRFLTAyLAogICAgICAgICAgICAgICAgJ2UnICAgPT4gNC4yMTM5OTgwMDY4NzY2MEUrMDUsCiAgICAgICAgICAgICAgICAnYycgICA9PiAxLjAwNzE3MjM0MzAxNjQ0RS0wMiwKICAgICAgICAgICAgICAgICdjYWwnID0+IDEuMDA2NDk3ODU1MDk1NTRFLTAyLAogICAgICAgICAgICAgICAgJ2VWJyAgPT4gMi42MzAxNTAwMDAwMDAwMEUrMTcsCiAgICAgICAgICAgICAgICAnZXYnICA9PiAyLjYzMDE1MDAwMDAwMDAwRSsxNywKICAgICAgICAgICAgICAgICdIUGgnID0+IDEuNTY5NzQyMTExNDUxMzBFLTA4LAogICAgICAgICAgICAgICAgJ2hoJyAgPT4gMS41Njk3NDIxMTE0NTEzMEUtMDgsCiAgICAgICAgICAgICAgICAnV2gnICA9PiAxLjE3MDU1NjE0ODAyMDAwRS0wNSwKICAgICAgICAgICAgICAgICd3aCcgID0+IDEuMTcwNTU2MTQ4MDIwMDBFLTA1LAogICAgICAgICAgICAgICAgJ2ZsYicgPT4gMS4wLAogICAgICAgICAgICAgICAgJ0JUVScgPT4gMy45OTQwOTI3MjQ0ODQwNkUtMDUsCiAgICAgICAgICAgICAgICAnYnR1JyA9PiAzLjk5NDA5MjcyNDQ4NDA2RS0wNSwKICAgICAgICAgICAgKSwKICAgICAgICAgICAgJ0JUVScgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAnSicgICA9PiAxLjA1NTA1ODEzNzg2NzQ5RSswMywKICAgICAgICAgICAgICAgICdlJyAgID0+IDEuMDU1MDU3NjMwNzQ2NjVFKzEwLAogICAgICAgICAgICAgICAgJ2MnICAgPT4gMi41MjE2NTQ4ODUwODE2OEUrMDIsCiAgICAgICAgICAgICAgICAnY2FsJyA9PiAyLjUxOTk2NjE3MTM1NTEwRSswMiwKICAgICAgICAgICAgICAgICdlVicgID0+IDYuNTg1MTAwMDAwMDAwMDBFKzIxLAogICAgICAgICAgICAgICAgJ2V2JyAgPT4gNi41ODUxMDAwMDAwMDAwMEUrMjEsCiAgICAgICAgICAgICAgICAnSFBoJyA9PiAzLjkzMDE1OTQxMjI0NTY4RS0wNCwKICAgICAgICAgICAgICAgICdoaCcgID0+IDMuOTMwMTU5NDEyMjQ1NjhFLTA0LAogICAgICAgICAgICAgICAgJ1doJyAgPT4gMi45MzA3MTg1MTA0NzUyNkUtMDEsCiAgICAgICAgICAgICAgICAnd2gnICA9PiAyLjkzMDcxODUxMDQ3NTI2RS0wMSwKICAgICAgICAgICAgICAgICdmbGInID0+IDIuNTAzNjk3NTA3NzQ2NzFFKzA0LAogICAgICAgICAgICAgICAgJ0JUVScgPT4gMS4wLAogICAgICAgICAgICAgICAgJ2J0dScgPT4gMS4wLAogICAgICAgICAgICApLAogICAgICAgICAgICAnYnR1JyA9PiBhcnJheSgKICAgICAgICAgICAgICAgICdKJyAgID0+IDEuMDU1MDU4MTM3ODY3NDlFKzAzLAogICAgICAgICAgICAgICAgJ2UnICAgPT4gMS4wNTUwNTc2MzA3NDY2NUUrMTAsCiAgICAgICAgICAgICAgICAnYycgICA9PiAyLjUyMTY1NDg4NTA4MTY4RSswMiwKICAgICAgICAgICAgICAgICdjYWwnID0+IDIuNTE5OTY2MTcxMzU1MTBFKzAyLAogICAgICAgICAgICAgICAgJ2VWJyAgPT4gNi41ODUxMDAwMDAwMDAwMEUrMjEsCiAgICAgICAgICAgICAgICAnZXYnICA9PiA2LjU4NTEwMDAwMDAwMDAwRSsyMSwKICAgICAgICAgICAgICAgICdIUGgnID0+IDMuOTMwMTU5NDEyMjQ1NjhFLTA0LAogICAgICAgICAgICAgICAgJ2hoJyAgPT4gMy45MzAxNTk0MTIyNDU2OEUtMDQsCiAgICAgICAgICAgICAgICAnV2gnICA9PiAyLjkzMDcxODUxMDQ3NTI2RS0wMSwKICAgICAgICAgICAgICAgICd3aCcgID0+IDIuOTMwNzE4NTEwNDc1MjZFLTAxLAogICAgICAgICAgICAgICAgJ2ZsYicgPT4gMi41MDM2OTc1MDc3NDY3MUUrMDQsCiAgICAgICAgICAgICAgICAnQlRVJyA9PiAxLjAsCiAgICAgICAgICAgICAgICAnYnR1JyA9PiAxLjAsCiAgICAgICAgICAgICksCiAgICAgICAgKSwKICAgICAgICAnUG93ZXInID0+IGFycmF5KAogICAgICAgICAgICAnSFAnID0+IGFycmF5KAogICAgICAgICAgICAgICAgJ0hQJyA9PiAxLjAsCiAgICAgICAgICAgICAgICAnaCcgID0+IDEuMCwKICAgICAgICAgICAgICAgICdXJyAgPT4gNy40NTcwMTAwMDAwMDAwMEUrMDIsCiAgICAgICAgICAgICAgICAndycgID0+IDcuNDU3MDEwMDAwMDAwMDBFKzAyLAogICAgICAgICAgICApLAogICAgICAgICAgICAnaCcgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAnSFAnID0+IDEuMCwKICAgICAgICAgICAgICAgICdoJyAgPT4gMS4wLAogICAgICAgICAgICAgICAgJ1cnICA9PiA3LjQ1NzAxMDAwMDAwMDAwRSswMiwKICAgICAgICAgICAgICAgICd3JyAgPT4gNy40NTcwMTAwMDAwMDAwMEUrMDIsCiAgICAgICAgICAgICksCiAgICAgICAgICAgICdXJyA9PiBhcnJheSgKICAgICAgICAgICAgICAgICdIUCcgPT4gMS4zNDEwMjAwNjAzMTkwOEUtMDMsCiAgICAgICAgICAgICAgICAnaCcgID0+IDEuMzQxMDIwMDYwMzE5MDhFLTAzLAogICAgICAgICAgICAgICAgJ1cnICA9PiAxLjAsCiAgICAgICAgICAgICAgICAndycgID0+IDEuMCwKICAgICAgICAgICAgKSwKICAgICAgICAgICAgJ3cnID0+IGFycmF5KAogICAgICAgICAgICAgICAgJ0hQJyA9PiAxLjM0MTAyMDA2MDMxOTA4RS0wMywKICAgICAgICAgICAgICAgICdoJyAgPT4gMS4zNDEwMjAwNjAzMTkwOEUtMDMsCiAgICAgICAgICAgICAgICAnVycgID0+IDEuMCwKICAgICAgICAgICAgICAgICd3JyAgPT4gMS4wLAogICAgICAgICAgICApLAogICAgICAgICksCiAgICAgICAgJ01hZ25ldGlzbScgPT4gYXJyYXkoCiAgICAgICAgICAgICdUJyA9PiBhcnJheSgKICAgICAgICAgICAgICAgICdUJyAgPT4gMS4wLAogICAgICAgICAgICAgICAgJ2dhJyA9PiAxMDAwMC4wLAogICAgICAgICAgICApLAogICAgICAgICAgICAnZ2EnID0+IGFycmF5KAogICAgICAgICAgICAgICAgJ1QnICA9PiAwLjAwMDEsCiAgICAgICAgICAgICAgICAnZ2EnID0+IDEuMCwKICAgICAgICAgICAgKSwKICAgICAgICApLAogICAgICAgICdMaXF1aWQnID0+IGFycmF5KAogICAgICAgICAgICAndHNwJyA9PiBhcnJheSgKICAgICAgICAgICAgICAgICd0c3AnICAgPT4gMS4wLAogICAgICAgICAgICAgICAgJ3RicycgICA9PiAzLjMzMzMzMzMzMzMzMzMzRS0wMSwKICAgICAgICAgICAgICAgICdveicgICAgPT4gMS42NjY2NjY2NjY2NjY2N0UtMDEsCiAgICAgICAgICAgICAgICAnY3VwJyAgID0+IDIuMDgzMzMzMzMzMzMzMzNFLTAyLAogICAgICAgICAgICAgICAgJ3B0JyAgICA9PiAxLjA0MTY2NjY2NjY2NjY3RS0wMiwKICAgICAgICAgICAgICAgICd1c19wdCcgPT4gMS4wNDE2NjY2NjY2NjY2N0UtMDIsCiAgICAgICAgICAgICAgICAndWtfcHQnID0+IDguNjc1NTg1MTY4MjE5NjBFLTAzLAogICAgICAgICAgICAgICAgJ3F0JyAgICA9PiA1LjIwODMzMzMzMzMzMzMzRS0wMywKICAgICAgICAgICAgICAgICdnYWwnICAgPT4gMS4zMDIwODMzMzMzMzMzM0UtMDMsCiAgICAgICAgICAgICAgICAnbCcgICAgID0+IDQuOTI5OTk0MDg0MDA3MTBFLTAzLAogICAgICAgICAgICAgICAgJ2x0JyAgICA9PiA0LjkyOTk5NDA4NDAwNzEwRS0wMywKICAgICAgICAgICAgKSwKICAgICAgICAgICAgJ3RicycgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAndHNwJyAgID0+IDMuMDAwMDAwMDAwMDAwMDBFKzAwLAogICAgICAgICAgICAgICAgJ3RicycgICA9PiAxLjAsCiAgICAgICAgICAgICAgICAnb3onICAgID0+IDUuMDAwMDAwMDAwMDAwMDBFLTAxLAogICAgICAgICAgICAgICAgJ2N1cCcgICA9PiA2LjI1MDAwMDAwMDAwMDAwRS0wMiwKICAgICAgICAgICAgICAgICdwdCcgICAgPT4gMy4xMjUwMDAwMDAwMDAwMEUtMDIsCiAgICAgICAgICAgICAgICAndXNfcHQnID0+IDMuMTI1MDAwMDAwMDAwMDBFLTAyLAogICAgICAgICAgICAgICAgJ3VrX3B0JyA9PiAyLjYwMjY3NTU1MDQ2NTg4RS0wMiwKICAgICAgICAgICAgICAgICdxdCcgICAgPT4gMS41NjI1MDAwMDAwMDAwMEUtMDIsCiAgICAgICAgICAgICAgICAnZ2FsJyAgID0+IDMuOTA2MjUwMDAwMDAwMDBFLTAzLAogICAgICAgICAgICAgICAgJ2wnICAgICA9PiAxLjQ3ODk5ODIyNTIwMjEzRS0wMiwKICAgICAgICAgICAgICAgICdsdCcgICAgPT4gMS40Nzg5OTgyMjUyMDIxM0UtMDIsCiAgICAgICAgICAgICksCiAgICAgICAgICAgICdveicgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAndHNwJyAgID0+IDYuMDAwMDAwMDAwMDAwMDBFKzAwLAogICAgICAgICAgICAgICAgJ3RicycgICA9PiAyLjAwMDAwMDAwMDAwMDAwRSswMCwKICAgICAgICAgICAgICAgICdveicgICAgPT4gMS4wLAogICAgICAgICAgICAgICAgJ2N1cCcgICA9PiAxLjI1MDAwMDAwMDAwMDAwRS0wMSwKICAgICAgICAgICAgICAgICdwdCcgICAgPT4gNi4yNTAwMDAwMDAwMDAwMEUtMDIsCiAgICAgICAgICAgICAgICAndXNfcHQnID0+IDYuMjUwMDAwMDAwMDAwMDBFLTAyLAogICAgICAgICAgICAgICAgJ3VrX3B0JyA9PiA1LjIwNTM1MTEwMDkzMTc2RS0wMiwKICAgICAgICAgICAgICAgICdxdCcgICAgPT4gMy4xMjUwMDAwMDAwMDAwMEUtMDIsCiAgICAgICAgICAgICAgICAnZ2FsJyAgID0+IDcuODEyNTAwMDAwMDAwMDBFLTAzLAogICAgICAgICAgICAgICAgJ2wnICAgICA9PiAyLjk1Nzk5NjQ1MDQwNDI2RS0wMiwKICAgICAgICAgICAgICAgICdsdCcgICAgPT4gMi45NTc5OTY0NTA0MDQyNkUtMDIsCiAgICAgICAgICAgICksCiAgICAgICAgICAgICdjdXAnID0+IGFycmF5KAogICAgICAgICAgICAgICAgJ3RzcCcgICA9PiA0LjgwMDAwMDAwMDAwMDAwRSswMSwKICAgICAgICAgICAgICAgICd0YnMnICAgPT4gMS42MDAwMDAwMDAwMDAwMEUrMDEsCiAgICAgICAgICAgICAgICAnb3onICAgID0+IDguMDAwMDAwMDAwMDAwMDBFKzAwLAogICAgICAgICAgICAgICAgJ2N1cCcgICA9PiAxLjAsCiAgICAgICAgICAgICAgICAncHQnICAgID0+IDUuMDAwMDAwMDAwMDAwMDBFLTAxLAogICAgICAgICAgICAgICAgJ3VzX3B0JyA9PiA1LjAwMDAwMDAwMDAwMDAwRS0wMSwKICAgICAgICAgICAgICAgICd1a19wdCcgPT4gNC4xNjQyODA4ODA3NDU0MUUtMDEsCiAgICAgICAgICAgICAgICAncXQnICAgID0+IDIuNTAwMDAwMDAwMDAwMDBFLTAxLAogICAgICAgICAgICAgICAgJ2dhbCcgICA9PiA2LjI1MDAwMDAwMDAwMDAwRS0wMiwKICAgICAgICAgICAgICAgICdsJyAgICAgPT4gMi4zNjYzOTcxNjAzMjM0MUUtMDEsCiAgICAgICAgICAgICAgICAnbHQnICAgID0+IDIuMzY2Mzk3MTYwMzIzNDFFLTAxLAogICAgICAgICAgICApLAogICAgICAgICAgICAncHQnID0+IGFycmF5KAogICAgICAgICAgICAgICAgJ3RzcCcgICA9PiA5LjYwMDAwMDAwMDAwMDAwRSswMSwKICAgICAgICAgICAgICAgICd0YnMnICAgPT4gMy4yMDAwMDAwMDAwMDAwMEUrMDEsCiAgICAgICAgICAgICAgICAnb3onICAgID0+IDEuNjAwMDAwMDAwMDAwMDBFKzAxLAogICAgICAgICAgICAgICAgJ2N1cCcgICA9PiAyLjAwMDAwMDAwMDAwMDAwRSswMCwKICAgICAgICAgICAgICAgICdwdCcgICAgPT4gMS4wLAogICAgICAgICAgICAgICAgJ3VzX3B0JyA9PiAxLjAsCiAgICAgICAgICAgICAgICAndWtfcHQnID0+IDguMzI4NTYxNzYxNDkwODFFLTAxLAogICAgICAgICAgICAgICAgJ3F0JyAgICA9PiA1LjAwMDAwMDAwMDAwMDAwRS0wMSwKICAgICAgICAgICAgICAgICdnYWwnICAgPT4gMS4yNTAwMDAwMDAwMDAwMEUtMDEsCiAgICAgICAgICAgICAgICAnbCcgICAgID0+IDQuNzMyNzk0MzIwNjQ2ODJFLTAxLAogICAgICAgICAgICAgICAgJ2x0JyAgICA9PiA0LjczMjc5NDMyMDY0NjgyRS0wMSwKICAgICAgICAgICAgKSwKICAgICAgICAgICAgJ3VzX3B0JyA9PiBhcnJheSgKICAgICAgICAgICAgICAgICd0c3AnICAgPT4gOS42MDAwMDAwMDAwMDAwMEUrMDEsCiAgICAgICAgICAgICAgICAndGJzJyAgID0+IDMuMjAwMDAwMDAwMDAwMDBFKzAxLAogICAgICAgICAgICAgICAgJ296JyAgICA9PiAxLjYwMDAwMDAwMDAwMDAwRSswMSwKICAgICAgICAgICAgICAgICdjdXAnICAgPT4gMi4wMDAwMDAwMDAwMDAwMEUrMDAsCiAgICAgICAgICAgICAgICAncHQnICAgID0+IDEuMCwKICAgICAgICAgICAgICAgICd1c19wdCcgPT4gMS4wLAogICAgICAgICAgICAgICAgJ3VrX3B0JyA9PiA4LjMyODU2MTc2MTQ5MDgxRS0wMSwKICAgICAgICAgICAgICAgICdxdCcgICAgPT4gNS4wMDAwMDAwMDAwMDAwMEUtMDEsCiAgICAgICAgICAgICAgICAnZ2FsJyAgID0+IDEuMjUwMDAwMDAwMDAwMDBFLTAxLAogICAgICAgICAgICAgICAgJ2wnICAgICA9PiA0LjczMjc5NDMyMDY0NjgyRS0wMSwKICAgICAgICAgICAgICAgICdsdCcgICAgPT4gNC43MzI3OTQzMjA2NDY4MkUtMDEsCiAgICAgICAgICAgICksCiAgICAgICAgICAgICd1a19wdCcgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAndHNwJyAgID0+IDEuMTUyNjYwMDAwMDAwMDBFKzAyLAogICAgICAgICAgICAgICAgJ3RicycgICA9PiAzLjg0MjIwMDAwMDAwMDAwRSswMSwKICAgICAgICAgICAgICAgICdveicgICAgPT4gMS45MjExMDAwMDAwMDAwMEUrMDEsCiAgICAgICAgICAgICAgICAnY3VwJyAgID0+IDIuNDAxMzc1MDAwMDAwMDBFKzAwLAogICAgICAgICAgICAgICAgJ3B0JyAgICA9PiAxLjIwMDY4NzUwMDAwMDAwRSswMCwKICAgICAgICAgICAgICAgICd1c19wdCcgPT4gMS4yMDA2ODc1MDAwMDAwMEUrMDAsCiAgICAgICAgICAgICAgICAndWtfcHQnID0+IDEuMCwKICAgICAgICAgICAgICAgICdxdCcgICAgPT4gNi4wMDM0Mzc1MDAwMDAwMEUtMDEsCiAgICAgICAgICAgICAgICAnZ2FsJyAgID0+IDEuNTAwODU5Mzc1MDAwMDBFLTAxLAogICAgICAgICAgICAgICAgJ2wnICAgICA9PiA1LjY4MjYwNjk4MDg3MTYyRS0wMSwKICAgICAgICAgICAgICAgICdsdCcgICAgPT4gNS42ODI2MDY5ODA4NzE2MkUtMDEsCiAgICAgICAgICAgICksCiAgICAgICAgICAgICdxdCcgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAndHNwJyAgID0+IDEuOTIwMDAwMDAwMDAwMDBFKzAyLAogICAgICAgICAgICAgICAgJ3RicycgICA9PiA2LjQwMDAwMDAwMDAwMDAwRSswMSwKICAgICAgICAgICAgICAgICdveicgICAgPT4gMy4yMDAwMDAwMDAwMDAwMEUrMDEsCiAgICAgICAgICAgICAgICAnY3VwJyAgID0+IDQuMDAwMDAwMDAwMDAwMDBFKzAwLAogICAgICAgICAgICAgICAgJ3B0JyAgICA9PiAyLjAwMDAwMDAwMDAwMDAwRSswMCwKICAgICAgICAgICAgICAgICd1c19wdCcgPT4gMi4wMDAwMDAwMDAwMDAwMEUrMDAsCiAgICAgICAgICAgICAgICAndWtfcHQnID0+IDEuNjY1NzEyMzUyMjk4MTZFKzAwLAogICAgICAgICAgICAgICAgJ3F0JyAgICA9PiAxLjAsCiAgICAgICAgICAgICAgICAnZ2FsJyAgID0+IDIuNTAwMDAwMDAwMDAwMDBFLTAxLAogICAgICAgICAgICAgICAgJ2wnICAgICA9PiA5LjQ2NTU4ODY0MTI5MzYzRS0wMSwKICAgICAgICAgICAgICAgICdsdCcgICAgPT4gOS40NjU1ODg2NDEyOTM2M0UtMDEsCiAgICAgICAgICAgICksCiAgICAgICAgICAgICdnYWwnID0+IGFycmF5KAogICAgICAgICAgICAgICAgJ3RzcCcgICA9PiA3LjY4MDAwMDAwMDAwMDAwRSswMiwKICAgICAgICAgICAgICAgICd0YnMnICAgPT4gMi41NjAwMDAwMDAwMDAwMEUrMDIsCiAgICAgICAgICAgICAgICAnb3onICAgID0+IDEuMjgwMDAwMDAwMDAwMDBFKzAyLAogICAgICAgICAgICAgICAgJ2N1cCcgICA9PiAxLjYwMDAwMDAwMDAwMDAwRSswMSwKICAgICAgICAgICAgICAgICdwdCcgICAgPT4gOC4wMDAwMDAwMDAwMDAwMEUrMDAsCiAgICAgICAgICAgICAgICAndXNfcHQnID0+IDguMDAwMDAwMDAwMDAwMDBFKzAwLAogICAgICAgICAgICAgICAgJ3VrX3B0JyA9PiA2LjY2Mjg0OTQwOTE5MjY1RSswMCwKICAgICAgICAgICAgICAgICdxdCcgICAgPT4gNC4wMDAwMDAwMDAwMDAwMEUrMDAsCiAgICAgICAgICAgICAgICAnZ2FsJyAgID0+IDEuMCwKICAgICAgICAgICAgICAgICdsJyAgICAgPT4gMy43ODYyMzU0NTY1MTc0NUUrMDAsCiAgICAgICAgICAgICAgICAnbHQnICAgID0+IDMuNzg2MjM1NDU2NTE3NDVFKzAwLAogICAgICAgICAgICApLAogICAgICAgICAgICAnbCcgPT4gYXJyYXkoCiAgICAgICAgICAgICAgICAndHNwJyAgID0+IDIuMDI4NDAwMDAwMDAwMDBFKzAyLAogICAgICAgICAgICAgICAgJ3RicycgICA9PiA2Ljc2MTMzMzMzMzMzMzMzRSswMSwKICAgICAgICAgICAgICAgICdveicgICAgPT4gMy4zODA2NjY2NjY2NjY2N0UrMDEsCiAgICAgICAgICAgICAgICAnY3VwJyAgID0+IDQuMjI1ODMzMzMzMzMzMzNFKzAwLAogICAgICAgICAgICAgICAgJ3B0JyAgICA9PiAyLjExMjkxNjY2NjY2NjY3RSswMCwKICAgICAgICAgICAgICAgICd1c19wdCcgPT4gMi4xMTI5MTY2NjY2NjY2N0UrMDAsCiAgICAgICAgICAgICAgICAndWtfcHQnID0+IDEuNzU5NzU1Njk1NTIxNjZFKzAwLAogICAgICAgICAgICAgICAgJ3F0JyAgICA9PiAxLjA1NjQ1ODMzMzMzMzMzRSswMCwKICAgICAgICAgICAgICAgICdnYWwnICAgPT4gMi42NDExNDU4MzMzMzMzM0UtMDEsCiAgICAgICAgICAgICAgICAnbCcgICAgID0+IDEuMCwKICAgICAgICAgICAgICAgICdsdCcgICAgPT4gMS4wLAogICAgICAgICAgICApLAogICAgICAgICAgICAnbHQnID0+IGFycmF5KAogICAgICAgICAgICAgICAgJ3RzcCcgICA9PiAyLjAyODQwMDAwMDAwMDAwRSswMiwKICAgICAgICAgICAgICAgICd0YnMnICAgPT4gNi43NjEzMzMzMzMzMzMzM0UrMDEsCiAgICAgICAgICAgICAgICAnb3onICAgID0+IDMuMzgwNjY2NjY2NjY2NjdFKzAxLAogICAgICAgICAgICAgICAgJ2N1cCcgICA9PiA0LjIyNTgzMzMzMzMzMzMzRSswMCwKICAgICAgICAgICAgICAgICdwdCcgICAgPT4gMi4xMTI5MTY2NjY2NjY2N0UrMDAsCiAgICAgICAgICAgICAgICAndXNfcHQnID0+IDIuMTEyOTE2NjY2NjY2NjdFKzAwLAogICAgICAgICAgICAgICAgJ3VrX3B0JyA9PiAxLjc1OTc1NTY5NTUyMTY2RSswMCwKICAgICAgICAgICAgICAgICdxdCcgICAgPT4gMS4wNTY0NTgzMzMzMzMzM0UrMDAsCiAgICAgICAgICAgICAgICAnZ2FsJyAgID0+IDIuNjQxMTQ1ODMzMzMzMzNFLTAxLAogICAgICAgICAgICAgICAgJ2wnICAgICA9PiAxLjAsCiAgICAgICAgICAgICAgICAnbHQnICAgID0+IDEuMCwKICAgICAgICAgICAgKSwKICAgICAgICApLAogICAgKTsKCgogICAgLyoqCiAgICAgKiBwYXJzZUNvbXBsZXgKICAgICAqCiAgICAgKiBQYXJzZXMgYSBjb21wbGV4IG51bWJlciBpbnRvIGl0cyByZWFsIGFuZCBpbWFnaW5hcnkgcGFydHMsIGFuZCBhbiBJIG9yIEogc3VmZml4CiAgICAgKgogICAgICogQHBhcmFtICAgIHN0cmluZyAgICAgICAgJGNvbXBsZXhOdW1iZXIgICAgVGhlIGNvbXBsZXggbnVtYmVyCiAgICAgKiBAcmV0dXJuICAgIHN0cmluZ1tdICAgIEluZGV4ZWQgb24gInJlYWwiLCAiaW1hZ2luYXJ5IiBhbmQgInN1ZmZpeCIKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBwYXJzZUNvbXBsZXgoJGNvbXBsZXhOdW1iZXIpCiAgICB7CiAgICAgICAgJHdvcmtTdHJpbmcgPSAoc3RyaW5nKSAkY29tcGxleE51bWJlcjsKCiAgICAgICAgJHJlYWxOdW1iZXIgPSAkaW1hZ2luYXJ5ID0gMDsKICAgICAgICAvLyAgICBFeHRyYWN0IHRoZSBzdWZmaXgsIGlmIHRoZXJlIGlzIG9uZQogICAgICAgICRzdWZmaXggPSBzdWJzdHIoJHdvcmtTdHJpbmcsIC0xKTsKICAgICAgICBpZiAoIWlzX251bWVyaWMoJHN1ZmZpeCkpIHsKICAgICAgICAgICAgJHdvcmtTdHJpbmcgPSBzdWJzdHIoJHdvcmtTdHJpbmcsIDAsIC0xKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkc3VmZml4ID0gJyc7CiAgICAgICAgfQoKICAgICAgICAvLyAgICBTcGxpdCB0aGUgaW5wdXQgaW50byBpdHMgUmVhbCBhbmQgSW1hZ2luYXJ5IGNvbXBvbmVudHMKICAgICAgICAkbGVhZGluZ1NpZ24gPSAwOwogICAgICAgIGlmIChzdHJsZW4oJHdvcmtTdHJpbmcpID4gMCkgewogICAgICAgICAgICAkbGVhZGluZ1NpZ24gPSAoKCR3b3JrU3RyaW5nezB9ID09ICcrJykgfHwgKCR3b3JrU3RyaW5nezB9ID09ICctJykpID8gMSA6IDA7CiAgICAgICAgfQogICAgICAgICRwb3dlciA9ICcnOwogICAgICAgICRyZWFsTnVtYmVyID0gc3RydG9rKCR3b3JrU3RyaW5nLCAnKy0nKTsKICAgICAgICBpZiAoc3RydG91cHBlcihzdWJzdHIoJHJlYWxOdW1iZXIsIC0xKSkgPT0gJ0UnKSB7CiAgICAgICAgICAgICRwb3dlciA9IHN0cnRvaygnKy0nKTsKICAgICAgICAgICAgKyskbGVhZGluZ1NpZ247CiAgICAgICAgfQoKICAgICAgICAkcmVhbE51bWJlciA9IHN1YnN0cigkd29ya1N0cmluZywgMCwgc3RybGVuKCRyZWFsTnVtYmVyKStzdHJsZW4oJHBvd2VyKSskbGVhZGluZ1NpZ24pOwoKICAgICAgICBpZiAoJHN1ZmZpeCAhPSAnJykgewogICAgICAgICAgICAkaW1hZ2luYXJ5ID0gc3Vic3RyKCR3b3JrU3RyaW5nLCBzdHJsZW4oJHJlYWxOdW1iZXIpKTsKCiAgICAgICAgICAgIGlmICgoJGltYWdpbmFyeSA9PSAnJykgJiYgKCgkcmVhbE51bWJlciA9PSAnJykgfHwgKCRyZWFsTnVtYmVyID09ICcrJykgfHwgKCRyZWFsTnVtYmVyID09ICctJykpKSB7CiAgICAgICAgICAgICAgICAkaW1hZ2luYXJ5ID0gJHJlYWxOdW1iZXIuJzEnOwogICAgICAgICAgICAgICAgJHJlYWxOdW1iZXIgPSAnMCc7CiAgICAgICAgICAgIH0gZWxzZWlmICgkaW1hZ2luYXJ5ID09ICcnKSB7CiAgICAgICAgICAgICAgICAkaW1hZ2luYXJ5ID0gJHJlYWxOdW1iZXI7CiAgICAgICAgICAgICAgICAkcmVhbE51bWJlciA9ICcwJzsKICAgICAgICAgICAgfSBlbHNlaWYgKCgkaW1hZ2luYXJ5ID09ICcrJykgfHwgKCRpbWFnaW5hcnkgPT0gJy0nKSkgewogICAgICAgICAgICAgICAgJGltYWdpbmFyeSAuPSAnMSc7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBhcnJheSgKICAgICAgICAgICAgJ3JlYWwnICAgPT4gJHJlYWxOdW1iZXIsCiAgICAgICAgICAgICdpbWFnaW5hcnknID0+ICRpbWFnaW5hcnksCiAgICAgICAgICAgICdzdWZmaXgnID0+ICRzdWZmaXgKICAgICAgICApOwogICAgfQoKCiAgICAvKioKICAgICAqIENsZWFucyB0aGUgbGVhZGluZyBjaGFyYWN0ZXJzIGluIGEgY29tcGxleCBudW1iZXIgc3RyaW5nCiAgICAgKgogICAgICogQHBhcmFtICAgIHN0cmluZyAgICAgICAgJGNvbXBsZXhOdW1iZXIgICAgVGhlIGNvbXBsZXggbnVtYmVyIHRvIGNsZWFuCiAgICAgKiBAcmV0dXJuICAgIHN0cmluZyAgICAgICAgVGhlICJjbGVhbmVkIiBjb21wbGV4IG51bWJlcgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiBjbGVhbkNvbXBsZXgoJGNvbXBsZXhOdW1iZXIpCiAgICB7CiAgICAgICAgaWYgKCRjb21wbGV4TnVtYmVyezB9ID09ICcrJykgewogICAgICAgICAgICAkY29tcGxleE51bWJlciA9IHN1YnN0cigkY29tcGxleE51bWJlciwgMSk7CiAgICAgICAgfQogICAgICAgIGlmICgkY29tcGxleE51bWJlcnswfSA9PSAnMCcpIHsKICAgICAgICAgICAgJGNvbXBsZXhOdW1iZXIgPSBzdWJzdHIoJGNvbXBsZXhOdW1iZXIsIDEpOwogICAgICAgIH0KICAgICAgICBpZiAoJGNvbXBsZXhOdW1iZXJ7MH0gPT0gJy4nKSB7CiAgICAgICAgICAgICRjb21wbGV4TnVtYmVyID0gJzAnLiRjb21wbGV4TnVtYmVyOwogICAgICAgIH0KICAgICAgICBpZiAoJGNvbXBsZXhOdW1iZXJ7MH0gPT0gJysnKSB7CiAgICAgICAgICAgICRjb21wbGV4TnVtYmVyID0gc3Vic3RyKCRjb21wbGV4TnVtYmVyLCAxKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICRjb21wbGV4TnVtYmVyOwogICAgfQoKICAgIC8qKgogICAgICogRm9ybWF0cyBhIG51bWJlciBiYXNlIHN0cmluZyB2YWx1ZSB3aXRoIGxlYWRpbmcgemVyb2VzCiAgICAgKgogICAgICogQHBhcmFtICAgIHN0cmluZyAgICAgICAgJHhWYWwgICAgICAgIFRoZSAibnVtYmVyIiB0byBwYWQKICAgICAqIEBwYXJhbSAgICBpbnRlZ2VyICAgICAgICAkcGxhY2VzICAgICAgICBUaGUgbGVuZ3RoIHRoYXQgd2Ugd2FudCB0byBwYWQgdGhpcyB2YWx1ZQogICAgICogQHJldHVybiAgICBzdHJpbmcgICAgICAgIFRoZSBwYWRkZWQgIm51bWJlciIKICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gbmJyQ29udmVyc2lvbkZvcm1hdCgkeFZhbCwgJHBsYWNlcykKICAgIHsKICAgICAgICBpZiAoIWlzX251bGwoJHBsYWNlcykpIHsKICAgICAgICAgICAgaWYgKHN0cmxlbigkeFZhbCkgPD0gJHBsYWNlcykgewogICAgICAgICAgICAgICAgcmV0dXJuIHN1YnN0cihzdHJfcGFkKCR4VmFsLCAkcGxhY2VzLCAnMCcsIFNUUl9QQURfTEVGVCksIC0xMCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpOYU4oKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHN1YnN0cigkeFZhbCwgLTEwKTsKICAgIH0KCiAgICAvKioKICAgICAqICAgIEJFU1NFTEkKICAgICAqCiAgICAgKiAgICBSZXR1cm5zIHRoZSBtb2RpZmllZCBCZXNzZWwgZnVuY3Rpb24gSW4oeCksIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gdGhlIEJlc3NlbCBmdW5jdGlvbiBldmFsdWF0ZWQKICAgICAqICAgICAgICBmb3IgcHVyZWx5IGltYWdpbmFyeSBhcmd1bWVudHMKICAgICAqCiAgICAgKiAgICBFeGNlbCBGdW5jdGlvbjoKICAgICAqICAgICAgICBCRVNTRUxJKHgsb3JkKQogICAgICoKICAgICAqICAgIEBhY2Nlc3MgICAgcHVibGljCiAgICAgKiAgICBAY2F0ZWdvcnkgRW5naW5lZXJpbmcgRnVuY3Rpb25zCiAgICAgKiAgICBAcGFyYW0gICAgZmxvYXQgICAgICAgICR4ICAgICAgICBUaGUgdmFsdWUgYXQgd2hpY2ggdG8gZXZhbHVhdGUgdGhlIGZ1bmN0aW9uLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIHggaXMgbm9ubnVtZXJpYywgQkVTU0VMSSByZXR1cm5zIHRoZSAjVkFMVUUhIGVycm9yIHZhbHVlLgogICAgICogICAgQHBhcmFtICAgIGludGVnZXIgICAgICAgICRvcmQgICAgVGhlIG9yZGVyIG9mIHRoZSBCZXNzZWwgZnVuY3Rpb24uCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgb3JkIGlzIG5vdCBhbiBpbnRlZ2VyLCBpdCBpcyB0cnVuY2F0ZWQuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgJG9yZCBpcyBub25udW1lcmljLCBCRVNTRUxJIHJldHVybnMgdGhlICNWQUxVRSEgZXJyb3IgdmFsdWUuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgJG9yZCA8IDAsIEJFU1NFTEkgcmV0dXJucyB0aGUgI05VTSEgZXJyb3IgdmFsdWUuCiAgICAgKiAgICBAcmV0dXJuICAgIGZsb2F0CiAgICAgKgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIEJFU1NFTEkoJHgsICRvcmQpCiAgICB7CiAgICAgICAgJHggICAgPSAoaXNfbnVsbCgkeCkpICAgID8gMC4wIDogICAgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpmbGF0dGVuU2luZ2xlVmFsdWUoJHgpOwogICAgICAgICRvcmQgICAgPSAoaXNfbnVsbCgkb3JkKSkgICAgPyAwLjAgOiAgICBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkb3JkKTsKCiAgICAgICAgaWYgKChpc19udW1lcmljKCR4KSkgJiYgKGlzX251bWVyaWMoJG9yZCkpKSB7CiAgICAgICAgICAgICRvcmQgICAgPSBmbG9vcigkb3JkKTsKICAgICAgICAgICAgaWYgKCRvcmQgPCAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpOYU4oKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGFicygkeCkgPD0gMzApIHsKICAgICAgICAgICAgICAgICRmUmVzdWx0ID0gJGZUZXJtID0gcG93KCR4IC8gMiwgJG9yZCkgLyBQSFBFeGNlbF9DYWxjdWxhdGlvbl9NYXRoVHJpZzo6RkFDVCgkb3JkKTsKICAgICAgICAgICAgICAgICRvcmRLID0gMTsKICAgICAgICAgICAgICAgICRmU3FyWCA9ICgkeCAqICR4KSAvIDQ7CiAgICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAgICAgJGZUZXJtICo9ICRmU3FyWDsKICAgICAgICAgICAgICAgICAgICAkZlRlcm0gLz0gKCRvcmRLICogKCRvcmRLICsgJG9yZCkpOwogICAgICAgICAgICAgICAgICAgICRmUmVzdWx0ICs9ICRmVGVybTsKICAgICAgICAgICAgICAgIH0gd2hpbGUgKChhYnMoJGZUZXJtKSA+IDFlLTEyKSAmJiAoKyskb3JkSyA8IDEwMCkpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJGZfMl9QSSA9IDIgKiBNX1BJOwoKICAgICAgICAgICAgICAgICRmWEFicyA9IGFicygkeCk7CiAgICAgICAgICAgICAgICAkZlJlc3VsdCA9IGV4cCgkZlhBYnMpIC8gc3FydCgkZl8yX1BJICogJGZYQWJzKTsKICAgICAgICAgICAgICAgIGlmICgoJG9yZCAmIDEpICYmICgkeCA8IDApKSB7CiAgICAgICAgICAgICAgICAgICAgJGZSZXN1bHQgPSAtJGZSZXN1bHQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIChpc19uYW4oJGZSZXN1bHQpKSA\/IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6TmFOKCkgOiAkZlJlc3VsdDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6VkFMVUUoKTsKICAgIH0KCgogICAgLyoqCiAgICAgKiAgICBCRVNTRUxKCiAgICAgKgogICAgICogICAgUmV0dXJucyB0aGUgQmVzc2VsIGZ1bmN0aW9uCiAgICAgKgogICAgICogICAgRXhjZWwgRnVuY3Rpb246CiAgICAgKiAgICAgICAgQkVTU0VMSih4LG9yZCkKICAgICAqCiAgICAgKiAgICBAYWNjZXNzICAgIHB1YmxpYwogICAgICogICAgQGNhdGVnb3J5IEVuZ2luZWVyaW5nIEZ1bmN0aW9ucwogICAgICogICAgQHBhcmFtICAgIGZsb2F0ICAgICAgICAkeCAgICAgICAgVGhlIHZhbHVlIGF0IHdoaWNoIHRvIGV2YWx1YXRlIHRoZSBmdW5jdGlvbi4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiB4IGlzIG5vbm51bWVyaWMsIEJFU1NFTEogcmV0dXJucyB0aGUgI1ZBTFVFISBlcnJvciB2YWx1ZS4KICAgICAqICAgIEBwYXJhbSAgICBpbnRlZ2VyICAgICAgICAkb3JkICAgIFRoZSBvcmRlciBvZiB0aGUgQmVzc2VsIGZ1bmN0aW9uLiBJZiBuIGlzIG5vdCBhbiBpbnRlZ2VyLCBpdCBpcyB0cnVuY2F0ZWQuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgJG9yZCBpcyBub25udW1lcmljLCBCRVNTRUxKIHJldHVybnMgdGhlICNWQUxVRSEgZXJyb3IgdmFsdWUuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgJG9yZCA8IDAsIEJFU1NFTEogcmV0dXJucyB0aGUgI05VTSEgZXJyb3IgdmFsdWUuCiAgICAgKiAgICBAcmV0dXJuICAgIGZsb2F0CiAgICAgKgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIEJFU1NFTEooJHgsICRvcmQpCiAgICB7CiAgICAgICAgJHggICAgPSAoaXNfbnVsbCgkeCkpICAgID8gMC4wIDogICAgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpmbGF0dGVuU2luZ2xlVmFsdWUoJHgpOwogICAgICAgICRvcmQgICAgPSAoaXNfbnVsbCgkb3JkKSkgICAgPyAwLjAgOiAgICBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkb3JkKTsKCiAgICAgICAgaWYgKChpc19udW1lcmljKCR4KSkgJiYgKGlzX251bWVyaWMoJG9yZCkpKSB7CiAgICAgICAgICAgICRvcmQgICAgPSBmbG9vcigkb3JkKTsKICAgICAgICAgICAgaWYgKCRvcmQgPCAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpOYU4oKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJGZSZXN1bHQgPSAwOwogICAgICAgICAgICBpZiAoYWJzKCR4KSA8PSAzMCkgewogICAgICAgICAgICAgICAgJGZSZXN1bHQgPSAkZlRlcm0gPSBwb3coJHggLyAyLCAkb3JkKSAvIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX01hdGhUcmlnOjpGQUNUKCRvcmQpOwogICAgICAgICAgICAgICAgJG9yZEsgPSAxOwogICAgICAgICAgICAgICAgJGZTcXJYID0gKCR4ICogJHgpIC8gLTQ7CiAgICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAgICAgJGZUZXJtICo9ICRmU3FyWDsKICAgICAgICAgICAgICAgICAgICAkZlRlcm0gLz0gKCRvcmRLICogKCRvcmRLICsgJG9yZCkpOwogICAgICAgICAgICAgICAgICAgICRmUmVzdWx0ICs9ICRmVGVybTsKICAgICAgICAgICAgICAgIH0gd2hpbGUgKChhYnMoJGZUZXJtKSA+IDFlLTEyKSAmJiAoKyskb3JkSyA8IDEwMCkpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJGZfUElfRElWXzIgPSBNX1BJIC8gMjsKICAgICAgICAgICAgICAgICRmX1BJX0RJVl80ID0gTV9QSSAvIDQ7CgogICAgICAgICAgICAgICAgJGZYQWJzID0gYWJzKCR4KTsKICAgICAgICAgICAgICAgICRmUmVzdWx0ID0gc3FydChNXzJESVZQSSAvICRmWEFicykgKiBjb3MoJGZYQWJzIC0gJG9yZCAqICRmX1BJX0RJVl8yIC0gJGZfUElfRElWXzQpOwogICAgICAgICAgICAgICAgaWYgKCgkb3JkICYgMSkgJiYgKCR4IDwgMCkpIHsKICAgICAgICAgICAgICAgICAgICAkZlJlc3VsdCA9IC0kZlJlc3VsdDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gKGlzX25hbigkZlJlc3VsdCkpID8gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpOYU4oKSA6ICRmUmVzdWx0OwogICAgICAgIH0KICAgICAgICByZXR1cm4gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpWQUxVRSgpOwogICAgfQoKCiAgICBwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiBiZXNzZWxLMCgkZk51bSkKICAgIHsKICAgICAgICBpZiAoJGZOdW0gPD0gMikgewogICAgICAgICAgICAkZk51bTIgPSAkZk51bSAqIDAuNTsKICAgICAgICAgICAgJHkgPSAoJGZOdW0yICogJGZOdW0yKTsKICAgICAgICAgICAgJGZSZXQgPSAtbG9nKCRmTnVtMikgKiBzZWxmOjpCRVNTRUxJKCRmTnVtLCAwKSArCiAgICAgICAgICAgICAgICAoLTAuNTc3MjE1NjYgKyAkeSAqICgwLjQyMjc4NDIwICsgJHkgKiAoMC4yMzA2OTc1NiArICR5ICogKDAuMzQ4ODU5MGUtMSArICR5ICogKDAuMjYyNjk4ZS0yICsgJHkgKgogICAgICAgICAgICAgICAgKDAuMTA3NTBlLTMgKyAkeSAqIDAuNzRlLTUpKSkpKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJHkgPSAyIC8gJGZOdW07CiAgICAgICAgICAgICRmUmV0ID0gZXhwKC0kZk51bSkgLyBzcXJ0KCRmTnVtKSAqCiAgICAgICAgICAgICAgICAoMS4yNTMzMTQxNCArICR5ICogKC0wLjc4MzIzNThlLTEgKyAkeSAqICgwLjIxODk1NjhlLTEgKyAkeSAqICgtMC4xMDYyNDQ2ZS0xICsgJHkgKgogICAgICAgICAgICAgICAgKDAuNTg3ODcyZS0yICsgJHkgKiAoLTAuMjUxNTQwZS0yICsgJHkgKiAwLjUzMjA4ZS0zKSkpKSkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gJGZSZXQ7CiAgICB9CgoKICAgIHByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGJlc3NlbEsxKCRmTnVtKQogICAgewogICAgICAgIGlmICgkZk51bSA8PSAyKSB7CiAgICAgICAgICAgICRmTnVtMiA9ICRmTnVtICogMC41OwogICAgICAgICAgICAkeSA9ICgkZk51bTIgKiAkZk51bTIpOwogICAgICAgICAgICAkZlJldCA9IGxvZygkZk51bTIpICogc2VsZjo6QkVTU0VMSSgkZk51bSwgMSkgKwogICAgICAgICAgICAgICAgKDEgKyAkeSAqICgwLjE1NDQzMTQ0ICsgJHkgKiAoLTAuNjcyNzg1NzkgKyAkeSAqICgtMC4xODE1Njg5NyArICR5ICogKC0wLjE5MTk0MDJlLTEgKyAkeSAqCiAgICAgICAgICAgICAgICAoLTAuMTEwNDA0ZS0yICsgJHkgKiAoLTAuNDY4NmUtNCkpKSkpKSkgLyAkZk51bTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkeSA9IDIgLyAkZk51bTsKICAgICAgICAgICAgJGZSZXQgPSBleHAoLSRmTnVtKSAvIHNxcnQoJGZOdW0pICoKICAgICAgICAgICAgICAgICgxLjI1MzMxNDE0ICsgJHkgKiAoMC4yMzQ5ODYxOSArICR5ICogKC0wLjM2NTU2MjBlLTEgKyAkeSAqICgwLjE1MDQyNjhlLTEgKyAkeSAqICgtMC43ODAzNTNlLTIgKyAkeSAqCiAgICAgICAgICAgICAgICAoMC4zMjU2MTRlLTIgKyAkeSAqICgtMC42ODI0NWUtMykpKSkpKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAkZlJldDsKICAgIH0KCgogICAgLyoqCiAgICAgKiAgICBCRVNTRUxLCiAgICAgKgogICAgICogICAgUmV0dXJucyB0aGUgbW9kaWZpZWQgQmVzc2VsIGZ1bmN0aW9uIEtuKHgpLCB3aGljaCBpcyBlcXVpdmFsZW50IHRvIHRoZSBCZXNzZWwgZnVuY3Rpb25zIGV2YWx1YXRlZAogICAgICogICAgICAgIGZvciBwdXJlbHkgaW1hZ2luYXJ5IGFyZ3VtZW50cy4KICAgICAqCiAgICAgKiAgICBFeGNlbCBGdW5jdGlvbjoKICAgICAqICAgICAgICBCRVNTRUxLKHgsb3JkKQogICAgICoKICAgICAqICAgIEBhY2Nlc3MgICAgcHVibGljCiAgICAgKiAgICBAY2F0ZWdvcnkgRW5naW5lZXJpbmcgRnVuY3Rpb25zCiAgICAgKiAgICBAcGFyYW0gICAgZmxvYXQgICAgICAgICR4ICAgICAgICBUaGUgdmFsdWUgYXQgd2hpY2ggdG8gZXZhbHVhdGUgdGhlIGZ1bmN0aW9uLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIHggaXMgbm9ubnVtZXJpYywgQkVTU0VMSyByZXR1cm5zIHRoZSAjVkFMVUUhIGVycm9yIHZhbHVlLgogICAgICogICAgQHBhcmFtICAgIGludGVnZXIgICAgICAgICRvcmQgICAgVGhlIG9yZGVyIG9mIHRoZSBCZXNzZWwgZnVuY3Rpb24uIElmIG4gaXMgbm90IGFuIGludGVnZXIsIGl0IGlzIHRydW5jYXRlZC4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiAkb3JkIGlzIG5vbm51bWVyaWMsIEJFU1NFTEsgcmV0dXJucyB0aGUgI1ZBTFVFISBlcnJvciB2YWx1ZS4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiAkb3JkIDwgMCwgQkVTU0VMSyByZXR1cm5zIHRoZSAjTlVNISBlcnJvciB2YWx1ZS4KICAgICAqICAgIEByZXR1cm4gICAgZmxvYXQKICAgICAqCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gQkVTU0VMSygkeCwgJG9yZCkKICAgIHsKICAgICAgICAkeCAgICAgICAgPSAoaXNfbnVsbCgkeCkpICAgICAgICA\/IDAuMCA6ICAgIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCR4KTsKICAgICAgICAkb3JkICAgID0gKGlzX251bGwoJG9yZCkpICAgID8gMC4wIDogICAgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpmbGF0dGVuU2luZ2xlVmFsdWUoJG9yZCk7CgogICAgICAgIGlmICgoaXNfbnVtZXJpYygkeCkpICYmIChpc19udW1lcmljKCRvcmQpKSkgewogICAgICAgICAgICBpZiAoKCRvcmQgPCAwKSB8fCAoJHggPT0gMC4wKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6TmFOKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHN3aXRjaCAoZmxvb3IoJG9yZCkpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZjo6YmVzc2VsSzAoJHgpOwogICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmOjpiZXNzZWxLMSgkeCk7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICRmVG94ICAgID0gMiAvICR4OwogICAgICAgICAgICAgICAgICAgICRmQmttICAgID0gc2VsZjo6YmVzc2VsSzAoJHgpOwogICAgICAgICAgICAgICAgICAgICRmQmsgICAgPSBzZWxmOjpiZXNzZWxLMSgkeCk7CiAgICAgICAgICAgICAgICAgICAgZm9yICgkbiA9IDE7ICRuIDwgJG9yZDsgKyskbikgewogICAgICAgICAgICAgICAgICAgICAgICAkZkJrcCAgICA9ICRmQmttICsgJG4gKiAkZlRveCAqICRmQms7CiAgICAgICAgICAgICAgICAgICAgICAgICRmQmttICAgID0gJGZCazsKICAgICAgICAgICAgICAgICAgICAgICAgJGZCayAgICA9ICRmQmtwOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gKGlzX25hbigkZkJrKSkgPyBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6Ok5hTigpIDogJGZCazsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6VkFMVUUoKTsKICAgIH0KCgogICAgcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gYmVzc2VsWTAoJGZOdW0pCiAgICB7CiAgICAgICAgaWYgKCRmTnVtIDwgOC4wKSB7CiAgICAgICAgICAgICR5ID0gKCRmTnVtICogJGZOdW0pOwogICAgICAgICAgICAkZjEgPSAtMjk1NzgyMTM4OS4wICsgJHkgKiAoNzA2MjgzNDA2NS4wICsgJHkgKiAoLTUxMjM1OTgwMy42ICsgJHkgKiAoMTA4Nzk4ODEuMjkgKyAkeSAqICgtODYzMjcuOTI3NTcgKyAkeSAqIDIyOC40NjIyNzMzKSkpKTsKICAgICAgICAgICAgJGYyID0gNDAwNzY1NDQyNjkuMCArICR5ICogKDc0NTI0OTk2NC44ICsgJHkgKiAoNzE4OTQ2Ni40MzggKyAkeSAqICg0NzQ0Ny4yNjQ3MCArICR5ICogKDIyNi4xMDMwMjQ0ICsgJHkpKSkpOwogICAgICAgICAgICAkZlJldCA9ICRmMSAvICRmMiArIDAuNjM2NjE5NzcyICogc2VsZjo6QkVTU0VMSigkZk51bSwgMCkgKiBsb2coJGZOdW0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICR6ID0gOC4wIC8gJGZOdW07CiAgICAgICAgICAgICR5ID0gKCR6ICogJHopOwogICAgICAgICAgICAkeHggPSAkZk51bSAtIDAuNzg1Mzk4MTY0OwogICAgICAgICAgICAkZjEgPSAxICsgJHkgKiAoLTAuMTA5ODYyODYyN2UtMiArICR5ICogKDAuMjczNDUxMDQwN2UtNCArICR5ICogKC0wLjIwNzMzNzA2MzllLTUgKyAkeSAqIDAuMjA5Mzg4NzIxMWUtNikpKTsKICAgICAgICAgICAgJGYyID0gLTAuMTU2MjQ5OTk5NWUtMSArICR5ICogKDAuMTQzMDQ4ODc2NWUtMyArICR5ICogKC0wLjY5MTExNDc2NTFlLTUgKyAkeSAqICgwLjc2MjEwOTUxNjFlLTYgKyAkeSAqICgtMC45MzQ5NDUxNTJlLTcpKSkpOwogICAgICAgICAgICAkZlJldCA9IHNxcnQoMC42MzY2MTk3NzIgLyAkZk51bSkgKiAoc2luKCR4eCkgKiAkZjEgKyAkeiAqIGNvcygkeHgpICogJGYyKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICRmUmV0OwogICAgfQoKCiAgICBwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiBiZXNzZWxZMSgkZk51bSkKICAgIHsKICAgICAgICBpZiAoJGZOdW0gPCA4LjApIHsKICAgICAgICAgICAgJHkgPSAoJGZOdW0gKiAkZk51bSk7CiAgICAgICAgICAgICRmMSA9ICRmTnVtICogKC0wLjQ5MDA2MDQ5NDNlMTMgKyAkeSAqICgwLjEyNzUyNzQzOTBlMTMgKyAkeSAqICgtMC41MTUzNDM4MTM5ZTExICsgJHkgKiAoMC43MzQ5MjY0NTUxZTkgKyAkeSAqCiAgICAgICAgICAgICAgICAoLTAuNDIzNzkyMjcyNmU3ICsgJHkgKiAwLjg1MTE5Mzc5MzVlNCkpKSkpOwogICAgICAgICAgICAkZjIgPSAwLjI0OTk1ODA1NzBlMTQgKyAkeSAqICgwLjQyNDQ0MTk2NjRlMTIgKyAkeSAqICgwLjM3MzM2NTAzNjdlMTAgKyAkeSAqICgwLjIyNDU5MDQwMDJlOCArICR5ICoKICAgICAgICAgICAgICAgICgwLjEwMjA0MjYwNTBlNiArICR5ICogKDAuMzU0OTYzMjg4NWUzICsgJHkpKSkpKTsKICAgICAgICAgICAgJGZSZXQgPSAkZjEgLyAkZjIgKyAwLjYzNjYxOTc3MiAqICggc2VsZjo6QkVTU0VMSigkZk51bSwgMSkgKiBsb2coJGZOdW0pIC0gMSAvICRmTnVtKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkZlJldCA9IHNxcnQoMC42MzY2MTk3NzIgLyAkZk51bSkgKiBzaW4oJGZOdW0gLSAyLjM1NjE5NDQ5MSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAkZlJldDsKICAgIH0KCgogICAgLyoqCiAgICAgKiAgICBCRVNTRUxZCiAgICAgKgogICAgICogICAgUmV0dXJucyB0aGUgQmVzc2VsIGZ1bmN0aW9uLCB3aGljaCBpcyBhbHNvIGNhbGxlZCB0aGUgV2ViZXIgZnVuY3Rpb24gb3IgdGhlIE5ldW1hbm4gZnVuY3Rpb24uCiAgICAgKgogICAgICogICAgRXhjZWwgRnVuY3Rpb246CiAgICAgKiAgICAgICAgQkVTU0VMWSh4LG9yZCkKICAgICAqCiAgICAgKiAgICBAYWNjZXNzICAgIHB1YmxpYwogICAgICogICAgQGNhdGVnb3J5IEVuZ2luZWVyaW5nIEZ1bmN0aW9ucwogICAgICogICAgQHBhcmFtICAgIGZsb2F0ICAgICAgICAkeCAgICAgICAgVGhlIHZhbHVlIGF0IHdoaWNoIHRvIGV2YWx1YXRlIHRoZSBmdW5jdGlvbi4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiB4IGlzIG5vbm51bWVyaWMsIEJFU1NFTEsgcmV0dXJucyB0aGUgI1ZBTFVFISBlcnJvciB2YWx1ZS4KICAgICAqICAgIEBwYXJhbSAgICBpbnRlZ2VyICAgICAgICAkb3JkICAgIFRoZSBvcmRlciBvZiB0aGUgQmVzc2VsIGZ1bmN0aW9uLiBJZiBuIGlzIG5vdCBhbiBpbnRlZ2VyLCBpdCBpcyB0cnVuY2F0ZWQuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgJG9yZCBpcyBub25udW1lcmljLCBCRVNTRUxLIHJldHVybnMgdGhlICNWQUxVRSEgZXJyb3IgdmFsdWUuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgJG9yZCA8IDAsIEJFU1NFTEsgcmV0dXJucyB0aGUgI05VTSEgZXJyb3IgdmFsdWUuCiAgICAgKgogICAgICogICAgQHJldHVybiAgICBmbG9hdAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIEJFU1NFTFkoJHgsICRvcmQpCiAgICB7CiAgICAgICAgJHggICAgICAgID0gKGlzX251bGwoJHgpKSAgICAgICAgPyAwLjAgOiAgICBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkeCk7CiAgICAgICAgJG9yZCAgICA9IChpc19udWxsKCRvcmQpKSAgICA\/IDAuMCA6ICAgIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCRvcmQpOwoKICAgICAgICBpZiAoKGlzX251bWVyaWMoJHgpKSAmJiAoaXNfbnVtZXJpYygkb3JkKSkpIHsKICAgICAgICAgICAgaWYgKCgkb3JkIDwgMCkgfHwgKCR4ID09IDAuMCkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6Ok5hTigpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzd2l0Y2ggKGZsb29yKCRvcmQpKSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGY6OmJlc3NlbFkwKCR4KTsKICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZjo6YmVzc2VsWTEoJHgpOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAkZlRveCAgICA9IDIgLyAkeDsKICAgICAgICAgICAgICAgICAgICAkZkJ5bSAgICA9IHNlbGY6OmJlc3NlbFkwKCR4KTsKICAgICAgICAgICAgICAgICAgICAkZkJ5ICAgID0gc2VsZjo6YmVzc2VsWTEoJHgpOwogICAgICAgICAgICAgICAgICAgIGZvciAoJG4gPSAxOyAkbiA8ICRvcmQ7ICsrJG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGZCeXAgICAgPSAkbiAqICRmVG94ICogJGZCeSAtICRmQnltOwogICAgICAgICAgICAgICAgICAgICAgICAkZkJ5bSAgICA9ICRmQnk7CiAgICAgICAgICAgICAgICAgICAgICAgICRmQnkgICAgPSAkZkJ5cDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIChpc19uYW4oJGZCeSkpID8gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpOYU4oKSA6ICRmQnk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OlZBTFVFKCk7CiAgICB9CgoKICAgIC8qKgogICAgICogQklOVE9ERUMKICAgICAqCiAgICAgKiBSZXR1cm4gYSBiaW5hcnkgdmFsdWUgYXMgZGVjaW1hbC4KICAgICAqCiAgICAgKiBFeGNlbCBGdW5jdGlvbjoKICAgICAqICAgICAgICBCSU4yREVDKHgpCiAgICAgKgogICAgICogQGFjY2VzcyAgICBwdWJsaWMKICAgICAqIEBjYXRlZ29yeSBFbmdpbmVlcmluZyBGdW5jdGlvbnMKICAgICAqIEBwYXJhbSAgICBzdHJpbmcgICAgICAgICR4ICAgICAgICBUaGUgYmluYXJ5IG51bWJlciAoYXMgYSBzdHJpbmcpIHRoYXQgeW91IHdhbnQgdG8gY29udmVydC4gVGhlIG51bWJlcgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbm5vdCBjb250YWluIG1vcmUgdGhhbiAxMCBjaGFyYWN0ZXJzICgxMCBiaXRzKS4gVGhlIG1vc3Qgc2lnbmlmaWNhbnQKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXQgb2YgbnVtYmVyIGlzIHRoZSBzaWduIGJpdC4gVGhlIHJlbWFpbmluZyA5IGJpdHMgYXJlIG1hZ25pdHVkZSBiaXRzLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5lZ2F0aXZlIG51bWJlcnMgYXJlIHJlcHJlc2VudGVkIHVzaW5nIHR3bydzLWNvbXBsZW1lbnQgbm90YXRpb24uCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgbnVtYmVyIGlzIG5vdCBhIHZhbGlkIGJpbmFyeSBudW1iZXIsIG9yIGlmIG51bWJlciBjb250YWlucyBtb3JlIHRoYW4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMCBjaGFyYWN0ZXJzICgxMCBiaXRzKSwgQklOMkRFQyByZXR1cm5zIHRoZSAjTlVNISBlcnJvciB2YWx1ZS4KICAgICAqIEByZXR1cm4gICAgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gQklOVE9ERUMoJHgpCiAgICB7CiAgICAgICAgJHggICAgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkeCk7CgogICAgICAgIGlmIChpc19ib29sKCR4KSkgewogICAgICAgICAgICBpZiAoUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpnZXRDb21wYXRpYmlsaXR5TW9kZSgpID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6Q09NUEFUSUJJTElUWV9PUEVOT0ZGSUNFKSB7CiAgICAgICAgICAgICAgICAkeCA9IChpbnQpICR4OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6VkFMVUUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpnZXRDb21wYXRpYmlsaXR5TW9kZSgpID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6Q09NUEFUSUJJTElUWV9HTlVNRVJJQykgewogICAgICAgICAgICAkeCA9IGZsb29yKCR4KTsKICAgICAgICB9CiAgICAgICAgJHggPSAoc3RyaW5nKSAkeDsKICAgICAgICBpZiAoc3RybGVuKCR4KSA+IHByZWdfbWF0Y2hfYWxsKCcvWzAxXS8nLCAkeCwgJG91dCkpIHsKICAgICAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6TmFOKCk7CiAgICAgICAgfQogICAgICAgIGlmIChzdHJsZW4oJHgpID4gMTApIHsKICAgICAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6TmFOKCk7CiAgICAgICAgfSBlbHNlaWYgKHN0cmxlbigkeCkgPT0gMTApIHsKICAgICAgICAgICAgLy8gICAgVHdvJ3MgQ29tcGxlbWVudAogICAgICAgICAgICAkeCA9IHN1YnN0cigkeCwgLTkpOwogICAgICAgICAgICByZXR1cm4gJy0nLig1MTItYmluZGVjKCR4KSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBiaW5kZWMoJHgpOwogICAgfQoKCiAgICAvKioKICAgICAqIEJJTlRPSEVYCiAgICAgKgogICAgICogUmV0dXJuIGEgYmluYXJ5IHZhbHVlIGFzIGhleC4KICAgICAqCiAgICAgKiBFeGNlbCBGdW5jdGlvbjoKICAgICAqICAgICAgICBCSU4ySEVYKHhbLHBsYWNlc10pCiAgICAgKgogICAgICogQGFjY2VzcyAgICBwdWJsaWMKICAgICAqIEBjYXRlZ29yeSBFbmdpbmVlcmluZyBGdW5jdGlvbnMKICAgICAqIEBwYXJhbSAgICBzdHJpbmcgICAgICAgICR4ICAgICAgICBUaGUgYmluYXJ5IG51bWJlciAoYXMgYSBzdHJpbmcpIHRoYXQgeW91IHdhbnQgdG8gY29udmVydC4gVGhlIG51bWJlcgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbm5vdCBjb250YWluIG1vcmUgdGhhbiAxMCBjaGFyYWN0ZXJzICgxMCBiaXRzKS4gVGhlIG1vc3Qgc2lnbmlmaWNhbnQKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXQgb2YgbnVtYmVyIGlzIHRoZSBzaWduIGJpdC4gVGhlIHJlbWFpbmluZyA5IGJpdHMgYXJlIG1hZ25pdHVkZSBiaXRzLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5lZ2F0aXZlIG51bWJlcnMgYXJlIHJlcHJlc2VudGVkIHVzaW5nIHR3bydzLWNvbXBsZW1lbnQgbm90YXRpb24uCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgbnVtYmVyIGlzIG5vdCBhIHZhbGlkIGJpbmFyeSBudW1iZXIsIG9yIGlmIG51bWJlciBjb250YWlucyBtb3JlIHRoYW4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMCBjaGFyYWN0ZXJzICgxMCBiaXRzKSwgQklOMkhFWCByZXR1cm5zIHRoZSAjTlVNISBlcnJvciB2YWx1ZS4KICAgICAqIEBwYXJhbSAgICBpbnRlZ2VyICAgICAgICAkcGxhY2VzICAgIFRoZSBudW1iZXIgb2YgY2hhcmFjdGVycyB0byB1c2UuIElmIHBsYWNlcyBpcyBvbWl0dGVkLCBCSU4ySEVYIHVzZXMgdGhlCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bSBudW1iZXIgb2YgY2hhcmFjdGVycyBuZWNlc3NhcnkuIFBsYWNlcyBpcyB1c2VmdWwgZm9yIHBhZGRpbmcgdGhlCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlIHdpdGggbGVhZGluZyAwcyAoemVyb3MpLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIHBsYWNlcyBpcyBub3QgYW4gaW50ZWdlciwgaXQgaXMgdHJ1bmNhdGVkLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIHBsYWNlcyBpcyBub25udW1lcmljLCBCSU4ySEVYIHJldHVybnMgdGhlICNWQUxVRSEgZXJyb3IgdmFsdWUuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgcGxhY2VzIGlzIG5lZ2F0aXZlLCBCSU4ySEVYIHJldHVybnMgdGhlICNOVU0hIGVycm9yIHZhbHVlLgogICAgICogQHJldHVybiAgICBzdHJpbmcKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBCSU5UT0hFWCgkeCwgJHBsYWNlcyA9IG51bGwpCiAgICB7CiAgICAgICAgJHggICAgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkeCk7CiAgICAgICAgJHBsYWNlcyAgICA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCRwbGFjZXMpOwoKICAgICAgICBpZiAoaXNfYm9vbCgkeCkpIHsKICAgICAgICAgICAgaWYgKFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6Z2V0Q29tcGF0aWJpbGl0eU1vZGUoKSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OkNPTVBBVElCSUxJVFlfT1BFTk9GRklDRSkgewogICAgICAgICAgICAgICAgJHggPSAoaW50KSAkeDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OlZBTFVFKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6Z2V0Q29tcGF0aWJpbGl0eU1vZGUoKSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OkNPTVBBVElCSUxJVFlfR05VTUVSSUMpIHsKICAgICAgICAgICAgJHggPSBmbG9vcigkeCk7CiAgICAgICAgfQogICAgICAgICR4ID0gKHN0cmluZykgJHg7CiAgICAgICAgaWYgKHN0cmxlbigkeCkgPiBwcmVnX21hdGNoX2FsbCgnL1swMV0vJywgJHgsICRvdXQpKSB7CiAgICAgICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6Ok5hTigpOwogICAgICAgIH0KICAgICAgICBpZiAoc3RybGVuKCR4KSA+IDEwKSB7CiAgICAgICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6Ok5hTigpOwogICAgICAgIH0gZWxzZWlmIChzdHJsZW4oJHgpID09IDEwKSB7CiAgICAgICAgICAgIC8vICAgIFR3bydzIENvbXBsZW1lbnQKICAgICAgICAgICAgcmV0dXJuIHN0cl9yZXBlYXQoJ0YnLCA4KS5zdWJzdHIoc3RydG91cHBlcihkZWNoZXgoYmluZGVjKHN1YnN0cigkeCwgLTkpKSkpLCAtMik7CiAgICAgICAgfQogICAgICAgICRoZXhWYWwgPSAoc3RyaW5nKSBzdHJ0b3VwcGVyKGRlY2hleChiaW5kZWMoJHgpKSk7CgogICAgICAgIHJldHVybiBzZWxmOjpuYnJDb252ZXJzaW9uRm9ybWF0KCRoZXhWYWwsICRwbGFjZXMpOwogICAgfQoKCiAgICAvKioKICAgICAqIEJJTlRPT0NUCiAgICAgKgogICAgICogUmV0dXJuIGEgYmluYXJ5IHZhbHVlIGFzIG9jdGFsLgogICAgICoKICAgICAqIEV4Y2VsIEZ1bmN0aW9uOgogICAgICogICAgICAgIEJJTjJPQ1QoeFsscGxhY2VzXSkKICAgICAqCiAgICAgKiBAYWNjZXNzICAgIHB1YmxpYwogICAgICogQGNhdGVnb3J5IEVuZ2luZWVyaW5nIEZ1bmN0aW9ucwogICAgICogQHBhcmFtICAgIHN0cmluZyAgICAgICAgJHggICAgICAgIFRoZSBiaW5hcnkgbnVtYmVyIChhcyBhIHN0cmluZykgdGhhdCB5b3Ugd2FudCB0byBjb252ZXJ0LiBUaGUgbnVtYmVyCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2Fubm90IGNvbnRhaW4gbW9yZSB0aGFuIDEwIGNoYXJhY3RlcnMgKDEwIGJpdHMpLiBUaGUgbW9zdCBzaWduaWZpY2FudAogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCBvZiBudW1iZXIgaXMgdGhlIHNpZ24gYml0LiBUaGUgcmVtYWluaW5nIDkgYml0cyBhcmUgbWFnbml0dWRlIGJpdHMuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTmVnYXRpdmUgbnVtYmVycyBhcmUgcmVwcmVzZW50ZWQgdXNpbmcgdHdvJ3MtY29tcGxlbWVudCBub3RhdGlvbi4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBudW1iZXIgaXMgbm90IGEgdmFsaWQgYmluYXJ5IG51bWJlciwgb3IgaWYgbnVtYmVyIGNvbnRhaW5zIG1vcmUgdGhhbgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwIGNoYXJhY3RlcnMgKDEwIGJpdHMpLCBCSU4yT0NUIHJldHVybnMgdGhlICNOVU0hIGVycm9yIHZhbHVlLgogICAgICogQHBhcmFtICAgIGludGVnZXIgICAgICAgICRwbGFjZXMgICAgVGhlIG51bWJlciBvZiBjaGFyYWN0ZXJzIHRvIHVzZS4gSWYgcGxhY2VzIGlzIG9taXR0ZWQsIEJJTjJPQ1QgdXNlcyB0aGUKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtIG51bWJlciBvZiBjaGFyYWN0ZXJzIG5lY2Vzc2FyeS4gUGxhY2VzIGlzIHVzZWZ1bCBmb3IgcGFkZGluZyB0aGUKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgd2l0aCBsZWFkaW5nIDBzICh6ZXJvcykuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgcGxhY2VzIGlzIG5vdCBhbiBpbnRlZ2VyLCBpdCBpcyB0cnVuY2F0ZWQuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgcGxhY2VzIGlzIG5vbm51bWVyaWMsIEJJTjJPQ1QgcmV0dXJucyB0aGUgI1ZBTFVFISBlcnJvciB2YWx1ZS4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBwbGFjZXMgaXMgbmVnYXRpdmUsIEJJTjJPQ1QgcmV0dXJucyB0aGUgI05VTSEgZXJyb3IgdmFsdWUuCiAgICAgKiBAcmV0dXJuICAgIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIEJJTlRPT0NUKCR4LCAkcGxhY2VzID0gbnVsbCkKICAgIHsKICAgICAgICAkeCAgICA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCR4KTsKICAgICAgICAkcGxhY2VzICAgID0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpmbGF0dGVuU2luZ2xlVmFsdWUoJHBsYWNlcyk7CgogICAgICAgIGlmIChpc19ib29sKCR4KSkgewogICAgICAgICAgICBpZiAoUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpnZXRDb21wYXRpYmlsaXR5TW9kZSgpID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6Q09NUEFUSUJJTElUWV9PUEVOT0ZGSUNFKSB7CiAgICAgICAgICAgICAgICAkeCA9IChpbnQpICR4OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6VkFMVUUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpnZXRDb21wYXRpYmlsaXR5TW9kZSgpID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6Q09NUEFUSUJJTElUWV9HTlVNRVJJQykgewogICAgICAgICAgICAkeCA9IGZsb29yKCR4KTsKICAgICAgICB9CiAgICAgICAgJHggPSAoc3RyaW5nKSAkeDsKICAgICAgICBpZiAoc3RybGVuKCR4KSA+IHByZWdfbWF0Y2hfYWxsKCcvWzAxXS8nLCAkeCwgJG91dCkpIHsKICAgICAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6TmFOKCk7CiAgICAgICAgfQogICAgICAgIGlmIChzdHJsZW4oJHgpID4gMTApIHsKICAgICAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6TmFOKCk7CiAgICAgICAgfSBlbHNlaWYgKHN0cmxlbigkeCkgPT0gMTApIHsKICAgICAgICAgICAgLy8gICAgVHdvJ3MgQ29tcGxlbWVudAogICAgICAgICAgICByZXR1cm4gc3RyX3JlcGVhdCgnNycsIDcpLnN1YnN0cihzdHJ0b3VwcGVyKGRlY29jdChiaW5kZWMoc3Vic3RyKCR4LCAtOSkpKSksIC0zKTsKICAgICAgICB9CiAgICAgICAgJG9jdFZhbCA9IChzdHJpbmcpIGRlY29jdChiaW5kZWMoJHgpKTsKCiAgICAgICAgcmV0dXJuIHNlbGY6Om5ickNvbnZlcnNpb25Gb3JtYXQoJG9jdFZhbCwgJHBsYWNlcyk7CiAgICB9CgoKICAgIC8qKgogICAgICogREVDVE9CSU4KICAgICAqCiAgICAgKiBSZXR1cm4gYSBkZWNpbWFsIHZhbHVlIGFzIGJpbmFyeS4KICAgICAqCiAgICAgKiBFeGNlbCBGdW5jdGlvbjoKICAgICAqICAgICAgICBERUMyQklOKHhbLHBsYWNlc10pCiAgICAgKgogICAgICogQGFjY2VzcyAgICBwdWJsaWMKICAgICAqIEBjYXRlZ29yeSBFbmdpbmVlcmluZyBGdW5jdGlvbnMKICAgICAqIEBwYXJhbSAgICBzdHJpbmcgICAgICAgICR4ICAgICAgICBUaGUgZGVjaW1hbCBpbnRlZ2VyIHlvdSB3YW50IHRvIGNvbnZlcnQuIElmIG51bWJlciBpcyBuZWdhdGl2ZSwKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCBwbGFjZSB2YWx1ZXMgYXJlIGlnbm9yZWQgYW5kIERFQzJCSU4gcmV0dXJucyBhIDEwLWNoYXJhY3RlcgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgxMC1iaXQpIGJpbmFyeSBudW1iZXIgaW4gd2hpY2ggdGhlIG1vc3Qgc2lnbmlmaWNhbnQgYml0IGlzIHRoZSBzaWduCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0LiBUaGUgcmVtYWluaW5nIDkgYml0cyBhcmUgbWFnbml0dWRlIGJpdHMuIE5lZ2F0aXZlIG51bWJlcnMgYXJlCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwcmVzZW50ZWQgdXNpbmcgdHdvJ3MtY29tcGxlbWVudCBub3RhdGlvbi4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBudW1iZXIgPCAtNTEyIG9yIGlmIG51bWJlciA+IDUxMSwgREVDMkJJTiByZXR1cm5zIHRoZSAjTlVNISBlcnJvcgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIG51bWJlciBpcyBub25udW1lcmljLCBERUMyQklOIHJldHVybnMgdGhlICNWQUxVRSEgZXJyb3IgdmFsdWUuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgREVDMkJJTiByZXF1aXJlcyBtb3JlIHRoYW4gcGxhY2VzIGNoYXJhY3RlcnMsIGl0IHJldHVybnMgdGhlICNOVU0hCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgdmFsdWUuCiAgICAgKiBAcGFyYW0gICAgaW50ZWdlciAgICAgICAgJHBsYWNlcyAgICBUaGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgdG8gdXNlLiBJZiBwbGFjZXMgaXMgb21pdHRlZCwgREVDMkJJTiB1c2VzCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIG1pbmltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgbmVjZXNzYXJ5LiBQbGFjZXMgaXMgdXNlZnVsIGZvcgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmcgdGhlIHJldHVybiB2YWx1ZSB3aXRoIGxlYWRpbmcgMHMgKHplcm9zKS4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBwbGFjZXMgaXMgbm90IGFuIGludGVnZXIsIGl0IGlzIHRydW5jYXRlZC4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBwbGFjZXMgaXMgbm9ubnVtZXJpYywgREVDMkJJTiByZXR1cm5zIHRoZSAjVkFMVUUhIGVycm9yIHZhbHVlLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIHBsYWNlcyBpcyB6ZXJvIG9yIG5lZ2F0aXZlLCBERUMyQklOIHJldHVybnMgdGhlICNOVU0hIGVycm9yIHZhbHVlLgogICAgICogQHJldHVybiAgICBzdHJpbmcKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBERUNUT0JJTigkeCwgJHBsYWNlcyA9IG51bGwpCiAgICB7CiAgICAgICAgJHggICAgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkeCk7CiAgICAgICAgJHBsYWNlcyAgICA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCRwbGFjZXMpOwoKICAgICAgICBpZiAoaXNfYm9vbCgkeCkpIHsKICAgICAgICAgICAgaWYgKFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6Z2V0Q29tcGF0aWJpbGl0eU1vZGUoKSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OkNPTVBBVElCSUxJVFlfT1BFTk9GRklDRSkgewogICAgICAgICAgICAgICAgJHggPSAoaW50KSAkeDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OlZBTFVFKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgJHggPSAoc3RyaW5nKSAkeDsKICAgICAgICBpZiAoc3RybGVuKCR4KSA+IHByZWdfbWF0Y2hfYWxsKCcvWy0wMTIzNDU2Nzg5Ll0vJywgJHgsICRvdXQpKSB7CiAgICAgICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OlZBTFVFKCk7CiAgICAgICAgfQogICAgICAgICR4ID0gKHN0cmluZykgZmxvb3IoJHgpOwogICAgICAgICRyID0gZGVjYmluKCR4KTsKICAgICAgICBpZiAoc3RybGVuKCRyKSA9PSAzMikgewogICAgICAgICAgICAvLyAgICBUd28ncyBDb21wbGVtZW50CiAgICAgICAgICAgICRyID0gc3Vic3RyKCRyLCAtMTApOwogICAgICAgIH0gZWxzZWlmIChzdHJsZW4oJHIpID4gMTEpIHsKICAgICAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6TmFOKCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gc2VsZjo6bmJyQ29udmVyc2lvbkZvcm1hdCgkciwgJHBsYWNlcyk7CiAgICB9CgoKICAgIC8qKgogICAgICogREVDVE9IRVgKICAgICAqCiAgICAgKiBSZXR1cm4gYSBkZWNpbWFsIHZhbHVlIGFzIGhleC4KICAgICAqCiAgICAgKiBFeGNlbCBGdW5jdGlvbjoKICAgICAqICAgICAgICBERUMySEVYKHhbLHBsYWNlc10pCiAgICAgKgogICAgICogQGFjY2VzcyAgICBwdWJsaWMKICAgICAqIEBjYXRlZ29yeSBFbmdpbmVlcmluZyBGdW5jdGlvbnMKICAgICAqIEBwYXJhbSAgICBzdHJpbmcgICAgICAgICR4ICAgICAgICBUaGUgZGVjaW1hbCBpbnRlZ2VyIHlvdSB3YW50IHRvIGNvbnZlcnQuIElmIG51bWJlciBpcyBuZWdhdGl2ZSwKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZXMgaXMgaWdub3JlZCBhbmQgREVDMkhFWCByZXR1cm5zIGEgMTAtY2hhcmFjdGVyICg0MC1iaXQpCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGV4YWRlY2ltYWwgbnVtYmVyIGluIHdoaWNoIHRoZSBtb3N0IHNpZ25pZmljYW50IGJpdCBpcyB0aGUgc2lnbgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC4gVGhlIHJlbWFpbmluZyAzOSBiaXRzIGFyZSBtYWduaXR1ZGUgYml0cy4gTmVnYXRpdmUgbnVtYmVycwogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZSByZXByZXNlbnRlZCB1c2luZyB0d28ncy1jb21wbGVtZW50IG5vdGF0aW9uLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIG51bWJlciA8IC01NDksNzU1LDgxMyw4ODggb3IgaWYgbnVtYmVyID4gNTQ5LDc1NSw4MTMsODg3LAogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERFQzJIRVggcmV0dXJucyB0aGUgI05VTSEgZXJyb3IgdmFsdWUuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgbnVtYmVyIGlzIG5vbm51bWVyaWMsIERFQzJIRVggcmV0dXJucyB0aGUgI1ZBTFVFISBlcnJvciB2YWx1ZS4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBERUMySEVYIHJlcXVpcmVzIG1vcmUgdGhhbiBwbGFjZXMgY2hhcmFjdGVycywgaXQgcmV0dXJucyB0aGUKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjTlVNISBlcnJvciB2YWx1ZS4KICAgICAqIEBwYXJhbSAgICBpbnRlZ2VyICAgICAgICAkcGxhY2VzICAgIFRoZSBudW1iZXIgb2YgY2hhcmFjdGVycyB0byB1c2UuIElmIHBsYWNlcyBpcyBvbWl0dGVkLCBERUMySEVYIHVzZXMKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgbWluaW11bSBudW1iZXIgb2YgY2hhcmFjdGVycyBuZWNlc3NhcnkuIFBsYWNlcyBpcyB1c2VmdWwgZm9yCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZyB0aGUgcmV0dXJuIHZhbHVlIHdpdGggbGVhZGluZyAwcyAoemVyb3MpLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIHBsYWNlcyBpcyBub3QgYW4gaW50ZWdlciwgaXQgaXMgdHJ1bmNhdGVkLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIHBsYWNlcyBpcyBub25udW1lcmljLCBERUMySEVYIHJldHVybnMgdGhlICNWQUxVRSEgZXJyb3IgdmFsdWUuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgcGxhY2VzIGlzIHplcm8gb3IgbmVnYXRpdmUsIERFQzJIRVggcmV0dXJucyB0aGUgI05VTSEgZXJyb3IgdmFsdWUuCiAgICAgKiBAcmV0dXJuICAgIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIERFQ1RPSEVYKCR4LCAkcGxhY2VzID0gbnVsbCkKICAgIHsKICAgICAgICAkeCAgICA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCR4KTsKICAgICAgICAkcGxhY2VzICAgID0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpmbGF0dGVuU2luZ2xlVmFsdWUoJHBsYWNlcyk7CgogICAgICAgIGlmIChpc19ib29sKCR4KSkgewogICAgICAgICAgICBpZiAoUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpnZXRDb21wYXRpYmlsaXR5TW9kZSgpID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6Q09NUEFUSUJJTElUWV9PUEVOT0ZGSUNFKSB7CiAgICAgICAgICAgICAgICAkeCA9IChpbnQpICR4OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6VkFMVUUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAkeCA9IChzdHJpbmcpICR4OwogICAgICAgIGlmIChzdHJsZW4oJHgpID4gcHJlZ19tYXRjaF9hbGwoJy9bLTAxMjM0NTY3ODkuXS8nLCAkeCwgJG91dCkpIHsKICAgICAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6VkFMVUUoKTsKICAgICAgICB9CiAgICAgICAgJHggPSAoc3RyaW5nKSBmbG9vcigkeCk7CiAgICAgICAgJHIgPSBzdHJ0b3VwcGVyKGRlY2hleCgkeCkpOwogICAgICAgIGlmIChzdHJsZW4oJHIpID09IDgpIHsKICAgICAgICAgICAgLy8gICAgVHdvJ3MgQ29tcGxlbWVudAogICAgICAgICAgICAkciA9ICdGRicuJHI7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gc2VsZjo6bmJyQ29udmVyc2lvbkZvcm1hdCgkciwgJHBsYWNlcyk7CiAgICB9CgoKICAgIC8qKgogICAgICogREVDVE9PQ1QKICAgICAqCiAgICAgKiBSZXR1cm4gYW4gZGVjaW1hbCB2YWx1ZSBhcyBvY3RhbC4KICAgICAqCiAgICAgKiBFeGNlbCBGdW5jdGlvbjoKICAgICAqICAgICAgICBERUMyT0NUKHhbLHBsYWNlc10pCiAgICAgKgogICAgICogQGFjY2VzcyAgICBwdWJsaWMKICAgICAqIEBjYXRlZ29yeSBFbmdpbmVlcmluZyBGdW5jdGlvbnMKICAgICAqIEBwYXJhbSAgICBzdHJpbmcgICAgICAgICR4ICAgICAgICBUaGUgZGVjaW1hbCBpbnRlZ2VyIHlvdSB3YW50IHRvIGNvbnZlcnQuIElmIG51bWJlciBpcyBuZWdhdGl2ZSwKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZXMgaXMgaWdub3JlZCBhbmQgREVDMk9DVCByZXR1cm5zIGEgMTAtY2hhcmFjdGVyICgzMC1iaXQpCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2N0YWwgbnVtYmVyIGluIHdoaWNoIHRoZSBtb3N0IHNpZ25pZmljYW50IGJpdCBpcyB0aGUgc2lnbiBiaXQuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIHJlbWFpbmluZyAyOSBiaXRzIGFyZSBtYWduaXR1ZGUgYml0cy4gTmVnYXRpdmUgbnVtYmVycyBhcmUKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXByZXNlbnRlZCB1c2luZyB0d28ncy1jb21wbGVtZW50IG5vdGF0aW9uLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIG51bWJlciA8IC01MzYsODcwLDkxMiBvciBpZiBudW1iZXIgPiA1MzYsODcwLDkxMSwgREVDMk9DVAogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybnMgdGhlICNOVU0hIGVycm9yIHZhbHVlLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIG51bWJlciBpcyBub25udW1lcmljLCBERUMyT0NUIHJldHVybnMgdGhlICNWQUxVRSEgZXJyb3IgdmFsdWUuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgREVDMk9DVCByZXF1aXJlcyBtb3JlIHRoYW4gcGxhY2VzIGNoYXJhY3RlcnMsIGl0IHJldHVybnMgdGhlCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI05VTSEgZXJyb3IgdmFsdWUuCiAgICAgKiBAcGFyYW0gICAgaW50ZWdlciAgICAgICAgJHBsYWNlcyAgICBUaGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgdG8gdXNlLiBJZiBwbGFjZXMgaXMgb21pdHRlZCwgREVDMk9DVCB1c2VzCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIG1pbmltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgbmVjZXNzYXJ5LiBQbGFjZXMgaXMgdXNlZnVsIGZvcgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmcgdGhlIHJldHVybiB2YWx1ZSB3aXRoIGxlYWRpbmcgMHMgKHplcm9zKS4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBwbGFjZXMgaXMgbm90IGFuIGludGVnZXIsIGl0IGlzIHRydW5jYXRlZC4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBwbGFjZXMgaXMgbm9ubnVtZXJpYywgREVDMk9DVCByZXR1cm5zIHRoZSAjVkFMVUUhIGVycm9yIHZhbHVlLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIHBsYWNlcyBpcyB6ZXJvIG9yIG5lZ2F0aXZlLCBERUMyT0NUIHJldHVybnMgdGhlICNOVU0hIGVycm9yIHZhbHVlLgogICAgICogQHJldHVybiAgICBzdHJpbmcKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBERUNUT09DVCgkeCwgJHBsYWNlcyA9IG51bGwpCiAgICB7CiAgICAgICAgJHggICAgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkeCk7CiAgICAgICAgJHBsYWNlcyAgICA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCRwbGFjZXMpOwoKICAgICAgICBpZiAoaXNfYm9vbCgkeCkpIHsKICAgICAgICAgICAgaWYgKFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6Z2V0Q29tcGF0aWJpbGl0eU1vZGUoKSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OkNPTVBBVElCSUxJVFlfT1BFTk9GRklDRSkgewogICAgICAgICAgICAgICAgJHggPSAoaW50KSAkeDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OlZBTFVFKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgJHggPSAoc3RyaW5nKSAkeDsKICAgICAgICBpZiAoc3RybGVuKCR4KSA+IHByZWdfbWF0Y2hfYWxsKCcvWy0wMTIzNDU2Nzg5Ll0vJywgJHgsICRvdXQpKSB7CiAgICAgICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OlZBTFVFKCk7CiAgICAgICAgfQogICAgICAgICR4ID0gKHN0cmluZykgZmxvb3IoJHgpOwogICAgICAgICRyID0gZGVjb2N0KCR4KTsKICAgICAgICBpZiAoc3RybGVuKCRyKSA9PSAxMSkgewogICAgICAgICAgICAvLyAgICBUd28ncyBDb21wbGVtZW50CiAgICAgICAgICAgICRyID0gc3Vic3RyKCRyLCAtMTApOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHNlbGY6Om5ickNvbnZlcnNpb25Gb3JtYXQoJHIsICRwbGFjZXMpOwogICAgfQoKCiAgICAvKioKICAgICAqIEhFWFRPQklOCiAgICAgKgogICAgICogUmV0dXJuIGEgaGV4IHZhbHVlIGFzIGJpbmFyeS4KICAgICAqCiAgICAgKiBFeGNlbCBGdW5jdGlvbjoKICAgICAqICAgICAgICBIRVgyQklOKHhbLHBsYWNlc10pCiAgICAgKgogICAgICogQGFjY2VzcyAgICBwdWJsaWMKICAgICAqIEBjYXRlZ29yeSBFbmdpbmVlcmluZyBGdW5jdGlvbnMKICAgICAqIEBwYXJhbSAgICBzdHJpbmcgICAgICAgICR4ICAgICAgICAgICAgdGhlIGhleGFkZWNpbWFsIG51bWJlciB5b3Ugd2FudCB0byBjb252ZXJ0LiBOdW1iZXIgY2Fubm90CiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW4gbW9yZSB0aGFuIDEwIGNoYXJhY3RlcnMuIFRoZSBtb3N0IHNpZ25pZmljYW50IGJpdCBvZgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1iZXIgaXMgdGhlIHNpZ24gYml0ICg0MHRoIGJpdCBmcm9tIHRoZSByaWdodCkuIFRoZSByZW1haW5pbmcKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOSBiaXRzIGFyZSBtYWduaXR1ZGUgYml0cy4gTmVnYXRpdmUgbnVtYmVycyBhcmUgcmVwcmVzZW50ZWQKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNpbmcgdHdvJ3MtY29tcGxlbWVudCBub3RhdGlvbi4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgbnVtYmVyIGlzIG5lZ2F0aXZlLCBIRVgyQklOIGlnbm9yZXMgcGxhY2VzIGFuZCByZXR1cm5zIGEKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAtY2hhcmFjdGVyIGJpbmFyeSBudW1iZXIuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIG51bWJlciBpcyBuZWdhdGl2ZSwgaXQgY2Fubm90IGJlIGxlc3MgdGhhbiBGRkZGRkZGRTAwLCBhbmQKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbnVtYmVyIGlzIHBvc2l0aXZlLCBpdCBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuIDFGRi4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgbnVtYmVyIGlzIG5vdCBhIHZhbGlkIGhleGFkZWNpbWFsIG51bWJlciwgSEVYMkJJTiByZXR1cm5zCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSAjTlVNISBlcnJvciB2YWx1ZS4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgSEVYMkJJTiByZXF1aXJlcyBtb3JlIHRoYW4gcGxhY2VzIGNoYXJhY3RlcnMsIGl0IHJldHVybnMKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlICNOVU0hIGVycm9yIHZhbHVlLgogICAgICogQHBhcmFtICAgIGludGVnZXIgICAgICAgICRwbGFjZXMgICAgICAgIFRoZSBudW1iZXIgb2YgY2hhcmFjdGVycyB0byB1c2UuIElmIHBsYWNlcyBpcyBvbWl0dGVkLAogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIRVgyQklOIHVzZXMgdGhlIG1pbmltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgbmVjZXNzYXJ5LiBQbGFjZXMKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXMgdXNlZnVsIGZvciBwYWRkaW5nIHRoZSByZXR1cm4gdmFsdWUgd2l0aCBsZWFkaW5nIDBzICh6ZXJvcykuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIHBsYWNlcyBpcyBub3QgYW4gaW50ZWdlciwgaXQgaXMgdHJ1bmNhdGVkLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBwbGFjZXMgaXMgbm9ubnVtZXJpYywgSEVYMkJJTiByZXR1cm5zIHRoZSAjVkFMVUUhIGVycm9yIHZhbHVlLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBwbGFjZXMgaXMgbmVnYXRpdmUsIEhFWDJCSU4gcmV0dXJucyB0aGUgI05VTSEgZXJyb3IgdmFsdWUuCiAgICAgKiBAcmV0dXJuICAgIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIEhFWFRPQklOKCR4LCAkcGxhY2VzID0gbnVsbCkKICAgIHsKICAgICAgICAkeCAgICA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCR4KTsKICAgICAgICAkcGxhY2VzICAgID0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpmbGF0dGVuU2luZ2xlVmFsdWUoJHBsYWNlcyk7CgogICAgICAgIGlmIChpc19ib29sKCR4KSkgewogICAgICAgICAgICByZXR1cm4gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpWQUxVRSgpOwogICAgICAgIH0KICAgICAgICAkeCA9IChzdHJpbmcpICR4OwogICAgICAgIGlmIChzdHJsZW4oJHgpID4gcHJlZ19tYXRjaF9hbGwoJy9bMDEyMzQ1Njc4OUFCQ0RFRl0vJywgc3RydG91cHBlcigkeCksICRvdXQpKSB7CiAgICAgICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6Ok5hTigpOwogICAgICAgIH0KICAgICAgICAkYmluVmFsID0gZGVjYmluKGhleGRlYygkeCkpOwoKICAgICAgICByZXR1cm4gc3Vic3RyKHNlbGY6Om5ickNvbnZlcnNpb25Gb3JtYXQoJGJpblZhbCwgJHBsYWNlcyksIC0xMCk7CiAgICB9CgoKICAgIC8qKgogICAgICogSEVYVE9ERUMKICAgICAqCiAgICAgKiBSZXR1cm4gYSBoZXggdmFsdWUgYXMgZGVjaW1hbC4KICAgICAqCiAgICAgKiBFeGNlbCBGdW5jdGlvbjoKICAgICAqICAgICAgICBIRVgyREVDKHgpCiAgICAgKgogICAgICogQGFjY2VzcyAgICBwdWJsaWMKICAgICAqIEBjYXRlZ29yeSBFbmdpbmVlcmluZyBGdW5jdGlvbnMKICAgICAqIEBwYXJhbSAgICBzdHJpbmcgICAgICAgICR4ICAgICAgICBUaGUgaGV4YWRlY2ltYWwgbnVtYmVyIHlvdSB3YW50IHRvIGNvbnZlcnQuIFRoaXMgbnVtYmVyIGNhbm5vdAogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW4gbW9yZSB0aGFuIDEwIGNoYXJhY3RlcnMgKDQwIGJpdHMpLiBUaGUgbW9zdCBzaWduaWZpY2FudAogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCBvZiBudW1iZXIgaXMgdGhlIHNpZ24gYml0LiBUaGUgcmVtYWluaW5nIDM5IGJpdHMgYXJlIG1hZ25pdHVkZQogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdHMuIE5lZ2F0aXZlIG51bWJlcnMgYXJlIHJlcHJlc2VudGVkIHVzaW5nIHR3bydzLWNvbXBsZW1lbnQKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RhdGlvbi4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBudW1iZXIgaXMgbm90IGEgdmFsaWQgaGV4YWRlY2ltYWwgbnVtYmVyLCBIRVgyREVDIHJldHVybnMgdGhlCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI05VTSEgZXJyb3IgdmFsdWUuCiAgICAgKiBAcmV0dXJuICAgIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIEhFWFRPREVDKCR4KQogICAgewogICAgICAgICR4ICAgID0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpmbGF0dGVuU2luZ2xlVmFsdWUoJHgpOwoKICAgICAgICBpZiAoaXNfYm9vbCgkeCkpIHsKICAgICAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6VkFMVUUoKTsKICAgICAgICB9CiAgICAgICAgJHggPSAoc3RyaW5nKSAkeDsKICAgICAgICBpZiAoc3RybGVuKCR4KSA+IHByZWdfbWF0Y2hfYWxsKCcvWzAxMjM0NTY3ODlBQkNERUZdLycsIHN0cnRvdXBwZXIoJHgpLCAkb3V0KSkgewogICAgICAgICAgICByZXR1cm4gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpOYU4oKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGhleGRlYygkeCk7CiAgICB9CgoKICAgIC8qKgogICAgICogSEVYVE9PQ1QKICAgICAqCiAgICAgKiBSZXR1cm4gYSBoZXggdmFsdWUgYXMgb2N0YWwuCiAgICAgKgogICAgICogRXhjZWwgRnVuY3Rpb246CiAgICAgKiAgICAgICAgSEVYMk9DVCh4WyxwbGFjZXNdKQogICAgICoKICAgICAqIEBhY2Nlc3MgICAgcHVibGljCiAgICAgKiBAY2F0ZWdvcnkgRW5naW5lZXJpbmcgRnVuY3Rpb25zCiAgICAgKiBAcGFyYW0gICAgc3RyaW5nICAgICAgICAkeCAgICAgICAgICAgIFRoZSBoZXhhZGVjaW1hbCBudW1iZXIgeW91IHdhbnQgdG8gY29udmVydC4gTnVtYmVyIGNhbm5vdAogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluIG1vcmUgdGhhbiAxMCBjaGFyYWN0ZXJzLiBUaGUgbW9zdCBzaWduaWZpY2FudCBiaXQgb2YKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyIGlzIHRoZSBzaWduIGJpdC4gVGhlIHJlbWFpbmluZyAzOSBiaXRzIGFyZSBtYWduaXR1ZGUKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0cy4gTmVnYXRpdmUgbnVtYmVycyBhcmUgcmVwcmVzZW50ZWQgdXNpbmcgdHdvJ3MtY29tcGxlbWVudAogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RhdGlvbi4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgbnVtYmVyIGlzIG5lZ2F0aXZlLCBIRVgyT0NUIGlnbm9yZXMgcGxhY2VzIGFuZCByZXR1cm5zIGEKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAtY2hhcmFjdGVyIG9jdGFsIG51bWJlci4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgbnVtYmVyIGlzIG5lZ2F0aXZlLCBpdCBjYW5ub3QgYmUgbGVzcyB0aGFuIEZGRTAwMDAwMDAsIGFuZAogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBudW1iZXIgaXMgcG9zaXRpdmUsIGl0IGNhbm5vdCBiZSBncmVhdGVyIHRoYW4gMUZGRkZGRkYuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIG51bWJlciBpcyBub3QgYSB2YWxpZCBoZXhhZGVjaW1hbCBudW1iZXIsIEhFWDJPQ1QgcmV0dXJucwogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgI05VTSEgZXJyb3IgdmFsdWUuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIEhFWDJPQ1QgcmVxdWlyZXMgbW9yZSB0aGFuIHBsYWNlcyBjaGFyYWN0ZXJzLCBpdCByZXR1cm5zCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSAjTlVNISBlcnJvciB2YWx1ZS4KICAgICAqIEBwYXJhbSAgICBpbnRlZ2VyICAgICAgICAkcGxhY2VzICAgICAgICBUaGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgdG8gdXNlLiBJZiBwbGFjZXMgaXMgb21pdHRlZCwgSEVYMk9DVAogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VzIHRoZSBtaW5pbXVtIG51bWJlciBvZiBjaGFyYWN0ZXJzIG5lY2Vzc2FyeS4gUGxhY2VzIGlzCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZWZ1bCBmb3IgcGFkZGluZyB0aGUgcmV0dXJuIHZhbHVlIHdpdGggbGVhZGluZyAwcyAoemVyb3MpLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBwbGFjZXMgaXMgbm90IGFuIGludGVnZXIsIGl0IGlzIHRydW5jYXRlZC4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgcGxhY2VzIGlzIG5vbm51bWVyaWMsIEhFWDJPQ1QgcmV0dXJucyB0aGUgI1ZBTFVFISBlcnJvcgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgcGxhY2VzIGlzIG5lZ2F0aXZlLCBIRVgyT0NUIHJldHVybnMgdGhlICNOVU0hIGVycm9yIHZhbHVlLgogICAgICogQHJldHVybiAgICBzdHJpbmcKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBIRVhUT09DVCgkeCwgJHBsYWNlcyA9IG51bGwpCiAgICB7CiAgICAgICAgJHggICAgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkeCk7CiAgICAgICAgJHBsYWNlcyAgICA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCRwbGFjZXMpOwoKICAgICAgICBpZiAoaXNfYm9vbCgkeCkpIHsKICAgICAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6VkFMVUUoKTsKICAgICAgICB9CiAgICAgICAgJHggPSAoc3RyaW5nKSAkeDsKICAgICAgICBpZiAoc3RybGVuKCR4KSA+IHByZWdfbWF0Y2hfYWxsKCcvWzAxMjM0NTY3ODlBQkNERUZdLycsIHN0cnRvdXBwZXIoJHgpLCAkb3V0KSkgewogICAgICAgICAgICByZXR1cm4gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpOYU4oKTsKICAgICAgICB9CiAgICAgICAgJG9jdFZhbCA9IGRlY29jdChoZXhkZWMoJHgpKTsKCiAgICAgICAgcmV0dXJuIHNlbGY6Om5ickNvbnZlcnNpb25Gb3JtYXQoJG9jdFZhbCwgJHBsYWNlcyk7CiAgICB9ICAgIC8vICAgIGZ1bmN0aW9uIEhFWFRPT0NUKCkKCgogICAgLyoqCiAgICAgKiBPQ1RUT0JJTgogICAgICoKICAgICAqIFJldHVybiBhbiBvY3RhbCB2YWx1ZSBhcyBiaW5hcnkuCiAgICAgKgogICAgICogRXhjZWwgRnVuY3Rpb246CiAgICAgKiAgICAgICAgT0NUMkJJTih4WyxwbGFjZXNdKQogICAgICoKICAgICAqIEBhY2Nlc3MgICAgcHVibGljCiAgICAgKiBAY2F0ZWdvcnkgRW5naW5lZXJpbmcgRnVuY3Rpb25zCiAgICAgKiBAcGFyYW0gICAgc3RyaW5nICAgICAgICAkeCAgICAgICAgICAgIFRoZSBvY3RhbCBudW1iZXIgeW91IHdhbnQgdG8gY29udmVydC4gTnVtYmVyIG1heSBub3QKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbiBtb3JlIHRoYW4gMTAgY2hhcmFjdGVycy4gVGhlIG1vc3Qgc2lnbmlmaWNhbnQKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0IG9mIG51bWJlciBpcyB0aGUgc2lnbiBiaXQuIFRoZSByZW1haW5pbmcgMjkgYml0cwogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmUgbWFnbml0dWRlIGJpdHMuIE5lZ2F0aXZlIG51bWJlcnMgYXJlIHJlcHJlc2VudGVkCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzaW5nIHR3bydzLWNvbXBsZW1lbnQgbm90YXRpb24uCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIG51bWJlciBpcyBuZWdhdGl2ZSwgT0NUMkJJTiBpZ25vcmVzIHBsYWNlcyBhbmQgcmV0dXJucwogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhIDEwLWNoYXJhY3RlciBiaW5hcnkgbnVtYmVyLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBudW1iZXIgaXMgbmVnYXRpdmUsIGl0IGNhbm5vdCBiZSBsZXNzIHRoYW4gNzc3Nzc3NzAwMCwKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5kIGlmIG51bWJlciBpcyBwb3NpdGl2ZSwgaXQgY2Fubm90IGJlIGdyZWF0ZXIgdGhhbiA3NzcuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIG51bWJlciBpcyBub3QgYSB2YWxpZCBvY3RhbCBudW1iZXIsIE9DVDJCSU4gcmV0dXJucwogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgI05VTSEgZXJyb3IgdmFsdWUuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIE9DVDJCSU4gcmVxdWlyZXMgbW9yZSB0aGFuIHBsYWNlcyBjaGFyYWN0ZXJzLCBpdAogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5zIHRoZSAjTlVNISBlcnJvciB2YWx1ZS4KICAgICAqIEBwYXJhbSAgICBpbnRlZ2VyICAgICAgICAkcGxhY2VzICAgICAgICBUaGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgdG8gdXNlLiBJZiBwbGFjZXMgaXMgb21pdHRlZCwKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT0NUMkJJTiB1c2VzIHRoZSBtaW5pbXVtIG51bWJlciBvZiBjaGFyYWN0ZXJzIG5lY2Vzc2FyeS4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGxhY2VzIGlzIHVzZWZ1bCBmb3IgcGFkZGluZyB0aGUgcmV0dXJuIHZhbHVlIHdpdGgKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhZGluZyAwcyAoemVyb3MpLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBwbGFjZXMgaXMgbm90IGFuIGludGVnZXIsIGl0IGlzIHRydW5jYXRlZC4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgcGxhY2VzIGlzIG5vbm51bWVyaWMsIE9DVDJCSU4gcmV0dXJucyB0aGUgI1ZBTFVFIQogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvciB2YWx1ZS4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgcGxhY2VzIGlzIG5lZ2F0aXZlLCBPQ1QyQklOIHJldHVybnMgdGhlICNOVU0hIGVycm9yCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLgogICAgICogQHJldHVybiAgICBzdHJpbmcKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBPQ1RUT0JJTigkeCwgJHBsYWNlcyA9IG51bGwpCiAgICB7CiAgICAgICAgJHggICAgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkeCk7CiAgICAgICAgJHBsYWNlcyAgICA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCRwbGFjZXMpOwoKICAgICAgICBpZiAoaXNfYm9vbCgkeCkpIHsKICAgICAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6VkFMVUUoKTsKICAgICAgICB9CiAgICAgICAgJHggPSAoc3RyaW5nKSAkeDsKICAgICAgICBpZiAocHJlZ19tYXRjaF9hbGwoJy9bMDEyMzQ1NjddLycsICR4LCAkb3V0KSAhPSBzdHJsZW4oJHgpKSB7CiAgICAgICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6Ok5hTigpOwogICAgICAgIH0KICAgICAgICAkciA9IGRlY2JpbihvY3RkZWMoJHgpKTsKCiAgICAgICAgcmV0dXJuIHNlbGY6Om5ickNvbnZlcnNpb25Gb3JtYXQoJHIsICRwbGFjZXMpOwogICAgfQoKCiAgICAvKioKICAgICAqIE9DVFRPREVDCiAgICAgKgogICAgICogUmV0dXJuIGFuIG9jdGFsIHZhbHVlIGFzIGRlY2ltYWwuCiAgICAgKgogICAgICogRXhjZWwgRnVuY3Rpb246CiAgICAgKiAgICAgICAgT0NUMkRFQyh4KQogICAgICoKICAgICAqIEBhY2Nlc3MgICAgcHVibGljCiAgICAgKiBAY2F0ZWdvcnkgRW5naW5lZXJpbmcgRnVuY3Rpb25zCiAgICAgKiBAcGFyYW0gICAgc3RyaW5nICAgICAgICAkeCAgICAgICAgVGhlIG9jdGFsIG51bWJlciB5b3Ugd2FudCB0byBjb252ZXJ0LiBOdW1iZXIgbWF5IG5vdCBjb250YWluCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9yZSB0aGFuIDEwIG9jdGFsIGNoYXJhY3RlcnMgKDMwIGJpdHMpLiBUaGUgbW9zdCBzaWduaWZpY2FudAogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCBvZiBudW1iZXIgaXMgdGhlIHNpZ24gYml0LiBUaGUgcmVtYWluaW5nIDI5IGJpdHMgYXJlCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFnbml0dWRlIGJpdHMuIE5lZ2F0aXZlIG51bWJlcnMgYXJlIHJlcHJlc2VudGVkIHVzaW5nCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHdvJ3MtY29tcGxlbWVudCBub3RhdGlvbi4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBudW1iZXIgaXMgbm90IGEgdmFsaWQgb2N0YWwgbnVtYmVyLCBPQ1QyREVDIHJldHVybnMgdGhlCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI05VTSEgZXJyb3IgdmFsdWUuCiAgICAgKiBAcmV0dXJuICAgIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIE9DVFRPREVDKCR4KQogICAgewogICAgICAgICR4ICAgID0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpmbGF0dGVuU2luZ2xlVmFsdWUoJHgpOwoKICAgICAgICBpZiAoaXNfYm9vbCgkeCkpIHsKICAgICAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6VkFMVUUoKTsKICAgICAgICB9CiAgICAgICAgJHggPSAoc3RyaW5nKSAkeDsKICAgICAgICBpZiAocHJlZ19tYXRjaF9hbGwoJy9bMDEyMzQ1NjddLycsICR4LCAkb3V0KSAhPSBzdHJsZW4oJHgpKSB7CiAgICAgICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6Ok5hTigpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gb2N0ZGVjKCR4KTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBPQ1RUT0hFWAogICAgICoKICAgICAqIFJldHVybiBhbiBvY3RhbCB2YWx1ZSBhcyBoZXguCiAgICAgKgogICAgICogRXhjZWwgRnVuY3Rpb246CiAgICAgKiAgICAgICAgT0NUMkhFWCh4WyxwbGFjZXNdKQogICAgICoKICAgICAqIEBhY2Nlc3MgICAgcHVibGljCiAgICAgKiBAY2F0ZWdvcnkgRW5naW5lZXJpbmcgRnVuY3Rpb25zCiAgICAgKiBAcGFyYW0gICAgc3RyaW5nICAgICAgICAkeCAgICAgICAgICAgIFRoZSBvY3RhbCBudW1iZXIgeW91IHdhbnQgdG8gY29udmVydC4gTnVtYmVyIG1heSBub3QgY29udGFpbgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3JlIHRoYW4gMTAgb2N0YWwgY2hhcmFjdGVycyAoMzAgYml0cykuIFRoZSBtb3N0IHNpZ25pZmljYW50CiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCBvZiBudW1iZXIgaXMgdGhlIHNpZ24gYml0LiBUaGUgcmVtYWluaW5nIDI5IGJpdHMgYXJlCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hZ25pdHVkZSBiaXRzLiBOZWdhdGl2ZSBudW1iZXJzIGFyZSByZXByZXNlbnRlZCB1c2luZwogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0d28ncy1jb21wbGVtZW50IG5vdGF0aW9uLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBudW1iZXIgaXMgbmVnYXRpdmUsIE9DVDJIRVggaWdub3JlcyBwbGFjZXMgYW5kIHJldHVybnMgYQogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMC1jaGFyYWN0ZXIgaGV4YWRlY2ltYWwgbnVtYmVyLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBudW1iZXIgaXMgbm90IGEgdmFsaWQgb2N0YWwgbnVtYmVyLCBPQ1QySEVYIHJldHVybnMgdGhlCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNOVU0hIGVycm9yIHZhbHVlLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBPQ1QySEVYIHJlcXVpcmVzIG1vcmUgdGhhbiBwbGFjZXMgY2hhcmFjdGVycywgaXQgcmV0dXJucwogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgI05VTSEgZXJyb3IgdmFsdWUuCiAgICAgKiBAcGFyYW0gICAgaW50ZWdlciAgICAgICAgJHBsYWNlcyAgICAgICAgVGhlIG51bWJlciBvZiBjaGFyYWN0ZXJzIHRvIHVzZS4gSWYgcGxhY2VzIGlzIG9taXR0ZWQsIE9DVDJIRVgKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcyB0aGUgbWluaW11bSBudW1iZXIgb2YgY2hhcmFjdGVycyBuZWNlc3NhcnkuIFBsYWNlcyBpcyB1c2VmdWwKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHBhZGRpbmcgdGhlIHJldHVybiB2YWx1ZSB3aXRoIGxlYWRpbmcgMHMgKHplcm9zKS4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgcGxhY2VzIGlzIG5vdCBhbiBpbnRlZ2VyLCBpdCBpcyB0cnVuY2F0ZWQuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIHBsYWNlcyBpcyBub25udW1lcmljLCBPQ1QySEVYIHJldHVybnMgdGhlICNWQUxVRSEgZXJyb3IgdmFsdWUuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIHBsYWNlcyBpcyBuZWdhdGl2ZSwgT0NUMkhFWCByZXR1cm5zIHRoZSAjTlVNISBlcnJvciB2YWx1ZS4KICAgICAqIEByZXR1cm4gICAgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gT0NUVE9IRVgoJHgsICRwbGFjZXMgPSBudWxsKQogICAgewogICAgICAgICR4ICAgID0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpmbGF0dGVuU2luZ2xlVmFsdWUoJHgpOwogICAgICAgICRwbGFjZXMgICAgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkcGxhY2VzKTsKCiAgICAgICAgaWYgKGlzX2Jvb2woJHgpKSB7CiAgICAgICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OlZBTFVFKCk7CiAgICAgICAgfQogICAgICAgICR4ID0gKHN0cmluZykgJHg7CiAgICAgICAgaWYgKHByZWdfbWF0Y2hfYWxsKCcvWzAxMjM0NTY3XS8nLCAkeCwgJG91dCkgIT0gc3RybGVuKCR4KSkgewogICAgICAgICAgICByZXR1cm4gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpOYU4oKTsKICAgICAgICB9CiAgICAgICAgJGhleFZhbCA9IHN0cnRvdXBwZXIoZGVjaGV4KG9jdGRlYygkeCkpKTsKCiAgICAgICAgcmV0dXJuIHNlbGY6Om5ickNvbnZlcnNpb25Gb3JtYXQoJGhleFZhbCwgJHBsYWNlcyk7CiAgICB9CgoKICAgIC8qKgogICAgICogQ09NUExFWAogICAgICoKICAgICAqIENvbnZlcnRzIHJlYWwgYW5kIGltYWdpbmFyeSBjb2VmZmljaWVudHMgaW50byBhIGNvbXBsZXggbnVtYmVyIG9mIHRoZSBmb3JtIHggKyB5aSBvciB4ICsgeWouCiAgICAgKgogICAgICogRXhjZWwgRnVuY3Rpb246CiAgICAgKiAgICAgICAgQ09NUExFWChyZWFsTnVtYmVyLGltYWdpbmFyeVsscGxhY2VzXSkKICAgICAqCiAgICAgKiBAYWNjZXNzICAgIHB1YmxpYwogICAgICogQGNhdGVnb3J5IEVuZ2luZWVyaW5nIEZ1bmN0aW9ucwogICAgICogQHBhcmFtICAgIGZsb2F0ICAgICAgICAkcmVhbE51bWJlciAgICAgICAgVGhlIHJlYWwgY29lZmZpY2llbnQgb2YgdGhlIGNvbXBsZXggbnVtYmVyLgogICAgICogQHBhcmFtICAgIGZsb2F0ICAgICAgICAkaW1hZ2luYXJ5ICAgICAgICBUaGUgaW1hZ2luYXJ5IGNvZWZmaWNpZW50IG9mIHRoZSBjb21wbGV4IG51bWJlci4KICAgICAqIEBwYXJhbSAgICBzdHJpbmcgICAgICAgICRzdWZmaXggICAgICAgICAgICBUaGUgc3VmZml4IGZvciB0aGUgaW1hZ2luYXJ5IGNvbXBvbmVudCBvZiB0aGUgY29tcGxleCBudW1iZXIuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBvbWl0dGVkLCB0aGUgc3VmZml4IGlzIGFzc3VtZWQgdG8gYmUgImkiLgogICAgICogQHJldHVybiAgICBzdHJpbmcKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBDT01QTEVYKCRyZWFsTnVtYmVyID0gMC4wLCAkaW1hZ2luYXJ5ID0gMC4wLCAkc3VmZml4ID0gJ2knKQogICAgewogICAgICAgICRyZWFsTnVtYmVyID0gKGlzX251bGwoJHJlYWxOdW1iZXIpKSA\/IDAuMCA6IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCRyZWFsTnVtYmVyKTsKICAgICAgICAkaW1hZ2luYXJ5ICA9IChpc19udWxsKCRpbWFnaW5hcnkpKSAgPyAwLjAgOiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkaW1hZ2luYXJ5KTsKICAgICAgICAkc3VmZml4ICAgICA9IChpc19udWxsKCRzdWZmaXgpKSAgICAgPyAnaScgOiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkc3VmZml4KTsKCiAgICAgICAgaWYgKCgoaXNfbnVtZXJpYygkcmVhbE51bWJlcikpICYmIChpc19udW1lcmljKCRpbWFnaW5hcnkpKSkgJiYKICAgICAgICAgICAgKCgkc3VmZml4ID09ICdpJykgfHwgKCRzdWZmaXggPT0gJ2onKSB8fCAoJHN1ZmZpeCA9PSAnJykpKSB7CiAgICAgICAgICAgICRyZWFsTnVtYmVyICAgID0gKGZsb2F0KSAkcmVhbE51bWJlcjsKICAgICAgICAgICAgJGltYWdpbmFyeSAgICA9IChmbG9hdCkgJGltYWdpbmFyeTsKCiAgICAgICAgICAgIGlmICgkc3VmZml4ID09ICcnKSB7CiAgICAgICAgICAgICAgICAkc3VmZml4ID0gJ2knOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgkcmVhbE51bWJlciA9PSAwLjApIHsKICAgICAgICAgICAgICAgIGlmICgkaW1hZ2luYXJ5ID09IDAuMCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAoc3RyaW5nKSAnMCc7CiAgICAgICAgICAgICAgICB9IGVsc2VpZiAoJGltYWdpbmFyeSA9PSAxLjApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHN0cmluZykgJHN1ZmZpeDsKICAgICAgICAgICAgICAgIH0gZWxzZWlmICgkaW1hZ2luYXJ5ID09IC0xLjApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHN0cmluZykgJy0nLiRzdWZmaXg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gKHN0cmluZykgJGltYWdpbmFyeS4kc3VmZml4OwogICAgICAgICAgICB9IGVsc2VpZiAoJGltYWdpbmFyeSA9PSAwLjApIHsKICAgICAgICAgICAgICAgIHJldHVybiAoc3RyaW5nKSAkcmVhbE51bWJlcjsKICAgICAgICAgICAgfSBlbHNlaWYgKCRpbWFnaW5hcnkgPT0gMS4wKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKHN0cmluZykgJHJlYWxOdW1iZXIuJysnLiRzdWZmaXg7CiAgICAgICAgICAgIH0gZWxzZWlmICgkaW1hZ2luYXJ5ID09IC0xLjApIHsKICAgICAgICAgICAgICAgIHJldHVybiAoc3RyaW5nKSAkcmVhbE51bWJlci4nLScuJHN1ZmZpeDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoJGltYWdpbmFyeSA+IDApIHsKICAgICAgICAgICAgICAgICRpbWFnaW5hcnkgPSAoc3RyaW5nKSAnKycuJGltYWdpbmFyeTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gKHN0cmluZykgJHJlYWxOdW1iZXIuJGltYWdpbmFyeS4kc3VmZml4OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6VkFMVUUoKTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBJTUFHSU5BUlkKICAgICAqCiAgICAgKiBSZXR1cm5zIHRoZSBpbWFnaW5hcnkgY29lZmZpY2llbnQgb2YgYSBjb21wbGV4IG51bWJlciBpbiB4ICsgeWkgb3IgeCArIHlqIHRleHQgZm9ybWF0LgogICAgICoKICAgICAqIEV4Y2VsIEZ1bmN0aW9uOgogICAgICogICAgICAgIElNQUdJTkFSWShjb21wbGV4TnVtYmVyKQogICAgICoKICAgICAqIEBhY2Nlc3MgICAgcHVibGljCiAgICAgKiBAY2F0ZWdvcnkgRW5naW5lZXJpbmcgRnVuY3Rpb25zCiAgICAgKiBAcGFyYW0gICAgc3RyaW5nICAgICAgICAkY29tcGxleE51bWJlciAgICBUaGUgY29tcGxleCBudW1iZXIgZm9yIHdoaWNoIHlvdSB3YW50IHRoZSBpbWFnaW5hcnkKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudC4KICAgICAqIEByZXR1cm4gICAgZmxvYXQKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBJTUFHSU5BUlkoJGNvbXBsZXhOdW1iZXIpCiAgICB7CiAgICAgICAgJGNvbXBsZXhOdW1iZXIgICAgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkY29tcGxleE51bWJlcik7CgogICAgICAgICRwYXJzZWRDb21wbGV4ID0gc2VsZjo6cGFyc2VDb21wbGV4KCRjb21wbGV4TnVtYmVyKTsKICAgICAgICByZXR1cm4gJHBhcnNlZENvbXBsZXhbJ2ltYWdpbmFyeSddOwogICAgfQoKCiAgICAvKioKICAgICAqIElNUkVBTAogICAgICoKICAgICAqIFJldHVybnMgdGhlIHJlYWwgY29lZmZpY2llbnQgb2YgYSBjb21wbGV4IG51bWJlciBpbiB4ICsgeWkgb3IgeCArIHlqIHRleHQgZm9ybWF0LgogICAgICoKICAgICAqIEV4Y2VsIEZ1bmN0aW9uOgogICAgICogICAgICAgIElNUkVBTChjb21wbGV4TnVtYmVyKQogICAgICoKICAgICAqIEBhY2Nlc3MgICAgcHVibGljCiAgICAgKiBAY2F0ZWdvcnkgRW5naW5lZXJpbmcgRnVuY3Rpb25zCiAgICAgKiBAcGFyYW0gICAgc3RyaW5nICAgICAgICAkY29tcGxleE51bWJlciAgICBUaGUgY29tcGxleCBudW1iZXIgZm9yIHdoaWNoIHlvdSB3YW50IHRoZSByZWFsIGNvZWZmaWNpZW50LgogICAgICogQHJldHVybiAgICBmbG9hdAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIElNUkVBTCgkY29tcGxleE51bWJlcikKICAgIHsKICAgICAgICAkY29tcGxleE51bWJlciAgICA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCRjb21wbGV4TnVtYmVyKTsKCiAgICAgICAgJHBhcnNlZENvbXBsZXggPSBzZWxmOjpwYXJzZUNvbXBsZXgoJGNvbXBsZXhOdW1iZXIpOwogICAgICAgIHJldHVybiAkcGFyc2VkQ29tcGxleFsncmVhbCddOwogICAgfQoKCiAgICAvKioKICAgICAqIElNQUJTCiAgICAgKgogICAgICogUmV0dXJucyB0aGUgYWJzb2x1dGUgdmFsdWUgKG1vZHVsdXMpIG9mIGEgY29tcGxleCBudW1iZXIgaW4geCArIHlpIG9yIHggKyB5aiB0ZXh0IGZvcm1hdC4KICAgICAqCiAgICAgKiBFeGNlbCBGdW5jdGlvbjoKICAgICAqICAgICAgICBJTUFCUyhjb21wbGV4TnVtYmVyKQogICAgICoKICAgICAqIEBwYXJhbSAgICBzdHJpbmcgICAgICAgICRjb21wbGV4TnVtYmVyICAgIFRoZSBjb21wbGV4IG51bWJlciBmb3Igd2hpY2ggeW91IHdhbnQgdGhlIGFic29sdXRlIHZhbHVlLgogICAgICogQHJldHVybiAgICBmbG9hdAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIElNQUJTKCRjb21wbGV4TnVtYmVyKQogICAgewogICAgICAgICRjb21wbGV4TnVtYmVyID0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpmbGF0dGVuU2luZ2xlVmFsdWUoJGNvbXBsZXhOdW1iZXIpOwoKICAgICAgICAkcGFyc2VkQ29tcGxleCA9IHNlbGY6OnBhcnNlQ29tcGxleCgkY29tcGxleE51bWJlcik7CgogICAgICAgIHJldHVybiBzcXJ0KAogICAgICAgICAgICAoJHBhcnNlZENvbXBsZXhbJ3JlYWwnXSAqICRwYXJzZWRDb21wbGV4WydyZWFsJ10pICsKICAgICAgICAgICAgKCRwYXJzZWRDb21wbGV4WydpbWFnaW5hcnknXSAqICRwYXJzZWRDb21wbGV4WydpbWFnaW5hcnknXSkKICAgICAgICApOwogICAgfQoKCiAgICAvKioKICAgICAqIElNQVJHVU1FTlQKICAgICAqCiAgICAgKiBSZXR1cm5zIHRoZSBhcmd1bWVudCB0aGV0YSBvZiBhIGNvbXBsZXggbnVtYmVyLCBpLmUuIHRoZSBhbmdsZSBpbiByYWRpYW5zIGZyb20gdGhlIHJlYWwKICAgICAqIGF4aXMgdG8gdGhlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBudW1iZXIgaW4gcG9sYXIgY29vcmRpbmF0ZXMuCiAgICAgKgogICAgICogRXhjZWwgRnVuY3Rpb246CiAgICAgKiAgICAgICAgSU1BUkdVTUVOVChjb21wbGV4TnVtYmVyKQogICAgICoKICAgICAqIEBwYXJhbSAgICBzdHJpbmcgICAgICAgICRjb21wbGV4TnVtYmVyICAgIFRoZSBjb21wbGV4IG51bWJlciBmb3Igd2hpY2ggeW91IHdhbnQgdGhlIGFyZ3VtZW50IHRoZXRhLgogICAgICogQHJldHVybiAgICBmbG9hdAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIElNQVJHVU1FTlQoJGNvbXBsZXhOdW1iZXIpCiAgICB7CiAgICAgICAgJGNvbXBsZXhOdW1iZXIgICAgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkY29tcGxleE51bWJlcik7CgogICAgICAgICRwYXJzZWRDb21wbGV4ID0gc2VsZjo6cGFyc2VDb21wbGV4KCRjb21wbGV4TnVtYmVyKTsKCiAgICAgICAgaWYgKCRwYXJzZWRDb21wbGV4WydyZWFsJ10gPT0gMC4wKSB7CiAgICAgICAgICAgIGlmICgkcGFyc2VkQ29tcGxleFsnaW1hZ2luYXJ5J10gPT0gMC4wKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMC4wOwogICAgICAgICAgICB9IGVsc2VpZiAoJHBhcnNlZENvbXBsZXhbJ2ltYWdpbmFyeSddIDwgMC4wKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gTV9QSSAvIC0yOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIE1fUEkgLyAyOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlaWYgKCRwYXJzZWRDb21wbGV4WydyZWFsJ10gPiAwLjApIHsKICAgICAgICAgICAgcmV0dXJuIGF0YW4oJHBhcnNlZENvbXBsZXhbJ2ltYWdpbmFyeSddIC8gJHBhcnNlZENvbXBsZXhbJ3JlYWwnXSk7CiAgICAgICAgfSBlbHNlaWYgKCRwYXJzZWRDb21wbGV4WydpbWFnaW5hcnknXSA8IDAuMCkgewogICAgICAgICAgICByZXR1cm4gMCAtIChNX1BJIC0gYXRhbihhYnMoJHBhcnNlZENvbXBsZXhbJ2ltYWdpbmFyeSddKSAvIGFicygkcGFyc2VkQ29tcGxleFsncmVhbCddKSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBNX1BJIC0gYXRhbigkcGFyc2VkQ29tcGxleFsnaW1hZ2luYXJ5J10gLyBhYnMoJHBhcnNlZENvbXBsZXhbJ3JlYWwnXSkpOwogICAgICAgIH0KICAgIH0KCgogICAgLyoqCiAgICAgKiBJTUNPTkpVR0FURQogICAgICoKICAgICAqIFJldHVybnMgdGhlIGNvbXBsZXggY29uanVnYXRlIG9mIGEgY29tcGxleCBudW1iZXIgaW4geCArIHlpIG9yIHggKyB5aiB0ZXh0IGZvcm1hdC4KICAgICAqCiAgICAgKiBFeGNlbCBGdW5jdGlvbjoKICAgICAqICAgICAgICBJTUNPTkpVR0FURShjb21wbGV4TnVtYmVyKQogICAgICoKICAgICAqIEBwYXJhbSAgICBzdHJpbmcgICAgICAgICRjb21wbGV4TnVtYmVyICAgIFRoZSBjb21wbGV4IG51bWJlciBmb3Igd2hpY2ggeW91IHdhbnQgdGhlIGNvbmp1Z2F0ZS4KICAgICAqIEByZXR1cm4gICAgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gSU1DT05KVUdBVEUoJGNvbXBsZXhOdW1iZXIpCiAgICB7CiAgICAgICAgJGNvbXBsZXhOdW1iZXIgICAgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkY29tcGxleE51bWJlcik7CgogICAgICAgICRwYXJzZWRDb21wbGV4ID0gc2VsZjo6cGFyc2VDb21wbGV4KCRjb21wbGV4TnVtYmVyKTsKCiAgICAgICAgaWYgKCRwYXJzZWRDb21wbGV4WydpbWFnaW5hcnknXSA9PSAwLjApIHsKICAgICAgICAgICAgcmV0dXJuICRwYXJzZWRDb21wbGV4WydyZWFsJ107CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHNlbGY6OmNsZWFuQ29tcGxleCgKICAgICAgICAgICAgICAgIHNlbGY6OkNPTVBMRVgoCiAgICAgICAgICAgICAgICAgICAgJHBhcnNlZENvbXBsZXhbJ3JlYWwnXSwKICAgICAgICAgICAgICAgICAgICAwIC0gJHBhcnNlZENvbXBsZXhbJ2ltYWdpbmFyeSddLAogICAgICAgICAgICAgICAgICAgICRwYXJzZWRDb21wbGV4WydzdWZmaXgnXQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0KCgogICAgLyoqCiAgICAgKiBJTUNPUwogICAgICoKICAgICAqIFJldHVybnMgdGhlIGNvc2luZSBvZiBhIGNvbXBsZXggbnVtYmVyIGluIHggKyB5aSBvciB4ICsgeWogdGV4dCBmb3JtYXQuCiAgICAgKgogICAgICogRXhjZWwgRnVuY3Rpb246CiAgICAgKiAgICAgICAgSU1DT1MoY29tcGxleE51bWJlcikKICAgICAqCiAgICAgKiBAcGFyYW0gICAgc3RyaW5nICAgICAgICAkY29tcGxleE51bWJlciAgICBUaGUgY29tcGxleCBudW1iZXIgZm9yIHdoaWNoIHlvdSB3YW50IHRoZSBjb3NpbmUuCiAgICAgKiBAcmV0dXJuICAgIHN0cmluZ3xmbG9hdAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIElNQ09TKCRjb21wbGV4TnVtYmVyKQogICAgewogICAgICAgICRjb21wbGV4TnVtYmVyICAgID0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpmbGF0dGVuU2luZ2xlVmFsdWUoJGNvbXBsZXhOdW1iZXIpOwoKICAgICAgICAkcGFyc2VkQ29tcGxleCA9IHNlbGY6OnBhcnNlQ29tcGxleCgkY29tcGxleE51bWJlcik7CgogICAgICAgIGlmICgkcGFyc2VkQ29tcGxleFsnaW1hZ2luYXJ5J10gPT0gMC4wKSB7CiAgICAgICAgICAgIHJldHVybiBjb3MoJHBhcnNlZENvbXBsZXhbJ3JlYWwnXSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHNlbGY6OklNQ09OSlVHQVRFKAogICAgICAgICAgICAgICAgc2VsZjo6Q09NUExFWCgKICAgICAgICAgICAgICAgICAgICBjb3MoJHBhcnNlZENvbXBsZXhbJ3JlYWwnXSkgKiBjb3NoKCRwYXJzZWRDb21wbGV4WydpbWFnaW5hcnknXSksCiAgICAgICAgICAgICAgICAgICAgc2luKCRwYXJzZWRDb21wbGV4WydyZWFsJ10pICogc2luaCgkcGFyc2VkQ29tcGxleFsnaW1hZ2luYXJ5J10pLAogICAgICAgICAgICAgICAgICAgICRwYXJzZWRDb21wbGV4WydzdWZmaXgnXQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0KCgogICAgLyoqCiAgICAgKiBJTVNJTgogICAgICoKICAgICAqIFJldHVybnMgdGhlIHNpbmUgb2YgYSBjb21wbGV4IG51bWJlciBpbiB4ICsgeWkgb3IgeCArIHlqIHRleHQgZm9ybWF0LgogICAgICoKICAgICAqIEV4Y2VsIEZ1bmN0aW9uOgogICAgICogICAgICAgIElNU0lOKGNvbXBsZXhOdW1iZXIpCiAgICAgKgogICAgICogQHBhcmFtICAgIHN0cmluZyAgICAgICAgJGNvbXBsZXhOdW1iZXIgICAgVGhlIGNvbXBsZXggbnVtYmVyIGZvciB3aGljaCB5b3Ugd2FudCB0aGUgc2luZS4KICAgICAqIEByZXR1cm4gICAgc3RyaW5nfGZsb2F0CiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gSU1TSU4oJGNvbXBsZXhOdW1iZXIpCiAgICB7CiAgICAgICAgJGNvbXBsZXhOdW1iZXIgICAgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkY29tcGxleE51bWJlcik7CgogICAgICAgICRwYXJzZWRDb21wbGV4ID0gc2VsZjo6cGFyc2VDb21wbGV4KCRjb21wbGV4TnVtYmVyKTsKCiAgICAgICAgaWYgKCRwYXJzZWRDb21wbGV4WydpbWFnaW5hcnknXSA9PSAwLjApIHsKICAgICAgICAgICAgcmV0dXJuIHNpbigkcGFyc2VkQ29tcGxleFsncmVhbCddKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gc2VsZjo6Q09NUExFWCgKICAgICAgICAgICAgICAgIHNpbigkcGFyc2VkQ29tcGxleFsncmVhbCddKSAqIGNvc2goJHBhcnNlZENvbXBsZXhbJ2ltYWdpbmFyeSddKSwKICAgICAgICAgICAgICAgIGNvcygkcGFyc2VkQ29tcGxleFsncmVhbCddKSAqIHNpbmgoJHBhcnNlZENvbXBsZXhbJ2ltYWdpbmFyeSddKSwKICAgICAgICAgICAgICAgICRwYXJzZWRDb21wbGV4WydzdWZmaXgnXQogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0KCgogICAgLyoqCiAgICAgKiBJTVNRUlQKICAgICAqCiAgICAgKiBSZXR1cm5zIHRoZSBzcXVhcmUgcm9vdCBvZiBhIGNvbXBsZXggbnVtYmVyIGluIHggKyB5aSBvciB4ICsgeWogdGV4dCBmb3JtYXQuCiAgICAgKgogICAgICogRXhjZWwgRnVuY3Rpb246CiAgICAgKiAgICAgICAgSU1TUVJUKGNvbXBsZXhOdW1iZXIpCiAgICAgKgogICAgICogQHBhcmFtICAgIHN0cmluZyAgICAgICAgJGNvbXBsZXhOdW1iZXIgICAgVGhlIGNvbXBsZXggbnVtYmVyIGZvciB3aGljaCB5b3Ugd2FudCB0aGUgc3F1YXJlIHJvb3QuCiAgICAgKiBAcmV0dXJuICAgIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIElNU1FSVCgkY29tcGxleE51bWJlcikKICAgIHsKICAgICAgICAkY29tcGxleE51bWJlciAgICA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCRjb21wbGV4TnVtYmVyKTsKCiAgICAgICAgJHBhcnNlZENvbXBsZXggPSBzZWxmOjpwYXJzZUNvbXBsZXgoJGNvbXBsZXhOdW1iZXIpOwoKICAgICAgICAkdGhldGEgPSBzZWxmOjpJTUFSR1VNRU5UKCRjb21wbGV4TnVtYmVyKTsKICAgICAgICAkZDEgPSBjb3MoJHRoZXRhIC8gMik7CiAgICAgICAgJGQyID0gc2luKCR0aGV0YSAvIDIpOwogICAgICAgICRyID0gc3FydChzcXJ0KCgkcGFyc2VkQ29tcGxleFsncmVhbCddICogJHBhcnNlZENvbXBsZXhbJ3JlYWwnXSkgKyAoJHBhcnNlZENvbXBsZXhbJ2ltYWdpbmFyeSddICogJHBhcnNlZENvbXBsZXhbJ2ltYWdpbmFyeSddKSkpOwoKICAgICAgICBpZiAoJHBhcnNlZENvbXBsZXhbJ3N1ZmZpeCddID09ICcnKSB7CiAgICAgICAgICAgIHJldHVybiBzZWxmOjpDT01QTEVYKCRkMSAqICRyLCAkZDIgKiAkcik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHNlbGY6OkNPTVBMRVgoJGQxICogJHIsICRkMiAqICRyLCAkcGFyc2VkQ29tcGxleFsnc3VmZml4J10pOwogICAgICAgIH0KICAgIH0KCgogICAgLyoqCiAgICAgKiBJTUxOCiAgICAgKgogICAgICogUmV0dXJucyB0aGUgbmF0dXJhbCBsb2dhcml0aG0gb2YgYSBjb21wbGV4IG51bWJlciBpbiB4ICsgeWkgb3IgeCArIHlqIHRleHQgZm9ybWF0LgogICAgICoKICAgICAqIEV4Y2VsIEZ1bmN0aW9uOgogICAgICogICAgICAgIElNTE4oY29tcGxleE51bWJlcikKICAgICAqCiAgICAgKiBAcGFyYW0gICAgc3RyaW5nICAgICAgICAkY29tcGxleE51bWJlciAgICBUaGUgY29tcGxleCBudW1iZXIgZm9yIHdoaWNoIHlvdSB3YW50IHRoZSBuYXR1cmFsIGxvZ2FyaXRobS4KICAgICAqIEByZXR1cm4gICAgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gSU1MTigkY29tcGxleE51bWJlcikKICAgIHsKICAgICAgICAkY29tcGxleE51bWJlciAgICA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCRjb21wbGV4TnVtYmVyKTsKCiAgICAgICAgJHBhcnNlZENvbXBsZXggPSBzZWxmOjpwYXJzZUNvbXBsZXgoJGNvbXBsZXhOdW1iZXIpOwoKICAgICAgICBpZiAoKCRwYXJzZWRDb21wbGV4WydyZWFsJ10gPT0gMC4wKSAmJiAoJHBhcnNlZENvbXBsZXhbJ2ltYWdpbmFyeSddID09IDAuMCkpIHsKICAgICAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6TmFOKCk7CiAgICAgICAgfQoKICAgICAgICAkbG9nUiA9IGxvZyhzcXJ0KCgkcGFyc2VkQ29tcGxleFsncmVhbCddICogJHBhcnNlZENvbXBsZXhbJ3JlYWwnXSkgKyAoJHBhcnNlZENvbXBsZXhbJ2ltYWdpbmFyeSddICogJHBhcnNlZENvbXBsZXhbJ2ltYWdpbmFyeSddKSkpOwogICAgICAgICR0ID0gc2VsZjo6SU1BUkdVTUVOVCgkY29tcGxleE51bWJlcik7CgogICAgICAgIGlmICgkcGFyc2VkQ29tcGxleFsnc3VmZml4J10gPT0gJycpIHsKICAgICAgICAgICAgcmV0dXJuIHNlbGY6OkNPTVBMRVgoJGxvZ1IsICR0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gc2VsZjo6Q09NUExFWCgkbG9nUiwgJHQsICRwYXJzZWRDb21wbGV4WydzdWZmaXgnXSk7CiAgICAgICAgfQogICAgfQoKCiAgICAvKioKICAgICAqIElNTE9HMTAKICAgICAqCiAgICAgKiBSZXR1cm5zIHRoZSBjb21tb24gbG9nYXJpdGhtIChiYXNlIDEwKSBvZiBhIGNvbXBsZXggbnVtYmVyIGluIHggKyB5aSBvciB4ICsgeWogdGV4dCBmb3JtYXQuCiAgICAgKgogICAgICogRXhjZWwgRnVuY3Rpb246CiAgICAgKiAgICAgICAgSU1MT0cxMChjb21wbGV4TnVtYmVyKQogICAgICoKICAgICAqIEBwYXJhbSAgICBzdHJpbmcgICAgICAgICRjb21wbGV4TnVtYmVyICAgIFRoZSBjb21wbGV4IG51bWJlciBmb3Igd2hpY2ggeW91IHdhbnQgdGhlIGNvbW1vbiBsb2dhcml0aG0uCiAgICAgKiBAcmV0dXJuICAgIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIElNTE9HMTAoJGNvbXBsZXhOdW1iZXIpCiAgICB7CiAgICAgICAgJGNvbXBsZXhOdW1iZXIgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkY29tcGxleE51bWJlcik7CgogICAgICAgICRwYXJzZWRDb21wbGV4ID0gc2VsZjo6cGFyc2VDb21wbGV4KCRjb21wbGV4TnVtYmVyKTsKCiAgICAgICAgaWYgKCgkcGFyc2VkQ29tcGxleFsncmVhbCddID09IDAuMCkgJiYgKCRwYXJzZWRDb21wbGV4WydpbWFnaW5hcnknXSA9PSAwLjApKSB7CiAgICAgICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6Ok5hTigpOwogICAgICAgIH0gZWxzZWlmICgoJHBhcnNlZENvbXBsZXhbJ3JlYWwnXSA+IDAuMCkgJiYgKCRwYXJzZWRDb21wbGV4WydpbWFnaW5hcnknXSA9PSAwLjApKSB7CiAgICAgICAgICAgIHJldHVybiBsb2cxMCgkcGFyc2VkQ29tcGxleFsncmVhbCddKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzZWxmOjpJTVBST0RVQ1QobG9nMTAoRVVMRVIpLCBzZWxmOjpJTUxOKCRjb21wbGV4TnVtYmVyKSk7CiAgICB9CgoKICAgIC8qKgogICAgICogSU1MT0cyCiAgICAgKgogICAgICogUmV0dXJucyB0aGUgYmFzZS0yIGxvZ2FyaXRobSBvZiBhIGNvbXBsZXggbnVtYmVyIGluIHggKyB5aSBvciB4ICsgeWogdGV4dCBmb3JtYXQuCiAgICAgKgogICAgICogRXhjZWwgRnVuY3Rpb246CiAgICAgKiAgICAgICAgSU1MT0cyKGNvbXBsZXhOdW1iZXIpCiAgICAgKgogICAgICogQHBhcmFtICAgIHN0cmluZyAgICAgICAgJGNvbXBsZXhOdW1iZXIgICAgVGhlIGNvbXBsZXggbnVtYmVyIGZvciB3aGljaCB5b3Ugd2FudCB0aGUgYmFzZS0yIGxvZ2FyaXRobS4KICAgICAqIEByZXR1cm4gICAgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gSU1MT0cyKCRjb21wbGV4TnVtYmVyKQogICAgewogICAgICAgICRjb21wbGV4TnVtYmVyICAgID0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpmbGF0dGVuU2luZ2xlVmFsdWUoJGNvbXBsZXhOdW1iZXIpOwoKICAgICAgICAkcGFyc2VkQ29tcGxleCA9IHNlbGY6OnBhcnNlQ29tcGxleCgkY29tcGxleE51bWJlcik7CgogICAgICAgIGlmICgoJHBhcnNlZENvbXBsZXhbJ3JlYWwnXSA9PSAwLjApICYmICgkcGFyc2VkQ29tcGxleFsnaW1hZ2luYXJ5J10gPT0gMC4wKSkgewogICAgICAgICAgICByZXR1cm4gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpOYU4oKTsKICAgICAgICB9IGVsc2VpZiAoKCRwYXJzZWRDb21wbGV4WydyZWFsJ10gPiAwLjApICYmICgkcGFyc2VkQ29tcGxleFsnaW1hZ2luYXJ5J10gPT0gMC4wKSkgewogICAgICAgICAgICByZXR1cm4gbG9nKCRwYXJzZWRDb21wbGV4WydyZWFsJ10sIDIpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHNlbGY6OklNUFJPRFVDVChsb2coRVVMRVIsIDIpLCBzZWxmOjpJTUxOKCRjb21wbGV4TnVtYmVyKSk7CiAgICB9CgoKICAgIC8qKgogICAgICogSU1FWFAKICAgICAqCiAgICAgKiBSZXR1cm5zIHRoZSBleHBvbmVudGlhbCBvZiBhIGNvbXBsZXggbnVtYmVyIGluIHggKyB5aSBvciB4ICsgeWogdGV4dCBmb3JtYXQuCiAgICAgKgogICAgICogRXhjZWwgRnVuY3Rpb246CiAgICAgKiAgICAgICAgSU1FWFAoY29tcGxleE51bWJlcikKICAgICAqCiAgICAgKiBAcGFyYW0gICAgc3RyaW5nICAgICAgICAkY29tcGxleE51bWJlciAgICBUaGUgY29tcGxleCBudW1iZXIgZm9yIHdoaWNoIHlvdSB3YW50IHRoZSBleHBvbmVudGlhbC4KICAgICAqIEByZXR1cm4gICAgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gSU1FWFAoJGNvbXBsZXhOdW1iZXIpCiAgICB7CiAgICAgICAgJGNvbXBsZXhOdW1iZXIgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkY29tcGxleE51bWJlcik7CgogICAgICAgICRwYXJzZWRDb21wbGV4ID0gc2VsZjo6cGFyc2VDb21wbGV4KCRjb21wbGV4TnVtYmVyKTsKCiAgICAgICAgaWYgKCgkcGFyc2VkQ29tcGxleFsncmVhbCddID09IDAuMCkgJiYgKCRwYXJzZWRDb21wbGV4WydpbWFnaW5hcnknXSA9PSAwLjApKSB7CiAgICAgICAgICAgIHJldHVybiAnMSc7CiAgICAgICAgfQoKICAgICAgICAkZSA9IGV4cCgkcGFyc2VkQ29tcGxleFsncmVhbCddKTsKICAgICAgICAkZVggPSAkZSAqIGNvcygkcGFyc2VkQ29tcGxleFsnaW1hZ2luYXJ5J10pOwogICAgICAgICRlWSA9ICRlICogc2luKCRwYXJzZWRDb21wbGV4WydpbWFnaW5hcnknXSk7CgogICAgICAgIGlmICgkcGFyc2VkQ29tcGxleFsnc3VmZml4J10gPT0gJycpIHsKICAgICAgICAgICAgcmV0dXJuIHNlbGY6OkNPTVBMRVgoJGVYLCAkZVkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBzZWxmOjpDT01QTEVYKCRlWCwgJGVZLCAkcGFyc2VkQ29tcGxleFsnc3VmZml4J10pOwogICAgICAgIH0KICAgIH0KCgogICAgLyoqCiAgICAgKiBJTVBPV0VSCiAgICAgKgogICAgICogUmV0dXJucyBhIGNvbXBsZXggbnVtYmVyIGluIHggKyB5aSBvciB4ICsgeWogdGV4dCBmb3JtYXQgcmFpc2VkIHRvIGEgcG93ZXIuCiAgICAgKgogICAgICogRXhjZWwgRnVuY3Rpb246CiAgICAgKiAgICAgICAgSU1QT1dFUihjb21wbGV4TnVtYmVyLHJlYWxOdW1iZXIpCiAgICAgKgogICAgICogQHBhcmFtICAgIHN0cmluZyAgICAgICAgJGNvbXBsZXhOdW1iZXIgICAgVGhlIGNvbXBsZXggbnVtYmVyIHlvdSB3YW50IHRvIHJhaXNlIHRvIGEgcG93ZXIuCiAgICAgKiBAcGFyYW0gICAgZmxvYXQgICAgICAgICRyZWFsTnVtYmVyICAgICAgICBUaGUgcG93ZXIgdG8gd2hpY2ggeW91IHdhbnQgdG8gcmFpc2UgdGhlIGNvbXBsZXggbnVtYmVyLgogICAgICogQHJldHVybiAgICBzdHJpbmcKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBJTVBPV0VSKCRjb21wbGV4TnVtYmVyLCAkcmVhbE51bWJlcikKICAgIHsKICAgICAgICAkY29tcGxleE51bWJlciA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCRjb21wbGV4TnVtYmVyKTsKICAgICAgICAkcmVhbE51bWJlciAgICA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCRyZWFsTnVtYmVyKTsKCiAgICAgICAgaWYgKCFpc19udW1lcmljKCRyZWFsTnVtYmVyKSkgewogICAgICAgICAgICByZXR1cm4gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpWQUxVRSgpOwogICAgICAgIH0KCiAgICAgICAgJHBhcnNlZENvbXBsZXggPSBzZWxmOjpwYXJzZUNvbXBsZXgoJGNvbXBsZXhOdW1iZXIpOwoKICAgICAgICAkciA9IHNxcnQoKCRwYXJzZWRDb21wbGV4WydyZWFsJ10gKiAkcGFyc2VkQ29tcGxleFsncmVhbCddKSArICgkcGFyc2VkQ29tcGxleFsnaW1hZ2luYXJ5J10gKiAkcGFyc2VkQ29tcGxleFsnaW1hZ2luYXJ5J10pKTsKICAgICAgICAkclBvd2VyID0gcG93KCRyLCAkcmVhbE51bWJlcik7CiAgICAgICAgJHRoZXRhID0gc2VsZjo6SU1BUkdVTUVOVCgkY29tcGxleE51bWJlcikgKiAkcmVhbE51bWJlcjsKICAgICAgICBpZiAoJHRoZXRhID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgfSBlbHNlaWYgKCRwYXJzZWRDb21wbGV4WydpbWFnaW5hcnknXSA9PSAwLjApIHsKICAgICAgICAgICAgcmV0dXJuIHNlbGY6OkNPTVBMRVgoJHJQb3dlciAqIGNvcygkdGhldGEpLCAkclBvd2VyICogc2luKCR0aGV0YSksICRwYXJzZWRDb21wbGV4WydzdWZmaXgnXSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHNlbGY6OkNPTVBMRVgoJHJQb3dlciAqIGNvcygkdGhldGEpLCAkclBvd2VyICogc2luKCR0aGV0YSksICRwYXJzZWRDb21wbGV4WydzdWZmaXgnXSk7CiAgICAgICAgfQogICAgfQoKCiAgICAvKioKICAgICAqIElNRElWCiAgICAgKgogICAgICogUmV0dXJucyB0aGUgcXVvdGllbnQgb2YgdHdvIGNvbXBsZXggbnVtYmVycyBpbiB4ICsgeWkgb3IgeCArIHlqIHRleHQgZm9ybWF0LgogICAgICoKICAgICAqIEV4Y2VsIEZ1bmN0aW9uOgogICAgICogICAgICAgIElNRElWKGNvbXBsZXhEaXZpZGVuZCxjb21wbGV4RGl2aXNvcikKICAgICAqCiAgICAgKiBAcGFyYW0gICAgc3RyaW5nICAgICAgICAkY29tcGxleERpdmlkZW5kICAgIFRoZSBjb21wbGV4IG51bWVyYXRvciBvciBkaXZpZGVuZC4KICAgICAqIEBwYXJhbSAgICBzdHJpbmcgICAgICAgICRjb21wbGV4RGl2aXNvciAgICAgICAgVGhlIGNvbXBsZXggZGVub21pbmF0b3Igb3IgZGl2aXNvci4KICAgICAqIEByZXR1cm4gICAgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gSU1ESVYoJGNvbXBsZXhEaXZpZGVuZCwgJGNvbXBsZXhEaXZpc29yKQogICAgewogICAgICAgICRjb21wbGV4RGl2aWRlbmQgICAgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkY29tcGxleERpdmlkZW5kKTsKICAgICAgICAkY29tcGxleERpdmlzb3IgICAgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkY29tcGxleERpdmlzb3IpOwoKICAgICAgICAkcGFyc2VkQ29tcGxleERpdmlkZW5kID0gc2VsZjo6cGFyc2VDb21wbGV4KCRjb21wbGV4RGl2aWRlbmQpOwogICAgICAgICRwYXJzZWRDb21wbGV4RGl2aXNvciA9IHNlbGY6OnBhcnNlQ29tcGxleCgkY29tcGxleERpdmlzb3IpOwoKICAgICAgICBpZiAoKCRwYXJzZWRDb21wbGV4RGl2aWRlbmRbJ3N1ZmZpeCddICE9ICcnKSAmJiAoJHBhcnNlZENvbXBsZXhEaXZpc29yWydzdWZmaXgnXSAhPSAnJykgJiYKICAgICAgICAgICAgKCRwYXJzZWRDb21wbGV4RGl2aWRlbmRbJ3N1ZmZpeCddICE9ICRwYXJzZWRDb21wbGV4RGl2aXNvclsnc3VmZml4J10pKSB7CiAgICAgICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6Ok5hTigpOwogICAgICAgIH0KICAgICAgICBpZiAoKCRwYXJzZWRDb21wbGV4RGl2aWRlbmRbJ3N1ZmZpeCddICE9ICcnKSAmJiAoJHBhcnNlZENvbXBsZXhEaXZpc29yWydzdWZmaXgnXSA9PSAnJykpIHsKICAgICAgICAgICAgJHBhcnNlZENvbXBsZXhEaXZpc29yWydzdWZmaXgnXSA9ICRwYXJzZWRDb21wbGV4RGl2aWRlbmRbJ3N1ZmZpeCddOwogICAgICAgIH0KCiAgICAgICAgJGQxID0gKCRwYXJzZWRDb21wbGV4RGl2aWRlbmRbJ3JlYWwnXSAqICRwYXJzZWRDb21wbGV4RGl2aXNvclsncmVhbCddKSArICgkcGFyc2VkQ29tcGxleERpdmlkZW5kWydpbWFnaW5hcnknXSAqICRwYXJzZWRDb21wbGV4RGl2aXNvclsnaW1hZ2luYXJ5J10pOwogICAgICAgICRkMiA9ICgkcGFyc2VkQ29tcGxleERpdmlkZW5kWydpbWFnaW5hcnknXSAqICRwYXJzZWRDb21wbGV4RGl2aXNvclsncmVhbCddKSAtICgkcGFyc2VkQ29tcGxleERpdmlkZW5kWydyZWFsJ10gKiAkcGFyc2VkQ29tcGxleERpdmlzb3JbJ2ltYWdpbmFyeSddKTsKICAgICAgICAkZDMgPSAoJHBhcnNlZENvbXBsZXhEaXZpc29yWydyZWFsJ10gKiAkcGFyc2VkQ29tcGxleERpdmlzb3JbJ3JlYWwnXSkgKyAoJHBhcnNlZENvbXBsZXhEaXZpc29yWydpbWFnaW5hcnknXSAqICRwYXJzZWRDb21wbGV4RGl2aXNvclsnaW1hZ2luYXJ5J10pOwoKICAgICAgICAkciA9ICRkMSAvICRkMzsKICAgICAgICAkaSA9ICRkMiAvICRkMzsKCiAgICAgICAgaWYgKCRpID4gMC4wKSB7CiAgICAgICAgICAgIHJldHVybiBzZWxmOjpjbGVhbkNvbXBsZXgoJHIuJysnLiRpLiRwYXJzZWRDb21wbGV4RGl2aXNvclsnc3VmZml4J10pOwogICAgICAgIH0gZWxzZWlmICgkaSA8IDAuMCkgewogICAgICAgICAgICByZXR1cm4gc2VsZjo6Y2xlYW5Db21wbGV4KCRyLiRpLiRwYXJzZWRDb21wbGV4RGl2aXNvclsnc3VmZml4J10pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAkcjsKICAgICAgICB9CiAgICB9CgoKICAgIC8qKgogICAgICogSU1TVUIKICAgICAqCiAgICAgKiBSZXR1cm5zIHRoZSBkaWZmZXJlbmNlIG9mIHR3byBjb21wbGV4IG51bWJlcnMgaW4geCArIHlpIG9yIHggKyB5aiB0ZXh0IGZvcm1hdC4KICAgICAqCiAgICAgKiBFeGNlbCBGdW5jdGlvbjoKICAgICAqICAgICAgICBJTVNVQihjb21wbGV4TnVtYmVyMSxjb21wbGV4TnVtYmVyMikKICAgICAqCiAgICAgKiBAcGFyYW0gICAgc3RyaW5nICAgICAgICAkY29tcGxleE51bWJlcjEgICAgICAgIFRoZSBjb21wbGV4IG51bWJlciBmcm9tIHdoaWNoIHRvIHN1YnRyYWN0IGNvbXBsZXhOdW1iZXIyLgogICAgICogQHBhcmFtICAgIHN0cmluZyAgICAgICAgJGNvbXBsZXhOdW1iZXIyICAgICAgICBUaGUgY29tcGxleCBudW1iZXIgdG8gc3VidHJhY3QgZnJvbSBjb21wbGV4TnVtYmVyMS4KICAgICAqIEByZXR1cm4gICAgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gSU1TVUIoJGNvbXBsZXhOdW1iZXIxLCAkY29tcGxleE51bWJlcjIpCiAgICB7CiAgICAgICAgJGNvbXBsZXhOdW1iZXIxICAgID0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpmbGF0dGVuU2luZ2xlVmFsdWUoJGNvbXBsZXhOdW1iZXIxKTsKICAgICAgICAkY29tcGxleE51bWJlcjIgICAgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkY29tcGxleE51bWJlcjIpOwoKICAgICAgICAkcGFyc2VkQ29tcGxleDEgPSBzZWxmOjpwYXJzZUNvbXBsZXgoJGNvbXBsZXhOdW1iZXIxKTsKICAgICAgICAkcGFyc2VkQ29tcGxleDIgPSBzZWxmOjpwYXJzZUNvbXBsZXgoJGNvbXBsZXhOdW1iZXIyKTsKCiAgICAgICAgaWYgKCgoJHBhcnNlZENvbXBsZXgxWydzdWZmaXgnXSAhPSAnJykgJiYgKCRwYXJzZWRDb21wbGV4Mlsnc3VmZml4J10gIT0gJycpKSAmJgogICAgICAgICAgICAoJHBhcnNlZENvbXBsZXgxWydzdWZmaXgnXSAhPSAkcGFyc2VkQ29tcGxleDJbJ3N1ZmZpeCddKSkgewogICAgICAgICAgICByZXR1cm4gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpOYU4oKTsKICAgICAgICB9IGVsc2VpZiAoKCRwYXJzZWRDb21wbGV4MVsnc3VmZml4J10gPT0gJycpICYmICgkcGFyc2VkQ29tcGxleDJbJ3N1ZmZpeCddICE9ICcnKSkgewogICAgICAgICAgICAkcGFyc2VkQ29tcGxleDFbJ3N1ZmZpeCddID0gJHBhcnNlZENvbXBsZXgyWydzdWZmaXgnXTsKICAgICAgICB9CgogICAgICAgICRkMSA9ICRwYXJzZWRDb21wbGV4MVsncmVhbCddIC0gJHBhcnNlZENvbXBsZXgyWydyZWFsJ107CiAgICAgICAgJGQyID0gJHBhcnNlZENvbXBsZXgxWydpbWFnaW5hcnknXSAtICRwYXJzZWRDb21wbGV4MlsnaW1hZ2luYXJ5J107CgogICAgICAgIHJldHVybiBzZWxmOjpDT01QTEVYKCRkMSwgJGQyLCAkcGFyc2VkQ29tcGxleDFbJ3N1ZmZpeCddKTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBJTVNVTQogICAgICoKICAgICAqIFJldHVybnMgdGhlIHN1bSBvZiB0d28gb3IgbW9yZSBjb21wbGV4IG51bWJlcnMgaW4geCArIHlpIG9yIHggKyB5aiB0ZXh0IGZvcm1hdC4KICAgICAqCiAgICAgKiBFeGNlbCBGdW5jdGlvbjoKICAgICAqICAgICAgICBJTVNVTShjb21wbGV4TnVtYmVyWyxjb21wbGV4TnVtYmVyWywuLi5dXSkKICAgICAqCiAgICAgKiBAcGFyYW0gICAgc3RyaW5nICAgICAgICAkY29tcGxleE51bWJlciwuLi4gICAgU2VyaWVzIG9mIGNvbXBsZXggbnVtYmVycyB0byBhZGQKICAgICAqIEByZXR1cm4gICAgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gSU1TVU0oKQogICAgewogICAgICAgIC8vIFJldHVybiB2YWx1ZQogICAgICAgICRyZXR1cm5WYWx1ZSA9IHNlbGY6OnBhcnNlQ29tcGxleCgnMCcpOwogICAgICAgICRhY3RpdmVTdWZmaXggPSAnJzsKCiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHRoZSBhcmd1bWVudHMKICAgICAgICAkYUFyZ3MgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5BcnJheShmdW5jX2dldF9hcmdzKCkpOwogICAgICAgIGZvcmVhY2ggKCRhQXJncyBhcyAkYXJnKSB7CiAgICAgICAgICAgICRwYXJzZWRDb21wbGV4ID0gc2VsZjo6cGFyc2VDb21wbGV4KCRhcmcpOwoKICAgICAgICAgICAgaWYgKCRhY3RpdmVTdWZmaXggPT0gJycpIHsKICAgICAgICAgICAgICAgICRhY3RpdmVTdWZmaXggPSAkcGFyc2VkQ29tcGxleFsnc3VmZml4J107CiAgICAgICAgICAgIH0gZWxzZWlmICgoJHBhcnNlZENvbXBsZXhbJ3N1ZmZpeCddICE9ICcnKSAmJiAoJGFjdGl2ZVN1ZmZpeCAhPSAkcGFyc2VkQ29tcGxleFsnc3VmZml4J10pKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpWQUxVRSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkcmV0dXJuVmFsdWVbJ3JlYWwnXSArPSAkcGFyc2VkQ29tcGxleFsncmVhbCddOwogICAgICAgICAgICAkcmV0dXJuVmFsdWVbJ2ltYWdpbmFyeSddICs9ICRwYXJzZWRDb21wbGV4WydpbWFnaW5hcnknXTsKICAgICAgICB9CgogICAgICAgIGlmICgkcmV0dXJuVmFsdWVbJ2ltYWdpbmFyeSddID09IDAuMCkgewogICAgICAgICAgICAkYWN0aXZlU3VmZml4ID0gJyc7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzZWxmOjpDT01QTEVYKCRyZXR1cm5WYWx1ZVsncmVhbCddLCAkcmV0dXJuVmFsdWVbJ2ltYWdpbmFyeSddLCAkYWN0aXZlU3VmZml4KTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBJTVBST0RVQ1QKICAgICAqCiAgICAgKiBSZXR1cm5zIHRoZSBwcm9kdWN0IG9mIHR3byBvciBtb3JlIGNvbXBsZXggbnVtYmVycyBpbiB4ICsgeWkgb3IgeCArIHlqIHRleHQgZm9ybWF0LgogICAgICoKICAgICAqIEV4Y2VsIEZ1bmN0aW9uOgogICAgICogICAgICAgIElNUFJPRFVDVChjb21wbGV4TnVtYmVyWyxjb21wbGV4TnVtYmVyWywuLi5dXSkKICAgICAqCiAgICAgKiBAcGFyYW0gICAgc3RyaW5nICAgICAgICAkY29tcGxleE51bWJlciwuLi4gICAgU2VyaWVzIG9mIGNvbXBsZXggbnVtYmVycyB0byBtdWx0aXBseQogICAgICogQHJldHVybiAgICBzdHJpbmcKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBJTVBST0RVQ1QoKQogICAgewogICAgICAgIC8vIFJldHVybiB2YWx1ZQogICAgICAgICRyZXR1cm5WYWx1ZSA9IHNlbGY6OnBhcnNlQ29tcGxleCgnMScpOwogICAgICAgICRhY3RpdmVTdWZmaXggPSAnJzsKCiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHRoZSBhcmd1bWVudHMKICAgICAgICAkYUFyZ3MgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5BcnJheShmdW5jX2dldF9hcmdzKCkpOwogICAgICAgIGZvcmVhY2ggKCRhQXJncyBhcyAkYXJnKSB7CiAgICAgICAgICAgICRwYXJzZWRDb21wbGV4ID0gc2VsZjo6cGFyc2VDb21wbGV4KCRhcmcpOwoKICAgICAgICAgICAgJHdvcmtWYWx1ZSA9ICRyZXR1cm5WYWx1ZTsKICAgICAgICAgICAgaWYgKCgkcGFyc2VkQ29tcGxleFsnc3VmZml4J10gIT0gJycpICYmICgkYWN0aXZlU3VmZml4ID09ICcnKSkgewogICAgICAgICAgICAgICAgJGFjdGl2ZVN1ZmZpeCA9ICRwYXJzZWRDb21wbGV4WydzdWZmaXgnXTsKICAgICAgICAgICAgfSBlbHNlaWYgKCgkcGFyc2VkQ29tcGxleFsnc3VmZml4J10gIT0gJycpICYmICgkYWN0aXZlU3VmZml4ICE9ICRwYXJzZWRDb21wbGV4WydzdWZmaXgnXSkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6Ok5hTigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRyZXR1cm5WYWx1ZVsncmVhbCddID0gKCR3b3JrVmFsdWVbJ3JlYWwnXSAqICRwYXJzZWRDb21wbGV4WydyZWFsJ10pIC0gKCR3b3JrVmFsdWVbJ2ltYWdpbmFyeSddICogJHBhcnNlZENvbXBsZXhbJ2ltYWdpbmFyeSddKTsKICAgICAgICAgICAgJHJldHVyblZhbHVlWydpbWFnaW5hcnknXSA9ICgkd29ya1ZhbHVlWydyZWFsJ10gKiAkcGFyc2VkQ29tcGxleFsnaW1hZ2luYXJ5J10pICsgKCR3b3JrVmFsdWVbJ2ltYWdpbmFyeSddICogJHBhcnNlZENvbXBsZXhbJ3JlYWwnXSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoJHJldHVyblZhbHVlWydpbWFnaW5hcnknXSA9PSAwLjApIHsKICAgICAgICAgICAgJGFjdGl2ZVN1ZmZpeCA9ICcnOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc2VsZjo6Q09NUExFWCgkcmV0dXJuVmFsdWVbJ3JlYWwnXSwgJHJldHVyblZhbHVlWydpbWFnaW5hcnknXSwgJGFjdGl2ZVN1ZmZpeCk7CiAgICB9CgoKICAgIC8qKgogICAgICogICAgREVMVEEKICAgICAqCiAgICAgKiAgICBUZXN0cyB3aGV0aGVyIHR3byB2YWx1ZXMgYXJlIGVxdWFsLiBSZXR1cm5zIDEgaWYgbnVtYmVyMSA9IG51bWJlcjI7IHJldHVybnMgMCBvdGhlcndpc2UuCiAgICAgKiAgICBVc2UgdGhpcyBmdW5jdGlvbiB0byBmaWx0ZXIgYSBzZXQgb2YgdmFsdWVzLiBGb3IgZXhhbXBsZSwgYnkgc3VtbWluZyBzZXZlcmFsIERFTFRBCiAgICAgKiAgICBmdW5jdGlvbnMgeW91IGNhbGN1bGF0ZSB0aGUgY291bnQgb2YgZXF1YWwgcGFpcnMuIFRoaXMgZnVuY3Rpb24gaXMgYWxzbyBrbm93biBhcyB0aGUKICAgICAqICAgIEtyb25lY2tlciBEZWx0YSBmdW5jdGlvbi4KICAgICAqCiAgICAgKiAgICBFeGNlbCBGdW5jdGlvbjoKICAgICAqICAgICAgICBERUxUQShhWyxiXSkKICAgICAqCiAgICAgKiAgICBAcGFyYW0gICAgZmxvYXQgICAgICAgICRhICAgIFRoZSBmaXJzdCBudW1iZXIuCiAgICAgKiAgICBAcGFyYW0gICAgZmxvYXQgICAgICAgICRiICAgIFRoZSBzZWNvbmQgbnVtYmVyLiBJZiBvbWl0dGVkLCBiIGlzIGFzc3VtZWQgdG8gYmUgemVyby4KICAgICAqICAgIEByZXR1cm4gICAgaW50CiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gREVMVEEoJGEsICRiID0gMCkKICAgIHsKICAgICAgICAkYSA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCRhKTsKICAgICAgICAkYiA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCRiKTsKCiAgICAgICAgcmV0dXJuIChpbnQpICgkYSA9PSAkYik7CiAgICB9CgoKICAgIC8qKgogICAgICogICAgR0VTVEVQCiAgICAgKgogICAgICogICAgRXhjZWwgRnVuY3Rpb246CiAgICAgKiAgICAgICAgR0VTVEVQKG51bWJlclssc3RlcF0pCiAgICAgKgogICAgICogICAgUmV0dXJucyAxIGlmIG51bWJlciA+PSBzdGVwOyByZXR1cm5zIDAgKHplcm8pIG90aGVyd2lzZQogICAgICogICAgVXNlIHRoaXMgZnVuY3Rpb24gdG8gZmlsdGVyIGEgc2V0IG9mIHZhbHVlcy4gRm9yIGV4YW1wbGUsIGJ5IHN1bW1pbmcgc2V2ZXJhbCBHRVNURVAKICAgICAqICAgIGZ1bmN0aW9ucyB5b3UgY2FsY3VsYXRlIHRoZSBjb3VudCBvZiB2YWx1ZXMgdGhhdCBleGNlZWQgYSB0aHJlc2hvbGQuCiAgICAgKgogICAgICogICAgQHBhcmFtICAgIGZsb2F0ICAgICAgICAkbnVtYmVyICAgICAgICBUaGUgdmFsdWUgdG8gdGVzdCBhZ2FpbnN0IHN0ZXAuCiAgICAgKiAgICBAcGFyYW0gICAgZmxvYXQgICAgICAgICRzdGVwICAgICAgICBUaGUgdGhyZXNob2xkIHZhbHVlLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiB5b3Ugb21pdCBhIHZhbHVlIGZvciBzdGVwLCBHRVNURVAgdXNlcyB6ZXJvLgogICAgICogICAgQHJldHVybiAgICBpbnQKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBHRVNURVAoJG51bWJlciwgJHN0ZXAgPSAwKQogICAgewogICAgICAgICRudW1iZXIgICAgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkbnVtYmVyKTsKICAgICAgICAkc3RlcCAgICA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCRzdGVwKTsKCiAgICAgICAgcmV0dXJuIChpbnQpICgkbnVtYmVyID49ICRzdGVwKTsKICAgIH0KCgogICAgLy8KICAgIC8vICAgIFByaXZhdGUgbWV0aG9kIHRvIGNhbGN1bGF0ZSB0aGUgZXJmIHZhbHVlCiAgICAvLwogICAgcHJpdmF0ZSBzdGF0aWMgJHR3b1NxcnRQaSA9IDEuMTI4Mzc5MTY3MDk1NTEyNTc0OwoKICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZXJmVmFsKCR4KQogICAgewogICAgICAgIGlmIChhYnMoJHgpID4gMi4yKSB7CiAgICAgICAgICAgIHJldHVybiAxIC0gc2VsZjo6ZXJmY1ZhbCgkeCk7CiAgICAgICAgfQogICAgICAgICRzdW0gPSAkdGVybSA9ICR4OwogICAgICAgICR4c3FyID0gKCR4ICogJHgpOwogICAgICAgICRqID0gMTsKICAgICAgICBkbyB7CiAgICAgICAgICAgICR0ZXJtICo9ICR4c3FyIC8gJGo7CiAgICAgICAgICAgICRzdW0gLT0gJHRlcm0gLyAoMiAqICRqICsgMSk7CiAgICAgICAgICAgICsrJGo7CiAgICAgICAgICAgICR0ZXJtICo9ICR4c3FyIC8gJGo7CiAgICAgICAgICAgICRzdW0gKz0gJHRlcm0gLyAoMiAqICRqICsgMSk7CiAgICAgICAgICAgICsrJGo7CiAgICAgICAgICAgIGlmICgkc3VtID09IDAuMCkgewogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9IHdoaWxlIChhYnMoJHRlcm0gLyAkc3VtKSA+IFBSRUNJU0lPTik7CiAgICAgICAgcmV0dXJuIHNlbGY6OiR0d29TcXJ0UGkgKiAkc3VtOwogICAgfQoKCiAgICAvKioKICAgICAqICAgIEVSRgogICAgICoKICAgICAqICAgIFJldHVybnMgdGhlIGVycm9yIGZ1bmN0aW9uIGludGVncmF0ZWQgYmV0d2VlbiB0aGUgbG93ZXIgYW5kIHVwcGVyIGJvdW5kIGFyZ3VtZW50cy4KICAgICAqCiAgICAgKiAgICBOb3RlOiBJbiBFeGNlbCAyMDA3IG9yIGVhcmxpZXIsIGlmIHlvdSBpbnB1dCBhIG5lZ2F0aXZlIHZhbHVlIGZvciB0aGUgdXBwZXIgb3IgbG93ZXIgYm91bmQgYXJndW1lbnRzLAogICAgICogICAgICAgICAgICB0aGUgZnVuY3Rpb24gd291bGQgcmV0dXJuIGEgI05VTSEgZXJyb3IuIEhvd2V2ZXIsIGluIEV4Y2VsIDIwMTAsIHRoZSBmdW5jdGlvbiBhbGdvcml0aG0gd2FzCiAgICAgKiAgICAgICAgICAgIGltcHJvdmVkLCBzbyB0aGF0IGl0IGNhbiBub3cgY2FsY3VsYXRlIHRoZSBmdW5jdGlvbiBmb3IgYm90aCBwb3NpdGl2ZSBhbmQgbmVnYXRpdmUgcmFuZ2VzLgogICAgICogICAgICAgICAgICBQSFBFeGNlbCBmb2xsb3dzIEV4Y2VsIDIwMTAgYmVoYXZpb3VyLCBhbmQgYWNjZXB0cyBuYWdhdGl2ZSBhcmd1bWVudHMuCiAgICAgKgogICAgICogICAgRXhjZWwgRnVuY3Rpb246CiAgICAgKiAgICAgICAgRVJGKGxvd2VyWyx1cHBlcl0pCiAgICAgKgogICAgICogICAgQHBhcmFtICAgIGZsb2F0ICAgICAgICAkbG93ZXIgICAgbG93ZXIgYm91bmQgZm9yIGludGVncmF0aW5nIEVSRgogICAgICogICAgQHBhcmFtICAgIGZsb2F0ICAgICAgICAkdXBwZXIgICAgdXBwZXIgYm91bmQgZm9yIGludGVncmF0aW5nIEVSRi4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBvbWl0dGVkLCBFUkYgaW50ZWdyYXRlcyBiZXR3ZWVuIHplcm8gYW5kIGxvd2VyX2xpbWl0CiAgICAgKiAgICBAcmV0dXJuICAgIGZsb2F0CiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gRVJGKCRsb3dlciwgJHVwcGVyID0gbnVsbCkKICAgIHsKICAgICAgICAkbG93ZXIgICAgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmZsYXR0ZW5TaW5nbGVWYWx1ZSgkbG93ZXIpOwogICAgICAgICR1cHBlciAgICA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCR1cHBlcik7CgogICAgICAgIGlmIChpc19udW1lcmljKCRsb3dlcikpIHsKICAgICAgICAgICAgaWYgKGlzX251bGwoJHVwcGVyKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGY6OmVyZlZhbCgkbG93ZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChpc19udW1lcmljKCR1cHBlcikpIHsKICAgICAgICAgICAgICAgIHJldHVybiBzZWxmOjplcmZWYWwoJHVwcGVyKSAtIHNlbGY6OmVyZlZhbCgkbG93ZXIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OlZBTFVFKCk7CiAgICB9CgoKICAgIC8vCiAgICAvLyAgICBQcml2YXRlIG1ldGhvZCB0byBjYWxjdWxhdGUgdGhlIGVyZmMgdmFsdWUKICAgIC8vCiAgICBwcml2YXRlIHN0YXRpYyAkb25lU3FydFBpID0gMC41NjQxODk1ODM1NDc3NTYyODc7CgogICAgcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gZXJmY1ZhbCgkeCkKICAgIHsKICAgICAgICBpZiAoYWJzKCR4KSA8IDIuMikgewogICAgICAgICAgICByZXR1cm4gMSAtIHNlbGY6OmVyZlZhbCgkeCk7CiAgICAgICAgfQogICAgICAgIGlmICgkeCA8IDApIHsKICAgICAgICAgICAgcmV0dXJuIDIgLSBzZWxmOjpFUkZDKC0keCk7CiAgICAgICAgfQogICAgICAgICRhID0gJG4gPSAxOwogICAgICAgICRiID0gJGMgPSAkeDsKICAgICAgICAkZCA9ICgkeCAqICR4KSArIDAuNTsKICAgICAgICAkcTEgPSAkcTIgPSAkYiAvICRkOwogICAgICAgICR0ID0gMDsKICAgICAgICBkbyB7CiAgICAgICAgICAgICR0ID0gJGEgKiAkbiArICRiICogJHg7CiAgICAgICAgICAgICRhID0gJGI7CiAgICAgICAgICAgICRiID0gJHQ7CiAgICAgICAgICAgICR0ID0gJGMgKiAkbiArICRkICogJHg7CiAgICAgICAgICAgICRjID0gJGQ7CiAgICAgICAgICAgICRkID0gJHQ7CiAgICAgICAgICAgICRuICs9IDAuNTsKICAgICAgICAgICAgJHExID0gJHEyOwogICAgICAgICAgICAkcTIgPSAkYiAvICRkOwogICAgICAgIH0gd2hpbGUgKChhYnMoJHExIC0gJHEyKSAvICRxMikgPiBQUkVDSVNJT04pOwogICAgICAgIHJldHVybiBzZWxmOjokb25lU3FydFBpICogZXhwKC0keCAqICR4KSAqICRxMjsKICAgIH0KCgogICAgLyoqCiAgICAgKiAgICBFUkZDCiAgICAgKgogICAgICogICAgUmV0dXJucyB0aGUgY29tcGxlbWVudGFyeSBFUkYgZnVuY3Rpb24gaW50ZWdyYXRlZCBiZXR3ZWVuIHggYW5kIGluZmluaXR5CiAgICAgKgogICAgICogICAgTm90ZTogSW4gRXhjZWwgMjAwNyBvciBlYXJsaWVyLCBpZiB5b3UgaW5wdXQgYSBuZWdhdGl2ZSB2YWx1ZSBmb3IgdGhlIGxvd2VyIGJvdW5kIGFyZ3VtZW50LAogICAgICogICAgICAgIHRoZSBmdW5jdGlvbiB3b3VsZCByZXR1cm4gYSAjTlVNISBlcnJvci4gSG93ZXZlciwgaW4gRXhjZWwgMjAxMCwgdGhlIGZ1bmN0aW9uIGFsZ29yaXRobSB3YXMKICAgICAqICAgICAgICBpbXByb3ZlZCwgc28gdGhhdCBpdCBjYW4gbm93IGNhbGN1bGF0ZSB0aGUgZnVuY3Rpb24gZm9yIGJvdGggcG9zaXRpdmUgYW5kIG5lZ2F0aXZlIHggdmFsdWVzLgogICAgICogICAgICAgICAgICBQSFBFeGNlbCBmb2xsb3dzIEV4Y2VsIDIwMTAgYmVoYXZpb3VyLCBhbmQgYWNjZXB0cyBuYWdhdGl2ZSBhcmd1bWVudHMuCiAgICAgKgogICAgICogICAgRXhjZWwgRnVuY3Rpb246CiAgICAgKiAgICAgICAgRVJGQyh4KQogICAgICoKICAgICAqICAgIEBwYXJhbSAgICBmbG9hdCAgICAkeCAgICBUaGUgbG93ZXIgYm91bmQgZm9yIGludGVncmF0aW5nIEVSRkMKICAgICAqICAgIEByZXR1cm4gICAgZmxvYXQKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBFUkZDKCR4KQogICAgewogICAgICAgICR4ID0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpmbGF0dGVuU2luZ2xlVmFsdWUoJHgpOwoKICAgICAgICBpZiAoaXNfbnVtZXJpYygkeCkpIHsKICAgICAgICAgICAgcmV0dXJuIHNlbGY6OmVyZmNWYWwoJHgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpWQUxVRSgpOwogICAgfQoKCiAgICAvKioKICAgICAqICAgIGdldENvbnZlcnNpb25Hcm91cHMKICAgICAqICAgIFJldHVybnMgYSBsaXN0IG9mIHRoZSBkaWZmZXJlbnQgY29udmVyc2lvbiBncm91cHMgZm9yIFVPTSBjb252ZXJzaW9ucwogICAgICoKICAgICAqICAgIEByZXR1cm4gICAgYXJyYXkKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRDb252ZXJzaW9uR3JvdXBzKCkKICAgIHsKICAgICAgICAkY29udmVyc2lvbkdyb3VwcyA9IGFycmF5KCk7CiAgICAgICAgZm9yZWFjaCAoc2VsZjo6JGNvbnZlcnNpb25Vbml0cyBhcyAkY29udmVyc2lvblVuaXQpIHsKICAgICAgICAgICAgJGNvbnZlcnNpb25Hcm91cHNbXSA9ICRjb252ZXJzaW9uVW5pdFsnR3JvdXAnXTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFycmF5X21lcmdlKGFycmF5X3VuaXF1ZSgkY29udmVyc2lvbkdyb3VwcykpOwogICAgfQoKCiAgICAvKioKICAgICAqICAgIGdldENvbnZlcnNpb25Hcm91cFVuaXRzCiAgICAgKiAgICBSZXR1cm5zIGFuIGFycmF5IG9mIHVuaXRzIG9mIG1lYXN1cmUsIGZvciBhIHNwZWNpZmllZCBjb252ZXJzaW9uIGdyb3VwLCBvciBmb3IgYWxsIGdyb3VwcwogICAgICoKICAgICAqICAgIEBwYXJhbSAgICBzdHJpbmcgICAgJGdyb3VwICAgIFRoZSBncm91cCB3aG9zZSB1bml0cyBvZiBtZWFzdXJlIHlvdSB3YW50IHRvIHJldHJpZXZlCiAgICAgKiAgICBAcmV0dXJuICAgIGFycmF5CiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0Q29udmVyc2lvbkdyb3VwVW5pdHMoJGdyb3VwID0gbnVsbCkKICAgIHsKICAgICAgICAkY29udmVyc2lvbkdyb3VwcyA9IGFycmF5KCk7CiAgICAgICAgZm9yZWFjaCAoc2VsZjo6JGNvbnZlcnNpb25Vbml0cyBhcyAkY29udmVyc2lvblVuaXQgPT4gJGNvbnZlcnNpb25Hcm91cCkgewogICAgICAgICAgICBpZiAoKGlzX251bGwoJGdyb3VwKSkgfHwgKCRjb252ZXJzaW9uR3JvdXBbJ0dyb3VwJ10gPT0gJGdyb3VwKSkgewogICAgICAgICAgICAgICAgJGNvbnZlcnNpb25Hcm91cHNbJGNvbnZlcnNpb25Hcm91cFsnR3JvdXAnXV1bXSA9ICRjb252ZXJzaW9uVW5pdDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gJGNvbnZlcnNpb25Hcm91cHM7CiAgICB9CgoKICAgIC8qKgogICAgICogICAgZ2V0Q29udmVyc2lvbkdyb3VwVW5pdERldGFpbHMKICAgICAqCiAgICAgKiAgICBAcGFyYW0gICAgc3RyaW5nICAgICRncm91cCAgICBUaGUgZ3JvdXAgd2hvc2UgdW5pdHMgb2YgbWVhc3VyZSB5b3Ugd2FudCB0byByZXRyaWV2ZQogICAgICogICAgQHJldHVybiAgICBhcnJheQogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldENvbnZlcnNpb25Hcm91cFVuaXREZXRhaWxzKCRncm91cCA9IG51bGwpCiAgICB7CiAgICAgICAgJGNvbnZlcnNpb25Hcm91cHMgPSBhcnJheSgpOwogICAgICAgIGZvcmVhY2ggKHNlbGY6OiRjb252ZXJzaW9uVW5pdHMgYXMgJGNvbnZlcnNpb25Vbml0ID0+ICRjb252ZXJzaW9uR3JvdXApIHsKICAgICAgICAgICAgaWYgKChpc19udWxsKCRncm91cCkpIHx8ICgkY29udmVyc2lvbkdyb3VwWydHcm91cCddID09ICRncm91cCkpIHsKICAgICAgICAgICAgICAgICRjb252ZXJzaW9uR3JvdXBzWyRjb252ZXJzaW9uR3JvdXBbJ0dyb3VwJ11dW10gPSBhcnJheSgKICAgICAgICAgICAgICAgICAgICAndW5pdCcgICAgICAgID0+ICRjb252ZXJzaW9uVW5pdCwKICAgICAgICAgICAgICAgICAgICAnZGVzY3JpcHRpb24nID0+ICRjb252ZXJzaW9uR3JvdXBbJ1VuaXQgTmFtZSddCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiAkY29udmVyc2lvbkdyb3VwczsKICAgIH0KCgogICAgLyoqCiAgICAgKiAgICBnZXRDb252ZXJzaW9uTXVsdGlwbGllcnMKICAgICAqICAgIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIE11bHRpcGxpZXIgcHJlZml4ZXMgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIFVuaXRzIG9mIE1lYXN1cmUgaW4gQ09OVkVSVFVPTSgpCiAgICAgKgogICAgICogICAgQHJldHVybiAgICBhcnJheSBvZiBtaXhlZAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldENvbnZlcnNpb25NdWx0aXBsaWVycygpCiAgICB7CiAgICAgICAgcmV0dXJuIHNlbGY6OiRjb252ZXJzaW9uTXVsdGlwbGllcnM7CiAgICB9CgoKICAgIC8qKgogICAgICogICAgQ09OVkVSVFVPTQogICAgICoKICAgICAqICAgIENvbnZlcnRzIGEgbnVtYmVyIGZyb20gb25lIG1lYXN1cmVtZW50IHN5c3RlbSB0byBhbm90aGVyLgogICAgICogICAgRm9yIGV4YW1wbGUsIENPTlZFUlQgY2FuIHRyYW5zbGF0ZSBhIHRhYmxlIG9mIGRpc3RhbmNlcyBpbiBtaWxlcyB0byBhIHRhYmxlIG9mIGRpc3RhbmNlcwogICAgICogICAgaW4ga2lsb21ldGVycy4KICAgICAqCiAgICAgKiAgICBFeGNlbCBGdW5jdGlvbjoKICAgICAqICAgICAgICBDT05WRVJUKHZhbHVlLGZyb21VT00sdG9VT00pCiAgICAgKgogICAgICogICAgQHBhcmFtICAgIGZsb2F0ICAgICAgICAkdmFsdWUgICAgICAgIFRoZSB2YWx1ZSBpbiBmcm9tVU9NIHRvIGNvbnZlcnQuCiAgICAgKiAgICBAcGFyYW0gICAgc3RyaW5nICAgICAgICAkZnJvbVVPTSAgICBUaGUgdW5pdHMgZm9yIHZhbHVlLgogICAgICogICAgQHBhcmFtICAgIHN0cmluZyAgICAgICAgJHRvVU9NICAgICAgICBUaGUgdW5pdHMgZm9yIHRoZSByZXN1bHQuCiAgICAgKgogICAgICogICAgQHJldHVybiAgICBmbG9hdAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIENPTlZFUlRVT00oJHZhbHVlLCAkZnJvbVVPTSwgJHRvVU9NKQogICAgewogICAgICAgICR2YWx1ZSAgID0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpmbGF0dGVuU2luZ2xlVmFsdWUoJHZhbHVlKTsKICAgICAgICAkZnJvbVVPTSA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCRmcm9tVU9NKTsKICAgICAgICAkdG9VT00gICA9IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6ZmxhdHRlblNpbmdsZVZhbHVlKCR0b1VPTSk7CgogICAgICAgIGlmICghaXNfbnVtZXJpYygkdmFsdWUpKSB7CiAgICAgICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OlZBTFVFKCk7CiAgICAgICAgfQogICAgICAgICRmcm9tTXVsdGlwbGllciA9IDEuMDsKICAgICAgICBpZiAoaXNzZXQoc2VsZjo6JGNvbnZlcnNpb25Vbml0c1skZnJvbVVPTV0pKSB7CiAgICAgICAgICAgICR1bml0R3JvdXAxID0gc2VsZjo6JGNvbnZlcnNpb25Vbml0c1skZnJvbVVPTV1bJ0dyb3VwJ107CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJGZyb21NdWx0aXBsaWVyID0gc3Vic3RyKCRmcm9tVU9NLCAwLCAxKTsKICAgICAgICAgICAgJGZyb21VT00gPSBzdWJzdHIoJGZyb21VT00sIDEpOwogICAgICAgICAgICBpZiAoaXNzZXQoc2VsZjo6JGNvbnZlcnNpb25NdWx0aXBsaWVyc1skZnJvbU11bHRpcGxpZXJdKSkgewogICAgICAgICAgICAgICAgJGZyb21NdWx0aXBsaWVyID0gc2VsZjo6JGNvbnZlcnNpb25NdWx0aXBsaWVyc1skZnJvbU11bHRpcGxpZXJdWydtdWx0aXBsaWVyJ107CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpOQSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgoaXNzZXQoc2VsZjo6JGNvbnZlcnNpb25Vbml0c1skZnJvbVVPTV0pKSAmJiAoc2VsZjo6JGNvbnZlcnNpb25Vbml0c1skZnJvbVVPTV1bJ0FsbG93UHJlZml4J10pKSB7CiAgICAgICAgICAgICAgICAkdW5pdEdyb3VwMSA9IHNlbGY6OiRjb252ZXJzaW9uVW5pdHNbJGZyb21VT01dWydHcm91cCddOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6TkEoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAkdmFsdWUgKj0gJGZyb21NdWx0aXBsaWVyOwoKICAgICAgICAkdG9NdWx0aXBsaWVyID0gMS4wOwogICAgICAgIGlmIChpc3NldChzZWxmOjokY29udmVyc2lvblVuaXRzWyR0b1VPTV0pKSB7CiAgICAgICAgICAgICR1bml0R3JvdXAyID0gc2VsZjo6JGNvbnZlcnNpb25Vbml0c1skdG9VT01dWydHcm91cCddOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICR0b011bHRpcGxpZXIgPSBzdWJzdHIoJHRvVU9NLCAwLCAxKTsKICAgICAgICAgICAgJHRvVU9NID0gc3Vic3RyKCR0b1VPTSwgMSk7CiAgICAgICAgICAgIGlmIChpc3NldChzZWxmOjokY29udmVyc2lvbk11bHRpcGxpZXJzWyR0b011bHRpcGxpZXJdKSkgewogICAgICAgICAgICAgICAgJHRvTXVsdGlwbGllciA9IHNlbGY6OiRjb252ZXJzaW9uTXVsdGlwbGllcnNbJHRvTXVsdGlwbGllcl1bJ211bHRpcGxpZXInXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6Ok5BKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKChpc3NldChzZWxmOjokY29udmVyc2lvblVuaXRzWyR0b1VPTV0pKSAmJiAoc2VsZjo6JGNvbnZlcnNpb25Vbml0c1skdG9VT01dWydBbGxvd1ByZWZpeCddKSkgewogICAgICAgICAgICAgICAgJHVuaXRHcm91cDIgPSBzZWxmOjokY29udmVyc2lvblVuaXRzWyR0b1VPTV1bJ0dyb3VwJ107CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpOQSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICgkdW5pdEdyb3VwMSAhPSAkdW5pdEdyb3VwMikgewogICAgICAgICAgICByZXR1cm4gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpOQSgpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCgkZnJvbVVPTSA9PSAkdG9VT00pICYmICgkZnJvbU11bHRpcGxpZXIgPT0gJHRvTXVsdGlwbGllcikpIHsKICAgICAgICAgICAgLy8gICAgV2UndmUgYWxyZWFkeSBmYWN0b3JlZCAkZnJvbU11bHRpcGxpZXIgaW50byB0aGUgdmFsdWUsIHNvIHdlIG5lZWQKICAgICAgICAgICAgLy8gICAgICAgIHRvIHJldmVyc2UgaXQgYWdhaW4KICAgICAgICAgICAgcmV0dXJuICR2YWx1ZSAvICRmcm9tTXVsdGlwbGllcjsKICAgICAgICB9IGVsc2VpZiAoJHVuaXRHcm91cDEgPT0gJ1RlbXBlcmF0dXJlJykgewogICAgICAgICAgICBpZiAoKCRmcm9tVU9NID09ICdGJykgfHwgKCRmcm9tVU9NID09ICdmYWgnKSkgewogICAgICAgICAgICAgICAgaWYgKCgkdG9VT00gPT0gJ0YnKSB8fCAoJHRvVU9NID09ICdmYWgnKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkdmFsdWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICR2YWx1ZSA9ICgoJHZhbHVlIC0gMzIpIC8gMS44KTsKICAgICAgICAgICAgICAgICAgICBpZiAoKCR0b1VPTSA9PSAnSycpIHx8ICgkdG9VT00gPT0gJ2tlbCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICR2YWx1ZSArPSAyNzMuMTU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiAkdmFsdWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZWlmICgoKCRmcm9tVU9NID09ICdLJykgfHwgKCRmcm9tVU9NID09ICdrZWwnKSkgJiYKICAgICAgICAgICAgICAgICAgICAgICgoJHRvVU9NID09ICdLJykgfHwgKCR0b1VPTSA9PSAna2VsJykpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkdmFsdWU7CiAgICAgICAgICAgIH0gZWxzZWlmICgoKCRmcm9tVU9NID09ICdDJykgfHwgKCRmcm9tVU9NID09ICdjZWwnKSkgJiYKICAgICAgICAgICAgICAgICAgICAgICgoJHRvVU9NID09ICdDJykgfHwgKCR0b1VPTSA9PSAnY2VsJykpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICR2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoKCR0b1VPTSA9PSAnRicpIHx8ICgkdG9VT00gPT0gJ2ZhaCcpKSB7CiAgICAgICAgICAgICAgICBpZiAoKCRmcm9tVU9NID09ICdLJykgfHwgKCRmcm9tVU9NID09ICdrZWwnKSkgewogICAgICAgICAgICAgICAgICAgICR2YWx1ZSAtPSAyNzMuMTU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gKCR2YWx1ZSAqIDEuOCkgKyAzMjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoKCR0b1VPTSA9PSAnQycpIHx8ICgkdG9VT00gPT0gJ2NlbCcpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJHZhbHVlIC0gMjczLjE1OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAkdmFsdWUgKyAyNzMuMTU7CiAgICAgICAgfQogICAgICAgIHJldHVybiAoJHZhbHVlICogc2VsZjo6JHVuaXRDb252ZXJzaW9uc1skdW5pdEdyb3VwMV1bJGZyb21VT01dWyR0b1VPTV0pIC8gJHRvTXVsdGlwbGllcjsKICAgIH0KfQo=",
    "size": "110732"
}