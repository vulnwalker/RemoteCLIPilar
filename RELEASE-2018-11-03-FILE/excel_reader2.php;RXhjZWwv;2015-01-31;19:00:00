{
    "namaFile": "Excel\/excel_reader2.php",
    "lastUpdate": "2015-01-31+19:00:00.00",
    "contentFile": "PD9waHANCi8qKg0KICogQSBjbGFzcyBmb3IgcmVhZGluZyBNaWNyb3NvZnQgRXhjZWwgKDk3LzIwMDMpIFNwcmVhZHNoZWV0cy4NCiAqDQogKiBWZXJzaW9uIDIuMjENCiAqDQogKiBFbmhhbmNlZCBhbmQgbWFpbnRhaW5lZCBieSBNYXR0IEtydXNlIDwgaHR0cDovL21hdHRrcnVzZS5jb20gPg0KICogTWFpbnRhaW5lZCBhdCBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvcGhwLWV4Y2VsLXJlYWRlci8NCiAqDQogKiBGb3JtYXQgcGFyc2luZyBhbmQgTVVDSCBtb3JlIGNvbnRyaWJ1dGVkIGJ5Og0KICogICAgTWF0dCBSb3hidXJnaCA8IGh0dHA6Ly93d3cucm94YnVyZ2gubWUudWsgPg0KICoNCiAqIERPQ1VNRU5UQVRJT04NCiAqID09PT09PT09PT09PT0NCiAqICAgaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL3BocC1leGNlbC1yZWFkZXIvd2lraS9Eb2N1bWVudGF0aW9uDQogKg0KICogQ0hBTkdFIExPRw0KICogPT09PT09PT09PQ0KICogICBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvcGhwLWV4Y2VsLXJlYWRlci93aWtpL0NoYW5nZUhpc3RvcnkNCiAqDQogKiBESVNDVVNTSU9OL1NVUFBPUlQNCiAqID09PT09PT09PT09PT09PT09PQ0KICogICBodHRwOi8vZ3JvdXBzLmdvb2dsZS5jb20vZ3JvdXAvcGhwLWV4Y2VsLXJlYWRlci1kaXNjdXNzL3RvcGljcw0KICoNCiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogKg0KICogT3JpZ2luYWxseSBkZXZlbG9wZWQgYnkgVmFkaW0gVGthY2hlbmtvIHVuZGVyIHRoZSBuYW1lIFBIUEV4Y2VsUmVhZGVyLg0KICogKGh0dHA6Ly9zb3VyY2Vmb3JnZS5uZXQvcHJvamVjdHMvcGhwZXhjZWxyZWFkZXIpDQogKiBCYXNlZCBvbiB0aGUgSmF2YSB2ZXJzaW9uIGJ5IEFuZHkgS2hhbiAoaHR0cDovL3d3dy5hbmR5a2hhbi5jb20pLiAgTm93DQogKiBtYWludGFpbmVkIGJ5IERhdmlkIFNhbmRlcnMuICBSZWFkcyBvbmx5IEJpZmYgNyBhbmQgQmlmZiA4IGZvcm1hdHMuDQogKg0KICogUEhQIHZlcnNpb25zIDQgYW5kIDUNCiAqDQogKiBMSUNFTlNFOiBUaGlzIHNvdXJjZSBmaWxlIGlzIHN1YmplY3QgdG8gdmVyc2lvbiAzLjAgb2YgdGhlIFBIUCBsaWNlbnNlDQogKiB0aGF0IGlzIGF2YWlsYWJsZSB0aHJvdWdoIHRoZSB3b3JsZC13aWRlLXdlYiBhdCB0aGUgZm9sbG93aW5nIFVSSToNCiAqIGh0dHA6Ly93d3cucGhwLm5ldC9saWNlbnNlLzNfMC50eHQuICBJZiB5b3UgZGlkIG5vdCByZWNlaXZlIGEgY29weSBvZg0KICogdGhlIFBIUCBMaWNlbnNlIGFuZCBhcmUgdW5hYmxlIHRvIG9idGFpbiBpdCB0aHJvdWdoIHRoZSB3ZWIsIHBsZWFzZQ0KICogc2VuZCBhIG5vdGUgdG8gbGljZW5zZUBwaHAubmV0IHNvIHdlIGNhbiBtYWlsIHlvdSBhIGNvcHkgaW1tZWRpYXRlbHkuDQogKg0KICogQGNhdGVnb3J5ICAgU3ByZWFkc2hlZXQNCiAqIEBwYWNrYWdlCVNwcmVhZHNoZWV0X0V4Y2VsX1JlYWRlcg0KICogQGF1dGhvcgkgVmFkaW0gVGthY2hlbmtvIDx2dEBhcGFjaGVwaHAuY29tPg0KICogQGxpY2Vuc2UJaHR0cDovL3d3dy5waHAubmV0L2xpY2Vuc2UvM18wLnR4dCAgUEhQIExpY2Vuc2UgMy4wDQogKiBAdmVyc2lvbglDVlM6ICRJZDogcmVhZGVyLnBocCAxOSAyMDA3LTAzLTEzIDEyOjQyOjQxWiBzaGFuZ3hpYW8gJA0KICogQGxpbmsJICAgaHR0cDovL3BlYXIucGhwLm5ldC9wYWNrYWdlL1NwcmVhZHNoZWV0X0V4Y2VsX1JlYWRlcg0KICogQHNlZQkJT0xFLCBTcHJlYWRzaGVldF9FeGNlbF9Xcml0ZXINCiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogKi8NCg0KZGVmaW5lKCdOVU1fQklHX0JMT0NLX0RFUE9UX0JMT0NLU19QT1MnLCAweDJjKTsNCmRlZmluZSgnU01BTExfQkxPQ0tfREVQT1RfQkxPQ0tfUE9TJywgMHgzYyk7DQpkZWZpbmUoJ1JPT1RfU1RBUlRfQkxPQ0tfUE9TJywgMHgzMCk7DQpkZWZpbmUoJ0JJR19CTE9DS19TSVpFJywgMHgyMDApOw0KZGVmaW5lKCdTTUFMTF9CTE9DS19TSVpFJywgMHg0MCk7DQpkZWZpbmUoJ0VYVEVOU0lPTl9CTE9DS19QT1MnLCAweDQ0KTsNCmRlZmluZSgnTlVNX0VYVEVOU0lPTl9CTE9DS19QT1MnLCAweDQ4KTsNCmRlZmluZSgnUFJPUEVSVFlfU1RPUkFHRV9CTE9DS19TSVpFJywgMHg4MCk7DQpkZWZpbmUoJ0JJR19CTE9DS19ERVBPVF9CTE9DS1NfUE9TJywgMHg0Yyk7DQpkZWZpbmUoJ1NNQUxMX0JMT0NLX1RIUkVTSE9MRCcsIDB4MTAwMCk7DQovLyBwcm9wZXJ0eSBzdG9yYWdlIG9mZnNldHMNCmRlZmluZSgnU0laRV9PRl9OQU1FX1BPUycsIDB4NDApOw0KZGVmaW5lKCdUWVBFX1BPUycsIDB4NDIpOw0KZGVmaW5lKCdTVEFSVF9CTE9DS19QT1MnLCAweDc0KTsNCmRlZmluZSgnU0laRV9QT1MnLCAweDc4KTsNCmRlZmluZSgnSURFTlRJRklFUl9PTEUnLCBwYWNrKCJDQ0NDQ0NDQyIsMHhkMCwweGNmLDB4MTEsMHhlMCwweGExLDB4YjEsMHgxYSwweGUxKSk7DQoNCg0KZnVuY3Rpb24gR2V0SW50NGQoJGRhdGEsICRwb3MpIHsNCgkkdmFsdWUgPSBvcmQoJGRhdGFbJHBvc10pIHwgKG9yZCgkZGF0YVskcG9zKzFdKQk8PCA4KSB8IChvcmQoJGRhdGFbJHBvcysyXSkgPDwgMTYpIHwgKG9yZCgkZGF0YVskcG9zKzNdKSA8PCAyNCk7DQoJaWYgKCR2YWx1ZT49NDI5NDk2NzI5NCkgew0KCQkkdmFsdWU9LTI7DQoJfQ0KCXJldHVybiAkdmFsdWU7DQp9DQoNCi8vIGh0dHA6Ly91ay5waHAubmV0L21hbnVhbC9lbi9mdW5jdGlvbi5nZXRkYXRlLnBocA0KZnVuY3Rpb24gZ21nZXRkYXRlKCR0cyA9IG51bGwpew0KCSRrID0gYXJyYXkoJ3NlY29uZHMnLCdtaW51dGVzJywnaG91cnMnLCdtZGF5Jywnd2RheScsJ21vbicsJ3llYXInLCd5ZGF5Jywnd2Vla2RheScsJ21vbnRoJywwKTsNCglyZXR1cm4oYXJyYXlfY29tYigkayxzcGxpdCgiOiIsZ21kYXRlKCdzOmk6RzpqOnc6bjpZOno6bDpGOlUnLGlzX251bGwoJHRzKT90aW1lKCk6JHRzKSkpKTsNCgl9IA0KDQovLyBBZGRlZCBmb3IgUEhQNCBjb21wYXRpYmlsaXR5DQpmdW5jdGlvbiBhcnJheV9jb21iKCRhcnJheTEsICRhcnJheTIpIHsNCgkkb3V0ID0gYXJyYXkoKTsNCglmb3JlYWNoICgkYXJyYXkxIGFzICRrZXkgPT4gJHZhbHVlKSB7DQoJCSRvdXRbJHZhbHVlXSA9ICRhcnJheTJbJGtleV07DQoJfQ0KCXJldHVybiAkb3V0Ow0KfQ0KDQpmdW5jdGlvbiB2KCRkYXRhLCRwb3MpIHsNCglyZXR1cm4gb3JkKCRkYXRhWyRwb3NdKSB8IG9yZCgkZGF0YVskcG9zKzFdKTw8ODsNCn0NCg0KY2xhc3MgT0xFUmVhZCB7DQoJdmFyICRkYXRhID0gJyc7DQoJZnVuY3Rpb24gT0xFUmVhZCgpewl9DQoNCglmdW5jdGlvbiByZWFkKCRzRmlsZU5hbWUpew0KCQkvLyBjaGVjayBpZiBmaWxlIGV4aXN0IGFuZCBpcyByZWFkYWJsZSAoRGFya28gTWlsamFub3ZpYykNCgkJaWYoIWlzX3JlYWRhYmxlKCRzRmlsZU5hbWUpKSB7DQoJCQkkdGhpcy0+ZXJyb3IgPSAxOw0KCQkJcmV0dXJuIGZhbHNlOw0KCQl9DQoJCSR0aGlzLT5kYXRhID0gQGZpbGVfZ2V0X2NvbnRlbnRzKCRzRmlsZU5hbWUpOw0KCQlpZiAoISR0aGlzLT5kYXRhKSB7DQoJCQkkdGhpcy0+ZXJyb3IgPSAxOw0KCQkJcmV0dXJuIGZhbHNlOw0KICAgCQl9DQogICAJCWlmIChzdWJzdHIoJHRoaXMtPmRhdGEsIDAsIDgpICE9IElERU5USUZJRVJfT0xFKSB7DQoJCQkkdGhpcy0+ZXJyb3IgPSAxOw0KCQkJcmV0dXJuIGZhbHNlOw0KICAgCQl9DQoJCSR0aGlzLT5udW1CaWdCbG9ja0RlcG90QmxvY2tzID0gR2V0SW50NGQoJHRoaXMtPmRhdGEsIE5VTV9CSUdfQkxPQ0tfREVQT1RfQkxPQ0tTX1BPUyk7DQoJCSR0aGlzLT5zYmRTdGFydEJsb2NrID0gR2V0SW50NGQoJHRoaXMtPmRhdGEsIFNNQUxMX0JMT0NLX0RFUE9UX0JMT0NLX1BPUyk7DQoJCSR0aGlzLT5yb290U3RhcnRCbG9jayA9IEdldEludDRkKCR0aGlzLT5kYXRhLCBST09UX1NUQVJUX0JMT0NLX1BPUyk7DQoJCSR0aGlzLT5leHRlbnNpb25CbG9jayA9IEdldEludDRkKCR0aGlzLT5kYXRhLCBFWFRFTlNJT05fQkxPQ0tfUE9TKTsNCgkJJHRoaXMtPm51bUV4dGVuc2lvbkJsb2NrcyA9IEdldEludDRkKCR0aGlzLT5kYXRhLCBOVU1fRVhURU5TSU9OX0JMT0NLX1BPUyk7DQoNCgkJJGJpZ0Jsb2NrRGVwb3RCbG9ja3MgPSBhcnJheSgpOw0KCQkkcG9zID0gQklHX0JMT0NLX0RFUE9UX0JMT0NLU19QT1M7DQoJCSRiYmRCbG9ja3MgPSAkdGhpcy0+bnVtQmlnQmxvY2tEZXBvdEJsb2NrczsNCgkJaWYgKCR0aGlzLT5udW1FeHRlbnNpb25CbG9ja3MgIT0gMCkgew0KCQkJJGJiZEJsb2NrcyA9IChCSUdfQkxPQ0tfU0laRSAtIEJJR19CTE9DS19ERVBPVF9CTE9DS1NfUE9TKS80Ow0KCQl9DQoNCgkJZm9yICgkaSA9IDA7ICRpIDwgJGJiZEJsb2NrczsgJGkrKykgew0KCQkJJGJpZ0Jsb2NrRGVwb3RCbG9ja3NbJGldID0gR2V0SW50NGQoJHRoaXMtPmRhdGEsICRwb3MpOw0KCQkJJHBvcyArPSA0Ow0KCQl9DQoNCg0KCQlmb3IgKCRqID0gMDsgJGogPCAkdGhpcy0+bnVtRXh0ZW5zaW9uQmxvY2tzOyAkaisrKSB7DQoJCQkkcG9zID0gKCR0aGlzLT5leHRlbnNpb25CbG9jayArIDEpICogQklHX0JMT0NLX1NJWkU7DQoJCQkkYmxvY2tzVG9SZWFkID0gbWluKCR0aGlzLT5udW1CaWdCbG9ja0RlcG90QmxvY2tzIC0gJGJiZEJsb2NrcywgQklHX0JMT0NLX1NJWkUgLyA0IC0gMSk7DQoNCgkJCWZvciAoJGkgPSAkYmJkQmxvY2tzOyAkaSA8ICRiYmRCbG9ja3MgKyAkYmxvY2tzVG9SZWFkOyAkaSsrKSB7DQoJCQkJJGJpZ0Jsb2NrRGVwb3RCbG9ja3NbJGldID0gR2V0SW50NGQoJHRoaXMtPmRhdGEsICRwb3MpOw0KCQkJCSRwb3MgKz0gNDsNCgkJCX0NCg0KCQkJJGJiZEJsb2NrcyArPSAkYmxvY2tzVG9SZWFkOw0KCQkJaWYgKCRiYmRCbG9ja3MgPCAkdGhpcy0+bnVtQmlnQmxvY2tEZXBvdEJsb2Nrcykgew0KCQkJCSR0aGlzLT5leHRlbnNpb25CbG9jayA9IEdldEludDRkKCR0aGlzLT5kYXRhLCAkcG9zKTsNCgkJCX0NCgkJfQ0KDQoJCS8vIHJlYWRCaWdCbG9ja0RlcG90DQoJCSRwb3MgPSAwOw0KCQkkaW5kZXggPSAwOw0KCQkkdGhpcy0+YmlnQmxvY2tDaGFpbiA9IGFycmF5KCk7DQoNCgkJZm9yICgkaSA9IDA7ICRpIDwgJHRoaXMtPm51bUJpZ0Jsb2NrRGVwb3RCbG9ja3M7ICRpKyspIHsNCgkJCSRwb3MgPSAoJGJpZ0Jsb2NrRGVwb3RCbG9ja3NbJGldICsgMSkgKiBCSUdfQkxPQ0tfU0laRTsNCgkJCS8vZWNobyAicG9zID0gJHBvcyI7DQoJCQlmb3IgKCRqID0gMCA7ICRqIDwgQklHX0JMT0NLX1NJWkUgLyA0OyAkaisrKSB7DQoJCQkJJHRoaXMtPmJpZ0Jsb2NrQ2hhaW5bJGluZGV4XSA9IEdldEludDRkKCR0aGlzLT5kYXRhLCAkcG9zKTsNCgkJCQkkcG9zICs9IDQgOw0KCQkJCSRpbmRleCsrOw0KCQkJfQ0KCQl9DQoNCgkJLy8gcmVhZFNtYWxsQmxvY2tEZXBvdCgpOw0KCQkkcG9zID0gMDsNCgkJJGluZGV4ID0gMDsNCgkJJHNiZEJsb2NrID0gJHRoaXMtPnNiZFN0YXJ0QmxvY2s7DQoJCSR0aGlzLT5zbWFsbEJsb2NrQ2hhaW4gPSBhcnJheSgpOw0KDQoJCXdoaWxlICgkc2JkQmxvY2sgIT0gLTIpIHsNCgkJICAkcG9zID0gKCRzYmRCbG9jayArIDEpICogQklHX0JMT0NLX1NJWkU7DQoJCSAgZm9yICgkaiA9IDA7ICRqIDwgQklHX0JMT0NLX1NJWkUgLyA0OyAkaisrKSB7DQoJCQkkdGhpcy0+c21hbGxCbG9ja0NoYWluWyRpbmRleF0gPSBHZXRJbnQ0ZCgkdGhpcy0+ZGF0YSwgJHBvcyk7DQoJCQkkcG9zICs9IDQ7DQoJCQkkaW5kZXgrKzsNCgkJICB9DQoJCSAgJHNiZEJsb2NrID0gJHRoaXMtPmJpZ0Jsb2NrQ2hhaW5bJHNiZEJsb2NrXTsNCgkJfQ0KDQoNCgkJLy8gcmVhZERhdGEocm9vdFN0YXJ0QmxvY2spDQoJCSRibG9jayA9ICR0aGlzLT5yb290U3RhcnRCbG9jazsNCgkJJHBvcyA9IDA7DQoJCSR0aGlzLT5lbnRyeSA9ICR0aGlzLT5fX3JlYWREYXRhKCRibG9jayk7DQoJCSR0aGlzLT5fX3JlYWRQcm9wZXJ0eVNldHMoKTsNCgl9DQoNCglmdW5jdGlvbiBfX3JlYWREYXRhKCRibCkgew0KCQkkYmxvY2sgPSAkYmw7DQoJCSRwb3MgPSAwOw0KCQkkZGF0YSA9ICcnOw0KCQl3aGlsZSAoJGJsb2NrICE9IC0yKSAgew0KCQkJJHBvcyA9ICgkYmxvY2sgKyAxKSAqIEJJR19CTE9DS19TSVpFOw0KCQkJJGRhdGEgPSAkZGF0YS5zdWJzdHIoJHRoaXMtPmRhdGEsICRwb3MsIEJJR19CTE9DS19TSVpFKTsNCgkJCSRibG9jayA9ICR0aGlzLT5iaWdCbG9ja0NoYWluWyRibG9ja107DQoJCX0NCgkJcmV0dXJuICRkYXRhOw0KCSB9DQoNCglmdW5jdGlvbiBfX3JlYWRQcm9wZXJ0eVNldHMoKXsNCgkJJG9mZnNldCA9IDA7DQoJCXdoaWxlICgkb2Zmc2V0IDwgc3RybGVuKCR0aGlzLT5lbnRyeSkpIHsNCgkJCSRkID0gc3Vic3RyKCR0aGlzLT5lbnRyeSwgJG9mZnNldCwgUFJPUEVSVFlfU1RPUkFHRV9CTE9DS19TSVpFKTsNCgkJCSRuYW1lU2l6ZSA9IG9yZCgkZFtTSVpFX09GX05BTUVfUE9TXSkgfCAob3JkKCRkW1NJWkVfT0ZfTkFNRV9QT1MrMV0pIDw8IDgpOw0KCQkJJHR5cGUgPSBvcmQoJGRbVFlQRV9QT1NdKTsNCgkJCSRzdGFydEJsb2NrID0gR2V0SW50NGQoJGQsIFNUQVJUX0JMT0NLX1BPUyk7DQoJCQkkc2l6ZSA9IEdldEludDRkKCRkLCBTSVpFX1BPUyk7DQoJCQkkbmFtZSA9ICcnOw0KCQkJZm9yICgkaSA9IDA7ICRpIDwgJG5hbWVTaXplIDsgJGkrKykgew0KCQkJCSRuYW1lIC49ICRkWyRpXTsNCgkJCX0NCgkJCSRuYW1lID0gc3RyX3JlcGxhY2UoIlx4MDAiLCAiIiwgJG5hbWUpOw0KCQkJJHRoaXMtPnByb3BzW10gPSBhcnJheSAoDQoJCQkJJ25hbWUnID0+ICRuYW1lLA0KCQkJCSd0eXBlJyA9PiAkdHlwZSwNCgkJCQknc3RhcnRCbG9jaycgPT4gJHN0YXJ0QmxvY2ssDQoJCQkJJ3NpemUnID0+ICRzaXplKTsNCgkJCWlmICgoc3RydG9sb3dlcigkbmFtZSkgPT0gIndvcmtib29rIikgfHwgKCBzdHJ0b2xvd2VyKCRuYW1lKSA9PSAiYm9vayIpKSB7DQoJCQkJJHRoaXMtPndya2Jvb2sgPSBjb3VudCgkdGhpcy0+cHJvcHMpIC0gMTsNCgkJCX0NCgkJCWlmICgkbmFtZSA9PSAiUm9vdCBFbnRyeSIpIHsNCgkJCQkkdGhpcy0+cm9vdGVudHJ5ID0gY291bnQoJHRoaXMtPnByb3BzKSAtIDE7DQoJCQl9DQoJCQkkb2Zmc2V0ICs9IFBST1BFUlRZX1NUT1JBR0VfQkxPQ0tfU0laRTsNCgkJfQ0KDQoJfQ0KDQoNCglmdW5jdGlvbiBnZXRXb3JrQm9vaygpew0KCQlpZiAoJHRoaXMtPnByb3BzWyR0aGlzLT53cmtib29rXVsnc2l6ZSddIDwgU01BTExfQkxPQ0tfVEhSRVNIT0xEKXsNCgkJCSRyb290ZGF0YSA9ICR0aGlzLT5fX3JlYWREYXRhKCR0aGlzLT5wcm9wc1skdGhpcy0+cm9vdGVudHJ5XVsnc3RhcnRCbG9jayddKTsNCgkJCSRzdHJlYW1EYXRhID0gJyc7DQoJCQkkYmxvY2sgPSAkdGhpcy0+cHJvcHNbJHRoaXMtPndya2Jvb2tdWydzdGFydEJsb2NrJ107DQoJCQkkcG9zID0gMDsNCgkJCXdoaWxlICgkYmxvY2sgIT0gLTIpIHsNCgkgIAkJCSAgJHBvcyA9ICRibG9jayAqIFNNQUxMX0JMT0NLX1NJWkU7DQoJCQkJICAkc3RyZWFtRGF0YSAuPSBzdWJzdHIoJHJvb3RkYXRhLCAkcG9zLCBTTUFMTF9CTE9DS19TSVpFKTsNCgkJCQkgICRibG9jayA9ICR0aGlzLT5zbWFsbEJsb2NrQ2hhaW5bJGJsb2NrXTsNCgkJCX0NCgkJCXJldHVybiAkc3RyZWFtRGF0YTsNCgkJfWVsc2V7DQoJCQkkbnVtQmxvY2tzID0gJHRoaXMtPnByb3BzWyR0aGlzLT53cmtib29rXVsnc2l6ZSddIC8gQklHX0JMT0NLX1NJWkU7DQoJCQlpZiAoJHRoaXMtPnByb3BzWyR0aGlzLT53cmtib29rXVsnc2l6ZSddICUgQklHX0JMT0NLX1NJWkUgIT0gMCkgew0KCQkJCSRudW1CbG9ja3MrKzsNCgkJCX0NCg0KCQkJaWYgKCRudW1CbG9ja3MgPT0gMCkgcmV0dXJuICcnOw0KCQkJJHN0cmVhbURhdGEgPSAnJzsNCgkJCSRibG9jayA9ICR0aGlzLT5wcm9wc1skdGhpcy0+d3JrYm9va11bJ3N0YXJ0QmxvY2snXTsNCgkJCSRwb3MgPSAwOw0KCQkJd2hpbGUgKCRibG9jayAhPSAtMikgew0KCQkJICAkcG9zID0gKCRibG9jayArIDEpICogQklHX0JMT0NLX1NJWkU7DQoJCQkgICRzdHJlYW1EYXRhIC49IHN1YnN0cigkdGhpcy0+ZGF0YSwgJHBvcywgQklHX0JMT0NLX1NJWkUpOw0KCQkJICAkYmxvY2sgPSAkdGhpcy0+YmlnQmxvY2tDaGFpblskYmxvY2tdOw0KCQkJfQ0KCQkJcmV0dXJuICRzdHJlYW1EYXRhOw0KCQl9DQoJfQ0KDQp9DQoNCmRlZmluZSgnU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX0JJRkY4JywJCQkgMHg2MDApOw0KZGVmaW5lKCdTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfQklGRjcnLAkJCSAweDUwMCk7DQpkZWZpbmUoJ1NQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9XT1JLQk9PS0dMT0JBTFMnLCAgIDB4NSk7DQpkZWZpbmUoJ1NQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9XT1JLU0hFRVQnLAkJIDB4MTApOw0KZGVmaW5lKCdTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9CT0YnLAkJICAweDgwOSk7DQpkZWZpbmUoJ1NQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX0VPRicsCQkgIDB4MGEpOw0KZGVmaW5lKCdTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9CT1VORFNIRUVUJywgICAweDg1KTsNCmRlZmluZSgnU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfRElNRU5TSU9OJywJMHgyMDApOw0KZGVmaW5lKCdTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9ST1cnLAkJICAweDIwOCk7DQpkZWZpbmUoJ1NQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX0RCQ0VMTCcsCSAgIDB4ZDcpOw0KZGVmaW5lKCdTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9GSUxFUEFTUycsCSAweDJmKTsNCmRlZmluZSgnU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfTk9URScsCQkgMHgxYyk7DQpkZWZpbmUoJ1NQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX1RYTycsCQkgIDB4MWI2KTsNCmRlZmluZSgnU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfUksnLAkJICAgMHg3ZSk7DQpkZWZpbmUoJ1NQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX1JLMicsCQkgIDB4MjdlKTsNCmRlZmluZSgnU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfTVVMUksnLAkJMHhiZCk7DQpkZWZpbmUoJ1NQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX01VTEJMQU5LJywJIDB4YmUpOw0KZGVmaW5lKCdTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9JTkRFWCcsCQkweDIwYik7DQpkZWZpbmUoJ1NQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX1NTVCcsCQkgIDB4ZmMpOw0KZGVmaW5lKCdTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9FWFRTU1QnLAkgICAweGZmKTsNCmRlZmluZSgnU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfQ09OVElOVUUnLAkgMHgzYyk7DQpkZWZpbmUoJ1NQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX0xBQkVMJywJCTB4MjA0KTsNCmRlZmluZSgnU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfTEFCRUxTU1QnLAkgMHhmZCk7DQpkZWZpbmUoJ1NQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX05VTUJFUicsCSAgIDB4MjAzKTsNCmRlZmluZSgnU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfTkFNRScsCQkgMHgxOCk7DQpkZWZpbmUoJ1NQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX0FSUkFZJywJCTB4MjIxKTsNCmRlZmluZSgnU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfU1RSSU5HJywJICAgMHgyMDcpOw0KZGVmaW5lKCdTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9GT1JNVUxBJywJICAweDQwNik7DQpkZWZpbmUoJ1NQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX0ZPUk1VTEEyJywJIDB4Nik7DQpkZWZpbmUoJ1NQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX0ZPUk1BVCcsCSAgIDB4NDFlKTsNCmRlZmluZSgnU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfWEYnLAkJICAgMHhlMCk7DQpkZWZpbmUoJ1NQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX0JPT0xFUlInLAkgIDB4MjA1KTsNCmRlZmluZSgnU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfRk9OVCcsCSAgMHgwMDMxKTsNCmRlZmluZSgnU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfUEFMRVRURScsCSAgMHgwMDkyKTsNCmRlZmluZSgnU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfVU5LTk9XTicsCSAgMHhmZmZmKTsNCmRlZmluZSgnU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfTklORVRFRU5GT1VSJywgMHgyMik7DQpkZWZpbmUoJ1NQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX01FUkdFRENFTExTJywgIDB4RTUpOw0KZGVmaW5lKCdTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVVRDT0ZGU0VUREFZUycgLAkyNTU2OSk7DQpkZWZpbmUoJ1NQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9VVENPRkZTRVREQVlTMTkwNCcsIDI0MTA3KTsNCmRlZmluZSgnU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX01TSU5BREFZJywJCSAgODY0MDApOwpkZWZpbmUoJ1NQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX0hZUEVSJywJICAgICAweDAxYjgpOw0KZGVmaW5lKCdTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9DT0xJTkZPJywJICAgICAweDdkKTsNCmRlZmluZSgnU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfREVGQ09MV0lEVEgnLCAgMHg1NSk7DQpkZWZpbmUoJ1NQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX1NUQU5EQVJEV0lEVEgnLCAweDk5KTsNCmRlZmluZSgnU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX0RFRl9OVU1fRk9STUFUJywJIiVzIik7DQoNCg0KLyoNCiogTWFpbiBDbGFzcw0KKi8NCmNsYXNzIFNwcmVhZHNoZWV0X0V4Y2VsX1JlYWRlciB7DQoNCgkvLyBNSzogQWRkZWQgdG8gbWFrZSBkYXRhIHJldHJpZXZhbCBlYXNpZXINCgl2YXIgJGNvbG5hbWVzID0gYXJyYXkoKTsNCgl2YXIgJGNvbGluZGV4ZXMgPSBhcnJheSgpOw0KCXZhciAkc3RhbmRhcmRDb2xXaWR0aCA9IDA7Cgl2YXIgJGRlZmF1bHRDb2xXaWR0aCA9IDA7Cg0KCWZ1bmN0aW9uIG15SGV4KCRkKSB7DQoJCWlmICgkZCA8IDE2KSByZXR1cm4gIjAiIC4gZGVjaGV4KCRkKTsNCgkJcmV0dXJuIGRlY2hleCgkZCk7DQoJfQ0KCQ0KCWZ1bmN0aW9uIGR1bXBIZXhEYXRhKCRkYXRhLCAkcG9zLCAkbGVuZ3RoKSB7DQoJCSRpbmZvID0gIiI7DQoJCWZvciAoJGkgPSAwOyAkaSA8PSAkbGVuZ3RoOyAkaSsrKSB7DQoJCQkkaW5mbyAuPSAoJGk9PTA\/IiI6IiAiKSAuICR0aGlzLT5teUhleChvcmQoJGRhdGFbJHBvcyArICRpXSkpIC4gKG9yZCgkZGF0YVskcG9zICsgJGldKT4zMT8gIlsiIC4gJGRhdGFbJHBvcyArICRpXSAuICJdIjonJyk7DQoJCX0NCgkJcmV0dXJuICRpbmZvOw0KCX0NCg0KCWZ1bmN0aW9uIGdldENvbCgkY29sKSB7DQoJCWlmIChpc19zdHJpbmcoJGNvbCkpIHsNCgkJCSRjb2wgPSBzdHJ0b2xvd2VyKCRjb2wpOw0KCQkJaWYgKGFycmF5X2tleV9leGlzdHMoJGNvbCwkdGhpcy0+Y29sbmFtZXMpKSB7DQoJCQkJJGNvbCA9ICR0aGlzLT5jb2xuYW1lc1skY29sXTsNCgkJCX0NCgkJfQ0KCQlyZXR1cm4gJGNvbDsNCgl9DQoNCgkvLyBQVUJMSUMgQVBJIEZVTkNUSU9OUw0KCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCglmdW5jdGlvbiB2YWwoJHJvdywkY29sLCRzaGVldD0wKSB7DQoJCSRjb2wgPSAkdGhpcy0+Z2V0Q29sKCRjb2wpOw0KCQlpZiAoYXJyYXlfa2V5X2V4aXN0cygkcm93LCR0aGlzLT5zaGVldHNbJHNoZWV0XVsnY2VsbHMnXSkgJiYgYXJyYXlfa2V5X2V4aXN0cygkY29sLCR0aGlzLT5zaGVldHNbJHNoZWV0XVsnY2VsbHMnXVskcm93XSkpIHsNCgkJCXJldHVybiAkdGhpcy0+c2hlZXRzWyRzaGVldF1bJ2NlbGxzJ11bJHJvd11bJGNvbF07DQoJCX0NCgkJcmV0dXJuICIiOw0KCX0NCglmdW5jdGlvbiB2YWx1ZSgkcm93LCRjb2wsJHNoZWV0PTApIHsNCgkJcmV0dXJuICR0aGlzLT52YWwoJHJvdywkY29sLCRzaGVldCk7DQoJfQ0KCWZ1bmN0aW9uIGluZm8oJHJvdywkY29sLCR0eXBlPScnLCRzaGVldD0wKSB7DQoJCSRjb2wgPSAkdGhpcy0+Z2V0Q29sKCRjb2wpOw0KCQlpZiAoYXJyYXlfa2V5X2V4aXN0cygnY2VsbHNJbmZvJywkdGhpcy0+c2hlZXRzWyRzaGVldF0pDQoJCQkJJiYgYXJyYXlfa2V5X2V4aXN0cygkcm93LCR0aGlzLT5zaGVldHNbJHNoZWV0XVsnY2VsbHNJbmZvJ10pDQoJCQkJJiYgYXJyYXlfa2V5X2V4aXN0cygkY29sLCR0aGlzLT5zaGVldHNbJHNoZWV0XVsnY2VsbHNJbmZvJ11bJHJvd10pDQoJCQkJJiYgYXJyYXlfa2V5X2V4aXN0cygkdHlwZSwkdGhpcy0+c2hlZXRzWyRzaGVldF1bJ2NlbGxzSW5mbyddWyRyb3ddWyRjb2xdKSkgew0KCQkJcmV0dXJuICR0aGlzLT5zaGVldHNbJHNoZWV0XVsnY2VsbHNJbmZvJ11bJHJvd11bJGNvbF1bJHR5cGVdOw0KCQl9DQoJCXJldHVybiAiIjsNCgl9DQoJZnVuY3Rpb24gdHlwZSgkcm93LCRjb2wsJHNoZWV0PTApIHsNCgkJcmV0dXJuICR0aGlzLT5pbmZvKCRyb3csJGNvbCwndHlwZScsJHNoZWV0KTsNCgl9DQoJZnVuY3Rpb24gcmF3KCRyb3csJGNvbCwkc2hlZXQ9MCkgew0KCQlyZXR1cm4gJHRoaXMtPmluZm8oJHJvdywkY29sLCdyYXcnLCRzaGVldCk7DQoJfQ0KCWZ1bmN0aW9uIHJvd3NwYW4oJHJvdywkY29sLCRzaGVldD0wKSB7DQoJCSR2YWwgPSAkdGhpcy0+aW5mbygkcm93LCRjb2wsJ3Jvd3NwYW4nLCRzaGVldCk7DQoJCWlmICgkdmFsPT0iIikgeyByZXR1cm4gMTsgfQ0KCQlyZXR1cm4gJHZhbDsNCgl9DQoJZnVuY3Rpb24gY29sc3Bhbigkcm93LCRjb2wsJHNoZWV0PTApIHsNCgkJJHZhbCA9ICR0aGlzLT5pbmZvKCRyb3csJGNvbCwnY29sc3BhbicsJHNoZWV0KTsNCgkJaWYgKCR2YWw9PSIiKSB7IHJldHVybiAxOyB9DQoJCXJldHVybiAkdmFsOw0KCX0NCglmdW5jdGlvbiBoeXBlcmxpbmsoJHJvdywkY29sLCRzaGVldD0wKSB7DQoJCSRsaW5rID0gJHRoaXMtPnNoZWV0c1skc2hlZXRdWydjZWxsc0luZm8nXVskcm93XVskY29sXVsnaHlwZXJsaW5rJ107DQoJCWlmICgkbGluaykgew0KCQkJcmV0dXJuICRsaW5rWydsaW5rJ107DQoJCX0NCgkJcmV0dXJuICcnOw0KCX0NCglmdW5jdGlvbiByb3djb3VudCgkc2hlZXQ9MCkgew0KCQlyZXR1cm4gJHRoaXMtPnNoZWV0c1skc2hlZXRdWydudW1Sb3dzJ107DQoJfQ0KCWZ1bmN0aW9uIGNvbGNvdW50KCRzaGVldD0wKSB7DQoJCXJldHVybiAkdGhpcy0+c2hlZXRzWyRzaGVldF1bJ251bUNvbHMnXTsNCgl9DQoJZnVuY3Rpb24gY29sd2lkdGgoJGNvbCwkc2hlZXQ9MCkgew0KCQkvLyBDb2wgd2lkdGggaXMgYWN0dWFsbHkgdGhlIHdpZHRoIG9mIHRoZSBudW1iZXIgMC4gU28gd2UgaGF2ZSB0byBlc3RpbWF0ZSBhbmQgY29tZSBjbG9zZQ0KCQlyZXR1cm4gJHRoaXMtPmNvbEluZm9bJHNoZWV0XVskY29sXVsnd2lkdGgnXS85MTQyKjIwMDsgDQoJfQ0KCWZ1bmN0aW9uIGNvbGhpZGRlbigkY29sLCRzaGVldD0wKSB7DQoJCXJldHVybiAhISR0aGlzLT5jb2xJbmZvWyRzaGVldF1bJGNvbF1bJ2hpZGRlbiddOw0KCX0NCglmdW5jdGlvbiByb3doZWlnaHQoJHJvdywkc2hlZXQ9MCkgew0KCQlyZXR1cm4gJHRoaXMtPnJvd0luZm9bJHNoZWV0XVskcm93XVsnaGVpZ2h0J107DQoJfQ0KCWZ1bmN0aW9uIHJvd2hpZGRlbigkcm93LCRzaGVldD0wKSB7DQoJCXJldHVybiAhISR0aGlzLT5yb3dJbmZvWyRzaGVldF1bJHJvd11bJ2hpZGRlbiddOw0KCX0NCgkNCgkvLyBHRVQgVEhFIENTUyBGT1IgRk9STUFUVElORw0KCS8vID09PT09PT09PT09PT09PT09PT09PT09PT09DQoJZnVuY3Rpb24gc3R5bGUoJHJvdywkY29sLCRzaGVldD0wLCRwcm9wZXJ0aWVzPScnKSB7DQoJCSRjc3MgPSAiIjsNCgkJJGZvbnQ9JHRoaXMtPmZvbnQoJHJvdywkY29sLCRzaGVldCk7DQoJCWlmICgkZm9udCE9IiIpIHsNCgkJCSRjc3MgLj0gImZvbnQtZmFtaWx5OiRmb250OyI7DQoJCX0NCgkJJGFsaWduPSR0aGlzLT5hbGlnbigkcm93LCRjb2wsJHNoZWV0KTsNCgkJaWYgKCRhbGlnbiE9IiIpIHsNCgkJCSRjc3MgLj0gInRleHQtYWxpZ246JGFsaWduOyI7DQoJCX0NCgkJJGhlaWdodD0kdGhpcy0+aGVpZ2h0KCRyb3csJGNvbCwkc2hlZXQpOw0KCQlpZiAoJGhlaWdodCE9IiIpIHsNCgkJCSRjc3MgLj0gImZvbnQtc2l6ZTokaGVpZ2h0Ii4icHg7IjsNCgkJfQ0KCQkkYmdjb2xvcj0kdGhpcy0+YmdDb2xvcigkcm93LCRjb2wsJHNoZWV0KTsNCgkJaWYgKCRiZ2NvbG9yIT0iIikgew0KCQkJJGJnY29sb3IgPSAkdGhpcy0+Y29sb3JzWyRiZ2NvbG9yXTsNCgkJCSRjc3MgLj0gImJhY2tncm91bmQtY29sb3I6JGJnY29sb3I7IjsNCgkJfQ0KCQkkY29sb3I9JHRoaXMtPmNvbG9yKCRyb3csJGNvbCwkc2hlZXQpOw0KCQlpZiAoJGNvbG9yIT0iIikgew0KCQkJJGNzcyAuPSAiY29sb3I6JGNvbG9yOyI7DQoJCX0NCgkJJGJvbGQ9JHRoaXMtPmJvbGQoJHJvdywkY29sLCRzaGVldCk7DQoJCWlmICgkYm9sZCkgew0KCQkJJGNzcyAuPSAiZm9udC13ZWlnaHQ6Ym9sZDsiOw0KCQl9DQoJCSRpdGFsaWM9JHRoaXMtPml0YWxpYygkcm93LCRjb2wsJHNoZWV0KTsNCgkJaWYgKCRpdGFsaWMpIHsNCgkJCSRjc3MgLj0gImZvbnQtc3R5bGU6aXRhbGljOyI7DQoJCX0NCgkJJHVuZGVybGluZT0kdGhpcy0+dW5kZXJsaW5lKCRyb3csJGNvbCwkc2hlZXQpOw0KCQlpZiAoJHVuZGVybGluZSkgew0KCQkJJGNzcyAuPSAidGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTsiOw0KCQl9DQoJCS8vIEJvcmRlcnMNCgkJJGJMZWZ0ID0gJHRoaXMtPmJvcmRlckxlZnQoJHJvdywkY29sLCRzaGVldCk7DQoJCSRiUmlnaHQgPSAkdGhpcy0+Ym9yZGVyUmlnaHQoJHJvdywkY29sLCRzaGVldCk7DQoJCSRiVG9wID0gJHRoaXMtPmJvcmRlclRvcCgkcm93LCRjb2wsJHNoZWV0KTsNCgkJJGJCb3R0b20gPSAkdGhpcy0+Ym9yZGVyQm90dG9tKCRyb3csJGNvbCwkc2hlZXQpOw0KCQkkYkxlZnRDb2wgPSAkdGhpcy0+Ym9yZGVyTGVmdENvbG9yKCRyb3csJGNvbCwkc2hlZXQpOw0KCQkkYlJpZ2h0Q29sID0gJHRoaXMtPmJvcmRlclJpZ2h0Q29sb3IoJHJvdywkY29sLCRzaGVldCk7DQoJCSRiVG9wQ29sID0gJHRoaXMtPmJvcmRlclRvcENvbG9yKCRyb3csJGNvbCwkc2hlZXQpOw0KCQkkYkJvdHRvbUNvbCA9ICR0aGlzLT5ib3JkZXJCb3R0b21Db2xvcigkcm93LCRjb2wsJHNoZWV0KTsNCgkJLy8gVHJ5IHRvIG91dHB1dCB0aGUgbWluaW1hbCByZXF1aXJlZCBzdHlsZQ0KCQlpZiAoJGJMZWZ0IT0iIiAmJiAkYkxlZnQ9PSRiUmlnaHQgJiYgJGJSaWdodD09JGJUb3AgJiYgJGJUb3A9PSRiQm90dG9tKSB7DQoJCQkkY3NzIC49ICJib3JkZXI6IiAuICR0aGlzLT5saW5lU3R5bGVzQ3NzWyRiTGVmdF0gLiI7IjsNCgkJfQ0KCQllbHNlIHsNCgkJCWlmICgkYkxlZnQhPSIiKSB7ICRjc3MgLj0gImJvcmRlci1sZWZ0OiIgLiAkdGhpcy0+bGluZVN0eWxlc0Nzc1skYkxlZnRdIC4iOyI7IH0NCgkJCWlmICgkYlJpZ2h0IT0iIikgeyAkY3NzIC49ICJib3JkZXItcmlnaHQ6IiAuICR0aGlzLT5saW5lU3R5bGVzQ3NzWyRiUmlnaHRdIC4iOyI7IH0NCgkJCWlmICgkYlRvcCE9IiIpIHsgJGNzcyAuPSAiYm9yZGVyLXRvcDoiIC4gJHRoaXMtPmxpbmVTdHlsZXNDc3NbJGJUb3BdIC4iOyI7IH0NCgkJCWlmICgkYkJvdHRvbSE9IiIpIHsgJGNzcyAuPSAiYm9yZGVyLWJvdHRvbToiIC4gJHRoaXMtPmxpbmVTdHlsZXNDc3NbJGJCb3R0b21dIC4iOyI7IH0NCgkJfQ0KCQkvLyBPbmx5IG91dHB1dCBib3JkZXIgY29sb3JzIGlmIHRoZXJlIGlzIGFuIGFjdHVhbCBib3JkZXIgc3BlY2lmaWVkDQoJCWlmICgkYkxlZnQhPSIiICYmICRiTGVmdENvbCE9IiIpIHsgJGNzcyAuPSAiYm9yZGVyLWxlZnQtY29sb3I6IiAuICRiTGVmdENvbCAuIjsiOyB9DQoJCWlmICgkYlJpZ2h0IT0iIiAmJiAkYlJpZ2h0Q29sIT0iIikgeyAkY3NzIC49ICJib3JkZXItcmlnaHQtY29sb3I6IiAuICRiUmlnaHRDb2wgLiI7IjsgfQ0KCQlpZiAoJGJUb3AhPSIiICYmICRiVG9wQ29sIT0iIikgeyAkY3NzIC49ICJib3JkZXItdG9wLWNvbG9yOiIgLiAkYlRvcENvbCAuICI7IjsgfQ0KCQlpZiAoJGJCb3R0b20hPSIiICYmICRiQm90dG9tQ29sIT0iIikgeyAkY3NzIC49ICJib3JkZXItYm90dG9tLWNvbG9yOiIgLiAkYkJvdHRvbUNvbCAuIjsiOyB9DQoJCQ0KCQlyZXR1cm4gJGNzczsNCgl9DQoJDQoJLy8gRk9STUFUIFBST1BFUlRJRVMNCgkvLyA9PT09PT09PT09PT09PT09PQ0KCWZ1bmN0aW9uIGZvcm1hdCgkcm93LCRjb2wsJHNoZWV0PTApIHsNCgkJcmV0dXJuICR0aGlzLT5pbmZvKCRyb3csJGNvbCwnZm9ybWF0Jywkc2hlZXQpOw0KCX0NCglmdW5jdGlvbiBmb3JtYXRJbmRleCgkcm93LCRjb2wsJHNoZWV0PTApIHsNCgkJcmV0dXJuICR0aGlzLT5pbmZvKCRyb3csJGNvbCwnZm9ybWF0SW5kZXgnLCRzaGVldCk7DQoJfQ0KCWZ1bmN0aW9uIGZvcm1hdENvbG9yKCRyb3csJGNvbCwkc2hlZXQ9MCkgew0KCQlyZXR1cm4gJHRoaXMtPmluZm8oJHJvdywkY29sLCdmb3JtYXRDb2xvcicsJHNoZWV0KTsNCgl9DQoJDQoJLy8gQ0VMTCAoWEYpIFBST1BFUlRJRVMNCgkvLyA9PT09PT09PT09PT09PT09PT09PQ0KCWZ1bmN0aW9uIHhmUmVjb3JkKCRyb3csJGNvbCwkc2hlZXQ9MCkgew0KCQkkeGZJbmRleCA9ICR0aGlzLT5pbmZvKCRyb3csJGNvbCwneGZJbmRleCcsJHNoZWV0KTsNCgkJaWYgKCR4ZkluZGV4IT0iIikgew0KCQkJcmV0dXJuICR0aGlzLT54ZlJlY29yZHNbJHhmSW5kZXhdOw0KCQl9DQoJCXJldHVybiBudWxsOw0KCX0NCglmdW5jdGlvbiB4ZlByb3BlcnR5KCRyb3csJGNvbCwkc2hlZXQsJHByb3ApIHsNCgkJJHhmUmVjb3JkID0gJHRoaXMtPnhmUmVjb3JkKCRyb3csJGNvbCwkc2hlZXQpOw0KCQlpZiAoJHhmUmVjb3JkIT1udWxsKSB7DQoJCQlyZXR1cm4gJHhmUmVjb3JkWyRwcm9wXTsNCgkJfQ0KCQlyZXR1cm4gIiI7DQoJfQ0KCWZ1bmN0aW9uIGFsaWduKCRyb3csJGNvbCwkc2hlZXQ9MCkgew0KCQlyZXR1cm4gJHRoaXMtPnhmUHJvcGVydHkoJHJvdywkY29sLCRzaGVldCwnYWxpZ24nKTsNCgl9DQoJZnVuY3Rpb24gYmdDb2xvcigkcm93LCRjb2wsJHNoZWV0PTApIHsNCgkJcmV0dXJuICR0aGlzLT54ZlByb3BlcnR5KCRyb3csJGNvbCwkc2hlZXQsJ2JnQ29sb3InKTsNCgl9DQoJZnVuY3Rpb24gYm9yZGVyTGVmdCgkcm93LCRjb2wsJHNoZWV0PTApIHsNCgkJcmV0dXJuICR0aGlzLT54ZlByb3BlcnR5KCRyb3csJGNvbCwkc2hlZXQsJ2JvcmRlckxlZnQnKTsNCgl9DQoJZnVuY3Rpb24gYm9yZGVyUmlnaHQoJHJvdywkY29sLCRzaGVldD0wKSB7DQoJCXJldHVybiAkdGhpcy0+eGZQcm9wZXJ0eSgkcm93LCRjb2wsJHNoZWV0LCdib3JkZXJSaWdodCcpOw0KCX0NCglmdW5jdGlvbiBib3JkZXJUb3AoJHJvdywkY29sLCRzaGVldD0wKSB7DQoJCXJldHVybiAkdGhpcy0+eGZQcm9wZXJ0eSgkcm93LCRjb2wsJHNoZWV0LCdib3JkZXJUb3AnKTsNCgl9DQoJZnVuY3Rpb24gYm9yZGVyQm90dG9tKCRyb3csJGNvbCwkc2hlZXQ9MCkgew0KCQlyZXR1cm4gJHRoaXMtPnhmUHJvcGVydHkoJHJvdywkY29sLCRzaGVldCwnYm9yZGVyQm90dG9tJyk7DQoJfQ0KCWZ1bmN0aW9uIGJvcmRlckxlZnRDb2xvcigkcm93LCRjb2wsJHNoZWV0PTApIHsNCgkJcmV0dXJuICR0aGlzLT5jb2xvcnNbJHRoaXMtPnhmUHJvcGVydHkoJHJvdywkY29sLCRzaGVldCwnYm9yZGVyTGVmdENvbG9yJyldOw0KCX0NCglmdW5jdGlvbiBib3JkZXJSaWdodENvbG9yKCRyb3csJGNvbCwkc2hlZXQ9MCkgew0KCQlyZXR1cm4gJHRoaXMtPmNvbG9yc1skdGhpcy0+eGZQcm9wZXJ0eSgkcm93LCRjb2wsJHNoZWV0LCdib3JkZXJSaWdodENvbG9yJyldOw0KCX0NCglmdW5jdGlvbiBib3JkZXJUb3BDb2xvcigkcm93LCRjb2wsJHNoZWV0PTApIHsNCgkJcmV0dXJuICR0aGlzLT5jb2xvcnNbJHRoaXMtPnhmUHJvcGVydHkoJHJvdywkY29sLCRzaGVldCwnYm9yZGVyVG9wQ29sb3InKV07DQoJfQ0KCWZ1bmN0aW9uIGJvcmRlckJvdHRvbUNvbG9yKCRyb3csJGNvbCwkc2hlZXQ9MCkgew0KCQlyZXR1cm4gJHRoaXMtPmNvbG9yc1skdGhpcy0+eGZQcm9wZXJ0eSgkcm93LCRjb2wsJHNoZWV0LCdib3JkZXJCb3R0b21Db2xvcicpXTsNCgl9DQoNCgkvLyBGT05UIFBST1BFUlRJRVMNCgkvLyA9PT09PT09PT09PT09PT0NCglmdW5jdGlvbiBmb250UmVjb3JkKCRyb3csJGNvbCwkc2hlZXQ9MCkgew0KCSAgICAkeGZSZWNvcmQgPSAkdGhpcy0+eGZSZWNvcmQoJHJvdywkY29sLCRzaGVldCk7DQoJCWlmICgkeGZSZWNvcmQhPW51bGwpIHsNCgkJCSRmb250ID0gJHhmUmVjb3JkWydmb250SW5kZXgnXTsNCgkJCWlmICgkZm9udCE9bnVsbCkgew0KCQkJCXJldHVybiAkdGhpcy0+Zm9udFJlY29yZHNbJGZvbnRdOw0KCQkJfQ0KCQl9DQoJCXJldHVybiBudWxsOw0KCX0NCglmdW5jdGlvbiBmb250UHJvcGVydHkoJHJvdywkY29sLCRzaGVldD0wLCRwcm9wKSB7DQoJCSRmb250ID0gJHRoaXMtPmZvbnRSZWNvcmQoJHJvdywkY29sLCRzaGVldCk7DQoJCWlmICgkZm9udCE9bnVsbCkgew0KCQkJcmV0dXJuICRmb250WyRwcm9wXTsNCgkJfQ0KCQlyZXR1cm4gZmFsc2U7DQoJfQ0KCWZ1bmN0aW9uIGZvbnRJbmRleCgkcm93LCRjb2wsJHNoZWV0PTApIHsNCgkJcmV0dXJuICR0aGlzLT54ZlByb3BlcnR5KCRyb3csJGNvbCwkc2hlZXQsJ2ZvbnRJbmRleCcpOw0KCX0NCglmdW5jdGlvbiBjb2xvcigkcm93LCRjb2wsJHNoZWV0PTApIHsNCgkJJGZvcm1hdENvbG9yID0gJHRoaXMtPmZvcm1hdENvbG9yKCRyb3csJGNvbCwkc2hlZXQpOw0KCQlpZiAoJGZvcm1hdENvbG9yIT0iIikgew0KCQkJcmV0dXJuICRmb3JtYXRDb2xvcjsNCgkJfQ0KCQkkY2kgPSAkdGhpcy0+Zm9udFByb3BlcnR5KCRyb3csJGNvbCwkc2hlZXQsJ2NvbG9yJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gJHRoaXMtPnJhd0NvbG9yKCRjaSk7CiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiByYXdDb2xvcigkY2kpIHsKCQlpZiAoKCRjaSA8PiAweDdGRkYpICYmICgkY2kgPD4gJycpKSB7DQoJCQlyZXR1cm4gJHRoaXMtPmNvbG9yc1skY2ldOw0KCQl9DQoJCXJldHVybiAiIjsNCgl9DQoJZnVuY3Rpb24gYm9sZCgkcm93LCRjb2wsJHNoZWV0PTApIHsNCgkJcmV0dXJuICR0aGlzLT5mb250UHJvcGVydHkoJHJvdywkY29sLCRzaGVldCwnYm9sZCcpOw0KCX0NCglmdW5jdGlvbiBpdGFsaWMoJHJvdywkY29sLCRzaGVldD0wKSB7DQoJCXJldHVybiAkdGhpcy0+Zm9udFByb3BlcnR5KCRyb3csJGNvbCwkc2hlZXQsJ2l0YWxpYycpOw0KCX0NCglmdW5jdGlvbiB1bmRlcmxpbmUoJHJvdywkY29sLCRzaGVldD0wKSB7DQoJCXJldHVybiAkdGhpcy0+Zm9udFByb3BlcnR5KCRyb3csJGNvbCwkc2hlZXQsJ3VuZGVyJyk7DQoJfQ0KCWZ1bmN0aW9uIGhlaWdodCgkcm93LCRjb2wsJHNoZWV0PTApIHsNCgkJcmV0dXJuICR0aGlzLT5mb250UHJvcGVydHkoJHJvdywkY29sLCRzaGVldCwnaGVpZ2h0Jyk7DQoJfQ0KCWZ1bmN0aW9uIGZvbnQoJHJvdywkY29sLCRzaGVldD0wKSB7DQoJCXJldHVybiAkdGhpcy0+Zm9udFByb3BlcnR5KCRyb3csJGNvbCwkc2hlZXQsJ2ZvbnQnKTsNCgl9DQoJDQoJLy8gRFVNUCBBTiBIVE1MIFRBQkxFIE9GIFRIRSBFTlRJUkUgWExTIERBVEENCgkvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCWZ1bmN0aW9uIGR1bXAoJHJvd19udW1iZXJzPWZhbHNlLCRjb2xfbGV0dGVycz1mYWxzZSwkc2hlZXQ9MCwkdGFibGVfY2xhc3M9J2V4Y2VsJykgew0KCQkkb3V0ID0gIjx0YWJsZSBjbGFzcz1cIiR0YWJsZV9jbGFzc1wiIGNlbGxzcGFjaW5nPTA+IjsNCgkJaWYgKCRjb2xfbGV0dGVycykgew0KCQkJJG91dCAuPSAiPHRoZWFkPlxuXHQ8dHI+IjsNCgkJCWlmICgkcm93X251bWJlcnMpIHsNCgkJCQkkb3V0IC49ICJcblx0XHQ8dGg+Jm5ic3A8L3RoPiI7DQoJCQl9DQoJCQlmb3IoJGk9MTskaTw9JHRoaXMtPmNvbGNvdW50KCRzaGVldCk7JGkrKykgew0KCQkJCSRzdHlsZSA9ICJ3aWR0aDoiIC4gKCR0aGlzLT5jb2x3aWR0aCgkaSwkc2hlZXQpKjEpIC4gInB4OyI7DQoJCQkJaWYgKCR0aGlzLT5jb2xoaWRkZW4oJGksJHNoZWV0KSkgew0KCQkJCQkkc3R5bGUgLj0gImRpc3BsYXk6bm9uZTsiOw0KCQkJCX0NCgkJCQkkb3V0IC49ICJcblx0XHQ8dGggc3R5bGU9XCIkc3R5bGVcIj4iIC4gc3RydG91cHBlcigkdGhpcy0+Y29saW5kZXhlc1skaV0pIC4gIjwvdGg+IjsNCgkJCX0NCgkJCSRvdXQgLj0gIjwvdHI+PC90aGVhZD5cbiI7DQoJCX0NCgkJDQoJCSRvdXQgLj0gIjx0Ym9keT5cbiI7DQoJCWZvcigkcm93PTE7JHJvdzw9JHRoaXMtPnJvd2NvdW50KCRzaGVldCk7JHJvdysrKSB7DQoJCQkkcm93aGVpZ2h0ID0gJHRoaXMtPnJvd2hlaWdodCgkcm93LCRzaGVldCk7DQoJCQkkc3R5bGUgPSAiaGVpZ2h0OiIgLiAoJHJvd2hlaWdodCooNC8zKSkgLiAicHg7IjsNCgkJCWlmICgkdGhpcy0+cm93aGlkZGVuKCRyb3csJHNoZWV0KSkgew0KCQkJCSRzdHlsZSAuPSAiZGlzcGxheTpub25lOyI7DQoJCQl9DQoJCQkkb3V0IC49ICJcblx0PHRyIHN0eWxlPVwiJHN0eWxlXCI+IjsNCgkJCWlmICgkcm93X251bWJlcnMpIHsNCgkJCQkkb3V0IC49ICJcblx0XHQ8dGg+JHJvdzwvdGg+IjsNCgkJCX0NCgkJCWZvcigkY29sPTE7JGNvbDw9JHRoaXMtPmNvbGNvdW50KCRzaGVldCk7JGNvbCsrKSB7DQoJCQkJLy8gQWNjb3VudCBmb3IgUm93c3BhbnMvQ29sc3BhbnMNCgkJCQkkcm93c3BhbiA9ICR0aGlzLT5yb3dzcGFuKCRyb3csJGNvbCwkc2hlZXQpOw0KCQkJCSRjb2xzcGFuID0gJHRoaXMtPmNvbHNwYW4oJHJvdywkY29sLCRzaGVldCk7DQoJCQkJZm9yKCRpPTA7JGk8JHJvd3NwYW47JGkrKykgew0KCQkJCQlmb3IoJGo9MDskajwkY29sc3BhbjskaisrKSB7DQoJCQkJCQlpZiAoJGk+MCB8fCAkaj4wKSB7DQoJCQkJCQkJJHRoaXMtPnNoZWV0c1skc2hlZXRdWydjZWxsc0luZm8nXVskcm93KyRpXVskY29sKyRqXVsnZG9udHByaW50J109MTsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCX0NCgkJCQlpZighJHRoaXMtPnNoZWV0c1skc2hlZXRdWydjZWxsc0luZm8nXVskcm93XVskY29sXVsnZG9udHByaW50J10pIHsNCgkJCQkJJHN0eWxlID0gJHRoaXMtPnN0eWxlKCRyb3csJGNvbCwkc2hlZXQpOw0KCQkJCQlpZiAoJHRoaXMtPmNvbGhpZGRlbigkY29sLCRzaGVldCkpIHsNCgkJCQkJCSRzdHlsZSAuPSAiZGlzcGxheTpub25lOyI7DQoJCQkJCX0NCgkJCQkJJG91dCAuPSAiXG5cdFx0PHRkIHN0eWxlPVwiJHN0eWxlXCIiIC4gKCRjb2xzcGFuID4gMT8iIGNvbHNwYW49JGNvbHNwYW4iOiIiKSAuICgkcm93c3BhbiA+IDE\/IiByb3dzcGFuPSRyb3dzcGFuIjoiIikgLiAiPiI7DQoJCQkJCSR2YWwgPSAkdGhpcy0+dmFsKCRyb3csJGNvbCwkc2hlZXQpOw0KCQkJCQlpZiAoJHZhbD09JycpIHsgJHZhbD0iJm5ic3A7IjsgfQ0KCQkJCQllbHNlIHsgDQoJCQkJCQkkdmFsID0gaHRtbGVudGl0aWVzKCR2YWwpOyANCgkJCQkJCSRsaW5rID0gJHRoaXMtPmh5cGVybGluaygkcm93LCRjb2wsJHNoZWV0KTsNCgkJCQkJCWlmICgkbGluayE9JycpIHsNCgkJCQkJCQkkdmFsID0gIjxhIGhyZWY9XCIkbGlua1wiPiR2YWw8L2E+IjsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCQkkb3V0IC49ICI8bm9icj4iLm5sMmJyKCR2YWwpLiI8L25vYnI+IjsNCgkJCQkJJG91dCAuPSAiPC90ZD4iOw0KCQkJCX0NCgkJCX0NCgkJCSRvdXQgLj0gIjwvdHI+XG4iOw0KCQl9DQoJCSRvdXQgLj0gIjwvdGJvZHk+PC90YWJsZT4iOw0KCQlyZXR1cm4gJG91dDsNCgl9DQoJDQoJLy8gLS0tLS0tLS0tLS0tLS0NCgkvLyBFTkQgUFVCTElDIEFQSQ0KDQoNCgl2YXIgJGJvdW5kc2hlZXRzID0gYXJyYXkoKTsNCgl2YXIgJGZvcm1hdFJlY29yZHMgPSBhcnJheSgpOw0KCXZhciAkZm9udFJlY29yZHMgPSBhcnJheSgpOw0KCXZhciAkeGZSZWNvcmRzID0gYXJyYXkoKTsNCgl2YXIgJGNvbEluZm8gPSBhcnJheSgpOwogICAJdmFyICRyb3dJbmZvID0gYXJyYXkoKTsNCgkNCgl2YXIgJHNzdCA9IGFycmF5KCk7DQoJdmFyICRzaGVldHMgPSBhcnJheSgpOw0KDQoJdmFyICRkYXRhOw0KCXZhciAkX29sZTsNCgl2YXIgJF9kZWZhdWx0RW5jb2RpbmcgPSAiVVRGLTgiOw0KCXZhciAkX2RlZmF1bHRGb3JtYXQgPSBTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfREVGX05VTV9GT1JNQVQ7DQoJdmFyICRfY29sdW1uc0Zvcm1hdCA9IGFycmF5KCk7DQoJdmFyICRfcm93b2Zmc2V0ID0gMTsNCgl2YXIgJF9jb2xvZmZzZXQgPSAxOw0KDQoJLyoqDQoJICogTGlzdCBvZiBkZWZhdWx0IGRhdGUgZm9ybWF0cyB1c2VkIGJ5IEV4Y2VsDQoJICovDQoJdmFyICRkYXRlRm9ybWF0cyA9IGFycmF5ICgNCgkJMHhlID0+ICJtL2QvWSIsDQoJCTB4ZiA9PiAiTS1kLVkiLA0KCQkweDEwID0+ICJkLU0iLA0KCQkweDExID0+ICJNLVkiLA0KCQkweDEyID0+ICJoOmkgYSIsDQoJCTB4MTMgPT4gImg6aTpzIGEiLA0KCQkweDE0ID0+ICJIOmkiLA0KCQkweDE1ID0+ICJIOmk6cyIsDQoJCTB4MTYgPT4gImQvbS9ZIEg6aSIsDQoJCTB4MmQgPT4gImk6cyIsDQoJCTB4MmUgPT4gIkg6aTpzIiwNCgkJMHgyZiA9PiAiaTpzLlMiDQoJKTsNCg0KCS8qKg0KCSAqIERlZmF1bHQgbnVtYmVyIGZvcm1hdHMgdXNlZCBieSBFeGNlbA0KCSAqLw0KCXZhciAkbnVtYmVyRm9ybWF0cyA9IGFycmF5KA0KCQkweDEgPT4gIjAiLA0KCQkweDIgPT4gIjAuMDAiLA0KCQkweDMgPT4gIiMsIyMwIiwNCgkJMHg0ID0+ICIjLCMjMC4wMCIsDQoJCTB4NSA9PiAiXCQjLCMjMDsoXCQjLCMjMCkiLA0KCQkweDYgPT4gIlwkIywjIzA7W1JlZF0oXCQjLCMjMCkiLA0KCQkweDcgPT4gIlwkIywjIzAuMDA7KFwkIywjIzAuMDApIiwNCgkJMHg4ID0+ICJcJCMsIyMwLjAwO1tSZWRdKFwkIywjIzAuMDApIiwNCgkJMHg5ID0+ICIwJSIsDQoJCTB4YSA9PiAiMC4wMCUiLA0KCQkweGIgPT4gIjAuMDBFKzAwIiwNCgkJMHgyNSA9PiAiIywjIzA7KCMsIyMwKSIsDQoJCTB4MjYgPT4gIiMsIyMwO1tSZWRdKCMsIyMwKSIsDQoJCTB4MjcgPT4gIiMsIyMwLjAwOygjLCMjMC4wMCkiLA0KCQkweDI4ID0+ICIjLCMjMC4wMDtbUmVkXSgjLCMjMC4wMCkiLA0KCQkweDI5ID0+ICIjLCMjMDsoIywjIzApIiwgIC8vIE5vdCBleGFjdGx5DQoJCTB4MmEgPT4gIlwkIywjIzA7KFwkIywjIzApIiwgIC8vIE5vdCBleGFjdGx5DQoJCTB4MmIgPT4gIiMsIyMwLjAwOygjLCMjMC4wMCkiLCAgLy8gTm90IGV4YWN0bHkNCgkJMHgyYyA9PiAiXCQjLCMjMC4wMDsoXCQjLCMjMC4wMCkiLCAgLy8gTm90IGV4YWN0bHkNCgkJMHgzMCA9PiAiIyMwLjBFKzAiDQoJKTsNCg0KICAgIHZhciAkY29sb3JzID0gQXJyYXkoDQogICAgICAgIDB4MDAgPT4gIiMwMDAwMDAiLA0KICAgICAgICAweDAxID0+ICIjRkZGRkZGIiwNCiAgICAgICAgMHgwMiA9PiAiI0ZGMDAwMCIsDQogICAgICAgIDB4MDMgPT4gIiMwMEZGMDAiLA0KICAgICAgICAweDA0ID0+ICIjMDAwMEZGIiwNCiAgICAgICAgMHgwNSA9PiAiI0ZGRkYwMCIsDQogICAgICAgIDB4MDYgPT4gIiNGRjAwRkYiLA0KICAgICAgICAweDA3ID0+ICIjMDBGRkZGIiwNCiAgICAgICAgMHgwOCA9PiAiIzAwMDAwMCIsDQogICAgICAgIDB4MDkgPT4gIiNGRkZGRkYiLA0KICAgICAgICAweDBBID0+ICIjRkYwMDAwIiwNCiAgICAgICAgMHgwQiA9PiAiIzAwRkYwMCIsDQogICAgICAgIDB4MEMgPT4gIiMwMDAwRkYiLA0KICAgICAgICAweDBEID0+ICIjRkZGRjAwIiwNCiAgICAgICAgMHgwRSA9PiAiI0ZGMDBGRiIsDQogICAgICAgIDB4MEYgPT4gIiMwMEZGRkYiLA0KICAgICAgICAweDEwID0+ICIjODAwMDAwIiwNCiAgICAgICAgMHgxMSA9PiAiIzAwODAwMCIsDQogICAgICAgIDB4MTIgPT4gIiMwMDAwODAiLA0KICAgICAgICAweDEzID0+ICIjODA4MDAwIiwNCiAgICAgICAgMHgxNCA9PiAiIzgwMDA4MCIsDQogICAgICAgIDB4MTUgPT4gIiMwMDgwODAiLA0KICAgICAgICAweDE2ID0+ICIjQzBDMEMwIiwNCiAgICAgICAgMHgxNyA9PiAiIzgwODA4MCIsDQogICAgICAgIDB4MTggPT4gIiM5OTk5RkYiLA0KICAgICAgICAweDE5ID0+ICIjOTkzMzY2IiwNCiAgICAgICAgMHgxQSA9PiAiI0ZGRkZDQyIsDQogICAgICAgIDB4MUIgPT4gIiNDQ0ZGRkYiLA0KICAgICAgICAweDFDID0+ICIjNjYwMDY2IiwNCiAgICAgICAgMHgxRCA9PiAiI0ZGODA4MCIsDQogICAgICAgIDB4MUUgPT4gIiMwMDY2Q0MiLA0KICAgICAgICAweDFGID0+ICIjQ0NDQ0ZGIiwNCiAgICAgICAgMHgyMCA9PiAiIzAwMDA4MCIsDQogICAgICAgIDB4MjEgPT4gIiNGRjAwRkYiLA0KICAgICAgICAweDIyID0+ICIjRkZGRjAwIiwNCiAgICAgICAgMHgyMyA9PiAiIzAwRkZGRiIsDQogICAgICAgIDB4MjQgPT4gIiM4MDAwODAiLA0KICAgICAgICAweDI1ID0+ICIjODAwMDAwIiwNCiAgICAgICAgMHgyNiA9PiAiIzAwODA4MCIsDQogICAgICAgIDB4MjcgPT4gIiMwMDAwRkYiLA0KICAgICAgICAweDI4ID0+ICIjMDBDQ0ZGIiwNCiAgICAgICAgMHgyOSA9PiAiI0NDRkZGRiIsDQogICAgICAgIDB4MkEgPT4gIiNDQ0ZGQ0MiLA0KICAgICAgICAweDJCID0+ICIjRkZGRjk5IiwNCiAgICAgICAgMHgyQyA9PiAiIzk5Q0NGRiIsDQogICAgICAgIDB4MkQgPT4gIiNGRjk5Q0MiLA0KICAgICAgICAweDJFID0+ICIjQ0M5OUZGIiwNCiAgICAgICAgMHgyRiA9PiAiI0ZGQ0M5OSIsDQogICAgICAgIDB4MzAgPT4gIiMzMzY2RkYiLA0KICAgICAgICAweDMxID0+ICIjMzNDQ0NDIiwNCiAgICAgICAgMHgzMiA9PiAiIzk5Q0MwMCIsDQogICAgICAgIDB4MzMgPT4gIiNGRkNDMDAiLA0KICAgICAgICAweDM0ID0+ICIjRkY5OTAwIiwNCiAgICAgICAgMHgzNSA9PiAiI0ZGNjYwMCIsDQogICAgICAgIDB4MzYgPT4gIiM2NjY2OTkiLA0KICAgICAgICAweDM3ID0+ICIjOTY5Njk2IiwNCiAgICAgICAgMHgzOCA9PiAiIzAwMzM2NiIsDQogICAgICAgIDB4MzkgPT4gIiMzMzk5NjYiLA0KICAgICAgICAweDNBID0+ICIjMDAzMzAwIiwNCiAgICAgICAgMHgzQiA9PiAiIzMzMzMwMCIsDQogICAgICAgIDB4M0MgPT4gIiM5OTMzMDAiLA0KICAgICAgICAweDNEID0+ICIjOTkzMzY2IiwNCiAgICAgICAgMHgzRSA9PiAiIzMzMzM5OSIsDQogICAgICAgIDB4M0YgPT4gIiMzMzMzMzMiLA0KICAgICAgICAweDQwID0+ICIjMDAwMDAwIiwNCiAgICAgICAgMHg0MSA9PiAiI0ZGRkZGRiIsDQoNCiAgICAgICAgMHg0MyA9PiAiIzAwMDAwMCIsDQogICAgICAgIDB4NEQgPT4gIiMwMDAwMDAiLA0KICAgICAgICAweDRFID0+ICIjRkZGRkZGIiwNCiAgICAgICAgMHg0RiA9PiAiIzAwMDAwMCIsDQogICAgICAgIDB4NTAgPT4gIiNGRkZGRkYiLA0KICAgICAgICAweDUxID0+ICIjMDAwMDAwIiwNCg0KICAgICAgICAweDdGRkYgPT4gIiMwMDAwMDAiDQogICAgKTsNCg0KCXZhciAkbGluZVN0eWxlcyA9IGFycmF5KA0KCQkweDAwID0+ICIiLA0KCQkweDAxID0+ICJUaGluIiwNCgkJMHgwMiA9PiAiTWVkaXVtIiwNCgkJMHgwMyA9PiAiRGFzaGVkIiwNCgkJMHgwNCA9PiAiRG90dGVkIiwNCgkJMHgwNSA9PiAiVGhpY2siLA0KCQkweDA2ID0+ICJEb3VibGUiLA0KCQkweDA3ID0+ICJIYWlyIiwNCgkJMHgwOCA9PiAiTWVkaXVtIGRhc2hlZCIsDQoJCTB4MDkgPT4gIlRoaW4gZGFzaC1kb3R0ZWQiLA0KCQkweDBBID0+ICJNZWRpdW0gZGFzaC1kb3R0ZWQiLA0KCQkweDBCID0+ICJUaGluIGRhc2gtZG90LWRvdHRlZCIsDQoJCTB4MEMgPT4gIk1lZGl1bSBkYXNoLWRvdC1kb3R0ZWQiLA0KCQkweDBEID0+ICJTbGFudGVkIG1lZGl1bSBkYXNoLWRvdHRlZCINCgkpOwkNCg0KCXZhciAkbGluZVN0eWxlc0NzcyA9IGFycmF5KA0KCQkiVGhpbiIgPT4gIjFweCBzb2xpZCIsIA0KCQkiTWVkaXVtIiA9PiAiMnB4IHNvbGlkIiwgDQoJCSJEYXNoZWQiID0+ICIxcHggZGFzaGVkIiwgDQoJCSJEb3R0ZWQiID0+ICIxcHggZG90dGVkIiwgDQoJCSJUaGljayIgPT4gIjNweCBzb2xpZCIsIA0KCQkiRG91YmxlIiA9PiAiZG91YmxlIiwgDQoJCSJIYWlyIiA9PiAiMXB4IHNvbGlkIiwgDQoJCSJNZWRpdW0gZGFzaGVkIiA9PiAiMnB4IGRhc2hlZCIsIA0KCQkiVGhpbiBkYXNoLWRvdHRlZCIgPT4gIjFweCBkYXNoZWQiLCANCgkJIk1lZGl1bSBkYXNoLWRvdHRlZCIgPT4gIjJweCBkYXNoZWQiLCANCgkJIlRoaW4gZGFzaC1kb3QtZG90dGVkIiA9PiAiMXB4IGRhc2hlZCIsIA0KCQkiTWVkaXVtIGRhc2gtZG90LWRvdHRlZCIgPT4gIjJweCBkYXNoZWQiLCANCgkJIlNsYW50ZWQgbWVkaXVtIGRhc2gtZG90dGUiID0+ICIycHggZGFzaGVkIiANCgkpOw0KCQ0KCWZ1bmN0aW9uIHJlYWQxNmJpdHN0cmluZygkZGF0YSwgJHN0YXJ0KSB7DQoJCSRsZW4gPSAwOw0KCQl3aGlsZSAob3JkKCRkYXRhWyRzdGFydCArICRsZW5dKSArIG9yZCgkZGF0YVskc3RhcnQgKyAkbGVuICsgMV0pID4gMCkgJGxlbisrOw0KCQlyZXR1cm4gc3Vic3RyKCRkYXRhLCAkc3RhcnQsICRsZW4pOw0KCX0NCgkNCgkvLyBBRERFRCBieSBNYXR0IEtydXNlIGZvciBiZXR0ZXIgZm9ybWF0dGluZw0KCWZ1bmN0aW9uIF9mb3JtYXRfdmFsdWUoJGZvcm1hdCwkbnVtLCRmKSB7DQoJCS8vIDQ5PT1URVhUIGZvcm1hdA0KCQkvLyBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvcGhwLWV4Y2VsLXJlYWRlci9pc3N1ZXMvZGV0YWlsP2lkPTcNCgkJaWYgKCAoISRmICYmICRmb3JtYXQ9PSIlcyIpIHx8ICgkZj09NDkpIHx8ICgkZm9ybWF0PT0iR0VORVJBTCIpICkgeyANCgkJCXJldHVybiBhcnJheSgnc3RyaW5nJz0+JG51bSwgJ2Zvcm1hdENvbG9yJz0+bnVsbCk7IA0KCQl9DQoNCgkJLy8gQ3VzdG9tIHBhdHRlcm4gY2FuIGJlIFBPU0lUSVZFO05FR0FUSVZFO1pFUk8NCgkJLy8gVGhlICJ0ZXh0IiBvcHRpb24gYXMgNHRoIHBhcmFtZXRlciBpcyBub3QgaGFuZGxlZA0KCQkkcGFydHMgPSBzcGxpdCgiOyIsJGZvcm1hdCk7DQoJCSRwYXR0ZXJuID0gJHBhcnRzWzBdOw0KCQkvLyBOZWdhdGl2ZSBwYXR0ZXJuDQoJCWlmIChjb3VudCgkcGFydHMpPjIgJiYgJG51bT09MCkgew0KCQkJJHBhdHRlcm4gPSAkcGFydHNbMl07DQoJCX0NCgkJLy8gWmVybyBwYXR0ZXJuDQoJCWlmIChjb3VudCgkcGFydHMpPjEgJiYgJG51bTwwKSB7DQoJCQkkcGF0dGVybiA9ICRwYXJ0c1sxXTsNCgkJCSRudW0gPSBhYnMoJG51bSk7DQoJCX0NCg0KCQkkY29sb3IgPSAiIjsNCgkJJG1hdGNoZXMgPSBhcnJheSgpOw0KCQkkY29sb3JfcmVnZXggPSAiL15cWyhCTEFDS3xCTFVFfENZQU58R1JFRU58TUFHRU5UQXxSRUR8V0hJVEV8WUVMTE9XKVxdL2kiOw0KCQlpZiAocHJlZ19tYXRjaCgkY29sb3JfcmVnZXgsJHBhdHRlcm4sJG1hdGNoZXMpKSB7DQoJCQkkY29sb3IgPSBzdHJ0b2xvd2VyKCRtYXRjaGVzWzFdKTsNCgkJCSRwYXR0ZXJuID0gcHJlZ19yZXBsYWNlKCRjb2xvcl9yZWdleCwiIiwkcGF0dGVybik7DQoJCX0NCgkJDQoJCS8vIEluIEV4Y2VsIGZvcm1hdHMsICJfIiBpcyB1c2VkIHRvIGFkZCBzcGFjaW5nLCB3aGljaCB3ZSBjYW4ndCBkbyBpbiBIVE1MDQoJCSRwYXR0ZXJuID0gcHJlZ19yZXBsYWNlKCIvXy4vIiwiIiwkcGF0dGVybik7DQoJCQ0KCQkvLyBTb21lIG5vbi1udW1iZXIgY2hhcmFjdGVycyBhcmUgZXNjYXBlZCB3aXRoIFwsIHdoaWNoIHdlIGRvbid0IG5lZWQNCgkJJHBhdHRlcm4gPSBwcmVnX3JlcGxhY2UoIi9cXFwvIiwiIiwkcGF0dGVybik7DQoJCQ0KCQkvLyBTb21lIG5vbi1udW1iZXIgc3RyaW5ncyBhcmUgcXVvdGVkLCBzbyB3ZSdsbCBnZXQgcmlkIG9mIHRoZSBxdW90ZXMNCgkJJHBhdHRlcm4gPSBwcmVnX3JlcGxhY2UoIi9cIi8iLCIiLCRwYXR0ZXJuKTsNCg0KCQkvLyBURU1QT1JBUlkgLSBDb252ZXJ0ICMgdG8gMA0KCQkkcGF0dGVybiA9IHByZWdfcmVwbGFjZSgiL1wjLyIsIjAiLCRwYXR0ZXJuKTsNCg0KCQkvLyBGaW5kIG91dCBpZiB3ZSBuZWVkIGNvbW1hIGZvcm1hdHRpbmcNCgkJJGhhc19jb21tYXMgPSBwcmVnX21hdGNoKCIvLC8iLCRwYXR0ZXJuKTsNCgkJaWYgKCRoYXNfY29tbWFzKSB7DQoJCQkkcGF0dGVybiA9IHByZWdfcmVwbGFjZSgiLywvIiwiIiwkcGF0dGVybik7DQoJCX0NCg0KCQkvLyBIYW5kbGUgUGVyY2VudGFnZXMNCgkJaWYgKHByZWdfbWF0Y2goIi9cZChcJSkoW15cJV18JCkvIiwkcGF0dGVybiwkbWF0Y2hlcykpIHsNCgkJCSRudW0gPSAkbnVtICogMTAwOw0KCQkJJHBhdHRlcm4gPSBwcmVnX3JlcGxhY2UoIi8oXGQpKFwlKShbXlwlXXwkKS8iLCIkMSUkMyIsJHBhdHRlcm4pOw0KCQl9DQoNCgkJLy8gSGFuZGxlIHRoZSBudW1iZXIgaXRzZWxmDQoJCSRudW1iZXJfcmVnZXggPSAiLyhcZCspKFwuPykoXGQqKS8iOw0KCQlpZiAocHJlZ19tYXRjaCgkbnVtYmVyX3JlZ2V4LCRwYXR0ZXJuLCRtYXRjaGVzKSkgew0KCQkJJGxlZnQgPSAkbWF0Y2hlc1sxXTsNCgkJCSRkZWMgPSAkbWF0Y2hlc1syXTsNCgkJCSRyaWdodCA9ICRtYXRjaGVzWzNdOw0KCQkJaWYgKCRoYXNfY29tbWFzKSB7DQoJCQkJJGZvcm1hdHRlZCA9IG51bWJlcl9mb3JtYXQoJG51bSxzdHJsZW4oJHJpZ2h0KSk7DQoJCQl9DQoJCQllbHNlIHsNCgkJCQkkc3ByaW50Zl9wYXR0ZXJuID0gIiUxLiIuc3RybGVuKCRyaWdodCkuImYiOw0KCQkJCSRmb3JtYXR0ZWQgPSBzcHJpbnRmKCRzcHJpbnRmX3BhdHRlcm4sICRudW0pOw0KCQkJfQ0KCQkJJHBhdHRlcm4gPSBwcmVnX3JlcGxhY2UoJG51bWJlcl9yZWdleCwgJGZvcm1hdHRlZCwgJHBhdHRlcm4pOw0KCQl9DQoNCgkJcmV0dXJuIGFycmF5KA0KCQkJJ3N0cmluZyc9PiRwYXR0ZXJuLA0KCQkJJ2Zvcm1hdENvbG9yJz0+JGNvbG9yDQoJCSk7DQoJfQ0KDQoJLyoqDQoJICogQ29uc3RydWN0b3INCgkgKg0KCSAqIFNvbWUgYmFzaWMgaW5pdGlhbGlzYXRpb24NCgkgKi8NCglmdW5jdGlvbiBTcHJlYWRzaGVldF9FeGNlbF9SZWFkZXIoJGZpbGU9JycsJHN0b3JlX2V4dGVuZGVkX2luZm89dHJ1ZSwkb3V0cHV0RW5jb2Rpbmc9JycpIHsNCgkJJHRoaXMtPl9vbGUgPSYgbmV3IE9MRVJlYWQoKTsNCgkJJHRoaXMtPnNldFVURkVuY29kZXIoJ2ljb252Jyk7DQoJCWlmICgkb3V0cHV0RW5jb2RpbmcgIT0gJycpIHsgDQoJCQkkdGhpcy0+c2V0T3V0cHV0RW5jb2RpbmcoJG91dHB1dEVuY29kaW5nKTsNCgkJfQ0KCQlmb3IgKCRpPTE7ICRpPDI0NTsgJGkrKykgew0KCQkJJG5hbWUgPSBzdHJ0b2xvd2VyKCggKCgkaS0xKS8yNj49MSk\/Y2hyKCgkaS0xKS8yNis2NCk6JycpIC4gY2hyKCgkaS0xKSUyNis2NSkpOw0KCQkJJHRoaXMtPmNvbG5hbWVzWyRuYW1lXSA9ICRpOw0KCQkJJHRoaXMtPmNvbGluZGV4ZXNbJGldID0gJG5hbWU7DQoJCX0NCgkJJHRoaXMtPnN0b3JlX2V4dGVuZGVkX2luZm8gPSAkc3RvcmVfZXh0ZW5kZWRfaW5mbzsNCgkJaWYgKCRmaWxlIT0iIikgew0KCQkJJHRoaXMtPnJlYWQoJGZpbGUpOw0KCQl9DQoJfQ0KDQoJLyoqDQoJICogU2V0IHRoZSBlbmNvZGluZyBtZXRob2QNCgkgKi8NCglmdW5jdGlvbiBzZXRPdXRwdXRFbmNvZGluZygkZW5jb2RpbmcpIHsNCgkJJHRoaXMtPl9kZWZhdWx0RW5jb2RpbmcgPSAkZW5jb2Rpbmc7DQoJfQ0KDQoJLyoqDQoJICogICRlbmNvZGVyID0gJ2ljb252JyBvciAnbWInDQoJICogIHNldCBpY29udiBpZiB5b3Ugd291bGQgbGlrZSB1c2UgJ2ljb252JyBmb3IgZW5jb2RlIFVURi0xNkxFIHRvIHlvdXIgZW5jb2RpbmcNCgkgKiAgc2V0IG1iIGlmIHlvdSB3b3VsZCBsaWtlIHVzZSAnbWJfY29udmVydF9lbmNvZGluZycgZm9yIGVuY29kZSBVVEYtMTZMRSB0byB5b3VyIGVuY29kaW5nDQoJICovDQoJZnVuY3Rpb24gc2V0VVRGRW5jb2RlcigkZW5jb2RlciA9ICdpY29udicpIHsNCgkJJHRoaXMtPl9lbmNvZGVyRnVuY3Rpb24gPSAnJzsNCgkJaWYgKCRlbmNvZGVyID09ICdpY29udicpIHsNCgkJCSR0aGlzLT5fZW5jb2RlckZ1bmN0aW9uID0gZnVuY3Rpb25fZXhpc3RzKCdpY29udicpID8gJ2ljb252JyA6ICcnOw0KCQl9IGVsc2VpZiAoJGVuY29kZXIgPT0gJ21iJykgew0KCQkJJHRoaXMtPl9lbmNvZGVyRnVuY3Rpb24gPSBmdW5jdGlvbl9leGlzdHMoJ21iX2NvbnZlcnRfZW5jb2RpbmcnKSA\/ICdtYl9jb252ZXJ0X2VuY29kaW5nJyA6ICcnOw0KCQl9DQoJfQ0KDQoJZnVuY3Rpb24gc2V0Um93Q29sT2Zmc2V0KCRpT2Zmc2V0KSB7DQoJCSR0aGlzLT5fcm93b2Zmc2V0ID0gJGlPZmZzZXQ7DQoJCSR0aGlzLT5fY29sb2Zmc2V0ID0gJGlPZmZzZXQ7DQoJfQ0KDQoJLyoqDQoJICogU2V0IHRoZSBkZWZhdWx0IG51bWJlciBmb3JtYXQNCgkgKi8NCglmdW5jdGlvbiBzZXREZWZhdWx0Rm9ybWF0KCRzRm9ybWF0KSB7DQoJCSR0aGlzLT5fZGVmYXVsdEZvcm1hdCA9ICRzRm9ybWF0Ow0KCX0NCg0KCS8qKg0KCSAqIEZvcmNlIGEgY29sdW1uIHRvIHVzZSBhIGNlcnRhaW4gZm9ybWF0DQoJICovDQoJZnVuY3Rpb24gc2V0Q29sdW1uRm9ybWF0KCRjb2x1bW4sICRzRm9ybWF0KSB7DQoJCSR0aGlzLT5fY29sdW1uc0Zvcm1hdFskY29sdW1uXSA9ICRzRm9ybWF0Ow0KCX0NCg0KCS8qKg0KCSAqIFJlYWQgdGhlIHNwcmVhZHNoZWV0IGZpbGUgdXNpbmcgT0xFLCB0aGVuIHBhcnNlDQoJICovDQoJZnVuY3Rpb24gcmVhZCgkc0ZpbGVOYW1lKSB7DQoJCSRyZXMgPSAkdGhpcy0+X29sZS0+cmVhZCgkc0ZpbGVOYW1lKTsNCg0KCQkvLyBvb3BzLCBzb21ldGhpbmcgZ29lcyB3cm9uZyAoRGFya28gTWlsamFub3ZpYykNCgkJaWYoJHJlcyA9PT0gZmFsc2UpIHsNCgkJCS8vIGNoZWNrIGVycm9yIGNvZGUNCgkJCWlmKCR0aGlzLT5fb2xlLT5lcnJvciA9PSAxKSB7DQoJCQkJLy8gYmFkIGZpbGUNCgkJCQlkaWUoJ1RoZSBmaWxlbmFtZSAnIC4gJHNGaWxlTmFtZSAuICcgaXMgbm90IHJlYWRhYmxlJyk7DQoJCQl9DQoJCQkvLyBjaGVjayBvdGhlciBlcnJvciBjb2RlcyBoZXJlIChlZyBiYWQgZmlsZWZvcm1hdCwgZXRjLi4uKQ0KCQl9DQoJCSR0aGlzLT5kYXRhID0gJHRoaXMtPl9vbGUtPmdldFdvcmtCb29rKCk7DQoJCSR0aGlzLT5fcGFyc2UoKTsNCgl9DQoNCgkvKioNCgkgKiBQYXJzZSBhIHdvcmtib29rDQoJICoNCgkgKiBAYWNjZXNzIHByaXZhdGUNCgkgKiBAcmV0dXJuIGJvb2wNCgkgKi8NCglmdW5jdGlvbiBfcGFyc2UoKSB7DQoJCSRwb3MgPSAwOw0KCQkkZGF0YSA9ICR0aGlzLT5kYXRhOw0KDQoJCSRjb2RlID0gdigkZGF0YSwkcG9zKTsNCgkJJGxlbmd0aCA9IHYoJGRhdGEsJHBvcysyKTsNCgkJJHZlcnNpb24gPSB2KCRkYXRhLCRwb3MrNCk7DQoJCSRzdWJzdHJlYW1UeXBlID0gdigkZGF0YSwkcG9zKzYpOw0KCgkJJHRoaXMtPnZlcnNpb24gPSAkdmVyc2lvbjsKDQoJCWlmICgoJHZlcnNpb24gIT0gU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX0JJRkY4KSAmJg0KCQkJKCR2ZXJzaW9uICE9IFNQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9CSUZGNykpIHsNCgkJCXJldHVybiBmYWxzZTsNCgkJfQ0KDQoJCWlmICgkc3Vic3RyZWFtVHlwZSAhPSBTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfV09SS0JPT0tHTE9CQUxTKXsNCgkJCXJldHVybiBmYWxzZTsNCgkJfQ0KDQoJCSRwb3MgKz0gJGxlbmd0aCArIDQ7DQoNCgkJJGNvZGUgPSB2KCRkYXRhLCRwb3MpOw0KCQkkbGVuZ3RoID0gdigkZGF0YSwkcG9zKzIpOw0KDQoJCXdoaWxlICgkY29kZSAhPSBTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9FT0YpIHsNCgkJCXN3aXRjaCAoJGNvZGUpIHsNCgkJCQljYXNlIFNQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX1NTVDoNCgkJCQkJJHNwb3MgPSAkcG9zICsgNDsNCgkJCQkJJGxpbWl0cG9zID0gJHNwb3MgKyAkbGVuZ3RoOw0KCQkJCQkkdW5pcXVlU3RyaW5ncyA9ICR0aGlzLT5fR2V0SW50NGQoJGRhdGEsICRzcG9zKzQpOw0KCQkJCQkkc3BvcyArPSA4Ow0KCQkJCQlmb3IgKCRpID0gMDsgJGkgPCAkdW5pcXVlU3RyaW5nczsgJGkrKykgew0KCQkJCQkJLy8gUmVhZCBpbiB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMNCgkJCQkJCWlmICgkc3BvcyA9PSAkbGltaXRwb3MpIHsNCgkJCQkJCQkkb3Bjb2RlID0gdigkZGF0YSwkc3Bvcyk7DQoJCQkJCQkJJGNvbmxlbmd0aCA9IHYoJGRhdGEsJHNwb3MrMik7DQoJCQkJCQkJaWYgKCRvcGNvZGUgIT0gMHgzYykgew0KCQkJCQkJCQlyZXR1cm4gLTE7DQoJCQkJCQkJfQ0KCQkJCQkJCSRzcG9zICs9IDQ7DQoJCQkJCQkJJGxpbWl0cG9zID0gJHNwb3MgKyAkY29ubGVuZ3RoOw0KCQkJCQkJfQ0KCQkJCQkJJG51bUNoYXJzID0gb3JkKCRkYXRhWyRzcG9zXSkgfCAob3JkKCRkYXRhWyRzcG9zKzFdKSA8PCA4KTsNCgkJCQkJCSRzcG9zICs9IDI7DQoJCQkJCQkkb3B0aW9uRmxhZ3MgPSBvcmQoJGRhdGFbJHNwb3NdKTsNCgkJCQkJCSRzcG9zKys7DQoJCQkJCQkkYXNjaWlFbmNvZGluZyA9ICgoJG9wdGlvbkZsYWdzICYgMHgwMSkgPT0gMCkgOw0KCQkJCQkJJGV4dGVuZGVkU3RyaW5nID0gKCAoJG9wdGlvbkZsYWdzICYgMHgwNCkgIT0gMCk7DQoNCgkJCQkJCS8vIFNlZSBpZiBzdHJpbmcgY29udGFpbnMgZm9ybWF0dGluZyBpbmZvcm1hdGlvbg0KCQkJCQkJJHJpY2hTdHJpbmcgPSAoICgkb3B0aW9uRmxhZ3MgJiAweDA4KSAhPSAwKTsNCg0KCQkJCQkJaWYgKCRyaWNoU3RyaW5nKSB7DQoJCQkJCQkJLy8gUmVhZCBpbiB0aGUgY3J1bg0KCQkJCQkJCSRmb3JtYXR0aW5nUnVucyA9IHYoJGRhdGEsJHNwb3MpOw0KCQkJCQkJCSRzcG9zICs9IDI7DQoJCQkJCQl9DQoNCgkJCQkJCWlmICgkZXh0ZW5kZWRTdHJpbmcpIHsNCgkJCQkJCQkvLyBSZWFkIGluIGNjaEV4dFJzdA0KCQkJCQkJCSRleHRlbmRlZFJ1bkxlbmd0aCA9ICR0aGlzLT5fR2V0SW50NGQoJGRhdGEsICRzcG9zKTsNCgkJCQkJCQkkc3BvcyArPSA0Ow0KCQkJCQkJfQ0KDQoJCQkJCQkkbGVuID0gKCRhc2NpaUVuY29kaW5nKT8gJG51bUNoYXJzIDogJG51bUNoYXJzKjI7DQoJCQkJCQlpZiAoJHNwb3MgKyAkbGVuIDwgJGxpbWl0cG9zKSB7DQoJCQkJCQkJJHJldHN0ciA9IHN1YnN0cigkZGF0YSwgJHNwb3MsICRsZW4pOw0KCQkJCQkJCSRzcG9zICs9ICRsZW47DQoJCQkJCQl9DQoJCQkJCQllbHNlew0KCQkJCQkJCS8vIGZvdW5kIGNvdW50aW51ZQ0KCQkJCQkJCSRyZXRzdHIgPSBzdWJzdHIoJGRhdGEsICRzcG9zLCAkbGltaXRwb3MgLSAkc3Bvcyk7DQoJCQkJCQkJJGJ5dGVzUmVhZCA9ICRsaW1pdHBvcyAtICRzcG9zOw0KCQkJCQkJCSRjaGFyc0xlZnQgPSAkbnVtQ2hhcnMgLSAoKCRhc2NpaUVuY29kaW5nKSA\/ICRieXRlc1JlYWQgOiAoJGJ5dGVzUmVhZCAvIDIpKTsNCgkJCQkJCQkkc3BvcyA9ICRsaW1pdHBvczsNCg0KCQkJCQkJCXdoaWxlICgkY2hhcnNMZWZ0ID4gMCl7DQoJCQkJCQkJCSRvcGNvZGUgPSB2KCRkYXRhLCRzcG9zKTsNCgkJCQkJCQkJJGNvbmxlbmd0aCA9IHYoJGRhdGEsJHNwb3MrMik7DQoJCQkJCQkJCWlmICgkb3Bjb2RlICE9IDB4M2MpIHsNCgkJCQkJCQkJCXJldHVybiAtMTsNCgkJCQkJCQkJfQ0KCQkJCQkJCQkkc3BvcyArPSA0Ow0KCQkJCQkJCQkkbGltaXRwb3MgPSAkc3BvcyArICRjb25sZW5ndGg7DQoJCQkJCQkJCSRvcHRpb24gPSBvcmQoJGRhdGFbJHNwb3NdKTsNCgkJCQkJCQkJJHNwb3MgKz0gMTsNCgkJCQkJCQkJaWYgKCRhc2NpaUVuY29kaW5nICYmICgkb3B0aW9uID09IDApKSB7DQoJCQkJCQkJCQkkbGVuID0gbWluKCRjaGFyc0xlZnQsICRsaW1pdHBvcyAtICRzcG9zKTsgLy8gbWluKCRjaGFyc0xlZnQsICRjb25sZW5ndGgpOw0KCQkJCQkJCQkJJHJldHN0ciAuPSBzdWJzdHIoJGRhdGEsICRzcG9zLCAkbGVuKTsNCgkJCQkJCQkJCSRjaGFyc0xlZnQgLT0gJGxlbjsNCgkJCQkJCQkJCSRhc2NpaUVuY29kaW5nID0gdHJ1ZTsNCgkJCQkJCQkJfQ0KCQkJCQkJCQllbHNlaWYgKCEkYXNjaWlFbmNvZGluZyAmJiAoJG9wdGlvbiAhPSAwKSkgew0KCQkJCQkJCQkJJGxlbiA9IG1pbigkY2hhcnNMZWZ0ICogMiwgJGxpbWl0cG9zIC0gJHNwb3MpOyAvLyBtaW4oJGNoYXJzTGVmdCwgJGNvbmxlbmd0aCk7DQoJCQkJCQkJCQkkcmV0c3RyIC49IHN1YnN0cigkZGF0YSwgJHNwb3MsICRsZW4pOw0KCQkJCQkJCQkJJGNoYXJzTGVmdCAtPSAkbGVuLzI7DQoJCQkJCQkJCQkkYXNjaWlFbmNvZGluZyA9IGZhbHNlOw0KCQkJCQkJCQl9DQoJCQkJCQkJCWVsc2VpZiAoISRhc2NpaUVuY29kaW5nICYmICgkb3B0aW9uID09IDApKSB7DQoJCQkJCQkJCQkvLyBCdW1tZXIgLSB0aGUgc3RyaW5nIHN0YXJ0cyBvZmYgYXMgVW5pY29kZSwgYnV0IGFmdGVyIHRoZQ0KCQkJCQkJCQkJLy8gY29udGludWF0aW9uIGl0IGlzIGluIHN0cmFpZ2h0Zm9yd2FyZCBBU0NJSSBlbmNvZGluZw0KCQkJCQkJCQkJJGxlbiA9IG1pbigkY2hhcnNMZWZ0LCAkbGltaXRwb3MgLSAkc3Bvcyk7IC8vIG1pbigkY2hhcnNMZWZ0LCAkY29ubGVuZ3RoKTsNCgkJCQkJCQkJCWZvciAoJGogPSAwOyAkaiA8ICRsZW47ICRqKyspIHsNCgkJCQkJCQkJCQkkcmV0c3RyIC49ICRkYXRhWyRzcG9zICsgJGpdLmNocigwKTsNCgkJCQkJCQkJCX0NCgkJCQkJCQkJCSRjaGFyc0xlZnQgLT0gJGxlbjsNCgkJCQkJCQkJCSRhc2NpaUVuY29kaW5nID0gZmFsc2U7DQoJCQkJCQkJCX0NCgkJCQkJCQkJZWxzZXsNCgkJCQkJCQkJCSRuZXdzdHIgPSAnJzsNCgkJCQkJCQkJCWZvciAoJGogPSAwOyAkaiA8IHN0cmxlbigkcmV0c3RyKTsgJGorKykgew0KCQkJCQkJCQkJCSRuZXdzdHIgPSAkcmV0c3RyWyRqXS5jaHIoMCk7DQoJCQkJCQkJCQl9DQoJCQkJCQkJCQkkcmV0c3RyID0gJG5ld3N0cjsNCgkJCQkJCQkJCSRsZW4gPSBtaW4oJGNoYXJzTGVmdCAqIDIsICRsaW1pdHBvcyAtICRzcG9zKTsgLy8gbWluKCRjaGFyc0xlZnQsICRjb25sZW5ndGgpOw0KCQkJCQkJCQkJJHJldHN0ciAuPSBzdWJzdHIoJGRhdGEsICRzcG9zLCAkbGVuKTsNCgkJCQkJCQkJCSRjaGFyc0xlZnQgLT0gJGxlbi8yOw0KCQkJCQkJCQkJJGFzY2lpRW5jb2RpbmcgPSBmYWxzZTsNCgkJCQkJCQkJfQ0KCQkJCQkJCQkkc3BvcyArPSAkbGVuOw0KCQkJCQkJCX0NCgkJCQkJCX0NCgkJCQkJCSRyZXRzdHIgPSAoJGFzY2lpRW5jb2RpbmcpID8gJHJldHN0ciA6ICR0aGlzLT5fZW5jb2RlVVRGMTYoJHJldHN0cik7DQoNCgkJCQkJCWlmICgkcmljaFN0cmluZyl7DQoJCQkJCQkJJHNwb3MgKz0gNCAqICRmb3JtYXR0aW5nUnVuczsNCgkJCQkJCX0NCg0KCQkJCQkJLy8gRm9yIGV4dGVuZGVkIHN0cmluZ3MsIHNraXAgb3ZlciB0aGUgZXh0ZW5kZWQgc3RyaW5nIGRhdGENCgkJCQkJCWlmICgkZXh0ZW5kZWRTdHJpbmcpIHsNCgkJCQkJCQkkc3BvcyArPSAkZXh0ZW5kZWRSdW5MZW5ndGg7DQoJCQkJCQl9DQoJCQkJCQkkdGhpcy0+c3N0W109JHJldHN0cjsNCgkJCQkJfQ0KCQkJCQlicmVhazsNCgkJCQljYXNlIFNQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX0ZJTEVQQVNTOg0KCQkJCQlyZXR1cm4gZmFsc2U7DQoJCQkJCWJyZWFrOw0KCQkJCWNhc2UgU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfTkFNRToNCgkJCQkJYnJlYWs7DQoJCQkJY2FzZSBTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9GT1JNQVQ6DQoJCQkJCSRpbmRleENvZGUgPSB2KCRkYXRhLCRwb3MrNCk7DQoJCQkJCWlmICgkdmVyc2lvbiA9PSBTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfQklGRjgpIHsNCgkJCQkJCSRudW1jaGFycyA9IHYoJGRhdGEsJHBvcys2KTsNCgkJCQkJCWlmIChvcmQoJGRhdGFbJHBvcys4XSkgPT0gMCl7DQoJCQkJCQkJJGZvcm1hdFN0cmluZyA9IHN1YnN0cigkZGF0YSwgJHBvcys5LCAkbnVtY2hhcnMpOw0KCQkJCQkJfSBlbHNlIHsNCgkJCQkJCQkkZm9ybWF0U3RyaW5nID0gc3Vic3RyKCRkYXRhLCAkcG9zKzksICRudW1jaGFycyoyKTsNCgkJCQkJCX0NCgkJCQkJfSBlbHNlIHsNCgkJCQkJCSRudW1jaGFycyA9IG9yZCgkZGF0YVskcG9zKzZdKTsNCgkJCQkJCSRmb3JtYXRTdHJpbmcgPSBzdWJzdHIoJGRhdGEsICRwb3MrNywgJG51bWNoYXJzKjIpOw0KCQkJCQl9DQoJCQkJCSR0aGlzLT5mb3JtYXRSZWNvcmRzWyRpbmRleENvZGVdID0gJGZvcm1hdFN0cmluZzsNCgkJCQkJYnJlYWs7DQoJCQkJY2FzZSBTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9GT05UOg0KCQkJCQkJJGhlaWdodCA9IHYoJGRhdGEsJHBvcys0KTsNCgkJCQkJCSRvcHRpb24gPSB2KCRkYXRhLCRwb3MrNik7DQoJCQkJCQkkY29sb3IgPSB2KCRkYXRhLCRwb3MrOCk7DQoJCQkJCQkkd2VpZ2h0ID0gdigkZGF0YSwkcG9zKzEwKTsNCgkJCQkJCSR1bmRlciAgPSBvcmQoJGRhdGFbJHBvcysxNF0pOw0KCQkJCQkJJGZvbnQgPSAiIjsNCgkJCQkJCS8vIEZvbnQgbmFtZQ0KCQkJCQkJJG51bWNoYXJzID0gb3JkKCRkYXRhWyRwb3MrMThdKTsNCgkJCQkJCWlmICgob3JkKCRkYXRhWyRwb3MrMTldKSAmIDEpID09IDApew0KCQkJCQkJICAgICRmb250ID0gc3Vic3RyKCRkYXRhLCAkcG9zKzIwLCAkbnVtY2hhcnMpOw0KCQkJCQkJfSBlbHNlIHsNCgkJCQkJCSAgICAkZm9udCA9IHN1YnN0cigkZGF0YSwgJHBvcysyMCwgJG51bWNoYXJzKjIpOw0KCQkJCQkJICAgICRmb250ID0gICR0aGlzLT5fZW5jb2RlVVRGMTYoJGZvbnQpOyAKCQkJCQkJfQ0KCQkJCQkJJHRoaXMtPmZvbnRSZWNvcmRzW10gPSBhcnJheSgNCgkJCQkJCQkJJ2hlaWdodCcgPT4gJGhlaWdodCAvIDIwLA0KCQkJCQkJCQknaXRhbGljJyA9PiAhISgkb3B0aW9uICYgMiksDQoJCQkJCQkJCSdjb2xvcicgPT4gJGNvbG9yLA0KCQkJCQkJCQkndW5kZXInID0+ICEoJHVuZGVyPT0wKSwNCgkJCQkJCQkJJ2JvbGQnID0+ICgkd2VpZ2h0PT03MDApLA0KCQkJCQkJCQknZm9udCcgPT4gJGZvbnQsCgkJCQkJCQkJJ3JhdycgPT4gJHRoaXMtPmR1bXBIZXhEYXRhKCRkYXRhLCAkcG9zKzMsICRsZW5ndGgpDQoJCQkJCQkJCSk7DQoJCQkJCSAgICBicmVhazsKDQoJCQkJY2FzZSBTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9QQUxFVFRFOg0KCQkJCQkJJGNvbG9ycyA9IG9yZCgkZGF0YVskcG9zKzRdKSB8IG9yZCgkZGF0YVskcG9zKzVdKSA8PCA4Ow0KCQkJCQkJZm9yICgkY29saSA9IDA7ICRjb2xpIDwgJGNvbG9yczsgJGNvbGkrKykgew0KCQkJCQkJICAgICRjb2xPZmYgPSAkcG9zICsgMiArICgkY29saSAqIDQpOw0KICAJCQkJCQkgICAgJGNvbHIgPSBvcmQoJGRhdGFbJGNvbE9mZl0pOw0KICAJCQkJCQkgICAgJGNvbGcgPSBvcmQoJGRhdGFbJGNvbE9mZisxXSk7DQogIAkJCQkJCSAgICAkY29sYiA9IG9yZCgkZGF0YVskY29sT2ZmKzJdKTsNCgkJCQkJCQkkdGhpcy0+Y29sb3JzWzB4MDcgKyAkY29saV0gPSAnIycgLiAkdGhpcy0+bXloZXgoJGNvbHIpIC4gJHRoaXMtPm15aGV4KCRjb2xnKSAuICR0aGlzLT5teWhleCgkY29sYik7DQoJCQkJCQl9DQoJCQkJCSAgICBicmVhazsNCgoJCQkJY2FzZSBTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9YRjoNCgkJCQkJCSRmb250SW5kZXhDb2RlID0gKG9yZCgkZGF0YVskcG9zKzRdKSB8IG9yZCgkZGF0YVskcG9zKzVdKSA8PCA4KSAtIDE7DQoJCQkJCQkkZm9udEluZGV4Q29kZSA9IG1heCgwLCRmb250SW5kZXhDb2RlKTsNCgkJCQkJCSRpbmRleENvZGUgPSBvcmQoJGRhdGFbJHBvcys2XSkgfCBvcmQoJGRhdGFbJHBvcys3XSkgPDwgODsNCgkJCQkJCSRhbGlnbmJpdCA9IG9yZCgkZGF0YVskcG9zKzEwXSkgJiAzOw0KCQkJCQkJJGJnaSA9IChvcmQoJGRhdGFbJHBvcysyMl0pIHwgb3JkKCRkYXRhWyRwb3MrMjNdKSA8PCA4KSAmIDB4M0ZGRjsNCgkJCQkJCSRiZ2NvbG9yID0gKCRiZ2kgJiAweDdGKTsNCi8vCQkJCQkJJGJnY29sb3IgPSAoJGJnaSAmIDB4M2Y4MCkgPj4gNzsNCgkJCQkJCSRhbGlnbiA9ICIiOw0KCQkJCQkJaWYgKCRhbGlnbmJpdD09MykgeyAkYWxpZ249InJpZ2h0IjsgfQ0KCQkJCQkJaWYgKCRhbGlnbmJpdD09MikgeyAkYWxpZ249ImNlbnRlciI7IH0NCgoJCQkJCQkkZmlsbFBhdHRlcm4gPSAob3JkKCRkYXRhWyRwb3MrMjFdKSAmIDB4RkMpID4+IDI7CgkJCQkJCWlmICgkZmlsbFBhdHRlcm4gPT0gMCkgew0KCQkJCQkJCSRiZ2NvbG9yID0gIiI7DQoJCQkJCQl9DQoNCgkJCQkJCSR4ZiA9IGFycmF5KCk7DQoJCQkJCQkkeGZbJ2Zvcm1hdEluZGV4J10gPSAkaW5kZXhDb2RlOw0KCQkJCQkJJHhmWydhbGlnbiddID0gJGFsaWduOw0KCQkJCQkJJHhmWydmb250SW5kZXgnXSA9ICRmb250SW5kZXhDb2RlOw0KCQkJCQkJJHhmWydiZ0NvbG9yJ10gPSAkYmdjb2xvcjsKCQkJCQkJJHhmWydmaWxsUGF0dGVybiddID0gJGZpbGxQYXR0ZXJuOw0KDQoJCQkJCQkkYm9yZGVyID0gb3JkKCRkYXRhWyRwb3MrMTRdKSB8IChvcmQoJGRhdGFbJHBvcysxNV0pIDw8IDgpIHwgKG9yZCgkZGF0YVskcG9zKzE2XSkgPDwgMTYpIHwgKG9yZCgkZGF0YVskcG9zKzE3XSkgPDwgMjQpOw0KCQkJCQkJJHhmWydib3JkZXJMZWZ0J10gPSAkdGhpcy0+bGluZVN0eWxlc1soJGJvcmRlciAmIDB4RildOw0KCQkJCQkJJHhmWydib3JkZXJSaWdodCddID0gJHRoaXMtPmxpbmVTdHlsZXNbKCRib3JkZXIgJiAweEYwKSA+PiA0XTsNCgkJCQkJCSR4ZlsnYm9yZGVyVG9wJ10gPSAkdGhpcy0+bGluZVN0eWxlc1soJGJvcmRlciAmIDB4RjAwKSA+PiA4XTsNCgkJCQkJCSR4ZlsnYm9yZGVyQm90dG9tJ10gPSAkdGhpcy0+bGluZVN0eWxlc1soJGJvcmRlciAmIDB4RjAwMCkgPj4gMTJdOw0KCQkJCQkJCgkJCQkJCSR4ZlsnYm9yZGVyTGVmdENvbG9yJ10gPSAoJGJvcmRlciAmIDB4N0YwMDAwKSA+PiAxNjsNCgkJCQkJCSR4ZlsnYm9yZGVyUmlnaHRDb2xvciddID0gKCRib3JkZXIgJiAweDNGODAwMDAwKSA+PiAyMzsNCgkJCQkJCSRib3JkZXIgPSAob3JkKCRkYXRhWyRwb3MrMThdKSB8IG9yZCgkZGF0YVskcG9zKzE5XSkgPDwgOCk7DQoKCQkJCQkJJHhmWydib3JkZXJUb3BDb2xvciddID0gKCRib3JkZXIgJiAweDdGKTsNCgkJCQkJCSR4ZlsnYm9yZGVyQm90dG9tQ29sb3InXSA9ICgkYm9yZGVyICYgMHgzRjgwKSA+PiA3OwoJCQkJCQkJCQkJCQkNCgkJCQkJCWlmIChhcnJheV9rZXlfZXhpc3RzKCRpbmRleENvZGUsICR0aGlzLT5kYXRlRm9ybWF0cykpIHsNCgkJCQkJCQkkeGZbJ3R5cGUnXSA9ICdkYXRlJzsNCgkJCQkJCQkkeGZbJ2Zvcm1hdCddID0gJHRoaXMtPmRhdGVGb3JtYXRzWyRpbmRleENvZGVdOw0KCQkJCQkJCWlmICgkYWxpZ249PScnKSB7ICR4ZlsnYWxpZ24nXSA9ICdyaWdodCc7IH0NCgkJCQkJCX1lbHNlaWYgKGFycmF5X2tleV9leGlzdHMoJGluZGV4Q29kZSwgJHRoaXMtPm51bWJlckZvcm1hdHMpKSB7DQoJCQkJCQkJJHhmWyd0eXBlJ10gPSAnbnVtYmVyJzsNCgkJCQkJCQkkeGZbJ2Zvcm1hdCddID0gJHRoaXMtPm51bWJlckZvcm1hdHNbJGluZGV4Q29kZV07DQoJCQkJCQkJaWYgKCRhbGlnbj09JycpIHsgJHhmWydhbGlnbiddID0gJ3JpZ2h0JzsgfQ0KCQkJCQkJfWVsc2V7DQoJCQkJCQkJJGlzZGF0ZSA9IEZBTFNFOw0KCQkJCQkJCSRmb3JtYXRzdHIgPSAnJzsNCgkJCQkJCQlpZiAoJGluZGV4Q29kZSA+IDApew0KCQkJCQkJCQlpZiAoaXNzZXQoJHRoaXMtPmZvcm1hdFJlY29yZHNbJGluZGV4Q29kZV0pKQ0KCQkJCQkJCQkJJGZvcm1hdHN0ciA9ICR0aGlzLT5mb3JtYXRSZWNvcmRzWyRpbmRleENvZGVdOw0KCQkJCQkJCQlpZiAoJGZvcm1hdHN0ciE9IiIpIHsNCgkJCQkJCQkJCSR0bXAgPSBwcmVnX3JlcGxhY2UoIi9cOy4qLyIsIiIsJGZvcm1hdHN0cik7DQoJCQkJCQkJCQkkdG1wID0gcHJlZ19yZXBsYWNlKCIvXlxbW15cXV0qXF0vIiwiIiwkdG1wKTsNCgkJCQkJCQkJCWlmIChwcmVnX21hdGNoKCIvW15obXNkYXlcL1wtOlxzXFxcLEFNUF0vaSIsICR0bXApID09IDApIHsgLy8gZm91bmQgZGF5IGFuZCB0aW1lIGZvcm1hdA0KCQkJCQkJCQkJCSRpc2RhdGUgPSBUUlVFOw0KCQkJCQkJCQkJCSRmb3JtYXRzdHIgPSAkdG1wOw0KCQkJCQkJCQkJCSRmb3JtYXRzdHIgPSBzdHJfcmVwbGFjZShhcnJheSgnQU0vUE0nLCdtbW1tJywnbW1tJyksIGFycmF5KCdhJywnRicsJ00nKSwgJGZvcm1hdHN0cik7DQoJCQkJCQkJCQkJLy8gbS9tbSBhcmUgdXNlZCBmb3IgYm90aCBtaW51dGVzIGFuZCBtb250aHMgLSBvaCBTTkFQIQ0KCQkJCQkJCQkJCS8vIFRoaXMgbWVzcyB0cmllcyB0byBmaXggZm9yIHRoYXQuDQoJCQkJCQkJCQkJLy8gJ20nID09IG1pbnV0ZXMgb25seSBpZiBmb2xsb3dpbmcgaC9oaCBvciBwcmVjZWRpbmcgcy9zcw0KCQkJCQkJCQkJCSRmb3JtYXRzdHIgPSBwcmVnX3JlcGxhY2UoIi8oaDo\/KW1tPy8iLCIkMWkiLCAkZm9ybWF0c3RyKTsNCgkJCQkJCQkJCQkkZm9ybWF0c3RyID0gcHJlZ19yZXBsYWNlKCIvbW0\/KDo\/cykvIiwiaSQxIiwgJGZvcm1hdHN0cik7DQoJCQkJCQkJCQkJLy8gQSBzaW5nbGUgJ20nID0gbiBpbiBQSFANCgkJCQkJCQkJCQkkZm9ybWF0c3RyID0gcHJlZ19yZXBsYWNlKCIvKF58W15tXSltKFtebV18JCkvIiwgJyQxbiQyJywgJGZvcm1hdHN0cik7DQoJCQkJCQkJCQkJJGZvcm1hdHN0ciA9IHByZWdfcmVwbGFjZSgiLyhefFtebV0pbShbXm1dfCQpLyIsICckMW4kMicsICRmb3JtYXRzdHIpOw0KCQkJCQkJCQkJCS8vIGVsc2UgaXQncyBtb250aHMNCgkJCQkJCQkJCQkkZm9ybWF0c3RyID0gc3RyX3JlcGxhY2UoJ21tJywgJ20nLCAkZm9ybWF0c3RyKTsNCgkJCQkJCQkJCQkvLyBDb252ZXJ0IHNpbmdsZSAnZCcgdG8gJ2onDQoJCQkJCQkJCQkJJGZvcm1hdHN0ciA9IHByZWdfcmVwbGFjZSgiLyhefFteZF0pZChbXmRdfCQpLyIsICckMWokMicsICRmb3JtYXRzdHIpOw0KCQkJCQkJCQkJCSRmb3JtYXRzdHIgPSBzdHJfcmVwbGFjZShhcnJheSgnZGRkZCcsJ2RkZCcsJ2RkJywneXl5eScsJ3l5JywnaGgnLCdoJyksIGFycmF5KCdsJywnRCcsJ2QnLCdZJywneScsJ0gnLCdnJyksICRmb3JtYXRzdHIpOw0KCQkJCQkJCQkJCSRmb3JtYXRzdHIgPSBwcmVnX3JlcGxhY2UoIi9zcz8vIiwgJ3MnLCAkZm9ybWF0c3RyKTsNCgkJCQkJCQkJCX0NCgkJCQkJCQkJfQ0KCQkJCQkJCX0NCgkJCQkJCQlpZiAoJGlzZGF0ZSl7DQoJCQkJCQkJCSR4ZlsndHlwZSddID0gJ2RhdGUnOw0KCQkJCQkJCQkkeGZbJ2Zvcm1hdCddID0gJGZvcm1hdHN0cjsNCgkJCQkJCQkJaWYgKCRhbGlnbj09JycpIHsgJHhmWydhbGlnbiddID0gJ3JpZ2h0JzsgfQ0KCQkJCQkJCX1lbHNlew0KCQkJCQkJCQkvLyBJZiB0aGUgZm9ybWF0IHN0cmluZyBoYXMgYSAwIG9yICMgaW4gaXQsIHdlJ2xsIGFzc3VtZSBpdCdzIGEgbnVtYmVyDQoJCQkJCQkJCWlmIChwcmVnX21hdGNoKCIvWzAjXS8iLCAkZm9ybWF0c3RyKSkgew0KCQkJCQkJCQkJJHhmWyd0eXBlJ10gPSAnbnVtYmVyJzsNCgkJCQkJCQkJCWlmICgkYWxpZ249PScnKSB7ICR4ZlsnYWxpZ24nXT0ncmlnaHQnOyB9DQoJCQkJCQkJCX0NCgkJCQkJCQkJZWxzZSB7DQoJCQkJCQkJCSR4ZlsndHlwZSddID0gJ290aGVyJzsNCgkJCQkJCQkJfQ0KCQkJCQkJCQkkeGZbJ2Zvcm1hdCddID0gJGZvcm1hdHN0cjsNCgkJCQkJCQkJJHhmWydjb2RlJ10gPSAkaW5kZXhDb2RlOw0KCQkJCQkJCX0NCgkJCQkJCX0NCgkJCQkJCSR0aGlzLT54ZlJlY29yZHNbXSA9ICR4ZjsNCgkJCQkJYnJlYWs7DQoJCQkJY2FzZSBTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9OSU5FVEVFTkZPVVI6DQoJCQkJCSR0aGlzLT5uaW5ldGVlbkZvdXIgPSAob3JkKCRkYXRhWyRwb3MrNF0pID09IDEpOw0KCQkJCQlicmVhazsNCgkJCQljYXNlIFNQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX0JPVU5EU0hFRVQ6DQoJCQkJCQkkcmVjX29mZnNldCA9ICR0aGlzLT5fR2V0SW50NGQoJGRhdGEsICRwb3MrNCk7DQoJCQkJCQkkcmVjX3R5cGVGbGFnID0gb3JkKCRkYXRhWyRwb3MrOF0pOw0KCQkJCQkJJHJlY192aXNpYmlsaXR5RmxhZyA9IG9yZCgkZGF0YVskcG9zKzldKTsNCgkJCQkJCSRyZWNfbGVuZ3RoID0gb3JkKCRkYXRhWyRwb3MrMTBdKTsNCg0KCQkJCQkJaWYgKCR2ZXJzaW9uID09IFNQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9CSUZGOCl7DQoJCQkJCQkJJGNoYXJ0eXBlID0gIG9yZCgkZGF0YVskcG9zKzExXSk7DQoJCQkJCQkJaWYgKCRjaGFydHlwZSA9PSAwKXsNCgkJCQkJCQkJJHJlY19uYW1lCT0gc3Vic3RyKCRkYXRhLCAkcG9zKzEyLCAkcmVjX2xlbmd0aCk7DQoJCQkJCQkJfSBlbHNlIHsNCgkJCQkJCQkJJHJlY19uYW1lCT0gJHRoaXMtPl9lbmNvZGVVVEYxNihzdWJzdHIoJGRhdGEsICRwb3MrMTIsICRyZWNfbGVuZ3RoKjIpKTsNCgkJCQkJCQl9DQoJCQkJCQl9ZWxzZWlmICgkdmVyc2lvbiA9PSBTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfQklGRjcpew0KCQkJCQkJCQkkcmVjX25hbWUJPSBzdWJzdHIoJGRhdGEsICRwb3MrMTEsICRyZWNfbGVuZ3RoKTsNCgkJCQkJCX0NCgkJCQkJJHRoaXMtPmJvdW5kc2hlZXRzW10gPSBhcnJheSgnbmFtZSc9PiRyZWNfbmFtZSwnb2Zmc2V0Jz0+JHJlY19vZmZzZXQpOw0KCQkJCQlicmVhazsNCg0KCQkJfQ0KDQoJCQkkcG9zICs9ICRsZW5ndGggKyA0Ow0KCQkJJGNvZGUgPSBvcmQoJGRhdGFbJHBvc10pIHwgb3JkKCRkYXRhWyRwb3MrMV0pPDw4Ow0KCQkJJGxlbmd0aCA9IG9yZCgkZGF0YVskcG9zKzJdKSB8IG9yZCgkZGF0YVskcG9zKzNdKTw8ODsNCgkJfQ0KDQoJCWZvcmVhY2ggKCR0aGlzLT5ib3VuZHNoZWV0cyBhcyAka2V5PT4kdmFsKXsNCgkJCSR0aGlzLT5zbiA9ICRrZXk7DQoJCQkkdGhpcy0+X3BhcnNlc2hlZXQoJHZhbFsnb2Zmc2V0J10pOw0KCQl9DQoJCXJldHVybiB0cnVlOw0KCX0NCg0KCS8qKg0KCSAqIFBhcnNlIGEgd29ya3NoZWV0DQoJICovDQoJZnVuY3Rpb24gX3BhcnNlc2hlZXQoJHNwb3MpIHsNCgkJJGNvbnQgPSB0cnVlOw0KCQkkZGF0YSA9ICR0aGlzLT5kYXRhOw0KCQkvLyByZWFkIEJPRg0KCQkkY29kZSA9IG9yZCgkZGF0YVskc3Bvc10pIHwgb3JkKCRkYXRhWyRzcG9zKzFdKTw8ODsNCgkJJGxlbmd0aCA9IG9yZCgkZGF0YVskc3BvcysyXSkgfCBvcmQoJGRhdGFbJHNwb3MrM10pPDw4Ow0KDQoJCSR2ZXJzaW9uID0gb3JkKCRkYXRhWyRzcG9zICsgNF0pIHwgb3JkKCRkYXRhWyRzcG9zICsgNV0pPDw4Ow0KCQkkc3Vic3RyZWFtVHlwZSA9IG9yZCgkZGF0YVskc3BvcyArIDZdKSB8IG9yZCgkZGF0YVskc3BvcyArIDddKTw8ODsNCg0KCQlpZiAoKCR2ZXJzaW9uICE9IFNQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9CSUZGOCkgJiYgKCR2ZXJzaW9uICE9IFNQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9CSUZGNykpIHsNCgkJCXJldHVybiAtMTsNCgkJfQ0KDQoJCWlmICgkc3Vic3RyZWFtVHlwZSAhPSBTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfV09SS1NIRUVUKXsNCgkJCXJldHVybiAtMjsNCgkJfQ0KCQkkc3BvcyArPSAkbGVuZ3RoICsgNDsNCgkJd2hpbGUoJGNvbnQpIHsNCgkJCSRsb3djb2RlID0gb3JkKCRkYXRhWyRzcG9zXSk7DQoJCQlpZiAoJGxvd2NvZGUgPT0gU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfRU9GKSBicmVhazsNCgkJCSRjb2RlID0gJGxvd2NvZGUgfCBvcmQoJGRhdGFbJHNwb3MrMV0pPDw4Ow0KCQkJJGxlbmd0aCA9IG9yZCgkZGF0YVskc3BvcysyXSkgfCBvcmQoJGRhdGFbJHNwb3MrM10pPDw4Ow0KCQkJJHNwb3MgKz0gNDsNCgkJCSR0aGlzLT5zaGVldHNbJHRoaXMtPnNuXVsnbWF4cm93J10gPSAkdGhpcy0+X3Jvd29mZnNldCAtIDE7DQoJCQkkdGhpcy0+c2hlZXRzWyR0aGlzLT5zbl1bJ21heGNvbCddID0gJHRoaXMtPl9jb2xvZmZzZXQgLSAxOw0KCQkJdW5zZXQoJHRoaXMtPnJlY3R5cGUpOw0KCQkJc3dpdGNoICgkY29kZSkgew0KCQkJCWNhc2UgU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfRElNRU5TSU9OOg0KCQkJCQlpZiAoIWlzc2V0KCR0aGlzLT5udW1Sb3dzKSkgew0KCQkJCQkJaWYgKCgkbGVuZ3RoID09IDEwKSB8fCAgKCR2ZXJzaW9uID09IFNQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9CSUZGNykpew0KCQkJCQkJCSR0aGlzLT5zaGVldHNbJHRoaXMtPnNuXVsnbnVtUm93cyddID0gb3JkKCRkYXRhWyRzcG9zKzJdKSB8IG9yZCgkZGF0YVskc3BvcyszXSkgPDwgODsNCgkJCQkJCQkkdGhpcy0+c2hlZXRzWyR0aGlzLT5zbl1bJ251bUNvbHMnXSA9IG9yZCgkZGF0YVskc3Bvcys2XSkgfCBvcmQoJGRhdGFbJHNwb3MrN10pIDw8IDg7DQoJCQkJCQl9IGVsc2Ugew0KCQkJCQkJCSR0aGlzLT5zaGVldHNbJHRoaXMtPnNuXVsnbnVtUm93cyddID0gb3JkKCRkYXRhWyRzcG9zKzRdKSB8IG9yZCgkZGF0YVskc3Bvcys1XSkgPDwgODsNCgkJCQkJCQkkdGhpcy0+c2hlZXRzWyR0aGlzLT5zbl1bJ251bUNvbHMnXSA9IG9yZCgkZGF0YVskc3BvcysxMF0pIHwgb3JkKCRkYXRhWyRzcG9zKzExXSkgPDwgODsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCQlicmVhazsNCgkJCQljYXNlIFNQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX01FUkdFRENFTExTOg0KCQkJCQkkY2VsbFJhbmdlcyA9IG9yZCgkZGF0YVskc3Bvc10pIHwgb3JkKCRkYXRhWyRzcG9zKzFdKTw8ODsNCgkJCQkJZm9yICgkaSA9IDA7ICRpIDwgJGNlbGxSYW5nZXM7ICRpKyspIHsNCgkJCQkJCSRmciA9ICBvcmQoJGRhdGFbJHNwb3MgKyA4KiRpICsgMl0pIHwgb3JkKCRkYXRhWyRzcG9zICsgOCokaSArIDNdKTw8ODsNCgkJCQkJCSRsciA9ICBvcmQoJGRhdGFbJHNwb3MgKyA4KiRpICsgNF0pIHwgb3JkKCRkYXRhWyRzcG9zICsgOCokaSArIDVdKTw8ODsNCgkJCQkJCSRmYyA9ICBvcmQoJGRhdGFbJHNwb3MgKyA4KiRpICsgNl0pIHwgb3JkKCRkYXRhWyRzcG9zICsgOCokaSArIDddKTw8ODsNCgkJCQkJCSRsYyA9ICBvcmQoJGRhdGFbJHNwb3MgKyA4KiRpICsgOF0pIHwgb3JkKCRkYXRhWyRzcG9zICsgOCokaSArIDldKTw8ODsNCgkJCQkJCWlmICgkbHIgLSAkZnIgPiAwKSB7DQoJCQkJCQkJJHRoaXMtPnNoZWV0c1skdGhpcy0+c25dWydjZWxsc0luZm8nXVskZnIrMV1bJGZjKzFdWydyb3dzcGFuJ10gPSAkbHIgLSAkZnIgKyAxOw0KCQkJCQkJfQ0KCQkJCQkJaWYgKCRsYyAtICRmYyA+IDApIHsNCgkJCQkJCQkkdGhpcy0+c2hlZXRzWyR0aGlzLT5zbl1bJ2NlbGxzSW5mbyddWyRmcisxXVskZmMrMV1bJ2NvbHNwYW4nXSA9ICRsYyAtICRmYyArIDE7DQoJCQkJCQl9DQoJCQkJCX0NCgkJCQkJYnJlYWs7DQoJCQkJY2FzZSBTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9SSzoNCgkJCQljYXNlIFNQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX1JLMjoNCgkJCQkJJHJvdyA9IG9yZCgkZGF0YVskc3Bvc10pIHwgb3JkKCRkYXRhWyRzcG9zKzFdKTw8ODsNCgkJCQkJJGNvbHVtbiA9IG9yZCgkZGF0YVskc3BvcysyXSkgfCBvcmQoJGRhdGFbJHNwb3MrM10pPDw4Ow0KCQkJCQkkcmtudW0gPSAkdGhpcy0+X0dldEludDRkKCRkYXRhLCAkc3BvcyArIDYpOw0KCQkJCQkkbnVtVmFsdWUgPSAkdGhpcy0+X0dldElFRUU3NTQoJHJrbnVtKTsNCgkJCQkJJGluZm8gPSAkdGhpcy0+X2dldENlbGxEZXRhaWxzKCRzcG9zLCRudW1WYWx1ZSwkY29sdW1uKTsNCgkJCQkJJHRoaXMtPmFkZGNlbGwoJHJvdywgJGNvbHVtbiwgJGluZm9bJ3N0cmluZyddLCRpbmZvKTsNCgkJCQkJYnJlYWs7DQoJCQkJY2FzZSBTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9MQUJFTFNTVDoNCgkJCQkJJHJvdwkJPSBvcmQoJGRhdGFbJHNwb3NdKSB8IG9yZCgkZGF0YVskc3BvcysxXSk8PDg7DQoJCQkJCSRjb2x1bW4JID0gb3JkKCRkYXRhWyRzcG9zKzJdKSB8IG9yZCgkZGF0YVskc3BvcyszXSk8PDg7DQoJCQkJCSR4ZmluZGV4CT0gb3JkKCRkYXRhWyRzcG9zKzRdKSB8IG9yZCgkZGF0YVskc3Bvcys1XSk8PDg7DQoJCQkJCSRpbmRleCAgPSAkdGhpcy0+X0dldEludDRkKCRkYXRhLCAkc3BvcyArIDYpOw0KCQkJCQkkdGhpcy0+YWRkY2VsbCgkcm93LCAkY29sdW1uLCAkdGhpcy0+c3N0WyRpbmRleF0sIGFycmF5KCd4ZkluZGV4Jz0+JHhmaW5kZXgpICk7DQoJCQkJCWJyZWFrOw0KCQkJCWNhc2UgU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfTVVMUks6DQoJCQkJCSRyb3cJCT0gb3JkKCRkYXRhWyRzcG9zXSkgfCBvcmQoJGRhdGFbJHNwb3MrMV0pPDw4Ow0KCQkJCQkkY29sRmlyc3QgICA9IG9yZCgkZGF0YVskc3BvcysyXSkgfCBvcmQoJGRhdGFbJHNwb3MrM10pPDw4Ow0KCQkJCQkkY29sTGFzdAk9IG9yZCgkZGF0YVskc3BvcyArICRsZW5ndGggLSAyXSkgfCBvcmQoJGRhdGFbJHNwb3MgKyAkbGVuZ3RoIC0gMV0pPDw4Ow0KCQkJCQkkY29sdW1ucwk9ICRjb2xMYXN0IC0gJGNvbEZpcnN0ICsgMTsNCgkJCQkJJHRtcHBvcyA9ICRzcG9zKzQ7DQoJCQkJCWZvciAoJGkgPSAwOyAkaSA8ICRjb2x1bW5zOyAkaSsrKSB7DQoJCQkJCQkkbnVtVmFsdWUgPSAkdGhpcy0+X0dldElFRUU3NTQoJHRoaXMtPl9HZXRJbnQ0ZCgkZGF0YSwgJHRtcHBvcyArIDIpKTsNCgkJCQkJCSRpbmZvID0gJHRoaXMtPl9nZXRDZWxsRGV0YWlscygkdG1wcG9zLTQsJG51bVZhbHVlLCRjb2xGaXJzdCArICRpICsgMSk7DQoJCQkJCQkkdG1wcG9zICs9IDY7DQoJCQkJCQkkdGhpcy0+YWRkY2VsbCgkcm93LCAkY29sRmlyc3QgKyAkaSwgJGluZm9bJ3N0cmluZyddLCAkaW5mbyk7DQoJCQkJCX0NCgkJCQkJYnJlYWs7DQoJCQkJY2FzZSBTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9OVU1CRVI6DQoJCQkJCSRyb3cJPSBvcmQoJGRhdGFbJHNwb3NdKSB8IG9yZCgkZGF0YVskc3BvcysxXSk8PDg7DQoJCQkJCSRjb2x1bW4gPSBvcmQoJGRhdGFbJHNwb3MrMl0pIHwgb3JkKCRkYXRhWyRzcG9zKzNdKTw8ODsNCgkJCQkJJHRtcCA9IHVucGFjaygiZGRvdWJsZSIsIHN1YnN0cigkZGF0YSwgJHNwb3MgKyA2LCA4KSk7IC8vIEl0IG1hY2hpbmUgbWFjaGluZSBkZXBlbmRlbnQNCgkJCQkJaWYgKCR0aGlzLT5pc0RhdGUoJHNwb3MpKSB7DQoJCQkJCQkkbnVtVmFsdWUgPSAkdG1wWydkb3VibGUnXTsNCgkJCQkJfQ0KCQkJCQllbHNlIHsNCgkJCQkJCSRudW1WYWx1ZSA9ICR0aGlzLT5jcmVhdGVOdW1iZXIoJHNwb3MpOw0KCQkJCQl9DQoJCQkJCSRpbmZvID0gJHRoaXMtPl9nZXRDZWxsRGV0YWlscygkc3BvcywkbnVtVmFsdWUsJGNvbHVtbik7DQoJCQkJCSR0aGlzLT5hZGRjZWxsKCRyb3csICRjb2x1bW4sICRpbmZvWydzdHJpbmcnXSwgJGluZm8pOw0KCQkJCQlicmVhazsNCg0KCQkJCWNhc2UgU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfRk9STVVMQToNCgkJCQljYXNlIFNQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX0ZPUk1VTEEyOg0KCQkJCQkkcm93CT0gb3JkKCRkYXRhWyRzcG9zXSkgfCBvcmQoJGRhdGFbJHNwb3MrMV0pPDw4Ow0KCQkJCQkkY29sdW1uID0gb3JkKCRkYXRhWyRzcG9zKzJdKSB8IG9yZCgkZGF0YVskc3BvcyszXSk8PDg7DQoJCQkJCWlmICgob3JkKCRkYXRhWyRzcG9zKzZdKT09MCkgJiYgKG9yZCgkZGF0YVskc3BvcysxMl0pPT0yNTUpICYmIChvcmQoJGRhdGFbJHNwb3MrMTNdKT09MjU1KSkgew0KCQkJCQkJLy9TdHJpbmcgZm9ybXVsYS4gUmVzdWx0IGZvbGxvd3MgaW4gYSBTVFJJTkcgcmVjb3JkDQoJCQkJCQkvLyBUaGlzIHJvdy9jb2wgYXJlIHN0b3JlZCB0byBiZSByZWZlcmVuY2VkIGluIHRoYXQgcmVjb3JkDQoJCQkJCQkvLyBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvcGhwLWV4Y2VsLXJlYWRlci9pc3N1ZXMvZGV0YWlsP2lkPTQNCgkJCQkJCSRwcmV2aW91c1JvdyA9ICRyb3c7DQoJCQkJCQkkcHJldmlvdXNDb2wgPSAkY29sdW1uOw0KCQkJCQl9IGVsc2VpZiAoKG9yZCgkZGF0YVskc3Bvcys2XSk9PTEpICYmIChvcmQoJGRhdGFbJHNwb3MrMTJdKT09MjU1KSAmJiAob3JkKCRkYXRhWyRzcG9zKzEzXSk9PTI1NSkpIHsNCgkJCQkJCS8vQm9vbGVhbiBmb3JtdWxhLiBSZXN1bHQgaXMgaW4gKzI7IDA9ZmFsc2UsMT10cnVlDQoJCQkJCQkvLyBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvcGhwLWV4Y2VsLXJlYWRlci9pc3N1ZXMvZGV0YWlsP2lkPTQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmQoJHRoaXMtPmRhdGFbJHNwb3MrOF0pPT0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmFkZGNlbGwoJHJvdywgJGNvbHVtbiwgIlRSVUUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmFkZGNlbGwoJHJvdywgJGNvbHVtbiwgIkZBTFNFIik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoJCQkJCX0gZWxzZWlmICgob3JkKCRkYXRhWyRzcG9zKzZdKT09MikgJiYgKG9yZCgkZGF0YVskc3BvcysxMl0pPT0yNTUpICYmIChvcmQoJGRhdGFbJHNwb3MrMTNdKT09MjU1KSkgew0KCQkJCQkJLy9FcnJvciBmb3JtdWxhLiBFcnJvciBjb2RlIGlzIGluICsyOw0KCQkJCQl9IGVsc2VpZiAoKG9yZCgkZGF0YVskc3Bvcys2XSk9PTMpICYmIChvcmQoJGRhdGFbJHNwb3MrMTJdKT09MjU1KSAmJiAob3JkKCRkYXRhWyRzcG9zKzEzXSk9PTI1NSkpIHsNCgkJCQkJCS8vRm9ybXVsYSByZXN1bHQgaXMgYSBudWxsIHN0cmluZy4NCgkJCQkJCSR0aGlzLT5hZGRjZWxsKCRyb3csICRjb2x1bW4sICcnKTsNCgkJCQkJfSBlbHNlIHsNCgkJCQkJCS8vIHJlc3VsdCBpcyBhIG51bWJlciwgc28gZmlyc3QgMTQgYnl0ZXMgYXJlIGp1c3QgbGlrZSBhIF9OVU1CRVIgcmVjb3JkDQoJCQkJCQkkdG1wID0gdW5wYWNrKCJkZG91YmxlIiwgc3Vic3RyKCRkYXRhLCAkc3BvcyArIDYsIDgpKTsgLy8gSXQgbWFjaGluZSBtYWNoaW5lIGRlcGVuZGVudA0KCQkJCQkJCSAgaWYgKCR0aGlzLT5pc0RhdGUoJHNwb3MpKSB7DQoJCQkJCQkJCSRudW1WYWx1ZSA9ICR0bXBbJ2RvdWJsZSddOw0KCQkJCQkJCSAgfQ0KCQkJCQkJCSAgZWxzZSB7DQoJCQkJCQkJCSRudW1WYWx1ZSA9ICR0aGlzLT5jcmVhdGVOdW1iZXIoJHNwb3MpOw0KCQkJCQkJCSAgfQ0KCQkJCQkJJGluZm8gPSAkdGhpcy0+X2dldENlbGxEZXRhaWxzKCRzcG9zLCRudW1WYWx1ZSwkY29sdW1uKTsNCgkJCQkJCSR0aGlzLT5hZGRjZWxsKCRyb3csICRjb2x1bW4sICRpbmZvWydzdHJpbmcnXSwgJGluZm8pOw0KCQkJCQl9DQoJCQkJCWJyZWFrOw0KCQkJCWNhc2UgU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfQk9PTEVSUjoNCgkJCQkJJHJvdwk9IG9yZCgkZGF0YVskc3Bvc10pIHwgb3JkKCRkYXRhWyRzcG9zKzFdKTw8ODsNCgkJCQkJJGNvbHVtbiA9IG9yZCgkZGF0YVskc3BvcysyXSkgfCBvcmQoJGRhdGFbJHNwb3MrM10pPDw4Ow0KCQkJCQkkc3RyaW5nID0gb3JkKCRkYXRhWyRzcG9zKzZdKTsNCgkJCQkJJHRoaXMtPmFkZGNlbGwoJHJvdywgJGNvbHVtbiwgJHN0cmluZyk7DQoJCQkJCWJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfU1RSSU5HOg0KCQkJCQkvLyBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvcGhwLWV4Y2VsLXJlYWRlci9pc3N1ZXMvZGV0YWlsP2lkPTQNCgkJCQkJaWYgKCR2ZXJzaW9uID09IFNQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9CSUZGOCl7DQoJCQkJCQkvLyBVbmljb2RlIDE2IHN0cmluZywgbGlrZSBhbiBTU1QgcmVjb3JkDQoJCQkJCQkkeHBvcyA9ICRzcG9zOw0KCQkJCQkJJG51bUNoYXJzID1vcmQoJGRhdGFbJHhwb3NdKSB8IChvcmQoJGRhdGFbJHhwb3MrMV0pIDw8IDgpOw0KCQkJCQkJJHhwb3MgKz0gMjsNCgkJCQkJCSRvcHRpb25GbGFncyA9b3JkKCRkYXRhWyR4cG9zXSk7DQoJCQkJCQkkeHBvcysrOw0KCQkJCQkJJGFzY2lpRW5jb2RpbmcgPSAoKCRvcHRpb25GbGFncyAmMHgwMSkgPT0gMCkgOw0KCQkJCQkJJGV4dGVuZGVkU3RyaW5nID0gKCgkb3B0aW9uRmxhZ3MgJiAweDA0KSAhPSAwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlZSBpZiBzdHJpbmcgY29udGFpbnMgZm9ybWF0dGluZyBpbmZvcm1hdGlvbg0KCQkJCQkJJHJpY2hTdHJpbmcgPSAoKCRvcHRpb25GbGFncyAmIDB4MDgpICE9IDApOw0KCQkJCQkJaWYgKCRyaWNoU3RyaW5nKSB7DQoJCQkJCQkJLy8gUmVhZCBpbiB0aGUgY3J1bg0KCQkJCQkJCSRmb3JtYXR0aW5nUnVucyA9b3JkKCRkYXRhWyR4cG9zXSkgfCAob3JkKCRkYXRhWyR4cG9zKzFdKSA8PCA4KTsNCgkJCQkJCQkkeHBvcyArPSAyOw0KCQkJCQkJfQ0KCQkJCQkJaWYgKCRleHRlbmRlZFN0cmluZykgew0KCQkJCQkJCS8vIFJlYWQgaW4gY2NoRXh0UnN0DQoJCQkJCQkJJGV4dGVuZGVkUnVuTGVuZ3RoID0kdGhpcy0+X0dldEludDRkKCR0aGlzLT5kYXRhLCAkeHBvcyk7DQoJCQkJCQkJJHhwb3MgKz0gNDsNCgkJCQkJCX0NCgkJCQkJCSRsZW4gPSAoJGFzY2lpRW5jb2RpbmcpPyRudW1DaGFycyA6ICRudW1DaGFycyoyOw0KCQkJCQkJJHJldHN0ciA9c3Vic3RyKCRkYXRhLCAkeHBvcywgJGxlbik7DQoJCQkJCQkkeHBvcyArPSAkbGVuOw0KCQkJCQkJJHJldHN0ciA9ICgkYXNjaWlFbmNvZGluZyk\/ICRyZXRzdHIgOiAkdGhpcy0+X2VuY29kZVVURjE2KCRyZXRzdHIpOw0KCQkJCQl9DQoJCQkJCWVsc2VpZiAoJHZlcnNpb24gPT0gU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX0JJRkY3KXsNCgkJCQkJCS8vIFNpbXBsZSBieXRlIHN0cmluZw0KCQkJCQkJJHhwb3MgPSAkc3BvczsNCgkJCQkJCSRudW1DaGFycyA9b3JkKCRkYXRhWyR4cG9zXSkgfCAob3JkKCRkYXRhWyR4cG9zKzFdKSA8PCA4KTsNCgkJCQkJCSR4cG9zICs9IDI7DQoJCQkJCQkkcmV0c3RyID1zdWJzdHIoJGRhdGEsICR4cG9zLCAkbnVtQ2hhcnMpOw0KCQkJCQl9DQoJCQkJCSR0aGlzLT5hZGRjZWxsKCRwcmV2aW91c1JvdywgJHByZXZpb3VzQ29sLCAkcmV0c3RyKTsNCgkJCQkJYnJlYWs7DQoJCQkJY2FzZSBTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9ST1c6CgkJCQkJJHJvdwk9IG9yZCgkZGF0YVskc3Bvc10pIHwgb3JkKCRkYXRhWyRzcG9zKzFdKTw8ODsNCgkJCQkJJHJvd0luZm8gPSBvcmQoJGRhdGFbJHNwb3MgKyA2XSkgfCAoKG9yZCgkZGF0YVskc3Bvcys3XSkgPDwgOCkgJiAweDdGRkYpOwoJCQkJCWlmICgoJHJvd0luZm8gJiAweDgwMDApID4gMCkgewoJCQkJCQkkcm93SGVpZ2h0ID0gLTE7CgkJCQkJfSBlbHNlIHsKCQkJCQkJJHJvd0hlaWdodCA9ICRyb3dJbmZvICYgMHg3RkZGOwoJCQkJCX0NCgkJCQkJJHJvd0hpZGRlbiA9IChvcmQoJGRhdGFbJHNwb3MgKyAxMl0pICYgMHgyMCkgPj4gNTsNCgkJCQkJJHRoaXMtPnJvd0luZm9bJHRoaXMtPnNuXVskcm93KzFdID0gQXJyYXkoJ2hlaWdodCcgPT4gJHJvd0hlaWdodCAvIDIwLCAnaGlkZGVuJz0+JHJvd0hpZGRlbiApOw0KCQkJCQlicmVhazsNCgkJCQljYXNlIFNQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX0RCQ0VMTDoNCgkJCQkJYnJlYWs7DQoJCQkJY2FzZSBTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9NVUxCTEFOSzoNCgkJCQkJJHJvdyA9IG9yZCgkZGF0YVskc3Bvc10pIHwgb3JkKCRkYXRhWyRzcG9zKzFdKTw8ODsNCgkJCQkJJGNvbHVtbiA9IG9yZCgkZGF0YVskc3BvcysyXSkgfCBvcmQoJGRhdGFbJHNwb3MrM10pPDw4Ow0KCQkJCQkkY29scyA9ICgkbGVuZ3RoIC8gMikgLSAzOw0KCQkJCQlmb3IgKCRjID0gMDsgJGMgPCAkY29sczsgJGMrKykgew0KCQkJCQkJJHhmaW5kZXggPSBvcmQoJGRhdGFbJHNwb3MgKyA0ICsgKCRjICogMildKSB8IG9yZCgkZGF0YVskc3BvcyArIDUgKyAoJGMgKiAyKV0pPDw4Ow0KCQkJCQkJJHRoaXMtPmFkZGNlbGwoJHJvdywgJGNvbHVtbiArICRjLCAiIiwgYXJyYXkoJ3hmSW5kZXgnPT4keGZpbmRleCkpOw0KCQkJCQl9DQoJCQkJCWJyZWFrOw0KCQkJCWNhc2UgU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfTEFCRUw6DQoJCQkJCSRyb3cJPSBvcmQoJGRhdGFbJHNwb3NdKSB8IG9yZCgkZGF0YVskc3BvcysxXSk8PDg7DQoJCQkJCSRjb2x1bW4gPSBvcmQoJGRhdGFbJHNwb3MrMl0pIHwgb3JkKCRkYXRhWyRzcG9zKzNdKTw8ODsNCgkJCQkJJHRoaXMtPmFkZGNlbGwoJHJvdywgJGNvbHVtbiwgc3Vic3RyKCRkYXRhLCAkc3BvcyArIDgsIG9yZCgkZGF0YVskc3BvcyArIDZdKSB8IG9yZCgkZGF0YVskc3BvcyArIDddKTw8OCkpOw0KCQkJCQlicmVhazsNCgkJCQljYXNlIFNQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX0VPRjoNCgkJCQkJJGNvbnQgPSBmYWxzZTsNCgkJCQkJYnJlYWs7CgkJCQljYXNlIFNQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX0hZUEVSOg0KCQkJCQkvLyAgT25seSBoYW5kbGUgaHlwZXJsaW5rcyB0byBhIFVSTA0KCQkJCQkkcm93CT0gb3JkKCR0aGlzLT5kYXRhWyRzcG9zXSkgfCBvcmQoJHRoaXMtPmRhdGFbJHNwb3MrMV0pPDw4Ow0KCQkJCQkkcm93MiAgID0gb3JkKCR0aGlzLT5kYXRhWyRzcG9zKzJdKSB8IG9yZCgkdGhpcy0+ZGF0YVskc3BvcyszXSk8PDg7DQoJCQkJCSRjb2x1bW4gPSBvcmQoJHRoaXMtPmRhdGFbJHNwb3MrNF0pIHwgb3JkKCR0aGlzLT5kYXRhWyRzcG9zKzVdKTw8ODsNCgkJCQkJJGNvbHVtbjIgPSBvcmQoJHRoaXMtPmRhdGFbJHNwb3MrNl0pIHwgb3JkKCR0aGlzLT5kYXRhWyRzcG9zKzddKTw8ODsNCgkJCQkJJGxpbmtkYXRhID0gQXJyYXkoKTsNCgkJCQkJJGZsYWdzID0gb3JkKCR0aGlzLT5kYXRhWyRzcG9zICsgMjhdKTsNCgkJCQkJJHVkZXNjID0gIiI7DQoJCQkJCSR1bGluayA9ICIiOw0KCQkJCQkkdWxvYyA9IDMyOw0KCQkJCQkkbGlua2RhdGFbJ2ZsYWdzJ10gPSAkZmxhZ3M7DQoJCQkJCWlmICgoJGZsYWdzICYgMSkgPiAwICkgeyAgIC8vIGlzIGEgdHlwZSB3ZSB1bmRlcnN0YW5kDQoJCQkJCQkvLyAgaXMgdGhlcmUgYSBkZXNjcmlwdGlvbiA\/DQoJCQkJCQlpZiAoKCRmbGFncyAmIDB4MTQpID09IDB4MTQgKSB7ICAgLy8gaGFzIGEgZGVzY3JpcHRpb24NCgkJCQkJCQkkdWxvYyArPSA0Ow0KCQkJCQkJCSRkZXNjTGVuID0gb3JkKCR0aGlzLT5kYXRhWyRzcG9zICsgMzJdKSB8IG9yZCgkdGhpcy0+ZGF0YVskc3BvcyArIDMzXSkgPDwgODsNCgkJCQkJCQkkdWRlc2MgPSBzdWJzdHIoJHRoaXMtPmRhdGEsICRzcG9zICsgJHVsb2MsICRkZXNjTGVuICogMik7DQoJCQkJCQkJJHVsb2MgKz0gMiAqICRkZXNjTGVuOw0KCQkJCQkJfQ0KCQkJCQkJJHVsaW5rID0gJHRoaXMtPnJlYWQxNmJpdHN0cmluZygkdGhpcy0+ZGF0YSwgJHNwb3MgKyAkdWxvYyArIDIwKTsKCQkJCQkJaWYgKCR1ZGVzYyA9PSAiIikgew0KCQkJCQkJCSR1ZGVzYyA9ICR1bGluazsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCQkkbGlua2RhdGFbJ2Rlc2MnXSA9ICR1ZGVzYzsNCgkJCQkJJGxpbmtkYXRhWydsaW5rJ10gPSAkdGhpcy0+X2VuY29kZVVURjE2KCR1bGluayk7DQoJCQkJCWZvciAoJHI9JHJvdzsgJHI8PSRyb3cyOyAkcisrKSB7IA0KCQkJCQkJZm9yICgkYz0kY29sdW1uOyAkYzw9JGNvbHVtbjI7ICRjKyspIHsNCgkJCQkJCQkkdGhpcy0+c2hlZXRzWyR0aGlzLT5zbl1bJ2NlbGxzSW5mbyddWyRyKzFdWyRjKzFdWydoeXBlcmxpbmsnXSA9ICRsaW5rZGF0YTsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCQlicmVhazsNCgkJCQljYXNlIFNQUkVBRFNIRUVUX0VYQ0VMX1JFQURFUl9UWVBFX0RFRkNPTFdJRFRIOg0KCQkJCQkkdGhpcy0+ZGVmYXVsdENvbFdpZHRoICA9IG9yZCgkZGF0YVskc3Bvcys0XSkgfCBvcmQoJGRhdGFbJHNwb3MrNV0pIDw8IDg7IAoJCQkJCWJyZWFrOwoJCQkJY2FzZSBTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfVFlQRV9TVEFOREFSRFdJRFRIOg0KCQkJCQkkdGhpcy0+c3RhbmRhcmRDb2xXaWR0aCAgPSBvcmQoJGRhdGFbJHNwb3MrNF0pIHwgb3JkKCRkYXRhWyRzcG9zKzVdKSA8PCA4OyAKCQkJCQlicmVhazsKCQkJCWNhc2UgU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1RZUEVfQ09MSU5GTzoNCgkJCQkJJGNvbGZyb20gPSBvcmQoJGRhdGFbJHNwb3MrMF0pIHwgb3JkKCRkYXRhWyRzcG9zKzFdKSA8PCA4Ow0KCQkJCQkkY29sdG8gPSBvcmQoJGRhdGFbJHNwb3MrMl0pIHwgb3JkKCRkYXRhWyRzcG9zKzNdKSA8PCA4Ow0KCQkJCQkkY3cgPSBvcmQoJGRhdGFbJHNwb3MrNF0pIHwgb3JkKCRkYXRhWyRzcG9zKzVdKSA8PCA4OyAKCQkJCQkkY3hmID0gb3JkKCRkYXRhWyRzcG9zKzZdKSB8IG9yZCgkZGF0YVskc3Bvcys3XSkgPDwgODsgCgkJCQkJJGNvID0gb3JkKCRkYXRhWyRzcG9zKzhdKTsgCgkJCQkJZm9yICgkY29saSA9ICRjb2xmcm9tOyAkY29saSA8PSAkY29sdG87ICRjb2xpKyspIHsKCQkJCQkJJHRoaXMtPmNvbEluZm9bJHRoaXMtPnNuXVskY29saSsxXSA9IEFycmF5KCd3aWR0aCcgPT4gJGN3LCAneGYnID0+ICRjeGYsICdoaWRkZW4nID0+ICgkY28gJiAweDAxKSwgJ2NvbGxhcHNlZCcgPT4gKCRjbyAmIDB4MTAwMCkgPj4gMTIpOw0KCQkJCQl9DQoJCQkJCWJyZWFrOw0KCgkJCQlkZWZhdWx0OgoJCQkJCWJyZWFrOw0KCQkJfQ0KCQkJJHNwb3MgKz0gJGxlbmd0aDsNCgkJfQ0KDQoJCWlmICghaXNzZXQoJHRoaXMtPnNoZWV0c1skdGhpcy0+c25dWydudW1Sb3dzJ10pKQ0KCQkJICR0aGlzLT5zaGVldHNbJHRoaXMtPnNuXVsnbnVtUm93cyddID0gJHRoaXMtPnNoZWV0c1skdGhpcy0+c25dWydtYXhyb3cnXTsNCgkJaWYgKCFpc3NldCgkdGhpcy0+c2hlZXRzWyR0aGlzLT5zbl1bJ251bUNvbHMnXSkpDQoJCQkgJHRoaXMtPnNoZWV0c1skdGhpcy0+c25dWydudW1Db2xzJ10gPSAkdGhpcy0+c2hlZXRzWyR0aGlzLT5zbl1bJ21heGNvbCddOw0KCQl9DQoNCgkJZnVuY3Rpb24gaXNEYXRlKCRzcG9zKSB7DQoJCQkkeGZpbmRleCA9IG9yZCgkdGhpcy0+ZGF0YVskc3Bvcys0XSkgfCBvcmQoJHRoaXMtPmRhdGFbJHNwb3MrNV0pIDw8IDg7DQoJCQlyZXR1cm4gKCR0aGlzLT54ZlJlY29yZHNbJHhmaW5kZXhdWyd0eXBlJ10gPT0gJ2RhdGUnKTsNCgkJfQ0KDQoJCS8vIEdldCB0aGUgZGV0YWlscyBmb3IgYSBwYXJ0aWN1bGFyIGNlbGwNCgkJZnVuY3Rpb24gX2dldENlbGxEZXRhaWxzKCRzcG9zLCRudW1WYWx1ZSwkY29sdW1uKSB7DQoJCQkkeGZpbmRleCA9IG9yZCgkdGhpcy0+ZGF0YVskc3Bvcys0XSkgfCBvcmQoJHRoaXMtPmRhdGFbJHNwb3MrNV0pIDw8IDg7DQoJCQkkeGZyZWNvcmQgPSAkdGhpcy0+eGZSZWNvcmRzWyR4ZmluZGV4XTsNCgkJCSR0eXBlID0gJHhmcmVjb3JkWyd0eXBlJ107DQoNCgkJCSRmb3JtYXQgPSAkeGZyZWNvcmRbJ2Zvcm1hdCddOw0KCQkJJGZvcm1hdEluZGV4ID0gJHhmcmVjb3JkWydmb3JtYXRJbmRleCddOw0KCQkJJGZvbnRJbmRleCA9ICR4ZnJlY29yZFsnZm9udEluZGV4J107DQoJCQkkZm9ybWF0Q29sb3IgPSAiIjsNCgkJCSRyZWN0eXBlID0gJyc7DQoJCQkkc3RyaW5nID0gJyc7DQoJCQkkcmF3ID0gJyc7DQoNCgkJCWlmIChpc3NldCgkdGhpcy0+X2NvbHVtbnNGb3JtYXRbJGNvbHVtbiArIDFdKSl7DQoJCQkJJGZvcm1hdCA9ICR0aGlzLT5fY29sdW1uc0Zvcm1hdFskY29sdW1uICsgMV07DQoJCQl9DQoNCgkJCWlmICgkdHlwZSA9PSAnZGF0ZScpIHsNCgkJCQkvLyBTZWUgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3BocC1leGNlbC1yZWFkZXItZGlzY3Vzcy9icm93c2VfZnJtL3RocmVhZC85YzNmOTc5MGQxMmQ4ZTEwL2YyMDQ1YzIzNjlhYzc5ZGUNCgkJCQkkcmVjdHlwZSA9ICdkYXRlJzsNCgkJCQkvLyBDb252ZXJ0IG51bWVyaWMgdmFsdWUgaW50byBhIGRhdGUNCgkJCQkkdXRjRGF5cyA9IGZsb29yKCRudW1WYWx1ZSAtICgkdGhpcy0+bmluZXRlZW5Gb3VyID8gU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1VUQ09GRlNFVERBWVMxOTA0IDogU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX1VUQ09GRlNFVERBWVMpKTsNCgkJCQkkdXRjVmFsdWUgPSAoJHV0Y0RheXMpICogU1BSRUFEU0hFRVRfRVhDRUxfUkVBREVSX01TSU5BREFZOw0KCQkJCSRkYXRlaW5mbyA9IGdtZ2V0ZGF0ZSgkdXRjVmFsdWUpOw0KDQoJCQkJJHJhdyA9ICRudW1WYWx1ZTsNCgkJCQkkZnJhY3Rpb25hbERheSA9ICRudW1WYWx1ZSAtIGZsb29yKCRudW1WYWx1ZSkgKyAuMDAwMDAwMTsgLy8gVGhlIC4wMDAwMDAxIGlzIHRvIGZpeCBmb3IgcGhwL2V4Y2VsIGZyYWN0aW9uYWwgZGlmZnMNCg0KCQkJCSR0b3RhbHNlY29uZHMgPSBmbG9vcihTUFJFQURTSEVFVF9FWENFTF9SRUFERVJfTVNJTkFEQVkgKiAkZnJhY3Rpb25hbERheSk7DQoJCQkJJHNlY3MgPSAkdG90YWxzZWNvbmRzICUgNjA7DQoJCQkJJHRvdGFsc2Vjb25kcyAtPSAkc2VjczsNCgkJCQkkaG91cnMgPSBmbG9vcigkdG90YWxzZWNvbmRzIC8gKDYwICogNjApKTsNCgkJCQkkbWlucyA9IGZsb29yKCR0b3RhbHNlY29uZHMgLyA2MCkgJSA2MDsNCgkJCQkkc3RyaW5nID0gZGF0ZSAoJGZvcm1hdCwgbWt0aW1lKCRob3VycywgJG1pbnMsICRzZWNzLCAkZGF0ZWluZm9bIm1vbiJdLCAkZGF0ZWluZm9bIm1kYXkiXSwgJGRhdGVpbmZvWyJ5ZWFyIl0pKTsNCgkJCX0gZWxzZSBpZiAoJHR5cGUgPT0gJ251bWJlcicpIHsNCgkJCQkkcmVjdHlwZSA9ICdudW1iZXInOw0KCQkJCSRmb3JtYXR0ZWQgPSAkdGhpcy0+X2Zvcm1hdF92YWx1ZSgkZm9ybWF0LCAkbnVtVmFsdWUsICRmb3JtYXRJbmRleCk7DQoJCQkJJHN0cmluZyA9ICRmb3JtYXR0ZWRbJ3N0cmluZyddOw0KCQkJCSRmb3JtYXRDb2xvciA9ICRmb3JtYXR0ZWRbJ2Zvcm1hdENvbG9yJ107DQoJCQkJJHJhdyA9ICRudW1WYWx1ZTsNCgkJCX0gZWxzZXsNCgkJCQlpZiAoJGZvcm1hdD09IiIpIHsNCgkJCQkJJGZvcm1hdCA9ICR0aGlzLT5fZGVmYXVsdEZvcm1hdDsNCgkJCQl9DQoJCQkJJHJlY3R5cGUgPSAndW5rbm93bic7DQoJCQkJJGZvcm1hdHRlZCA9ICR0aGlzLT5fZm9ybWF0X3ZhbHVlKCRmb3JtYXQsICRudW1WYWx1ZSwgJGZvcm1hdEluZGV4KTsNCgkJCQkkc3RyaW5nID0gJGZvcm1hdHRlZFsnc3RyaW5nJ107DQoJCQkJJGZvcm1hdENvbG9yID0gJGZvcm1hdHRlZFsnZm9ybWF0Q29sb3InXTsNCgkJCQkkcmF3ID0gJG51bVZhbHVlOw0KCQkJfQ0KDQoJCQlyZXR1cm4gYXJyYXkoDQoJCQkJJ3N0cmluZyc9PiRzdHJpbmcsDQoJCQkJJ3Jhdyc9PiRyYXcsDQoJCQkJJ3JlY3R5cGUnPT4kcmVjdHlwZSwNCgkJCQknZm9ybWF0Jz0+JGZvcm1hdCwNCgkJCQknZm9ybWF0SW5kZXgnPT4kZm9ybWF0SW5kZXgsDQoJCQkJJ2ZvbnRJbmRleCc9PiRmb250SW5kZXgsDQoJCQkJJ2Zvcm1hdENvbG9yJz0+JGZvcm1hdENvbG9yLA0KCQkJCSd4ZkluZGV4Jz0+JHhmaW5kZXgNCgkJCSk7DQoNCgkJfQ0KDQoNCglmdW5jdGlvbiBjcmVhdGVOdW1iZXIoJHNwb3MpIHsNCgkJJHJrbnVtaGlnaCA9ICR0aGlzLT5fR2V0SW50NGQoJHRoaXMtPmRhdGEsICRzcG9zICsgMTApOw0KCQkkcmtudW1sb3cgPSAkdGhpcy0+X0dldEludDRkKCR0aGlzLT5kYXRhLCAkc3BvcyArIDYpOw0KCQkkc2lnbiA9ICgkcmtudW1oaWdoICYgMHg4MDAwMDAwMCkgPj4gMzE7DQoJCSRleHAgPSAgKCRya251bWhpZ2ggJiAweDdmZjAwMDAwKSA+PiAyMDsNCgkJJG1hbnRpc3NhID0gKDB4MTAwMDAwIHwgKCRya251bWhpZ2ggJiAweDAwMGZmZmZmKSk7DQoJCSRtYW50aXNzYWxvdzEgPSAoJHJrbnVtbG93ICYgMHg4MDAwMDAwMCkgPj4gMzE7DQoJCSRtYW50aXNzYWxvdzIgPSAoJHJrbnVtbG93ICYgMHg3ZmZmZmZmZik7DQoJCSR2YWx1ZSA9ICRtYW50aXNzYSAvIHBvdyggMiAsICgyMC0gKCRleHAgLSAxMDIzKSkpOw0KCQlpZiAoJG1hbnRpc3NhbG93MSAhPSAwKSAkdmFsdWUgKz0gMSAvIHBvdyAoMiAsICgyMSAtICgkZXhwIC0gMTAyMykpKTsNCgkJJHZhbHVlICs9ICRtYW50aXNzYWxvdzIgLyBwb3cgKDIgLCAoNTIgLSAoJGV4cCAtIDEwMjMpKSk7DQoJCWlmICgkc2lnbikgeyR2YWx1ZSA9IC0xICogJHZhbHVlO30NCgkJcmV0dXJuICAkdmFsdWU7DQoJfQ0KDQoJZnVuY3Rpb24gYWRkY2VsbCgkcm93LCAkY29sLCAkc3RyaW5nLCAkaW5mbz1udWxsKSB7DQoJCSR0aGlzLT5zaGVldHNbJHRoaXMtPnNuXVsnbWF4cm93J10gPSBtYXgoJHRoaXMtPnNoZWV0c1skdGhpcy0+c25dWydtYXhyb3cnXSwgJHJvdyArICR0aGlzLT5fcm93b2Zmc2V0KTsNCgkJJHRoaXMtPnNoZWV0c1skdGhpcy0+c25dWydtYXhjb2wnXSA9IG1heCgkdGhpcy0+c2hlZXRzWyR0aGlzLT5zbl1bJ21heGNvbCddLCAkY29sICsgJHRoaXMtPl9jb2xvZmZzZXQpOw0KCQkkdGhpcy0+c2hlZXRzWyR0aGlzLT5zbl1bJ2NlbGxzJ11bJHJvdyArICR0aGlzLT5fcm93b2Zmc2V0XVskY29sICsgJHRoaXMtPl9jb2xvZmZzZXRdID0gJHN0cmluZzsNCgkJaWYgKCR0aGlzLT5zdG9yZV9leHRlbmRlZF9pbmZvICYmICRpbmZvKSB7DQoJCQlmb3JlYWNoICgkaW5mbyBhcyAka2V5PT4kdmFsKSB7DQoJCQkJJHRoaXMtPnNoZWV0c1skdGhpcy0+c25dWydjZWxsc0luZm8nXVskcm93ICsgJHRoaXMtPl9yb3dvZmZzZXRdWyRjb2wgKyAkdGhpcy0+X2NvbG9mZnNldF1bJGtleV0gPSAkdmFsOw0KCQkJfQ0KCQl9DQoJfQ0KDQoNCglmdW5jdGlvbiBfR2V0SUVFRTc1NCgkcmtudW0pIHsNCgkJaWYgKCgkcmtudW0gJiAweDAyKSAhPSAwKSB7DQoJCQkJJHZhbHVlID0gJHJrbnVtID4+IDI7DQoJCX0gZWxzZSB7DQoJCQkvL21tcA0KCQkJLy8gSSBnb3QgbXkgaW5mbyBvbiBJRUVFNzU0IGVuY29kaW5nIGZyb20NCgkJCS8vIGh0dHA6Ly9yZXNlYXJjaC5taWNyb3NvZnQuY29tL35ob2xsYXNjaC9jZ2luZGV4L2NvZGluZy9pZWVlZmxvYXQuaHRtbA0KCQkJLy8gVGhlIFJLIGZvcm1hdCBjYWxscyBmb3IgdXNpbmcgb25seSB0aGUgbW9zdCBzaWduaWZpY2FudCAzMCBiaXRzIG9mIHRoZQ0KCQkJLy8gNjQgYml0IGZsb2F0aW5nIHBvaW50IHZhbHVlLiBUaGUgb3RoZXIgMzQgYml0cyBhcmUgYXNzdW1lZCB0byBiZSAwDQoJCQkvLyBTbywgd2UgdXNlIHRoZSB1cHBlciAzMCBiaXRzIG9mICRya251bSBhcyBmb2xsb3dzLi4uDQoJCQkkc2lnbiA9ICgkcmtudW0gJiAweDgwMDAwMDAwKSA+PiAzMTsNCgkJCSRleHAgPSAoJHJrbnVtICYgMHg3ZmYwMDAwMCkgPj4gMjA7DQoJCQkkbWFudGlzc2EgPSAoMHgxMDAwMDAgfCAoJHJrbnVtICYgMHgwMDBmZmZmYykpOw0KCQkJJHZhbHVlID0gJG1hbnRpc3NhIC8gcG93KCAyICwgKDIwLSAoJGV4cCAtIDEwMjMpKSk7DQoJCQlpZiAoJHNpZ24pIHsNCgkJCQkkdmFsdWUgPSAtMSAqICR2YWx1ZTsNCgkJCX0NCgkJCS8vZW5kIG9mIGNoYW5nZXMgYnkgbW1wDQoJCX0NCgkJaWYgKCgkcmtudW0gJiAweDAxKSAhPSAwKSB7DQoJCQkkdmFsdWUgLz0gMTAwOw0KCQl9DQoJCXJldHVybiAkdmFsdWU7DQoJfQ0KDQoJZnVuY3Rpb24gX2VuY29kZVVURjE2KCRzdHJpbmcpIHsNCgkJJHJlc3VsdCA9ICRzdHJpbmc7DQoJCWlmICgkdGhpcy0+X2RlZmF1bHRFbmNvZGluZyl7DQoJCQlzd2l0Y2ggKCR0aGlzLT5fZW5jb2RlckZ1bmN0aW9uKXsNCgkJCQljYXNlICdpY29udicgOgkgJHJlc3VsdCA9IGljb252KCdVVEYtMTZMRScsICR0aGlzLT5fZGVmYXVsdEVuY29kaW5nLCAkc3RyaW5nKTsNCgkJCQkJCQkJYnJlYWs7DQoJCQkJY2FzZSAnbWJfY29udmVydF9lbmNvZGluZycgOgkgJHJlc3VsdCA9IG1iX2NvbnZlcnRfZW5jb2RpbmcoJHN0cmluZywgJHRoaXMtPl9kZWZhdWx0RW5jb2RpbmcsICdVVEYtMTZMRScgKTsNCgkJCQkJCQkJYnJlYWs7DQoJCQl9DQoJCX0NCgkJcmV0dXJuICRyZXN1bHQ7DQoJfQ0KDQoJZnVuY3Rpb24gX0dldEludDRkKCRkYXRhLCAkcG9zKSB7DQoJCSR2YWx1ZSA9IG9yZCgkZGF0YVskcG9zXSkgfCAob3JkKCRkYXRhWyRwb3MrMV0pIDw8IDgpIHwgKG9yZCgkZGF0YVskcG9zKzJdKSA8PCAxNikgfCAob3JkKCRkYXRhWyRwb3MrM10pIDw8IDI0KTsNCgkJaWYgKCR2YWx1ZT49NDI5NDk2NzI5NCkgew0KCQkJJHZhbHVlPS0yOw0KCQl9DQoJCXJldHVybiAkdmFsdWU7DQoJfQ0KDQp9DQoNCj8+DQo=",
    "size": "59543"
}