{
    "namaFile": "lib\/phpqrcode\/qrsplit.php",
    "lastUpdate": "2017-04-26+08:28:04.19",
    "contentFile": "PD9waHANCi8qDQogKiBQSFAgUVIgQ29kZSBlbmNvZGVyDQogKg0KICogSW5wdXQgc3BsaXR0aW5nIGNsYXNzZXMNCiAqDQogKiBCYXNlZCBvbiBsaWJxcmVuY29kZSBDIGxpYnJhcnkgZGlzdHJpYnV0ZWQgdW5kZXIgTEdQTCAyLjENCiAqIENvcHlyaWdodCAoQykgMjAwNiwgMjAwNywgMjAwOCwgMjAwOSBLZW50YXJvIEZ1a3VjaGkgPGZ1a3VjaGlAbWVnYXVpLm5ldD4NCiAqDQogKiBQSFAgUVIgQ29kZSBpcyBkaXN0cmlidXRlZCB1bmRlciBMR1BMIDMNCiAqIENvcHlyaWdodCAoQykgMjAxMCBEb21pbmlrIER6aWVuaWEgPGRlbHRhbGFiIGF0IHBvY3p0YSBkb3QgZm0+DQogKg0KICogVGhlIGZvbGxvd2luZyBkYXRhIC8gc3BlY2lmaWNhdGlvbnMgYXJlIHRha2VuIGZyb20NCiAqICJUd28gZGltZW5zaW9uYWwgc3ltYm9sIC0tIFFSLWNvZGUgLS0gQmFzaWMgU3BlY2lmaWNhdGlvbiIgKEpJUyBYMDUxMDoyMDA0KQ0KICogIG9yDQogKiAiQXV0b21hdGljIGlkZW50aWZpY2F0aW9uIGFuZCBkYXRhIGNhcHR1cmUgdGVjaG5pcXVlcyAtLSANCiAqICBRUiBDb2RlIDIwMDUgYmFyIGNvZGUgc3ltYm9sb2d5IHNwZWNpZmljYXRpb24iIChJU08vSUVDIDE4MDA0OjIwMDYpDQogKg0KICogVGhpcyBsaWJyYXJ5IGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vcg0KICogbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYw0KICogTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyDQogKiB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yIGFueSBsYXRlciB2ZXJzaW9uLg0KICoNCiAqIFRoaXMgbGlicmFyeSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLA0KICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YNCiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZSBHTlUNCiAqIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuDQogKg0KICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYw0KICogTGljZW5zZSBhbG9uZyB3aXRoIHRoaXMgbGlicmFyeTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZQ0KICogRm91bmRhdGlvbiwgSW5jLiwgNTEgRnJhbmtsaW4gU3QsIEZpZnRoIEZsb29yLCBCb3N0b24sIE1BIDAyMTEwLTEzMDEgVVNBDQogKi8NCiAgICBjbGFzcyBRUnNwbGl0IHsNCg0KICAgICAgICBwdWJsaWMgJGRhdGFTdHIgPSAnJzsNCiAgICAgICAgcHVibGljICRpbnB1dDsNCiAgICAgICAgcHVibGljICRtb2RlSGludDsNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRkYXRhU3RyLCAkaW5wdXQsICRtb2RlSGludCkgDQogICAgICAgIHsNCiAgICAgICAgICAgICR0aGlzLT5kYXRhU3RyICA9ICRkYXRhU3RyOw0KICAgICAgICAgICAgJHRoaXMtPmlucHV0ICAgID0gJGlucHV0Ow0KICAgICAgICAgICAgJHRoaXMtPm1vZGVIaW50ID0gJG1vZGVIaW50Ow0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc2RpZ2l0YXQoJHN0ciwgJHBvcykNCiAgICAgICAgeyAgICANCiAgICAgICAgICAgIGlmICgkcG9zID49IHN0cmxlbigkc3RyKSkNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHJldHVybiAoKG9yZCgkc3RyWyRwb3NdKSA+PSBvcmQoJzAnKSkmJihvcmQoJHN0clskcG9zXSkgPD0gb3JkKCc5JykpKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNhbG51bWF0KCRzdHIsICRwb3MpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICgkcG9zID49IHN0cmxlbigkc3RyKSkNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICByZXR1cm4gKFFSaW5wdXQ6Omxvb2tBblRhYmxlKG9yZCgkc3RyWyRwb3NdKSkgPj0gMCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgcHVibGljIGZ1bmN0aW9uIGlkZW50aWZ5TW9kZSgkcG9zKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoJHBvcyA+PSBzdHJsZW4oJHRoaXMtPmRhdGFTdHIpKSANCiAgICAgICAgICAgICAgICByZXR1cm4gUVJfTU9ERV9OVUw7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAkYyA9ICR0aGlzLT5kYXRhU3RyWyRwb3NdOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZihzZWxmOjppc2RpZ2l0YXQoJHRoaXMtPmRhdGFTdHIsICRwb3MpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIFFSX01PREVfTlVNOw0KICAgICAgICAgICAgfSBlbHNlIGlmKHNlbGY6OmlzYWxudW1hdCgkdGhpcy0+ZGF0YVN0ciwgJHBvcykpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gUVJfTU9ERV9BTjsNCiAgICAgICAgICAgIH0gZWxzZSBpZigkdGhpcy0+bW9kZUhpbnQgPT0gUVJfTU9ERV9LQU5KSSkgew0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKCRwb3MrMSA8IHN0cmxlbigkdGhpcy0+ZGF0YVN0cikpIA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgJGQgPSAkdGhpcy0+ZGF0YVN0clskcG9zKzFdOw0KICAgICAgICAgICAgICAgICAgICAkd29yZCA9IChvcmQoJGMpIDw8IDgpIHwgb3JkKCRkKTsNCiAgICAgICAgICAgICAgICAgICAgaWYoKCR3b3JkID49IDB4ODE0MCAmJiAkd29yZCA8PSAweDlmZmMpIHx8ICgkd29yZCA+PSAweGUwNDAgJiYgJHdvcmQgPD0gMHhlYmJmKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFFSX01PREVfS0FOSkk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiBRUl9NT0RFXzg7DQogICAgICAgIH0gDQogICAgICAgIA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgcHVibGljIGZ1bmN0aW9uIGVhdE51bSgpDQogICAgICAgIHsNCiAgICAgICAgICAgICRsbiA9IFFSc3BlYzo6bGVuZ3RoSW5kaWNhdG9yKFFSX01PREVfTlVNLCAkdGhpcy0+aW5wdXQtPmdldFZlcnNpb24oKSk7DQoNCiAgICAgICAgICAgICRwID0gMDsNCiAgICAgICAgICAgIHdoaWxlKHNlbGY6OmlzZGlnaXRhdCgkdGhpcy0+ZGF0YVN0ciwgJHApKSB7DQogICAgICAgICAgICAgICAgJHArKzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgJHJ1biA9ICRwOw0KICAgICAgICAgICAgJG1vZGUgPSAkdGhpcy0+aWRlbnRpZnlNb2RlKCRwKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYoJG1vZGUgPT0gUVJfTU9ERV84KSB7DQogICAgICAgICAgICAgICAgJGRpZiA9IFFSaW5wdXQ6OmVzdGltYXRlQml0c01vZGVOdW0oJHJ1bikgKyA0ICsgJGxuDQogICAgICAgICAgICAgICAgICAgICArIFFSaW5wdXQ6OmVzdGltYXRlQml0c01vZGU4KDEpICAgICAgICAgLy8gKyA0ICsgbDgNCiAgICAgICAgICAgICAgICAgICAgIC0gUVJpbnB1dDo6ZXN0aW1hdGVCaXRzTW9kZTgoJHJ1biArIDEpOyAvLyAtIDQgLSBsOA0KICAgICAgICAgICAgICAgIGlmKCRkaWYgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAkdGhpcy0+ZWF0OCgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmKCRtb2RlID09IFFSX01PREVfQU4pIHsNCiAgICAgICAgICAgICAgICAkZGlmID0gUVJpbnB1dDo6ZXN0aW1hdGVCaXRzTW9kZU51bSgkcnVuKSArIDQgKyAkbG4NCiAgICAgICAgICAgICAgICAgICAgICsgUVJpbnB1dDo6ZXN0aW1hdGVCaXRzTW9kZUFuKDEpICAgICAgICAvLyArIDQgKyBsYQ0KICAgICAgICAgICAgICAgICAgICAgLSBRUmlucHV0Ojplc3RpbWF0ZUJpdHNNb2RlQW4oJHJ1biArIDEpOy8vIC0gNCAtIGxhDQogICAgICAgICAgICAgICAgaWYoJGRpZiA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5lYXRBbigpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgJHJldCA9ICR0aGlzLT5pbnB1dC0+YXBwZW5kKFFSX01PREVfTlVNLCAkcnVuLCBzdHJfc3BsaXQoJHRoaXMtPmRhdGFTdHIpKTsNCiAgICAgICAgICAgIGlmKCRyZXQgPCAwKQ0KICAgICAgICAgICAgICAgIHJldHVybiAtMTsNCg0KICAgICAgICAgICAgcmV0dXJuICRydW47DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBwdWJsaWMgZnVuY3Rpb24gZWF0QW4oKQ0KICAgICAgICB7DQogICAgICAgICAgICAkbGEgPSBRUnNwZWM6Omxlbmd0aEluZGljYXRvcihRUl9NT0RFX0FOLCAgJHRoaXMtPmlucHV0LT5nZXRWZXJzaW9uKCkpOw0KICAgICAgICAgICAgJGxuID0gUVJzcGVjOjpsZW5ndGhJbmRpY2F0b3IoUVJfTU9ERV9OVU0sICR0aGlzLT5pbnB1dC0+Z2V0VmVyc2lvbigpKTsNCg0KICAgICAgICAgICAgJHAgPSAwOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB3aGlsZShzZWxmOjppc2FsbnVtYXQoJHRoaXMtPmRhdGFTdHIsICRwKSkgew0KICAgICAgICAgICAgICAgIGlmKHNlbGY6OmlzZGlnaXRhdCgkdGhpcy0+ZGF0YVN0ciwgJHApKSB7DQogICAgICAgICAgICAgICAgICAgICRxID0gJHA7DQogICAgICAgICAgICAgICAgICAgIHdoaWxlKHNlbGY6OmlzZGlnaXRhdCgkdGhpcy0+ZGF0YVN0ciwgJHEpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAkcSsrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAkZGlmID0gUVJpbnB1dDo6ZXN0aW1hdGVCaXRzTW9kZUFuKCRwKSAvLyArIDQgKyBsYQ0KICAgICAgICAgICAgICAgICAgICAgICAgICsgUVJpbnB1dDo6ZXN0aW1hdGVCaXRzTW9kZU51bSgkcSAtICRwKSArIDQgKyAkbG4NCiAgICAgICAgICAgICAgICAgICAgICAgICAtIFFSaW5wdXQ6OmVzdGltYXRlQml0c01vZGVBbigkcSk7IC8vIC0gNCAtIGxhDQogICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmKCRkaWYgPCAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICRwID0gJHE7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAkcCsrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJHJ1biA9ICRwOw0KDQogICAgICAgICAgICBpZighc2VsZjo6aXNhbG51bWF0KCR0aGlzLT5kYXRhU3RyLCAkcCkpIHsNCiAgICAgICAgICAgICAgICAkZGlmID0gUVJpbnB1dDo6ZXN0aW1hdGVCaXRzTW9kZUFuKCRydW4pICsgNCArICRsYQ0KICAgICAgICAgICAgICAgICAgICAgKyBRUmlucHV0Ojplc3RpbWF0ZUJpdHNNb2RlOCgxKSAvLyArIDQgKyBsOA0KICAgICAgICAgICAgICAgICAgICAgIC0gUVJpbnB1dDo6ZXN0aW1hdGVCaXRzTW9kZTgoJHJ1biArIDEpOyAvLyAtIDQgLSBsOA0KICAgICAgICAgICAgICAgIGlmKCRkaWYgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAkdGhpcy0+ZWF0OCgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJHJldCA9ICR0aGlzLT5pbnB1dC0+YXBwZW5kKFFSX01PREVfQU4sICRydW4sIHN0cl9zcGxpdCgkdGhpcy0+ZGF0YVN0cikpOw0KICAgICAgICAgICAgaWYoJHJldCA8IDApDQogICAgICAgICAgICAgICAgcmV0dXJuIC0xOw0KDQogICAgICAgICAgICByZXR1cm4gJHJ1bjsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIHB1YmxpYyBmdW5jdGlvbiBlYXRLYW5qaSgpDQogICAgICAgIHsNCiAgICAgICAgICAgICRwID0gMDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgd2hpbGUoJHRoaXMtPmlkZW50aWZ5TW9kZSgkcCkgPT0gUVJfTU9ERV9LQU5KSSkgew0KICAgICAgICAgICAgICAgICRwICs9IDI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgICRyZXQgPSAkdGhpcy0+aW5wdXQtPmFwcGVuZChRUl9NT0RFX0tBTkpJLCAkcCwgc3RyX3NwbGl0KCR0aGlzLT5kYXRhU3RyKSk7DQogICAgICAgICAgICBpZigkcmV0IDwgMCkNCiAgICAgICAgICAgICAgICByZXR1cm4gLTE7DQoNCiAgICAgICAgICAgIHJldHVybiAkcnVuOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIHB1YmxpYyBmdW5jdGlvbiBlYXQ4KCkNCiAgICAgICAgew0KICAgICAgICAgICAgJGxhID0gUVJzcGVjOjpsZW5ndGhJbmRpY2F0b3IoUVJfTU9ERV9BTiwgJHRoaXMtPmlucHV0LT5nZXRWZXJzaW9uKCkpOw0KICAgICAgICAgICAgJGxuID0gUVJzcGVjOjpsZW5ndGhJbmRpY2F0b3IoUVJfTU9ERV9OVU0sICR0aGlzLT5pbnB1dC0+Z2V0VmVyc2lvbigpKTsNCg0KICAgICAgICAgICAgJHAgPSAxOw0KICAgICAgICAgICAgJGRhdGFTdHJMZW4gPSBzdHJsZW4oJHRoaXMtPmRhdGFTdHIpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB3aGlsZSgkcCA8ICRkYXRhU3RyTGVuKSB7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgJG1vZGUgPSAkdGhpcy0+aWRlbnRpZnlNb2RlKCRwKTsNCiAgICAgICAgICAgICAgICBpZigkbW9kZSA9PSBRUl9NT0RFX0tBTkpJKSB7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZigkbW9kZSA9PSBRUl9NT0RFX05VTSkgew0KICAgICAgICAgICAgICAgICAgICAkcSA9ICRwOw0KICAgICAgICAgICAgICAgICAgICB3aGlsZShzZWxmOjppc2RpZ2l0YXQoJHRoaXMtPmRhdGFTdHIsICRxKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgJHErKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAkZGlmID0gUVJpbnB1dDo6ZXN0aW1hdGVCaXRzTW9kZTgoJHApIC8vICsgNCArIGw4DQogICAgICAgICAgICAgICAgICAgICAgICAgKyBRUmlucHV0Ojplc3RpbWF0ZUJpdHNNb2RlTnVtKCRxIC0gJHApICsgNCArICRsbg0KICAgICAgICAgICAgICAgICAgICAgICAgIC0gUVJpbnB1dDo6ZXN0aW1hdGVCaXRzTW9kZTgoJHEpOyAvLyAtIDQgLSBsOA0KICAgICAgICAgICAgICAgICAgICBpZigkZGlmIDwgMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAkcCA9ICRxOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmKCRtb2RlID09IFFSX01PREVfQU4pIHsNCiAgICAgICAgICAgICAgICAgICAgJHEgPSAkcDsNCiAgICAgICAgICAgICAgICAgICAgd2hpbGUoc2VsZjo6aXNhbG51bWF0KCR0aGlzLT5kYXRhU3RyLCAkcSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICRxKys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgJGRpZiA9IFFSaW5wdXQ6OmVzdGltYXRlQml0c01vZGU4KCRwKSAgLy8gKyA0ICsgbDgNCiAgICAgICAgICAgICAgICAgICAgICAgICArIFFSaW5wdXQ6OmVzdGltYXRlQml0c01vZGVBbigkcSAtICRwKSArIDQgKyAkbGENCiAgICAgICAgICAgICAgICAgICAgICAgICAtIFFSaW5wdXQ6OmVzdGltYXRlQml0c01vZGU4KCRxKTsgLy8gLSA0IC0gbDgNCiAgICAgICAgICAgICAgICAgICAgaWYoJGRpZiA8IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgJHAgPSAkcTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICRwKys7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAkcnVuID0gJHA7DQogICAgICAgICAgICAkcmV0ID0gJHRoaXMtPmlucHV0LT5hcHBlbmQoUVJfTU9ERV84LCAkcnVuLCBzdHJfc3BsaXQoJHRoaXMtPmRhdGFTdHIpKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYoJHJldCA8IDApDQogICAgICAgICAgICAgICAgcmV0dXJuIC0xOw0KDQogICAgICAgICAgICByZXR1cm4gJHJ1bjsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBwdWJsaWMgZnVuY3Rpb24gc3BsaXRTdHJpbmcoKQ0KICAgICAgICB7DQogICAgICAgICAgICB3aGlsZSAoc3RybGVuKCR0aGlzLT5kYXRhU3RyKSA+IDApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYoJHRoaXMtPmRhdGFTdHIgPT0gJycpDQogICAgICAgICAgICAgICAgICAgIHJldHVybiAwOw0KDQogICAgICAgICAgICAgICAgJG1vZGUgPSAkdGhpcy0+aWRlbnRpZnlNb2RlKDApOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHN3aXRjaCAoJG1vZGUpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSBRUl9NT0RFX05VTTogJGxlbmd0aCA9ICR0aGlzLT5lYXROdW0oKTsgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgUVJfTU9ERV9BTjogICRsZW5ndGggPSAkdGhpcy0+ZWF0QW4oKTsgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgUVJfTU9ERV9LQU5KSToNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkaGludCA9PSBRUl9NT0RFX0tBTkpJKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbGVuZ3RoID0gJHRoaXMtPmVhdEthbmppKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlICAgICRsZW5ndGggPSAkdGhpcy0+ZWF0OCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICRsZW5ndGggPSAkdGhpcy0+ZWF0OCgpOyBicmVhazsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZigkbGVuZ3RoID09IDApIHJldHVybiAwOw0KICAgICAgICAgICAgICAgIGlmKCRsZW5ndGggPCAwKSAgcmV0dXJuIC0xOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICR0aGlzLT5kYXRhU3RyID0gc3Vic3RyKCR0aGlzLT5kYXRhU3RyLCAkbGVuZ3RoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBwdWJsaWMgZnVuY3Rpb24gdG9VcHBlcigpDQogICAgICAgIHsNCiAgICAgICAgICAgICRzdHJpbmdMZW4gPSBzdHJsZW4oJHRoaXMtPmRhdGFTdHIpOw0KICAgICAgICAgICAgJHAgPSAwOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB3aGlsZSAoJHA8JHN0cmluZ0xlbikgew0KICAgICAgICAgICAgICAgICRtb2RlID0gc2VsZjo6aWRlbnRpZnlNb2RlKHN1YnN0cigkdGhpcy0+ZGF0YVN0ciwgJHApLCAkdGhpcy0+bW9kZUhpbnQpOw0KICAgICAgICAgICAgICAgIGlmKCRtb2RlID09IFFSX01PREVfS0FOSkkpIHsNCiAgICAgICAgICAgICAgICAgICAgJHAgKz0gMjsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBpZiAob3JkKCR0aGlzLT5kYXRhU3RyWyRwXSkgPj0gb3JkKCdhJykgJiYgb3JkKCR0aGlzLT5kYXRhU3RyWyRwXSkgPD0gb3JkKCd6JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLT5kYXRhU3RyWyRwXSA9IGNocihvcmQoJHRoaXMtPmRhdGFTdHJbJHBdKSAtIDMyKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAkcCsrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5kYXRhU3RyOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gc3BsaXRTdHJpbmdUb1FSaW5wdXQoJHN0cmluZywgUVJpbnB1dCAkaW5wdXQsICRtb2RlSGludCwgJGNhc2VzZW5zaXRpdmUgPSB0cnVlKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZihpc19udWxsKCRzdHJpbmcpIHx8ICRzdHJpbmcgPT0gJ1wwJyB8fCAkc3RyaW5nID09ICcnKSB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignZW1wdHkgc3RyaW5nISEhJyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICRzcGxpdCA9IG5ldyBRUnNwbGl0KCRzdHJpbmcsICRpbnB1dCwgJG1vZGVIaW50KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYoISRjYXNlc2Vuc2l0aXZlKQ0KICAgICAgICAgICAgICAgICRzcGxpdC0+dG9VcHBlcigpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuICRzcGxpdC0+c3BsaXRTdHJpbmcoKTsNCiAgICAgICAgfQ0KICAgIH0=",
    "size": "11381"
}