{
    "namaFile": "js\/perencanaanKeuangan\/rka\/rkaSKPD221.js",
    "lastUpdate": "2018-08-23+11:13:21.96",
    "contentFile": "dmFyIHJrYVNLUEQyMjFGaWx0ZXJTS1BEID0gbmV3IFNrcGRDbHMoewogIHByZWZpeDogInJrYVNLUEQyMjEiLAogIGZvcm1OYW1lOiAicmthU0tQRDIyMUZvcm0iLAoKICBwaWxpaFVydXNhbmZ0ZXI6IGZ1bmN0aW9uKCkgewogICAgLy8gcmthU0tQRDIyMS5yZWZyZXNoTGlzdCh0cnVlKTsKICAgIHJrYVNLUEQyMjEuZmlsdGVyUmVuZGVyKCk7CiAgfSwKICBwaWxpaEJpZGFuZ0FmdGVyOiBmdW5jdGlvbigpIHsKICAgIC8vIHJrYVNLUEQyMjEucmVmcmVzaExpc3QodHJ1ZSk7CiAgICBya2FTS1BEMjIxLmZpbHRlclJlbmRlcigpOwogIH0sCiAgcGlsaWhVbml0QWZ0ZXI6IGZ1bmN0aW9uKCkgewogICAgLy8gcmthU0tQRDIyMS5yZWZyZXNoTGlzdCh0cnVlKTsKICAgIHJrYVNLUEQyMjEuZmlsdGVyUmVuZGVyKCk7CiAgfSwKICBwaWxpaFN1YlVuaXRBZnRlcjogZnVuY3Rpb24oKSB7CiAgICAvLyBya2FTS1BEMjIxLnJlZnJlc2hMaXN0KHRydWUpOwogICAgcmthU0tQRDIyMS5maWx0ZXJSZW5kZXIoKTsKICB9LAogIHBpbGloU2Vrc2lBZnRlcjogZnVuY3Rpb24oKSB7CiAgICAvLyBya2FTS1BEMjIxLnJlZnJlc2hMaXN0KHRydWUpOwogICAgcmthU0tQRDIyMS5maWx0ZXJSZW5kZXIoKTsKICB9LAogIHByb2dyYW1DaGFuZ2VkOiBmdW5jdGlvbigpIHsKICAgIC8vIHJrYVNLUEQyMjEucmVmcmVzaExpc3QodHJ1ZSk7CiAgICBya2FTS1BEMjIxLmZpbHRlclJlbmRlcigpOwogIH0sCiAgLy8gamVuaXNCZWxhbmphQ2hhbmdlZDogZnVuY3Rpb24oKSB7CiAgLy8gICAvLyBya2FTS1BEMjIxLnJlZnJlc2hMaXN0KHRydWUpOwogIC8vICAgcmthU0tQRDIyMS5maWx0ZXJSZW5kZXIoKTsKICAvLyB9Cn0pOwp2YXIgcmthU0tQRDIyMSA9IG5ldyBEYWZ0YXJPYmoyKHsKICBwcmVmaXg6ICJya2FTS1BEMjIxIiwKICB1cmw6ICJwZ0tldS5waHA\/UGc9cmthU0tQRDIyMSIsCiAgZm9ybU5hbWU6ICJya2FTS1BEMjIxRm9ybSIsCiAgcmthU0tQRDIyMV9mb3JtOiAiMCIsIC8vZGVmYXVsdCBqcyBya2FTS1BEMjIxCiAgbG9hZGluZzogZnVuY3Rpb24oKSB7CiAgICAvL2FsZXJ0KCdsb2FkaW5nJyk7CiAgICB0aGlzLnRvcEJhclJlbmRlcigpOwogICAgdGhpcy5maWx0ZXJSZW5kZXIoKTsKICAgIHRoaXMuZGFmdGFyUmVuZGVyKCk7CiAgICB0aGlzLnN1bUhhbFJlbmRlcigpOwogIH0sCiAgdG9wQmFyUmVuZGVyOiBmdW5jdGlvbigpewogICAgdmFyIG1lPXRoaXM7CiAgICAvL3JlbmRlciBzdWJ0aXRsZQogICAgJC5hamF4KHsKICAgICAgdXJsOiB0aGlzLnVybCsnJnRpcGU9c3VidGl0bGUnLAogICAgICB0eXBlOidQT1NUJywKICAgICAgZGF0YTokKCcjJyt0aGlzLmZvcm1OYW1lKS5zZXJpYWxpemUoKSwKICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICB2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1lLnByZWZpeCsnX2NvbnRfdGl0bGUnKS5pbm5lckhUTUwgPSByZXNwLmNvbnRlbnQ7CiAgICAgIG1lLnRvcEJhclJlbmRlckFmdGVyKCkKICAgICAgfQogICAgfSk7CiAgfSwKICBmaWx0ZXJSZW5kZXJBZnRlcjogZnVuY3Rpb24oKSB7CiAgICBpZigkKCIjZmlsdGVyQmVsYW5qYSIpLnZhbCgpICE9ICcnKXsKICAgICAgdGhpcy5maWx0ZXJUb3RhbEJlbGFuamEoKTsKICAgIH1lbHNlewogICAgICAkKCIjc3BhblRvdGFsQmVsYW5qYSIpLnRleHQoIiIpOwogICAgfQogIH0sCiAgZGV0YWlsOiBmdW5jdGlvbigpIHsKICAgIHZhciBtZSA9IHRoaXM7CiAgICBlcnJtc2cgPSB0aGlzLkNla0NoZWNrYm94KCk7CiAgICBpZiAoZXJybXNnID09ICIiKSB7CiAgICAgIHZhciBib3ggPSB0aGlzLkdldENieENoZWNrZWQoKTsKICAgIH0gZWxzZSB7CiAgICAgIGFsZXJ0KGVycm1zZyk7CiAgICB9CiAgfSwKICBmaWx0ZXJUb3RhbEJlbGFuamE6IGZ1bmN0aW9uKCl7CiAgICAkLmFqYXgoewogICAgICB1cmw6IHRoaXMudXJsICsgIiZ0aXBlPWZpbHRlclRvdGFsQmVsYW5qYSIsCiAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgZGF0YTogJCgiIyIgKyB0aGlzLmZvcm1OYW1lKS5zZXJpYWxpemUoKSwKICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICAgIHZhciByZXNwID0gZXZhbCgiKCIgKyBkYXRhICsgIikiKTsKICAgICAgICAkKCIjc3BhblRvdGFsQmVsYW5qYSIpLnRleHQocmVzcC5jb250ZW50LnRvdGFsQmVsYW5qYSk7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgZGFmdGFyUmVuZGVyOiBmdW5jdGlvbigpIHsKICAgIHZhciBtZSA9IHRoaXM7IC8vcmVuZGVyIGRhZnRhcgogICAgYWRkQ292ZXJQYWdlMigiZGFmdGFyX2NvdmVyIiwgMSwgdHJ1ZSwgdHJ1ZSwgewogICAgICByZW5kZXJUbzogdGhpcy5wcmVmaXggKyAiX2NvbnRfZGFmdGFyIiwKICAgICAgaW1nc3JjOiAiaW1hZ2VzL3dhaXQuZ2lmIiwKICAgICAgc3R5bGU6IHsgcG9zaXRpb246ICJhYnNvbHV0ZSIsIHRvcDogIjUiLCBsZWZ0OiAiNSIgfQogICAgfSk7CgogICAgJC5hamF4KHsKICAgICAgdXJsOiB0aGlzLnVybCArICImdGlwZT1kYWZ0YXIiLAogICAgICB0eXBlOiAiUE9TVCIsCiAgICAgIGRhdGE6ICQoIiMiICsgdGhpcy5mb3JtTmFtZSkuc2VyaWFsaXplKCksCiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICB2YXIgcmVzcCA9IGV2YWwoIigiICsgZGF0YSArICIpIik7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobWUucHJlZml4ICsgIl9jb250X2RhZnRhciIpLmlubmVySFRNTCA9CiAgICAgICAgICByZXNwLmNvbnRlbnQ7CiAgICAgICAgbWUuc3VtSGFsUmVuZGVyKCk7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgQmFydTogZnVuY3Rpb24oKXsKICAgIHZhciBtZSA9IHRoaXM7CgogIAkJZXJybXNnID0gJyc7CgogIAkJaWYoJCgiI2ZpbHRlclVydXNhbiIpLnZhbCgpID09ICcwMCcpewogIAkJCWVycm1zZyA9ICJQaWxpaCBVcnVzYW4iOwogIAkJfWVsc2UgaWYoJCgiI2ZpbHRlclNLUEQiKS52YWwoKSA9PSAnMDAnKXsKICAJCQllcnJtc2cgPSAiUGlsaWggQmlkYW5nIjsKICAJCX1lbHNlIGlmKCQoIiNmaWx0ZXJTS1BEIikudmFsKCkgPT0gJzAwJyl7CiAgCQkJZXJybXNnID0gIlBpbGloIFNLUEQiOwogIAkJfWVsc2UgaWYoJCgiI2ZpbHRlckNvbmNhdFByb2dyYW0iKS52YWwoKSA9PSAnJyl7CiAgCQkJZXJybXNnID0gIlBpbGloIFByb2dyYW0iOwogIAkJfWVsc2UgaWYoJCgiI2ZpbHRlclEiKS52YWwoKSA9PSAnJyl7CiAgCQkJZXJybXNnID0gIlBpbGloIEtlZ2lhdGFuIjsKICAJCX0KICAJCWlmKGVycm1zZyA9PScnKXsKICAJCQl2YXIgbWUgPSB0aGlzOwogIAkJCXZhciBhRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZm9ybU5hbWUpOwogIAkJCSQuYWpheCh7CiAgCQkJICB1cmw6IHRoaXMudXJsKycmdGlwZT1CYXJ1JywKICAJCQkgIHR5cGUgOiAnUE9TVCcsCiAgCQkJICBkYXRhOiQoJyMnK3RoaXMuZm9ybU5hbWUpLnNlcmlhbGl6ZSgpLAogIAkJCSAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogIAkJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOwogIAkJCQkJaWYocmVzcC5lcnIgPT0gIiIpIHsKICAgICAgICAgICAgICAkKCIjbmV3QmxhbmtQYWdlIikudmFsKCIiKTsKICAJCQkJCQlhRm9ybS5hY3Rpb249ICdwZ0tldS5waHA\/UGc9cmthU0tQRDIyMUlucyc7CiAgCQkJCQkJYUZvcm0udGFyZ2V0PSdfYmxhbmsnOwogIAkJCQkJCWFGb3JtLnN1Ym1pdCgpOwogIAkJCQkJCWFGb3JtLnRhcmdldD0nJzsKICAJCQkJCX1lbHNlewogIAkJCQkJCWFsZXJ0KHJlc3AuZXJyKTsKICAJCQkJCX0KICAJCQkgIH0KICAJCQl9KTsKICAJCX1lbHNlewogIAkJCQlhbGVydChlcnJtc2cpOwogIAkJfQoJfSwKICBuZXdCbGFua1BhZ2U6IGZ1bmN0aW9uKCl7CiAgICB2YXIgbWUgPSB0aGlzOwoKICAJCWVycm1zZyA9ICcnOwoKICAJCWlmKCQoIiNmaWx0ZXJVcnVzYW4iKS52YWwoKSA9PSAnMDAnKXsKICAJCQllcnJtc2cgPSAiUGlsaWggVXJ1c2FuIjsKICAJCX1lbHNlIGlmKCQoIiNmaWx0ZXJTS1BEIikudmFsKCkgPT0gJzAwJyl7CiAgCQkJZXJybXNnID0gIlBpbGloIEJpZGFuZyI7CiAgCQl9ZWxzZSBpZigkKCIjZmlsdGVyU0tQRCIpLnZhbCgpID09ICcwMCcpewogIAkJCWVycm1zZyA9ICJQaWxpaCBTS1BEIjsKICAJCX1lbHNlIGlmKCQoIiNmaWx0ZXJDb25jYXRQcm9ncmFtIikudmFsKCkgPT0gJycpewogIAkJCWVycm1zZyA9ICJQaWxpaCBQcm9ncmFtIjsKICAJCX1lbHNlIGlmKCQoIiNmaWx0ZXJRIikudmFsKCkgPT0gJycpewogIAkJCWVycm1zZyA9ICJQaWxpaCBLZWdpYXRhbiI7CiAgCQl9CiAgCQlpZihlcnJtc2cgPT0nJyl7CiAgCQkJdmFyIG1lID0gdGhpczsKICAJCQl2YXIgYUZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmZvcm1OYW1lKTsKICAJCQkkLmFqYXgoewogIAkJCSAgdXJsOiB0aGlzLnVybCsnJnRpcGU9bmV3QmxhbmtQYWdlJywKICAJCQkgIHR5cGUgOiAnUE9TVCcsCiAgCQkJICBkYXRhOiQoJyMnK3RoaXMuZm9ybU5hbWUpLnNlcmlhbGl6ZSgpLAogIAkJCSAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogIAkJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOwogIAkJCQkJaWYocmVzcC5lcnIgPT0gIiIpIHsKICAgICAgICAgICAgICAkKCIjbmV3QmxhbmtQYWdlIikudmFsKCIxIik7CiAgCQkJCQkJYUZvcm0uYWN0aW9uPSAncGdLZXUucGhwP1BnPXJrYVNLUEQyMjFJbnMnOwogIAkJCQkJCWFGb3JtLnRhcmdldD0nX2JsYW5rJzsKICAJCQkJCQlhRm9ybS5zdWJtaXQoKTsKICAJCQkJCQlhRm9ybS50YXJnZXQ9Jyc7CiAgCQkJCQl9ZWxzZXsKICAJCQkJCQlhbGVydChyZXNwLmVycik7CiAgCQkJCQl9CiAgCQkJICB9CiAgCQkJfSk7CiAgCQl9ZWxzZXsKICAJCQkJYWxlcnQoZXJybXNnKTsKICAJCX0KCX0sCiAgSW5mbzogZnVuY3Rpb24oKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgdmFyIGNvdmVyID0gdGhpcy5wcmVmaXggKyAiX2Zvcm1jb3ZlciI7CiAgICAkLmFqYXgoewogICAgICB0eXBlOiAiUE9TVCIsCiAgICAgIHVybDogdGhpcy51cmwgKyAiJnRpcGU9SW5mbyIsCiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICB2YXIgcmVzcCA9IGV2YWwoIigiICsgZGF0YSArICIpIik7CiAgICAgICAgaWYgKHJlc3AuZXJyID09ICIiKSB7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gImhpZGRlbiI7CiAgICAgICAgICBhZGRDb3ZlclBhZ2UyKGNvdmVyLCA5OTksIHRydWUsIGZhbHNlKTsKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvdmVyKS5pbm5lckhUTUwgPSByZXNwLmNvbnRlbnQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KHJlc3AuZXJyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgY2hlY2tQYWd1SW5kaWthdGlmOiBmdW5jdGlvbigpIHsKICAgIHZhciBtZSA9IHRoaXM7CiAgICB2YXIgZXJyID0gIiI7CiAgICBpZigkKCIjZmlsdGVyVXJ1c2FuIikudmFsKCkgPT0gJzAwJyl7CiAgICAgIGVyciA9ICJQaWxpaCBVcnVzYW4iOwogICAgfWVsc2UgaWYoJCgiI2ZpbHRlckJpZGFuZyIpLnZhbCgpID09ICcwMCcpewogICAgICBlcnIgPSAiUGlsaWggQmlkYW5nIjsKICAgIH1lbHNlIGlmKCQoIiNmaWx0ZXJTS1BEIikudmFsKCkgPT0gJzAwJyl7CiAgICAgIGVyciA9ICJQaWxpaCBTS1BEIjsKICAgIH1lbHNlIGlmKCQoIiNmaWx0ZXJDb25jYXRQcm9ncmFtIikudmFsKCkgPT0gJycpewogICAgICBlcnIgPSAiUGlsaWggUHJvZ3JhbSI7CiAgICB9ZWxzZSBpZigkKCIjZmlsdGVyUSIpLnZhbCgpID09ICcnKXsKICAgICAgZXJyID0gIlBpbGloIEtlZ2lhdGFuIjsKICAgIH0KICAgIGlmKGVyciA9PSAiIil7CiAgICAgIHZhciBjb3ZlciA9IHRoaXMucHJlZml4ICsgIl9mb3JtY292ZXIiOwogICAgICBhZGRDb3ZlclBhZ2UyKGNvdmVyLCA5OTksIHRydWUsIGZhbHNlKTsKICAgICAgJC5hamF4KHsKICAgICAgICB0eXBlOiAiUE9TVCIsCiAgICAgICAgZGF0YTokKCcjJyt0aGlzLmZvcm1OYW1lKS5zZXJpYWxpemUoKSwKICAgICAgICB1cmw6IHRoaXMudXJsICsgIiZ0aXBlPWNoZWNrUGFndUluZGlrYXRpZiIsCiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgZGVsRWxlbShjb3Zlcik7CiAgICAgICAgICB2YXIgcmVzcCA9IGV2YWwoIigiICsgZGF0YSArICIpIik7CiAgICAgICAgICBpZiAocmVzcC5lcnIgPT0gIiIpIHsKICAgICAgICAgICAgJCgiI2ZpbHRlclBhZ3VJbmRpa2F0aWYiKS52YWwocmVzcC5jb250ZW50LmZpbHRlclBhZ3VJbmRpa2F0aWYpOwogICAgICAgICAgICAkKCIjZmlsdGVyU2lzYVBhZ3VJbmRpa2F0aWYiKS52YWwocmVzcC5jb250ZW50LmZpbHRlclNpc2FQYWd1SW5kaWthdGlmKTsKICAgICAgICAgICAgJCgiI2ZpbHRlclRvdGFsQmVsYW5qYSIpLnZhbChyZXNwLmNvbnRlbnQuZmlsdGVyVG90YWxCZWxhbmphKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsZXJ0KHJlc3AuZXJyKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfWVsc2V7CiAgICAgIGFsZXJ0KGVycik7CiAgICB9CiAgfSwKCiAgQ2FyaTogZnVuY3Rpb24oKSB7CiAgICBwb3B1cEJhcmFuZy5rb2RlQmFyYW5nID0gImtvZGVCYXJhbmciOwogICAgcG9wdXBCYXJhbmcubmFtYUJhcmFuZyA9ICJuYW1hQmFyYW5nIjsKICAgIHBvcHVwQmFyYW5nLnNhdHVhbkJhcmFuZyA9ICJzYXR1YW4iOwogICAgcG9wdXBCYXJhbmcud2luZG93U2hvdygpOwogIH0sCiAgRWRpdDogZnVuY3Rpb24oKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgZXJybXNnID0gdGhpcy5DZWtDaGVja2JveCgpOwogICAgaWYgKGVycm1zZyA9PSAiIikgewogICAgICB2YXIgYm94ID0gdGhpcy5HZXRDYnhDaGVja2VkKCk7CiAgICAgIHZhciBhRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZm9ybU5hbWUpOwogICAgICAkLmFqYXgoewogICAgICAgIHVybDogdGhpcy51cmwgKyAiJnRpcGU9ZWRpdFRhYiIsCiAgICAgICAgdHlwZTogIlBPU1QiLAogICAgICAgIGRhdGE6ICQoIiMiICsgdGhpcy5mb3JtTmFtZSkuc2VyaWFsaXplKCksCiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgdmFyIHJlc3AgPSBldmFsKCIoIiArIGRhdGEgKyAiKSIpOwogICAgICAgICAgaWYgKHJlc3AuZXJyID09ICIiKSB7CiAgICAgICAgICAgIHZhciBJRHJlbmphID0gTnVtYmVyKHJlc3AuY29udGVudC5pZHJlbmphKTsKICAgICAgICAgICAgYUZvcm0uYWN0aW9uID0KICAgICAgICAgICAgICAicGdLZXUucGhwP1BnPXJrYm1kXyIgKwogICAgICAgICAgICAgIHJlc3AuY29udGVudC5rZW1hbmEgKwogICAgICAgICAgICAgICImWU49MSZpZD0iICsKICAgICAgICAgICAgICBJRHJlbmphOwogICAgICAgICAgICBhRm9ybS50YXJnZXQgPSAiX2JsYW5rIjsKICAgICAgICAgICAgYUZvcm0uc3VibWl0KCk7CiAgICAgICAgICAgIGFGb3JtLnRhcmdldCA9ICIiOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWxlcnQocmVzcC5lcnIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBhbGVydChlcnJtc2cpOwogICAgfQogIH0sCiAgcmVtb3ZlOiBmdW5jdGlvbigpIHsKICAgIHZhciBtZSA9IHRoaXM7CiAgICBlcnJtc2cgPSB0aGlzLkNla0NoZWNrYm94KCk7CiAgICBpZiAoZXJybXNnID09ICIiKSB7CiAgICAgIHZhciBib3ggPSB0aGlzLkdldENieENoZWNrZWQoKTsKCiAgICAgICQuYWpheCh7CiAgICAgICAgdXJsOiB0aGlzLnVybCArICImdGlwZT1yZW1vdmUiLAogICAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgICBkYXRhOiAkKCIjIiArIHRoaXMuZm9ybU5hbWUpLnNlcmlhbGl6ZSgpLAogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgIHZhciByZXNwID0gZXZhbCgiKCIgKyBkYXRhICsgIikiKTsKICAgICAgICAgIHJrYVNLUEQyMjEucmVmcmVzaExpc3QodHJ1ZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGFsZXJ0KGVycm1zZyk7CiAgICB9CiAgfSwKICBWYWxpZGFzaTogZnVuY3Rpb24oaWRfYW5nZ2FyYW4pIHsKICAgIHZhciBtZSA9IHRoaXM7CiAgICB2YXIgY292ZXIgPSB0aGlzLnByZWZpeCArICJfZm9ybWNvdmVyIjsKICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAiaGlkZGVuIjsKICAgIGlmIChtZS5zYXR1YW5fZm9ybSA9PSAwKSB7CiAgICAgIC8vYmFydSBkYXJpIHNhdHVhbgogICAgICBhZGRDb3ZlclBhZ2UyKGNvdmVyLCAxLCB0cnVlLCBmYWxzZSk7CiAgICB9IGVsc2UgewogICAgICAvL2JhcnUgZGFyaSBiYXJhbmcKICAgICAgYWRkQ292ZXJQYWdlMihjb3ZlciwgOTk5LCB0cnVlLCBmYWxzZSk7CiAgICB9CiAgICAkLmFqYXgoewogICAgICB0eXBlOiAiUE9TVCIsCiAgICAgIGRhdGE6ICQoIiMiICsgdGhpcy5mb3JtTmFtZSkuc2VyaWFsaXplKCksCiAgICAgIHVybDogdGhpcy51cmwgKyAiJnRpcGU9VmFsaWRhc2kmaWRfYW5nZ2FyYW49IiArIGlkX2FuZ2dhcmFuLAogICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgdmFyIHJlc3AgPSBldmFsKCIoIiArIGRhdGEgKyAiKSIpOwogICAgICAgIGlmIChyZXNwLmVyciA9PSAiIikgewogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY292ZXIpLmlubmVySFRNTCA9IHJlc3AuY29udGVudDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGVsRWxlbShjb3Zlcik7CiAgICAgICAgICBhbGVydChyZXNwLmVycik7CiAgICAgICAgICBpZiAocmVzcC5lcnIgPT0gIlRhaGFwIFBlbnl1c3VuYW4gVGVsYWggSGFiaXMiKSB7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCgogIG5ld05vbW9yUGVuZXRhcGFuOiBmdW5jdGlvbigpIHsKICAgIHZhciBtZSA9IHRoaXM7CiAgICB2YXIgY292ZXIgPSB0aGlzLnByZWZpeCArICJfZm9ybWNvdmVyS0IiOwogICAgJC5hamF4KHsKICAgICAgdHlwZTogIlBPU1QiLAogICAgICB1cmw6IHRoaXMudXJsICsgIiZ0aXBlPW5ld05vbW9yUGVuZXRhcGFuIiwKICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICAgIHZhciByZXNwID0gZXZhbCgiKCIgKyBkYXRhICsgIikiKTsKICAgICAgICBpZiAocmVzcC5lcnIgPT0gIiIpIHsKICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAiaGlkZGVuIjsKICAgICAgICAgIGFkZENvdmVyUGFnZTIoY292ZXIsIDUsIHRydWUsIGZhbHNlKTsKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvdmVyKS5pbm5lckhUTUwgPSByZXNwLmNvbnRlbnQ7CiAgICAgICAgICAkKCIjbmV3VGFuZ2dhbFBlbmV0YXBhbiIpLmRhdGVwaWNrZXIoewogICAgICAgICAgICBkYXRlRm9ybWF0OiAiZGQtbW0teXkiLAogICAgICAgICAgICBzaG93QW5pbTogInNsaWRlRG93biIsCiAgICAgICAgICAgIGlubGluZTogdHJ1ZSwKICAgICAgICAgICAgc2hvd09uOiAiYnV0dG9uIiwKICAgICAgICAgICAgYnV0dG9uSW1hZ2U6ICJpbWFnZXMvY2FsZW5kYXIuZ2lmIiwKICAgICAgICAgICAgYnV0dG9uSW1hZ2VPbmx5OiB0cnVlLAogICAgICAgICAgICBjaGFuZ2VNb250aDogdHJ1ZSwKICAgICAgICAgICAgY2hhbmdlWWVhcjogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KHJlc3AuZXJyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgQ2xvc2UyOiBmdW5jdGlvbigpIHsKICAgIHZhciBjb3ZlciA9IHRoaXMucHJlZml4ICsgIl9mb3JtY292ZXJLQiI7CiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY292ZXIpKSBkZWxFbGVtKGNvdmVyKTsKICAgIGlmICh0aXBlID09IG51bGwpIHsKICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICJhdXRvIjsKICAgIH0KICB9LAoKICBzYXZlVGV0YXBrYW5SS0JNRDogZnVuY3Rpb24oKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgdGhpcy5PbkVycm9yQ2xvc2UgPSBmYWxzZTsKICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAiaGlkZGVuIjsKICAgIHZhciBjb3ZlciA9IHRoaXMucHJlZml4ICsgIl9mb3Jtc2ltcGFuIjsKICAgIGFkZENvdmVyUGFnZTIoY292ZXIsIDEsIHRydWUsIGZhbHNlKTsKCiAgICAkLmFqYXgoewogICAgICB0eXBlOiAiUE9TVCIsCiAgICAgIHVybDogdGhpcy51cmwgKyAiJnRpcGU9c2F2ZVRldGFwa2FuUktCTUQiLAogICAgICBkYXRhOiB7CiAgICAgICAgbm9tb3I6ICQoIiNub21vclBlbmV0YXBhbiIpLnZhbCgpLAogICAgICAgIGMxOiAkKCIjYzEiKS52YWwoKSwKICAgICAgICBjOiAkKCIjYyIpLnZhbCgpLAogICAgICAgIGQ6ICQoIiNkIikudmFsKCksCiAgICAgICAgbm9tb3JQZW5ldGFwYW46ICQoIiNub21vclBlbmV0YXBhbiIpLnZhbCgpLAogICAgICAgIHRhbmdnYWxQZW5ldGFwYW46ICQoIiN0YW5nZ2FsUGVuZXRhcGFuIikudmFsKCksCiAgICAgICAgbmFtYVBlamFiYXQ6ICQoIiNuYW1hUGVqYWJhdCIpLnZhbCgpLAogICAgICAgIG5pcDogJCgiI25pcCIpLnZhbCgpLAogICAgICAgIGphYmF0YW46ICQoIiNqYWJhdGFuIikudmFsKCksCiAgICAgICAgc3RhdHVzUGVuZ2FkYWFuOiAkKCIjY2hlY2tCb3hQZW5nYWRhYW4iKS5pcygiOmNoZWNrZWQiKSwKICAgICAgICBzdGF0dXNQZW1lbGloYXJhYW46ICQoIiNjaGVja2JveFBlbWVsaWhhcmFhbiIpLmlzKCI6Y2hlY2tlZCIpLAogICAgICAgIHN0YXR1c1BlcnNlZGlhYW46ICQoIiNjaGVja2JveFBlcnNlZGlhYW4iKS5pcygiOmNoZWNrZWQiKQogICAgICB9LAogICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgdmFyIHJlc3AgPSBldmFsKCIoIiArIGRhdGEgKyAiKSIpOwogICAgICAgIGRlbEVsZW0oY292ZXIpOwogICAgICAgIGlmIChyZXNwLmVyciAhPSAiIikgewogICAgICAgICAgYWxlcnQocmVzcC5lcnIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydCgiUGVuZXRhcGFuIEJlcmhhc2lsIik7CiAgICAgICAgICBtZS5DbG9zZSgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICBzYXZlTm9tb3JQZW5ldGFwYW46IGZ1bmN0aW9uKCkgewogICAgdmFyIG1lID0gdGhpczsKICAgIHRoaXMuT25FcnJvckNsb3NlID0gZmFsc2U7CiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gImhpZGRlbiI7CiAgICB2YXIgY292ZXIgPSB0aGlzLnByZWZpeCArICJfZm9ybWNvdmVyS0IiOwogICAgYWRkQ292ZXJQYWdlMihjb3ZlciwgMSwgdHJ1ZSwgZmFsc2UpOwoKICAgICQuYWpheCh7CiAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgdXJsOiB0aGlzLnVybCArICImdGlwZT1zYXZlTm9tb3JQZW5ldGFwYW4iLAogICAgICBkYXRhOiB7CiAgICAgICAgbm9tb3I6ICQoIiNuZXdOb21vclBlbmV0YXBhbiIpLnZhbCgpLAogICAgICAgIHRhbmdnYWxQZW5ldGFwYW46ICQoIiNuZXdUYW5nZ2FsUGVuZXRhcGFuIikudmFsKCksCiAgICAgICAgbmFtYVBlamFiYXQ6ICQoIiNuZXdOYW1hUGVqYWJhdCIpLnZhbCgpLAogICAgICAgIG5pcDogJCgiI25ld05JUCIpLnZhbCgpLAogICAgICAgIGphYmF0YW46ICQoIiNuZXdKYWJhdGFuIikudmFsKCkKICAgICAgfSwKICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICAgIHZhciByZXNwID0gZXZhbCgiKCIgKyBkYXRhICsgIikiKTsKICAgICAgICBkZWxFbGVtKGNvdmVyKTsKICAgICAgICBpZiAocmVzcC5lcnIgIT0gIiIpIHsKICAgICAgICAgIGFsZXJ0KHJlc3AuZXJyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQoIkRhdGEgVGVyc2ltcGFuIik7CiAgICAgICAgICAkKCIjbm9tb3JQZW5ldGFwYW4iKS5odG1sKHJlc3AuY29udGVudC5jb21ib05vbW9yUGVuZXRhcGFuKTsKICAgICAgICAgIG1lLkNsb3NlMigpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKCiAgZm9ybWF0Q3VycmVuY3k6IGZ1bmN0aW9uKG51bSkgewogICAgbnVtID0gbnVtLnRvU3RyaW5nKCkucmVwbGFjZSgvXCR8XCwvZywgIiIpOwogICAgaWYgKGlzTmFOKG51bSkpIG51bSA9ICIwIjsKICAgIHNpZ24gPSBudW0gPT0gKG51bSA9IE1hdGguYWJzKG51bSkpOwogICAgbnVtID0gTWF0aC5mbG9vcihudW0gKiAxMDAgKyAwLjUwMDAwMDAwMDAxKTsKICAgIGNlbnRzID0gbnVtICUgMTAwOwogICAgbnVtID0gTWF0aC5mbG9vcihudW0gLyAxMDApLnRvU3RyaW5nKCk7CiAgICBpZiAoY2VudHMgPCAxMCkgY2VudHMgPSAiMCIgKyBjZW50czsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTWF0aC5mbG9vcigobnVtLmxlbmd0aCAtICgxICsgaSkpIC8gMyk7IGkrKykKICAgICAgbnVtID0KICAgICAgICBudW0uc3Vic3RyaW5nKDAsIG51bS5sZW5ndGggLSAoNCAqIGkgKyAzKSkgKwogICAgICAgICIuIiArCiAgICAgICAgbnVtLnN1YnN0cmluZyhudW0ubGVuZ3RoIC0gKDQgKiBpICsgMykpOwogICAgcmV0dXJuIChzaWduID8gIiIgOiAiLSIpICsgIiIgKyBudW07CiAgfSwKICBiYW50dTogZnVuY3Rpb24oaWQpIHsKICAgIHZhciBpZEFuZ2thID0gaWQucmVwbGFjZSgiSiIsICJqIik7CiAgICB2YXIgYW5na2EgPSAkKCIjIiArIGlkQW5na2EpLnZhbCgpOwogICAgJCgiI2JhbnR1IiArIGlkKS50ZXh0KHJrYVNLUEQyMjEuZm9ybWF0Q3VycmVuY3koYW5na2EpKTsKICB9LAogIExhcG9yYW46IGZ1bmN0aW9uKCkgewogICAgdmFyIG1lID0gdGhpczsKICAgIHZhciBlcnIgPSAiIjsKICAgIHZhciBjb3ZlciA9IHRoaXMucHJlZml4ICsgIl9mb3JtY292ZXIiOwogICAgaWYgKGVyciA9PSAiIikgewogICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gImhpZGRlbiI7CiAgICAgIGFkZENvdmVyUGFnZTIoY292ZXIsIDIsIHRydWUsIGZhbHNlKTsKICAgICAgJC5hamF4KHsKICAgICAgICB0eXBlOiAiUE9TVCIsCiAgICAgICAgZGF0YTogJCgiIyIgKyB0aGlzLmZvcm1OYW1lKS5zZXJpYWxpemUoKSwKICAgICAgICB1cmw6IHRoaXMudXJsICsgIiZ0aXBlPUxhcG9yYW4iLAogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgIHZhciByZXNwID0gZXZhbCgiKCIgKyBkYXRhICsgIikiKTsKICAgICAgICAgIGlmIChyZXNwLmVyciA9PSAiIikgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb3ZlcikuaW5uZXJIVE1MID0gcmVzcC5jb250ZW50OwogICAgICAgICAgICBtZS5BZnRlckZvcm1CYXJ1KHJlc3ApOwogICAgICAgICAgICAkKCIjdGFuZ2dhbENldGFrIikuZGF0ZXBpY2tlcih7CiAgICAgICAgICAgICAgZGF0ZUZvcm1hdDogImRkLW1tLXl5IiwKICAgICAgICAgICAgICBzaG93QW5pbTogInNsaWRlRG93biIsCiAgICAgICAgICAgICAgaW5saW5lOiB0cnVlLAogICAgICAgICAgICAgIHNob3dPbjogImJ1dHRvbiIsCiAgICAgICAgICAgICAgYnV0dG9uSW1hZ2U6ICJpbWFnZXMvY2FsZW5kYXIuZ2lmIiwKICAgICAgICAgICAgICBidXR0b25JbWFnZU9ubHk6IHRydWUsCiAgICAgICAgICAgICAgY2hhbmdlTW9udGg6IHRydWUsCiAgICAgICAgICAgICAgY2hhbmdlWWVhcjogZmFsc2UsCiAgICAgICAgICAgICAgeWVhclJhbmdlOiByZXNwLmNvbnRlbnQueWVhclJhbmdlLAogICAgICAgICAgICAgIGJ1dHRvblRleHQ6ICIiLAogICAgICAgICAgICAgIGRlZmF1bHREYXRlOiArMAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsZXJ0KHJlc3AuZXJyKTsKICAgICAgICAgICAgZGVsRWxlbShjb3Zlcik7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAiYXV0byI7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGFsZXJ0KGVycik7CiAgICB9CiAgfSwKICBuZXdUYW5kYVRhbmdhbmdhbjogZnVuY3Rpb24oKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgdmFyIGVyciA9ICIiOwogICAgdmFyIGNvdmVyID0gdGhpcy5wcmVmaXggKyAiX2Zvcm1jb3ZlclRhbmRhVGFuZ2FuIjsKCiAgICBpZiAoZXJyID09ICIiKSB7CiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAiaGlkZGVuIjsKICAgICAgYWRkQ292ZXJQYWdlMihjb3ZlciwgOTksIHRydWUsIGZhbHNlKTsKICAgICAgJC5hamF4KHsKICAgICAgICB0eXBlOiAiUE9TVCIsCiAgICAgICAgZGF0YTogJCgiIyIgKyB0aGlzLnByZWZpeCArICJfZm9ybSIpLnNlcmlhbGl6ZSgpLAogICAgICAgIHVybDogdGhpcy51cmwgKyAiJnRpcGU9bmV3VGFuZGFUYW5nYW5nYW4iLAogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgIHZhciByZXNwID0gZXZhbCgiKCIgKyBkYXRhICsgIikiKTsKICAgICAgICAgIGlmIChyZXNwLmVyciA9PSAiIikgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb3ZlcikuaW5uZXJIVE1MID0gcmVzcC5jb250ZW50OwogICAgICAgICAgICBtZS5BZnRlckZvcm1CYXJ1KHJlc3ApOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWxlcnQocmVzcC5lcnIpOwogICAgICAgICAgICBkZWxFbGVtKGNvdmVyKTsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICJhdXRvIjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgYWxlcnQoZXJyKTsKICAgIH0KICB9LAogIGNsb3NlVGFuZGFUYW5nYW5Gb3JtOiBmdW5jdGlvbigpIHsKICAgIHZhciBjb3ZlciA9IHRoaXMucHJlZml4ICsgIl9mb3JtY292ZXJUYW5kYVRhbmdhbiI7CiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY292ZXIpKSBkZWxFbGVtKGNvdmVyKTsKICAgIGlmICh0aXBlID09IG51bGwpIHsKICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICJhdXRvIjsKICAgIH0KICB9LAogIHBpbGloUGFuZ2thdDogZnVuY3Rpb24oKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgJC5hamF4KHsKICAgICAgdXJsOiB0aGlzLnVybCArICImdGlwZT1waWxpaFBhbmdrYXQiLAogICAgICB0eXBlOiAiUE9TVCIsCiAgICAgIGRhdGE6IHsKICAgICAgICBjMTogJCgiI2ZpbHRlclVydXNhbiIpLnZhbCgpLAogICAgICAgIGM6ICQoIiNmaWx0ZXJCaWRhbmciKS52YWwoKSwKICAgICAgICBkOiAkKCIjZmlsdGVyU0tQRCIpLnZhbCgpLAogICAgICAgIGU6ICQoIiNmaWx0ZXJVbml0IikudmFsKCksCiAgICAgICAgZTE6ICQoIiNmaWx0ZXJTdWJVbml0IikudmFsKCksCiAgICAgICAgZGMxOiAkKCIjZGMxIikudmFsKCksCiAgICAgICAgZGM6ICQoIiNkYyIpLnZhbCgpLAogICAgICAgIGRkOiAkKCIjZGQiKS52YWwoKSwKICAgICAgICBrYXRlZ29yaTogJCgiI2thdGVnb3JpIikudmFsKCksCiAgICAgICAgbmFtYXBlZ2F3YWk6ICQoIiNuYW1hcGVnYXdhaSIpLnZhbCgpLAogICAgICAgIG5pcHBlZ2F3YWk6ICQoIiNuaXBwZWdhd2FpIikudmFsKCksCiAgICAgICAgcGFuZ2thdGFraGlyOiAkKCIjcGFuZ2thdGFraGlyIikudmFsKCksCiAgICAgICAgZ29sYW5nX2FraGlyOiAkKCIjZ29sYW5nX2FraGlyIikudmFsKCksCiAgICAgICAgamFiYXRhbjogJCgiI2phYmF0YW4iKS52YWwoKSwKICAgICAgICBlc2Vsb25fYWtoaXI6ICQoIiNlc2Vsb25fYWtoaXIiKS52YWwoKQogICAgICB9LAogICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgdmFyIHJlc3AgPSBldmFsKCIoIiArIGRhdGEgKyAiKSIpOwogICAgICAgIGlmIChyZXNwLmVyciA9PSAiIikgewogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImdvbGFuZ19ha2hpciIpLnZhbHVlID0gcmVzcC5jb250ZW50OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydChyZXNwLmVycik7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIHNhdmVOZXdUYW5kYVRhbmdhbjogZnVuY3Rpb24oKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgdGhpcy5PbkVycm9yQ2xvc2UgPSBmYWxzZTsKICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAiaGlkZGVuIjsKICAgIHZhciBjb3ZlciA9ICJyZW5qYUFzZXQiICsgIl9mb3Jtc2ltcGFuIjsKICAgIGFkZENvdmVyUGFnZTIoY292ZXIsIDEsIHRydWUsIGZhbHNlKTsKICAgICQuYWpheCh7CiAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgZGF0YTogewogICAgICAgIGthdGVnb3JpOiAkKCIja2F0ZWdvcmkiKS52YWwoKSwKICAgICAgICBuYW1hcGVnYXdhaTogJCgiI25hbWFwZWdhd2FpIikudmFsKCksCiAgICAgICAgbmlwcGVnYXdhaTogJCgiI25pcHBlZ2F3YWkiKS52YWwoKSwKICAgICAgICBwYW5na2F0YWtoaXI6ICQoIiNwYW5na2F0YWtoaXIiKS52YWwoKSwKICAgICAgICBnb2xhbmdfYWtoaXI6ICQoIiNnb2xhbmdfYWtoaXIiKS52YWwoKSwKICAgICAgICBqYWJhdGFuOiAkKCIjamFiYXRhbiIpLnZhbCgpLAogICAgICAgIGVzZWxvbl9ha2hpcjogJCgiI2VzZWxvbl9ha2hpciIpLnZhbCgpCiAgICAgIH0sCiAgICAgIHVybDogdGhpcy51cmwgKyAiJnRpcGU9c2F2ZU5ld1RhbmRhVGFuZ2FuIiwKICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICAgIHZhciByZXNwID0gZXZhbCgiKCIgKyBkYXRhICsgIikiKTsKICAgICAgICBkZWxFbGVtKGNvdmVyKTsKICAgICAgICAvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvdmVyKS5pbm5lckhUTUwgPSByZXNwLmNvbnRlbnQ7CiAgICAgICAgaWYgKHJlc3AuZXJyID09ICIiKSB7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaWRQZW5hbmRhVGFuZ2FuIikuaW5uZXJIVE1MID0KICAgICAgICAgICAgcmVzcC5jb250ZW50LmNvbWJvdHRkOwogICAgICAgICAgbWUuY2xvc2VUYW5kYVRhbmdhbkZvcm0oKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQocmVzcC5lcnIpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICB2aWV3TGFwb3JhbjogZnVuY3Rpb24oKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgZXJybXNnID0gIiI7CiAgICBpZiAoZXJybXNnID09ICIiKSB7CiAgICAgIHZhciBtZSA9IHRoaXM7CiAgICAgIHZhciBhRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucHJlZml4ICsgIl9mb3JtIik7CiAgICAgIGFGb3JtLmFjdGlvbiA9IG1lLnVybCArICImdGlwZT12aWV3TGFwb3JhbiI7CiAgICAgIGFGb3JtLnRhcmdldCA9ICJfYmxhbmsiOwogICAgICBhRm9ybS5zdWJtaXQoKTsKICAgICAgYUZvcm0udGFyZ2V0ID0gIiI7CiAgICB9IGVsc2UgewogICAgICBhbGVydChlcnJtc2cpOwogICAgfQogIH0sCiAgbm90aWNlU3luYzogZnVuY3Rpb24oKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgdmFyIGNvdmVyID0gdGhpcy5wcmVmaXggKyAiX2Zvcm1jb3ZlciI7CiAgICAkLmFqYXgoewogICAgICB0eXBlOiAiUE9TVCIsCiAgICAgIGRhdGE6ICQoIiMiICsgdGhpcy5mb3JtTmFtZSkuc2VyaWFsaXplKCksCiAgICAgIHVybDogdGhpcy51cmwgKyAiJnRpcGU9bm90aWNlU3luYyIsCiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICB2YXIgcmVzcCA9IGV2YWwoIigiICsgZGF0YSArICIpIik7CiAgICAgICAgaWYgKHJlc3AuZXJyID09ICIiKSB7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gImhpZGRlbiI7CiAgICAgICAgICBhZGRDb3ZlclBhZ2UyKGNvdmVyLCA5OTksIHRydWUsIGZhbHNlKTsKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvdmVyKS5pbm5lckhUTUwgPSByZXNwLmNvbnRlbnQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KHJlc3AuZXJyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgY2xvc2VOb3RpY2U6IGZ1bmN0aW9uKCkgewogICAgdmFyIG1lID0gdGhpczsKICAgIG1lLlN5bmMoKTsKICB9LAogIFN5bmM6IGZ1bmN0aW9uKCkgewogICAgdmFyIG1lID0gdGhpczsKICAgIHZhciBjb3ZlciA9IHRoaXMucHJlZml4ICsgIl9mb3JtY292ZXJMb2FkaW5nIjsKICAgIGFkZENvdmVyUGFnZTIoY292ZXIsIDk5OTksIHRydWUsIGZhbHNlKTsKICAgICQuYWpheCh7CiAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgZGF0YTogeyBrb2RlU0tQRDogJCgiI2tvZGVTS1BEIikudmFsKCkgfSwKICAgICAgdXJsOiB0aGlzLnVybCArICImdGlwZT1zeW5jIiwKICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICAgIGRlbEVsZW0oY292ZXIpOwogICAgICAgIHZhciByZXNwID0gZXZhbCgiKCIgKyBkYXRhICsgIikiKTsKICAgICAgICBpZiAocmVzcC5lcnIgPT0gIiIpIHsKICAgICAgICAgIGFsZXJ0KCJzeW5jIHN1a3NlcyIpOwogICAgICAgICAgbWUuQ2xvc2UoKTsKICAgICAgICAgIG1lLnJlZnJlc2hMaXN0KHRydWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydChyZXNwLmVycik7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIGVkaXRSZWtlbmluZzogZnVuY3Rpb24oaWRSS0EpIHsKICAgIHZhciBtZSA9IHRoaXM7CiAgICB2YXIgY292ZXIgPSB0aGlzLnByZWZpeCArICJfZm9ybWNvdmVyTG9hZGluZyI7CiAgICBhZGRDb3ZlclBhZ2UyKGNvdmVyLCA1LCB0cnVlLCBmYWxzZSk7CiAgICAkLmFqYXgoewogICAgICB0eXBlOiAiUE9TVCIsCiAgICAgIGRhdGE6IHsKICAgICAgICBpZFJLQTogaWRSS0EKICAgICAgfSwKICAgICAgdXJsOiB0aGlzLnVybCArICImdGlwZT1lZGl0UmVrZW5pbmciLAogICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgZGVsRWxlbShjb3Zlcik7CiAgICAgICAgdmFyIHJlc3AgPSBldmFsKCIoIiArIGRhdGEgKyAiKSIpOwogICAgICAgIGlmIChyZXNwLmVyciA9PSAiIikgewogICAgICAgICAgJCgiI3NwYW5FZGl0UmVrZW5pbmciICsgaWRSS0EpLmh0bWwocmVzcC5jb250ZW50LmlzaVNwYW5SZWtlbmluZyk7CiAgICAgICAgICAvLyAkKCIjYWN0aW9uU3BhblJla2VuaW5nIiArIGlkUktBKS5odG1sKHJlc3AuY29udGVudC5pc2lBY3Rpb25TcGFuKTsKICAgICAgICAgICQoIiNzcGFuRWRpdFJla2VuaW5nIiArIGlkUktBKS5hdHRyKCJvbmNsaWNrIiwgIiIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydChyZXNwLmVycik7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIGZpbmRSZWtlbmluZzogZnVuY3Rpb24oaWQpIHsKICAgIHZhciBtZSA9IHRoaXM7CiAgICB2YXIgZmlsdGVyUmVrID0gIiI7CiAgICBwb3B1cFJla2VuaW5nLmVsX2tvZGVfcmVrZW5pbmcgPSAiaGlkZGVuUmVrZW5pbmciICsgaWQ7CiAgICBwb3B1cFJla2VuaW5nLmVsX25hbWFfcmVrZW5pbmcgPSAidGV4dFJla2VuaW5nIiArIGlkOwogICAgcG9wdXBSZWtlbmluZy53aW5kb3dTYXZlQWZ0ZXIgPSBmdW5jdGlvbigpIHt9OwogICAgcG9wdXBSZWtlbmluZy5maWx0ZXJBa3VuID0gIlJLQSAyLjIuMSI7CiAgICBwb3B1cFJla2VuaW5nLndpbmRvd1Nob3coKTsKICB9LAogIHNhdmVFZGl0UmVrZW5pbmc6IGZ1bmN0aW9uKGlkKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgdmFyIGNvdmVyID0gdGhpcy5wcmVmaXggKyAiX2Zvcm1jb3ZlckxvYWRpbmciOwogICAgYWRkQ292ZXJQYWdlMihjb3ZlciwgNSwgdHJ1ZSwgZmFsc2UpOwogICAgJC5hamF4KHsKICAgICAgdHlwZTogIlBPU1QiLAogICAgICBkYXRhOgogICAgICAgICQoIiMiICsgdGhpcy5mb3JtTmFtZSkuc2VyaWFsaXplKCkgKwogICAgICAgICImaWRFZGl0UmthPSIgKwogICAgICAgIGlkICsKICAgICAgICAiJmtvZGVSZWtlbmluZ1JLQT0iICsKICAgICAgICAkKCIjaGlkZGVuUmVrZW5pbmciICsgaWQpLnZhbCgpLAogICAgICB1cmw6IHRoaXMudXJsICsgIiZ0aXBlPXNhdmVFZGl0UmVrZW5pbmciLAogICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgZGVsRWxlbShjb3Zlcik7CiAgICAgICAgdmFyIHJlc3AgPSBldmFsKCIoIiArIGRhdGEgKyAiKSIpOwogICAgICAgIGlmIChyZXNwLmVyciA9PSAiIikgewogICAgICAgICAgbWUucmVmcmVzaExpc3QodHJ1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KHJlc3AuZXJyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCiAgc2F2ZUVkaXRSaW5jaWFuQmVsYW5qYTogZnVuY3Rpb24oaWRFZGl0UmthLCBpZFJpbmNpYW5CZWxhbmphKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgdmFyIGNvdmVyID0gdGhpcy5wcmVmaXggKyAiX2Zvcm1jb3ZlckxvYWRpbmciOwogICAgYWRkQ292ZXJQYWdlMihjb3ZlciwgNSwgdHJ1ZSwgZmFsc2UpOwogICAgJC5hamF4KHsKICAgICAgdHlwZTogIlBPU1QiLAogICAgICBkYXRhOgogICAgICAgICQoIiMiICsgdGhpcy5mb3JtTmFtZSkuc2VyaWFsaXplKCkgKwogICAgICAgICImaWRSaW5jaWFuQmVsYW5qYT0iICsKICAgICAgICBpZFJpbmNpYW5CZWxhbmphICsKICAgICAgICAiJm5hbWFSaW5jaWFuQmVsYW5qYT0iICsKICAgICAgICAkKCIjdGV4dFJpbmNpYW5CZWxhbmphIiArIGlkRWRpdFJrYSkudmFsKCksCiAgICAgIHVybDogdGhpcy51cmwgKyAiJnRpcGU9c2F2ZUVkaXRSaW5jaWFuQmVsYW5qYSIsCiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICBkZWxFbGVtKGNvdmVyKTsKICAgICAgICB2YXIgcmVzcCA9IGV2YWwoIigiICsgZGF0YSArICIpIik7CiAgICAgICAgaWYgKHJlc3AuZXJyID09ICIiKSB7CiAgICAgICAgICBtZS5yZWZyZXNoTGlzdCh0cnVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQocmVzcC5lcnIpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICBlZGl0UmluY2lhbkJlbGFuamE6IGZ1bmN0aW9uKGlkRWRpdFJrYSwgaWRSaW5jaWFuQmVsYW5qYSkgewogICAgdmFyIG1lID0gdGhpczsKICAgIHZhciBjb3ZlciA9IHRoaXMucHJlZml4ICsgIl9mb3JtY292ZXJMb2FkaW5nIjsKICAgIGFkZENvdmVyUGFnZTIoY292ZXIsIDUsIHRydWUsIGZhbHNlKTsKICAgICQuYWpheCh7CiAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgZGF0YTogewogICAgICAgIGlkRWRpdFJrYTogaWRFZGl0UmthLAogICAgICAgIGlkUmluY2lhbkJlbGFuamE6IGlkUmluY2lhbkJlbGFuamEKICAgICAgfSwKICAgICAgdXJsOiB0aGlzLnVybCArICImdGlwZT1lZGl0UmluY2lhbkJlbGFuamEiLAogICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgZGVsRWxlbShjb3Zlcik7CiAgICAgICAgdmFyIHJlc3AgPSBldmFsKCIoIiArIGRhdGEgKyAiKSIpOwogICAgICAgIGlmIChyZXNwLmVyciA9PSAiIikgewogICAgICAgICAgJCgiI3NwYW5FZGl0UmluY2lhbkJlbGFuamEiICsgaWRFZGl0UmthKS5odG1sKAogICAgICAgICAgICByZXNwLmNvbnRlbnQuaXNpU3BhblJpbmNpYW5CZWxhbmphCiAgICAgICAgICApOwogICAgICAgICAgLy8gJCgiI2FjdGlvblNwYW5SaW5jaWFuQmVsYW5qYSIgKyBpZEVkaXRSa2EpLmh0bWwoCiAgICAgICAgICAvLyAgIHJlc3AuY29udGVudC5pc2lBY3Rpb25TcGFuCiAgICAgICAgICAvLyApOwogICAgICAgICAgJCgiI3NwYW5FZGl0UmluY2lhbkJlbGFuamEiICsgaWRFZGl0UmthKS5hdHRyKCJvbmNsaWNrIiwgIiIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydChyZXNwLmVycik7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIGVkaXRTdWJSaW5jaWFuOiBmdW5jdGlvbihpZEVkaXRSa2EpIHsKICAgIHZhciBtZSA9IHRoaXM7CiAgICB2YXIgY292ZXIgPSB0aGlzLnByZWZpeCArICJfZm9ybWNvdmVyTG9hZGluZyI7CiAgICBhZGRDb3ZlclBhZ2UyKGNvdmVyLCA1LCB0cnVlLCBmYWxzZSk7CiAgICAkLmFqYXgoewogICAgICB0eXBlOiAiUE9TVCIsCiAgICAgIGRhdGE6IHsKICAgICAgICBpZEVkaXRSa2E6IGlkRWRpdFJrYQogICAgICB9LAogICAgICB1cmw6IHRoaXMudXJsICsgIiZ0aXBlPWVkaXRTdWJSaW5jaWFuIiwKICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICAgIGRlbEVsZW0oY292ZXIpOwogICAgICAgIHZhciByZXNwID0gZXZhbCgiKCIgKyBkYXRhICsgIikiKTsKICAgICAgICBpZiAocmVzcC5lcnIgPT0gIiIpIHsKICAgICAgICAgICQoIiNzcGFuVm9sdW1lUmVrZW5pbmciICsgaWRFZGl0UmthKS5odG1sKHJlc3AuY29udGVudC5pc2lTcGFuVm9sdW1lKTsKICAgICAgICAgICQoIiNzcGFuU2F0dWFuIiArIGlkRWRpdFJrYSkuaHRtbChyZXNwLmNvbnRlbnQuaXNpU3BhblNhdHVhbik7CiAgICAgICAgICAkKCIjc3BhbkhhcmdhU2F0dWFuIiArIGlkRWRpdFJrYSkuaHRtbCgKICAgICAgICAgICAgcmVzcC5jb250ZW50LmlzaVNwYW5IYXJnYVNhdHVhbgogICAgICAgICAgKTsKICAgICAgICAgICQoIiNzcGFuVG90YWxKdW1sYWgiICsgaWRFZGl0UmthKS5odG1sKAogICAgICAgICAgICByZXNwLmNvbnRlbnQuaXNpU3BhblRvdGFsSnVtbGFoCiAgICAgICAgICApOwogICAgICAgICAgJCgiI2FjdGlvblNwYW4iICsgaWRFZGl0UmthKS5odG1sKHJlc3AuY29udGVudC5pc2lBY3Rpb25TcGFuKTsKICAgICAgICAgIC8vICQoIiN0ZFZvbHVtZVJla2VuaW5nIitpZEVkaXRSa2EpLmF0dHIoImFsaWduIiwibGVmdCIpOwogICAgICAgICAgJCgiI2hlYWRlclVyYWlhbiIpLmF0dHIoIndpZHRoIiwgIjYwMCIpOwogICAgICAgICAgJCgiI2hlYWRlclZvbHVtZSIpLmF0dHIoIndpZHRoIiwgIjE1MCIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydChyZXNwLmVycik7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIGZvcm1SaW5jaWFuVm9sdW1lOiBmdW5jdGlvbihpZCkgewogICAgdmFyIG1lID0gdGhpczsKICAgIHZhciBjb3ZlciA9IHRoaXMucHJlZml4ICsgIl9mb3JtY292ZXIiOwogICAgJC5hamF4KHsKICAgICAgdHlwZTogIlBPU1QiLAogICAgICBkYXRhOiB7CiAgICAgICAgaWQ6IGlkLAogICAgICAgIHZvbHVtZTFUZW1wOiAkKCIjdm9sdW1lMVRlbXAiICsgaWQpLnZhbCgpLAogICAgICAgIHZvbHVtZTJUZW1wOiAkKCIjdm9sdW1lMlRlbXAiICsgaWQpLnZhbCgpLAogICAgICAgIHZvbHVtZTNUZW1wOiAkKCIjdm9sdW1lM1RlbXAiICsgaWQpLnZhbCgpLAogICAgICAgIHNhdHVhbjFUZW1wOiAkKCIjc2F0dWFuMVRlbXAiICsgaWQpLnZhbCgpLAogICAgICAgIHNhdHVhbjJUZW1wOiAkKCIjc2F0dWFuMlRlbXAiICsgaWQpLnZhbCgpLAogICAgICAgIHNhdHVhbjNUZW1wOiAkKCIjc2F0dWFuM1RlbXAiICsgaWQpLnZhbCgpLAogICAgICAgIHVyYWlhblZvbHVtZTogJCgiI3VyYWlhblZvbHVtZSIgKyBpZCkudGV4dCgpCiAgICAgIH0sCiAgICAgIHVybDogdGhpcy51cmwgKyAiJnRpcGU9Zm9ybVJpbmNpYW5Wb2x1bWUiLAogICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgdmFyIHJlc3AgPSBldmFsKCIoIiArIGRhdGEgKyAiKSIpOwogICAgICAgIGlmIChyZXNwLmVyciA9PSAiIikgewogICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICJoaWRkZW4iOwogICAgICAgICAgYWRkQ292ZXJQYWdlMihjb3ZlciwgMiwgdHJ1ZSwgZmFsc2UpOwogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY292ZXIpLmlubmVySFRNTCA9IHJlc3AuY29udGVudDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQocmVzcC5lcnIpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICBzZXRUb3RhbFJpbmNpYW46IGZ1bmN0aW9uKCkgewogICAgdmFyIGp1bWxhaDEgPSBOdW1iZXIoJCgiI2p1bWxhaDEiKS52YWwoKSk7CiAgICB2YXIganVtbGFoMiA9IE51bWJlcigkKCIjanVtbGFoMiIpLnZhbCgpKTsKICAgIHZhciBqdW1sYWgzID0gTnVtYmVyKCQoIiNqdW1sYWgzIikudmFsKCkpOwogICAgaWYgKCQoIiNqdW1sYWgyIikudmFsKCkgPT0gIiIpIHsKICAgICAgdmFyIGp1bWxhaFRvdGFsID0gTnVtYmVyKGp1bWxhaDEpOwogICAgfSBlbHNlIGlmICgkKCIjanVtbGFoMyIpLnZhbCgpID09ICIiKSB7CiAgICAgIHZhciBqdW1sYWhUb3RhbCA9IE51bWJlcihqdW1sYWgxICoganVtbGFoMik7CiAgICB9IGVsc2UgewogICAgICB2YXIganVtbGFoVG90YWwgPSBOdW1iZXIoanVtbGFoMSAqIGp1bWxhaDIgKiBqdW1sYWgzKTsKICAgIH0KICAgICQoIiNqdW1sYWg0IikudmFsKGp1bWxhaFRvdGFsKTsKICB9LAogIFNhdmVSaW5jaWFuVm9sdW1lOiBmdW5jdGlvbihpZCkgewogICAgdmFyIGVyciA9ICIiOwogICAgdmFyIG1lID0gdGhpczsKICAgIHRoaXMuT25FcnJvckNsb3NlID0gZmFsc2U7CiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gImhpZGRlbiI7CiAgICB2YXIgY292ZXIgPSB0aGlzLnByZWZpeCArICJfZm9ybXNpbXBhbiI7CiAgICBhZGRDb3ZlclBhZ2UyKGNvdmVyLCAxLCB0cnVlLCBmYWxzZSk7CiAgICBkZWxFbGVtKGNvdmVyKTsKICAgIGlmICgkKCIjanVtbGFoMSIpLnZhbCgpICE9ICIiICYmICQoIiNzYXR1YW4xIikudmFsKCkgPT0gIiIpIHsKICAgICAgZXJyID0gIklzaSBTYXR1YW4gS2VzYXR1ICEiOwogICAgfSBlbHNlIGlmICgkKCIjanVtbGFoMiIpLnZhbCgpICE9ICIiICYmICQoIiNzYXR1YW4yIikudmFsKCkgPT0gIiIpIHsKICAgICAgZXJyID0gIklzaSBTYXR1YW4gS2VkdWEgISI7CiAgICB9IGVsc2UgaWYgKCQoIiNqdW1sYWgzIikudmFsKCkgIT0gIiIgJiYgJCgiI3NhdHVhbjMiKS52YWwoKSA9PSAiIikgewogICAgICBlcnIgPSAiSXNpIFNhdHVhbiBLZWR1YSAhIjsKICAgIH0gZWxzZSBpZiAoJCgiI2p1bWxhaDMiKS52YWwoKSAhPSAiIiAmJiAkKCIjanVtbGFoMiIpLnZhbCgpID09ICIiKSB7CiAgICAgIGVyciA9ICJJc2kgVm9sdW1lIEtlZHVhICEiOwogICAgfSBlbHNlIGlmICgkKCIjanVtbGFoMyIpLnZhbCgpICE9ICIiICYmICQoIiNqdW1sYWgxIikudmFsKCkgPT0gIiIpIHsKICAgICAgZXJyID0gIklzaSBWb2x1bWUgS2VzYXR1ICEiOwogICAgfQogICAgaWYgKGVyciA9PSAiIikgewogICAgICAkKCIjdm9sdW1lMVRlbXAiICsgaWQpLnZhbCgkKCIjanVtbGFoMSIpLnZhbCgpKTsKICAgICAgJCgiI3ZvbHVtZTJUZW1wIiArIGlkKS52YWwoJCgiI2p1bWxhaDIiKS52YWwoKSk7CiAgICAgICQoIiN2b2x1bWUzVGVtcCIgKyBpZCkudmFsKCQoIiNqdW1sYWgzIikudmFsKCkpOwogICAgICAkKCIjc2F0dWFuMVRlbXAiICsgaWQpLnZhbCgkKCIjc2F0dWFuMSIpLnZhbCgpKTsKICAgICAgJCgiI3NhdHVhbjJUZW1wIiArIGlkKS52YWwoJCgiI3NhdHVhbjIiKS52YWwoKSk7CiAgICAgICQoIiNzYXR1YW4zVGVtcCIgKyBpZCkudmFsKCQoIiNzYXR1YW4zIikudmFsKCkpOwogICAgICAkKCIjdm9sdW1lUmVrIiArIGlkKS52YWwoJCgiI2p1bWxhaDQiKS52YWwoKSk7CiAgICAgICQoIiN1cmFpYW5Wb2x1bWUiICsgaWQpLnRleHQoJCgiI3JpbmNpYW5Wb2x1bWVUZW1wIikudmFsKCkpOwogICAgICAvLyQoIiNzYXR1YW5SZWsiK2lkKS52YWwoJCgiI3JpbmNpYW5Wb2x1bWVUZW1wIikudmFsKCkpOwogICAgICAvL21lLmJhbnR1KCk7CiAgICAgIHJrYVNLUEQyMjEuaGl0dW5nVm9sdW1lKGlkKTsKICAgICAgdmFyIHNhdHVhbiA9ICIiOwogICAgICBpZiAoJCgiI2p1bWxhaDMiKS52YWwoKSAhPSAiIikgewogICAgICAgIHNhdHVhbiA9CiAgICAgICAgICAkKCIjc2F0dWFuMSIpLnZhbCgpICsKICAgICAgICAgICIgLyAiICsKICAgICAgICAgICQoIiNzYXR1YW4yIikudmFsKCkgKwogICAgICAgICAgIiAvICIgKwogICAgICAgICAgJCgiI3NhdHVhbjMiKS52YWwoKTsKICAgICAgICAkKCIjc2F0dWFuUmVrIiArIGlkKS52YWwoc2F0dWFuKTsKICAgICAgfSBlbHNlIGlmICgkKCIjanVtbGFoMiIpLnZhbCgpICE9ICIiKSB7CiAgICAgICAgc2F0dWFuID0gJCgiI3NhdHVhbjEiKS52YWwoKSArICIgLyAiICsgJCgiI3NhdHVhbjIiKS52YWwoKTsKICAgICAgICAkKCIjc2F0dWFuUmVrIiArIGlkKS52YWwoc2F0dWFuKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzYXR1YW4gPSAkKCIjc2F0dWFuMSIpLnZhbCgpOwogICAgICAgICQoIiNzYXR1YW5SZWsiICsgaWQpLnZhbChzYXR1YW4pOwogICAgICB9CiAgICAgIG1lLkNsb3NlKCk7CiAgICB9IGVsc2UgewogICAgICBhbGVydChlcnIpOwogICAgfQogIH0sCiAgaGl0dW5nVm9sdW1lOiBmdW5jdGlvbihpZCkgewogICAgdmFyIGhhc2lsS2FsaSA9ICQoIiN2b2x1bWVSZWsiICsgaWQpLnZhbCgpICogJCgiI2hhcmdhU2F0dWFuIiArIGlkKS52YWwoKTsKICAgICQoIiNzcGFuVG90YWxKdW1sYWgiICsgaWQpLnRleHQocmthU0tQRDIyMS5mb3JtYXRDdXJyZW5jeShoYXNpbEthbGkpKTsKICB9LAogIGZpbmRTU0g6IGZ1bmN0aW9uKGlkKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgJC5hamF4KHsKICAgICAgdHlwZTogIlBPU1QiLAogICAgICB1cmw6IHRoaXMudXJsICsgIiZ0aXBlPWdldERhdGFTU0giLAogICAgICBkYXRhOiB7CiAgICAgICAgaWQ6IGlkCiAgICAgIH0sCiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICB2YXIgcmVzcCA9IGV2YWwoIigiICsgZGF0YSArICIpIik7CiAgICAgICAgaWYgKHJlc3AuZXJyID09ICIiKSB7CiAgICAgICAgICBwb3B1cFNTSC5rb2RlUmVrZW5pbmcgPSByZXNwLmNvbnRlbnQua29kZVJla2VuaW5nOwogICAgICAgICAgcG9wdXBTU0gua29kZUJhcmFuZyA9IHJlc3AuY29udGVudC5rb2RlQmFyYW5nOwogICAgICAgICAgcG9wdXBTU0guZGFyaSA9IGlkOwogICAgICAgICAgcG9wdXBTU0gud2luZG93U2hvdygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydChyZXNwLmVycik7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9LAogIHNhdmVFZGl0U3ViUmluY2lhbjogZnVuY3Rpb24oaWRFZGl0UmthKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgJC5hamF4KHsKICAgICAgdHlwZTogIlBPU1QiLAogICAgICBkYXRhOiB7CiAgICAgICAgaWRFZGl0UmthOiBpZEVkaXRSa2EsCiAgICAgICAgaGFyZ2FTYXR1YW46ICQoIiNoYXJnYVNhdHVhbiIgKyBpZEVkaXRSa2EpLnZhbCgpLAogICAgICAgIHZvbHVtZTE6ICQoIiN2b2x1bWUxVGVtcCIgKyBpZEVkaXRSa2EpLnZhbCgpLAogICAgICAgIHZvbHVtZTI6ICQoIiN2b2x1bWUyVGVtcCIgKyBpZEVkaXRSa2EpLnZhbCgpLAogICAgICAgIHZvbHVtZTM6ICQoIiN2b2x1bWUzVGVtcCIgKyBpZEVkaXRSa2EpLnZhbCgpLAogICAgICAgIHZvbHVtZVJla2VuaW5nOiAkKCIjdm9sdW1lUmVrIiArIGlkRWRpdFJrYSkudmFsKCksCiAgICAgICAgc2F0dWFuMTogJCgiI3NhdHVhbjFUZW1wIiArIGlkRWRpdFJrYSkudmFsKCksCiAgICAgICAgc2F0dWFuMjogJCgiI3NhdHVhbjJUZW1wIiArIGlkRWRpdFJrYSkudmFsKCksCiAgICAgICAgc2F0dWFuMzogJCgiI3NhdHVhbjNUZW1wIiArIGlkRWRpdFJrYSkudmFsKCksCiAgICAgICAgc2F0dWFuUmVrZW5pbmc6ICQoIiNzYXR1YW5SZWsiICsgaWRFZGl0UmthKS52YWwoKSwKICAgICAgICB1cmFpYW5Wb2x1bWU6ICQoIiN1cmFpYW5Wb2x1bWUiICsgaWRFZGl0UmthKS50ZXh0KCkKICAgICAgfSwKICAgICAgdXJsOiB0aGlzLnVybCArICImdGlwZT1zYXZlRWRpdFN1YlJpbmNpYW4iLAogICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgdmFyIHJlc3AgPSBldmFsKCIoIiArIGRhdGEgKyAiKSIpOwogICAgICAgIGlmIChyZXNwLmVyciA9PSAiIikgewogICAgICAgICAgbWUucmVmcmVzaExpc3QodHJ1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KHJlc3AuZXJyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0KfSk7Cg==",
    "size": "27928"
}