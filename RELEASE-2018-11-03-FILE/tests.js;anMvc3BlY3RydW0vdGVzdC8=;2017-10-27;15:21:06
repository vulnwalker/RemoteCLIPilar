{
    "namaFile": "js\/spectrum\/test\/tests.js",
    "lastUpdate": "2017-10-27+15:21:06.83",
    "contentFile": "Ly8gU3BlY3RydW0gQ29sb3JwaWNrZXIgVGVzdHMKLy8gaHR0cHM6Ly9naXRodWIuY29tL2Jncmlucy9zcGVjdHJ1bQovLyBBdXRob3I6IEJyaWFuIEdyaW5zdGVhZAovLyBMaWNlbnNlOiBNSVQKCi8vIFByZXRlbmQgbGlrZSB0aGUgY29sb3IgaW5wdXRzIGFyZW4ndCBzdXBwb3J0ZWQgZm9yIGluaXRpYWwgbG9hZC4KJC5mbi5zcGVjdHJ1bS5pbnB1dFR5cGVDb2xvclN1cHBvcnQgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGZhbHNlOyB9OwoKbW9kdWxlKCJJbml0aWFsaXphdGlvbiIpOwoKdGVzdCggImpRdWVyeSBQbHVnaW4gQ2FuIEJlIENyZWF0ZWQiLCBmdW5jdGlvbigpIHsKICB2YXIgZWwgPSAkKCI8aW5wdXQgaWQ9J3NwZWMnIC8+Iikuc3BlY3RydW0oKTsKCiAgb2soZWwuYXR0cigiaWQiKSA9PT0gInNwZWMiLCAiRWxlbWVudCByZXR1cm5lZCBmcm9tIHBsdWdpbiIgKTsKCiAgZWwuc3BlY3RydW0oInNldCIsICJyZWQiKTsKICBlcXVhbChlbC5zcGVjdHJ1bSgiZ2V0IikudG9OYW1lKCksICJyZWQiLCAiQmFzaWMgY29sb3Igc2V0dGluZyIpOwoKICBlcXVhbChlbC5zcGVjdHJ1bSgib3B0aW9uIiwgInNob3dJbnB1dCIpLCBmYWxzZSwgIlVuZGVmaW5lZCBvcHRpb24gaXMgZmFsc2UuIik7CgogIGVsLnNwZWN0cnVtKHtzaG93SW5wdXQ6IHRydWV9KTsKCiAgZXF1YWwoZWwuc3BlY3RydW0oIm9wdGlvbiIsICJzaG93SW5wdXQiKSwgdHJ1ZSwgIkRvdWJsZSBpbml0aWFsaXplZCBzcGVjdHJ1bSBpcyBkZXN0cm95ZWQgYmVmb3JlIHJlY3JlYXRpbmcuIik7CgogIGVsLnNwZWN0cnVtKCJkZXN0cm95Iik7CgogIGVxdWFsKGVsLnNwZWN0cnVtKCJjb250YWluZXIiKSwgZWwsICJBZnRlciBkZXN0cm95aW5nIHNwZWN0cnVtLCBzdHJpbmcgZnVuY3Rpb24gcmV0dXJucyBpbnB1dC4iKTsKCn0pOwoKdGVzdCAoIlBvbHlmaWxsIiwgZnVuY3Rpb24oKSB7CiAgdmFyIGVsID0gJCgiI3R5cGUtY29sb3Itb24tcGFnZSIpOwogIG9rIChlbC5zcGVjdHJ1bSgiZ2V0IikudG9IZXgsICJUaGUgaW5wdXRbdHlwZT1jb2xvcl0gaGFzIGJlZW4gaW5pdGlhbGl6ZWQgb24gbG9hZCIpOwogIGVsLnNwZWN0cnVtKCJkZXN0cm95Iik7CgogIC8vIFByZXRlbmQgbGlrZSB0aGUgY29sb3IgaW5wdXRzIGFyZSBzdXBwb3J0ZWQuCiAgJC5mbi5zcGVjdHJ1bS5pbnB1dFR5cGVDb2xvclN1cHBvcnQgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH07CgogIGVsID0gJCgiPGlucHV0IHR5cGU9J2NvbG9yJyB2YWx1ZT0ncmVkJyAvPiIpLnNwZWN0cnVtKHsKICAgIGFsbG93RW1wdHk6IHRydWUKICB9KTsKICBlbC5zcGVjdHJ1bSgic2V0IiwgbnVsbCk7CiAgb2soZWwuc3BlY3RydW0oImdldCIpLCAiaW5wdXRbdHlwZV0gY29sb3IgZG9lcyBub3QgYWxsb3cgbnVsbCB2YWx1ZXMiKTsKICBlbC5zcGVjdHJ1bSgiZGVzdHJveSIpOwp9KTsKCnRlc3QoICJQZXItZWxlbWVudCBPcHRpb25zIEFyZSBSZWFkIEZyb20gRGF0YSBBdHRyaWJ1dGVzIiwgZnVuY3Rpb24oKSB7CiAgdmFyIGVsID0gJCgiPGlucHV0IGlkPSdzcGVjJyBkYXRhLXNob3ctYWxwaGE9J3RydWUnIC8+Iikuc3BlY3RydW0oKTsKCiAgZXF1YWwgKCBlbC5zcGVjdHJ1bSgib3B0aW9uIiwgInNob3dBbHBoYSIpLCB0cnVlLCAiVG9vayBzaG93QWxwaGEgdmFsdWUgZnJvbSBkYXRhIGF0dHJpYnV0ZSIpOwoKICBlbC5zcGVjdHJ1bSgiZGVzdHJveSIpOwoKICB2YXIgY2hhbmdlRGVmYXVsdCA9ICQoIjxpbnB1dCBpZD0nc3BlYycgZGF0YS1zaG93LWFscGhhPSdmYWxzZScgLz4iKS5zcGVjdHJ1bSh7CiAgICBzaG93QWxwaGE6IHRydWUKICB9KTsKCiAgZXF1YWwgKCBjaGFuZ2VEZWZhdWx0LnNwZWN0cnVtKCJvcHRpb24iLCAic2hvd0FscGhhIiksIGZhbHNlLCAiVG9vayBzaG93QWxwaGEgdmFsdWUgZnJvbSBkYXRhIGF0dHJpYnV0ZSIpOwoKICBjaGFuZ2VEZWZhdWx0LnNwZWN0cnVtKCJkZXN0cm95Iik7CgogIHZhciBub0RhdGEgPSAkKCI8aW5wdXQgaWQ9J3NwZWMnIC8+Iikuc3BlY3RydW0oewogICAgc2hvd0FscGhhOiB0cnVlCiAgfSk7CgogIGVxdWFsICggbm9EYXRhLnNwZWN0cnVtKCJvcHRpb24iLCAic2hvd0FscGhhIiksIHRydWUsICJLZXB0IHNob3dBbHBoYSB3aXRob3V0IGRhdGEgYXR0cmlidXRlIik7CgogIG5vRGF0YS5zcGVjdHJ1bSgiZGVzdHJveSIpOwp9KTsKCnRlc3QoICJFdmVudHMgRmlyZSIsIGZ1bmN0aW9uKCkgewogIHZhciBlbCA9ICQoIjxpbnB1dCBpZD0nc3BlYycgLz4iKS5zcGVjdHJ1bSgpOwogIHZhciBjb3VudCA9IDA7CiAgZXhwZWN0KDUpOwoKICBlbC5vbigiYmVmb3JlU2hvdy5zcGVjdHJ1bSIsIGZ1bmN0aW9uKGUpIHsKCiAgICAvLyBDYW5jZWwgdGhlIGV2ZW50IHRoZSBmaXJzdCB0aW1lCiAgICBpZiAoY291bnQgPT09IDApIHsKICAgICAgb2sodHJ1ZSwgIkNhbmNlbCBiZWZvcmVTaG93Iik7CiAgICAgIGNvdW50Kys7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBvayAoY291bnQgPT09IDEsICJBbGxvdyBiZWZvcmVTaG93Iik7CiAgICBjb3VudCsrOwogIH0pOwoKCiAgZWwub24oInNob3cuc3BlY3RydW0iLCBmdW5jdGlvbihlKSB7CiAgICBvayhjb3VudCA9PT0gMiwgIlNob3ciKTsKICAgIGNvdW50Kys7CiAgfSk7CgogIGVsLm9uKCJoaWRlLnNwZWN0cnVtIiwgZnVuY3Rpb24oZSkgewogICAgb2soY291bnQgPT09IDMsICJIaWRlIik7CgogICAgY291bnQrKzsKICB9KTsKCiAgZWwub24oIm1vdmUuc3BlY3RydW0iLCBmdW5jdGlvbihlKSB7CgogIH0pOwoKICBlbC5vbigiY2hhbmdlIiwgZnVuY3Rpb24oZSwgY29sb3IpIHsKICAgIG9rKGZhbHNlLCAiQ2hhbmdlIHNob3VsZCBub3QgZmlyZSBmcm9tIGBzZXRgIGNhbGwiKTsKICB9KTsKCiAgZWwuc3BlY3RydW0oInNob3ciKTsKICBlbC5zcGVjdHJ1bSgic2hvdyIpOwogIGVsLnNwZWN0cnVtKCJoaWRlIik7CgogIGVsLnNwZWN0cnVtKCJzZXQiLCAicmVkIik7CgogIGVsLnNwZWN0cnVtKCJkZXN0cm95Iik7CgogIHZhciBlbDIgPSAkKCI8aW5wdXQgLz4iKS5zcGVjdHJ1bSh7CiAgICBzaG93SW5wdXQ6IHRydWUKICB9KTsKICBlbDIub24oImNoYW5nZS5zcGVjdHJ1bSIsIGZ1bmN0aW9uKGUsIGNvbG9yKSB7CiAgICBvayh0cnVlLCAiQ2hhbmdlIHNob3VsZCBmaXJlIGlucHV0IGNoYW5naW5nIik7CiAgfSk7CiAgZWwyLnNwZWN0cnVtKCJjb250YWluZXIiKS5maW5kKCIuc3AtaW5wdXQiKS52YWwoImJsdWUiKS50cmlnZ2VyKCJjaGFuZ2UiKTsKICBlbDIuc3BlY3RydW0oImRlc3Ryb3kiKTsKfSk7Cgp0ZXN0KCAiRXNjYXBlIGhpZGVzIHRoZSBjb2xvcnBpY2tlciIsIGZ1bmN0aW9uKCkgewogIGV4cGVjdCgxKTsKICB2YXIgZWwgPSAkKCI8aW5wdXQgaWQ9J3NwZWMnIC8+Iikuc3BlY3RydW0oKTsKICBlbC5vbigiaGlkZS5zcGVjdHJ1bSIsIGZ1bmN0aW9uKGUpIHsKICAgIG9rKHRydWUsICJIaWRlIGV2ZW50IHNob3VsZCBmaXJlIik7CiAgfSk7CgogIC8vIFNpbXVsYXRlIGFuIGVzY2FwZSBiZWZvcmUgc2hvd2luZyAtLSBzaG91bGQgZG8gbm90aGluZwogIHZhciBlID0galF1ZXJ5LkV2ZW50KCJrZXlkb3duIik7CiAgZS5rZXlDb2RlID0gMjc7CiAgJChkb2N1bWVudCkudHJpZ2dlcihlKTsKCiAgZWwuc3BlY3RydW0oInNob3ciKTsKCiAgLy8gU2ltdWxhdGUgYW4gZXNjYXBlIGFmdGVyIHNob3dpbmcgLS0gc2hvdWxkIGNhbGwgdGhlIGhpZGUgaGFuZGxlcgogICQoZG9jdW1lbnQpLnRyaWdnZXIoZSk7CgogIGVsLnNwZWN0cnVtKCJkZXN0cm95Iik7Cn0pOwoKdGVzdCggIkRyYWdnaW5nIiwgZnVuY3Rpb24oKSB7CiAgdmFyIGVsID0gJCgiPGlucHV0IGlkPSdzcGVjJyAvPiIpLnNwZWN0cnVtKCk7CiAgdmFyIGh1ZVNsaWRlciA9IGVsLnNwZWN0cnVtKCJjb250YWluZXIiKS5maW5kKCIuc3AtaHVlIik7CgogIG9rIChodWVTbGlkZXIubGVuZ3RoLCAiVGhlcmUgaXMgYSBodWUgc2xpZGVyIik7CgogIGh1ZVNsaWRlci50cmlnZ2VyKCJtb3VzZWRvd24iKTsKCiAgb2sgKCQoImJvZHkiKS5oYXNDbGFzcygic3AtZHJhZ2dpbmciKSwgIlRoZSBib2R5IGhhcyBkcmFnZ2luZyBjbGFzcyIpOwoKICBodWVTbGlkZXIudHJpZ2dlcigibW91c2V1cCIpOwoKICBvayAoISQoImJvZHkiKS5oYXNDbGFzcygic3AtZHJhZ2dpbmciKSwgIlRoZSBib2R5IGRvZXMgbm90IGhhdmUgYSBkcmFnZ2luZyBjbGFzcyIpOwoKICBlbC5zcGVjdHJ1bSgiZGVzdHJveSIpOwp9KTsKCm1vZHVsZSgiRGVmYXVsdHMiKTsKCnRlc3QoICJEZWZhdWx0IENvbG9yIElzIFNldCBCeSBJbnB1dCBWYWx1ZSIsIGZ1bmN0aW9uKCkgewoKICB2YXIgcmVkID0gJCgiPGlucHV0IGlkPSdzcGVjJyB2YWx1ZT0ncmVkJyAvPiIpLnNwZWN0cnVtKCk7CiAgZXF1YWwgKCByZWQuc3BlY3RydW0oImdldCIpLnRvTmFtZSgpLCAicmVkIiwgIkJhc2ljIGNvbG9yIHNldHRpbmciKTsKCiAgdmFyIG5vQ29sb3IgPSAkKCI8aW5wdXQgaWQ9J3NwZWMnIHZhbHVlPSdub3QgYSBjb2xvcicgLz4iKS5zcGVjdHJ1bSgpOwogIGVxdWFsICggbm9Db2xvci5zcGVjdHJ1bSgiZ2V0IikudG9IZXgoKSwgIjAwMDAwMCIsICJEZWZhdWx0cyB0byBibGFjayB3aXRoIGFuIGludmFsaWQgY29sb3IiKTsKCiAgdmFyIG5vVmFsdWUgPSAkKCI8aW5wdXQgaWQ9J3NwZWMnIC8+Iikuc3BlY3RydW0oKTsKICBlcXVhbCAoIG5vVmFsdWUuc3BlY3RydW0oImdldCIpLnRvSGV4KCksICIwMDAwMDAiLCAiRGVmYXVsdHMgdG8gYmxhY2sgd2l0aCBubyB2YWx1ZSBzZXQiKTsKCiAgdmFyIG5vVmFsdWVIZXgzID0gJCgiPGlucHV0IGlkPSdzcGVjJyAvPiIpLnNwZWN0cnVtKHsKICAgIHByZWZlcnJlZEZvcm1hdDogImhleDMiCiAgfSk7CiAgZXF1YWwgKCBub1ZhbHVlSGV4My5zcGVjdHJ1bSgiZ2V0IikudG9IZXgodHJ1ZSksICIwMDAiLCAiRGVmYXVsdHMgdG8gMyBjaGFyIGhleCB3aXRoIG5vIHZhbHVlIHNldCIpOwogIGVxdWFsICggbm9WYWx1ZUhleDMuc3BlY3RydW0oImdldCIpLnRvU3RyaW5nKCksICIjMDAwIiwgIkRlZmF1bHRzIHRvIDMgY2hhciBoZXggd2l0aCBubyB2YWx1ZSBzZXQiKTsKCgogIHJlZC5zcGVjdHJ1bSgiZGVzdHJveSIpOwogIG5vQ29sb3Iuc3BlY3RydW0oImRlc3Ryb3kiKTsKICBub1ZhbHVlLnNwZWN0cnVtKCJkZXN0cm95Iik7CiAgbm9WYWx1ZUhleDMuc3BlY3RydW0oImRlc3Ryb3kiKTsKfSk7Cgptb2R1bGUoIlBhbGV0dGVzIik7Cgp0ZXN0KCAiUGFsZXR0ZSBFdmVudHMgRmlyZSBJbiBDb3JyZWN0IE9yZGVyICIsIGZ1bmN0aW9uKCkgewogIGV4cGVjdCgyKTsKICB2YXIgZWwgPSAkKCI8aW5wdXQgaWQ9J3NwZWMnIHZhbHVlPSdyZWQnIC8+Iikuc3BlY3RydW0oewogICAgc2hvd1BhbGV0dGU6IHRydWUsCiAgICBwYWxldHRlOiBbCiAgICAgIFsicmVkIiwgImdyZWVuIiwgImJsdWUiXQogICAgXSwKICAgIG1vdmU6IGZ1bmN0aW9uKCkgewoKICAgIH0KICB9KTsKCiAgdmFyIGNvdW50ID0gMDsKICBlbC5vbigibW92ZS5zcGVjdHJ1bSIsIGZ1bmN0aW9uKGUpIHsKICAgIG9rKGNvdW50ID09PSAwLCAibW92ZSBmaXJlcyBiZWZvcmUgY2hhbmdlIik7CiAgICBjb3VudCsrOwogIH0pOwoKICBlbC5vbigiY2hhbmdlLnNwZWN0cnVtIiwgZnVuY3Rpb24oZSkgewogICAgb2soY291bnQgPT09IDEsICJjaGFuZ2UgZmlyZXMgYWZ0ZXIgbW92ZSIpOwogIH0pOwoKICBlbC5zcGVjdHJ1bSgiY29udGFpbmVyIikuZmluZCgiLnNwLXRodW1iLWVsOmxhc3QtY2hpbGQiKS5jbGljaygpOwogIGVsLnNwZWN0cnVtKCJkZXN0cm95Iik7Cn0pOwoKdGVzdCggIlBhbGV0dGUgY2xpY2sgZXZlbnRzIHdvcmsgIiwgZnVuY3Rpb24oKSB7CiAgdmFyIGVsID0gJCgiPGlucHV0IGlkPSdzcGVjJyB2YWx1ZT0ncmVkJyAvPiIpLnNwZWN0cnVtKHsKICAgIHNob3dQYWxldHRlOiB0cnVlLAogICAgcGFsZXR0ZTogWwogICAgICBbInJlZCIsICJncmVlbiIsICJibHVlIl0KICAgIF0sCiAgICBtb3ZlOiBmdW5jdGlvbigpIHsKCiAgICB9CiAgfSk7CgogIGVsLnNwZWN0cnVtKCJjb250YWluZXIiKS5maW5kKCIuc3AtdGh1bWItZWw6bnRoLWNoaWxkKDMpIikuY2xpY2soKTsKICBlcXVhbCAoZWwuc3BlY3RydW0oImdldCIpLnRvTmFtZSgpLCAiYmx1ZSIsICJGaXJzdCBjbGljayB3b3JrZWQiKTsKICBlbC5zcGVjdHJ1bSgiY29udGFpbmVyIikuZmluZCgiLnNwLXRodW1iLWVsOm50aC1jaGlsZCgyKSAuc3AtdGh1bWItaW5uZXIiKS5jbGljaygpOwogIGVxdWFsIChlbC5zcGVjdHJ1bSgiZ2V0IikudG9OYW1lKCksICJncmVlbiIsICJTZWNvbmQgY2xpY2sgd29ya2VkIChvbiBjaGlsZCBlbGVtZW50KSIpOwogIGVsLnNwZWN0cnVtKCJjb250YWluZXIiKS5maW5kKCIuc3AtdGh1bWItZWw6bnRoLWNoaWxkKDEpIC5zcC10aHVtYi1pbm5lciIpLmNsaWNrKCk7CiAgZXF1YWwgKGVsLnNwZWN0cnVtKCJnZXQiKS50b05hbWUoKSwgInJlZCIsICJUaGlyZCBjbGljayB3b3JrZWQgKG9uIGNoaWxkIGVsZW1lbnQpIik7CiAgZWwuc3BlY3RydW0oImRlc3Ryb3kiKTsKCn0pOwoKdGVzdCggImhpZGVBZnRlclBhbGV0dGVTZWxlY3Q6IFBhbGV0dGUgc3RheXMgb3BlbiBhZnRlciBjb2xvciBzZWxlY3QiLCBmdW5jdGlvbigpIHsKICB2YXIgZWwgPSAkKCI8aW5wdXQgaWQ9J3NwZWMnIHZhbHVlPSdyZWQnIC8+Iikuc3BlY3RydW0oewogICAgc2hvd1BhbGV0dGU6IHRydWUsCiAgICBoaWRlQWZ0ZXJQYWxldHRlU2VsZWN0OiBmYWxzZSwKICAgIHBhbGV0dGU6IFsKICAgICAgWyJyZWQiLCAiZ3JlZW4iLCAiYmx1ZSJdCiAgICBdCiAgfSk7CgogIGVsLnNwZWN0cnVtKCJzaG93Iik7CiAgZWwuc3BlY3RydW0oImNvbnRhaW5lciIpLmZpbmQoIi5zcC10aHVtYi1lbDpudGgtY2hpbGQoMSkiKS5jbGljaygpOwoKICBvayghZWwuc3BlY3RydW0oImNvbnRhaW5lciIpLmhhc0NsYXNzKCdzcC1oaWRkZW4nKSwgInBhbGV0dGUgaXMgc3RpbGwgdmlzaWJsZSBhZnRlciBjb2xvciBzZWxlY3Rpb24iKTsKICBlbC5zcGVjdHJ1bSgiZGVzdHJveSIpOwp9KTsKCnRlc3QoICJoaWRlQWZ0ZXJQYWxldHRlU2VsZWN0OiBQYWxldHRlIGNsb3NlcyBhZnRlciBjb2xvciBzZWxlY3QiLCBmdW5jdGlvbigpIHsKICB2YXIgZWwgPSAkKCI8aW5wdXQgaWQ9J3NwZWMnIHZhbHVlPSdyZWQnIC8+Iikuc3BlY3RydW0oewogICAgc2hvd1BhbGV0dGU6IHRydWUsCiAgICBoaWRlQWZ0ZXJQYWxldHRlU2VsZWN0OiB0cnVlLAogICAgcGFsZXR0ZTogWwogICAgICBbInJlZCIsICJncmVlbiIsICJibHVlIl0KICAgIF0KICB9KTsKCiAgZWwuc3BlY3RydW0oInNob3ciKTsKICBlbC5zcGVjdHJ1bSgiY29udGFpbmVyIikuZmluZCgiLnNwLXRodW1iLWVsOm50aC1jaGlsZCgxKSIpLmNsaWNrKCk7CgogIG9rKGVsLnNwZWN0cnVtKCJjb250YWluZXIiKS5oYXNDbGFzcygnc3AtaGlkZGVuJyksICJwYWxldHRlIGlzIHN0aWxsIGhpZGRlbiBhZnRlciBjb2xvciBzZWxlY3Rpb24iKTsKICBlbC5zcGVjdHJ1bSgiZGVzdHJveSIpOwp9KTsKCnRlc3QoICJMb2NhbCBTdG9yYWdlIElzIExpbWl0ZWQgIiwgZnVuY3Rpb24oKSB7CgogIHZhciBlbCA9ICQoIjxpbnB1dCBpZD0nc3BlYycgdmFsdWU9J3JlZCcgLz4iKS5zcGVjdHJ1bSh7CiAgICBsb2NhbFN0b3JhZ2VLZXk6ICJzcGVjdHJ1bS50ZXN0cyIsCiAgICBwYWxldHRlOiBbWyIjZmYwIiwgIiMwZmYiXV0sCiAgICBtYXhTZWxlY3Rpb25TaXplOiAzCiAgfSk7CgogIGVsLnNwZWN0cnVtKCJzZXQiLCAiI2YwMCIpOwogIGVsLnNwZWN0cnVtKCJzZXQiLCAiI2UwMCIpOwogIGVsLnNwZWN0cnVtKCJzZXQiLCAiI2QwMCIpOwogIGVsLnNwZWN0cnVtKCJzZXQiLCAiI2MwMCIpOwogIGVsLnNwZWN0cnVtKCJzZXQiLCAiI2IwMCIpOwogIGVsLnNwZWN0cnVtKCJzZXQiLCAiI2EwMCIpOwoKICBlcXVhbCAoCiAgICBsb2NhbFN0b3JhZ2VbInNwZWN0cnVtLnRlc3RzIl0sCiAgICAicmdiKDIwNCwgMCwgMCk7cmdiKDE4NywgMCwgMCk7cmdiKDE3MCwgMCwgMCkiLAogICAgIkxvY2FsIHN0b3JhZ2UgYXJyYXkgaGFzIGJlZW4gbGltaXRlZCIKICApOwoKICBlbC5zcGVjdHJ1bSgic2V0IiwgIiNmZjAiKTsKICBlbC5zcGVjdHJ1bSgic2V0IiwgIiMwZmYiKTsKCiAgZXF1YWwgKAogICAgbG9jYWxTdG9yYWdlWyJzcGVjdHJ1bS50ZXN0cyJdLAogICAgInJnYigyMDQsIDAsIDApO3JnYigxODcsIDAsIDApO3JnYigxNzAsIDAsIDApIiwKICAgICJMb2NhbCBzdG9yYWdlIGFycmF5IGRpZCBub3QgZ2V0IGNoYW5nZWQgYnkgc2VsZWN0aW5nIHBhbGV0dGUgaXRlbXMiCiAgKTsKICBlbC5zcGVjdHJ1bSgiZGVzdHJveSIpOwoKfSk7Cgptb2R1bGUoIk9wdGlvbnMiKTsKCnRlc3QgKCJhbGxvd0VtcHR5IiwgZnVuY3Rpb24oKSB7CiAgdmFyIGVsID0gJCgiPGlucHV0IHZhbHVlPSdyZWQnIC8+Iikuc3BlY3RydW0oewogICAgYWxsb3dFbXB0eTogdHJ1ZQogIH0pOwogIGVsLnNwZWN0cnVtKCJzZXQiLCBudWxsKTsKICBvayghZWwuc3BlY3RydW0oImdldCIpLCAiaW5wdXRbdHlwZV0gY29sb3IgZG9lcyBub3QgYWxsb3cgbnVsbCB2YWx1ZXMiKTsKICBlbC5zcGVjdHJ1bSgiZGVzdHJveSIpOwoKICBlbCA9ICQoIjxpbnB1dCB2YWx1ZT0ncmVkJyAvPiIpLnNwZWN0cnVtKCk7CiAgZWwuc3BlY3RydW0oInNldCIsIG51bGwpOwogIG9rKGVsLnNwZWN0cnVtKCJnZXQiKSwgImlucHV0W3R5cGVdIGNvbG9yIGRvZXMgbm90IGFsbG93IG51bGwgdmFsdWVzIik7CiAgZWwuc3BlY3RydW0oImRlc3Ryb3kiKTsKfSk7Cgp0ZXN0ICgiY2xpY2tvdXRGaXJlc0NoYW5nZSIsIGZ1bmN0aW9uKCkgewogIHZhciBlbCA9ICQoIjxpbnB1dCB2YWx1ZT0ncmVkJyAvPiIpLnNwZWN0cnVtKHsKICAgIGNsaWNrb3V0RmlyZXNDaGFuZ2U6IGZhbHNlCiAgfSk7CiAgZWwuc3BlY3RydW0oInNob3ciKTsKICBlcXVhbCAoIGVsLnNwZWN0cnVtKCJnZXQiKS50b05hbWUoKSwgInJlZCIsICJDb2xvciBpcyBpbml0aWFsaXplZCIpOwogIGVsLnNwZWN0cnVtKCJzZXQiLCAib3JhbmdlIik7CiAgZXF1YWwgKCBlbC5zcGVjdHJ1bSgiZ2V0IikudG9OYW1lKCksICJvcmFuZ2UiLCAiQ29sb3IgaXMgc2V0Iik7CiAgJChkb2N1bWVudCkuY2xpY2soKTsKICBlcXVhbCAoIGVsLnNwZWN0cnVtKCJnZXQiKS50b05hbWUoKSwgInJlZCIsICJDb2xvciBpcyByZXZlcnRlZCBhZnRlciBjbGlja2luZyAnY2FuY2VsJyIpOwogIGVsLnNwZWN0cnVtKCJkZXN0cm95Iik7CgogIC8vIFRyeSBhZ2FpbiB3aXRoIGRlZmF1bHQgYmVoYXZpb3IgKGNsaWNrb3V0RmlyZXNDaGFuZ2UgPSB0cnVlKQogIGVsID0gJCgiPGlucHV0IHZhbHVlPSdyZWQnIC8+Iikuc3BlY3RydW0oKTsKICBlbC5zcGVjdHJ1bSgic2hvdyIpOwogIGVxdWFsICggZWwuc3BlY3RydW0oImdldCIpLnRvTmFtZSgpLCAicmVkIiwgIkNvbG9yIGlzIGluaXRpYWxpemVkIik7CiAgZWwuc3BlY3RydW0oInNldCIsICJvcmFuZ2UiKTsKICBlcXVhbCAoIGVsLnNwZWN0cnVtKCJnZXQiKS50b05hbWUoKSwgIm9yYW5nZSIsICJDb2xvciBpcyBzZXQiKTsKICAkKGRvY3VtZW50KS5jbGljaygpOwogIGVxdWFsICggZWwuc3BlY3RydW0oImdldCIpLnRvTmFtZSgpLCAib3JhbmdlIiwgIkNvbG9yIGlzIGNoYW5nZWQgYWZ0ZXIgY2xpY2tpbmcgb3V0Iik7CiAgZWwuc3BlY3RydW0oImRlc3Ryb3kiKTsKfSk7Cgp0ZXN0ICgicmVwbGFjZXJDbGFzc05hbWUiLCBmdW5jdGlvbigpIHsKICB2YXIgZWwgPSAkKCI8aW5wdXQgLz4iKS5hcHBlbmRUbygiYm9keSIpLnNwZWN0cnVtKHsKICAgIHJlcGxhY2VyQ2xhc3NOYW1lOiAidGVzdCIKICB9KTsKICBvayAoZWwubmV4dCgiLnNwLXJlcGxhY2VyIikuaGFzQ2xhc3MoInRlc3QiKSwgIlJlcGxhY2VyIGNsYXNzIGhhcyBiZWVuIGFwcGxpZWQiKTsKICBlbC5zcGVjdHJ1bSgiZGVzdHJveSIpLnJlbW92ZSgpOwp9KTsKCnRlc3QgKCJjb250YWluZXJDbGFzc05hbWUiLCBmdW5jdGlvbigpIHsKICB2YXIgZWwgPSAkKCI8aW5wdXQgLz4iKS5hcHBlbmRUbygiYm9keSIpLnNwZWN0cnVtKHsKICAgIGNvbnRhaW5lckNsYXNzTmFtZTogInRlc3QiCiAgfSk7CiAgb2sgKGVsLnNwZWN0cnVtKCJjb250YWluZXIiKS5oYXNDbGFzcygidGVzdCIpLCAiQ29udGFpbmVyIGNsYXNzIGhhcyBiZWVuIGFwcGxpZWQiKTsKICBlbC5zcGVjdHJ1bSgiZGVzdHJveSIpLnJlbW92ZSgpOwp9KTsKCnRlc3QoICJPcHRpb25zIENhbiBCZSBTZXQgYW5kIEdvdHRlbiBQcm9ncmFtbWF0aWNhbGx5IiwgZnVuY3Rpb24oKSB7CgogIHZhciBzcGVjID0gJCgiPGlucHV0IGlkPSdzcGVjJyAvPiIpLnNwZWN0cnVtKHsKICAgIGNvbG9yOiAiI0VDQyIsCiAgICBmbGF0OiB0cnVlLAogICAgc2hvd0lucHV0OiB0cnVlLAogICAgY2xhc3NOYW1lOiAiZnVsbC1zcGVjdHJ1bSIsCiAgICBzaG93SW5pdGlhbDogdHJ1ZSwKICAgIHNob3dQYWxldHRlOiB0cnVlLAogICAgc2hvd1NlbGVjdGlvblBhbGV0dGU6IHRydWUsCiAgICBtYXhQYWxldHRlU2l6ZTogMTAsCiAgICBwcmVmZXJyZWRGb3JtYXQ6ICJoZXgiLAogICAgbG9jYWxTdG9yYWdlS2V5OiAic3BlY3RydW0uZXhhbXBsZSIsCiAgICBwYWxldHRlOiBbWydyZWQnXSwgWydncmVlbiddXQogIH0pOwoKICB2YXIgYWxsT3B0aW9ucyA9IHNwZWMuc3BlY3RydW0oIm9wdGlvbiIpOwogIGVxdWFsICggYWxsT3B0aW9ucy5mbGF0LCB0cnVlLCAiRmV0Y2hpbmcgYWxsIG9wdGlvbnMgcHJvdmlkZXMgYWNjdXJhdGUgdmFsdWUiKTsKCiAgdmFyIHNpbmdsZU9wdGlvbiA9IHNwZWMuc3BlY3RydW0oIm9wdGlvbiIsICJjbGFzc05hbWUiKTsKICBlcXVhbCAoIHNpbmdsZU9wdGlvbiwgImZ1bGwtc3BlY3RydW0iLCAiRmV0Y2hpbmcgYSBzaW5nbGUgb3B0aW9uIHJldHVybnMgdGhhdCB2YWx1ZSIpOwoKICBzcGVjLnNwZWN0cnVtKCJvcHRpb24iLCAiY2xhc3NOYW1lIiwgImNoYW5nZWQiKTsKICBzaW5nbGVPcHRpb24gPSBzcGVjLnNwZWN0cnVtKCJvcHRpb24iLCAiY2xhc3NOYW1lIik7CiAgZXF1YWwgKCBzaW5nbGVPcHRpb24sICJjaGFuZ2VkIiwgIkNoYW5naW5nIGFuIG9wdGlvbiB0aGVuIGZldGNoaW5nIGl0IGlzIHVwZGF0ZWQiKTsKCgogIHZhciBudW1QYWxldHRlRWxlbWVudHMgPSBzcGVjLnNwZWN0cnVtKCJjb250YWluZXIiKS5maW5kKCIuc3AtcGFsZXR0ZS1yb3c6bm90KC5zcC1wYWxldHRlLXJvdy1zZWxlY3Rpb24pIC5zcC10aHVtYi1lbCIpLmxlbmd0aDsKICBlcXVhbCAobnVtUGFsZXR0ZUVsZW1lbnRzLCAyLCAiVHdvIHBhbGV0dGUgZWxlbWVudHMgdG8gc3RhcnQiKTsKICBzcGVjLnNwZWN0cnVtKCJvcHRpb24iLCAicGFsZXR0ZSIsIFtbJ3JlZCddLCBbJ2dyZWVuJ10sIFsnYmx1ZSddXSk7CiAgdmFyIG9wdFBhbGV0dGUgPSBzcGVjLnNwZWN0cnVtKCJvcHRpb24iLCAicGFsZXR0ZSIpOwogIGRlZXBFcXVhbCAob3B0UGFsZXR0ZSwgW1sncmVkJ10sIFsnZ3JlZW4nXSwgWydibHVlJ11dLCAiQ2hhbmdpbmcgYW4gb3B0aW9uIHRoZW4gZmV0Y2hpbmcgaXQgaXMgdXBkYXRlZCIpOwogIG51bVBhbGV0dGVFbGVtZW50cyA9IHNwZWMuc3BlY3RydW0oImNvbnRhaW5lciIpLmZpbmQoIi5zcC1wYWxldHRlLXJvdzpub3QoLnNwLXBhbGV0dGUtcm93LXNlbGVjdGlvbikgLnNwLXRodW1iLWVsIikubGVuZ3RoOwogIGVxdWFsIChudW1QYWxldHRlRWxlbWVudHMsIDMsICJUaHJlZSBwYWxldHRlIGVsZW1lbnRzIGFmdGVyIHVwZGF0aW5nIik7CgogIHZhciBhcHBlbmRUb0RlZmF1bHQgPSAkKCI8aW5wdXQgLz4iKS5zcGVjdHJ1bSh7CgogIH0pOwoKICB2YXIgY29udGFpbmVyID0gJCgiPGRpdiBpZD0nYycgLz4iKS5hcHBlbmRUbygiYm9keSIpOwogIHZhciBhcHBlbmRUb090aGVyID0gJCgiPGlucHV0IC8+Iikuc3BlY3RydW0oewogICAgYXBwZW5kVG86IGNvbnRhaW5lcgogIH0pOwoKICB2YXIgYXBwZW5kVG9QYXJlbnQgPSAkKCI8aW5wdXQgLz4iKS5hcHBlbmRUbygiI2MiKS5zcGVjdHJ1bSh7CiAgICBhcHBlbmRUbzogInBhcmVudCIKICB9KTsKCgogIHZhciBhcHBlbmRUb090aGVyRmxhdCA9ICQoIjxpbnB1dCAvPiIpLnNwZWN0cnVtKHsKICAgIGFwcGVuZFRvOiBjb250YWluZXIsCiAgICBmbGF0OiB0cnVlCiAgfSk7CgogIGVxdWFsICggYXBwZW5kVG9EZWZhdWx0LnNwZWN0cnVtKCJjb250YWluZXIiKS5wYXJlbnQoKVswXSwgZG9jdW1lbnQuYm9keSwgIkFwcGVuZGVkIHRvIGJvZHkgYnkgZGVmYXVsdCIpOwoKICBlcXVhbCAoIGFwcGVuZFRvT3RoZXIuc3BlY3RydW0oImNvbnRhaW5lciIpLnBhcmVudCgpWzBdLCBjb250YWluZXJbMF0sICJDYW4gYmUgYXBwZW5kZWQgdG8gYW5vdGhlciBlbGVtZW50Iik7CgogIGVxdWFsICggYXBwZW5kVG9PdGhlckZsYXQuc3BlY3RydW0oImNvbnRhaW5lciIpLnBhcmVudCgpWzBdLCAkKGFwcGVuZFRvT3RoZXJGbGF0KS5wYXJlbnQoKVswXSwgIkZsYXQgQ0FOTk9UIGJlIGFwcGVuZGVkIHRvIGFub3RoZXIgZWxlbWVudCwgd2lsbCBiZSBzYW1lIGFzIGlucHV0Iik7CgogIGVxdWFsICggYXBwZW5kVG9QYXJlbnQuc3BlY3RydW0oImNvbnRhaW5lciIpLnBhcmVudCgpWzBdLCBjb250YWluZXJbMF0sICJQYXNzaW5nICdwYXJlbnQnIHRvIGFwcGVuZFRvIHdvcmtzIGFzIGV4cGVjdGVkIik7CgoKICAvLyBJc3N1ZSAjNzAgLSBodHRwczovL2dpdGh1Yi5jb20vYmdyaW5zL3NwZWN0cnVtL2lzc3Vlcy83MAogIGVxdWFsIChzcGVjLnNwZWN0cnVtKCJvcHRpb24iLCAic2hvd1BhbGV0dGUiKSwgdHJ1ZSwgInNob3dQYWxldHRlIGlzIHRydWUgYnkgZGVmYXVsdCIpOwogIHNwZWMuc3BlY3RydW0oIm9wdGlvbiIsICJzaG93UGFsZXR0ZSIsIGZhbHNlKTsKCiAgZXF1YWwgKHNwZWMuc3BlY3RydW0oIm9wdGlvbiIsICJzaG93UGFsZXR0ZSIpLCBmYWxzZSwgInNob3dQYWxldHRlIGlzIGZhbHNlIGFmdGVyIHNldHRpbmcgc2hvd1BhbGV0dGUiKTsKICBzcGVjLnNwZWN0cnVtKCJvcHRpb24iLCAic2hvd1BhbGV0dGVPbmx5IiwgdHJ1ZSk7CgogIGVxdWFsIChzcGVjLnNwZWN0cnVtKCJvcHRpb24iLCAic2hvd1BhbGV0dGVPbmx5IiksIHRydWUsICJzaG93UGFsZXR0ZU9ubHkgaXMgdHJ1ZSBhZnRlciBzZXR0aW5nIHNob3dQYWxldHRlT25seSIpOwogIGVxdWFsIChzcGVjLnNwZWN0cnVtKCJvcHRpb24iLCAic2hvd1BhbGV0dGUiKSwgdHJ1ZSwgInNob3dQYWxldHRlIGlzIHRydWUgYWZ0ZXIgc2V0dGluZyBzaG93UGFsZXR0ZU9ubHkiKTsKCiAgc3BlYy5zcGVjdHJ1bSgiZGVzdHJveSIpOwogIGFwcGVuZFRvRGVmYXVsdC5zcGVjdHJ1bSgiZGVzdHJveSIpOwogIGFwcGVuZFRvT3RoZXIuc3BlY3RydW0oImRlc3Ryb3kiKTsKICBhcHBlbmRUb090aGVyRmxhdC5zcGVjdHJ1bSgiZGVzdHJveSIpOwogIGFwcGVuZFRvUGFyZW50LnNwZWN0cnVtKCJkZXN0cm95IikucmVtb3ZlKCk7CiAgZGVsZXRlIHdpbmRvdy5sb2NhbFN0b3JhZ2VbInNwZWN0cnVtLmV4YW1wbGUiXTsKICBjb250YWluZXIucmVtb3ZlKCk7Cn0pOwoKdGVzdCAoIlNob3cgSW5wdXQgd29ya3MgYXMgZXhwZWN0ZWQiLCBmdW5jdGlvbigpIHsKICB2YXIgZWwgPSAkKCI8aW5wdXQgLz4iKS5zcGVjdHJ1bSh7CiAgICBzaG93SW5wdXQ6IHRydWUsCiAgICBjb2xvcjogInJlZCIKICB9KTsKICB2YXIgaW5wdXQgPSBlbC5zcGVjdHJ1bSgiY29udGFpbmVyIikuZmluZCgiLnNwLWlucHV0Iik7CgogIGVxdWFsKGlucHV0LnZhbCgpLCAicmVkIiwgIklucHV0IGlzIHNldCB0byBjb2xvciBieSBkZWZhdWx0Iik7CiAgaW5wdXQudmFsKCIiKS50cmlnZ2VyKCJjaGFuZ2UiKTsKCiAgb2soaW5wdXQuaGFzQ2xhc3MoInNwLXZhbGlkYXRpb24tZXJyb3IiKSwgIklucHV0IGhhcyB2YWxpZGF0aW9uIGVycm9yIGNsYXNzIGFmdGVyIGJlaW5nIGVtcHRpZWQuIik7CgogIGlucHV0LnZhbCgicmVkIikudHJpZ2dlcigiY2hhbmdlIik7CgogIG9rKCFpbnB1dC5oYXNDbGFzcygic3AtdmFsaWRhdGlvbi1lcnJvciIpLCAiSW5wdXQgZG9lcyBub3QgaGF2ZSB2YWxpZGF0aW9uIGVycm9yIGNsYXNzIGFmdGVyIGJlaW5nIHJlc2V0IHRvIG9yaWdpbmFsIGNvbG9yLiIpOwoKICBlcXVhbCAoZWwuc3BlY3RydW0oImdldCIpLnRvSGV4U3RyaW5nKCksICIjZmYwMDAwIiwgIkNvbG9yIGlzIHN0aWxsIHJlZCIpOwogIGVsLnNwZWN0cnVtKCJkZXN0cm95Iik7Cn0pOwoKdGVzdCAoIlRvZ2dsZSBQaWNrZXIgQXJlYSBidXR0b24gd29ya3MgYXMgZXhwZWN0ZWQiLCBmdW5jdGlvbigpIHsKICB2YXIgZGl2ID0gJCgiPGRpdiBzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7IHJpZ2h0OjA7IGhlaWdodDoyMHB4OyB3aWR0aDoxNTBweCc+IikuYXBwZW5kVG8oJ2JvZHknKS5zaG93KCksCiAgICAgIGVsID0gJCgiPGlucHV0IC8+IikuYXBwZW5kVG8oZGl2KTsKICBlbC5zcGVjdHJ1bSh7CiAgICBzaG93SW5wdXQ6IHRydWUsCglzaG93UGFsZXR0ZU9ubHk6IHRydWUsCiAgICB0b2dnbGVQYWxldHRlT25seTogdHJ1ZSwKICAgIGNvbG9yOiAicmVkIgogIH0pOwoKICB2YXIgc3BlY3RydW0gPSBlbC5zcGVjdHJ1bSgiY29udGFpbmVyIikuc2hvdygpLAogICAgICB0b2dnbGUgPSBzcGVjdHJ1bS5maW5kKCIuc3AtcGFsZXR0ZS10b2dnbGUiKSwKICAgICAgcGlja2VyID0gc3BlY3RydW0uZmluZCgiLnNwLXBpY2tlci1jb250YWluZXIiKSwKICAgICAgcGFsZXR0ZSA9IHNwZWN0cnVtLmZpbmQoIi5zcC1wYWxldHRlLWNvbnRhaW5lciIpOwoKICAvLyBPcGVuIHRoZSBDb2xvcnBpY2tlcgogIGVsLnNwZWN0cnVtKCJzaG93Iik7CiAgZXF1YWwocGlja2VyLmlzKCI6aGlkZGVuIiksIHRydWUsICJUaGUgcGlja2VyIGFyZWEgaXMgaGlkZGVuIGJ5IGRlZmF1bHQuIik7CiAgb2soc3BlY3RydW0uaGFzQ2xhc3MoInNwLXBhbGV0dGUtb25seSIpLCAiVGhlICdwYWxldHRlLW9ubHknIGNsYXNzIGlzIGVuYWJsZWQuIik7CgogIC8vIENsaWNrIHRoZSBQaWNrZXIgYXJlYSBUb2dnbGUgYnV0dG9uIHRvIHNob3cgdGhlIFBpY2tlcgogIHRvZ2dsZS5jbGljaygpOwoKICBlcXVhbChwaWNrZXIuaXMoIjpoaWRkZW4iKSwgZmFsc2UsICJBZnRlciB0b2dnbGluZywgdGhlIHBpY2tlciBhcmVhIGlzIHZpc2libGUuIik7CiAgb2soIXNwZWN0cnVtLmhhc0NsYXNzKCJzcC1wYWxldHRlLW9ubHkiKSwgIlRoZSAncGFsZXR0ZS1vbmx5JyBjbGFzcyBpcyBkaXNhYmxlZC4iKTsKICBlcXVhbChNYXRoLnJvdW5kKHBpY2tlci5vZmZzZXQoKS50b3ApLCBNYXRoLnJvdW5kKHBhbGV0dGUub2Zmc2V0KCkudG9wKSwgIlRoZSBwaWNrZXIgYXJlYSBpcyBuZXh0IHRvIHRoZSBwYWxldHRlLiIpOwoKICAvLyBDbGljayB0aGUgdG9nZ2xlIGFnYWluIHRvIGhpZGUgdGhlIHBpY2tlcgogIHRvZ2dsZS50cmlnZ2VyKCJjbGljayIpOwoKICBlcXVhbChwaWNrZXIuaXMoIjpoaWRkZW4iKSwgdHJ1ZSwgIkFmdGVyIHRvZ2dsaW5nIGFnYWluLCB0aGUgcGlja2VyIGFyZWEgaXMgaGlkZGVuLiIpOwogIG9rKHNwZWN0cnVtLmhhc0NsYXNzKCJzcC1wYWxldHRlLW9ubHkiKSwgIkFuZCB0aGUgJ3BhbGV0dGUtb25seScgY2xhc3MgaXMgZW5hYmxlZC4iKTsKCiAgLy8gQ2xlYW51cAogIGVsLnNwZWN0cnVtKCJoaWRlIik7CiAgZWwuc3BlY3RydW0oImRlc3Ryb3kiKTsKICBlbC5yZW1vdmUoKTsKICBkaXYucmVtb3ZlKCk7Cn0pOwoKdGVzdCAoIlRvb2x0aXAgaXMgZm9ybWF0dGVkIGJhc2VkIG9uIHByZWZlcnJlZCBmb3JtYXQiLCBmdW5jdGlvbigpIHsKICB2YXIgZWwgPSAkKCI8aW5wdXQgLz4iKS5zcGVjdHJ1bSh7CiAgICBzaG93SW5wdXQ6IHRydWUsCiAgICBjb2xvcjogInJlZCIsCiAgICBzaG93UGFsZXR0ZTogdHJ1ZSwKICAgIHBhbGV0dGU6IFtbInJlZCIsICJyZ2JhKDI1NSwgMjU1LCAyNTUsIC41KSIsICJyZ2IoMCwgMCwgMjU1KSJdXQogIH0pOwogIGVsLnNwZWN0cnVtKCJzaG93Iik7CgogIGZ1bmN0aW9uIGdldFRpdGxlc1N0cmluZygpIHsKICAgIHJldHVybiBlbC5zcGVjdHJ1bSgiY29udGFpbmVyIikuZmluZCgiLnNwLXRodW1iLWVsIikubWFwKGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoInRpdGxlIik7CiAgICB9KS50b0FycmF5KCkuam9pbigiICIpOwogIH0KCiAgZXF1YWwgKGdldFRpdGxlc1N0cmluZygpLCAicmdiKDI1NSwgMCwgMCkgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpIHJnYigwLCAwLCAyNTUpIiwgIlRpdGxlcyB1c2UgcmdiIGZvcm1hdCBieSBkZWZhdWx0Iik7CgogIGVsLnNwZWN0cnVtKCJvcHRpb24iLCAicHJlZmVycmVkRm9ybWF0IiwgImhleCIpOwogIGVxdWFsIChnZXRUaXRsZXNTdHJpbmcoKSwgIiNmZjAwMDAgI2ZmZmZmZiAjMDAwMGZmIiwgIlRpdGxlcyBhcmUgdXBkYXRlZCB0byBoZXgiKTsKICBlcXVhbCAoZWwuc3BlY3RydW0oImdldCIpLnRvU3RyaW5nKCksICIjZmYwMDAwIiwgIlZhbHVlJ3MgZm9ybWF0IGlzIHVwZGF0ZWQiKTsKCiAgZWwuc3BlY3RydW0oIm9wdGlvbiIsICJwcmVmZXJyZWRGb3JtYXQiLCAiaGV4NiIpOwogIGVxdWFsIChnZXRUaXRsZXNTdHJpbmcoKSwgIiNmZjAwMDAgI2ZmZmZmZiAjMDAwMGZmIiwgIlRpdGxlcyBhcmUgdXBkYXRlZCB0byBoZXg2Iik7CiAgZXF1YWwgKGVsLnNwZWN0cnVtKCJnZXQiKS50b1N0cmluZygpLCAiI2ZmMDAwMCIsICJWYWx1ZSdzIGZvcm1hdCBpcyB1cGRhdGVkIik7CgogIGVsLnNwZWN0cnVtKCJvcHRpb24iLCAicHJlZmVycmVkRm9ybWF0IiwgImhleDMiKTsKICBlcXVhbCAoZ2V0VGl0bGVzU3RyaW5nKCksICIjZjAwICNmZmYgIzAwZiIsICJUaXRsZXMgYXJlIHVwZGF0ZWQgdG8gaGV4MyIpOwogIGVxdWFsIChlbC5zcGVjdHJ1bSgiZ2V0IikudG9TdHJpbmcoKSwgIiNmMDAiLCAiVmFsdWUncyBmb3JtYXQgaXMgdXBkYXRlZCIpOwoKICBlbC5zcGVjdHJ1bSgib3B0aW9uIiwgInByZWZlcnJlZEZvcm1hdCIsICJuYW1lIik7CiAgZXF1YWwgKGdldFRpdGxlc1N0cmluZygpLCAicmVkICNmZmZmZmYgYmx1ZSIsICJUaXRsZXMgYXJlIHVwZGF0ZWQgdG8gbmFtZSIpOwogIGVxdWFsIChlbC5zcGVjdHJ1bSgiZ2V0IikudG9TdHJpbmcoKSwgInJlZCIsICJWYWx1ZSdzIGZvcm1hdCBpcyB1cGRhdGVkIik7CgogIGVsLnNwZWN0cnVtKCJvcHRpb24iLCAicHJlZmVycmVkRm9ybWF0IiwgImhzdiIpOwogIGVxdWFsIChnZXRUaXRsZXNTdHJpbmcoKSwgImhzdigwLCAxMDAlLCAxMDAlKSBoc3ZhKDAsIDAlLCAxMDAlLCAwLjUpIGhzdigyNDAsIDEwMCUsIDEwMCUpIiwgIlRpdGxlcyBhcmUgdXBkYXRlZCB0byBoc3YiKTsKICBlcXVhbCAoZWwuc3BlY3RydW0oImdldCIpLnRvU3RyaW5nKCksICJoc3YoMCwgMTAwJSwgMTAwJSkiLCAiVmFsdWUncyBmb3JtYXQgaXMgdXBkYXRlZCIpOwoKICBlbC5zcGVjdHJ1bSgib3B0aW9uIiwgInByZWZlcnJlZEZvcm1hdCIsICJoc2wiKTsKICBlcXVhbCAoZ2V0VGl0bGVzU3RyaW5nKCksICJoc2woMCwgMTAwJSwgNTAlKSBoc2xhKDAsIDAlLCAxMDAlLCAwLjUpIGhzbCgyNDAsIDEwMCUsIDUwJSkiLCAiVGl0bGVzIGFyZSB1cGRhdGVkIHRvIGhzbCIpOwogIGVxdWFsIChlbC5zcGVjdHJ1bSgiZ2V0IikudG9TdHJpbmcoKSwgImhzbCgwLCAxMDAlLCA1MCUpIiwgIlZhbHVlJ3MgZm9ybWF0IGlzIHVwZGF0ZWQiKTsKCiAgZWwuc3BlY3RydW0oIm9wdGlvbiIsICJwcmVmZXJyZWRGb3JtYXQiLCAicmdiIik7CiAgZXF1YWwgKGdldFRpdGxlc1N0cmluZygpLCAicmdiKDI1NSwgMCwgMCkgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpIHJnYigwLCAwLCAyNTUpIiwgIlRpdGxlcyBhcmUgdXBkYXRlZCB0byByZ2IiKTsKICBlcXVhbCAoZWwuc3BlY3RydW0oImdldCIpLnRvU3RyaW5nKCksICJyZ2IoMjU1LCAwLCAwKSIsICJWYWx1ZSdzIGZvcm1hdCBpcyB1cGRhdGVkIik7CgogIGVsLnNwZWN0cnVtKCJkZXN0cm95Iik7Cn0pOwoKbW9kdWxlKCJNZXRob2RzIik7Cgp0ZXN0KCAiTWV0aG9kcyB3b3JrIGFzIGRlc2NyaWJlZCIsIGZ1bmN0aW9uKCkgewogIHZhciBlbCA9ICQoIjxpbnB1dCBpZD0nc3BlYycgLz4iKS5zcGVjdHJ1bSgpOwoKICAvLyBNZXRob2QgLSBzaG93CiAgZWwuc3BlY3RydW0oInNob3ciKTsKICBvayAoZWwuc3BlY3RydW0oImNvbnRhaW5lciIpLmlzKCI6dmlzaWJsZSIpLCAiU3BlY3RydW0gaXMgdmlzaWJsZSIpOwoKICAvLyBNZXRob2QgLSBoaWRlCiAgZWwuc3BlY3RydW0oImhpZGUiKTsKICBvayAoZWwuc3BlY3RydW0oImNvbnRhaW5lciIpLm5vdCgiOnZpc2libGUiKSwgIlNwZWN0cnVtIGlzIG5vIGxvbmdlciB2aXNpYmxlIik7CgogIC8vIE1ldGhvZCAtIHRvZ2dsZQogIGVsLnNwZWN0cnVtKCJ0b2dnbGUiKTsKICBvayAoZWwuc3BlY3RydW0oImNvbnRhaW5lciIpLmlzKCI6dmlzaWJsZSIpLCAiU3BlY3RydW0gaXMgdmlzaWJsZSBhZnRlciB0b2dnbGUiKTsKCiAgZWwuc3BlY3RydW0oInRvZ2dsZSIpOwogIG9rIChlbC5zcGVjdHJ1bSgiY29udGFpbmVyIikubm90KCI6dmlzaWJsZSIpLCAiU3BlY3RydW0gaXMgbm8gbG9uZ2VyIHZpc2libGUgYWZ0ZXIgdG9nZ2xlIik7CgogIC8vIE1ldGhvZCAtIHNldCAvIGdldAogIGVsLnNwZWN0cnVtKCJzZXQiLCAib3JhbmdlIik7CiAgdmFyIGNvbG9yID0gZWwuc3BlY3RydW0oImdldCIsICJjb2xvciIpOwoKICBvayAoY29sb3IudG9IZXhTdHJpbmcoKSA9PSAiI2ZmYTUwMCIsICJDb2xvciBoYXMgYmVlbiBzZXQgYW5kIGdvdHRlbiBhcyBoZXgiKTsKICBvayAoY29sb3IudG9OYW1lKCkgPT0gIm9yYW5nZSIsICJDb2xvciBoYXMgYmVlbiBzZXQgYW5kIGdvdHRlbiBhcyBuYW1lIik7CiAgb2sgKGNvbG9yLnRvSHN2U3RyaW5nKCkgPT0gImhzdigzOSwgMTAwJSwgMTAwJSkiLCAiQ29sb3IgaGFzIGJlZW4gc2V0IGFuZCBnb3R0ZW4gYXMgaHN2Iik7CiAgb2sgKGNvbG9yLnRvUmdiU3RyaW5nKCkgPT0gInJnYigyNTUsIDE2NSwgMCkiLCAiQ29sb3IgaGFzIGJlZW4gc2V0IGFuZCBnb3R0ZW4gYXMgcmdiIik7CiAgb2sgKGNvbG9yLnRvSHNsU3RyaW5nKCkgPT0gImhzbCgzOSwgMTAwJSwgNTAlKSIsICJDb2xvciBoYXMgYmVlbiBzZXQgYW5kIGdvdHRlbiBhcyBoc2wiKTsKCiAgLy8gTWV0aG9kIC0gY29udGFpbmVyCiAgb2sgKGVsLnNwZWN0cnVtKCJjb250YWluZXIiKS5oYXNDbGFzcygic3AtY29udGFpbmVyIiksICJDb250YWluZXIgY2FuIGJlIHJldHJpZXZlZCIpOwoKICAvLyBNZXRob2QgLSBkaXNhYmxlCiAgZWwuc3BlY3RydW0oImRpc2FibGUiKTsKICBvayAoZWwuaXMoIjpkaXNhYmxlZCIpICwgIkNhbiBiZSBkaXNhYmxlZCIpOwoKICBlbC5zcGVjdHJ1bSgic2hvdyIpOwogIG9rIChlbC5ub3QoIjp2aXNpYmxlIikgLCAiQ2Fubm90IHNob3cgd2hlbiBkaXNhYmxlZCIpOwoKICAvLyBNZXRob2QgLSBlbmFibGUKICBlbC5zcGVjdHJ1bSgiZW5hYmxlIik7CiAgb2sgKCFlbC5pcygiOmRpc2FibGVkIikgLCAiQ2FuIGJlIGVuYWJsZWQiKTsKCiAgLy8gTWV0aG9kIC0gcmVmbG93CiAgZWwuc3BlY3RydW0oInJlZmxvdyIpOwoKICAvLyBNZXRob2QgLSB0aHJvdyBleGNlcHRpb24gd2hlbiBub3QgZXhpc3RpbmcKICByYWlzZXMoZnVuY3Rpb24oKSB7CiAgICBlbC5zcGVjdHJ1bSgibm8gbWV0aG9kIik7CiAgfSwgIkV4cGVjdGluZyBleGNlcHRpb24gdG8gYmUgdGhyb3duIHdoZW4gY2FsbGluZyB3aXRoIG5vIG1ldGhvZCIpOwoKICAvLyBNZXRob2QgLSBkZXN0cm95CiAgZWwuc3BlY3RydW0oImRlc3Ryb3kiKTsKCiAgZXF1YWwgKGVsLnNwZWN0cnVtKCJjb250YWluZXIiKSwgZWwgLCAiTm8gdXNhZ2UgYWZ0ZXIgYmVpbmcgZGVzdHJveWVkIik7CiAgZXF1YWwgKGVsLnNwZWN0cnVtKCJnZXQiKSwgZWwgLCAiTm8gdXNhZ2UgYWZ0ZXIgYmVpbmcgZGVzdHJveWVkIik7CgogIGVsLnNwZWN0cnVtKCJkZXN0cm95Iik7Cn0pOwoKLy8gaHR0cHM6Ly9naXRodWIuY29tL2Jncmlucy9zcGVjdHJ1bS9pc3N1ZXMvOTcKdGVzdCggIkNoYW5nZSBldmVudHMgZmlyZSBhcyBkZXNjcmliZWQiICwgZnVuY3Rpb24oKSB7CgogIGV4cGVjdCgwKTsKICB2YXIgaW5wdXQgPSAkKCI8aW5wdXQgLz4iKTsKCiAgaW5wdXQub24oImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogICAgb2soZmFsc2UsICJDaGFuZ2Ugc2hvdWxkIG5vdCBiZSBmaXJlZCBpbnNpZGUgb2YgaW5wdXQgY2hhbmdlIik7CiAgfSk7CgogIGlucHV0LnNwZWN0cnVtKHsKICAgIGNvbG9yOiAicmVkIiwKICAgIGNoYW5nZTogZnVuY3Rpb24oKSB7CiAgICAgIG9rIChmYWxzZSwgIkNoYW5nZSBzaG91bGQgbm90IGJlIGZpcmVkIGluc2lkZSBvZiBzcGVjdHJ1bSBjYWxsYmFjayIpOwogICAgfQogIH0pOwoKICBpbnB1dC5zcGVjdHJ1bSgic2V0IiwgIm9yYW5nZSIpOwoKfSk7Cgp0ZXN0KCJUaGUgc2VsZWN0ZWRQYWxldHRlIHNob3VsZCBiZSB1cGRhdGVkIGluIGVhY2ggc3BlY3RydW0gaW5zdGFuY2UsIHdoZW4gc3RvcmFnZUtleXMgYXJlIGlkZW50aWNhbC4iLCBmdW5jdGlvbiAoKSB7CgogIGRlbGV0ZSB3aW5kb3cubG9jYWxTdG9yYWdlWyJzcGVjdHJ1bS50ZXN0cyJdOwoKICB2YXIgY29sb3JUb0Nob29zZSA9ICJyZ2IoMCwgMjQ0LCAwKSI7CiAgdmFyIGZpcnN0RWwgPSAkKCI8aW5wdXQgaWQ9J2ZpcnN0RWwnIHZhbHVlPSdyZWQnIC8+Iikuc3BlY3RydW0oewogICAgc2hvd1BhbGV0dGU6IHRydWUsCiAgICBsb2NhbFN0b3JhZ2VLZXk6ICJzcGVjdHJ1bS50ZXN0cyIKICB9KTsKICAgIHZhciBzZWNvbmRFbCA9ICQoIjxpbnB1dCBpZD0nc2Vjb25kRWwnIHZhbHVlPSdibHVlJyAvPiIpLnNwZWN0cnVtKHsKICAgIHNob3dQYWxldHRlOiB0cnVlLAogICAgbG9jYWxTdG9yYWdlS2V5OiAic3BlY3RydW0udGVzdHMiCiAgfSk7CgogIGZpcnN0RWwuc3BlY3RydW0oInNldCIsIGNvbG9yVG9DaG9vc2UpOwoKICBzZWNvbmRFbC5zcGVjdHJ1bSgidG9nZ2xlIik7CgogIHZhciBzZWxlY3RlZENvbG9yID0gc2Vjb25kRWwuc3BlY3RydW0oImNvbnRhaW5lciIpLmZpbmQoJ3NwYW5bZGF0YS1jb2xvcj0iJyArIGNvbG9yVG9DaG9vc2UgKyAnIl0nKTsKICBvayhzZWxlY3RlZENvbG9yLmxlbmd0aCA+IDAsICJTZWxlY3RlZCBjb2xvciBpcyBhbHNvIHNob3duIGluIHRoZSBvdGhlcnMgaW5zdGFuY2UncyBwYWxldHRlLiIpOwoKICBkZWxldGUgd2luZG93LmxvY2FsU3RvcmFnZVsic3BlY3RydW0udGVzdHMiXTsKCiAgZmlyc3RFbC5zcGVjdHJ1bSgiZGVzdHJveSIpOwogIHNlY29uZEVsLnNwZWN0cnVtKCJkZXN0cm95Iik7Cn0pOwoKdGVzdCgiVGhlIHNlbGVjdGVkUGFsZXR0ZSBzaG91bGQgbm90IGJlIHVwZGF0ZWQgaW4gc3BlY3RydW0gaW5zdGFuY2VzIHRoYXQgaGF2ZSBkaWZmZXJlbnQgc3RvcmFnZUtleXMuIiwgZnVuY3Rpb24gKCkgewoKICBkZWxldGUgd2luZG93LmxvY2FsU3RvcmFnZVsic3BlY3RydW0udGVzdF8xIl07CiAgZGVsZXRlIHdpbmRvdy5sb2NhbFN0b3JhZ2VbInNwZWN0cnVtLnRlc3RfMiJdOwoKICB2YXIgY29sb3JUb0Nob29zZSA9ICJyZ2IoMCwgMjQ0LCAwKSI7CiAgdmFyIGZpcnN0RWwgPSAkKCI8aW5wdXQgaWQ9J2ZpcnN0RWwnIHZhbHVlPSdyZWQnIC8+Iikuc3BlY3RydW0oewogICAgc2hvd1BhbGV0dGU6IHRydWUsCiAgICBsb2NhbFN0b3JhZ2VLZXk6ICJzcGVjdHJ1bS50ZXN0XzEiCiAgfSk7CiAgICB2YXIgc2Vjb25kRWwgPSAkKCI8aW5wdXQgaWQ9J3NlY29uZEVsJyB2YWx1ZT0nYmx1ZScgLz4iKS5zcGVjdHJ1bSh7CiAgICBzaG93UGFsZXR0ZTogdHJ1ZSwKICAgIGxvY2FsU3RvcmFnZUtleTogInNwZWN0cnVtLnRlc3RfMiIKICB9KTsKCiAgZmlyc3RFbC5zcGVjdHJ1bSgic2V0IiwgY29sb3JUb0Nob29zZSk7CgogIHNlY29uZEVsLnNwZWN0cnVtKCJ0b2dnbGUiKTsKCiAgdmFyIHNlbGVjdGVkQ29sb3IgPSBzZWNvbmRFbC5zcGVjdHJ1bSgiY29udGFpbmVyIikuZmluZCgnc3BhbltkYXRhLWNvbG9yPSInICsgY29sb3JUb0Nob29zZSArICciXScpOwogIG9rKHNlbGVjdGVkQ29sb3IubGVuZ3RoID09PSAwLCAiU2VsZWN0ZWQgY29sb3Igc2hvdWxkIG5vdCBiZSBhdmFpbGFibGUgaW4gaW5zdGFuY2VzIHdpdGggb3RoZXIgc3RvcmFnZUtleS4iKTsKCiAgZmlyc3RFbC5zcGVjdHJ1bSgiZGVzdHJveSIpOwogIHNlY29uZEVsLnNwZWN0cnVtKCJkZXN0cm95Iik7CgogIGRlbGV0ZSB3aW5kb3cubG9jYWxTdG9yYWdlWyJzcGVjdHJ1bS50ZXN0XzEiXTsKICBkZWxldGUgd2luZG93LmxvY2FsU3RvcmFnZVsic3BlY3RydW0udGVzdF8yIl07Cn0pOwoKdGVzdCggIkNhbmNlbGxpbmcgcmV2ZXJ0cyBjb2xvciIsIGZ1bmN0aW9uKCkgewogIHZhciBlbCA9ICQoIjxpbnB1dCB2YWx1ZT0ncmVkJyAvPiIpLnNwZWN0cnVtKCk7CiAgZWwuc3BlY3RydW0oInNob3ciKTsKICBlcXVhbCAoIGVsLnNwZWN0cnVtKCJnZXQiKS50b05hbWUoKSwgInJlZCIsICJDb2xvciBpcyBpbml0aWFsaXplZCIpOwogIGVsLnNwZWN0cnVtKCJzZXQiLCAib3JhbmdlIik7CiAgZXF1YWwgKCBlbC5zcGVjdHJ1bSgiZ2V0IikudG9OYW1lKCksICJvcmFuZ2UiLCAiQ29sb3IgaXMgc2V0Iik7CiAgZWwuc3BlY3RydW0oImNvbnRhaW5lciIpLmZpbmQoIi5zcC1jYW5jZWwiKS5jbGljaygpOwogIGVxdWFsICggZWwuc3BlY3RydW0oImdldCIpLnRvTmFtZSgpLCAicmVkIiwgIkNvbG9yIGlzIHJldmVydGVkIGFmdGVyIGNsaWNraW5nICdjYW5jZWwnIik7CiAgZWwuc3BlY3RydW0oImRlc3Ryb3kiKTsKfSk7Cgp0ZXN0KCAiQ2hvb3NpbmcgdXBkYXRlcyB0aGUgY29sb3IiLCBmdW5jdGlvbigpIHsKICB2YXIgZWwgPSAkKCI8aW5wdXQgdmFsdWU9J3JlZCcgLz4iKS5zcGVjdHJ1bSgpOwogIGVsLnNwZWN0cnVtKCJzaG93Iik7CiAgZXF1YWwgKCBlbC5zcGVjdHJ1bSgiZ2V0IikudG9OYW1lKCksICJyZWQiLCAiQ29sb3IgaXMgaW5pdGlhbGl6ZWQiKTsKICBlbC5zcGVjdHJ1bSgic2V0IiwgIm9yYW5nZSIpOwogIGVxdWFsICggZWwuc3BlY3RydW0oImdldCIpLnRvTmFtZSgpLCAib3JhbmdlIiwgIkNvbG9yIGlzIHNldCIpOwogIGVsLnNwZWN0cnVtKCJjb250YWluZXIiKS5maW5kKCIuc3AtY2hvb3NlIikuY2xpY2soKTsKICBlcXVhbCAoIGVsLnNwZWN0cnVtKCJnZXQiKS50b05hbWUoKSwgIm9yYW5nZSIsICJDb2xvciBpcyBrZXB0IGFmdGVyIGNsaWNraW5nICdjaG9vc2UnIik7CiAgZWwuc3BlY3RydW0oImRlc3Ryb3kiKTsKfSk7Cgp0ZXN0KCAiQ3VzdG9tIG9mZnNldCIsIGZ1bmN0aW9uKCkgewogIHZhciBlbCA9ICQoIjxpbnB1dCB2YWx1ZT0ncmVkJyAvPiIpLnNwZWN0cnVtKCk7CiAgZWwuc3BlY3RydW0oInNob3ciKTsKICBkZWVwRXF1YWwgKGVsLnNwZWN0cnVtKCJjb250YWluZXIiKS5vZmZzZXQoKSwge3RvcDogMCwgbGVmdDogMH0pOwogIGVsLnNwZWN0cnVtKCJoaWRlIik7CiAgZWwuc3BlY3RydW0oIm9mZnNldCIsIHt0b3A6IDEwLCBsZWZ0OiAxMH0pOwogIGVsLnNwZWN0cnVtKCJzaG93Iik7CiAgZGVlcEVxdWFsIChlbC5zcGVjdHJ1bSgiY29udGFpbmVyIikub2Zmc2V0KCksIHt0b3A6IDEwLCBsZWZ0OiAxMH0pOwogIGVsLnNwZWN0cnVtKCJoaWRlIik7CiAgZWwuc3BlY3RydW0oIm9mZnNldCIsIG51bGwpOwogIGVsLnNwZWN0cnVtKCJzaG93Iik7CiAgZGVlcEVxdWFsIChlbC5zcGVjdHJ1bSgiY29udGFpbmVyIikub2Zmc2V0KCksIHt0b3A6IDAsIGxlZnQ6IDB9KTsKICBlbC5zcGVjdHJ1bSgiaGlkZSIpOwogIGVsLnNwZWN0cnVtKCJkZXN0cm95Iik7CgogIHZhciBlbDIgPSAkKCI8aW5wdXQgdmFsdWU9J3JlZCcgLz4iKS5zcGVjdHJ1bSh7CiAgICBvZmZzZXQ6IHsgdG9wOiAxMDAsIGxlZnQ6IDEwMCB9CiAgfSk7CiAgZWwyLnNwZWN0cnVtKCJzaG93Iik7CiAgZGVlcEVxdWFsIChlbDIuc3BlY3RydW0oImNvbnRhaW5lciIpLm9mZnNldCgpLCB7dG9wOiAxMDAsIGxlZnQ6IDEwMH0pOwogIGVsMi5zcGVjdHJ1bSgiaGlkZSIpOwp9KTsK",
    "size": "23772"
}