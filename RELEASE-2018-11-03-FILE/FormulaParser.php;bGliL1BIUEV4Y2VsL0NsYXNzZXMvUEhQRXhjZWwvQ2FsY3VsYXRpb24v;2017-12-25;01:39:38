{
    "namaFile": "lib\/PHPExcel\/Classes\/PHPExcel\/Calculation\/FormulaParser.php",
    "lastUpdate": "2017-12-25+01:39:38.00",
    "contentFile": "PD9waHAKCi8qClBBUlRMWSBCQVNFRCBPTjoKICAgIENvcHlyaWdodCAoYykgMjAwNyBFLiBXLiBCYWNodGFsLCBJbmMuCgogICAgUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzIHNvZnR3YXJlCiAgICBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sCiAgICBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLAogICAgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywKICAgIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgoKICAgICAgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbAogICAgICBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCgogICAgVGhlIHNvZnR3YXJlIGlzIHByb3ZpZGVkICJhcyBpcyIsIHdpdGhvdXQgd2FycmFudHkgb2YgYW55IGtpbmQsIGV4cHJlc3Mgb3IgaW1wbGllZCwgaW5jbHVkaW5nIGJ1dCBub3QKICAgIGxpbWl0ZWQgdG8gdGhlIHdhcnJhbnRpZXMgb2YgbWVyY2hhbnRhYmlsaXR5LCBmaXRuZXNzIGZvciBhIHBhcnRpY3VsYXIgcHVycG9zZSBhbmQgbm9uaW5mcmluZ2VtZW50LiBJbgogICAgbm8gZXZlbnQgc2hhbGwgdGhlIGF1dGhvcnMgb3IgY29weXJpZ2h0IGhvbGRlcnMgYmUgbGlhYmxlIGZvciBhbnkgY2xhaW0sIGRhbWFnZXMgb3Igb3RoZXIgbGlhYmlsaXR5LAogICAgd2hldGhlciBpbiBhbiBhY3Rpb24gb2YgY29udHJhY3QsIHRvcnQgb3Igb3RoZXJ3aXNlLCBhcmlzaW5nIGZyb20sIG91dCBvZiBvciBpbiBjb25uZWN0aW9uIHdpdGggdGhlCiAgICBzb2Z0d2FyZSBvciB0aGUgdXNlIG9yIG90aGVyIGRlYWxpbmdzIGluIHRoZSBzb2Z0d2FyZS4KCiAgICBodHRwOi8vZXdiaS5ibG9ncy5jb20vZGV2ZWxvcHMvMjAwNy8wMy9leGNlbF9mb3JtdWxhX3AuaHRtbAogICAgaHR0cDovL2V3YmkuYmxvZ3MuY29tL2RldmVsb3BzLzIwMDQvMTIvZXhjZWxfZm9ybXVsYV9wLmh0bWwKKi8KCi8qKgogKiBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhUGFyc2VyCiAqCiAqIENvcHlyaWdodCAoYykgMjAwNiAtIDIwMTUgUEhQRXhjZWwKICoKICogVGhpcyBsaWJyYXJ5IGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vcgogKiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljCiAqIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlcgogKiB2ZXJzaW9uIDIuMSBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KICoKICogVGhpcyBsaWJyYXJ5IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUgR05VCiAqIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiAqCiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMKICogTGljZW5zZSBhbG9uZyB3aXRoIHRoaXMgbGlicmFyeTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZQogKiBGb3VuZGF0aW9uLCBJbmMuLCA1MSBGcmFua2xpbiBTdHJlZXQsIEZpZnRoIEZsb29yLCBCb3N0b24sIE1BICAwMjExMC0xMzAxICBVU0EKICoKICogQGNhdGVnb3J5ICAgUEhQRXhjZWwKICogQHBhY2thZ2UgICAgUEhQRXhjZWxfQ2FsY3VsYXRpb24KICogQGNvcHlyaWdodCAgQ29weXJpZ2h0IChjKSAyMDA2IC0gMjAxNSBQSFBFeGNlbCAoaHR0cDovL3d3dy5jb2RlcGxleC5jb20vUEhQRXhjZWwpCiAqIEBsaWNlbnNlICAgIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9vbGQtbGljZW5zZXMvbGdwbC0yLjEudHh0ICAgIExHUEwKICogQHZlcnNpb24gICAgIyNWRVJTSU9OIyMsICMjREFURSMjCiAqLwoKCmNsYXNzIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFQYXJzZXIKewogICAgLyogQ2hhcmFjdGVyIGNvbnN0YW50cyAqLwogICAgY29uc3QgUVVPVEVfRE9VQkxFICA9ICciJzsKICAgIGNvbnN0IFFVT1RFX1NJTkdMRSAgPSAnXCcnOwogICAgY29uc3QgQlJBQ0tFVF9DTE9TRSA9ICddJzsKICAgIGNvbnN0IEJSQUNLRVRfT1BFTiAgPSAnWyc7CiAgICBjb25zdCBCUkFDRV9PUEVOICAgID0gJ3snOwogICAgY29uc3QgQlJBQ0VfQ0xPU0UgICA9ICd9JzsKICAgIGNvbnN0IFBBUkVOX09QRU4gICAgPSAnKCc7CiAgICBjb25zdCBQQVJFTl9DTE9TRSAgID0gJyknOwogICAgY29uc3QgU0VNSUNPTE9OICAgICA9ICc7JzsKICAgIGNvbnN0IFdISVRFU1BBQ0UgICAgPSAnICc7CiAgICBjb25zdCBDT01NQSAgICAgICAgID0gJywnOwogICAgY29uc3QgRVJST1JfU1RBUlQgICA9ICcjJzsKCiAgICBjb25zdCBPUEVSQVRPUlNfU04gICAgICAgICAgICAgPSAiKy0iOwogICAgY29uc3QgT1BFUkFUT1JTX0lORklYICAgICAgICAgPSAiKy0qL14mPT48IjsKICAgIGNvbnN0IE9QRVJBVE9SU19QT1NURklYICAgICA9ICIlIjsKCiAgICAvKioKICAgICAqIEZvcm11bGEKICAgICAqCiAgICAgKiBAdmFyIHN0cmluZwogICAgICovCiAgICBwcml2YXRlICRmb3JtdWxhOwoKICAgIC8qKgogICAgICogVG9rZW5zCiAgICAgKgogICAgICogQHZhciBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW5bXQogICAgICovCiAgICBwcml2YXRlICR0b2tlbnMgPSBhcnJheSgpOwoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgbmV3IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFQYXJzZXIKICAgICAqCiAgICAgKiBAcGFyYW0gICAgIHN0cmluZyAgICAgICAgJHBGb3JtdWxhICAgIEZvcm11bGEgdG8gcGFyc2UKICAgICAqIEB0aHJvd3MgICAgIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0V4Y2VwdGlvbgogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJHBGb3JtdWxhID0gJycpCiAgICB7CiAgICAgICAgLy8gQ2hlY2sgcGFyYW1ldGVycwogICAgICAgIGlmIChpc19udWxsKCRwRm9ybXVsYSkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0V4Y2VwdGlvbigiSW52YWxpZCBwYXJhbWV0ZXIgcGFzc2VkOiBmb3JtdWxhIik7CiAgICAgICAgfQoKICAgICAgICAvLyBJbml0aWFsaXNlIHZhbHVlcwogICAgICAgICR0aGlzLT5mb3JtdWxhID0gdHJpbSgkcEZvcm11bGEpOwogICAgICAgIC8vIFBhcnNlIQogICAgICAgICR0aGlzLT5wYXJzZVRvVG9rZW5zKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgRm9ybXVsYQogICAgICoKICAgICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRGb3JtdWxhKCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmZvcm11bGE7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgVG9rZW4KICAgICAqCiAgICAgKiBAcGFyYW0gICAgIGludCAgICAgICAgJHBJZCAgICBUb2tlbiBpZAogICAgICogQHJldHVybiAgICBzdHJpbmcKICAgICAqIEB0aHJvd3MgIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0V4Y2VwdGlvbgogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0VG9rZW4oJHBJZCA9IDApCiAgICB7CiAgICAgICAgaWYgKGlzc2V0KCR0aGlzLT50b2tlbnNbJHBJZF0pKSB7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+dG9rZW5zWyRwSWRdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93IG5ldyBQSFBFeGNlbF9DYWxjdWxhdGlvbl9FeGNlcHRpb24oIlRva2VuIHdpdGggaWQgJHBJZCBkb2VzIG5vdCBleGlzdC4iKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgVG9rZW4gY291bnQKICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0VG9rZW5Db3VudCgpCiAgICB7CiAgICAgICAgcmV0dXJuIGNvdW50KCR0aGlzLT50b2tlbnMpOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IFRva2VucwogICAgICoKICAgICAqIEByZXR1cm4gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuW10KICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldFRva2VucygpCiAgICB7CiAgICAgICAgcmV0dXJuICR0aGlzLT50b2tlbnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBQYXJzZSB0byB0b2tlbnMKICAgICAqLwogICAgcHJpdmF0ZSBmdW5jdGlvbiBwYXJzZVRvVG9rZW5zKCkKICAgIHsKICAgICAgICAvLyBObyBhdHRlbXB0IGlzIG1hZGUgdG8gdmVyaWZ5IGZvcm11bGFzOyBhc3N1bWVzIGZvcm11bGFzIGFyZSBkZXJpdmVkIGZyb20gRXhjZWwsIHdoZXJlCiAgICAgICAgLy8gdGhleSBjYW4gb25seSBleGlzdCBpZiB2YWxpZDsgc3RhY2sgb3ZlcmZsb3dzL3VuZGVyZmxvd3Mgc3VuayBhcyBudWxscyB3aXRob3V0IGV4Y2VwdGlvbnMuCgogICAgICAgIC8vIENoZWNrIGlmIHRoZSBmb3JtdWxhIGhhcyBhIHZhbGlkIHN0YXJ0aW5nID0KICAgICAgICAkZm9ybXVsYUxlbmd0aCA9IHN0cmxlbigkdGhpcy0+Zm9ybXVsYSk7CiAgICAgICAgaWYgKCRmb3JtdWxhTGVuZ3RoIDwgMiB8fCAkdGhpcy0+Zm9ybXVsYXswfSAhPSAnPScpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8gSGVscGVyIHZhcmlhYmxlcwogICAgICAgICR0b2tlbnMxICAgID0gJHRva2VuczIgICAgID0gJHN0YWNrID0gYXJyYXkoKTsKICAgICAgICAkaW5TdHJpbmcgICAgPSAkaW5QYXRoICAgICA9ICRpblJhbmdlICAgICA9ICRpbkVycm9yID0gZmFsc2U7CiAgICAgICAgJHRva2VuICAgICAgICA9ICRwcmV2aW91c1Rva2VuICAgID0gJG5leHRUb2tlbiAgICA9IG51bGw7CgogICAgICAgICRpbmRleCAgICA9IDE7CiAgICAgICAgJHZhbHVlICAgID0gJyc7CgogICAgICAgICRFUlJPUlMgICAgICAgICAgICAgPSBhcnJheSgiI05VTEwhIiwgIiNESVYvMCEiLCAiI1ZBTFVFISIsICIjUkVGISIsICIjTkFNRT8iLCAiI05VTSEiLCAiI04vQSIpOwogICAgICAgICRDT01QQVJBVE9SU19NVUxUSSAgICAgPSBhcnJheSgiPj0iLCAiPD0iLCAiPD4iKTsKCiAgICAgICAgd2hpbGUgKCRpbmRleCA8ICRmb3JtdWxhTGVuZ3RoKSB7CiAgICAgICAgICAgIC8vIHN0YXRlLWRlcGVuZGVudCBjaGFyYWN0ZXIgZXZhbHVhdGlvbiAob3JkZXIgaXMgaW1wb3J0YW50KQoKICAgICAgICAgICAgLy8gZG91YmxlLXF1b3RlZCBzdHJpbmdzCiAgICAgICAgICAgIC8vIGVtYmVkcyBhcmUgZG91YmxlZAogICAgICAgICAgICAvLyBlbmQgbWFya3MgdG9rZW4KICAgICAgICAgICAgaWYgKCRpblN0cmluZykgewogICAgICAgICAgICAgICAgaWYgKCR0aGlzLT5mb3JtdWxheyRpbmRleH0gPT0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVBhcnNlcjo6UVVPVEVfRE9VQkxFKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCgoJGluZGV4ICsgMikgPD0gJGZvcm11bGFMZW5ndGgpICYmICgkdGhpcy0+Zm9ybXVsYXskaW5kZXggKyAxfSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhUGFyc2VyOjpRVU9URV9ET1VCTEUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICR2YWx1ZSAuPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhUGFyc2VyOjpRVU9URV9ET1VCTEU7CiAgICAgICAgICAgICAgICAgICAgICAgICsrJGluZGV4OwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRpblN0cmluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAkdG9rZW5zMVtdID0gbmV3IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbigkdmFsdWUsIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fVFlQRV9PUEVSQU5ELCBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1NVQlRZUEVfVEVYVCk7CiAgICAgICAgICAgICAgICAgICAgICAgICR2YWx1ZSA9ICIiOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJHZhbHVlIC49ICR0aGlzLT5mb3JtdWxheyRpbmRleH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICArKyRpbmRleDsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBzaW5nbGUtcXVvdGVkIHN0cmluZ3MgKGxpbmtzKQogICAgICAgICAgICAvLyBlbWJlZHMgYXJlIGRvdWJsZQogICAgICAgICAgICAvLyBlbmQgZG9lcyBub3QgbWFyayBhIHRva2VuCiAgICAgICAgICAgIGlmICgkaW5QYXRoKSB7CiAgICAgICAgICAgICAgICBpZiAoJHRoaXMtPmZvcm11bGF7JGluZGV4fSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhUGFyc2VyOjpRVU9URV9TSU5HTEUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoKCgkaW5kZXggKyAyKSA8PSAkZm9ybXVsYUxlbmd0aCkgJiYgKCR0aGlzLT5mb3JtdWxheyRpbmRleCArIDF9ID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFQYXJzZXI6OlFVT1RFX1NJTkdMRSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHZhbHVlIC49IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFQYXJzZXI6OlFVT1RFX1NJTkdMRTsKICAgICAgICAgICAgICAgICAgICAgICAgKyskaW5kZXg7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGluUGF0aCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJHZhbHVlIC49ICR0aGlzLT5mb3JtdWxheyRpbmRleH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICArKyRpbmRleDsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBicmFja2VkIHN0cmluZ3MgKFIxQzEgcmFuZ2UgaW5kZXggb3IgbGlua2VkIHdvcmtib29rIG5hbWUpCiAgICAgICAgICAgIC8vIG5vIGVtYmVkcyAoY2hhbmdlZCB0byAiKCkiIGJ5IEV4Y2VsKQogICAgICAgICAgICAvLyBlbmQgZG9lcyBub3QgbWFyayBhIHRva2VuCiAgICAgICAgICAgIGlmICgkaW5SYW5nZSkgewogICAgICAgICAgICAgICAgaWYgKCR0aGlzLT5mb3JtdWxheyRpbmRleH0gPT0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVBhcnNlcjo6QlJBQ0tFVF9DTE9TRSkgewogICAgICAgICAgICAgICAgICAgICRpblJhbmdlID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkdmFsdWUgLj0gJHRoaXMtPmZvcm11bGF7JGluZGV4fTsKICAgICAgICAgICAgICAgICsrJGluZGV4OwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIGVycm9yIHZhbHVlcwogICAgICAgICAgICAvLyBlbmQgbWFya3MgYSB0b2tlbiwgZGV0ZXJtaW5lZCBmcm9tIGFic29sdXRlIGxpc3Qgb2YgdmFsdWVzCiAgICAgICAgICAgIGlmICgkaW5FcnJvcikgewogICAgICAgICAgICAgICAgJHZhbHVlIC49ICR0aGlzLT5mb3JtdWxheyRpbmRleH07CiAgICAgICAgICAgICAgICArKyRpbmRleDsKICAgICAgICAgICAgICAgIGlmIChpbl9hcnJheSgkdmFsdWUsICRFUlJPUlMpKSB7CiAgICAgICAgICAgICAgICAgICAgJGluRXJyb3IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAkdG9rZW5zMVtdID0gbmV3IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbigkdmFsdWUsIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fVFlQRV9PUEVSQU5ELCBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1NVQlRZUEVfRVJST1IpOwogICAgICAgICAgICAgICAgICAgICR2YWx1ZSA9ICIiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIHNjaWVudGlmaWMgbm90YXRpb24gY2hlY2sKICAgICAgICAgICAgaWYgKHN0cnBvcyhQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhUGFyc2VyOjpPUEVSQVRPUlNfU04sICR0aGlzLT5mb3JtdWxheyRpbmRleH0pICE9PSBmYWxzZSkgewogICAgICAgICAgICAgICAgaWYgKHN0cmxlbigkdmFsdWUpID4gMSkgewogICAgICAgICAgICAgICAgICAgIGlmIChwcmVnX21hdGNoKCIvXlsxLTldezF9KFwuWzAtOV0rKT9FezF9JC8iLCAkdGhpcy0+Zm9ybXVsYXskaW5kZXh9KSAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICR2YWx1ZSAuPSAkdGhpcy0+Zm9ybXVsYXskaW5kZXh9OwogICAgICAgICAgICAgICAgICAgICAgICArKyRpbmRleDsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBpbmRlcGVuZGVudCBjaGFyYWN0ZXIgZXZhbHVhdGlvbiAob3JkZXIgbm90IGltcG9ydGFudCkKCiAgICAgICAgICAgIC8vIGVzdGFibGlzaCBzdGF0ZS1kZXBlbmRlbnQgY2hhcmFjdGVyIGV2YWx1YXRpb25zCiAgICAgICAgICAgIGlmICgkdGhpcy0+Zm9ybXVsYXskaW5kZXh9ID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFQYXJzZXI6OlFVT1RFX0RPVUJMRSkgewogICAgICAgICAgICAgICAgaWYgKHN0cmxlbigkdmFsdWUgPiAwKSkgewogICAgICAgICAgICAgICAgICAgIC8vIHVuZXhwZWN0ZWQKICAgICAgICAgICAgICAgICAgICAkdG9rZW5zMVtdID0gbmV3IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbigkdmFsdWUsIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fVFlQRV9VTktOT1dOKTsKICAgICAgICAgICAgICAgICAgICAkdmFsdWUgPSAiIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRpblN0cmluZyA9IHRydWU7CiAgICAgICAgICAgICAgICArKyRpbmRleDsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJHRoaXMtPmZvcm11bGF7JGluZGV4fSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhUGFyc2VyOjpRVU9URV9TSU5HTEUpIHsKICAgICAgICAgICAgICAgIGlmIChzdHJsZW4oJHZhbHVlKSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAvLyB1bmV4cGVjdGVkCiAgICAgICAgICAgICAgICAgICAgJHRva2VuczFbXSA9IG5ldyBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW4oJHZhbHVlLCBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1RZUEVfVU5LTk9XTik7CiAgICAgICAgICAgICAgICAgICAgJHZhbHVlID0gIiI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkaW5QYXRoID0gdHJ1ZTsKICAgICAgICAgICAgICAgICsrJGluZGV4OwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICgkdGhpcy0+Zm9ybXVsYXskaW5kZXh9ID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFQYXJzZXI6OkJSQUNLRVRfT1BFTikgewogICAgICAgICAgICAgICAgJGluUmFuZ2UgPSB0cnVlOwogICAgICAgICAgICAgICAgJHZhbHVlIC49IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFQYXJzZXI6OkJSQUNLRVRfT1BFTjsKICAgICAgICAgICAgICAgICsrJGluZGV4OwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICgkdGhpcy0+Zm9ybXVsYXskaW5kZXh9ID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFQYXJzZXI6OkVSUk9SX1NUQVJUKSB7CiAgICAgICAgICAgICAgICBpZiAoc3RybGVuKCR2YWx1ZSkgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gdW5leHBlY3RlZAogICAgICAgICAgICAgICAgICAgICR0b2tlbnMxW10gPSBuZXcgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuKCR2YWx1ZSwgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX1VOS05PV04pOwogICAgICAgICAgICAgICAgICAgICR2YWx1ZSA9ICIiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJGluRXJyb3IgPSB0cnVlOwogICAgICAgICAgICAgICAgJHZhbHVlIC49IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFQYXJzZXI6OkVSUk9SX1NUQVJUOwogICAgICAgICAgICAgICAgKyskaW5kZXg7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gbWFyayBzdGFydCBhbmQgZW5kIG9mIGFycmF5cyBhbmQgYXJyYXkgcm93cwogICAgICAgICAgICBpZiAoJHRoaXMtPmZvcm11bGF7JGluZGV4fSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhUGFyc2VyOjpCUkFDRV9PUEVOKSB7CiAgICAgICAgICAgICAgICBpZiAoc3RybGVuKCR2YWx1ZSkgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gdW5leHBlY3RlZAogICAgICAgICAgICAgICAgICAgICR0b2tlbnMxW10gPSBuZXcgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuKCR2YWx1ZSwgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX1VOS05PV04pOwogICAgICAgICAgICAgICAgICAgICR2YWx1ZSA9ICIiOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICR0bXAgPSBuZXcgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuKCJBUlJBWSIsIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fVFlQRV9GVU5DVElPTiwgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9TVUJUWVBFX1NUQVJUKTsKICAgICAgICAgICAgICAgICR0b2tlbnMxW10gPSAkdG1wOwogICAgICAgICAgICAgICAgJHN0YWNrW10gPSBjbG9uZSAkdG1wOwoKICAgICAgICAgICAgICAgICR0bXAgPSBuZXcgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuKCJBUlJBWVJPVyIsIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fVFlQRV9GVU5DVElPTiwgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9TVUJUWVBFX1NUQVJUKTsKICAgICAgICAgICAgICAgICR0b2tlbnMxW10gPSAkdG1wOwogICAgICAgICAgICAgICAgJHN0YWNrW10gPSBjbG9uZSAkdG1wOwoKICAgICAgICAgICAgICAgICsrJGluZGV4OwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICgkdGhpcy0+Zm9ybXVsYXskaW5kZXh9ID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFQYXJzZXI6OlNFTUlDT0xPTikgewogICAgICAgICAgICAgICAgaWYgKHN0cmxlbigkdmFsdWUpID4gMCkgewogICAgICAgICAgICAgICAgICAgICR0b2tlbnMxW10gPSBuZXcgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuKCR2YWx1ZSwgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX09QRVJBTkQpOwogICAgICAgICAgICAgICAgICAgICR2YWx1ZSA9ICIiOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICR0bXAgPSBhcnJheV9wb3AoJHN0YWNrKTsKICAgICAgICAgICAgICAgICR0bXAtPnNldFZhbHVlKCIiKTsKICAgICAgICAgICAgICAgICR0bXAtPnNldFRva2VuU3ViVHlwZShQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1NVQlRZUEVfU1RPUCk7CiAgICAgICAgICAgICAgICAkdG9rZW5zMVtdID0gJHRtcDsKCiAgICAgICAgICAgICAgICAkdG1wID0gbmV3IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbigiLCIsIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fVFlQRV9BUkdVTUVOVCk7CiAgICAgICAgICAgICAgICAkdG9rZW5zMVtdID0gJHRtcDsKCiAgICAgICAgICAgICAgICAkdG1wID0gbmV3IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbigiQVJSQVlST1ciLCBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1RZUEVfRlVOQ1RJT04sIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fU1VCVFlQRV9TVEFSVCk7CiAgICAgICAgICAgICAgICAkdG9rZW5zMVtdID0gJHRtcDsKICAgICAgICAgICAgICAgICRzdGFja1tdID0gY2xvbmUgJHRtcDsKCiAgICAgICAgICAgICAgICArKyRpbmRleDsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJHRoaXMtPmZvcm11bGF7JGluZGV4fSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhUGFyc2VyOjpCUkFDRV9DTE9TRSkgewogICAgICAgICAgICAgICAgaWYgKHN0cmxlbigkdmFsdWUpID4gMCkgewogICAgICAgICAgICAgICAgICAgICR0b2tlbnMxW10gPSBuZXcgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuKCR2YWx1ZSwgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX09QRVJBTkQpOwogICAgICAgICAgICAgICAgICAgICR2YWx1ZSA9ICIiOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICR0bXAgPSBhcnJheV9wb3AoJHN0YWNrKTsKICAgICAgICAgICAgICAgICR0bXAtPnNldFZhbHVlKCIiKTsKICAgICAgICAgICAgICAgICR0bXAtPnNldFRva2VuU3ViVHlwZShQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1NVQlRZUEVfU1RPUCk7CiAgICAgICAgICAgICAgICAkdG9rZW5zMVtdID0gJHRtcDsKCiAgICAgICAgICAgICAgICAkdG1wID0gYXJyYXlfcG9wKCRzdGFjayk7CiAgICAgICAgICAgICAgICAkdG1wLT5zZXRWYWx1ZSgiIik7CiAgICAgICAgICAgICAgICAkdG1wLT5zZXRUb2tlblN1YlR5cGUoUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9TVUJUWVBFX1NUT1ApOwogICAgICAgICAgICAgICAgJHRva2VuczFbXSA9ICR0bXA7CgogICAgICAgICAgICAgICAgKyskaW5kZXg7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gdHJpbSB3aGl0ZS1zcGFjZQogICAgICAgICAgICBpZiAoJHRoaXMtPmZvcm11bGF7JGluZGV4fSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhUGFyc2VyOjpXSElURVNQQUNFKSB7CiAgICAgICAgICAgICAgICBpZiAoc3RybGVuKCR2YWx1ZSkgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgJHRva2VuczFbXSA9IG5ldyBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW4oJHZhbHVlLCBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1RZUEVfT1BFUkFORCk7CiAgICAgICAgICAgICAgICAgICAgJHZhbHVlID0gIiI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkdG9rZW5zMVtdID0gbmV3IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbigiIiwgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX1dISVRFU1BBQ0UpOwogICAgICAgICAgICAgICAgKyskaW5kZXg7CiAgICAgICAgICAgICAgICB3aGlsZSAoKCR0aGlzLT5mb3JtdWxheyRpbmRleH0gPT0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVBhcnNlcjo6V0hJVEVTUEFDRSkgJiYgKCRpbmRleCA8ICRmb3JtdWxhTGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICAgICsrJGluZGV4OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIG11bHRpLWNoYXJhY3RlciBjb21wYXJhdG9ycwogICAgICAgICAgICBpZiAoKCRpbmRleCArIDIpIDw9ICRmb3JtdWxhTGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBpZiAoaW5fYXJyYXkoc3Vic3RyKCR0aGlzLT5mb3JtdWxhLCAkaW5kZXgsIDIpLCAkQ09NUEFSQVRPUlNfTVVMVEkpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmxlbigkdmFsdWUpID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAkdG9rZW5zMVtdID0gbmV3IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbigkdmFsdWUsIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fVFlQRV9PUEVSQU5EKTsKICAgICAgICAgICAgICAgICAgICAgICAgJHZhbHVlID0gIiI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICR0b2tlbnMxW10gPSBuZXcgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuKHN1YnN0cigkdGhpcy0+Zm9ybXVsYSwgJGluZGV4LCAyKSwgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX09QRVJBVE9SSU5GSVgsIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fU1VCVFlQRV9MT0dJQ0FMKTsKICAgICAgICAgICAgICAgICAgICAkaW5kZXggKz0gMjsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gc3RhbmRhcmQgaW5maXggb3BlcmF0b3JzCiAgICAgICAgICAgIGlmIChzdHJwb3MoUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVBhcnNlcjo6T1BFUkFUT1JTX0lORklYLCAkdGhpcy0+Zm9ybXVsYXskaW5kZXh9KSAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIGlmIChzdHJsZW4oJHZhbHVlKSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAkdG9rZW5zMVtdID1uZXcgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuKCR2YWx1ZSwgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX09QRVJBTkQpOwogICAgICAgICAgICAgICAgICAgICR2YWx1ZSA9ICIiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJHRva2VuczFbXSA9IG5ldyBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW4oJHRoaXMtPmZvcm11bGF7JGluZGV4fSwgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX09QRVJBVE9SSU5GSVgpOwogICAgICAgICAgICAgICAgKyskaW5kZXg7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gc3RhbmRhcmQgcG9zdGZpeCBvcGVyYXRvcnMgKG9ubHkgb25lKQogICAgICAgICAgICBpZiAoc3RycG9zKFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFQYXJzZXI6Ok9QRVJBVE9SU19QT1NURklYLCAkdGhpcy0+Zm9ybXVsYXskaW5kZXh9KSAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIGlmIChzdHJsZW4oJHZhbHVlKSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAkdG9rZW5zMVtdID0gbmV3IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbigkdmFsdWUsIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fVFlQRV9PUEVSQU5EKTsKICAgICAgICAgICAgICAgICAgICAkdmFsdWUgPSAiIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICR0b2tlbnMxW10gPSBuZXcgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuKCR0aGlzLT5mb3JtdWxheyRpbmRleH0sIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fVFlQRV9PUEVSQVRPUlBPU1RGSVgpOwogICAgICAgICAgICAgICAgKyskaW5kZXg7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gc3RhcnQgc3ViZXhwcmVzc2lvbiBvciBmdW5jdGlvbgogICAgICAgICAgICBpZiAoJHRoaXMtPmZvcm11bGF7JGluZGV4fSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhUGFyc2VyOjpQQVJFTl9PUEVOKSB7CiAgICAgICAgICAgICAgICBpZiAoc3RybGVuKCR2YWx1ZSkgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgJHRtcCA9IG5ldyBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW4oJHZhbHVlLCBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1RZUEVfRlVOQ1RJT04sIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fU1VCVFlQRV9TVEFSVCk7CiAgICAgICAgICAgICAgICAgICAgJHRva2VuczFbXSA9ICR0bXA7CiAgICAgICAgICAgICAgICAgICAgJHN0YWNrW10gPSBjbG9uZSAkdG1wOwogICAgICAgICAgICAgICAgICAgICR2YWx1ZSA9ICIiOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAkdG1wID0gbmV3IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbigiIiwgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX1NVQkVYUFJFU1NJT04sIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fU1VCVFlQRV9TVEFSVCk7CiAgICAgICAgICAgICAgICAgICAgJHRva2VuczFbXSA9ICR0bXA7CiAgICAgICAgICAgICAgICAgICAgJHN0YWNrW10gPSBjbG9uZSAkdG1wOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKyskaW5kZXg7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gZnVuY3Rpb24sIHN1YmV4cHJlc3Npb24sIG9yIGFycmF5IHBhcmFtZXRlcnMsIG9yIG9wZXJhbmQgdW5pb25zCiAgICAgICAgICAgIGlmICgkdGhpcy0+Zm9ybXVsYXskaW5kZXh9ID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFQYXJzZXI6OkNPTU1BKSB7CiAgICAgICAgICAgICAgICBpZiAoc3RybGVuKCR2YWx1ZSkgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgJHRva2VuczFbXSA9IG5ldyBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW4oJHZhbHVlLCBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1RZUEVfT1BFUkFORCk7CiAgICAgICAgICAgICAgICAgICAgJHZhbHVlID0gIiI7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJHRtcCA9IGFycmF5X3BvcCgkc3RhY2spOwogICAgICAgICAgICAgICAgJHRtcC0+c2V0VmFsdWUoIiIpOwogICAgICAgICAgICAgICAgJHRtcC0+c2V0VG9rZW5TdWJUeXBlKFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fU1VCVFlQRV9TVE9QKTsKICAgICAgICAgICAgICAgICRzdGFja1tdID0gJHRtcDsKCiAgICAgICAgICAgICAgICBpZiAoJHRtcC0+Z2V0VG9rZW5UeXBlKCkgPT0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX0ZVTkNUSU9OKSB7CiAgICAgICAgICAgICAgICAgICAgJHRva2VuczFbXSA9IG5ldyBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW4oIiwiLCBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1RZUEVfT1BFUkFUT1JJTkZJWCwgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9TVUJUWVBFX1VOSU9OKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJHRva2VuczFbXSA9IG5ldyBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW4oIiwiLCBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1RZUEVfQVJHVU1FTlQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKyskaW5kZXg7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gc3RvcCBzdWJleHByZXNzaW9uCiAgICAgICAgICAgIGlmICgkdGhpcy0+Zm9ybXVsYXskaW5kZXh9ID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFQYXJzZXI6OlBBUkVOX0NMT1NFKSB7CiAgICAgICAgICAgICAgICBpZiAoc3RybGVuKCR2YWx1ZSkgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgJHRva2VuczFbXSA9IG5ldyBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW4oJHZhbHVlLCBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1RZUEVfT1BFUkFORCk7CiAgICAgICAgICAgICAgICAgICAgJHZhbHVlID0gIiI7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJHRtcCA9IGFycmF5X3BvcCgkc3RhY2spOwogICAgICAgICAgICAgICAgJHRtcC0+c2V0VmFsdWUoIiIpOwogICAgICAgICAgICAgICAgJHRtcC0+c2V0VG9rZW5TdWJUeXBlKFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fU1VCVFlQRV9TVE9QKTsKICAgICAgICAgICAgICAgICR0b2tlbnMxW10gPSAkdG1wOwoKICAgICAgICAgICAgICAgICsrJGluZGV4OwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIHRva2VuIGFjY3VtdWxhdGlvbgogICAgICAgICAgICAkdmFsdWUgLj0gJHRoaXMtPmZvcm11bGF7JGluZGV4fTsKICAgICAgICAgICAgKyskaW5kZXg7CiAgICAgICAgfQoKICAgICAgICAvLyBkdW1wIHJlbWFpbmluZyBhY2N1bXVsYXRpb24KICAgICAgICBpZiAoc3RybGVuKCR2YWx1ZSkgPiAwKSB7CiAgICAgICAgICAgICR0b2tlbnMxW10gPSBuZXcgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuKCR2YWx1ZSwgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX09QRVJBTkQpOwogICAgICAgIH0KCiAgICAgICAgLy8gbW92ZSB0b2tlbkxpc3QgdG8gbmV3IHNldCwgZXhjbHVkaW5nIHVubmVjZXNzYXJ5IHdoaXRlLXNwYWNlIHRva2VucyBhbmQgY29udmVydGluZyBuZWNlc3Nhcnkgb25lcyB0byBpbnRlcnNlY3Rpb25zCiAgICAgICAgJHRva2VuQ291bnQgPSBjb3VudCgkdG9rZW5zMSk7CiAgICAgICAgZm9yICgkaSA9IDA7ICRpIDwgJHRva2VuQ291bnQ7ICsrJGkpIHsKICAgICAgICAgICAgJHRva2VuID0gJHRva2VuczFbJGldOwogICAgICAgICAgICBpZiAoaXNzZXQoJHRva2VuczFbJGkgLSAxXSkpIHsKICAgICAgICAgICAgICAgICRwcmV2aW91c1Rva2VuID0gJHRva2VuczFbJGkgLSAxXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICRwcmV2aW91c1Rva2VuID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaXNzZXQoJHRva2VuczFbJGkgKyAxXSkpIHsKICAgICAgICAgICAgICAgICRuZXh0VG9rZW4gPSAkdG9rZW5zMVskaSArIDFdOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJG5leHRUb2tlbiA9IG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpc19udWxsKCR0b2tlbikpIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJHRva2VuLT5nZXRUb2tlblR5cGUoKSAhPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1RZUEVfV0hJVEVTUEFDRSkgewogICAgICAgICAgICAgICAgJHRva2VuczJbXSA9ICR0b2tlbjsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaXNfbnVsbCgkcHJldmlvdXNUb2tlbikpIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoISAoCiAgICAgICAgICAgICAgICAgICAgKCgkcHJldmlvdXNUb2tlbi0+Z2V0VG9rZW5UeXBlKCkgPT0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX0ZVTkNUSU9OKSAmJiAoJHByZXZpb3VzVG9rZW4tPmdldFRva2VuU3ViVHlwZSgpID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fU1VCVFlQRV9TVE9QKSkgfHwKICAgICAgICAgICAgICAgICAgICAoKCRwcmV2aW91c1Rva2VuLT5nZXRUb2tlblR5cGUoKSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1RZUEVfU1VCRVhQUkVTU0lPTikgJiYgKCRwcmV2aW91c1Rva2VuLT5nZXRUb2tlblN1YlR5cGUoKSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1NVQlRZUEVfU1RPUCkpIHx8CiAgICAgICAgICAgICAgICAgICAgKCRwcmV2aW91c1Rva2VuLT5nZXRUb2tlblR5cGUoKSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1RZUEVfT1BFUkFORCkKICAgICAgICAgICAgICAgICAgKSApIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaXNfbnVsbCgkbmV4dFRva2VuKSkgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghICgKICAgICAgICAgICAgICAgICAgICAoKCRuZXh0VG9rZW4tPmdldFRva2VuVHlwZSgpID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fVFlQRV9GVU5DVElPTikgJiYgKCRuZXh0VG9rZW4tPmdldFRva2VuU3ViVHlwZSgpID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fU1VCVFlQRV9TVEFSVCkpIHx8CiAgICAgICAgICAgICAgICAgICAgKCgkbmV4dFRva2VuLT5nZXRUb2tlblR5cGUoKSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1RZUEVfU1VCRVhQUkVTU0lPTikgJiYgKCRuZXh0VG9rZW4tPmdldFRva2VuU3ViVHlwZSgpID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fU1VCVFlQRV9TVEFSVCkpIHx8CiAgICAgICAgICAgICAgICAgICAgKCRuZXh0VG9rZW4tPmdldFRva2VuVHlwZSgpID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fVFlQRV9PUEVSQU5EKQogICAgICAgICAgICAgICAgICApICkgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICR0b2tlbnMyW10gPSBuZXcgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuKCR2YWx1ZSwgUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX09QRVJBVE9SSU5GSVgsIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fU1VCVFlQRV9JTlRFUlNFQ1RJT04pOwogICAgICAgIH0KCiAgICAgICAgLy8gbW92ZSB0b2tlbnMgdG8gZmluYWwgbGlzdCwgc3dpdGNoaW5nIGluZml4ICItIiBvcGVyYXRvcnMgdG8gcHJlZml4IHdoZW4gYXBwcm9wcmlhdGUsIHN3aXRjaGluZyBpbmZpeCAiKyIgb3BlcmF0b3JzCiAgICAgICAgLy8gdG8gbm9vcCB3aGVuIGFwcHJvcHJpYXRlLCBpZGVudGlmeWluZyBvcGVyYW5kIGFuZCBpbmZpeC1vcGVyYXRvciBzdWJ0eXBlcywgYW5kIHB1bGxpbmcgIkAiIGZyb20gZnVuY3Rpb24gbmFtZXMKICAgICAgICAkdGhpcy0+dG9rZW5zID0gYXJyYXkoKTsKCiAgICAgICAgJHRva2VuQ291bnQgPSBjb3VudCgkdG9rZW5zMik7CiAgICAgICAgZm9yICgkaSA9IDA7ICRpIDwgJHRva2VuQ291bnQ7ICsrJGkpIHsKICAgICAgICAgICAgJHRva2VuID0gJHRva2VuczJbJGldOwogICAgICAgICAgICBpZiAoaXNzZXQoJHRva2VuczJbJGkgLSAxXSkpIHsKICAgICAgICAgICAgICAgICRwcmV2aW91c1Rva2VuID0gJHRva2VuczJbJGkgLSAxXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICRwcmV2aW91c1Rva2VuID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaXNzZXQoJHRva2VuczJbJGkgKyAxXSkpIHsKICAgICAgICAgICAgICAgICRuZXh0VG9rZW4gPSAkdG9rZW5zMlskaSArIDFdOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJG5leHRUb2tlbiA9IG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpc19udWxsKCR0b2tlbikpIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJHRva2VuLT5nZXRUb2tlblR5cGUoKSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1RZUEVfT1BFUkFUT1JJTkZJWCAmJiAkdG9rZW4tPmdldFZhbHVlKCkgPT0gIi0iKSB7CiAgICAgICAgICAgICAgICBpZiAoJGkgPT0gMCkgewogICAgICAgICAgICAgICAgICAgICR0b2tlbi0+c2V0VG9rZW5UeXBlKFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fVFlQRV9PUEVSQVRPUlBSRUZJWCk7CiAgICAgICAgICAgICAgICB9IGVsc2VpZiAoKCgkcHJldmlvdXNUb2tlbi0+Z2V0VG9rZW5UeXBlKCkgPT0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX0ZVTkNUSU9OKSAmJgogICAgICAgICAgICAgICAgICAgICgkcHJldmlvdXNUb2tlbi0+Z2V0VG9rZW5TdWJUeXBlKCkgPT0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9TVUJUWVBFX1NUT1ApKSB8fAogICAgICAgICAgICAgICAgICAgICgoJHByZXZpb3VzVG9rZW4tPmdldFRva2VuVHlwZSgpID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fVFlQRV9TVUJFWFBSRVNTSU9OKSAmJgogICAgICAgICAgICAgICAgICAgICgkcHJldmlvdXNUb2tlbi0+Z2V0VG9rZW5TdWJUeXBlKCkgPT0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9TVUJUWVBFX1NUT1ApKSB8fAogICAgICAgICAgICAgICAgICAgICgkcHJldmlvdXNUb2tlbi0+Z2V0VG9rZW5UeXBlKCkgPT0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX09QRVJBVE9SUE9TVEZJWCkgfHwKICAgICAgICAgICAgICAgICAgICAoJHByZXZpb3VzVG9rZW4tPmdldFRva2VuVHlwZSgpID09IFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fVFlQRV9PUEVSQU5EKSkgewogICAgICAgICAgICAgICAgICAgICR0b2tlbi0+c2V0VG9rZW5TdWJUeXBlKFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fU1VCVFlQRV9NQVRIKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJHRva2VuLT5zZXRUb2tlblR5cGUoUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX09QRVJBVE9SUFJFRklYKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAkdGhpcy0+dG9rZW5zW10gPSAkdG9rZW47CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCR0b2tlbi0+Z2V0VG9rZW5UeXBlKCkgPT0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX09QRVJBVE9SSU5GSVggJiYgJHRva2VuLT5nZXRWYWx1ZSgpID09ICIrIikgewogICAgICAgICAgICAgICAgaWYgKCRpID09IDApIHsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0gZWxzZWlmICgoKCRwcmV2aW91c1Rva2VuLT5nZXRUb2tlblR5cGUoKSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1RZUEVfRlVOQ1RJT04pICYmCiAgICAgICAgICAgICAgICAgICAgKCRwcmV2aW91c1Rva2VuLT5nZXRUb2tlblN1YlR5cGUoKSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1NVQlRZUEVfU1RPUCkpIHx8CiAgICAgICAgICAgICAgICAgICAgKCgkcHJldmlvdXNUb2tlbi0+Z2V0VG9rZW5UeXBlKCkgPT0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX1NVQkVYUFJFU1NJT04pICYmCiAgICAgICAgICAgICAgICAgICAgKCRwcmV2aW91c1Rva2VuLT5nZXRUb2tlblN1YlR5cGUoKSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1NVQlRZUEVfU1RPUCkpIHx8CiAgICAgICAgICAgICAgICAgICAgKCRwcmV2aW91c1Rva2VuLT5nZXRUb2tlblR5cGUoKSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1RZUEVfT1BFUkFUT1JQT1NURklYKSB8fAogICAgICAgICAgICAgICAgICAgICgkcHJldmlvdXNUb2tlbi0+Z2V0VG9rZW5UeXBlKCkgPT0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX09QRVJBTkQpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRva2VuLT5zZXRUb2tlblN1YlR5cGUoUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9TVUJUWVBFX01BVEgpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAkdGhpcy0+dG9rZW5zW10gPSAkdG9rZW47CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCR0b2tlbi0+Z2V0VG9rZW5UeXBlKCkgPT0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9UWVBFX09QRVJBVE9SSU5GSVggJiYKICAgICAgICAgICAgICAgICR0b2tlbi0+Z2V0VG9rZW5TdWJUeXBlKCkgPT0gUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9TVUJUWVBFX05PVEhJTkcpIHsKICAgICAgICAgICAgICAgIGlmIChzdHJwb3MoIjw+PSIsIHN1YnN0cigkdG9rZW4tPmdldFZhbHVlKCksIDAsIDEpKSAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICAkdG9rZW4tPnNldFRva2VuU3ViVHlwZShQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1NVQlRZUEVfTE9HSUNBTCk7CiAgICAgICAgICAgICAgICB9IGVsc2VpZiAoJHRva2VuLT5nZXRWYWx1ZSgpID09ICImIikgewogICAgICAgICAgICAgICAgICAgICR0b2tlbi0+c2V0VG9rZW5TdWJUeXBlKFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fU1VCVFlQRV9DT05DQVRFTkFUSU9OKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJHRva2VuLT5zZXRUb2tlblN1YlR5cGUoUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9TVUJUWVBFX01BVEgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICR0aGlzLT50b2tlbnNbXSA9ICR0b2tlbjsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJHRva2VuLT5nZXRUb2tlblR5cGUoKSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1RZUEVfT1BFUkFORCAmJgogICAgICAgICAgICAgICAgJHRva2VuLT5nZXRUb2tlblN1YlR5cGUoKSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1NVQlRZUEVfTk9USElORykgewogICAgICAgICAgICAgICAgaWYgKCFpc19udW1lcmljKCR0b2tlbi0+Z2V0VmFsdWUoKSkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc3RydG91cHBlcigkdG9rZW4tPmdldFZhbHVlKCkpID09ICJUUlVFIiB8fCBzdHJ0b3VwcGVyKCR0b2tlbi0+Z2V0VmFsdWUoKSA9PSAiRkFMU0UiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAkdG9rZW4tPnNldFRva2VuU3ViVHlwZShQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1NVQlRZUEVfTE9HSUNBTCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHRva2VuLT5zZXRUb2tlblN1YlR5cGUoUEhQRXhjZWxfQ2FsY3VsYXRpb25fRm9ybXVsYVRva2VuOjpUT0tFTl9TVUJUWVBFX1JBTkdFKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICR0b2tlbi0+c2V0VG9rZW5TdWJUeXBlKFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Zvcm11bGFUb2tlbjo6VE9LRU5fU1VCVFlQRV9OVU1CRVIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICR0aGlzLT50b2tlbnNbXSA9ICR0b2tlbjsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJHRva2VuLT5nZXRUb2tlblR5cGUoKSA9PSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9Gb3JtdWxhVG9rZW46OlRPS0VOX1RZUEVfRlVOQ1RJT04pIHsKICAgICAgICAgICAgICAgIGlmIChzdHJsZW4oJHRva2VuLT5nZXRWYWx1ZSgpID4gMCkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic3RyKCR0b2tlbi0+Z2V0VmFsdWUoKSwgMCwgMSkgPT0gIkAiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICR0b2tlbi0+c2V0VmFsdWUoc3Vic3RyKCR0b2tlbi0+Z2V0VmFsdWUoKSwgMSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgJHRoaXMtPnRva2Vuc1tdID0gJHRva2VuOwogICAgICAgIH0KICAgIH0KfQo=",
    "size": "26921"
}