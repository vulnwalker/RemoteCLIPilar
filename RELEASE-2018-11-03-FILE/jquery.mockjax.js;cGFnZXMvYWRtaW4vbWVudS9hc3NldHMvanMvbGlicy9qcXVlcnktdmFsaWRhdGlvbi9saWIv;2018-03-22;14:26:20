{
    "namaFile": "pages\/admin\/menu\/assets\/js\/libs\/jquery-validation\/lib\/jquery.mockjax.js",
    "lastUpdate": "2018-03-22+14:26:20.05",
    "contentFile": "LyohCiAqIE1vY2tKYXggLSBqUXVlcnkgUGx1Z2luIHRvIE1vY2sgQWpheCByZXF1ZXN0cwogKgogKiBWZXJzaW9uOiAgMS41LjMKICogUmVsZWFzZWQ6CiAqIEhvbWU6ICAgaHR0cDovL2dpdGh1Yi5jb20vYXBwZW5kdG8vanF1ZXJ5LW1vY2tqYXgKICogQXV0aG9yOiAgIEpvbmF0aGFuIFNoYXJwIChodHRwOi8vamRzaGFycC5jb20pCiAqIExpY2Vuc2U6ICBNSVQsR1BMCiAqCiAqIENvcHlyaWdodCAoYykgMjAxMSBhcHBlbmRUbyBMTEMuCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBvciBHUEwgbGljZW5zZXMuCiAqIGh0dHA6Ly9hcHBlbmR0by5jb20vb3Blbi1zb3VyY2UtbGljZW5zZXMKICovCihmdW5jdGlvbigkKSB7Cgl2YXIgX2FqYXggPSAkLmFqYXgsCgkJbW9ja0hhbmRsZXJzID0gW10sCgkJbW9ja2VkQWpheENhbGxzID0gW10sCgkJQ0FMTEJBQ0tfUkVHRVggPSAvPVw\/KCZ8JCkvLAoJCWpzYyA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7CgoKCS8vIFBhcnNlIHRoZSBnaXZlbiBYTUwgc3RyaW5nLgoJZnVuY3Rpb24gcGFyc2VYTUwoeG1sKSB7CgkJaWYgKCB3aW5kb3cuRE9NUGFyc2VyID09IHVuZGVmaW5lZCAmJiB3aW5kb3cuQWN0aXZlWE9iamVjdCApIHsKCQkJRE9NUGFyc2VyID0gZnVuY3Rpb24oKSB7IH07CgkJCURPTVBhcnNlci5wcm90b3R5cGUucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24oIHhtbFN0cmluZyApIHsKCQkJCXZhciBkb2MgPSBuZXcgQWN0aXZlWE9iamVjdCgnTWljcm9zb2Z0LlhNTERPTScpOwoJCQkJZG9jLmFzeW5jID0gJ2ZhbHNlJzsKCQkJCWRvYy5sb2FkWE1MKCB4bWxTdHJpbmcgKTsKCQkJCXJldHVybiBkb2M7CgkJCX07CgkJfQoKCQl0cnkgewoJCQl2YXIgeG1sRG9jID0gKCBuZXcgRE9NUGFyc2VyKCkgKS5wYXJzZUZyb21TdHJpbmcoIHhtbCwgJ3RleHQveG1sJyApOwoJCQlpZiAoICQuaXNYTUxEb2MoIHhtbERvYyApICkgewoJCQkJdmFyIGVyciA9ICQoJ3BhcnNlcmVycm9yJywgeG1sRG9jKTsKCQkJCWlmICggZXJyLmxlbmd0aCA9PSAxICkgewoJCQkJCXRocm93KCdFcnJvcjogJyArICQoeG1sRG9jKS50ZXh0KCkgKTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCXRocm93KCdVbmFibGUgdG8gcGFyc2UgWE1MJyk7CgkJCX0KCQkJcmV0dXJuIHhtbERvYzsKCQl9IGNhdGNoKCBlICkgewoJCQl2YXIgbXNnID0gKCBlLm5hbWUgPT0gdW5kZWZpbmVkID8gZSA6IGUubmFtZSArICc6ICcgKyBlLm1lc3NhZ2UgKTsKCQkJJChkb2N1bWVudCkudHJpZ2dlcigneG1sUGFyc2VFcnJvcicsIFsgbXNnIF0pOwoJCQlyZXR1cm4gdW5kZWZpbmVkOwoJCX0KCX0KCgkvLyBUcmlnZ2VyIGEgalF1ZXJ5IGV2ZW50CglmdW5jdGlvbiB0cmlnZ2VyKHMsIHR5cGUsIGFyZ3MpIHsKCQkocy5jb250ZXh0ID8gJChzLmNvbnRleHQpIDogJC5ldmVudCkudHJpZ2dlcih0eXBlLCBhcmdzKTsKCX0KCgkvLyBDaGVjayBpZiB0aGUgZGF0YSBmaWVsZCBvbiB0aGUgbW9jayBoYW5kbGVyIGFuZCB0aGUgcmVxdWVzdCBtYXRjaC4gVGhpcwoJLy8gY2FuIGJlIHVzZWQgdG8gcmVzdHJpY3QgYSBtb2NrIGhhbmRsZXIgdG8gYmVpbmcgdXNlZCBvbmx5IHdoZW4gYSBjZXJ0YWluCgkvLyBzZXQgb2YgZGF0YSBpcyBwYXNzZWQgdG8gaXQuCglmdW5jdGlvbiBpc01vY2tEYXRhRXF1YWwoIG1vY2ssIGxpdmUgKSB7CgkJdmFyIGlkZW50aWNhbCA9IHRydWU7CgkJLy8gVGVzdCBmb3Igc2l0dWF0aW9ucyB3aGVyZSB0aGUgZGF0YSBpcyBhIHF1ZXJ5c3RyaW5nIChub3QgYW4gb2JqZWN0KQoJCWlmICh0eXBlb2YgbGl2ZSA9PT0gJ3N0cmluZycpIHsKCQkJLy8gUXVlcnlzdHJpbmcgbWF5IGJlIGEgcmVnZXgKCQkJcmV0dXJuICQuaXNGdW5jdGlvbiggbW9jay50ZXN0ICkgPyBtb2NrLnRlc3QobGl2ZSkgOiBtb2NrID09IGxpdmU7CgkJfQoJCSQuZWFjaChtb2NrLCBmdW5jdGlvbihrKSB7CgkJCWlmICggbGl2ZVtrXSA9PT0gdW5kZWZpbmVkICkgewoJCQkJaWRlbnRpY2FsID0gZmFsc2U7CgkJCQlyZXR1cm4gaWRlbnRpY2FsOwoJCQl9IGVsc2UgewoJCQkJLy8gVGhpcyB3aWxsIGFsbG93IHRvIGNvbXBhcmUgQXJyYXlzCgkJCQlpZiAoIHR5cGVvZiBsaXZlW2tdID09PSAnb2JqZWN0JyAmJiBsaXZlW2tdICE9PSBudWxsICkgewoJCQkJCWlkZW50aWNhbCA9IGlkZW50aWNhbCAmJiBpc01vY2tEYXRhRXF1YWwobW9ja1trXSwgbGl2ZVtrXSk7CgkJCQl9IGVsc2UgewoJCQkJCWlmICggbW9ja1trXSAmJiAkLmlzRnVuY3Rpb24oIG1vY2tba10udGVzdCApICkgewoJCQkJCQlpZGVudGljYWwgPSBpZGVudGljYWwgJiYgbW9ja1trXS50ZXN0KGxpdmVba10pOwoJCQkJCX0gZWxzZSB7CgkJCQkJCWlkZW50aWNhbCA9IGlkZW50aWNhbCAmJiAoIG1vY2tba10gPT0gbGl2ZVtrXSApOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0pOwoKCQlyZXR1cm4gaWRlbnRpY2FsOwoJfQoKICAgIC8vIFNlZSBpZiBhIG1vY2sgaGFuZGxlciBwcm9wZXJ0eSBtYXRjaGVzIHRoZSBkZWZhdWx0IHNldHRpbmdzCiAgICBmdW5jdGlvbiBpc0RlZmF1bHRTZXR0aW5nKGhhbmRsZXIsIHByb3BlcnR5KSB7CiAgICAgICAgcmV0dXJuIGhhbmRsZXJbcHJvcGVydHldID09PSAkLm1vY2tqYXhTZXR0aW5nc1twcm9wZXJ0eV07CiAgICB9CgoJLy8gQ2hlY2sgdGhlIGdpdmVuIGhhbmRsZXIgc2hvdWxkIG1vY2sgdGhlIGdpdmVuIHJlcXVlc3QKCWZ1bmN0aW9uIGdldE1vY2tGb3JSZXF1ZXN0KCBoYW5kbGVyLCByZXF1ZXN0U2V0dGluZ3MgKSB7CgkJLy8gSWYgdGhlIG1vY2sgd2FzIHJlZ2lzdGVyZWQgd2l0aCBhIGZ1bmN0aW9uLCBsZXQgdGhlIGZ1bmN0aW9uIGRlY2lkZSBpZiB3ZQoJCS8vIHdhbnQgdG8gbW9jayB0aGlzIHJlcXVlc3QKCQlpZiAoICQuaXNGdW5jdGlvbihoYW5kbGVyKSApIHsKCQkJcmV0dXJuIGhhbmRsZXIoIHJlcXVlc3RTZXR0aW5ncyApOwoJCX0KCgkJLy8gSW5zcGVjdCB0aGUgVVJMIG9mIHRoZSByZXF1ZXN0IGFuZCBjaGVjayBpZiB0aGUgbW9jayBoYW5kbGVyJ3MgdXJsCgkJLy8gbWF0Y2hlcyB0aGUgdXJsIGZvciB0aGlzIGFqYXggcmVxdWVzdAoJCWlmICggJC5pc0Z1bmN0aW9uKGhhbmRsZXIudXJsLnRlc3QpICkgewoJCQkvLyBUaGUgdXNlciBwcm92aWRlZCBhIHJlZ2V4IGZvciB0aGUgdXJsLCB0ZXN0IGl0CgkJCWlmICggIWhhbmRsZXIudXJsLnRlc3QoIHJlcXVlc3RTZXR0aW5ncy51cmwgKSApIHsKCQkJCXJldHVybiBudWxsOwoJCQl9CgkJfSBlbHNlIHsKCQkJLy8gTG9vayBmb3IgYSBzaW1wbGUgd2lsZGNhcmQgJyonIG9yIGEgZGlyZWN0IFVSTCBtYXRjaAoJCQl2YXIgc3RhciA9IGhhbmRsZXIudXJsLmluZGV4T2YoJyonKTsKCQkJaWYgKGhhbmRsZXIudXJsICE9PSByZXF1ZXN0U2V0dGluZ3MudXJsICYmIHN0YXIgPT09IC0xIHx8CgkJCQkJIW5ldyBSZWdFeHAoaGFuZGxlci51cmwucmVwbGFjZSgvWy1bXF17fSgpKz8uLFxcXiR8I1xzXS9nLCAiXFwkJiIpLnJlcGxhY2UoL1wqL2csICcuKycpKS50ZXN0KHJlcXVlc3RTZXR0aW5ncy51cmwpKSB7CgkJCQlyZXR1cm4gbnVsbDsKCQkJfQoJCX0KCgkJLy8gSW5zcGVjdCB0aGUgZGF0YSBzdWJtaXR0ZWQgaW4gdGhlIHJlcXVlc3QgKGVpdGhlciBQT1NUIGJvZHkgb3IgR0VUIHF1ZXJ5IHN0cmluZykKCQlpZiAoIGhhbmRsZXIuZGF0YSAmJiByZXF1ZXN0U2V0dGluZ3MuZGF0YSApIHsKCQkJaWYgKCAhaXNNb2NrRGF0YUVxdWFsKGhhbmRsZXIuZGF0YSwgcmVxdWVzdFNldHRpbmdzLmRhdGEpICkgewoJCQkJLy8gVGhleSdyZSBub3QgaWRlbnRpY2FsLCBkbyBub3QgbW9jayB0aGlzIHJlcXVlc3QKCQkJCXJldHVybiBudWxsOwoJCQl9CgkJfQoJCS8vIEluc3BlY3QgdGhlIHJlcXVlc3QgdHlwZQoJCWlmICggaGFuZGxlciAmJiBoYW5kbGVyLnR5cGUgJiYKCQkJCWhhbmRsZXIudHlwZS50b0xvd2VyQ2FzZSgpICE9IHJlcXVlc3RTZXR0aW5ncy50eXBlLnRvTG93ZXJDYXNlKCkgKSB7CgkJCS8vIFRoZSByZXF1ZXN0IHR5cGUgZG9lc24ndCBtYXRjaCAoR0VUIHZzLiBQT1NUKQoJCQlyZXR1cm4gbnVsbDsKCQl9CgoJCXJldHVybiBoYW5kbGVyOwoJfQoKCS8vIFByb2Nlc3MgdGhlIHhociBvYmplY3RzIHNlbmQgb3BlcmF0aW9uCglmdW5jdGlvbiBfeGhyU2VuZChtb2NrSGFuZGxlciwgcmVxdWVzdFNldHRpbmdzLCBvcmlnU2V0dGluZ3MpIHsKCgkJLy8gVGhpcyBpcyBhIHN1YnN0aXR1dGUgZm9yIDwgMS40IHdoaWNoIGxhY2tzICQucHJveHkKCQl2YXIgcHJvY2VzcyA9IChmdW5jdGlvbih0aGF0KSB7CgkJCXJldHVybiBmdW5jdGlvbigpIHsKCQkJCXJldHVybiAoZnVuY3Rpb24oKSB7CgkJCQkJdmFyIG9uUmVhZHk7CgoJCQkJCS8vIFRoZSByZXF1ZXN0IGhhcyByZXR1cm5lZAoJCQkJCXRoaXMuc3RhdHVzICAgICA9IG1vY2tIYW5kbGVyLnN0YXR1czsKCQkJCQl0aGlzLnN0YXR1c1RleHQgPSBtb2NrSGFuZGxlci5zdGF0dXNUZXh0OwoJCQkJCXRoaXMucmVhZHlTdGF0ZQk9IDQ7CgoJCQkJCS8vIFdlIGhhdmUgYW4gZXhlY3V0YWJsZSBmdW5jdGlvbiwgY2FsbCBpdCB0byBnaXZlCgkJCQkJLy8gdGhlIG1vY2sgaGFuZGxlciBhIGNoYW5jZSB0byB1cGRhdGUgaXQncyBkYXRhCgkJCQkJaWYgKCAkLmlzRnVuY3Rpb24obW9ja0hhbmRsZXIucmVzcG9uc2UpICkgewoJCQkJCQltb2NrSGFuZGxlci5yZXNwb25zZShvcmlnU2V0dGluZ3MpOwoJCQkJCX0KCQkJCQkvLyBDb3B5IG92ZXIgb3VyIG1vY2sgdG8gb3VyIHhociBvYmplY3QgYmVmb3JlIHBhc3NpbmcgY29udHJvbCBiYWNrIHRvCgkJCQkJLy8galF1ZXJ5J3Mgb25yZWFkeXN0YXRlY2hhbmdlIGNhbGxiYWNrCgkJCQkJaWYgKCByZXF1ZXN0U2V0dGluZ3MuZGF0YVR5cGUgPT0gJ2pzb24nICYmICggdHlwZW9mIG1vY2tIYW5kbGVyLnJlc3BvbnNlVGV4dCA9PSAnb2JqZWN0JyApICkgewoJCQkJCQl0aGlzLnJlc3BvbnNlVGV4dCA9IEpTT04uc3RyaW5naWZ5KG1vY2tIYW5kbGVyLnJlc3BvbnNlVGV4dCk7CgkJCQkJfSBlbHNlIGlmICggcmVxdWVzdFNldHRpbmdzLmRhdGFUeXBlID09ICd4bWwnICkgewoJCQkJCQlpZiAoIHR5cGVvZiBtb2NrSGFuZGxlci5yZXNwb25zZVhNTCA9PSAnc3RyaW5nJyApIHsKCQkJCQkJCXRoaXMucmVzcG9uc2VYTUwgPSBwYXJzZVhNTChtb2NrSGFuZGxlci5yZXNwb25zZVhNTCk7CgkJCQkJCQkvL2luIGpRdWVyeSAxLjkuMSssIHJlc3BvbnNlWE1MIGlzIHByb2Nlc3NlZCBkaWZmZXJlbnRseSBhbmQgcmVsaWVzIG9uIHJlc3BvbnNlVGV4dAoJCQkJCQkJdGhpcy5yZXNwb25zZVRleHQgPSBtb2NrSGFuZGxlci5yZXNwb25zZVhNTDsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXRoaXMucmVzcG9uc2VYTUwgPSBtb2NrSGFuZGxlci5yZXNwb25zZVhNTDsKCQkJCQkJfQoJCQkJCX0gZWxzZSB7CgkJCQkJCXRoaXMucmVzcG9uc2VUZXh0ID0gbW9ja0hhbmRsZXIucmVzcG9uc2VUZXh0OwoJCQkJCX0KCQkJCQlpZiggdHlwZW9mIG1vY2tIYW5kbGVyLnN0YXR1cyA9PSAnbnVtYmVyJyB8fCB0eXBlb2YgbW9ja0hhbmRsZXIuc3RhdHVzID09ICdzdHJpbmcnICkgewoJCQkJCQl0aGlzLnN0YXR1cyA9IG1vY2tIYW5kbGVyLnN0YXR1czsKCQkJCQl9CgkJCQkJaWYoIHR5cGVvZiBtb2NrSGFuZGxlci5zdGF0dXNUZXh0ID09PSAic3RyaW5nIikgewoJCQkJCQl0aGlzLnN0YXR1c1RleHQgPSBtb2NrSGFuZGxlci5zdGF0dXNUZXh0OwoJCQkJCX0KCQkJCQkvLyBqUXVlcnkgMi4wIHJlbmFtZWQgb25yZWFkeXN0YXRlY2hhbmdlIHRvIG9ubG9hZAoJCQkJCW9uUmVhZHkgPSB0aGlzLm9ucmVhZHlzdGF0ZWNoYW5nZSB8fCB0aGlzLm9ubG9hZDsKCgkJCQkJLy8galF1ZXJ5IDwgMS40IGRvZXNuJ3QgaGF2ZSBvbnJlYWR5c3RhdGUgY2hhbmdlIGZvciB4aHIKCQkJCQlpZiAoICQuaXNGdW5jdGlvbiggb25SZWFkeSApICkgewoJCQkJCQlpZiggbW9ja0hhbmRsZXIuaXNUaW1lb3V0KSB7CgkJCQkJCQl0aGlzLnN0YXR1cyA9IC0xOwoJCQkJCQl9CgkJCQkJCW9uUmVhZHkuY2FsbCggdGhpcywgbW9ja0hhbmRsZXIuaXNUaW1lb3V0ID8gJ3RpbWVvdXQnIDogdW5kZWZpbmVkICk7CgkJCQkJfSBlbHNlIGlmICggbW9ja0hhbmRsZXIuaXNUaW1lb3V0ICkgewoJCQkJCQkvLyBGaXggZm9yIDEuMy4yIHRpbWVvdXQgdG8ga2VlcCBzdWNjZXNzIGZyb20gZmlyaW5nLgoJCQkJCQl0aGlzLnN0YXR1cyA9IC0xOwoJCQkJCX0KCQkJCX0pLmFwcGx5KHRoYXQpOwoJCQl9OwoJCX0pKHRoaXMpOwoKCQlpZiAoIG1vY2tIYW5kbGVyLnByb3h5ICkgewoJCQkvLyBXZSdyZSBwcm94eWluZyB0aGlzIHJlcXVlc3QgYW5kIGxvYWRpbmcgaW4gYW4gZXh0ZXJuYWwgZmlsZSBpbnN0ZWFkCgkJCV9hamF4KHsKCQkJCWdsb2JhbDogZmFsc2UsCgkJCQl1cmw6IG1vY2tIYW5kbGVyLnByb3h5LAoJCQkJdHlwZTogbW9ja0hhbmRsZXIucHJveHlUeXBlLAoJCQkJZGF0YTogbW9ja0hhbmRsZXIuZGF0YSwKCQkJCWRhdGFUeXBlOiByZXF1ZXN0U2V0dGluZ3MuZGF0YVR5cGUgPT09ICJzY3JpcHQiID8gInRleHQvcGxhaW4iIDogcmVxdWVzdFNldHRpbmdzLmRhdGFUeXBlLAoJCQkJY29tcGxldGU6IGZ1bmN0aW9uKHhocikgewoJCQkJCW1vY2tIYW5kbGVyLnJlc3BvbnNlWE1MID0geGhyLnJlc3BvbnNlWE1MOwoJCQkJCW1vY2tIYW5kbGVyLnJlc3BvbnNlVGV4dCA9IHhoci5yZXNwb25zZVRleHQ7CiAgICAgICAgICAgICAgICAgICAgLy8gRG9uJ3Qgb3ZlcnJpZGUgdGhlIGhhbmRsZXIgc3RhdHVzL3N0YXR1c1RleHQgaWYgaXQncyBzcGVjaWZpZWQgYnkgdGhlIGNvbmZpZwogICAgICAgICAgICAgICAgICAgIGlmIChpc0RlZmF1bHRTZXR0aW5nKG1vY2tIYW5kbGVyLCAnc3RhdHVzJykpIHsKCQkJCQkgICAgbW9ja0hhbmRsZXIuc3RhdHVzID0geGhyLnN0YXR1czsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGVmYXVsdFNldHRpbmcobW9ja0hhbmRsZXIsICdzdGF0dXNUZXh0JykpIHsKCQkJCQkgICAgbW9ja0hhbmRsZXIuc3RhdHVzVGV4dCA9IHhoci5zdGF0dXNUZXh0OwogICAgICAgICAgICAgICAgICAgIH0KCgkJCQkJdGhpcy5yZXNwb25zZVRpbWVyID0gc2V0VGltZW91dChwcm9jZXNzLCBtb2NrSGFuZGxlci5yZXNwb25zZVRpbWUgfHwgMCk7CgkJCQl9CgkJCX0pOwoJCX0gZWxzZSB7CgkJCS8vIHR5cGUgPT0gJ1BPU1QnIHx8ICdHRVQnIHx8ICdERUxFVEUnCgkJCWlmICggcmVxdWVzdFNldHRpbmdzLmFzeW5jID09PSBmYWxzZSApIHsKCQkJCS8vIFRPRE86IEJsb2NraW5nIGRlbGF5CgkJCQlwcm9jZXNzKCk7CgkJCX0gZWxzZSB7CgkJCQl0aGlzLnJlc3BvbnNlVGltZXIgPSBzZXRUaW1lb3V0KHByb2Nlc3MsIG1vY2tIYW5kbGVyLnJlc3BvbnNlVGltZSB8fCA1MCk7CgkJCX0KCQl9Cgl9CgoJLy8gQ29uc3RydWN0IGEgbW9ja2VkIFhIUiBPYmplY3QKCWZ1bmN0aW9uIHhocihtb2NrSGFuZGxlciwgcmVxdWVzdFNldHRpbmdzLCBvcmlnU2V0dGluZ3MsIG9yaWdIYW5kbGVyKSB7CgkJLy8gRXh0ZW5kIHdpdGggb3VyIGRlZmF1bHQgbW9ja2pheCBzZXR0aW5ncwoJCW1vY2tIYW5kbGVyID0gJC5leHRlbmQodHJ1ZSwge30sICQubW9ja2pheFNldHRpbmdzLCBtb2NrSGFuZGxlcik7CgoJCWlmICh0eXBlb2YgbW9ja0hhbmRsZXIuaGVhZGVycyA9PT0gJ3VuZGVmaW5lZCcpIHsKCQkJbW9ja0hhbmRsZXIuaGVhZGVycyA9IHt9OwoJCX0KCQlpZiAoIG1vY2tIYW5kbGVyLmNvbnRlbnRUeXBlICkgewoJCQltb2NrSGFuZGxlci5oZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IG1vY2tIYW5kbGVyLmNvbnRlbnRUeXBlOwoJCX0KCgkJcmV0dXJuIHsKCQkJc3RhdHVzOiBtb2NrSGFuZGxlci5zdGF0dXMsCgkJCXN0YXR1c1RleHQ6IG1vY2tIYW5kbGVyLnN0YXR1c1RleHQsCgkJCXJlYWR5U3RhdGU6IDEsCgkJCW9wZW46IGZ1bmN0aW9uKCkgeyB9LAoJCQlzZW5kOiBmdW5jdGlvbigpIHsKCQkJCW9yaWdIYW5kbGVyLmZpcmVkID0gdHJ1ZTsKCQkJCV94aHJTZW5kLmNhbGwodGhpcywgbW9ja0hhbmRsZXIsIHJlcXVlc3RTZXR0aW5ncywgb3JpZ1NldHRpbmdzKTsKCQkJfSwKCQkJYWJvcnQ6IGZ1bmN0aW9uKCkgewoJCQkJY2xlYXJUaW1lb3V0KHRoaXMucmVzcG9uc2VUaW1lcik7CgkJCX0sCgkJCXNldFJlcXVlc3RIZWFkZXI6IGZ1bmN0aW9uKGhlYWRlciwgdmFsdWUpIHsKCQkJCW1vY2tIYW5kbGVyLmhlYWRlcnNbaGVhZGVyXSA9IHZhbHVlOwoJCQl9LAoJCQlnZXRSZXNwb25zZUhlYWRlcjogZnVuY3Rpb24oaGVhZGVyKSB7CgkJCQkvLyAnTGFzdC1tb2RpZmllZCcsICdFdGFnJywgJ2NvbnRlbnQtdHlwZScgYXJlIGFsbCBjaGVja2VkIGJ5IGpRdWVyeQoJCQkJaWYgKCBtb2NrSGFuZGxlci5oZWFkZXJzICYmIG1vY2tIYW5kbGVyLmhlYWRlcnNbaGVhZGVyXSApIHsKCQkJCQkvLyBSZXR1cm4gYXJiaXRyYXJ5IGhlYWRlcnMKCQkJCQlyZXR1cm4gbW9ja0hhbmRsZXIuaGVhZGVyc1toZWFkZXJdOwoJCQkJfSBlbHNlIGlmICggaGVhZGVyLnRvTG93ZXJDYXNlKCkgPT0gJ2xhc3QtbW9kaWZpZWQnICkgewoJCQkJCXJldHVybiBtb2NrSGFuZGxlci5sYXN0TW9kaWZpZWQgfHwgKG5ldyBEYXRlKCkpLnRvU3RyaW5nKCk7CgkJCQl9IGVsc2UgaWYgKCBoZWFkZXIudG9Mb3dlckNhc2UoKSA9PSAnZXRhZycgKSB7CgkJCQkJcmV0dXJuIG1vY2tIYW5kbGVyLmV0YWcgfHwgJyc7CgkJCQl9IGVsc2UgaWYgKCBoZWFkZXIudG9Mb3dlckNhc2UoKSA9PSAnY29udGVudC10eXBlJyApIHsKCQkJCQlyZXR1cm4gbW9ja0hhbmRsZXIuY29udGVudFR5cGUgfHwgJ3RleHQvcGxhaW4nOwoJCQkJfQoJCQl9LAoJCQlnZXRBbGxSZXNwb25zZUhlYWRlcnM6IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGhlYWRlcnMgPSAnJzsKCQkJCSQuZWFjaChtb2NrSGFuZGxlci5oZWFkZXJzLCBmdW5jdGlvbihrLCB2KSB7CgkJCQkJaGVhZGVycyArPSBrICsgJzogJyArIHYgKyAiXG4iOwoJCQkJfSk7CgkJCQlyZXR1cm4gaGVhZGVyczsKCQkJfQoJCX07Cgl9CgoJLy8gUHJvY2VzcyBhIEpTT05QIG1vY2sgcmVxdWVzdC4KCWZ1bmN0aW9uIHByb2Nlc3NKc29ucE1vY2soIHJlcXVlc3RTZXR0aW5ncywgbW9ja0hhbmRsZXIsIG9yaWdTZXR0aW5ncyApIHsKCQkvLyBIYW5kbGUgSlNPTlAgUGFyYW1ldGVyIENhbGxiYWNrcywgd2UgbmVlZCB0byByZXBsaWNhdGUgc29tZSBvZiB0aGUgalF1ZXJ5IGNvcmUgaGVyZQoJCS8vIGJlY2F1c2UgdGhlcmUgaXNuJ3QgYW4gZWFzeSBob29rIGZvciB0aGUgY3Jvc3MgZG9tYWluIHNjcmlwdCB0YWcgb2YganNvbnAKCgkJcHJvY2Vzc0pzb25wVXJsKCByZXF1ZXN0U2V0dGluZ3MgKTsKCgkJcmVxdWVzdFNldHRpbmdzLmRhdGFUeXBlID0gImpzb24iOwoJCWlmKHJlcXVlc3RTZXR0aW5ncy5kYXRhICYmIENBTExCQUNLX1JFR0VYLnRlc3QocmVxdWVzdFNldHRpbmdzLmRhdGEpIHx8IENBTExCQUNLX1JFR0VYLnRlc3QocmVxdWVzdFNldHRpbmdzLnVybCkpIHsKCQkJY3JlYXRlSnNvbnBDYWxsYmFjayhyZXF1ZXN0U2V0dGluZ3MsIG1vY2tIYW5kbGVyLCBvcmlnU2V0dGluZ3MpOwoKCQkJLy8gV2UgbmVlZCB0byBtYWtlIHN1cmUKCQkJLy8gdGhhdCBhIEpTT05QIHN0eWxlIHJlc3BvbnNlIGlzIGV4ZWN1dGVkIHByb3Blcmx5CgoJCQl2YXIgcnVybCA9IC9eKFx3KzopP1wvXC8oW15cLz8jXSspLywKCQkJCXBhcnRzID0gcnVybC5leGVjKCByZXF1ZXN0U2V0dGluZ3MudXJsICksCgkJCQlyZW1vdGUgPSBwYXJ0cyAmJiAocGFydHNbMV0gJiYgcGFydHNbMV0gIT09IGxvY2F0aW9uLnByb3RvY29sIHx8IHBhcnRzWzJdICE9PSBsb2NhdGlvbi5ob3N0KTsKCgkJCXJlcXVlc3RTZXR0aW5ncy5kYXRhVHlwZSA9ICJzY3JpcHQiOwoJCQlpZihyZXF1ZXN0U2V0dGluZ3MudHlwZS50b1VwcGVyQ2FzZSgpID09PSAiR0VUIiAmJiByZW1vdGUgKSB7CgkJCQl2YXIgbmV3TW9ja1JldHVybiA9IHByb2Nlc3NKc29ucFJlcXVlc3QoIHJlcXVlc3RTZXR0aW5ncywgbW9ja0hhbmRsZXIsIG9yaWdTZXR0aW5ncyApOwoKCQkJCS8vIENoZWNrIGlmIHdlIGFyZSBzdXBwb3NlZCB0byByZXR1cm4gYSBEZWZlcnJlZCBiYWNrIHRvIHRoZSBtb2NrIGNhbGwsIG9yIGp1c3QKCQkJCS8vIHNpZ25hbCBzdWNjZXNzCgkJCQlpZihuZXdNb2NrUmV0dXJuKSB7CgkJCQkJcmV0dXJuIG5ld01vY2tSZXR1cm47CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiB0cnVlOwoJCQkJfQoJCQl9CgkJfQoJCXJldHVybiBudWxsOwoJfQoKCS8vIEFwcGVuZCB0aGUgcmVxdWlyZWQgY2FsbGJhY2sgcGFyYW1ldGVyIHRvIHRoZSBlbmQgb2YgdGhlIHJlcXVlc3QgVVJMLCBmb3IgYSBKU09OUCByZXF1ZXN0CglmdW5jdGlvbiBwcm9jZXNzSnNvbnBVcmwoIHJlcXVlc3RTZXR0aW5ncyApIHsKCQlpZiAoIHJlcXVlc3RTZXR0aW5ncy50eXBlLnRvVXBwZXJDYXNlKCkgPT09ICJHRVQiICkgewoJCQlpZiAoICFDQUxMQkFDS19SRUdFWC50ZXN0KCByZXF1ZXN0U2V0dGluZ3MudXJsICkgKSB7CgkJCQlyZXF1ZXN0U2V0dGluZ3MudXJsICs9ICgvXD8vLnRlc3QoIHJlcXVlc3RTZXR0aW5ncy51cmwgKSA\/ICImIiA6ICI\/IikgKwoJCQkJCShyZXF1ZXN0U2V0dGluZ3MuanNvbnAgfHwgImNhbGxiYWNrIikgKyAiPT8iOwoJCQl9CgkJfSBlbHNlIGlmICggIXJlcXVlc3RTZXR0aW5ncy5kYXRhIHx8ICFDQUxMQkFDS19SRUdFWC50ZXN0KHJlcXVlc3RTZXR0aW5ncy5kYXRhKSApIHsKCQkJcmVxdWVzdFNldHRpbmdzLmRhdGEgPSAocmVxdWVzdFNldHRpbmdzLmRhdGEgPyByZXF1ZXN0U2V0dGluZ3MuZGF0YSArICImIiA6ICIiKSArIChyZXF1ZXN0U2V0dGluZ3MuanNvbnAgfHwgImNhbGxiYWNrIikgKyAiPT8iOwoJCX0KCX0KCgkvLyBQcm9jZXNzIGEgSlNPTlAgcmVxdWVzdCBieSBldmFsdWF0aW5nIHRoZSBtb2NrZWQgcmVzcG9uc2UgdGV4dAoJZnVuY3Rpb24gcHJvY2Vzc0pzb25wUmVxdWVzdCggcmVxdWVzdFNldHRpbmdzLCBtb2NrSGFuZGxlciwgb3JpZ1NldHRpbmdzICkgewoJCS8vIFN5bnRoZXNpemUgdGhlIG1vY2sgcmVxdWVzdCBmb3IgYWRkaW5nIGEgc2NyaXB0IHRhZwoJCXZhciBjYWxsYmFja0NvbnRleHQgPSBvcmlnU2V0dGluZ3MgJiYgb3JpZ1NldHRpbmdzLmNvbnRleHQgfHwgcmVxdWVzdFNldHRpbmdzLAoJCQluZXdNb2NrID0gbnVsbDsKCgoJCS8vIElmIHRoZSByZXNwb25zZSBoYW5kbGVyIG9uIHRoZSBtb29jayBpcyBhIGZ1bmN0aW9uLCBjYWxsIGl0CgkJaWYgKCBtb2NrSGFuZGxlci5yZXNwb25zZSAmJiAkLmlzRnVuY3Rpb24obW9ja0hhbmRsZXIucmVzcG9uc2UpICkgewoJCQltb2NrSGFuZGxlci5yZXNwb25zZShvcmlnU2V0dGluZ3MpOwoJCX0gZWxzZSB7CgoJCQkvLyBFdmFsdWF0ZSB0aGUgcmVzcG9uc2VUZXh0IGphdmFzY3JpcHQgaW4gYSBnbG9iYWwgY29udGV4dAoJCQlpZiggdHlwZW9mIG1vY2tIYW5kbGVyLnJlc3BvbnNlVGV4dCA9PT0gJ29iamVjdCcgKSB7CgkJCQkkLmdsb2JhbEV2YWwoICcoJyArIEpTT04uc3RyaW5naWZ5KCBtb2NrSGFuZGxlci5yZXNwb25zZVRleHQgKSArICcpJyk7CgkJCX0gZWxzZSB7CgkJCQkkLmdsb2JhbEV2YWwoICcoJyArIG1vY2tIYW5kbGVyLnJlc3BvbnNlVGV4dCArICcpJyk7CgkJCX0KCQl9CgoJCS8vIFN1Y2Nlc3NmdWwgcmVzcG9uc2UKCQlqc29ucFN1Y2Nlc3MoIHJlcXVlc3RTZXR0aW5ncywgY2FsbGJhY2tDb250ZXh0LCBtb2NrSGFuZGxlciApOwoJCWpzb25wQ29tcGxldGUoIHJlcXVlc3RTZXR0aW5ncywgY2FsbGJhY2tDb250ZXh0LCBtb2NrSGFuZGxlciApOwoKCQkvLyBJZiB3ZSBhcmUgcnVubmluZyB1bmRlciBqUXVlcnkgMS41KywgcmV0dXJuIGEgZGVmZXJyZWQgb2JqZWN0CgkJaWYoJC5EZWZlcnJlZCl7CgkJCW5ld01vY2sgPSBuZXcgJC5EZWZlcnJlZCgpOwoJCQlpZih0eXBlb2YgbW9ja0hhbmRsZXIucmVzcG9uc2VUZXh0ID09ICJvYmplY3QiKXsKCQkJCW5ld01vY2sucmVzb2x2ZVdpdGgoIGNhbGxiYWNrQ29udGV4dCwgW21vY2tIYW5kbGVyLnJlc3BvbnNlVGV4dF0gKTsKCQkJfQoJCQllbHNlewoJCQkJbmV3TW9jay5yZXNvbHZlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbJC5wYXJzZUpTT04oIG1vY2tIYW5kbGVyLnJlc3BvbnNlVGV4dCApXSApOwoJCQl9CgkJfQoJCXJldHVybiBuZXdNb2NrOwoJfQoKCgkvLyBDcmVhdGUgdGhlIHJlcXVpcmVkIEpTT05QIGNhbGxiYWNrIGZ1bmN0aW9uIGZvciB0aGUgcmVxdWVzdAoJZnVuY3Rpb24gY3JlYXRlSnNvbnBDYWxsYmFjayggcmVxdWVzdFNldHRpbmdzLCBtb2NrSGFuZGxlciwgb3JpZ1NldHRpbmdzICkgewoJCXZhciBjYWxsYmFja0NvbnRleHQgPSBvcmlnU2V0dGluZ3MgJiYgb3JpZ1NldHRpbmdzLmNvbnRleHQgfHwgcmVxdWVzdFNldHRpbmdzOwoJCXZhciBqc29ucCA9IHJlcXVlc3RTZXR0aW5ncy5qc29ucENhbGxiYWNrIHx8ICgianNvbnAiICsganNjKyspOwoKCQkvLyBSZXBsYWNlIHRoZSA9PyBzZXF1ZW5jZSBib3RoIGluIHRoZSBxdWVyeSBzdHJpbmcgYW5kIHRoZSBkYXRhCgkJaWYgKCByZXF1ZXN0U2V0dGluZ3MuZGF0YSApIHsKCQkJcmVxdWVzdFNldHRpbmdzLmRhdGEgPSAocmVxdWVzdFNldHRpbmdzLmRhdGEgKyAiIikucmVwbGFjZShDQUxMQkFDS19SRUdFWCwgIj0iICsganNvbnAgKyAiJDEiKTsKCQl9CgoJCXJlcXVlc3RTZXR0aW5ncy51cmwgPSByZXF1ZXN0U2V0dGluZ3MudXJsLnJlcGxhY2UoQ0FMTEJBQ0tfUkVHRVgsICI9IiArIGpzb25wICsgIiQxIik7CgoKCQkvLyBIYW5kbGUgSlNPTlAtc3R5bGUgbG9hZGluZwoJCXdpbmRvd1sganNvbnAgXSA9IHdpbmRvd1sganNvbnAgXSB8fCBmdW5jdGlvbiggdG1wICkgewoJCQlkYXRhID0gdG1wOwoJCQlqc29ucFN1Y2Nlc3MoIHJlcXVlc3RTZXR0aW5ncywgY2FsbGJhY2tDb250ZXh0LCBtb2NrSGFuZGxlciApOwoJCQlqc29ucENvbXBsZXRlKCByZXF1ZXN0U2V0dGluZ3MsIGNhbGxiYWNrQ29udGV4dCwgbW9ja0hhbmRsZXIgKTsKCQkJLy8gR2FyYmFnZSBjb2xsZWN0CgkJCXdpbmRvd1sganNvbnAgXSA9IHVuZGVmaW5lZDsKCgkJCXRyeSB7CgkJCQlkZWxldGUgd2luZG93WyBqc29ucCBdOwoJCQl9IGNhdGNoKGUpIHt9CgoJCQlpZiAoIGhlYWQgKSB7CgkJCQloZWFkLnJlbW92ZUNoaWxkKCBzY3JpcHQgKTsKCQkJfQoJCX07Cgl9CgoJLy8gVGhlIEpTT05QIHJlcXVlc3Qgd2FzIHN1Y2Nlc3NmdWwKCWZ1bmN0aW9uIGpzb25wU3VjY2VzcyhyZXF1ZXN0U2V0dGluZ3MsIGNhbGxiYWNrQ29udGV4dCwgbW9ja0hhbmRsZXIpIHsKCQkvLyBJZiBhIGxvY2FsIGNhbGxiYWNrIHdhcyBzcGVjaWZpZWQsIGZpcmUgaXQgYW5kIHBhc3MgaXQgdGhlIGRhdGEKCQlpZiAoIHJlcXVlc3RTZXR0aW5ncy5zdWNjZXNzICkgewoJCQlyZXF1ZXN0U2V0dGluZ3Muc3VjY2Vzcy5jYWxsKCBjYWxsYmFja0NvbnRleHQsIG1vY2tIYW5kbGVyLnJlc3BvbnNlVGV4dCB8fCAiIiwgc3RhdHVzLCB7fSApOwoJCX0KCgkJLy8gRmlyZSB0aGUgZ2xvYmFsIGNhbGxiYWNrCgkJaWYgKCByZXF1ZXN0U2V0dGluZ3MuZ2xvYmFsICkgewoJCQl0cmlnZ2VyKHJlcXVlc3RTZXR0aW5ncywgImFqYXhTdWNjZXNzIiwgW3t9LCByZXF1ZXN0U2V0dGluZ3NdICk7CgkJfQoJfQoKCS8vIFRoZSBKU09OUCByZXF1ZXN0IHdhcyBjb21wbGV0ZWQKCWZ1bmN0aW9uIGpzb25wQ29tcGxldGUocmVxdWVzdFNldHRpbmdzLCBjYWxsYmFja0NvbnRleHQpIHsKCQkvLyBQcm9jZXNzIHJlc3VsdAoJCWlmICggcmVxdWVzdFNldHRpbmdzLmNvbXBsZXRlICkgewoJCQlyZXF1ZXN0U2V0dGluZ3MuY29tcGxldGUuY2FsbCggY2FsbGJhY2tDb250ZXh0LCB7fSAsIHN0YXR1cyApOwoJCX0KCgkJLy8gVGhlIHJlcXVlc3Qgd2FzIGNvbXBsZXRlZAoJCWlmICggcmVxdWVzdFNldHRpbmdzLmdsb2JhbCApIHsKCQkJdHJpZ2dlciggImFqYXhDb21wbGV0ZSIsIFt7fSwgcmVxdWVzdFNldHRpbmdzXSApOwoJCX0KCgkJLy8gSGFuZGxlIHRoZSBnbG9iYWwgQUpBWCBjb3VudGVyCgkJaWYgKCByZXF1ZXN0U2V0dGluZ3MuZ2xvYmFsICYmICEgLS0kLmFjdGl2ZSApIHsKCQkJJC5ldmVudC50cmlnZ2VyKCAiYWpheFN0b3AiICk7CgkJfQoJfQoKCgkvLyBUaGUgY29yZSAkLmFqYXggcmVwbGFjZW1lbnQuCglmdW5jdGlvbiBoYW5kbGVBamF4KCB1cmwsIG9yaWdTZXR0aW5ncyApIHsKCQl2YXIgbW9ja1JlcXVlc3QsIHJlcXVlc3RTZXR0aW5ncywgbW9ja0hhbmRsZXI7CgoJCS8vIElmIHVybCBpcyBhbiBvYmplY3QsIHNpbXVsYXRlIHByZS0xLjUgc2lnbmF0dXJlCgkJaWYgKCB0eXBlb2YgdXJsID09PSAib2JqZWN0IiApIHsKCQkJb3JpZ1NldHRpbmdzID0gdXJsOwoJCQl1cmwgPSB1bmRlZmluZWQ7CgkJfSBlbHNlIHsKCQkJLy8gd29yayBhcm91bmQgdG8gc3VwcG9ydCAxLjUgc2lnbmF0dXJlCgkJCW9yaWdTZXR0aW5ncy51cmwgPSB1cmw7CgkJfQoKCQkvLyBFeHRlbmQgdGhlIG9yaWdpbmFsIHNldHRpbmdzIGZvciB0aGUgcmVxdWVzdAoJCXJlcXVlc3RTZXR0aW5ncyA9ICQuZXh0ZW5kKHRydWUsIHt9LCAkLmFqYXhTZXR0aW5ncywgb3JpZ1NldHRpbmdzKTsKCgkJLy8gSXRlcmF0ZSBvdmVyIG91ciBtb2NrIGhhbmRsZXJzIChpbiByZWdpc3RyYXRpb24gb3JkZXIpIHVudGlsIHdlIGZpbmQKCQkvLyBvbmUgdGhhdCBpcyB3aWxsaW5nIHRvIGludGVyY2VwdCB0aGUgcmVxdWVzdAoJCWZvcih2YXIgayA9IDA7IGsgPCBtb2NrSGFuZGxlcnMubGVuZ3RoOyBrKyspIHsKCQkJaWYgKCAhbW9ja0hhbmRsZXJzW2tdICkgewoJCQkJY29udGludWU7CgkJCX0KCgkJCW1vY2tIYW5kbGVyID0gZ2V0TW9ja0ZvclJlcXVlc3QoIG1vY2tIYW5kbGVyc1trXSwgcmVxdWVzdFNldHRpbmdzICk7CgkJCWlmKCFtb2NrSGFuZGxlcikgewoJCQkJLy8gTm8gdmFsaWQgbW9jayBmb3VuZCBmb3IgdGhpcyByZXF1ZXN0CgkJCQljb250aW51ZTsKCQkJfQoKCQkJbW9ja2VkQWpheENhbGxzLnB1c2gocmVxdWVzdFNldHRpbmdzKTsKCgkJCS8vIElmIGxvZ2dpbmcgaXMgZW5hYmxlZCwgbG9nIHRoZSBtb2NrIHRvIHRoZSBjb25zb2xlCgkJCSQubW9ja2pheFNldHRpbmdzLmxvZyggbW9ja0hhbmRsZXIsIHJlcXVlc3RTZXR0aW5ncyApOwoKCgkJCWlmICggcmVxdWVzdFNldHRpbmdzLmRhdGFUeXBlID09PSAianNvbnAiICkgewoJCQkJaWYgKChtb2NrUmVxdWVzdCA9IHByb2Nlc3NKc29ucE1vY2soIHJlcXVlc3RTZXR0aW5ncywgbW9ja0hhbmRsZXIsIG9yaWdTZXR0aW5ncyApKSkgewoJCQkJCS8vIFRoaXMgbW9jayB3aWxsIGhhbmRsZSB0aGUgSlNPTlAgcmVxdWVzdAoJCQkJCXJldHVybiBtb2NrUmVxdWVzdDsKCQkJCX0KCQkJfQoKCgkJCS8vIFJlbW92ZWQgdG8gZml4ICM1NCAtIGtlZXAgdGhlIG1vY2tpbmcgZGF0YSBvYmplY3QgaW50YWN0CgkJCS8vbW9ja0hhbmRsZXIuZGF0YSA9IHJlcXVlc3RTZXR0aW5ncy5kYXRhOwoKCQkJbW9ja0hhbmRsZXIuY2FjaGUgPSByZXF1ZXN0U2V0dGluZ3MuY2FjaGU7CgkJCW1vY2tIYW5kbGVyLnRpbWVvdXQgPSByZXF1ZXN0U2V0dGluZ3MudGltZW91dDsKCQkJbW9ja0hhbmRsZXIuZ2xvYmFsID0gcmVxdWVzdFNldHRpbmdzLmdsb2JhbDsKCgkJCWNvcHlVcmxQYXJhbWV0ZXJzKG1vY2tIYW5kbGVyLCBvcmlnU2V0dGluZ3MpOwoKCQkJKGZ1bmN0aW9uKG1vY2tIYW5kbGVyLCByZXF1ZXN0U2V0dGluZ3MsIG9yaWdTZXR0aW5ncywgb3JpZ0hhbmRsZXIpIHsKCQkJCW1vY2tSZXF1ZXN0ID0gX2FqYXguY2FsbCgkLCAkLmV4dGVuZCh0cnVlLCB7fSwgb3JpZ1NldHRpbmdzLCB7CgkJCQkJLy8gTW9jayB0aGUgWEhSIG9iamVjdAoJCQkJCXhocjogZnVuY3Rpb24oKSB7IHJldHVybiB4aHIoIG1vY2tIYW5kbGVyLCByZXF1ZXN0U2V0dGluZ3MsIG9yaWdTZXR0aW5ncywgb3JpZ0hhbmRsZXIgKTsgfQoJCQkJfSkpOwoJCQl9KShtb2NrSGFuZGxlciwgcmVxdWVzdFNldHRpbmdzLCBvcmlnU2V0dGluZ3MsIG1vY2tIYW5kbGVyc1trXSk7CgoJCQlyZXR1cm4gbW9ja1JlcXVlc3Q7CgkJfQoKCQkvLyBXZSBkb24ndCBoYXZlIGEgbW9jayByZXF1ZXN0CgkJaWYoJC5tb2NramF4U2V0dGluZ3MudGhyb3dVbm1vY2tlZCA9PT0gdHJ1ZSkgewoJCQl0aHJvdygnQUpBWCBub3QgbW9ja2VkOiAnICsgb3JpZ1NldHRpbmdzLnVybCk7CgkJfQoJCWVsc2UgeyAvLyB0cmlnZ2VyIGEgbm9ybWFsIHJlcXVlc3QKCQkJcmV0dXJuIF9hamF4LmFwcGx5KCQsIFtvcmlnU2V0dGluZ3NdKTsKCQl9Cgl9CgoJLyoqCgkqIENvcGllcyBVUkwgcGFyYW1ldGVyIHZhbHVlcyBpZiB0aGV5IHdlcmUgY2FwdHVyZWQgYnkgYSByZWd1bGFyIGV4cHJlc3Npb24KCSogQHBhcmFtIHtPYmplY3R9IG1vY2tIYW5kbGVyCgkqIEBwYXJhbSB7T2JqZWN0fSBvcmlnU2V0dGluZ3MKCSovCglmdW5jdGlvbiBjb3B5VXJsUGFyYW1ldGVycyhtb2NrSGFuZGxlciwgb3JpZ1NldHRpbmdzKSB7CgkJLy9wYXJhbWV0ZXJzIGFyZW4ndCBjYXB0dXJlZCBpZiB0aGUgVVJMIGlzbid0IGEgUmVnRXhwCgkJaWYgKCEobW9ja0hhbmRsZXIudXJsIGluc3RhbmNlb2YgUmVnRXhwKSkgewoJCQlyZXR1cm47CgkJfQoJCS8vaWYgbm8gVVJMIHBhcmFtcyB3ZXJlIGRlZmluZWQgb24gdGhlIGhhbmRsZXIsIGRvbid0IGF0dGVtcHQgYSBjYXB0dXJlCgkJaWYgKCFtb2NrSGFuZGxlci5oYXNPd25Qcm9wZXJ0eSgndXJsUGFyYW1zJykpIHsKCQkJcmV0dXJuOwoJCX0KCQl2YXIgY2FwdHVyZXMgPSBtb2NrSGFuZGxlci51cmwuZXhlYyhvcmlnU2V0dGluZ3MudXJsKTsKCQkvL3RoZSB3aG9sZSBSZWdFeHAgbWF0Y2ggaXMgYWx3YXlzIHRoZSBmaXJzdCB2YWx1ZSBpbiB0aGUgY2FwdHVyZSByZXN1bHRzCgkJaWYgKGNhcHR1cmVzLmxlbmd0aCA9PT0gMSkgewoJCQlyZXR1cm47CgkJfQoJCWNhcHR1cmVzLnNoaWZ0KCk7CgkJLy91c2UgaGFuZGxlciBwYXJhbXMgYXMga2V5cyBhbmQgY2FwdHVyZSByZXN1dHMgYXMgdmFsdWVzCgkJdmFyIGkgPSAwLAoJCWNhcHR1cmVzTGVuZ3RoID0gY2FwdHVyZXMubGVuZ3RoLAoJCXBhcmFtc0xlbmd0aCA9IG1vY2tIYW5kbGVyLnVybFBhcmFtcy5sZW5ndGgsCgkJLy9pbiBjYXNlIHRoZSBudW1iZXIgb2YgcGFyYW1zIHNwZWNpZmllZCBpcyBsZXNzIHRoYW4gYWN0dWFsIGNhcHR1cmVzCgkJbWF4SXRlcmF0aW9ucyA9IE1hdGgubWluKGNhcHR1cmVzTGVuZ3RoLCBwYXJhbXNMZW5ndGgpLAoJCXBhcmFtVmFsdWVzID0ge307CgkJZm9yIChpOyBpIDwgbWF4SXRlcmF0aW9uczsgaSsrKSB7CgkJCXZhciBrZXkgPSBtb2NrSGFuZGxlci51cmxQYXJhbXNbaV07CgkJCXBhcmFtVmFsdWVzW2tleV0gPSBjYXB0dXJlc1tpXTsKCQl9CgkJb3JpZ1NldHRpbmdzLnVybFBhcmFtcyA9IHBhcmFtVmFsdWVzOwoJfQoKCgkvLyBQdWJsaWMKCgkkLmV4dGVuZCh7CgkJYWpheDogaGFuZGxlQWpheAoJfSk7CgoJJC5tb2NramF4U2V0dGluZ3MgPSB7CgkJLy91cmw6ICAgICAgICBudWxsLAoJCS8vdHlwZTogICAgICAgJ0dFVCcsCgkJbG9nOiAgICAgICAgICBmdW5jdGlvbiggbW9ja0hhbmRsZXIsIHJlcXVlc3RTZXR0aW5ncyApIHsKCQkJaWYgKCBtb2NrSGFuZGxlci5sb2dnaW5nID09PSBmYWxzZSB8fAoJCQkJICggdHlwZW9mIG1vY2tIYW5kbGVyLmxvZ2dpbmcgPT09ICd1bmRlZmluZWQnICYmICQubW9ja2pheFNldHRpbmdzLmxvZ2dpbmcgPT09IGZhbHNlICkgKSB7CgkJCQlyZXR1cm47CgkJCX0KCQkJaWYgKCB3aW5kb3cuY29uc29sZSAmJiBjb25zb2xlLmxvZyApIHsKCQkJCXZhciBtZXNzYWdlID0gJ01PQ0sgJyArIHJlcXVlc3RTZXR0aW5ncy50eXBlLnRvVXBwZXJDYXNlKCkgKyAnOiAnICsgcmVxdWVzdFNldHRpbmdzLnVybDsKCQkJCXZhciByZXF1ZXN0ID0gJC5leHRlbmQoe30sIHJlcXVlc3RTZXR0aW5ncyk7CgoJCQkJaWYgKHR5cGVvZiBjb25zb2xlLmxvZyA9PT0gJ2Z1bmN0aW9uJykgewoJCQkJCWNvbnNvbGUubG9nKG1lc3NhZ2UsIHJlcXVlc3QpOwoJCQkJfSBlbHNlIHsKCQkJCQl0cnkgewoJCQkJCQljb25zb2xlLmxvZyggbWVzc2FnZSArICcgJyArIEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpICk7CgkJCQkJfSBjYXRjaCAoZSkgewoJCQkJCQljb25zb2xlLmxvZyhtZXNzYWdlKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9LAoJCWxvZ2dpbmc6ICAgICAgIHRydWUsCgkJc3RhdHVzOiAgICAgICAgMjAwLAoJCXN0YXR1c1RleHQ6ICAgICJPSyIsCgkJcmVzcG9uc2VUaW1lOiAgNTAwLAoJCWlzVGltZW91dDogICAgIGZhbHNlLAoJCXRocm93VW5tb2NrZWQ6IGZhbHNlLAoJCWNvbnRlbnRUeXBlOiAgICd0ZXh0L3BsYWluJywKCQlyZXNwb25zZTogICAgICAnJywKCQlyZXNwb25zZVRleHQ6ICAnJywKCQlyZXNwb25zZVhNTDogICAnJywKCQlwcm94eTogICAgICAgICAnJywKCQlwcm94eVR5cGU6ICAgICAnR0VUJywKCgkJbGFzdE1vZGlmaWVkOiAgbnVsbCwKCQlldGFnOiAgICAgICAgICAnJywKCQloZWFkZXJzOiB7CgkJCWV0YWc6ICdJSkZASCNAOTIzdWY4MDIzaEZPQEkjSCMnLAoJCQknY29udGVudC10eXBlJyA6ICd0ZXh0L3BsYWluJwoJCX0KCX07CgoJJC5tb2NramF4ID0gZnVuY3Rpb24oc2V0dGluZ3MpIHsKCQl2YXIgaSA9IG1vY2tIYW5kbGVycy5sZW5ndGg7CgkJbW9ja0hhbmRsZXJzW2ldID0gc2V0dGluZ3M7CgkJcmV0dXJuIGk7Cgl9OwoJJC5tb2NramF4Q2xlYXIgPSBmdW5jdGlvbihpKSB7CgkJaWYgKCBhcmd1bWVudHMubGVuZ3RoID09IDEgKSB7CgkJCW1vY2tIYW5kbGVyc1tpXSA9IG51bGw7CgkJfSBlbHNlIHsKCQkJbW9ja0hhbmRsZXJzID0gW107CgkJfQoJCW1vY2tlZEFqYXhDYWxscyA9IFtdOwoJfTsKCSQubW9ja2pheC5oYW5kbGVyID0gZnVuY3Rpb24oaSkgewoJCWlmICggYXJndW1lbnRzLmxlbmd0aCA9PSAxICkgewoJCQlyZXR1cm4gbW9ja0hhbmRsZXJzW2ldOwoJCX0KCX07CgkkLm1vY2tqYXgubW9ja2VkQWpheENhbGxzID0gZnVuY3Rpb24oKSB7CgkJcmV0dXJuIG1vY2tlZEFqYXhDYWxsczsKCX07Cn0pKGpRdWVyeSk7Cg==",
    "size": "18880"
}