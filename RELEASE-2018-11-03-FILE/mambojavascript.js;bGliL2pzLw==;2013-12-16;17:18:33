{
    "namaFile": "lib\/js\/mambojavascript.js",
    "lastUpdate": "2013-12-16+17:18:33.00",
    "contentFile": "Ly8gPD9waHAgISEgVGhpcyBmb29scyBwaHBkb2N1bWVudG9yIGludG8gcGFyc2luZyB0aGlzIGZpbGUNCi8qKg0KKiBAdmVyc2lvbiAkSWQ6IG1hbWJvamF2YXNjcmlwdC5qcyAzNTY0IDIwMDYtMDUtMjAgMTI6Mjc6NDlaIHN0aW5ncmV5ICQNCiogQHBhY2thZ2UgSm9vbWxhDQoqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChDKSAyMDA1IE9wZW4gU291cmNlIE1hdHRlcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuDQoqIEBsaWNlbnNlIGh0dHA6Ly93d3cuZ251Lm9yZy9jb3B5bGVmdC9ncGwuaHRtbCBHTlUvR1BMDQoqIEpvb21sYSEgaXMgRnJlZSBTb2Z0d2FyZQ0KKi8NCg0KLy8gZ2VuZXJhbCB1dGlsaXR5IGZvciBicm93c2luZyBhIG5hbWVkIGFycmF5IG9yIG9iamVjdA0KZnVuY3Rpb24geHNob3cobykgew0KCXMgPSAnJzsNCglmb3IoZSBpbiBvKSB7cyArPSBlKyc9JytvW2VdKydcbic7fQ0KCWFsZXJ0KCBzICk7DQp9DQoNCi8qKg0KKiBXcml0ZXMgYSBkeW5hbWljYWxseSBnZW5lcmF0ZWQgbGlzdA0KKiBAcGFyYW0gc3RyaW5nIFRoZSBwYXJhbWV0ZXJzIHRvIGluc2VydCBpbnRvIHRoZSA8c2VsZWN0PiB0YWcNCiogQHBhcmFtIGFycmF5IEEgamF2YXNjcmlwdCBhcnJheSBvZiBsaXN0IG9wdGlvbnMgaW4gdGhlIGZvcm0gW2tleSx2YWx1ZSx0ZXh0XQ0KKiBAcGFyYW0gc3RyaW5nIFRoZSBrZXkgdG8gZGlzcGxheSBmb3IgdGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIGxpc3QNCiogQHBhcmFtIHN0cmluZyBUaGUgb3JpZ2luYWwga2V5IHRoYXQgd2FzIHNlbGVjdGVkDQoqIEBwYXJhbSBzdHJpbmcgVGhlIG9yaWdpbmFsIGl0ZW0gdmFsdWUgdGhhdCB3YXMgc2VsZWN0ZWQNCiovDQpmdW5jdGlvbiB3cml0ZUR5bmFMaXN0KCBzZWxlY3RQYXJhbXMsIHNvdXJjZSwga2V5LCBvcmlnX2tleSwgb3JpZ192YWwgKSB7DQoJdmFyIGh0bWwgPSAnXG4JPHNlbGVjdCAnICsgc2VsZWN0UGFyYW1zICsgJz4nOw0KCXZhciBpID0gMDsNCglmb3IgKHggaW4gc291cmNlKSB7DQoJCWlmIChzb3VyY2VbeF1bMF0gPT0ga2V5KSB7DQoJCQl2YXIgc2VsZWN0ZWQgPSAnJzsNCgkJCWlmICgob3JpZ19rZXkgPT0ga2V5ICYmIG9yaWdfdmFsID09IHNvdXJjZVt4XVsxXSkgfHwgKGkgPT0gMCAmJiBvcmlnX2tleSAhPSBrZXkpKSB7DQoJCQkJc2VsZWN0ZWQgPSAnc2VsZWN0ZWQ9InNlbGVjdGVkIic7DQoJCQl9DQoJCQlodG1sICs9ICdcbgkJPG9wdGlvbiB2YWx1ZT0iJytzb3VyY2VbeF1bMV0rJyIgJytzZWxlY3RlZCsnPicrc291cmNlW3hdWzJdKyc8L29wdGlvbj4nOw0KCQl9DQoJCWkrKzsNCgl9DQoJaHRtbCArPSAnXG4JPC9zZWxlY3Q+JzsNCg0KCWRvY3VtZW50LndyaXRlbG4oIGh0bWwgKTsNCn0NCg0KLyoqDQoqIENoYW5nZXMgYSBkeW5hbWljYWxseSBnZW5lcmF0ZWQgbGlzdA0KKiBAcGFyYW0gc3RyaW5nIFRoZSBuYW1lIG9mIHRoZSBsaXN0IHRvIGNoYW5nZQ0KKiBAcGFyYW0gYXJyYXkgQSBqYXZhc2NyaXB0IGFycmF5IG9mIGxpc3Qgb3B0aW9ucyBpbiB0aGUgZm9ybSBba2V5LHZhbHVlLHRleHRdDQoqIEBwYXJhbSBzdHJpbmcgVGhlIGtleSB0byBkaXNwbGF5DQoqIEBwYXJhbSBzdHJpbmcgVGhlIG9yaWdpbmFsIGtleSB0aGF0IHdhcyBzZWxlY3RlZA0KKiBAcGFyYW0gc3RyaW5nIFRoZSBvcmlnaW5hbCBpdGVtIHZhbHVlIHRoYXQgd2FzIHNlbGVjdGVkDQoqLw0KZnVuY3Rpb24gY2hhbmdlRHluYUxpc3QoIGxpc3RuYW1lLCBzb3VyY2UsIGtleSwgb3JpZ19rZXksIG9yaWdfdmFsICkgew0KCXZhciBsaXN0ID0gZXZhbCggJ2RvY3VtZW50LmFkbWluRm9ybS4nICsgbGlzdG5hbWUgKTsNCg0KCS8vIGVtcHR5IHRoZSBsaXN0DQoJZm9yIChpIGluIGxpc3Qub3B0aW9ucy5sZW5ndGgpIHsNCgkJbGlzdC5vcHRpb25zW2ldID0gbnVsbDsNCgl9DQoJaSA9IDA7DQoJZm9yICh4IGluIHNvdXJjZSkgew0KCQlpZiAoc291cmNlW3hdWzBdID09IGtleSkgew0KCQkJb3B0ID0gbmV3IE9wdGlvbigpOw0KCQkJb3B0LnZhbHVlID0gc291cmNlW3hdWzFdOw0KCQkJb3B0LnRleHQgPSBzb3VyY2VbeF1bMl07DQoNCgkJCWlmICgob3JpZ19rZXkgPT0ga2V5ICYmIG9yaWdfdmFsID09IG9wdC52YWx1ZSkgfHwgaSA9PSAwKSB7DQoJCQkJb3B0LnNlbGVjdGVkID0gdHJ1ZTsNCgkJCX0NCgkJCWxpc3Qub3B0aW9uc1tpKytdID0gb3B0Ow0KCQl9DQoJfQ0KCWxpc3QubGVuZ3RoID0gaTsNCn0NCg0KLyoqDQoqIEFkZHMgYSBzZWxlY3QgaXRlbShzKSBmcm9tIG9uZSBsaXN0IHRvIGFub3RoZXINCiovDQpmdW5jdGlvbiBhZGRTZWxlY3RlZFRvTGlzdCggZnJtTmFtZSwgc3JjTGlzdE5hbWUsIHRndExpc3ROYW1lICkgew0KCXZhciBmb3JtID0gZXZhbCggJ2RvY3VtZW50LicgKyBmcm1OYW1lICk7DQoJdmFyIHNyY0xpc3QgPSBldmFsKCAnZm9ybS4nICsgc3JjTGlzdE5hbWUgKTsNCgl2YXIgdGd0TGlzdCA9IGV2YWwoICdmb3JtLicgKyB0Z3RMaXN0TmFtZSApOw0KDQoJdmFyIHNyY0xlbiA9IHNyY0xpc3QubGVuZ3RoOw0KCXZhciB0Z3RMZW4gPSB0Z3RMaXN0Lmxlbmd0aDsNCgl2YXIgdGd0ID0gIngiOw0KDQoJLy9idWlsZCBhcnJheSBvZiB0YXJnZXQgaXRlbXMNCglmb3IgKHZhciBpPXRndExlbi0xOyBpID4gLTE7IGktLSkgew0KCQl0Z3QgKz0gIiwiICsgdGd0TGlzdC5vcHRpb25zW2ldLnZhbHVlICsgIiwiDQoJfQ0KDQoJLy9QdWxsIHNlbGVjdGVkIHJlc291cmNlcyBhbmQgYWRkIHRoZW0gdG8gbGlzdA0KCWZvciAodmFyIGk9c3JjTGVuLTE7IGkgPiAtMTsgaS0tKSB7DQoJCWlmIChzcmNMaXN0Lm9wdGlvbnNbaV0uc2VsZWN0ZWQgJiYgdGd0LmluZGV4T2YoICIsIiArIHNyY0xpc3Qub3B0aW9uc1tpXS52YWx1ZSArICIsIiApID09IC0xKSB7DQoJCQlvcHQgPSBuZXcgT3B0aW9uKCBzcmNMaXN0Lm9wdGlvbnNbaV0udGV4dCwgc3JjTGlzdC5vcHRpb25zW2ldLnZhbHVlICk7DQoJCQl0Z3RMaXN0Lm9wdGlvbnNbdGd0TGlzdC5sZW5ndGhdID0gb3B0Ow0KCQl9DQoJfQ0KfQ0KDQpmdW5jdGlvbiBkZWxTZWxlY3RlZEZyb21MaXN0KCBmcm1OYW1lLCBzcmNMaXN0TmFtZSApIHsNCgl2YXIgZm9ybSA9IGV2YWwoICdkb2N1bWVudC4nICsgZnJtTmFtZSApOw0KCXZhciBzcmNMaXN0ID0gZXZhbCggJ2Zvcm0uJyArIHNyY0xpc3ROYW1lICk7DQoNCgl2YXIgc3JjTGVuID0gc3JjTGlzdC5sZW5ndGg7DQoNCglmb3IgKHZhciBpPXNyY0xlbi0xOyBpID4gLTE7IGktLSkgew0KCQlpZiAoc3JjTGlzdC5vcHRpb25zW2ldLnNlbGVjdGVkKSB7DQoJCQlzcmNMaXN0Lm9wdGlvbnNbaV0gPSBudWxsOw0KCQl9DQoJfQ0KfQ0KDQpmdW5jdGlvbiBtb3ZlSW5MaXN0KCBmcm1OYW1lLCBzcmNMaXN0TmFtZSwgaW5kZXgsIHRvKSB7DQoJdmFyIGZvcm0gPSBldmFsKCAnZG9jdW1lbnQuJyArIGZybU5hbWUgKTsNCgl2YXIgc3JjTGlzdCA9IGV2YWwoICdmb3JtLicgKyBzcmNMaXN0TmFtZSApOw0KCXZhciB0b3RhbCA9IHNyY0xpc3Qub3B0aW9ucy5sZW5ndGgtMTsNCg0KCWlmIChpbmRleCA9PSAtMSkgew0KCQlyZXR1cm4gZmFsc2U7DQoJfQ0KCWlmICh0byA9PSArMSAmJiBpbmRleCA9PSB0b3RhbCkgew0KCQlyZXR1cm4gZmFsc2U7DQoJfQ0KCWlmICh0byA9PSAtMSAmJiBpbmRleCA9PSAwKSB7DQoJCXJldHVybiBmYWxzZTsNCgl9DQoNCgl2YXIgaXRlbXMgPSBuZXcgQXJyYXk7DQoJdmFyIHZhbHVlcyA9IG5ldyBBcnJheTsNCg0KCWZvciAoaT10b3RhbDsgaSA+PSAwOyBpLS0pIHsNCgkJaXRlbXNbaV0gPSBzcmNMaXN0Lm9wdGlvbnNbaV0udGV4dDsNCgkJdmFsdWVzW2ldID0gc3JjTGlzdC5vcHRpb25zW2ldLnZhbHVlOw0KCX0NCglmb3IgKGkgPSB0b3RhbDsgaSA+PSAwOyBpLS0pIHsNCgkJaWYgKGluZGV4ID09IGkpIHsNCgkJCXNyY0xpc3Qub3B0aW9uc1tpICsgdG9dID0gbmV3IE9wdGlvbihpdGVtc1tpXSx2YWx1ZXNbaV0sIDAsIDEpOw0KCQkJc3JjTGlzdC5vcHRpb25zW2ldID0gbmV3IE9wdGlvbihpdGVtc1tpK3RvXSwgdmFsdWVzW2krdG9dKTsNCgkJCWktLTsNCgkJfSBlbHNlIHsNCgkJCXNyY0xpc3Qub3B0aW9uc1tpXSA9IG5ldyBPcHRpb24oaXRlbXNbaV0sIHZhbHVlc1tpXSk7DQoJICAgfQ0KCX0NCglzcmNMaXN0LmZvY3VzKCk7DQp9DQoNCmZ1bmN0aW9uIGdldFNlbGVjdGVkT3B0aW9uKCBmcm1OYW1lLCBzcmNMaXN0TmFtZSApIHsNCgl2YXIgZm9ybSA9IGV2YWwoICdkb2N1bWVudC4nICsgZnJtTmFtZSApOw0KCXZhciBzcmNMaXN0ID0gZXZhbCggJ2Zvcm0uJyArIHNyY0xpc3ROYW1lICk7DQoNCglpID0gc3JjTGlzdC5zZWxlY3RlZEluZGV4Ow0KCWlmIChpICE9IG51bGwgJiYgaSA+IC0xKSB7DQoJCXJldHVybiBzcmNMaXN0Lm9wdGlvbnNbaV07DQoJfSBlbHNlIHsNCgkJcmV0dXJuIG51bGw7DQoJfQ0KfQ0KDQpmdW5jdGlvbiBzZXRTZWxlY3RlZFZhbHVlKCBmcm1OYW1lLCBzcmNMaXN0TmFtZSwgdmFsdWUgKSB7DQoJdmFyIGZvcm0gPSBldmFsKCAnZG9jdW1lbnQuJyArIGZybU5hbWUgKTsNCgl2YXIgc3JjTGlzdCA9IGV2YWwoICdmb3JtLicgKyBzcmNMaXN0TmFtZSApOw0KDQoJdmFyIHNyY0xlbiA9IHNyY0xpc3QubGVuZ3RoOw0KDQoJZm9yICh2YXIgaT0wOyBpIDwgc3JjTGVuOyBpKyspIHsNCgkJc3JjTGlzdC5vcHRpb25zW2ldLnNlbGVjdGVkID0gZmFsc2U7DQoJCWlmIChzcmNMaXN0Lm9wdGlvbnNbaV0udmFsdWUgPT0gdmFsdWUpIHsNCgkJCXNyY0xpc3Qub3B0aW9uc1tpXS5zZWxlY3RlZCA9IHRydWU7DQoJCX0NCgl9DQp9DQoNCmZ1bmN0aW9uIGdldFNlbGVjdGVkUmFkaW8oIGZybU5hbWUsIHNyY0dyb3VwTmFtZSApIHsNCgl2YXIgZm9ybSA9IGV2YWwoICdkb2N1bWVudC4nICsgZnJtTmFtZSApOw0KCXZhciBzcmNHcm91cCA9IGV2YWwoICdmb3JtLicgKyBzcmNHcm91cE5hbWUgKTsNCg0KCWlmIChzcmNHcm91cFswXSkgew0KCQlmb3IgKHZhciBpPTAsIG49c3JjR3JvdXAubGVuZ3RoOyBpIDwgbjsgaSsrKSB7DQoJCQlpZiAoc3JjR3JvdXBbaV0uY2hlY2tlZCkgew0KCQkJCXJldHVybiBzcmNHcm91cFtpXS52YWx1ZTsNCgkJCX0NCgkJfQ0KCX0gZWxzZSB7DQoJCWlmIChzcmNHcm91cC5jaGVja2VkKSB7DQoJCQlyZXR1cm4gc3JjR3JvdXAudmFsdWU7DQoJCX0gLy8gaWYgdGhlIG9uZSBidXR0b24gaXMgY2hlY2tlZCwgcmV0dXJuIHplcm8NCgl9DQogICAvLyBpZiB3ZSBnZXQgdG8gdGhpcyBwb2ludCwgbm8gcmFkaW8gYnV0dG9uIGlzIHNlbGVjdGVkDQogICByZXR1cm4gbnVsbDsNCn0NCg0KZnVuY3Rpb24gZ2V0U2VsZWN0ZWRWYWx1ZSggZnJtTmFtZSwgc3JjTGlzdE5hbWUgKSB7DQoJdmFyIGZvcm0gPSBldmFsKCAnZG9jdW1lbnQuJyArIGZybU5hbWUgKTsNCgl2YXIgc3JjTGlzdCA9IGV2YWwoICdmb3JtLicgKyBzcmNMaXN0TmFtZSApOw0KDQoJaSA9IHNyY0xpc3Quc2VsZWN0ZWRJbmRleDsNCglpZiAoaSAhPSBudWxsICYmIGkgPiAtMSkgew0KCQlyZXR1cm4gc3JjTGlzdC5vcHRpb25zW2ldLnZhbHVlOw0KCX0gZWxzZSB7DQoJCXJldHVybiBudWxsOw0KCX0NCn0NCg0KZnVuY3Rpb24gZ2V0U2VsZWN0ZWRUZXh0KCBmcm1OYW1lLCBzcmNMaXN0TmFtZSApIHsNCgl2YXIgZm9ybSA9IGV2YWwoICdkb2N1bWVudC4nICsgZnJtTmFtZSApOw0KCXZhciBzcmNMaXN0ID0gZXZhbCggJ2Zvcm0uJyArIHNyY0xpc3ROYW1lICk7DQoNCglpID0gc3JjTGlzdC5zZWxlY3RlZEluZGV4Ow0KCWlmIChpICE9IG51bGwgJiYgaSA+IC0xKSB7DQoJCXJldHVybiBzcmNMaXN0Lm9wdGlvbnNbaV0udGV4dDsNCgl9IGVsc2Ugew0KCQlyZXR1cm4gbnVsbDsNCgl9DQp9DQoNCmZ1bmN0aW9uIGNoZ1NlbGVjdGVkVmFsdWUoIGZybU5hbWUsIHNyY0xpc3ROYW1lLCB2YWx1ZSApIHsNCgl2YXIgZm9ybSA9IGV2YWwoICdkb2N1bWVudC4nICsgZnJtTmFtZSApOw0KCXZhciBzcmNMaXN0ID0gZXZhbCggJ2Zvcm0uJyArIHNyY0xpc3ROYW1lICk7DQoNCglpID0gc3JjTGlzdC5zZWxlY3RlZEluZGV4Ow0KCWlmIChpICE9IG51bGwgJiYgaSA+IC0xKSB7DQoJCXNyY0xpc3Qub3B0aW9uc1tpXS52YWx1ZSA9IHZhbHVlOw0KCQlyZXR1cm4gdHJ1ZTsNCgl9IGVsc2Ugew0KCQlyZXR1cm4gZmFsc2U7DQoJfQ0KfQ0KDQovLyBGb3JtIHNwZWNpZmljIGZ1bmN0aW9ucyBmb3IgZWRpdHRpbmcgY29udGVudCBpbWFnZXMNCg0KZnVuY3Rpb24gc2hvd0ltYWdlUHJvcHMoYmFzZV9wYXRoKSB7DQoJZm9ybSA9IGRvY3VtZW50LmFkbWluRm9ybTsNCgl2YWx1ZSA9IGdldFNlbGVjdGVkVmFsdWUoICdhZG1pbkZvcm0nLCAnaW1hZ2VsaXN0JyApOw0KCXBhcnRzID0gdmFsdWUuc3BsaXQoICd8JyApOw0KCWZvcm0uX3NvdXJjZS52YWx1ZSA9IHBhcnRzWzBdOw0KCXNldFNlbGVjdGVkVmFsdWUoICdhZG1pbkZvcm0nLCAnX2FsaWduJywgcGFydHNbMV0gfHwgJycgKTsNCglmb3JtLl9hbHQudmFsdWUgPSBwYXJ0c1syXSB8fCAnJzsNCglmb3JtLl9ib3JkZXIudmFsdWUgPSBwYXJ0c1szXSB8fCAnMCc7DQoJZm9ybS5fY2FwdGlvbi52YWx1ZSA9IHBhcnRzWzRdIHx8ICcnOw0KCXNldFNlbGVjdGVkVmFsdWUoICdhZG1pbkZvcm0nLCAnX2NhcHRpb25fcG9zaXRpb24nLCBwYXJ0c1s1XSB8fCAnJyApOw0KCXNldFNlbGVjdGVkVmFsdWUoICdhZG1pbkZvcm0nLCAnX2NhcHRpb25fYWxpZ24nLCBwYXJ0c1s2XSB8fCAnJyApOw0KCWZvcm0uX3dpZHRoLnZhbHVlID0gcGFydHNbN10gfHwgJyc7DQoNCgkvL3ByZXZpZXdJbWFnZSggJ2ltYWdlbGlzdCcsICd2aWV3X2ltYWdlbGlzdCcsIGJhc2VfcGF0aCApOw0KCXNyY0ltYWdlID0gZXZhbCggImRvY3VtZW50LiIgKyAndmlld19pbWFnZWxpc3QnICk7DQoJc3JjSW1hZ2Uuc3JjID0gYmFzZV9wYXRoICsgcGFydHNbMF07DQp9DQoNCmZ1bmN0aW9uIGFwcGx5SW1hZ2VQcm9wcygpIHsNCglmb3JtID0gZG9jdW1lbnQuYWRtaW5Gb3JtOw0KCWlmICghZ2V0U2VsZWN0ZWRWYWx1ZSggJ2FkbWluRm9ybScsICdpbWFnZWxpc3QnICkpIHsNCgkJYWxlcnQoICJTZWxlY3QgYW5kIGltYWdlIGZyb20gdGhlIGxpc3QiICk7DQoJCXJldHVybjsNCgl9DQoJdmFsdWUgPSBmb3JtLl9zb3VyY2UudmFsdWUgKyAnfCcNCgkrIGdldFNlbGVjdGVkVmFsdWUoICdhZG1pbkZvcm0nLCAnX2FsaWduJyApICsgJ3wnDQoJKyBmb3JtLl9hbHQudmFsdWUgKyAnfCcNCgkrIHBhcnNlSW50KCBmb3JtLl9ib3JkZXIudmFsdWUgKSArICd8Jw0KCSsgZm9ybS5fY2FwdGlvbi52YWx1ZSArICd8Jw0KCSsgZ2V0U2VsZWN0ZWRWYWx1ZSggJ2FkbWluRm9ybScsICdfY2FwdGlvbl9wb3NpdGlvbicgKSArICd8Jw0KCSsgZ2V0U2VsZWN0ZWRWYWx1ZSggJ2FkbWluRm9ybScsICdfY2FwdGlvbl9hbGlnbicgKSArICd8Jw0KCSsgZm9ybS5fd2lkdGgudmFsdWU7DQoJY2hnU2VsZWN0ZWRWYWx1ZSggJ2FkbWluRm9ybScsICdpbWFnZWxpc3QnLCB2YWx1ZSApOw0KfQ0KDQpmdW5jdGlvbiBwcmV2aWV3SW1hZ2UoIGxpc3QsIGltYWdlLCBiYXNlX3BhdGggKSB7DQoJZm9ybSA9IGRvY3VtZW50LmFkbWluRm9ybTsNCglzcmNMaXN0ID0gZXZhbCggImZvcm0uIiArIGxpc3QgKTsNCglzcmNJbWFnZSA9IGV2YWwoICJkb2N1bWVudC4iICsgaW1hZ2UgKTsNCgl2YXIgZmlsZU5hbWUgPSBzcmNMaXN0Lm9wdGlvbnNbc3JjTGlzdC5zZWxlY3RlZEluZGV4XS50ZXh0Ow0KCXZhciBmaWxlTmFtZTIgPSBzcmNMaXN0Lm9wdGlvbnNbc3JjTGlzdC5zZWxlY3RlZEluZGV4XS52YWx1ZTsNCglpZiAoZmlsZU5hbWUubGVuZ3RoID09IDAgfHwgZmlsZU5hbWUyLmxlbmd0aCA9PSAwKSB7DQoJCXNyY0ltYWdlLnNyYyA9ICdpbWFnZXMvYmxhbmsuZ2lmJzsNCgl9IGVsc2Ugew0KCQlzcmNJbWFnZS5zcmMgPSBiYXNlX3BhdGggKyBmaWxlTmFtZTI7DQoJfQ0KfQ0KDQovKioNCiogVG9nZ2xlcyB0aGUgY2hlY2sgc3RhdGUgb2YgYSBncm91cCBvZiBib3hlcw0KKg0KKiBDaGVja2JveGVzIG11c3QgaGF2ZSBhbiBpZCBhdHRyaWJ1dGUgaW4gdGhlIGZvcm0gY2IwLCBjYjEuLi4NCiogQHBhcmFtIFRoZSBudW1iZXIgb2YgYm94IHRvICdjaGVjaycNCiogQHBhcmFtIEFuIGFsdGVybmF0aXZlIGZpZWxkIG5hbWUNCiovDQpmdW5jdGlvbiBjaGVja0FsbCggbiwgZmxkTmFtZSApIHsNCiAgaWYgKCFmbGROYW1lKSB7DQogICAgIGZsZE5hbWUgPSAnY2InOw0KICB9DQoJdmFyIGYgPSBkb2N1bWVudC5hZG1pbkZvcm07DQoJdmFyIGMgPSBmLnRvZ2dsZS5jaGVja2VkOw0KCXZhciBuMiA9IDA7DQoJZm9yIChpPTA7IGkgPCBuOyBpKyspIHsNCgkJY2IgPSBldmFsKCAnZi4nICsgZmxkTmFtZSArICcnICsgaSApOw0KCQlpZiAoY2IpIHsNCgkJCWNiLmNoZWNrZWQgPSBjOw0KCQkJbjIrKzsNCgkJfQ0KCX0NCglpZiAoYykgew0KCQlkb2N1bWVudC5hZG1pbkZvcm0uYm94Y2hlY2tlZC52YWx1ZSA9IG4yOw0KCX0gZWxzZSB7DQoJCWRvY3VtZW50LmFkbWluRm9ybS5ib3hjaGVja2VkLnZhbHVlID0gMDsNCgl9DQp9DQoNCmZ1bmN0aW9uIGxpc3RJdGVtVGFzayggaWQsIHRhc2sgKSB7DQogICAgdmFyIGYgPSBkb2N1bWVudC5hZG1pbkZvcm07DQogICAgY2IgPSBldmFsKCAnZi4nICsgaWQgKTsNCiAgICBpZiAoY2IpIHsNCiAgICAgICAgZm9yIChpID0gMDsgdHJ1ZTsgaSsrKSB7DQogICAgICAgICAgICBjYnggPSBldmFsKCdmLmNiJytpKTsNCiAgICAgICAgICAgIGlmICghY2J4KSBicmVhazsNCiAgICAgICAgICAgIGNieC5jaGVja2VkID0gZmFsc2U7DQogICAgICAgIH0gLy8gZm9yDQogICAgICAgIGNiLmNoZWNrZWQgPSB0cnVlOw0KICAgICAgICBmLmJveGNoZWNrZWQudmFsdWUgPSAxOw0KICAgICAgICBzdWJtaXRidXR0b24odGFzayk7DQogICAgfQ0KICAgIHJldHVybiBmYWxzZTsNCn0NCg0KZnVuY3Rpb24gaGlkZU1haW5NZW51KCkNCnsNCglkb2N1bWVudC5hZG1pbkZvcm0uaGlkZW1haW5tZW51LnZhbHVlPTE7DQp9DQoNCmZ1bmN0aW9uIGlzQ2hlY2tlZChpc2l0Y2hlY2tlZCl7DQoJaWYgKGlzaXRjaGVja2VkID09IHRydWUpew0KCQlkb2N1bWVudC5hZG1pbkZvcm0uYm94Y2hlY2tlZC52YWx1ZSsrOw0KCX0NCgllbHNlIHsNCgkJZG9jdW1lbnQuYWRtaW5Gb3JtLmJveGNoZWNrZWQudmFsdWUtLTsNCgl9DQp9DQoNCi8qKg0KKiBEZWZhdWx0IGZ1bmN0aW9uLiAgVXN1YWxseSB3b3VsZCBiZSBvdmVycmlkZW4gYnkgdGhlIGNvbXBvbmVudA0KKi8NCmZ1bmN0aW9uIHN1Ym1pdGJ1dHRvbihwcmVzc2J1dHRvbikgew0KCXN1Ym1pdGZvcm0ocHJlc3NidXR0b24pOw0KfQ0KDQovKioNCiogU3VibWl0IHRoZSBhZG1pbiBmb3JtDQoqLw0KZnVuY3Rpb24gc3VibWl0Zm9ybShwcmVzc2J1dHRvbil7DQoJZG9jdW1lbnQuYWRtaW5Gb3JtLnRhc2sudmFsdWU9cHJlc3NidXR0b247DQoJdHJ5IHsNCgkJZG9jdW1lbnQuYWRtaW5Gb3JtLm9uc3VibWl0KCk7DQoJCX0NCgljYXRjaChlKXt9DQoJZG9jdW1lbnQuYWRtaW5Gb3JtLnN1Ym1pdCgpOw0KfQ0KDQovKioNCiogU3VibWl0IHRoZSBjb250cm9sIHBhbmVsIGFkbWluIGZvcm0NCiovDQpmdW5jdGlvbiBzdWJtaXRjcGZvcm0oc2VjdGlvbmlkLCBpZCl7DQoJZG9jdW1lbnQuYWRtaW5Gb3JtLnNlY3Rpb25pZC52YWx1ZT1zZWN0aW9uaWQ7DQoJZG9jdW1lbnQuYWRtaW5Gb3JtLmlkLnZhbHVlPWlkOw0KCXN1Ym1pdGJ1dHRvbigiZWRpdCIpOw0KfQ0KDQovKioNCiogR2V0dGluZyByYWRpbyBidXR0b24gdGhhdCBpcyBzZWxlY3RlZC4NCiovDQpmdW5jdGlvbiBnZXRTZWxlY3RlZChhbGxidXR0b25zKXsNCglmb3IgKGk9MDtpPGFsbGJ1dHRvbnMubGVuZ3RoO2krKykgew0KCQlpZiAoYWxsYnV0dG9uc1tpXS5jaGVja2VkKSB7DQoJCQlyZXR1cm4gYWxsYnV0dG9uc1tpXS52YWx1ZQ0KCQl9DQoJfQ0KfQ0KDQovLyBKUyBDYWxlbmRhcg0KdmFyIGNhbGVuZGFyID0gbnVsbDsgLy8gcmVtZW1iZXIgdGhlIGNhbGVuZGFyIG9iamVjdCBzbyB0aGF0IHdlIHJldXNlDQovLyBpdCBhbmQgYXZvaWQgY3JlYXRpbmcgYW5vdGhlcg0KDQovLyBUaGlzIGZ1bmN0aW9uIGdldHMgY2FsbGVkIHdoZW4gYW4gZW5kLXVzZXIgY2xpY2tzIG9uIHNvbWUgZGF0ZQ0KZnVuY3Rpb24gc2VsZWN0ZWQoY2FsLCBkYXRlKSB7DQoJY2FsLnNlbC52YWx1ZSA9IGRhdGU7IC8vIGp1c3QgdXBkYXRlIHRoZSB2YWx1ZSBvZiB0aGUgaW5wdXQgZmllbGQNCn0NCg0KLy8gQW5kIHRoaXMgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgZW5kLXVzZXIgY2xpY2tzIG9uIHRoZSBfc2VsZWN0ZWRfIGRhdGUsDQovLyBvciBjbGlja3MgdGhlICJDbG9zZSIgKFgpIGJ1dHRvbi4gIEl0IGp1c3QgaGlkZXMgdGhlIGNhbGVuZGFyIHdpdGhvdXQNCi8vIGRlc3Ryb3lpbmcgaXQuDQpmdW5jdGlvbiBjbG9zZUhhbmRsZXIoY2FsKSB7DQoJY2FsLmhpZGUoKTsJCQkvLyBoaWRlIHRoZSBjYWxlbmRhcg0KDQoJLy8gZG9uJ3QgY2hlY2sgbW91c2Vkb3duIG9uIGRvY3VtZW50IGFueW1vcmUgKHVzZWQgdG8gYmUgYWJsZSB0byBoaWRlIHRoZQ0KCS8vIGNhbGVuZGFyIHdoZW4gc29tZW9uZSBjbGlja3Mgb3V0c2lkZSBpdCwgc2VlIHRoZSBzaG93Q2FsZW5kYXIgZnVuY3Rpb24pLg0KCUNhbGVuZGFyLnJlbW92ZUV2ZW50KGRvY3VtZW50LCAibW91c2Vkb3duIiwgY2hlY2tDYWxlbmRhcik7DQp9DQoNCi8vIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgdXNlciBwcmVzc2VzIGEgbW91c2UgYnV0dG9uIGFueXdoZXJlIGluIHRoZQ0KLy8gZG9jdW1lbnQsIGlmIHRoZSBjYWxlbmRhciBpcyBzaG93bi4gIElmIHRoZSBjbGljayB3YXMgb3V0c2lkZSB0aGUgb3Blbg0KLy8gY2FsZW5kYXIgdGhpcyBmdW5jdGlvbiBjbG9zZXMgaXQuDQpmdW5jdGlvbiBjaGVja0NhbGVuZGFyKGV2KSB7DQoJdmFyIGVsID0gQ2FsZW5kYXIuaXNfaWUgPyBDYWxlbmRhci5nZXRFbGVtZW50KGV2KSA6IENhbGVuZGFyLmdldFRhcmdldEVsZW1lbnQoZXYpOw0KCWZvciAoOyBlbCAhPSBudWxsOyBlbCA9IGVsLnBhcmVudE5vZGUpDQoJLy8gRklYTUU6IGFsbG93IGVuZC11c2VyIHRvIGNsaWNrIHNvbWUgbGluayB3aXRob3V0IGNsb3NpbmcgdGhlDQoJLy8gY2FsZW5kYXIuICBHb29kIHRvIHNlZSByZWFsLXRpbWUgc3R5bGVzaGVldCBjaGFuZ2UgOikNCglpZiAoZWwgPT0gY2FsZW5kYXIuZWxlbWVudCB8fCBlbC50YWdOYW1lID09ICJBIikgYnJlYWs7DQoJaWYgKGVsID09IG51bGwpIHsNCgkJLy8gY2FsbHMgY2xvc2VIYW5kbGVyIHdoaWNoIHNob3VsZCBoaWRlIHRoZSBjYWxlbmRhci4NCgkJY2FsZW5kYXIuY2FsbENsb3NlSGFuZGxlcigpOyBDYWxlbmRhci5zdG9wRXZlbnQoZXYpOw0KCX0NCn0NCg0KLy8gVGhpcyBmdW5jdGlvbiBzaG93cyB0aGUgY2FsZW5kYXIgdW5kZXIgdGhlIGVsZW1lbnQgaGF2aW5nIHRoZSBnaXZlbiBpZC4NCi8vIEl0IHRha2VzIGNhcmUgb2YgY2F0Y2hpbmcgIm1vdXNlZG93biIgc2lnbmFscyBvbiBkb2N1bWVudCBhbmQgaGlkaW5nIHRoZQ0KLy8gY2FsZW5kYXIgaWYgdGhlIGNsaWNrIHdhcyBvdXRzaWRlLg0KZnVuY3Rpb24gc2hvd0NhbGVuZGFyKGlkKSB7DQoJdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KCWlmIChjYWxlbmRhciAhPSBudWxsKSB7DQoJCS8vIHdlIGFscmVhZHkgaGF2ZSBvbmUgY3JlYXRlZCwgc28ganVzdCB1cGRhdGUgaXQuDQoJCWNhbGVuZGFyLmhpZGUoKTsJCS8vIGhpZGUgdGhlIGV4aXN0aW5nIGNhbGVuZGFyDQoJCWNhbGVuZGFyLnBhcnNlRGF0ZShlbC52YWx1ZSk7IC8vIHNldCBpdCB0byBhIG5ldyBkYXRlDQoJfSBlbHNlIHsNCgkJLy8gZmlyc3QtdGltZSBjYWxsLCBjcmVhdGUgdGhlIGNhbGVuZGFyDQoJCXZhciBjYWwgPSBuZXcgQ2FsZW5kYXIodHJ1ZSwgbnVsbCwgc2VsZWN0ZWQsIGNsb3NlSGFuZGxlcik7DQoJCWNhbGVuZGFyID0gY2FsOwkJLy8gcmVtZW1iZXIgdGhlIGNhbGVuZGFyIGluIHRoZSBnbG9iYWwNCgkJY2FsLnNldFJhbmdlKDE5MDAsIDIwNzApOwkvLyBtaW4vbWF4IHllYXIgYWxsb3dlZA0KCQljYWxlbmRhci5jcmVhdGUoKTsJCS8vIGNyZWF0ZSBhIHBvcHVwIGNhbGVuZGFyDQoJfQ0KCWNhbGVuZGFyLnNlbCA9IGVsOwkJLy8gaW5mb3JtIGl0IGFib3V0IHRoZSBpbnB1dCBmaWVsZCBpbiB1c2UNCgljYWxlbmRhci5zaG93QXRFbGVtZW50KGVsKTsJLy8gc2hvdyB0aGUgY2FsZW5kYXIgbmV4dCB0byB0aGUgaW5wdXQgZmllbGQNCg0KCS8vIGNhdGNoIG1vdXNlZG93biBvbiB0aGUgZG9jdW1lbnQNCglDYWxlbmRhci5hZGRFdmVudChkb2N1bWVudCwgIm1vdXNlZG93biIsIGNoZWNrQ2FsZW5kYXIpOw0KCXJldHVybiBmYWxzZTsNCn0NCg0KLyoqDQoqIFBvcHMgdXAgYSBuZXcgd2luZG93IGluIHRoZSBtaWRkbGUgb2YgdGhlIHNjcmVlbg0KKi8NCmZ1bmN0aW9uIHBvcHVwV2luZG93KG15cGFnZSwgbXluYW1lLCB3LCBoLCBzY3JvbGwpIHsNCgl2YXIgd2lubCA9IChzY3JlZW4ud2lkdGggLSB3KSAvIDI7DQoJdmFyIHdpbnQgPSAoc2NyZWVuLmhlaWdodCAtIGgpIC8gMjsNCgl3aW5wcm9wcyA9ICdoZWlnaHQ9JytoKycsd2lkdGg9Jyt3KycsdG9wPScrd2ludCsnLGxlZnQ9Jyt3aW5sKycsc2Nyb2xsYmFycz0nK3Njcm9sbCsnLHJlc2l6YWJsZScNCgl3aW4gPSB3aW5kb3cub3BlbihteXBhZ2UsIG15bmFtZSwgd2lucHJvcHMpDQoJaWYgKHBhcnNlSW50KG5hdmlnYXRvci5hcHBWZXJzaW9uKSA+PSA0KSB7IHdpbi53aW5kb3cuZm9jdXMoKTsgfQ0KfQ0KDQovLyBMVHJpbShzdHJpbmcpIDogUmV0dXJucyBhIGNvcHkgb2YgYSBzdHJpbmcgd2l0aG91dCBsZWFkaW5nIHNwYWNlcy4NCmZ1bmN0aW9uIGx0cmltKHN0cikNCnsNCiAgIHZhciB3aGl0ZXNwYWNlID0gbmV3IFN0cmluZygiIFx0XG5cciIpOw0KICAgdmFyIHMgPSBuZXcgU3RyaW5nKHN0cik7DQogICBpZiAod2hpdGVzcGFjZS5pbmRleE9mKHMuY2hhckF0KDApKSAhPSAtMSkgew0KICAgICAgdmFyIGo9MCwgaSA9IHMubGVuZ3RoOw0KICAgICAgd2hpbGUgKGogPCBpICYmIHdoaXRlc3BhY2UuaW5kZXhPZihzLmNoYXJBdChqKSkgIT0gLTEpDQogICAgICAgICBqKys7DQogICAgICBzID0gcy5zdWJzdHJpbmcoaiwgaSk7DQogICB9DQogICByZXR1cm4gczsNCn0NCg0KLy9SVHJpbShzdHJpbmcpIDogUmV0dXJucyBhIGNvcHkgb2YgYSBzdHJpbmcgd2l0aG91dCB0cmFpbGluZyBzcGFjZXMuDQpmdW5jdGlvbiBydHJpbShzdHIpDQp7DQogICB2YXIgd2hpdGVzcGFjZSA9IG5ldyBTdHJpbmcoIiBcdFxuXHIiKTsNCiAgIHZhciBzID0gbmV3IFN0cmluZyhzdHIpOw0KICAgaWYgKHdoaXRlc3BhY2UuaW5kZXhPZihzLmNoYXJBdChzLmxlbmd0aC0xKSkgIT0gLTEpIHsNCiAgICAgIHZhciBpID0gcy5sZW5ndGggLSAxOyAgICAgICAvLyBHZXQgbGVuZ3RoIG9mIHN0cmluZw0KICAgICAgd2hpbGUgKGkgPj0gMCAmJiB3aGl0ZXNwYWNlLmluZGV4T2Yocy5jaGFyQXQoaSkpICE9IC0xKQ0KICAgICAgICAgaS0tOw0KICAgICAgcyA9IHMuc3Vic3RyaW5nKDAsIGkrMSk7DQogICB9DQogICByZXR1cm4gczsNCn0NCg0KLy8gVHJpbShzdHJpbmcpIDogUmV0dXJucyBhIGNvcHkgb2YgYSBzdHJpbmcgd2l0aG91dCBsZWFkaW5nIG9yIHRyYWlsaW5nIHNwYWNlcw0KZnVuY3Rpb24gdHJpbShzdHIpIHsNCiAgIHJldHVybiBydHJpbShsdHJpbShzdHIpKTsNCn0NCg0KZnVuY3Rpb24gbW9zREhUTUwoKXsNCgl0aGlzLnZlcj1uYXZpZ2F0b3IuYXBwVmVyc2lvbg0KCXRoaXMuYWdlbnQ9bmF2aWdhdG9yLnVzZXJBZ2VudA0KCXRoaXMuZG9tPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkPzE6MA0KCXRoaXMub3BlcmE1PXRoaXMuYWdlbnQuaW5kZXhPZigiT3BlcmEgNSIpPC0xDQoJdGhpcy5pZTU9KHRoaXMudmVyLmluZGV4T2YoIk1TSUUgNSIpPC0xICYmIHRoaXMuZG9tICYmICF0aGlzLm9wZXJhNSk\/MTowOw0KCXRoaXMuaWU2PSh0aGlzLnZlci5pbmRleE9mKCJNU0lFIDYiKTwtMSAmJiB0aGlzLmRvbSAmJiAhdGhpcy5vcGVyYTUpPzE6MDsNCgl0aGlzLmllND0oZG9jdW1lbnQuYWxsICYmICF0aGlzLmRvbSAmJiAhdGhpcy5vcGVyYTUpPzE6MDsNCgl0aGlzLmllPXRoaXMuaWU0fHx0aGlzLmllNXx8dGhpcy5pZTYNCgl0aGlzLm1hYz10aGlzLmFnZW50LmluZGV4T2YoIk1hYyIpPC0xDQoJdGhpcy5uczY9KHRoaXMuZG9tICYmIHBhcnNlSW50KHRoaXMudmVyKSA8PSA1KSA\/MTowOw0KCXRoaXMubnM0PShkb2N1bWVudC5sYXllcnMgJiYgIXRoaXMuZG9tKT8xOjA7DQoJdGhpcy5idz0odGhpcy5pZTZ8fHRoaXMuaWU1fHx0aGlzLmllNHx8dGhpcy5uczR8fHRoaXMubnM2fHx0aGlzLm9wZXJhNSk7DQoNCgl0aGlzLmFjdGl2ZVRhYiA9ICcnOw0KCXRoaXMub25UYWJTdHlsZSA9ICdvbnRhYic7DQoJdGhpcy5vZmZUYWJTdHlsZSA9ICdvZmZ0YWInOw0KDQoJdGhpcy5zZXRFbGVtU3R5bGUgPSBmdW5jdGlvbihlbGVtLHN0eWxlKSB7DQoJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW0pLmNsYXNzTmFtZSA9IHN0eWxlOw0KCX0NCgl0aGlzLnNob3dFbGVtID0gZnVuY3Rpb24oaWQpIHsNCgkJaWYgKGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkpIHsNCgkJCWVsZW0uc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJzsNCgkJCWVsZW0uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQoJCX0NCgl9DQoJdGhpcy5oaWRlRWxlbSA9IGZ1bmN0aW9uKGlkKSB7DQoJCWlmIChlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpKSB7DQoJCQllbGVtLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsNCgkJCWVsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCgkJfQ0KCX0NCgl0aGlzLmN5Y2xlVGFiID0gZnVuY3Rpb24obmFtZSkgew0KCQlpZiAodGhpcy5hY3RpdmVUYWIpIHsNCgkJCXRoaXMuc2V0RWxlbVN0eWxlKCB0aGlzLmFjdGl2ZVRhYiwgdGhpcy5vZmZUYWJTdHlsZSApOw0KCQkJcGFnZSA9IHRoaXMuYWN0aXZlVGFiLnJlcGxhY2UoICd0YWInLCAncGFnZScgKTsNCgkJCXRoaXMuaGlkZUVsZW0ocGFnZSk7DQoJCX0NCgkJdGhpcy5zZXRFbGVtU3R5bGUoIG5hbWUsIHRoaXMub25UYWJTdHlsZSApOw0KCQl0aGlzLmFjdGl2ZVRhYiA9IG5hbWU7DQoJCXBhZ2UgPSB0aGlzLmFjdGl2ZVRhYi5yZXBsYWNlKCAndGFiJywgJ3BhZ2UnICk7DQoJCXRoaXMuc2hvd0VsZW0ocGFnZSk7DQoJfQ0KCXJldHVybiB0aGlzOw0KfQ0KdmFyIGRodG1sID0gbmV3IG1vc0RIVE1MKCk7DQoNCmZ1bmN0aW9uIE1NX2ZpbmRPYmoobiwgZCkgeyAvL3Y0LjAxDQoJdmFyIHAsaSx4Ow0KCWlmKCFkKSBkPWRvY3VtZW50Ow0KCWlmKChwPW4uaW5kZXhPZigiPyIpKT4wJiZwYXJlbnQuZnJhbWVzLmxlbmd0aCkgew0KCQlkPXBhcmVudC5mcmFtZXNbbi5zdWJzdHJpbmcocCsxKV0uZG9jdW1lbnQ7IG49bi5zdWJzdHJpbmcoMCxwKTsNCgl9DQoJaWYoISh4PWRbbl0pJiZkLmFsbCkgeD1kLmFsbFtuXTsNCglmb3IgKGk9MDsheCYmaTxkLmZvcm1zLmxlbmd0aDtpKyspIHg9ZC5mb3Jtc1tpXVtuXTsNCglmb3IoaT0wOyF4JiZkLmxheWVycyYmaTxkLmxheWVycy5sZW5ndGg7aSsrKSB4PU1NX2ZpbmRPYmoobixkLmxheWVyc1tpXS5kb2N1bWVudCk7DQoJaWYoIXggJiYgZC5nZXRFbGVtZW50QnlJZCkgeD1kLmdldEVsZW1lbnRCeUlkKG4pOw0KCXJldHVybiB4Ow0KfQ0KZnVuY3Rpb24gTU1fc3dhcEltYWdlKCkgeyAvL3YzLjANCgl2YXIgaSxqPTAseCxhPU1NX3N3YXBJbWFnZS5hcmd1bWVudHM7DQoJZG9jdW1lbnQuTU1fc3I9bmV3IEFycmF5Ow0KCWZvcihpPTA7aTwoYS5sZW5ndGgtMik7aSs9MykNCglpZiAoKHg9TU1fZmluZE9iaihhW2ldKSkhPW51bGwpe2RvY3VtZW50Lk1NX3NyW2orK109eDsNCglpZigheC5vU3JjKSB4Lm9TcmM9eC5zcmM7IHguc3JjPWFbaSsyXTt9DQp9DQpmdW5jdGlvbiBNTV9zd2FwSW1nUmVzdG9yZSgpIHsgLy92My4wDQoJdmFyIGkseCxhPWRvY3VtZW50Lk1NX3NyOw0KCWZvcihpPTA7YSYmaTxhLmxlbmd0aCYmKHg9YVtpXSkmJngub1NyYztpKyspIHguc3JjPXgub1NyYzsNCn0NCg0KZnVuY3Rpb24gTU1fcHJlbG9hZEltYWdlcygpIHsgLy92My4wDQoJdmFyIGQ9ZG9jdW1lbnQ7DQoJaWYoZC5pbWFnZXMpew0KCWlmKCFkLk1NX3ApIGQuTU1fcD1uZXcgQXJyYXkoKTsNCgl2YXIgaSxqPWQuTU1fcC5sZW5ndGgsYT1NTV9wcmVsb2FkSW1hZ2VzLmFyZ3VtZW50czsNCglmb3IoaT0wOyBpPGEubGVuZ3RoOyBpKyspDQoJaWYgKGFbaV0uaW5kZXhPZigiIyIpIT0wKXsgZC5NTV9wW2pdPW5ldyBJbWFnZTsgZC5NTV9wW2orK10uc3JjPWFbaV07fX0NCn0NCg0KDQpmdW5jdGlvbiBzYXZlb3JkZXIoIG4gKSB7DQoJY2hlY2tBbGxfYnV0dG9uKCBuICk7DQp9DQoNCi8vbmVlZGVkIGJ5IHNhdmVvcmRlciBmdW5jdGlvbg0KZnVuY3Rpb24gY2hlY2tBbGxfYnV0dG9uKCBuICkgew0KCWZvciAoIHZhciBqID0gMDsgaiA8PSBuOyBqKysgKSB7DQoJCWJveCA9IGV2YWwoICJkb2N1bWVudC5hZG1pbkZvcm0uY2IiICsgaiApOw0KCQlpZiAoIGJveCApIHsNCgkJCWlmICggYm94LmNoZWNrZWQgPT0gZmFsc2UgKSB7DQoJCQkJYm94LmNoZWNrZWQgPSB0cnVlOw0KCQkJfQ0KCQl9IGVsc2Ugew0KCQkJYWxlcnQoIllvdSBjYW5ub3QgY2hhbmdlIHRoZSBvcmRlciBvZiBpdGVtcywgYXMgYW4gaXRlbSBpbiB0aGUgbGlzdCBpcyBgQ2hlY2tlZCBPdXRgIik7DQoJCQlyZXR1cm47DQoJCX0NCgl9DQoJc3VibWl0Zm9ybSgnc2F2ZW9yZGVyJyk7DQp9DQovKioNCiogQHBhcmFtIG9iamVjdCBBIGZvcm0gZWxlbWVudA0KKiBAcGFyYW0gc3RyaW5nIFRoZSBuYW1lIG9mIHRoZSBlbGVtZW50IHRvIGZpbmQNCiovDQpmdW5jdGlvbiBnZXRFbGVtZW50QnlOYW1lKCBmLCBuYW1lICkgew0KCWlmIChmLmVsZW1lbnRzKSB7DQoJCWZvciAoaT0wLCBuPWYuZWxlbWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7DQoJCQlpZiAoZi5lbGVtZW50c1tpXS5uYW1lID09IG5hbWUpIHsNCgkJCQlyZXR1cm4gZi5lbGVtZW50c1tpXTsNCgkJCX0NCgkJfQ0KCX0NCglyZXR1cm4gbnVsbDsNCn0=",
    "size": "16922"
}