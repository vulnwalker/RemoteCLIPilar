{
    "namaFile": "js\/pengadaanpenerimaan\/pemasukan.js",
    "lastUpdate": "2018-10-30+15:09:16.06",
    "contentFile": "ZnVuY3Rpb24gUGVyYmFydWlfRGF0YSgpew0KCXBlbWFzdWthbi5yZWZyZXNoTGlzdCh0cnVlKTsNCn0NCg0KdmFyIHBlbWFzdWthblNLUEQgPSBuZXcgU2twZENscyh7DQoJcHJlZml4IDogJ3BlbWFzdWthblNLUEQnLCBmb3JtTmFtZToncGVtYXN1a2FuRm9ybScsIGtvbG9tV2lkdGg6MTIwLA0KCQ0KCS8qcGlsaWhCaWRhbmdBZnRlciA6IGZ1bmN0aW9uKCl7cGVtYXN1a2FuLnJlZnJlc2hMaXN0KHRydWUpO30sDQoJcGlsaWhVbml0QWZ0ZXIgOiBmdW5jdGlvbigpe3BlbWFzdWthbi5yZWZyZXNoTGlzdCh0cnVlKTt9LA0KCXBpbGloU3ViVW5pdEFmdGVyIDogZnVuY3Rpb24oKXtwZW1hc3VrYW4ucmVmcmVzaExpc3QodHJ1ZSk7fSwNCglwaWxpaFNla3NpQWZ0ZXIgOiBmdW5jdGlvbigpe3BlbWFzdWthbi5yZWZyZXNoTGlzdCh0cnVlKTt9Ki8NCn0pOw0KDQp2YXIgcGVtYXN1a2FuU0tQRDIgPSBuZXcgU2twZENscyh7DQoJcHJlZml4IDogJ3BlbWFzdWthblNLUEQyJywgDQoJZm9ybU5hbWU6ICdwZW1hc3VrYW5Gb3JtJywNCgkNCgkvKnBpbGloVXJ1c2FuZnRlciA6IGZ1bmN0aW9uKCl7cGVtYXN1a2FuLnJlZnJlc2hMaXN0KHRydWUpO30sDQoJcGlsaWhCaWRhbmdBZnRlciA6IGZ1bmN0aW9uKCl7cGVtYXN1a2FuLnJlZnJlc2hMaXN0KHRydWUpO30sDQoJcGlsaWhVbml0QWZ0ZXIgOiBmdW5jdGlvbigpe3BlbWFzdWthbi5yZWZyZXNoTGlzdCh0cnVlKTt9LA0KCXBpbGloU3ViVW5pdEFmdGVyIDogZnVuY3Rpb24oKXtwZW1hc3VrYW4ucmVmcmVzaExpc3QodHJ1ZSk7fSwNCglwaWxpaFNla3NpQWZ0ZXIgOiBmdW5jdGlvbigpe3BlbWFzdWthbi5yZWZyZXNoTGlzdCh0cnVlKTt9Ki8NCn0pOw0KDQp2YXIgcGVtYXN1a2FuID0gbmV3IERhZnRhck9iajIoew0KCXByZWZpeCA6ICdwZW1hc3VrYW4nLA0KCXVybCA6ICdwYWdlcy5waHA\/UGc9cGVtYXN1a2FuJywgDQoJZm9ybU5hbWUgOiAncGVtYXN1a2FuRm9ybScsDQoJc2F0dWFuX2Zvcm0gOiAnMCcsLy9kZWZhdWx0IGpzIHNhdHVhbg0KCUpNTF9QT1NUSU5HIDogMCwNCglCVExfUE9TVElORyA6IDAsDQoJam1sU2V0UE9TVCAJOiAwLA0KCURhcmlWYWxpZGFzaSA6IDAsDQoJU3RhdHVzUG9zdGluZyA6IDAsDQoJUE9TVF9UcmFjazEgOiAwLA0KCVBPU1RfVHJhY2syIDogMCwNCglQT1NUX1RyYWNrMyA6IDAsDQoJUE9TVF9UcmFjazQgOiAwLA0KCUFkYVlhbmdUYW55YSA6IDAsDQoJQWpheFRpbWVfVHJhY2sxIDogIiIsDQoJQWpheFRpbWVfVHJhY2syIDogIiIsDQoJQWpheFRpbWVfVHJhY2szIDogIiIsDQoJQWpheFRpbWVfVHJhY2s0IDogIiIsDQoJV2FrdHVUZXJha2hpciA6IDAsDQoJRXN0aW1hc2lXYWt0dW55YSA6IDAsDQoJQmFuZGluZ1dha3R1IDogMCwNCglsb2FkaW5nOiBmdW5jdGlvbigpew0KCQkvL2FsZXJ0KCdsb2FkaW5nJyk7DQoJCXRoaXMudG9wQmFyUmVuZGVyKCk7DQoJCXRoaXMuZmlsdGVyUmVuZGVyKCk7DQoJCXRoaXMuZGFmdGFyUmVuZGVyKCk7DQoJCXRoaXMuc3VtSGFsUmVuZGVyKCk7DQoJDQoJfSwNCgkNCglTZXRfUG9zdFRyYWNrIDogZnVuY3Rpb24oKXsNCgkJaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImptbF9icmdfbmV4dFBPU1QiKSl7DQoJCQlKbWxCcmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiam1sX2JyZ19uZXh0UE9TVCIpLnZhbHVlOw0KCQkJSm1sQnJnID0gcGFyc2VJbnQoSm1sQnJnKTsNCgkJCWlmKEptbEJyZyA+IDEwMCAmJiBKbWxCcmcgPD01MDApew0KCQkJCWRhdGEgPSAyOw0KCQkJfWVsc2UgaWYoSm1sQnJnID4gNTAwICYmIEptbEJyZyA8PTEwMDApew0KCQkJCWRhdGEgPSAzOw0KCQkJfWVsc2UgaWYoSm1sQnJnID4gMTAwMCl7DQoJCQkJZGF0YSA9IDQ7DQoJCQl9ZWxzZXsNCgkJCQlkYXRhID0gMTsNCgkJCX0NCgkJfWVsc2V7DQoJCQlkYXRhID0gMTsNCgkJfQ0KCQkJDQoJCQ0KCQlyZXR1cm4gZGF0YTsNCgl9LA0KCQ0KCUNla19QT1NUX1RyYWNrIDogZnVuY3Rpb24oKXsNCgkJdmFyIG1lPXRoaXM7DQoJCXZhciBwb3N0ID0gMDsNCgkJaWYocG9zdCA9PSAwICYmIG1lLlBPU1RfVHJhY2sxPT0xKXBvc3Q9MTsNCgkJaWYocG9zdCA9PSAwICYmIG1lLlBPU1RfVHJhY2syPT0xKXBvc3Q9MTsNCgkJaWYocG9zdCA9PSAwICYmIG1lLlBPU1RfVHJhY2szPT0xKXBvc3Q9MTsNCgkJaWYocG9zdCA9PSAwICYmIG1lLlBPU1RfVHJhY2s0PT0xKXBvc3Q9MTsNCgkJDQoJCXJldHVybiBwb3N0OwkJDQoJfSwNCgkNCglTZXRfUE9TVF9UcmFjayA6IGZ1bmN0aW9uKHRyYWNrLCBpc2kpew0KCQl2YXIgbWU9dGhpczsNCgkJc3dpdGNoKHRyYWNrKXsNCgkJCWNhc2UgMiA6IG1lLlBPU1RfVHJhY2syPWlzaTticmVhazsNCgkJCWNhc2UgMyA6IG1lLlBPU1RfVHJhY2szPWlzaTticmVhazsNCgkJCWNhc2UgNCA6IG1lLlBPU1RfVHJhY2s0PWlzaTticmVhazsNCgkJCWRlZmF1bHQ6IG1lLlBPU1RfVHJhY2sxPWlzaTticmVhazsNCgkJfQkNCgl9LA0KCQ0KCWZpbHRlclJlbmRlckFmdGVyIDogZnVuY3Rpb24oKXsNCgkJdmFyIG1lID0gdGhpczsNCgkJRGF0YVBlbmdhdHVyYW4ubnlhbGFrYW5kYXRlcGlja2VyMigpOwkJDQoJfSwNCgkNCglTZXROYW1hOiBmdW5jdGlvbihwaWxpaGFuKXsNCgkJCXZhciBtZT10aGlzOw0KCQkJJC5hamF4KHsNCgkJCQl0eXBlOidQT1NUJywgDQoJCQkJZGF0YTokKCcjJyt0aGlzLnByZWZpeCsnX2Zvcm1fVFREJykuc2VyaWFsaXplKCksDQoJCQkJdXJsOiB0aGlzLnVybCsnJnRpcGU9U2V0TmFtYSZwaWxpaGFuPScrcGlsaWhhbiwNCgkJCSAgCXN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsJCQ0KCQkJCQl2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7DQoJCQkJCWlmKHJlc3AuZXJyPT0nJyl7DQoJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmlwXycrcGlsaWhhbikudmFsdWU9cmVzcC5jb250ZW50Lm5pcDsNCgkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYW5na2F0XycrcGlsaWhhbikudmFsdWU9cmVzcC5jb250ZW50LnBhbmdrYXQ7DQoJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXNlbG9uXycrcGlsaWhhbikudmFsdWU9cmVzcC5jb250ZW50LmVzZWxvbjsNCgkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqYWJhdGFuXycrcGlsaWhhbikudmFsdWU9cmVzcC5jb250ZW50LmphYmF0YW47DQoJCQkJCX1lbHNlew0KCQkJCQkJYWxlcnQocmVzcC5lcnIpOw0KCQkJCQl9DQoJCQkgIAl9LA0KCQkJCWVycm9yOiBmdW5jdGlvbiAoeGhyLCBhamF4T3B0aW9ucywgdGhyb3duRXJyb3IpIHsNCgkJCQkJbWUuU2V0TmFtYShwaWxpaGFuKTsNCgkJICAgIAl9DQoJCQl9KTsJDQoJfSwJDQoJDQoJZGV0YWlsOiBmdW5jdGlvbigpew0KCQkvL2FsZXJ0KCdkZXRhaWwnKTsNCgkJdmFyIG1lID0gdGhpczsNCgkJZXJybXNnID0gdGhpcy5DZWtDaGVja2JveCgpOw0KCQlpZihlcnJtc2cgPT0nJyl7IA0KCQkJdmFyIGJveCA9IHRoaXMuR2V0Q2J4Q2hlY2tlZCgpOwkJCQ0KCQkJLy9Vc2VyQWt0aXZpdGFzRGV0LmdlbkRldGFpbCgpOwkJCQ0KCQkJDQoJCX1lbHNlew0KCQkNCgkJCWFsZXJ0KGVycm1zZyk7DQoJCX0NCgkJDQoJfSwNCgkNCglJbnB1dEJhcnU6IGZ1bmN0aW9uKCl7DQoJCXZhciBtZSA9IHRoaXM7DQoJCXZhciBjb3ZlcjEgPSB0aGlzLnByZWZpeCsnX2Zvcm1jb3Zlcic7DQoJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2hpZGRlbic7DQoJCWFkZENvdmVyUGFnZTIoY292ZXIxLDEsdHJ1ZSxmYWxzZSk7DQoJCSQuYWpheCh7DQoJCQl0eXBlOidQT1NUJywgDQoJCQlkYXRhOiQoJyMnK3RoaXMuZm9ybU5hbWUpLnNlcmlhbGl6ZSgpLA0KCQkJdXJsOiB0aGlzLnVybCsnJnRpcGU9Zm9ybUJhcnUnLA0KCQkgIAlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQl2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7CQ0KCQkJCWRlbEVsZW0oY292ZXIxKTsNCgkJCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdhdXRvJzsNCgkJCQkvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvdmVyKS5pbm5lckhUTUwgPSByZXNwLmNvbnRlbnQ7DQoJCQkJaWYocmVzcC5lcnI9PScnKXsNCgkJCQkJdmFyIGFGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGVtYXN1a2FuLmZvcm1OYW1lKTsJCQ0KCQkJCQlhRm9ybS5hY3Rpb249IG1lLnVybCsnX2lucyZZTj0xJzsvLyc\/T3A9JytvcCsnJlBnPTImaWRwcnM9Y2V0YWtfaGFsJzsJCQ0KCQkJCQlhRm9ybS50YXJnZXQ9J19ibGFuayc7DQoJCQkJCWFGb3JtLnN1Ym1pdCgpOwkNCgkJCQkJYUZvcm0udGFyZ2V0PScnOw0KCQkJCX1lbHNlew0KCQkJCQlhbGVydChyZXNwLmVycik7DQoJCQkJfQ0KCQkgIAl9DQoJCX0pOw0KCX0sDQoJDQoJVHV0dXBGb3JtOmZ1bmN0aW9uKGNvdmVyKXsNCgkJaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY292ZXIpKSBkZWxFbGVtKGNvdmVyKTsJCQkJCQ0KCX0sDQoJDQoJTGFwb3JhbjogZnVuY3Rpb24oKXsNCgkJdmFyIG1lPXRoaXM7DQoJCQ0KCQkvKnBlbWFzdWthbl9iYXJ1LmZvcm1OYW1lID0gbWUuZm9ybU5hbWU7DQoJCXBlbWFzdWthbl9iYXJ1Lm5tX3ByZWZpeCA9IG1lLnByZWZpeDsNCgkJcGVtYXN1a2FuX2JhcnUuTGFwb3Jhbl9BZnRlcjI9IGZ1bmN0aW9uKCl7CQkJDQoJCQl2YXIgYSA9IHRoaXM7DQoJCQlEYXRhUGVuZ2F0dXJhbi5ueWFsYWthbmRhdGVwaWNrZXIoKTsJCQkJDQoJCQlEYXRhUGVuZ2F0dXJhbi5ueWFsYWthbmRhdGVwaWNrZXIyKCk7CQkJCQ0KCQkJRGF0YVBlbmdhdHVyYW4ubnlhbGFrYW5kYXRlcGlja2VyMygpOwkJCQkNCgkJfTsJDQoJCXBlbWFzdWthbl9iYXJ1LkxhcG9yYW4oKTsqLw0KCQltZS5CdWF0TGFwb3JhbigpOw0KCX0sDQoJDQoJQnVhdExhcG9yYW46IGZ1bmN0aW9uKCl7DQoJCXZhciBtZSA9IHRoaXM7CQkJCQkNCgkJdmFyIGNvdmVyID0gdGhpcy5wcmVmaXgrJ19mb3JtY292ZXInOw0KCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdoaWRkZW4nOw0KCQlhZGRDb3ZlclBhZ2UyKGNvdmVyLDEsdHJ1ZSxmYWxzZSk7DQoJCQ0KCQkkLmFqYXgoew0KCQkJdHlwZTonUE9TVCcsIA0KCQkJZGF0YTokKCcjJyt0aGlzLmZvcm1OYW1lKS5zZXJpYWxpemUoKSwNCgkJICAJdXJsOiB0aGlzLnVybCsnJnRpcGU9QnVhdExhcG9yYW4nLA0KCQkgIAlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQl2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7DQoJCQkJaWYocmVzcC5lcnIgPT0gJycpew0KCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb3ZlcikuaW5uZXJIVE1MID0gcmVzcC5jb250ZW50Ow0KCQkJCQlEYXRhUGVuZ2F0dXJhbi5ueWFsYWthbmRhdGVwaWNrZXIoKTsNCgkJCQkJRGF0YVBlbmdhdHVyYW4ubnlhbGFrYW5kYXRlcGlja2VyMigpOw0KCQkJCQltZS5HZXRfQnRuX1RURCgxKTsNCgkJCQkJbWUuR2V0X0J0bl9UVEQoMik7DQoJCQkJfWVsc2V7DQoJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQkJbWUuQ2xvc2UoKTsNCgkJCQl9CQkJDQoJCSAgCX0sDQoJCQllcnJvcjogZnVuY3Rpb24gKHhociwgYWpheE9wdGlvbnMsIHRocm93bkVycm9yKSB7DQoJCQkJZGVsRWxlbShjb3Zlcik7DQoJCQkJYWxlcnQoIkdhZ2FsIE1lbXVhdCBEYXRhLCBTaWxhaGthbiBVbGFuZ2kgS2VtYmFsaSAhIik7DQoJICAgIAl9DQoJCX0pOwkJCQkNCgl9LA0KDQoJUGVyb2xlaGFuOiBmdW5jdGlvbigpew0KCQl2YXIgbWUgPSB0aGlzOwkJCQkJDQoJCXZhciBjb3ZlciA9IHRoaXMucHJlZml4KydfZm9ybWNvdmVyX1Blcm9sZWhhbic7DQoJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2hpZGRlbic7DQoJCWFkZENvdmVyUGFnZTIoY292ZXIsMix0cnVlLGZhbHNlKTsNCgkJDQoJCSQuYWpheCh7DQoJCQl0eXBlOidQT1NUJywgDQoJCQlkYXRhOiQoJyMnK3RoaXMucHJlZml4KydfZm9ybScpLnNlcmlhbGl6ZSgpLA0KCQkgIAl1cmw6IHRoaXMudXJsKycmdGlwZT1QZXJvbGVoYW4nLA0KCQkgIAlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQl2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7CQ0KCQkJCWRlbEVsZW0oY292ZXIpOwkJDQoJCQkJaWYocmVzcC5lcnI9PScnKXsNCgkJCQkJJCgiI0xibF9MZXZlbCIpLmh0bWwocmVzcC5jb250ZW50LkxhYmVsKTsNCgkJCQkJJCgiI0xibF9MZXZlbFBlbWlzYWgiKS5odG1sKHJlc3AuY29udGVudC5QZW1pc2FoKTsNCgkJCQkJJCgiI0xibF9MZXZlbFZhbCIpLmh0bWwocmVzcC5jb250ZW50LklzaSk7DQoJCQkJCQ0KCQkJCQkkKCIjTGJsX1VydXRrYW4iKS5odG1sKHJlc3AuY29udGVudC5MYWJlbF9VcnV0a2FuKTsNCgkJCQkJJCgiI0xibF9VcnV0a2FuUGVtaXNhaCIpLmh0bWwocmVzcC5jb250ZW50LlBlbWlzYWhfVXJ1dGthbik7DQoJCQkJCSQoIiNMYmxfVXJ1dGthblZhbCIpLmh0bWwocmVzcC5jb250ZW50LklzaV9VcnV0a2FuKTsNCgkJCQkJbWUuUGVyb2xlaGFuX0FmdGVyKHJlc3ApOw0KCQkJCX1lbHNlewkJCQkJDQoJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQl9DQoJCSAgCX0sDQoJCQllcnJvcjogZnVuY3Rpb24gKHhociwgYWpheE9wdGlvbnMsIHRocm93bkVycm9yKSB7DQoJCQkJZGVsRWxlbShjb3Zlcik7DQoJCQkJYWxlcnQoIkdhZ2FsIE1lbmdhbWJpbCBEYXRhLCBTaWxhaGthbiBVbGFuZ2kgS2VtYmFsaSAhIik7DQoJICAgIAl9DQoJCX0pOwkJCQkNCgl9LA0KDQoJUGVyb2xlaGFuX0FmdGVyOiBmdW5jdGlvbihyZXNwKXsNCgkJdmFyIG1lPXRoaXM7DQoJCXZhciBuYW1hX2xhcG9yYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibmFtYV9sYXBvcmFuIikudmFsdWU7DQoJCXZhciBjYXJhX3Blcm9sZWhhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwZXJvbGVoYW4iKTsNCgkJdmFyIHN1bWJlcl9EYW5hcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzdW1iZXJfRGFuYXMiKTsNCgkJDQoJCWlmKG5hbWFfbGFwb3JhbiA9PSAiMSIgfHwgbmFtYV9sYXBvcmFuID09ICIyIil7DQoJCQljYXJhX3Blcm9sZWhhbi52YWx1ZSA9ICIiOw0KCQkJc3VtYmVyX0RhbmFzLnZhbHVlID0gIiI7DQoJCQljYXJhX3Blcm9sZWhhbi5kaXNhYmxlZCA9IGZhbHNlOwkNCgkJCXN1bWJlcl9EYW5hcy5kaXNhYmxlZCA9IGZhbHNlOwkNCgkJfQ0KDQoJCWlmKG5hbWFfbGFwb3JhbiA9PSAiMyIpew0KCQkJY2FyYV9wZXJvbGVoYW4udmFsdWUgPSAiMSI7DQoJCQlzdW1iZXJfRGFuYXMudmFsdWUgPSAiQVBCRCI7DQoJCQljYXJhX3Blcm9sZWhhbi5kaXNhYmxlZCA9IHRydWU7CQ0KCQkJc3VtYmVyX0RhbmFzLmRpc2FibGVkID0gdHJ1ZTsJDQoJCX0NCg0KCQlpZihuYW1hX2xhcG9yYW4gPT0gIjEyIil7DQoJCQljYXJhX3Blcm9sZWhhbi52YWx1ZSA9ICIiOw0KCQkJc3VtYmVyX0RhbmFzLnZhbHVlID0gIiI7DQoJCQljYXJhX3Blcm9sZWhhbi5kaXNhYmxlZCA9IHRydWU7DQoJCQlzdW1iZXJfRGFuYXMuZGlzYWJsZWQgPSBmYWxzZTsJCQ0KCQl9DQoNCgkJaWYobmFtYV9sYXBvcmFuID09ICI5Iil7DQoJCQljYXJhX3Blcm9sZWhhbi52YWx1ZSA9ICIxIjsNCgkJCXN1bWJlcl9EYW5hcy52YWx1ZSA9ICIiOw0KCQkJY2FyYV9wZXJvbGVoYW4uZGlzYWJsZWQgPSB0cnVlOwkNCgkJCXN1bWJlcl9EYW5hcy5kaXNhYmxlZCA9IGZhbHNlOwkNCgkJfQ0KCQkNCgkJaWYobmFtYV9sYXBvcmFuID09ICIxMCIpew0KCQkJY2FyYV9wZXJvbGVoYW4udmFsdWUgPSAiIjsNCgkJCXN1bWJlcl9EYW5hcy52YWx1ZSA9ICIiOw0KCQkJY2FyYV9wZXJvbGVoYW4uZGlzYWJsZWQgPSB0cnVlOw0KCQkJc3VtYmVyX0RhbmFzLmRpc2FibGVkID0gZmFsc2U7CQkNCgkJfQ0KCQkNCgkJaWYobmFtYV9sYXBvcmFuID09ICIxMSIpew0KCQkJY2FyYV9wZXJvbGVoYW4udmFsdWUgPSAiIjsNCgkJCXN1bWJlcl9EYW5hcy52YWx1ZSA9ICIiOw0KCQkJY2FyYV9wZXJvbGVoYW4uZGlzYWJsZWQgPSBmYWxzZTsNCgkJCXN1bWJlcl9EYW5hcy5kaXNhYmxlZCA9IHRydWU7CQkNCgkJfQ0KCQkNCgkJDQoJCWlmKG5hbWFfbGFwb3JhbiA9PSAiMTMiIHx8IG5hbWFfbGFwb3JhbiA9PSAiMTQiIHx8IG5hbWFfbGFwb3JhbiA9PSAiMTUiKXsNCgkJCWNhcmFfcGVyb2xlaGFuLnZhbHVlID0gIjEiOw0KCQkJc3VtYmVyX0RhbmFzLnZhbHVlID0gIiI7DQoJCQljYXJhX3Blcm9sZWhhbi5kaXNhYmxlZCA9IHRydWU7DQoJCQlzdW1iZXJfRGFuYXMuZGlzYWJsZWQgPSBmYWxzZTsJCQ0KCQl9DQoNCgkJaWYobmFtYV9sYXBvcmFuID09ICIxNiIgfHwgbmFtYV9sYXBvcmFuID09ICIxNyIgIHx8IG5hbWFfbGFwb3JhbiA9PSAiMTgiICB8fCBuYW1hX2xhcG9yYW4gPT0gIjE5IiApew0KCQkJY2FyYV9wZXJvbGVoYW4udmFsdWUgPSAiMSI7DQoJCQlzdW1iZXJfRGFuYXMudmFsdWUgPSAiQVBCRCI7DQoJCQljYXJhX3Blcm9sZWhhbi5kaXNhYmxlZCA9IHRydWU7DQoJCQlzdW1iZXJfRGFuYXMuZGlzYWJsZWQgPSB0cnVlOwkJDQoJCX0NCgl9LA0KDQoJVFREX0xhcG9yYW5CYXJ1OiBmdW5jdGlvbihWYWxEYXRhKXsNCgkJdmFyIG1lPXRoaXM7DQoJCXBlbWFzdWthbl9pbnMuQmFydVBlbmVyaW1hKCIjIittZS5wcmVmaXgrIl9mb3JtIik7DQoJCXBlbWFzdWthbl9pbnMuU2ltcGFuUGVuZXJpbWFfQWZ0ZXI9IGZ1bmN0aW9uKHBhcnJhbSwgcmVzcCl7DQoJCQltZS5HZXRfUEVORVJJTUFfTUVOR0VUQUhVSShWYWxEYXRhKTsJCQkJCQ0KCQl9Ow0KCX0sDQoNCglTZXRfVGFuZGFUYW5nYW46IGZ1bmN0aW9uKFBpbD0xKXsNCgkJdmFyIG1lID0gdGhpczsJCQkJCQ0KCQl2YXIgY292ZXIgPSB0aGlzLnByZWZpeCsnX2Zvcm1jb3Zlcl9QZXJvbGVoYW4nOw0KCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdoaWRkZW4nOw0KCQlhZGRDb3ZlclBhZ2UyKGNvdmVyLDIsdHJ1ZSxmYWxzZSk7DQoJCQ0KCQkkLmFqYXgoew0KCQkJdHlwZTonUE9TVCcsIA0KCQkJZGF0YTokKCcjJyt0aGlzLnByZWZpeCsnX2Zvcm0nKS5zZXJpYWxpemUoKSwNCgkJICAJdXJsOiB0aGlzLnVybCsnJnRpcGU9U2V0X1RhbmRhVGFuZ2FuJywNCgkJICAJc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewkJDQoJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOwkNCgkJCQlkZWxFbGVtKGNvdmVyKTsJCQ0KCQkJCWlmKHJlc3AuZXJyPT0nJyl7DQoJCQkJCW1lLkdldF9CdG5fVFREKFBpbCk7DQoJCQkJfWVsc2V7CQkJCQkNCgkJCQkJYWxlcnQocmVzcC5lcnIpOw0KCQkJCX0NCgkJICAJfSwNCgkJCWVycm9yOiBmdW5jdGlvbiAoeGhyLCBhamF4T3B0aW9ucywgdGhyb3duRXJyb3IpIHsNCgkJCQlkZWxFbGVtKGNvdmVyKTsNCgkJCQlhbGVydCgiR2FnYWwgTWVuZ2FtYmlsIERhdGEsIFNpbGFoa2FuIFVsYW5naSBLZW1iYWxpICEiKTsNCgkgICAgCX0NCgkJfSk7CQkJCQ0KCX0sDQoNCglHZXRfUEVORVJJTUFfTUVOR0VUQUhVSTpmdW5jdGlvbihWYWxEYXRhLCBJZFNldCl7DQoJCXZhciBtZT10aGlzOw0KCQkNCgkJdmFyIGNvdmVyID0gdGhpcy5wcmVmaXgrJ19mb3JtY292ZXJfR2V0X1BFTkVSSU1BX01FTkdFVEFIVUknOw0KCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdoaWRkZW4nOw0KCQlhZGRDb3ZlclBhZ2UyKGNvdmVyLDIsdHJ1ZSxmYWxzZSk7CQkNCgkJDQoJCSQuYWpheCh7DQoJCQl0eXBlOidQT1NUJywgDQoJCQlkYXRhOiQoJyMnK3RoaXMucHJlZml4KydfZm9ybScpLnNlcmlhbGl6ZSgpLA0KCQkJdXJsOiB0aGlzLnVybCsnJnRpcGU9R2V0X1BFTkVSSU1BX01FTkdFVEFIVUkmVmFsRGF0YT0nK1ZhbERhdGErJyZJZFNldD0nK0lkU2V0LA0KCQkgIAlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQl2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7CQ0KCQkJCWRlbEVsZW0oY292ZXIpOwkJDQoJCQkJaWYocmVzcC5lcnI9PScnKXsNCgkJCQkJbWUuQ2xvc2UoKTsNCgkJCQkJbWUuTGFwb3JhbigpOw0KCQkJCX1lbHNlewkJCQkJDQoJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQl9DQoJCSAgCX0sDQoJCQllcnJvcjogZnVuY3Rpb24gKHhociwgYWpheE9wdGlvbnMsIHRocm93bkVycm9yKSB7DQoJCQkJZGVsRWxlbShjb3Zlcik7DQoJCQkJbWUuR2V0X1BFTkVSSU1BX01FTkdFVEFIVUkoKTsNCgkgICAgCX0NCgkJfSk7CQ0KCX0sCQ0KDQoNCglHZXRfQnRuX1RURDpmdW5jdGlvbih2YWxfZGF0YSl7DQoJCXZhciBtZT10aGlzOw0KCQkNCgkJdmFyIGNvdmVyID0gdGhpcy5wcmVmaXgrJ19mb3JtY292ZXJfR2V0X0J0bl9UVEQnOw0KCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdoaWRkZW4nOw0KCQlhZGRDb3ZlclBhZ2UyKGNvdmVyLDIsdHJ1ZSxmYWxzZSk7CQkNCgkJDQoJCSQuYWpheCh7DQoJCQl0eXBlOidQT1NUJywgDQoJCQlkYXRhOiQoJyMnK3RoaXMucHJlZml4KydfZm9ybScpLnNlcmlhbGl6ZSgpLA0KCQkJdXJsOiB0aGlzLnVybCsnJnRpcGU9R2V0X0J0bl9UVEQmVmFsRGF0YT0nK3ZhbF9kYXRhLA0KCQkgIAlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQl2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7CQ0KCQkJCWRlbEVsZW0oY292ZXIpOwkJDQoJCQkJaWYocmVzcC5lcnI9PScnKXsNCgkJCQkJJCgiI0xibF9UVERfIit2YWxfZGF0YSkuaHRtbChyZXNwLmNvbnRlbnQpOw0KCQkJCX1lbHNlewkJCQkJDQoJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQl9DQoJCSAgCX0sDQoJCQllcnJvcjogZnVuY3Rpb24gKHhociwgYWpheE9wdGlvbnMsIHRocm93bkVycm9yKSB7DQoJCQkJZGVsRWxlbShjb3Zlcik7DQoJCQkJYWxlcnQoIkdhZ2FsIE1lbmdhbWJpbCBEYXRhLCBTaWxhaGthbiBVbGFuZ2kgS2VtYmFsaSAhIik7DQoJICAgIAl9DQoJCX0pOwkNCgl9LA0KDQoJVFREX0xhcG9yYW5VYmFoOmZ1bmN0aW9uKFZhbERhdGEpew0KCQl2YXIgbWU9dGhpczsNCgkJR2V0RGF0YSA9IFZhbERhdGEgPT0gMT8iY21iX3BlbmVyaW1hIjoiY21iX21lbmdldGFodWkiOw0KCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGVuZXJpbWEiKS52YWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKEdldERhdGEpLnZhbHVlOwkNCgkJcGVtYXN1a2FuX2lucy5VYmFoUGVuZXJpbWEoIiNwZW1hc3VrYW5fZm9ybSIpOw0KCQlwZW1hc3VrYW5faW5zLlNpbXBhblBlbmVyaW1hX0FmdGVyPSBmdW5jdGlvbihwYXJyYW0sIHJlc3Apew0KCQkJbWUuR2V0X1BFTkVSSU1BX01FTkdFVEFIVUkoVmFsRGF0YSwgcmVzcC5jb250ZW50LklkRGF0YSk7CQkJCQkNCgkJfTsNCgl9LA0KCQ0KCVRURF9MYXBvcmFuSGFwdXM6ZnVuY3Rpb24oVmFsRGF0YSl7DQoJCXZhciBtZT10aGlzOw0KCQlHZXREYXRhID0gVmFsRGF0YSA9PSAxPyJjbWJfcGVuZXJpbWEiOiJjbWJfbWVuZ2V0YWh1aSI7DQoJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwZW5lcmltYSIpLnZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoR2V0RGF0YSkudmFsdWU7CQ0KCQlwZW1hc3VrYW5faW5zLkhhcHVzUGVuZXJpbWEoIiNwZW1hc3VrYW5fZm9ybSIpOw0KCQlwZW1hc3VrYW5faW5zLkhhcHVzUGVuZXJpbWFfQWZ0ZXI9IGZ1bmN0aW9uKHJlc3Apew0KCQkJbWUuR2V0X1BFTkVSSU1BX01FTkdFVEFIVUkoVmFsRGF0YSwgIiIpOwkJCQkJDQoJCX07DQoJfSwNCgkNCglMYXBvcmFuVFREOiBmdW5jdGlvbigpew0KCQl2YXIgbWUgPSB0aGlzOw0KCQkJCQkJDQoJCQl2YXIgY292ZXIgPSB0aGlzLnByZWZpeCsnX2Zvcm1jb3Zlcl9UVEQnOw0KCQkJZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdz0naGlkZGVuJzsNCgkJCWFkZENvdmVyUGFnZTIoY292ZXIsMix0cnVlLGZhbHNlKTsNCgkJCQ0KCQkJJC5hamF4KHsNCgkJCQl0eXBlOidQT1NUJywgDQoJCQkJZGF0YTokKCcjJyt0aGlzLnByZWZpeCsnX2Zvcm0nKS5zZXJpYWxpemUoKSwNCgkJCSAgCXVybDogdGhpcy51cmwrJyZ0aXBlPUxhcG9yYW5UVEQnLA0KCQkJICAJc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewkJDQoJCQkJCXZhciByZXNwID0gZXZhbCgnKCcgKyBkYXRhICsgJyknKTsNCgkJCQkJaWYocmVzcC5lcnIgPT0gJycpew0KCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY292ZXIpLmlubmVySFRNTCA9IHJlc3AuY29udGVudDsNCgkJCQkJCXNldFRpbWVvdXQoZnVuY3Rpb24gbXlGdW5jdGlvbigpIHtwZW1hc3VrYW4uU2V0TmFtYSgncGVuZXJpbWEnKTt9LDEwMCk7DQoJCQkJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uIG15RnVuY3Rpb24oKSB7cGVtYXN1a2FuLlNldE5hbWEoJ21lbmdldGFodWknKTt9LDEwMCk7DQoJCQkJCX1lbHNlew0KCQkJCQkJYWxlcnQocmVzcC5lcnIpOw0KCQkJCQkJbWUuQ2xvc2UoKTsNCgkJCQkJfQkJCQ0KCQkJCQkNCgkJCQkJLy9zZXRUaW1lb3V0KGZ1bmN0aW9uIG15RnVuY3Rpb24oKSB7cGVtYXN1a2FuLmphbSgpfSwxMDApOwkNCgkJCQkJLy9tZS5BZnRlckZvcm1CYXJ1KCk7DQoJCQkgIAl9DQoJCQl9KTsNCgkJCQ0KCQkJDQoJfSwNCgkNCgkNCgkNCglkYWZ0YXJSZW5kZXI6ZnVuY3Rpb24oKXsNCgkJdmFyIG1lID10aGlzOyAvL3JlbmRlciBkYWZ0YXIgDQoJCWFkZENvdmVyUGFnZTIoDQoJCQknZGFmdGFyX2NvdmVyJywJMSwgCXRydWUsIHRydWUsCXtyZW5kZXJUbzogdGhpcy5wcmVmaXgrJ19jb250X2RhZnRhcicsDQoJCQlpbWdzcmM6ICdpbWFnZXMvd2FpdC5naWYnLA0KCQkJc3R5bGU6IHtwb3NpdGlvbjonYWJzb2x1dGUnLCB0b3A6JzUnLCBsZWZ0Oic1J30NCgkJCX0NCgkJKTsNCgkJJC5hamF4KHsNCgkJICAJdXJsOiB0aGlzLnVybCsnJnRpcGU9ZGFmdGFyJywNCgkJIAl0eXBlOidQT1NUJywgDQoJCQlkYXRhOiQoJyMnK3RoaXMuZm9ybU5hbWUpLnNlcmlhbGl6ZSgpLCANCgkJICAJc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewkJDQoJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOw0KCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1lLnByZWZpeCsnX2NvbnRfZGFmdGFyJykuaW5uZXJIVE1MID0gcmVzcC5jb250ZW50Ow0KCQkJCW1lLnN1bUhhbFJlbmRlcigpOw0KCQkgIAl9DQoJCX0pOw0KCX0sDQoJVmFsaWRhc2k6ZnVuY3Rpb24oZGF0YW55YT0wKXsNCgkJdmFyIG1lID0gdGhpczsNCgkJZXJybXNnID0gdGhpcy5DZWtDaGVja2JveCgpOw0KCQltZS5EYXJpVmFsaWRhc2kgPSBkYXRhbnlhOw0KCQlpZihlcnJtc2cgPT0nJyl7IA0KCQkJdmFyIGJveCA9IHRoaXMuR2V0Q2J4Q2hlY2tlZCgpOw0KCQkJDQoJCQl2YXIgY292ZXIgPSB0aGlzLnByZWZpeCsnX2Zvcm1jb3Zlcl92YWxpZGFzaSc7DQoJCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdoaWRkZW4nOw0KCQkJaWYobWUuc2F0dWFuX2Zvcm09PTApey8vYmFydSBkYXJpIHNhdHVhbg0KCQkJCWFkZENvdmVyUGFnZTIoY292ZXIsMSx0cnVlLGZhbHNlKTsJDQoJCQl9ZWxzZXsvL2JhcnUgZGFyaSBiYXJhbmcNCgkJCQlhZGRDb3ZlclBhZ2UyKGNvdmVyLDk5OSx0cnVlLGZhbHNlKTsJDQoJCQl9DQoJCQkkLmFqYXgoew0KCQkJCXR5cGU6J1BPU1QnLCANCgkJCQlkYXRhOiQoJyMnK3RoaXMuZm9ybU5hbWUpLnNlcmlhbGl6ZSgpLA0KCQkJICAJdXJsOiB0aGlzLnVybCsnJnRpcGU9VmFsaWRhc2knLA0KCQkJICAJc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewkJDQoJCQkJCXZhciByZXNwID0gZXZhbCgnKCcgKyBkYXRhICsgJyknKTsNCgkJCQkJaWYocmVzcC5lcnIgPT0gJycpew0KCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY292ZXIpLmlubmVySFRNTCA9IHJlc3AuY29udGVudDsNCgkJCQkJfWVsc2V7DQoJCQkJCQlhbGVydChyZXNwLmVycik7DQoJCQkJCQlkZWxFbGVtKGNvdmVyKTsNCgkJCQkJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2F1dG8nOw0KCQkJCQl9CQkNCgkJCSAgCX0NCgkJCX0pOw0KCQl9ZWxzZXsNCgkJCWFsZXJ0KGVycm1zZyk7DQoJCX0NCgkJDQoJfSwNCgkNCglqYW06IGZ1bmN0aW9uICgpIHsNCgkgIHZhciBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RnbF92YWxpZGFzaScpLA0KCSAgZCA9IG5ldyBEYXRlKCksIGgsIG0sIHM7DQoJICBoID0gZC5nZXRIb3VycygpOw0KCSAgbSA9IHBlbWFzdWthbi5zZXRKYW0oZC5nZXRNaW51dGVzKCkpOw0KCSAgcyA9IHBlbWFzdWthbi5zZXRKYW0oZC5nZXRTZWNvbmRzKCkpOw0KCSAgDQoJICANCgkgIGhhcmkgPSBkLmdldERhdGUoKTsNCgkgIGJ1bGFuID0gZC5nZXRNb250aCgpOw0KCSAgeXkgPSBkLmdldFllYXIoKTsNCgkgIHZhciBUYWh1biA9ICh5eSA8IDEwMDApID8geXkgKyAxOTAwIDogeXk7DQoJICBidWxhbiA9IGJ1bGFuICsgMTsNCgkgIGJsbiA9IGJ1bGFuLnRvU3RyaW5nKCkNCgkgIGlmKGJsbi5sZW5ndGggPT0gMSlibG4gPSAiMCIrYmxuOw0KCQ0KCSAgZS52YWx1ZSA9IGhhcmkgKyAnLScrIGJsbiArICctJysgVGFodW4gKyIgIisgaCArJzonKyBtICsnOicrIHM7DQoJDQoJICANCgkgIHNldFRpbWVvdXQoZnVuY3Rpb24gbXlGdW5jdGlvbigpIHtwZW1hc3VrYW4uamFtKCl9LDEwMDApOw0KCSB9LA0KCQ0KCSBzZXRKYW06IGZ1bmN0aW9uIChlKSB7DQoJICAJZSA9IGUgPCAxMCA\/ICcwJysgZSA6IGU7DQoJICAJcmV0dXJuIGU7DQoJIH0sDQoJDQoJRWRpdDpmdW5jdGlvbigpew0KCQl2YXIgbWUgPSB0aGlzOw0KCQllcnJtc2cgPSB0aGlzLkNla0NoZWNrYm94KCk7DQoJCWlmKGVycm1zZyA9PScnKXsgDQoJCQl2YXIgYm94ID0gdGhpcy5HZXRDYnhDaGVja2VkKCk7DQoJCQl2YXIgY292ZXIxID0gdGhpcy5wcmVmaXgrJ19mb3JtVWJhaGNvdmVyMic7DQoJCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdoaWRkZW4nOw0KCQkJYWRkQ292ZXJQYWdlMihjb3ZlcjEsMSx0cnVlLGZhbHNlKTsNCgkJCSQuYWpheCh7DQoJCQkJdHlwZTonUE9TVCcsIA0KCQkJCWRhdGE6JCgnIycrdGhpcy5mb3JtTmFtZSkuc2VyaWFsaXplKCksDQoJCQkJdXJsOiB0aGlzLnVybCsnJnRpcGU9UGVuZ2VjZWthblViYWgmQ2VrVWJhaD0xJywNCgkJCSAgCXN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsJCQ0KCQkJCQl2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7CQ0KCQkJCQlkZWxFbGVtKGNvdmVyMSk7DQoJCQkJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2F1dG8nOw0KCQkJCQkvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvdmVyKS5pbm5lckhUTUwgPSByZXNwLmNvbnRlbnQ7DQoJCQkJCWlmKHJlc3AuZXJyPT0nJyl7DQoJCQkJCQl2YXIgYUZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwZW1hc3VrYW4uZm9ybU5hbWUpOwkJDQoJCQkJCQlhRm9ybS5hY3Rpb249IHBlbWFzdWthbi51cmwrJ19pbnMmWU49Mic7Ly8nP09wPScrb3ArJyZQZz0yJmlkcHJzPWNldGFrX2hhbCc7CQkNCgkJCQkJCWFGb3JtLnRhcmdldD0nX2JsYW5rJzsNCgkJCQkJCWFGb3JtLnN1Ym1pdCgpOwkNCgkJCQkJCWFGb3JtLnRhcmdldD0nJzsNCgkJCQkJfWVsc2V7DQoJCQkJCQlhbGVydChyZXNwLmVycik7DQoJCQkJCX0NCgkJCSAgCX0NCgkJCX0pOw0KCQkJDQoJCQkNCgkJfWVsc2V7DQoJCQlhbGVydChlcnJtc2cpOw0KCQl9DQoJCQ0KCX0sDQoJU2ltcGFuU0lQS0Q6IGZ1bmN0aW9uKCl7DQoJCXZhciBtZT0gdGhpczsJDQoJCXRoaXMuT25FcnJvckNsb3NlID0gZmFsc2UJDQoJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2hpZGRlbic7DQoJCXZhciBjb3ZlciA9IHRoaXMucHJlZml4KydfZm9ybWNvdmVyX3NpbXBhbnZhbGlkYXNpJzsNCgkJYWRkQ292ZXJQYWdlMihjb3ZlciwxLHRydWUsZmFsc2UpOw0KCQkNCgkJdmFyIGlkcGVuZXJpbWFhbj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCggdGhpcy5wcmVmaXgrJ19pZHBsaCcpLnZhbHVlOw0KCQkkLmFqYXgoew0KCQkJdHlwZTonUE9TVCcsIA0KCQkJZGF0YTokKCcjJyt0aGlzLnByZWZpeCsnX2Zvcm0nKS5zZXJpYWxpemUoKSwNCgkJCXVybDogJ2FwaS5waHA\/UGc9Y2VrX2ludGVnX3NpcGtkJmlkcGVuZXJpbWFhbj0nK2lkcGVuZXJpbWFhbiwNCgkJICAJc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewkJDQoJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOwkJCQ0KCQkJCS8vZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY292ZXIpLmlubmVySFRNTCA9IHJlc3AuY29udGVudDsNCgkJCQlkZWxFbGVtKGNvdmVyKTsNCgkJCQlpZihyZXNwLmVycj09JycpewkJCQkJDQoJCQkJCW1lLlNpbXBhbigpOw0KCQkJCX1lbHNlew0KCQkJCQlhbGVydChyZXNwLmVycik7DQoJCQkJfQ0KCQkgIAl9DQoJCX0pOw0KCX0sCQ0KCVNpbXBhbjogZnVuY3Rpb24oKXsNCgkJdmFyIG1lPSB0aGlzOwkNCgkJdGhpcy5PbkVycm9yQ2xvc2UgPSBmYWxzZQkNCgkJZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdz0naGlkZGVuJzsNCgkJdmFyIGNvdmVyID0gdGhpcy5wcmVmaXgrJ19mb3JtY292ZXJfc2ltcGFudmFsaWRhc2knOw0KCQlhZGRDb3ZlclBhZ2UyKGNvdmVyLDEsdHJ1ZSxmYWxzZSk7CQ0KCQkvKnRoaXMuc2VuZFJlcSgNCgkJCXRoaXMudXJsLA0KCQkJeyBpZHByczogMCwgZGFmdGFyUHJvc2VzOiBuZXcgQXJyYXkoJ3NpbXBhbicpfSwNCgkJCXRoaXMuZm9ybURpYWxvZyk7Ki8NCgkJJC5hamF4KHsNCgkJCXR5cGU6J1BPU1QnLCANCgkJCWRhdGE6JCgnIycrdGhpcy5wcmVmaXgrJ19mb3JtJykuc2VyaWFsaXplKCksDQoJCQl1cmw6IHRoaXMudXJsKycmdGlwZT1zaW1wYW4nLA0KCQkgIAlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQl2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7CQkJDQoJCQkJLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb3ZlcikuaW5uZXJIVE1MID0gcmVzcC5jb250ZW50Ow0KCQkJCWRlbEVsZW0oY292ZXIpOw0KCQkJCWlmKHJlc3AuZXJyPT0nJyl7CQkJCQkNCgkJCQkJYWxlcnQocmVzcC5jb250ZW50LmFsZXJ0KTsJDQoJCQkJCW1lLkNsb3NlVmFsaWRhc2koKTsNCgkJCQkJcGVtYXN1a2FuLnJlZnJlc2hMaXN0KCk7DQoJCQkJfWVsc2V7DQoJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQl9DQoJCSAgCX0NCgkJfSk7DQoJfSwNCgkNCglDZXRha1Blcm1vaG9uYW46IGZ1bmN0aW9uKGlkbnlhLCBGb3JtbnlhPSdwZW1hc3VrYW5faW5zRm9ybScpew0KCQ0KCQkJCQ0KCQkJdmFyIGFGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoRm9ybW55YSk7CQkNCgkJCWFGb3JtLmFjdGlvbj0gdGhpcy51cmwrJyZ0aXBlPUNldGFrUGVybW9ob25hbiZpZG55YT0nK2lkbnlhOy8vJz9PcD0nK29wKycmUGc9MiZpZHBycz1jZXRha19oYWwnOwkJDQoJCQlhRm9ybS50YXJnZXQ9J19ibGFuayc7DQoJCQlhRm9ybS5zdWJtaXQoKTsJDQoJCQlhRm9ybS50YXJnZXQ9Jyc7DQoJfSwNCgkNCgloZWFkZXJUYWJlbDogZnVuY3Rpb24oKXsNCgkJdmFyIHRhcmdldCA9ICQoJyNoZWFkZXItZml4Jyk7DQoJCXZhciBkaXZfcG9zaXRpb24gPSB0YXJnZXQub2Zmc2V0KCkudG9wOw0KCQkNCgkJJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHsgDQoJCSAgICB2YXIgeV9wb3NpdGlvbiA9ICQod2luZG93KS5zY3JvbGxUb3AoKTsNCgkJICAgIGlmKHlfcG9zaXRpb24gPiBkaXZfcG9zaXRpb24pIHsNCgkJICAgICAgICB0YXJnZXQuYWRkQ2xhc3MoJ3RldGFwZGlhdGFzJyk7DQoJCSAgICB9DQoJCSAgICBlbHNlIHsNCgkJICAgICAgICB0YXJnZXQucmVtb3ZlQ2xhc3MoJ3RldGFwZGlhdGFzJyk7DQoJCSAgICB9DQoJCX0pOw0KCQkJDQoJfSwNCgkNCglEaXN0cmlidXNpa2FuOiBmdW5jdGlvbihJZFRlcmltYSwgSWRUZXJpbWFfZGV0LGNscz0xKXsNCgkJdmFyIGFGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlbWFzdWthbkZvcm0nKTsJCQ0KCQkJYUZvcm0uYWN0aW9uPSB0aGlzLnVybCsnX2Rpc3RyaWJ1c2kmaWRUZXJpbWFfbnlhPScrSWRUZXJpbWErJyZpZFRlcmltYV9kZXRfbnlhPScrSWRUZXJpbWFfZGV0KycmY2xzPScrY2xzOw0KCQkJYUZvcm0udGFyZ2V0PSdfYmxhbmsnOw0KCQkJYUZvcm0uc3VibWl0KCk7CQ0KCQkJYUZvcm0udGFyZ2V0PScnOw0KCX0sDQoJDQoJS2FwaXRhbGlzYXNpa2FuOiBmdW5jdGlvbihJZFRlcmltYSwgSWRUZXJpbWFfZGV0KXsNCgkJCSQuYWpheCh7DQoJCQkJdHlwZTonUE9TVCcsIA0KCQkJCWRhdGE6JCgnIycrdGhpcy5mb3JtTmFtZSkuc2VyaWFsaXplKCksDQoJCQkJdXJsOiB0aGlzLnVybCsnJnRpcGU9UGVuZ2VjZWthbkthcGl0YWxpc2FzaSZJZFRlcmltYW55YT0nK0lkVGVyaW1hLA0KCQkJICAJc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewkJDQoJCQkJCXZhciByZXNwID0gZXZhbCgnKCcgKyBkYXRhICsgJyknKTsNCgkJCQkJaWYocmVzcC5lcnI9PScnKXsNCgkJCQkJCXBlbWFzdWthbi5NdWxhaUthcGl0YWxpc2FzaShJZFRlcmltYSwgSWRUZXJpbWFfZGV0KTsJCQkJCQkNCgkJCQkJfWVsc2V7DQoJCQkJCQlhbGVydChyZXNwLmVycik7DQoJCQkJCX0NCgkJCSAgCX0NCgkJCX0pOw0KCQkJDQoJfSwNCgkNCglNdWxhaUthcGl0YWxpc2FzaTogZnVuY3Rpb24oSWRUZXJpbWEsIElkVGVyaW1hX2RldCl7DQoJCXZhciBhRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZW1hc3VrYW5Gb3JtJyk7CQkNCgkJYUZvcm0uYWN0aW9uPSB0aGlzLnVybCsnX2thcGl0YWxpc2FzaSZpZFRlcmltYV9ueWE9JytJZFRlcmltYSsnJmlkVGVyaW1hX2RldF9ueWE9JytJZFRlcmltYV9kZXQ7DQoJCWFGb3JtLnRhcmdldD0nX2JsYW5rJzsNCgkJYUZvcm0uc3VibWl0KCk7CQ0KCQlhRm9ybS50YXJnZXQ9Jyc7DQoJfSwNCgkNCglBdHJpYnVzaUJhcnU6IGZ1bmN0aW9uKCl7DQoJCXZhciBtZSA9IHRoaXM7DQoJCWVycm1zZyA9IHRoaXMuQ2VrQ2hlY2tib3goKTsNCgkJaWYoZXJybXNnID09J0RhdGEgYmVsdW0gZGlwaWxpaCEnKXsNCgkJCXZhciBjb3ZlcjEgPSB0aGlzLnByZWZpeCsnX2Zvcm1BdHJjb3Zlcic7DQoJCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdoaWRkZW4nOw0KCQkJYWRkQ292ZXJQYWdlMihjb3ZlcjEsMSx0cnVlLGZhbHNlKTsNCgkJCSQuYWpheCh7DQoJCQkJdHlwZTonUE9TVCcsIA0KCQkJCWRhdGE6JCgnIycrdGhpcy5mb3JtTmFtZSkuc2VyaWFsaXplKCksDQoJCQkJdXJsOiB0aGlzLnVybCsnJnRpcGU9QXRyaWJ1c2lCYXJ1JywNCgkJCSAgCXN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsJCQ0KCQkJCQl2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7DQoJCQkJCWRlbEVsZW0oY292ZXIxKTsNCgkJCQkJZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdz0nYXV0byc7DQoJCQkJCWlmKHJlc3AuZXJyPT0nJyl7DQoJCQkJCQl2YXIgYUZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtZS5mb3JtTmFtZSk7CQkNCgkJCQkJCWFGb3JtLmFjdGlvbj0gbWUudXJsKydfYXRyaWJ1c2kmWU49MSc7Ly8nP09wPScrb3ArJyZQZz0yJmlkcHJzPWNldGFrX2hhbCc7CQkNCgkJCQkJCWFGb3JtLnRhcmdldD0nX2JsYW5rJzsNCgkJCQkJCWFGb3JtLnN1Ym1pdCgpOwkNCgkJCQkJCWFGb3JtLnRhcmdldD0nJzsNCgkJCQkJfWVsc2V7DQoJCQkJCQlhbGVydChyZXNwLmVycik7DQoJCQkJCX0NCgkJCSAgCX0NCgkJCX0pOw0KCQl9ZWxzZSBpZihlcnJtc2cgPT0gIlBpbGloIEhhbnlhIFNhdHUgRGF0YSEiKXsNCgkJCWFsZXJ0KGVycm1zZyk7DQoJCX1lbHNlew0KCQkJdmFyIGNvdmVyMSA9IHRoaXMucHJlZml4KydfZm9ybUF0cmNvdmVyMic7DQoJCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdoaWRkZW4nOw0KCQkJYWRkQ292ZXJQYWdlMihjb3ZlcjEsMSx0cnVlLGZhbHNlKTsNCgkJCSQuYWpheCh7DQoJCQkJdHlwZTonUE9TVCcsIA0KCQkJCWRhdGE6JCgnIycrdGhpcy5mb3JtTmFtZSkuc2VyaWFsaXplKCksDQoJCQkJdXJsOiB0aGlzLnVybCsnJnRpcGU9UGVuZ2VjZWthblViYWgmYXRyaWI9WScsDQoJCQkgIAlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOw0KCQkJCQlkZWxFbGVtKGNvdmVyMSk7DQoJCQkJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2F1dG8nOw0KCQkJCQlpZihyZXNwLmVycj09Jycpew0KCQkJCQkJdmFyIGFGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGVtYXN1a2FuLmZvcm1OYW1lKTsJCQ0KCQkJCQkJYUZvcm0uYWN0aW9uPSBwZW1hc3VrYW4udXJsKydfYXRyaWJ1c2kmWU49Mic7Ly8nP09wPScrb3ArJyZQZz0yJmlkcHJzPWNldGFrX2hhbCc7CQkNCgkJCQkJCWFGb3JtLnRhcmdldD0nX2JsYW5rJzsNCgkJCQkJCWFGb3JtLnN1Ym1pdCgpOwkNCgkJCQkJCWFGb3JtLnRhcmdldD0nJzsNCgkJCQkJfWVsc2V7DQoJCQkJCQlhbGVydChyZXNwLmVycik7DQoJCQkJCX0NCgkJCSAgCX0NCgkJCX0pOw0KCQkJDQoJCX0JDQoJfSwNCgkNCglQb3N0aW5nOmZ1bmN0aW9uKCl7DQoJCXZhciBtZSA9IHRoaXM7DQoJCWVycm1zZyA9IHRoaXMuQ2VrQ2hlY2tib3goKTsNCgkJaWYoZXJybXNnID09JycpeyANCgkJCXZhciBib3ggPSB0aGlzLkdldENieENoZWNrZWQoKTsNCgkJCQ0KCQkJLy90aGlzLlNob3cgKCdmb3JtZWRpdCcse2lkcGxoOmJveC52YWx1ZX0sIGZhbHNlLCB0cnVlKTsJCQkNCgkJCXZhciBjb3ZlciA9IHRoaXMucHJlZml4KydfZm9ybWNvdmVyJzsNCgkJCWFkZENvdmVyUGFnZTIoY292ZXIsMSx0cnVlLGZhbHNlKTsJDQoJCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdoaWRkZW4nOw0KCQkJJC5hamF4KHsNCgkJCQl0eXBlOidQT1NUJywgDQoJCQkJZGF0YTokKCcjJyt0aGlzLmZvcm1OYW1lKS5zZXJpYWxpemUoKSwNCgkJCQl1cmw6IHRoaXMudXJsKycmdGlwZT1mb3JtUG9zdGluZycsDQoJCQkgIAlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOwkNCgkJCQkJaWYgKHJlc3AuZXJyID09JycpewkJDQoJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb3ZlcikuaW5uZXJIVE1MID0gcmVzcC5jb250ZW50Ow0KCQkJCQkJDQoJCQkJCX1lbHNlew0KCQkJCQkJYWxlcnQocmVzcC5lcnIpOw0KCQkJCQkJZGVsRWxlbShjb3Zlcik7DQoJCQkJCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdhdXRvJzsNCgkJCQkJfQ0KCQkJICAJfQ0KCQkJfSk7DQoJCX1lbHNlew0KCQkJYWxlcnQoZXJybXNnKTsNCgkJfQ0KCQkNCgl9LA0KCQ0KCWZ1bmN0aW9uX3BlcnNlbmFuOiBmdW5jdGlvbihwZXJzZW4pew0KCQlpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3RhdHVzdHh0IikpZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInN0YXR1c3R4dCIpLnN0eWxlLndpZHRoID0gcGVyc2VuKyIlIjsgDQoJCWlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzdGF0dXN0eHQiKSlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3RhdHVzdHh0IikuaW5uZXJIVE1MID0gcGVyc2VuKyIlIjsNCgl9LA0KCQ0KCVByb3Nlc1Bvc3RpbmdQZXJzZWRpYWFuX0FmdGVyOiBmdW5jdGlvbihrb250ZW4pew0KCQl2YXIgbWU9dGhpczsNCgkJbWUuZnVuY3Rpb25fcGVyc2VuYW4oa29udGVuLnBlcnNlbmFuKTsNCgkJaWYoa29udGVuLmxhbmp1dCA9PSAxKXsNCgkJCW1lLlByb3Nlc1Bvc3RpbmdQZXJzZWRpYWFuKGtvbnRlbi5tdWxhaSk7DQoJCX1lbHNlew0KCQkJbWUuUHJvc2VzUG9zdGluZ1BlcnNlZGlhYW5fU2VsZXNhaSgpOw0KCQl9DQoJfSwNCgkNCglQcm9zZXNQb3N0aW5nUGVyc2VkaWFhbl9TZWxlc2FpOiBmdW5jdGlvbigpew0KCQl2YXIgbWU9IHRoaXM7CQ0KCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdoaWRkZW4nOw0KCQl2YXIgY292ZXIgPSB0aGlzLnByZWZpeCsnX2Zvcm1wc3RpbmcnOw0KCQlhZGRDb3ZlclBhZ2UyKGNvdmVyLDEsdHJ1ZSxmYWxzZSk7DQoJCSQuYWpheCh7DQoJCQl0eXBlOidQT1NUJywgDQoJCQlkYXRhOiQoJyMnK3RoaXMucHJlZml4KydfZm9ybScpLnNlcmlhbGl6ZSgpLA0KCQkJdXJsOiB0aGlzLnVybCsnJnRpcGU9UHJvc2VzUG9zdGluZ1BlcnNlZGlhYW5fU2VsZXNhaScsDQoJCSAgCXN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsJCQ0KCQkJCXZhciByZXNwID0gZXZhbCgnKCcgKyBkYXRhICsgJyknKTsJDQoJCQkJZGVsRWxlbShjb3Zlcik7CQ0KCQkJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2F1dG8nOwkNCgkJCQlpZihyZXNwLmVycj09Jycpew0KCQkJCQlhbGVydCgiRGF0YSBCZXJoYXNpbCBEaSBQb3N0aW5nICEiKTsNCgkJCQkJbWUuQ2xvc2UoKTsNCgkJCQkJbWUucmVmcmVzaExpc3QodHJ1ZSk7DQoJCQkJfWVsc2V7DQoJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQl9DQoJCSAgCX0NCgkJfSk7DQoJfSwNCgkNCglQcm9zZXNQb3N0aW5nUGVyc2VkaWFhbjogZnVuY3Rpb24obXVsYWkpew0KCQl2YXIgbWU9IHRoaXM7CQ0KCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdoaWRkZW4nOw0KCQl2YXIgY292ZXIgPSB0aGlzLnByZWZpeCsnX2Zvcm1wc3RpbmcnOw0KCQlhZGRDb3ZlclBhZ2UyKGNvdmVyLDEsdHJ1ZSxmYWxzZSk7DQoJCSQuYWpheCh7DQoJCQl0eXBlOidQT1NUJywgDQoJCQlkYXRhOiQoJyMnK3RoaXMucHJlZml4KydfZm9ybScpLnNlcmlhbGl6ZSgpLA0KCQkJdXJsOiB0aGlzLnVybCsnJnRpcGU9UHJvc2VzUG9zdGluZ1BlcnNlZGlhYW4mbXVsYWk9JyttdWxhaSwNCgkJICAJc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewkJDQoJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOwkNCgkJCQlkZWxFbGVtKGNvdmVyKTsJCQ0KCQkJCWlmKHJlc3AuZXJyPT0nJyl7DQoJCQkJCW1lLlByb3Nlc1Bvc3RpbmdQZXJzZWRpYWFuX0FmdGVyKHJlc3AuY29udGVudCk7DQoJCQkJfWVsc2V7DQoJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQl9DQoJCSAgCX0NCgkJfSk7DQoJfSwNCgkNCglIYXB1c1Bvc3RpbmdQZXJzZWRpYWFuX1NlbGVzYWk6IGZ1bmN0aW9uKCl7DQoJCXZhciBtZT0gdGhpczsJDQoJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2hpZGRlbic7DQoJCXZhciBjb3ZlciA9IHRoaXMucHJlZml4KydfZm9ybWRlbCc7DQoJCWFkZENvdmVyUGFnZTIoY292ZXIsMSx0cnVlLGZhbHNlKTsNCgkJJC5hamF4KHsNCgkJCXR5cGU6J1BPU1QnLCANCgkJCWRhdGE6JCgnIycrdGhpcy5wcmVmaXgrJ19mb3JtJykuc2VyaWFsaXplKCksDQoJCQl1cmw6IHRoaXMudXJsKycmdGlwZT1IYXB1c1Bvc3RpbmdQZXJzZWRpYWFuX1NlbGVzYWknLA0KCQkgIAlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQl2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7CQ0KCQkJCWlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvdmVyKSlkZWxFbGVtKGNvdmVyKTsJCQ0KCQkJCWlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwZW1hc3VrYW5fZm9ybWNvdmVyX2xvYWQiKSlkZWxFbGVtKCJwZW1hc3VrYW5fZm9ybWNvdmVyX2xvYWQiKTsJCQ0KCQkJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2F1dG8nOw0KCQkJCWlmKHJlc3AuZXJyPT0nJyl7DQoJCQkJCWFsZXJ0KCJCZXJoYXNpbCBNZW1iYXRhbGthbiBQb3N0aW5nICEiKTsNCgkJCQkJbWUuQ2xvc2UoKTsNCgkJCQkJbWUucmVmcmVzaExpc3QodHJ1ZSk7DQoJCQkJfWVsc2V7DQoJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQl9DQoJCSAgCX0NCgkJfSk7CQ0KCX0sDQoJDQoJSGFwdXNQb3N0aW5nUGVyc2VkaWFhbl9BZnRlcjogZnVuY3Rpb24oa29udGVuKXsNCgkJdmFyIG1lPXRoaXM7DQoJCW1lLmZ1bmN0aW9uX3BlcnNlbmFuKGtvbnRlbi5wZXJzZW5hbik7DQoJCWlmKGtvbnRlbi5sYW5qdXQgPT0gMSl7DQoJCQltZS5IYXB1c1Bvc3RpbmdQZXJzZWRpYWFuKDEwMCk7DQoJCX1lbHNlew0KCQkJbWUuSGFwdXNQb3N0aW5nUGVyc2VkaWFhbl9TZWxlc2FpKCk7DQoJCX0JCQ0KCX0sDQoJDQoJSGFwdXNQb3N0aW5nUGVyc2VkaWFhbjogZnVuY3Rpb24oTGltaXQpew0KCQl2YXIgbWU9IHRoaXM7CQ0KCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdoaWRkZW4nOw0KCQl2YXIgY292ZXIgPSB0aGlzLnByZWZpeCsnX2Zvcm1wb3N0aW5nJzsNCgkJYWRkQ292ZXJQYWdlMihjb3ZlciwxLHRydWUsZmFsc2UpOw0KCQkkLmFqYXgoew0KCQkJdHlwZTonUE9TVCcsIA0KCQkJZGF0YTokKCcjJyt0aGlzLnByZWZpeCsnX2Zvcm0nKS5zZXJpYWxpemUoKSwNCgkJCXVybDogdGhpcy51cmwrJyZ0aXBlPUhhcHVzUG9zdGluZ1BlcnNlZGlhYW4mTGltaXQ9JytMaW1pdCwNCgkJICAJc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewkJDQoJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOwkNCgkJCQlkZWxFbGVtKGNvdmVyKTsJDQoJCQkJaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBlbWFzdWthbl9mb3JtY292ZXJfbG9hZCIpKWRlbEVsZW0oInBlbWFzdWthbl9mb3JtY292ZXJfbG9hZCIpOwkNCgkJCQlpZihyZXNwLmVycj09Jycpew0KCQkJCQltZS5IYXB1c1Bvc3RpbmdQZXJzZWRpYWFuX0FmdGVyKHJlc3AuY29udGVudCk7DQoJCQkJfWVsc2V7DQoJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQl9DQoJCSAgCX0sDQoJCQllcnJvcjogZnVuY3Rpb24gKHhociwgYWpheE9wdGlvbnMsIHRocm93bkVycm9yKSB7DQoJCQkJbWUuSGFwdXNQb3N0aW5nUGVyc2VkaWFhbihMaW1pdCk7DQoJICAgIAl9CQkJDQoJCX0pOwkNCgl9LA0KCQ0KCVNpbXBhblBvc3Rpbmc6IGZ1bmN0aW9uKCl7DQoJCXZhciBtZT0gdGhpczsJDQoJCQ0KCQl0b3Rfam1sYmFyYW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvdF9qbWxiYXJhbmcnKS52YWx1ZTsNCgkJdmFyIGNvdmVyMSA9IHRoaXMucHJlZml4KydfZm9ybU11bGFpcG9zdGluZzEnOw0KCQlhZGRDb3ZlclBhZ2UyKGNvdmVyMSwxLHRydWUsZmFsc2UpOw0KCQkJCQ0KCQkkLmFqYXgoew0KCQkJdHlwZTonUE9TVCcsIA0KCQkJZGF0YTokKCcjJyt0aGlzLnByZWZpeCsiX2Zvcm0iKS5zZXJpYWxpemUoKSwNCgkJCXVybDogdGhpcy51cmwrJyZ0aXBlPVBlbmdlY2VrYW5Qb3N0aW5nJywNCgkJICAJc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewkJDQoJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOw0KCQkJCWRlbEVsZW0oY292ZXIxKTsNCgkJCQlpZihyZXNwLmVycj09Jycpew0KCQkJCQlpZihyZXNwLmNvbnRlbnQua29uZmlybWFzaSl7DQoJCQkJCQlpZihyZXNwLmNvbnRlbnQuTm9Qb3N0aW5nKXsNCgkJCQkJCQlhbGVydChyZXNwLmNvbnRlbnQua29uZmlybWFzaSk7DQoJCQkJCQl9ZWxzZXsNCgkJCQkJCQlrb25mID0gY29uZmlybShyZXNwLmNvbnRlbnQua29uZmlybWFzaSk7DQoJCQkJCQkJaWYoa29uZiA9PSB0cnVlKXsNCgkJCQkJCQkJaWYoIXJlc3AuY29udGVudC5lcnIpew0KCQkJCQkJCQkJdmFyIGNvdmVyID0gJ3BlbWFzdWthbl9mb3JtY292ZXJfbG9hZCc7DQoJCQkJCQkJCQlhZGRDb3ZlclBhZ2UyKGNvdmVyLDEsdHJ1ZSxmYWxzZSk7CQ0KCQkJCQkJCQkJZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdz0naGlkZGVuJzsNCgkJCQkJCQkJCXN3aXRjaChyZXNwLmNvbnRlbnQuam5zX3RyYW5zKXsNCgkJCQkJCQkJCQljYXNlICIxIjoNCgkJCQkJCQkJCQkJbWUuU3RhdHVzUG9zdGluZyA9IDE7DQoJCQkJCQkJCQkJCWlmKHJlc3AuY29udGVudC5rb25maXJtYXNpID09ICJCYXRhbGthbiBQb3N0aW5nIERhdGEgPyIpew0KCQkJCQkJCQkJCQkJZGVsRWxlbShjb3Zlcik7DQoJCQkJCQkJCQkJCQltZS5CVExfUE9TVElORz0wOw0KCQkJCQkJCQkJCQkJc3RvcHdhdGNoLm5hbWUgPSAiVHVrVGltZXIiOw0KCQkJCQkJCQkJCQkJc3RvcHdhdGNoLk11bGFpKCk7DQoJCQkJCQkJCQkJCQltZS5IYXB1c1Bvc3RpbmdfUGVuZ2FkYWFuKCk7DQoJCQkJCQkJCQkJCX1lbHNlew0KCQkJCQkJCQkJCQkJaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lkYmFyYW5nbnlhXzAnKSl7DQoJCQkJCQkJCQkJCQkJaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImptbF9icmdfbmV4dFBPU1QiKSltZS5qbWxTZXRQT1NUID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImptbF9icmdfbmV4dFBPU1QiKS52YWx1ZSk7CQkJCQkJDQoJCQkJCQkJCQkJCQkJbWUuSk1MX1BPU1RJTkc9MDsNCgkJCQkJCQkJCQkJCQltZS5BZGFZYW5nVGFueWE9MDsNCgkJCQkJCQkJCQkJCQlKYWx1clBvc3QgPSBtZS5TZXRfUG9zdFRyYWNrKCk7DQoJCQkJCQkJCQkJCQkJc3RvcHdhdGNoLm5hbWUgPSAiVHVrVGltZXIiOw0KCQkJCQkJCQkJCQkJCXN0b3B3YXRjaC5NdWxhaSgpOw0KCQkJCQkJCQkJCQkJCWlmKEphbHVyUG9zdCA+IDEgJiYgSmFsdXJQb3N0IDwgNSl7DQoJCQkJCQkJCQkJCQkJCWZvcihpPTE7aTw9SmFsdXJQb3N0O2krKyl7DQoJCQkJCQkJCQkJCQkJCQltZS5Qcm9zZXNQb3N0aW5nX1BlbmdhZGFhbigwLGkpOw0KCQkJCQkJCQkJCQkJCQl9DQoJCQkJCQkJCQkJCQkJfWVsc2V7DQoJCQkJCQkJCQkJCQkJCW1lLlByb3Nlc1Bvc3RpbmdfUGVuZ2FkYWFuKDAsMSk7DQoJCQkJCQkJCQkJCQkJfQkNCgkJCQkJCQkJCQkJCQkNCgkJCQkJCQkJCQkJCX0NCgkJCQkJCQkJCQkJfQ0KCQkJCQkJCQkJCWJyZWFrOw0KCQkJCQkJCQkJCWNhc2UgIjIiOg0KCQkJCQkJCQkJCQlpZihyZXNwLmNvbnRlbnQua29uZmlybWFzaSA9PSAiQmF0YWxrYW4gUG9zdGluZyBEYXRhID8iKXsNCgkJCQkJCQkJCQkJCW1lLkhhcHVzUG9zdGluZ19QZW1lbGloYXJhYW4oKTsNCgkJCQkJCQkJCQkJfWVsc2V7DQoJCQkJCQkJCQkJCQlpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWRLUFRMU18wJykpbWUuUHJvc2VzUG9zdGluZ1BlbWVsaWhhcmFhbigwLCAwLCAwKTsNCgkJCQkJCQkJCQkJfQ0KCQkJCQkJCQkJCWJyZWFrOw0KCQkJCQkJCQkJCWNhc2UgIjMiOg0KCQkJCQkJCQkJCQlpZihyZXNwLmNvbnRlbnQua29uZmlybWFzaSA9PSAiQmF0YWxrYW4gUG9zdGluZyBEYXRhID8iKXsNCgkJCQkJCQkJCQkJCW1lLkhhcHVzUG9zdGluZ1BlcnNlZGlhYW4oMTAwKTsNCgkJCQkJCQkJCQkJfWVsc2V7DQoJCQkJCQkJCQkJCQlkZWxFbGVtKGNvdmVyKTsNCgkJCQkJCQkJCQkJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2F1dG8nOw0KCQkJCQkJCQkJCQkJaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lkX0RldGFpbF8wJykpbWUuUHJvc2VzUG9zdGluZ1BlcnNlZGlhYW4oMCk7DQoJCQkJCQkJCQkJCX0NCgkJCQkJCQkJCQlicmVhazsNCgkJCQkJCQkJCX0NCgkJCQkJCQkJfWVsc2V7DQoJCQkJCQkJCQlhbGVydChyZXNwLmNvbnRlbnQuZXJyKTsNCgkJCQkJCQkJfQ0KCQkJCQkJCX0NCgkJCQkJCX0NCgkJCQkJCQkNCgkJCQkJfQ0KCQkJCQkJCQ0KCQkJCX1lbHNlew0KCQkJCQlhbGVydChyZXNwLmVycik7DQoJCQkJfQ0KCQkgIAl9DQoJCQl9KTsJCQ0KCQkNCgkJDQoJfSwNCgkNCglrZW1hanVhbnBlcnNlbjogZnVuY3Rpb24ocGVyc2VuYW4sbWF4cGVyc2VuLHBlcnNlblNlYmVsdW09MCkgew0KCQkgdmFyIGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicHJvZ3Jlc3Nib3giKTsNCgkJIHZhciBtZSA9IHRoaXM7DQoJCSB2YXIgdG90X2ptbGJhcmFuZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3Rfam1sYmFyYW5nJykudmFsdWU7DQoJCSB0bWJobiA9IDEvdG90X2ptbGJhcmFuZyAqIDEwMDsNCgkJIAkJIA0KCQkgaWYoTWF0aC5yb3VuZChwZXJzZW5hbit0bWJobikgPCBtYXhwZXJzZW4gJiYgTWF0aC5yb3VuZChwZXJzZW5hbik8PTEwMCl7DQoJCQlwZXJzZW5hbiA9IE1hdGgucm91bmQocGVyc2VuYW4pOw0KCQkJCQkJDQoJCQlpZihwZXJzZW5TZWJlbHVtICE9IHBlcnNlbmFuKXsNCgkJCQkvL2FsZXJ0KHBlcnNlblNlYmVsdW0rIiA9PSAiK3BlcnNlbmFuKyIgPSAiK21heHBlcnNlbik7DQoJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInN0YXR1c3R4dCIpLnN0eWxlLndpZHRoID0gcGVyc2VuYW4rIiUiOyANCgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3RhdHVzdHh0IikuaW5uZXJIVE1MID0gcGVyc2VuYW4rIiUiOw0KCQkJCQ0KCQkJCXBlcnNlblNlYmVsdW0gPSBwZXJzZW5hbjsNCgkJCQlwZXJzZW5hbiA9IHBlcnNlbmFuICsgTWF0aC5yb3VuZCh0bWJobik7DQoJCQkJCQkJDQoJCQkJLy9hbGVydChwZXJzZW5TZWJlbHVtKyIgPSAiK3BlcnNlbmFuKTsJDQoJCQkJc2V0VGltZW91dChmdW5jdGlvbiBteUZ1bmN0aW9uUGVyc2VuKCkge21lLmtlbWFqdWFucGVyc2VuKHBlcnNlbmFuLG1heHBlcnNlbixwZXJzZW5TZWJlbHVtKX0sMSk7DQoJCQl9DQoJCSB9ZWxzZXsNCgkJCWlmKG1heHBlcnNlbiA+PSAxMDApew0KCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzdGF0dXN0eHQiKS5zdHlsZS53aWR0aCA9IDEwMCsiJSI7IA0KCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzdGF0dXN0eHQiKS5pbm5lckhUTUwgPSAxMDArIiUiOw0KCQkJfWVsc2V7DQoJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInN0YXR1c3R4dCIpLnN0eWxlLndpZHRoID0gTWF0aC5yb3VuZChtYXhwZXJzZW4pKyIlIjsgDQoJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInN0YXR1c3R4dCIpLmlubmVySFRNTCA9IE1hdGgucm91bmQobWF4cGVyc2VuKSsiJSI7DQoJCQl9CQ0KCQkgfQkNCgkJDQoJfSwNCgkNCglIYXB1c1Bvc3RpbmdfUGVuZ2FkYWFuX0FmdGVyOiBmdW5jdGlvbihyZXNwKXsNCgkJdmFyIG1lPXRoaXM7DQoJCSQoIiNrZXRfdG90X2ptbF9wb3N0IikuaHRtbChyZXNwLmNvbnRlbnQuSnVtbGFoQmFyYW5nKTsNCgkJbWUuZnVuY3Rpb25fcGVyc2VuYW4ocmVzcC5jb250ZW50LnBlcnNlbik7DQoJCW1lLkdldFRpbWVQb3N0aW5nKDEsMik7DQoJCW1lLlNldF9EZXRhaWxEYXRhUG9zdGluZygyKTsNCgkJaWYocmVzcC5jb250ZW50LlByb3NlcyA9PSAiTkVYVCIpew0KCQkJaWYocmVzcC5jb250ZW50LkptbFByb3Nlcyl7DQoJCQkJbWUuQlRMX1BPU1RJTkcgKz0gcGFyc2VJbnQocmVzcC5jb250ZW50LkptbFByb3Nlcyk7DQoJCQkJRGF0YVBlbmdhdHVyYW4uU2V0X2Nla0RjSURfdmFsKCJTdWRhaFBvc3RpbmdfRGF0YSIsIHJlc3AuY29udGVudC5KdW1sYWhCYXJhbmcpOw0KCQkJCWlmKHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJqbWxfYnJnX25leHRQT1NUIikudmFsdWUpID4gbWUuQlRMX1BPU1RJTkcpew0KCQkJCQltZS5IYXB1c1Bvc3RpbmdfUGVuZ2FkYWFuKCk7DQoJCQkJfWVsc2V7DQoJCQkJCWFsZXJ0KCJEYXRhIFNlbGVzYWkgRGkgQmF0YWwgUG9zdGluZyAhIik7DQoJCQkJCW1lLkNsb3NlKCk7DQoJCQkJCW1lLlBvc3RpbmcoKTsNCgkJCQkJc3RvcHdhdGNoLlN0b3AoKTsNCgkJCQkJY2xlYXJUaW1lb3V0KG1lLkJhbmRpbmdXYWt0dSk7CQkJCQkNCgkJCQl9CQkJCQkJCQ0KCQkJfWVsc2V7DQoJCQkJbWUuSGFwdXNQb3N0aW5nX1BlbmdhZGFhbigpOw0KCQkJfQkJCQ0KCQkJCQ0KCQl9ZWxzZXsJCQkJCQkJDQoJCQlhbGVydCgiQmVyaGFzaWwgTWVtYmF0YWxrYW4gUG9zdGluZyAhIik7DQoJCQltZS5DbG9zZSgpOw0KCQkJbWUucmVmcmVzaExpc3QoKTsNCgkJCXN0b3B3YXRjaC5TdG9wKCk7DQoJCX0NCgl9LA0KCQ0KCUhhcHVzUG9zdGluZ19QZW5nYWRhYW46IGZ1bmN0aW9uKCl7CQ0KCQl2YXIgbWU9dGhpczsJCQ0KCQlpZihtZS5TdGF0dXNQb3N0aW5nID09IDEpew0KCQkJbWUuU2V0QWpheFRpbWUoMSk7DQoJCQltZS5NdWxhaVBvc3RpbmdfUGVuZ2FkYWFuKCk7DQoJCQltZS5Mb2FkaW5nUG9zdGluZygiIik7DQoJCQkkLmFqYXgoew0KCQkJCXR5cGU6J1BPU1QnLCANCgkJCQlkYXRhOiQoJyMnK3RoaXMucHJlZml4KyJfZm9ybSIpLnNlcmlhbGl6ZSgpLA0KCQkJCXVybDogdGhpcy51cmwrJyZ0aXBlPUhhcHVzUG9zdGluZyZCVExfSEFQVVNDRUs9JyttZS5CVExfUE9TVElORywNCgkJCQlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOw0KCQkJCQlpZihyZXNwLmVycj09Jycpew0KCQkJCQkJbWUuSGFwdXNQb3N0aW5nX1BlbmdhZGFhbl9BZnRlcihyZXNwKTsJCQkJCQ0KCQkJCQl9ZWxzZXsNCgkJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQkJCXN0b3B3YXRjaC5TdG9wKCk7DQoJCQkJCQltZS5DbG9zZSgpOw0KCQkJCQkJbWUuUG9zdGluZygpOw0KCQkJCQl9DQoJCQkJfSwNCgkJCQllcnJvcjogZnVuY3Rpb24gKHhociwgYWpheE9wdGlvbnMsIHRocm93bkVycm9yKSB7DQoJCQkJCW1lLkhhcHVzUG9zdGluZ19QZW5nYWRhYW4oKTsNCgkJICAgIAl9DQoJCQl9KTsJDQoJCX1lbHNlew0KCQkJbWUuTG9hZGluZ1Bvc3RpbmdfRW5kKCk7DQoJCX0NCgl9LA0KCQ0KCUhhcHVzUG9zdGluZ19QZW1lbGloYXJhYW46IGZ1bmN0aW9uKCl7CQ0KCQl2YXIgbWU9dGhpczsJDQoJCXZhciBjb3ZlciA9ICdwZW1hc3VrYW5fZm9ybWNvdmVyX2xvYWQnOwkNCgkJJC5hamF4KHsNCgkJCXR5cGU6J1BPU1QnLCANCgkJCWRhdGE6JCgnIycrdGhpcy5wcmVmaXgrIl9mb3JtIikuc2VyaWFsaXplKCksDQoJCQl1cmw6IHRoaXMudXJsKycmdGlwZT1IYXB1c1Bvc3RpbmcnLA0KCQkJc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewkJDQoJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOw0KCQkJCWlmKHJlc3AuZXJyPT0nJyl7DQoJCQkJCSQoIiNrZXRfdG90X2ptbF9wb3N0IikuaHRtbChyZXNwLmNvbnRlbnQuSnVtbGFoQmFyYW5nKTsNCgkJCQkJbWUuZnVuY3Rpb25fcGVyc2VuYW4ocmVzcC5jb250ZW50LnBlcnNlbik7DQoJCQkJCWlmKHJlc3AuY29udGVudC5Qcm9zZXMgPT0gIk5FWFQiKXsNCgkJCQkJCW1lLkhhcHVzUG9zdGluZ19QZW1lbGloYXJhYW4odG90X3BlcnNlbik7Ow0KCQkJCQl9ZWxzZXsNCgkJCQkJCWFsZXJ0KCJCZXJoYXNpbCBNZW1iYXRhbGthbiBQb3N0aW5nICEiKTsNCgkJCQkJCW1lLkNsb3NlKCk7DQoJCQkJCQltZS5yZWZyZXNoTGlzdCgpOw0KCQkJCQkJZGVsRWxlbShjb3Zlcik7DQoJCQkJCX0JCQkJCQkNCgkJCQl9ZWxzZXsNCgkJCQkJZGVsRWxlbShjb3Zlcik7DQoJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQl9DQoJCQl9LA0KCQkJZXJyb3I6IGZ1bmN0aW9uICh4aHIsIGFqYXhPcHRpb25zLCB0aHJvd25FcnJvcikgew0KCQkJCW1lLkhhcHVzUG9zdGluZ19QZW1lbGloYXJhYW4oKTsNCgkgICAgCX0NCgkJfSk7CQ0KCX0sDQoJDQoJU2V0X0RldGFpbERhdGFQb3N0aW5nOiBmdW5jdGlvbihKbnM9MSl7DQoJCXZhciBtZT10aGlzOw0KCQl2YXIgU3VkYWhQb3N0aW5nID0gSm5zID09IDE\/bWUuSk1MX1BPU1RJTkc6bWUuQlRMX1BPU1RJTkc7DQoJCXZhciBqbWxfYnJnX25leHRQT1NUID0gMTsNCgkJaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImptbF9icmdfbmV4dFBPU1QiKSlqbWxfYnJnX25leHRQT1NUID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImptbF9icmdfbmV4dFBPU1QiKS52YWx1ZTsNCgkJDQoJCXZhciBLZXQgPSBKbnMgPT0gMT8iUE9TVElORyI6IkJBVEFMIFBPU1RJTkciOw0KCQkNCgkJRGF0YVBlbmdhdHVyYW4uU2V0X2Nla0RjSURfSU5ORVIoIktldF9FbGFwc2VkIiwgIjxocj5QUk9TRVMgIitLZXQrIiA6ICIrU3VkYWhQb3N0aW5nKyIvIitqbWxfYnJnX25leHRQT1NUKTsNCgl9LA0KCQ0KCVByb3Nlc1Bvc3RpbmdfUGVuZ2FkYWFuX0FmdGVyOiBmdW5jdGlvbih1cnV0YW4sIGtvbnRlbiwgSmFsdXIpew0KCQl2YXIgbWU9dGhpczsNCgkJam1sU2V0UE9TVCA9IG1lLmptbFNldFBPU1Q7DQoJCW1lLkpNTF9QT1NUSU5HID0gTnVtYmVyKG1lLkpNTF9QT1NUSU5HKSArIE51bWJlcihrb250ZW4uam1sX3Byb3Nlcyk7CQ0KCQkNCgkJaWYoa29udGVuLkxhbmdzdW5nID09ICIxIil1cnV0YW4rPTE7CQkNCgkJbWUuZnVuY3Rpb25fcGVyc2VuYW4oa29udGVuLnBlcnNlbik7DQoJCSQoIiNrZXRfdG90X2ptbF9wb3N0IikuaHRtbChrb250ZW4uam1sX2JhcmFuZyk7DQoJCQ0KCQltZS5HZXRUaW1lUG9zdGluZyhKYWx1cik7CQ0KCQltZS5TZXRfRGV0YWlsRGF0YVBvc3RpbmcoKTsJCQ0KCQkJCQ0KCQlpZihrb250ZW4uc2VsZXNhaSA9PSAxKXsNCgkJCXN0b3B3YXRjaC5TdG9wKCk7DQoJCQljbGVhclRpbWVvdXQobWUuQmFuZGluZ1dha3R1KTsJDQoJCQlpZihtZS5DZWtfUE9TVF9UcmFjaygpID09IDApbWUuVXBkYXRlUG9zdGluZ0Jlcmhhc2lsKCk7CQkJDQoJCX1lbHNlewkJDQoJCQlpZihtZS5KTUxfUE9TVElORyA+PSBqbWxTZXRQT1NUKXsNCgkJCQlpZihtZS5DZWtfUE9TVF9UcmFjaygpID09IDAgJiYgbWUuQWRhWWFuZ1RhbnlhID09IDApew0KCQkJCQltZS5BZGFZYW5nVGFueWEgPSAxOw0KCQkJCQkvKnZhciB0YW55YSA9IGNvbmZpcm0oIkRhdGEgU3Vrc2VzIERpIFBvc3RpbmcgISBNYXUgZGkgTGFuanV0a2FuID8iKTsNCgkJCQkJaWYodGFueWEpew0KCQkJCQkJbWUuSk1MX1BPU1RJTkc9MDsNCgkJCQkJCW1lLlN0YXR1c1Bvc3RpbmcgPSAxOw0KCQkJCQkJbWUuQWRhWWFuZ1RhbnlhID0gMA0KCQkJCQkJbWUuUHJvc2VzUG9zdGluZ19QZW5nYWRhYW4oMCwgSmFsdXIpOw0KCQkJCQl9ZWxzZXsNCgkJCQkJCW1lLlN0YXR1c1Bvc3RpbmcgPSAwOw0KCQkJCQkJbWUuTG9hZGluZ1Bvc3RpbmdfRW5kKCk7DQoJCQkJCX0qLw0KCQkJCQlpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGVtYXN1a2FuX2Zvcm1jb3Zlcl9sb2FkIikpZGVsRWxlbSgicGVtYXN1a2FuX2Zvcm1jb3Zlcl9sb2FkIik7DQoJCQkJCWFsZXJ0KCJEYXRhIFN1a3NlcyBEaSBQb3N0aW5nICEiKTsNCgkJCQkJc3RvcHdhdGNoLlN0b3AoKTsNCgkJCQkJY2xlYXJUaW1lb3V0KG1lLkJhbmRpbmdXYWt0dSk7CQ0KCQkJCQltZS5TdGF0dXNQb3N0aW5nID0gMDsNCgkJCQkJbWUuTG9hZGluZ1Bvc3RpbmdfRW5kKCk7DQoJCQkJfQkJCQkJCQkJCQ0KCQkJfWVsc2V7CQkJCQ0KCQkJCW1lLlByb3Nlc1Bvc3RpbmdfUGVuZ2FkYWFuKHVydXRhbiwgSmFsdXIpOw0KCQkJfQ0KCQl9CQkNCgkJDQoJCQ0KCX0sDQoJDQoJTG9hZGluZ1Bvc3Rpbmc6IGZ1bmN0aW9uKGtvbnRlbil7DQoJCXZhciBtZSA9IHRoaXM7DQoJCWlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJqbWxfYnJnX25leHRQT1NUIikpZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImptbF9icmdfbmV4dFBPU1QiKS5yZWFkT25seT10cnVlOw0KCQlpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicG9zdGluZyIpKWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwb3N0aW5nIikuZGlzYWJsZWQ9dHJ1ZTsNCgl9LAkJDQoJDQoJTXVsYWlQb3N0aW5nX1BlbmdhZGFhbjpmdW5jdGlvbigpewkNCgkJdmFyIG1lPXRoaXM7DQoJCWlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJCdG5fRm9yUG9zdGluZyIpKXsNCgkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJCdG5fRm9yUG9zdGluZyIpLmlubmVySFRNTD0iPHRhYmxlIHdpZHRoPScxMDAlJz48dHI+PHRkPjxpbWcgc3JjPSdpbWFnZXMvYWRtaW5pc3RyYXRvci9pbWFnZXMvbG9hZGVyLmdpZicgd2lkdGg9JzM1cHgnIC8+PC90ZD48dGQgd2lkdGg9JzEwJSc+PGlucHV0IHR5cGU9J2J1dHRvbicgbmFtZT0nQnRuX1N0b3BQb3N0aW5nJyB2YWx1ZT0nQkVSSEVOVEknIG9uY2xpY2s9J3BlbWFzdWthbi5CZXJoZW50aVBvc3RpbmdfUGVuZ2FkYWFuKCk7JyAvPjwvdGQ+PC90cj48L3RhYmxlPiI7DQoJCX0NCgl9LA0KCQ0KCUJlcmhlbnRpUG9zdGluZ19QZW5nYWRhYW46ZnVuY3Rpb24oKXsJDQoJCXZhciBtZT10aGlzOw0KCQltZS5TdGF0dXNQb3N0aW5nID0wOw0KCQlpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiQnRuX0ZvclBvc3RpbmciKSl7DQoJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiQnRuX0ZvclBvc3RpbmciKS5pbm5lckhUTUw9IjxpbWcgc3JjPSdpbWFnZXMvYWRtaW5pc3RyYXRvci9pbWFnZXMvbG9hZGVyZW5kLmdpZicgd2lkdGg9JzMwcHgnIC8+IjsNCgkJCWNsZWFyVGltZW91dChtZS5CYW5kaW5nV2FrdHUpOwkNCgkJCXN0b3B3YXRjaC5TdG9wKCk7DQoJCQkNCgkJfQ0KCX0sDQoJCQ0KCUxvYWRpbmdQb3N0aW5nX0VuZDogZnVuY3Rpb24oKXsNCgkJdmFyIG1lPXRoaXM7DQoJCWlmKG1lLkNla19QT1NUX1RyYWNrKCkgPT0gMCl7DQoJCQljbGVhclRpbWVvdXQobWUuQmFuZGluZ1dha3R1KTsNCgkJCWlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwZW1hc3VrYW5fZm9ybWNvdmVyIikpZGVsRWxlbSgicGVtYXN1a2FuX2Zvcm1jb3ZlciIpOw0KCQkJbWUuUG9zdGluZygpOw0KCQl9CQkNCgl9LA0KCQ0KCVNldEFqYXhUaW1lOmZ1bmN0aW9uKEphbHVyPTEpew0KCQl2YXIgbWU9dGhpczsNCgkJdmFyIFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsNCgkJaWYoSmFsdXIgPT0gMSltZS5BamF4VGltZV9UcmFjazE9VGltZTsNCgkJaWYoSmFsdXIgPT0gMiltZS5BamF4VGltZV9UcmFjazI9VGltZTsNCgkJaWYoSmFsdXIgPT0gMyltZS5BamF4VGltZV9UcmFjazM9VGltZTsNCgkJaWYoSmFsdXIgPT0gNCltZS5BamF4VGltZV9UcmFjazQ9VGltZTsNCgl9LA0KCQ0KCUdldEFqYXhUaW1lOmZ1bmN0aW9uKEphbHVyPTEpew0KCQl2YXIgbWU9dGhpczsNCgkJaWYoSmFsdXIgPT0gMSlBamF4VGltZSA9IG1lLkFqYXhUaW1lX1RyYWNrMTsNCgkJaWYoSmFsdXIgPT0gMilBamF4VGltZSA9IG1lLkFqYXhUaW1lX1RyYWNrMjsNCgkJaWYoSmFsdXIgPT0gMylBamF4VGltZSA9IG1lLkFqYXhUaW1lX1RyYWNrMzsNCgkJaWYoSmFsdXIgPT0gNClBamF4VGltZSA9IG1lLkFqYXhUaW1lX1RyYWNrNDsNCgkJDQoJCXJldHVybiBBamF4VGltZTsNCgl9LA0KCQ0KCVNldFdha3R1OmZ1bmN0aW9uKFdha3R1KXsNCgkJdmFyIG1lPXRoaXM7CQ0KCQlpZihXYWt0dSA+IDEwMDApew0KCQkJVGltZSA9IG1zVG9UaW1lKFdha3R1KTsNCgkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJFbGFwc2VkIikuaW5uZXJIVE1MID0gIkVTVElNQVNJIFdBS1RVIDogIitUaW1lOw0KCQkJLy8kKCIjRWxhcHNlZCIpLmh0bWwoIkVTVElNQVNJIFdBS1RVIDogIitUaW1lKTsNCgkJCVdha3R1ID0gV2FrdHUgLSAxMDAwOw0KCQkJbWUuQmFuZGluZ1dha3R1ID0gDQoJCQkJc2V0VGltZW91dCgNCgkJCQkJZnVuY3Rpb24gbXlGdW5jdGlvbigpIHsNCgkJCQkJCW1lLlNldFdha3R1KFdha3R1KTsNCgkJCQkJfSwxMDAwKTsNCgkJfWVsc2V7DQoJCQltZS5XYWt0dVRlcmFraGlyID0gMDsNCgkJCWNsZWFyVGltZW91dChtZS5CYW5kaW5nV2FrdHUpOw0KCQl9DQoJCQ0KCX0sDQoJDQoJR2V0VGltZVBvc3Rpbmc6IGZ1bmN0aW9uKEphbHVyPTEsIEpucz0xKXsNCgkJdmFyIG1lPXRoaXM7DQoJCQ0KCQlpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiam1sX2JyZ19uZXh0UE9TVCIpKXsNCgkJCVRvdGFsUG9zdCA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJqbWxfYnJnX25leHRQT1NUIikudmFsdWUpOw0KCQkJU3VkYWhQb3N0aW5nID0gSm5zID09IDE\/bWUuSk1MX1BPU1RJTkc6bWUuQlRMX1BPU1RJTkc7DQoJCQlQcmFraXJhYW4gPSBUb3RhbFBvc3QgLSBTdWRhaFBvc3Rpbmc7DQoJCQlpZihQcmFraXJhYW4gPCAxKVByYWtpcmFhbiA9IDA7DQoJCQlQaWxpaCA9ICBKbnMgPT0gMT8iTWF4RGF0YVBvc3RpbmciOiJNYXhEYXRhUG9zdGluZ19EZWwiOw0KCQkJUGVyUG9zdCA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFBpbGloKS52YWx1ZSk7DQoJCQlEYXRhUG9zdCA9IChQcmFraXJhYW4vUGVyUG9zdCk7DQoJCQlpZihKbnMgPT0gMSlEYXRhUG9zdCA9IERhdGFQb3N0L21lLlNldF9Qb3N0VHJhY2soKTsNCgkJCQ0KCQkJdmFyIHRvdGFsVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLW1lLkdldEFqYXhUaW1lKEphbHVyKTsNCgkJCVdha3R1ID0gdG90YWxUaW1lICogRGF0YVBvc3Q7Ly9XYWt0dSBQZXIgbXMJDQoJCQkNCgkJCUhpdHVuZyA9IEpucyA9PSAxP21lLkpNTF9QT1NUSU5HICsgUGVyUG9zdDptZS5CVExfUE9TVElORyArIFBlclBvc3Q7CQ0KCQkJDQoJCQlpZihTdWRhaFBvc3RpbmcgPT0gMCB8fCAoV2FrdHUgPiBtZS5XYWt0dVRlcmFraGlyICYmIEhpdHVuZyArIFBlclBvc3QgPD0gVG90YWxQb3N0KSl7DQoJCQkJbWUuV2FrdHVUZXJha2hpciA9IFdha3R1Ow0KCQkJCWNsZWFyVGltZW91dChtZS5CYW5kaW5nV2FrdHUpOw0KCQkJCW1lLlNldFdha3R1KFdha3R1KTsNCgkJCX1lbHNlewkJCQkNCgkJCQlpZihIaXR1bmcgKyBQZXJQb3N0ID49IFRvdGFsUG9zdCl7DQoJCQkJCWNsZWFyVGltZW91dChtZS5CYW5kaW5nV2FrdHUpOw0KCQkJCQltZS5TZXRXYWt0dShXYWt0dSk7CQ0KCQkJCX0NCgkJCX0JCQkJCQ0KCQl9DQoJCQ0KCX0sDQoJDQoJUHJvc2VzUG9zdGluZ19QZW5nYWRhYW46IGZ1bmN0aW9uKHVydXRhbiwgSmFsdXI9MSl7DQoJCXZhciBtZSA9IHRoaXM7CQkJDQoJCXZhciBjb3ZlciA9IHRoaXMucHJlZml4KydfZm9ybWNvdmVyX3Bvc3RpbmcnOw0KCQkNCgkJZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdz0naGlkZGVuJzsNCgkJDQoJCUlkRGV0ID0gJCgiI2lkYmFyYW5nbnlhXyIrdXJ1dGFuKS52YWwoKTsNCgkJU3RhdElkRGV0ID0gJCgiI3N0YXRfcG9zdF8iK0lkRGV0KS52YWwoKTsNCgkJDQoJCWlmKFN0YXRJZERldCA9PSAiMCIpew0KCQkJbWUuU2V0QWpheFRpbWUoSmFsdXIpOw0KCQkJaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBlbWFzdWthbl9mb3JtY292ZXJfbG9hZCIpKWRlbEVsZW0oInBlbWFzdWthbl9mb3JtY292ZXJfbG9hZCIpOw0KCQkJaWYobWUuU3RhdHVzUG9zdGluZyA9PSAxKXsNCgkJCQltZS5NdWxhaVBvc3RpbmdfUGVuZ2FkYWFuKCk7DQoJCQkJbWUuU2V0X1BPU1RfVHJhY2soSmFsdXIsIDEpOw0KCQkJCSQuYWpheCh7DQoJCQkJCXR5cGU6J1BPU1QnLCANCgkJCQkJZGF0YTokKCcjJyt0aGlzLnByZWZpeCsiX2Zvcm0iKS5zZXJpYWxpemUoKSwNCgkJCQkJdXJsOiB0aGlzLnVybCsnJnRpcGU9UHJvc2VzUG9zdGluZ19QZW5nYWRhYW4mVFJBQ0s9JytKYWx1cisnJklkUGVuRGV0PScrSWREZXQrIiZUb3RhbFN1ZGFoUG9zdGluZz0iK21lLkpNTF9QT1NUSU5HLA0KCQkJCSAgCXN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsJCQ0KCQkJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOwkJCQkJDQoJCQkJCQkvL2RlbEVsZW0oY292ZXIpOwkJCQkJDQoJCQkJCQltZS5TZXRfUE9TVF9UcmFjayhKYWx1ciwgMCk7DQoJCQkJCQlpZiAocmVzcC5lcnIgPT0nJyl7DQoJCQkJCQkJbWUuUHJvc2VzUG9zdGluZ19QZW5nYWRhYW5fQWZ0ZXIodXJ1dGFuLCByZXNwLmNvbnRlbnQpOw0KCQkJCQkJCW1lLkxvYWRpbmdQb3N0aW5nKHJlc3AuY29udGVudCk7DQoJCQkJCQl9ZWxzZXsNCgkJCQkJCQltZS5TdGF0dXNQb3N0aW5nID0gMDsNCgkJCQkJCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdhdXRvJzsNCgkJCQkJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uIG15RnVuY3Rpb24oKSB7DQoJCQkJCQkJCWlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwZW1hc3VrYW5fZm9ybWNvdmVyX2xvYWQiKSlkZWxFbGVtKCJwZW1hc3VrYW5fZm9ybWNvdmVyX2xvYWQiKTsJDQoJCQkJCQkJCWlmKEphbHVyID09IDEgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBlbWFzdWthbl9mb3JtY292ZXIiKSl7CQkJCQkJCQ0KCQkJCQkJCQkJYWxlcnQocmVzcC5lcnIpOwkNCgkJCQkJCQkJCXN0b3B3YXRjaC5TdG9wKCk7DQoJCQkJCQkJCQlkZWxFbGVtKCJwZW1hc3VrYW5fZm9ybWNvdmVyIik7CQkJCQkNCgkJCQkJCQkJCW1lLlBvc3RpbmcoKTsNCgkJCQkJCQkJfQ0KCQkJCQkJCQkNCgkJCQkJCQl9LDEwMCk7DQoJCQkJCQl9DQoJCQkJICAJfSwNCgkJCQkJZXJyb3I6IGZ1bmN0aW9uICh4aHIsIGFqYXhPcHRpb25zLCB0aHJvd25FcnJvcikgew0KCQkJCSAgICAgICAgLy9kZWxFbGVtKGNvdmVyKTsNCgkJCQkJCW1lLlByb3Nlc1Bvc3RpbmdfUGVuZ2FkYWFuKHVydXRhbik7DQoJCQkJCQltZS5TZXRfUE9TVF9UcmFjayhKYWx1ciwgMCk7DQoJCQkgICAgCX0NCgkJCQl9KTsNCgkJCX1lbHNlew0KCQkJCW1lLkxvYWRpbmdQb3N0aW5nX0VuZCgpOw0KCQkJfQ0KCQl9ZWxzZXsNCgkJCXVydXRhbiArPTE7DQoJCQlpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaWRiYXJhbmdueWFfIit1cnV0YW4pKXsNCgkJCQltZS5Qcm9zZXNQb3N0aW5nX1BlbmdhZGFhbih1cnV0YW4sSmFsdXIpOw0KCQkJfWVsc2V7DQoJCQkJbWUuTG9hZGluZ1Bvc3RpbmdfRW5kKCk7DQoJCQl9DQoJCX0NCgkJDQoJCQ0KCQkNCgl9LA0KCQ0KCVVwZGF0ZVBvc3RpbmdCZXJoYXNpbDogZnVuY3Rpb24oKXsNCgkJdmFyIG1lID0gdGhpczsNCgkJJC5hamF4KHsNCgkJCXR5cGU6J1BPU1QnLCANCgkJCWRhdGE6JCgnIycrdGhpcy5wcmVmaXgrIl9mb3JtIikuc2VyaWFsaXplKCksDQoJCQl1cmw6IHRoaXMudXJsKycmdGlwZT1CZXJoYXNpbFBvc3RpbmcnLA0KCQkJc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewkJDQoJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOw0KCQkJCWlmKHJlc3AuZXJyPT0nJyl7DQoJCQkJCWFsZXJ0KCJCZXJoYXNpbCBNZW1wb3N0aW5nIERhdGEgISIpOw0KCQkJCQkNCgkJCQkJc2V0VGltZW91dChmdW5jdGlvbiBteUZ1bmN0aW9uUGVyc2VuKCkge21lLkNsb3NlKCk7cGVtYXN1a2FuLnJlZnJlc2hMaXN0KCk7fSwxMTEpOw0KCQkJCQlpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGVtYXN1a2FuX2Zvcm1jb3Zlcl9sb2FkIikpc2V0VGltZW91dChmdW5jdGlvbiBteUZ1bmN0aW9uUGVyc2VuKCkge2RlbEVsZW0oJ3BlbWFzdWthbl9mb3JtY292ZXJfbG9hZCcpO30sNTAwKTsNCgkJCQl9ZWxzZXsNCgkJCQkJYWxlcnQocmVzcC5lcnIpOw0KCQkJCX0NCgkJCX0NCgkJfSk7DQoJfSwNCgkJDQoJU2ltcGFuVFREOiBmdW5jdGlvbigpew0KCQl2YXIgbWU9IHRoaXM7DQoJCQ0KCQl2YXIgY292ZXIgPSB0aGlzLnByZWZpeCsnX2Zvcm1jb3Zlcl9UVERfbG9hZCc7DQoJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2hpZGRlbic7DQoJCWFkZENvdmVyUGFnZTIoY292ZXIsMix0cnVlLGZhbHNlKTsJDQoJCQ0KCQkNCgkJJC5hamF4KHsNCgkJCXR5cGU6J1BPU1QnLCANCgkJCWRhdGE6JCgnIycrdGhpcy5wcmVmaXgrJ19mb3JtX1RURCcpLnNlcmlhbGl6ZSgpLA0KCQkJdXJsOiB0aGlzLnVybCsnJnRpcGU9U2ltcGFuVFREJywNCgkJICAJc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewkJDQoJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOwkNCgkJCQlkZWxFbGVtKGNvdmVyKTsJCQ0KCQkJCS8vZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY292ZXIpLmlubmVySFRNTCA9IHJlc3AuY29udGVudDsNCgkJCQlpZihyZXNwLmVycj09Jycpew0KCQkJCQlhbGVydChyZXNwLmNvbnRlbnQpOw0KCQkJCQltZS5UdXR1cEZvcm0oInBlbWFzdWthbl9mb3JtY292ZXJfVFREIik7DQoJCQkJfWVsc2V7DQoJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQl9DQoJCSAgCX0NCgkJfSk7DQoJfSwNCgkNCglQcmludExhcG9yYW46IGZ1bmN0aW9uKCl7DQoJCXZhciBtZT10aGlzOw0KCQkNCgkJdmFyIGNvdmVyID0gdGhpcy5wcmVmaXgrJ19mb3JtY292ZXJfUHJpbnRMYXBvcmFuJzsNCgkJZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdz0naGlkZGVuJzsNCgkJYWRkQ292ZXJQYWdlMihjb3ZlciwyLHRydWUsZmFsc2UpOwkJCQ0KCQkkLmFqYXgoew0KCQkJdHlwZTonUE9TVCcsIA0KCQkJZGF0YTokKCcjJyt0aGlzLnByZWZpeCsnX2Zvcm0nKS5zZXJpYWxpemUoKSwNCgkJCXVybDogdGhpcy51cmwrJyZ0aXBlPVByaW50TGFwb3Jhbl9DZWsnLA0KCQkgIAlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQl2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7CQ0KCQkJCWRlbEVsZW0oY292ZXIpOwkJDQoJCQkJaWYocmVzcC5lcnI9PScnKXsNCgkJCQkJaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIlBERl9TQVZFIikudmFsdWU9PSIwIil7DQoJCQkJCQkvKnZhciB1cmxOeWEgPSB0aGlzLnVybCsnJnRpcGU9UHJpbnRMYXBvcmFuJzsNCgkJCQkJCXZhciBuYW1hX2xhcG9yYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibmFtYV9sYXBvcmFuIikudmFsdWU7DQoJCQkJCQl2YXIgUGlsTHBybiA9IHBhcnNlSW50KG5hbWFfbGFwb3Jhbik7Ki8JCQkJCQ0KCQkJCQkJdmFyIHVybE55YSA9ICdwYWdlcy5waHA\/UGc9cGVtYXN1a2FuX2xhcG9yYW4mdGlwZT1MYXBvcmFuJzsNCgkJCQkJCXZhciBhRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1lLnByZWZpeCsnX2Zvcm0nKTsJCQ0KCQkJCQkJCWFGb3JtLmFjdGlvbj0gdXJsTnlhOwkNCgkJCQkJCQlhRm9ybS50YXJnZXQ9J19ibGFuayc7DQoJCQkJCQkJYUZvcm0uc3VibWl0KCk7CQ0KCQkJCQkJCWFGb3JtLnRhcmdldD0nJzsNCgkJCQkJfWVsc2V7DQoJCQkJCQltZS5QcmludFBERl9HZXQoKTsNCgkJCQkJfQkJCQkJCQ0KCQkJCX1lbHNlewkJCQkJDQoJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQl9DQoJCSAgCX0sDQoJCQllcnJvcjogZnVuY3Rpb24gKHhociwgYWpheE9wdGlvbnMsIHRocm93bkVycm9yKSB7DQoJCQkJZGVsRWxlbShjb3Zlcik7DQoJCQkJYWxlcnQoIkdhZ2FsIE1lbXVhdCBMYXBvcmFuICEiKTsgDQoJICAgIAl9DQoJCX0pOw0KCX0sDQoNCglQcmludFBERl9HZXQ6ZnVuY3Rpb24oKXsNCgkJdmFyIG1lPXRoaXM7DQoJCQ0KCQl2YXIgY292ZXIgPSB0aGlzLnByZWZpeCsnX2Zvcm1jb3Zlcl9QcmludExhcG9yYW4nOw0KCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdoaWRkZW4nOw0KCQlhZGRDb3ZlclBhZ2UyKGNvdmVyLDIsdHJ1ZSxmYWxzZSk7CQkJDQoJCSQuYWpheCh7DQoJCQl0eXBlOidQT1NUJywgDQoJCQlkYXRhOiQoJyMnK3RoaXMucHJlZml4KydfZm9ybScpLnNlcmlhbGl6ZSgpLA0KCQkJdXJsOiAncGFnZXMucGhwP1BnPXBlbWFzdWthbl9sYXBvcmFuJnRpcGU9TGFwb3JhbicsDQoJCSAgCXN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsJCQ0KCQkJCXZhciByZXNwID0gZXZhbCgnKCcgKyBkYXRhICsgJyknKTsJDQoJCQkJZGVsRWxlbShjb3Zlcik7CQkNCgkJCQlpZihyZXNwLmVycj09Jycpew0KCQkJCQkkKCIjVHVrX0EiKS5odG1sKCI8YSBocmVmPSciK3Jlc3AuY29udGVudC5QQVRIKyInIGRvd25sb2FkPSciK3Jlc3AuY29udGVudC5OYW1lKyInIGlkPSdEb3dubG9hZEV4Y2VsJz48L2E+Iik7DQoJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEb3dubG9hZEV4Y2VsJykuY2xpY2soKTsNCgkJCQl9ZWxzZXsJCQkJCQ0KCQkJCQlhbGVydChyZXNwLmVycik7DQoJCQkJfQ0KCQkgIAl9LA0KCQkJZXJyb3I6IGZ1bmN0aW9uICh4aHIsIGFqYXhPcHRpb25zLCB0aHJvd25FcnJvcikgew0KCQkJCWRlbEVsZW0oY292ZXIpOw0KCQkJCWFsZXJ0KCJHYWdhbCBNZW1idWF0IExhcG9yYW4iKTsNCgkgICAgCX0NCgkJfSk7DQoJfSwNCgkNCglQcm9zZXNQb3N0aW5nUGVtZWxpaGFyYWFuOiBmdW5jdGlvbih1cnV0YW4sIEJSR01VTEFJLCBCUkdTVURBSFBST1NFUyl7DQoJCXZhciBtZT0gdGhpczsJDQoJCXZhciBjb3ZlciA9IHRoaXMucHJlZml4KydfZm9ybWNvdmVyJzsNCgkJDQoJCQ0KCQl0b3Rfam1sYmFyYW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvdF9qbWxiYXJhbmcnKS52YWx1ZTsNCgkJDQoJCWlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZEtQVExTXycrdXJ1dGFuKSl7DQoJCQlpZEtQVExTID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lkS1BUTFNfJyt1cnV0YW4pLnZhbHVlOw0KCQkJDQoJCQlpZihCUkdTVURBSFBST1NFUyA9PSAwKXsNCgkJCQlwZXJhd2FsPTE7DQoJCQl9ZWxzZXsNCgkJCQlwZXJhd2FsPUJSR1NVREFIUFJPU0VTOw0KCQkJfQ0KCQkJDQoJCQlwZXJzZW5hbiA9IHBlcmF3YWwvdG90X2ptbGJhcmFuZyAqIDEwMDsJCQkJCQkJCQ0KCQkJCSQuYWpheCh7DQoJCQkJCXR5cGU6J1BPU1QnLCANCgkJCQkJZGF0YTokKCcjJyt0aGlzLnByZWZpeCsiX2Zvcm0iKS5zZXJpYWxpemUoKSwNCgkJCQkJdXJsOiB0aGlzLnVybCsnJnRpcGU9UHJvc2VzUG9zdGluZ1BlbWVsaWhhcmFhbiZJZERpc3RyaWJ1c2k9JytpZEtQVExTKycmQlJHTVVMQUk9JytCUkdNVUxBSSwNCgkJCQkgIAlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQkJCXZhciByZXNwID0gZXZhbCgnKCcgKyBkYXRhICsgJyknKTsNCgkJCQkJCWlmKHJlc3AuZXJyPT0nJyl7DQoJCQkJCQkJDQoJCQkJCQkJQlJHTVVMQUkgPSBCUkdNVUxBSSArIDE7DQoJCQkJCQkJdXJ1dGFuID0gdXJ1dGFuICsgMTsNCgkJCQkJCQkNCgkJCQkJCQltYXhwZXJzZW5hbiA9IHJlc3AuY29udGVudC5icmdfaW5wdXQvdG90X2ptbGJhcmFuZyAqIDEwMCA7DQoJCQkJCQkJDQoJCQkJCQkJaWYocmVzcC5jb250ZW50Lmxhbmp1dCA9PSAiTkVYVCIpew0KCQkJCQkJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uIG15RnVuY3Rpb25QZXJzZW4oKSB7bWUua2VtYWp1YW5wZXJzZW4ocGVyc2VuYW4sbWF4cGVyc2VuYW4pfSwxMDApOw0KCQkJCQkJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uIG15RnVuY3Rpb25QZXJzZW4oKSB7bWUuUHJvc2VzUG9zdGluZ1BlbWVsaWhhcmFhbih1cnV0YW4sIEJSR01VTEFJLCByZXNwLmNvbnRlbnQuQmFyYW5nU3VkYWhQcm9zZXMpO30sMTAxKTsJDQoJCQkJCQkJfWVsc2V7DQoJCQkJCQkJCXNldFRpbWVvdXQoZnVuY3Rpb24gbXlGdW5jdGlvblBlcnNlbigpIHttZS5rZW1hanVhbnBlcnNlbihwZXJzZW5hbixtYXhwZXJzZW5hbil9LDEwMCk7DQoJCQkJCQkJCXNldFRpbWVvdXQoZnVuY3Rpb24gbXlGdW5jdGlvblBlcnNlbigpIHttZS5VcGRhdGVQb3N0aW5nQmVyaGFzaWwoKTt9LDExMCk7DQoJCQkJCQkJCQ0KCQkJCQkJCX0NCgkJCQkJCQkJCQkJCQkJCQkNCgkJCQkJCX1lbHNlew0KCQkJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQkJCQlkZWxFbGVtKCJwZW1hc3VrYW5fZm9ybWNvdmVyX2xvYWQiKTsNCgkJCQkJCX0NCgkJCQkgIAl9DQoJCQkJfSk7CQ0KCQkJCQkNCgkJCQkJDQoJCQkJCQ0KCQl9DQoJCQ0KCX0sDQoJDQoJTGloYXREYXRhX0dldERhdGFfRGV0YWlsOiBmdW5jdGlvbigpew0KCQl2YXIgbWU9dGhpczsNCgkJbWUuRm9ybV9QZW5jYXJpYW5EZXRhaWwoKTsNCgkJcGVtYXN1a2FuX2luc19kZXQuZm9ybU5hbWU9InBlbWFzdWthbl9Gb3JtTGloYXREYXRhIjsNCgkJcGVtYXN1a2FuX2luc19kZXQubG9hZGluZygpOw0KCX0sDQoJDQoJTGloYXREYXRhOmZ1bmN0aW9uKElkbnlhLCBjYil7DQoJCXZhciBtZSA9IHRoaXM7DQoJCQl2YXIgYm94ID0gdGhpcy5HZXRDYnhDaGVja2VkKCk7DQoJCQkNCgkJCS8vdGhpcy5TaG93ICgnZm9ybWVkaXQnLHtpZHBsaDpib3gudmFsdWV9LCBmYWxzZSwgdHJ1ZSk7CQkJDQoJCQl2YXIgY292ZXIgPSB0aGlzLnByZWZpeCsnX2Zvcm1jb3Zlcic7DQoJCQlhZGRDb3ZlclBhZ2UyKGNvdmVyLDEsdHJ1ZSxmYWxzZSk7CQ0KCQkJZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdz0naGlkZGVuJzsNCgkJCSQuYWpheCh7DQoJCQkJdHlwZTonUE9TVCcsIA0KCQkJCWRhdGE6JCgnIycrdGhpcy5mb3JtTmFtZSkuc2VyaWFsaXplKCksDQoJCQkJdXJsOiB0aGlzLnVybCsnJnRpcGU9Zm9ybUxpaGF0RGF0YSZJZG55YT0nK0lkbnlhKycmY2JueWE9JytjYiwNCgkJCSAgCXN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsJCQ0KCQkJCQl2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7CQ0KCQkJCQlpZiAocmVzcC5lcnIgPT0nJyl7CQkNCgkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvdmVyKS5pbm5lckhUTUwgPSByZXNwLmNvbnRlbnQ7DQoJCQkJCQltZS5MaWhhdERhdGFfR2V0RGF0YV9EZXRhaWwoKTsNCgkJCQkJfWVsc2V7DQoJCQkJCQlhbGVydChyZXNwLmVycik7DQoJCQkJCQlkZWxFbGVtKGNvdmVyKTsNCgkJCQkJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2F1dG8nOw0KCQkJCQl9DQoJCQkgIAl9DQoJCQl9KTsNCgkJDQoJfSwNCgkNCglPcHRfTGloYXREYXRhOmZ1bmN0aW9uKCl7DQoJCXZhciBtZSA9IHRoaXM7CQ0KCQllcnJtc2cgPSB0aGlzLkNla0NoZWNrYm94KCk7DQoJCWlmKGVycm1zZyA9PScnKXsgDQoJCQl2YXIgYm94ID0gdGhpcy5HZXRDYnhDaGVja2VkKCk7DQoJCQlkYXRhID0gYm94LmlkOw0KCQkJZGF0YW55YSA9IGRhdGEuc3BsaXQoIl9jYiIpOw0KCQkJbWUuTGloYXREYXRhKGJveC52YWx1ZSwgZGF0YW55YVsxXSkNCgkJfWVsc2V7DQoJCQlhbGVydChlcnJtc2cpOw0KCQl9DQoJfSwNCgkNCglTaW5na3JvbkF0cmlidXNpOiBmdW5jdGlvbigpew0KCQl2YXIgbWU9IHRoaXM7DQoJCXRoaXMuT25FcnJvckNsb3NlID0gZmFsc2UJDQoJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2hpZGRlbic7DQoJCXZhciBjb3ZlciA9IHRoaXMucHJlZml4KydfZm9ybXNpbXBhbic7DQoJCWFkZENvdmVyUGFnZTIoY292ZXIsMSx0cnVlLGZhbHNlKTsJDQoJCQ0KCQkkLmFqYXgoew0KCQkJdHlwZTonUE9TVCcsIA0KCQkJZGF0YTokKCcjJyt0aGlzLmZvcm1OYW1lKS5zZXJpYWxpemUoKSwNCgkJCXVybDogdGhpcy51cmwrJyZ0aXBlPVNpbmdrcm9uQXRyaWJ1c2knLA0KCQkgIAlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQl2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7CQ0KCQkJCWRlbEVsZW0oY292ZXIpOwkJDQoJCQkJZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdz0nYXV0byc7DQoJCQkJaWYocmVzcC5lcnI9PScnKXsNCgkJCQkJYWxlcnQoIlNlbGVzYWkiKTsNCgkJCQl9ZWxzZXsNCgkJCQkJYWxlcnQocmVzcC5lcnIpOw0KCQkJCX0NCgkJICAJfQ0KCQl9KTsNCgkJCQ0KCQkNCgl9LA0KCQ0KCUZvcm1UZW1wbGF0ZTpmdW5jdGlvbigpew0KCQl2YXIgbWUgPSB0aGlzOw0KCQkJLy92YXIgYm94ID0gdGhpcy5HZXRDYnhDaGVja2VkKCk7DQoJCQkNCgkJCS8vdGhpcy5TaG93ICgnZm9ybWVkaXQnLHtpZHBsaDpib3gudmFsdWV9LCBmYWxzZSwgdHJ1ZSk7CQkJDQoJCQl2YXIgY292ZXIgPSB0aGlzLnByZWZpeCsnX2Zvcm1jb3Zlcic7DQoJCQlhZGRDb3ZlclBhZ2UyKGNvdmVyLDEsdHJ1ZSxmYWxzZSk7CQ0KCQkJZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdz0naGlkZGVuJzsNCgkJCSQuYWpheCh7DQoJCQkJdHlwZTonUE9TVCcsIA0KCQkJCWRhdGE6JCgnIycrdGhpcy5mb3JtTmFtZSkuc2VyaWFsaXplKCksDQoJCQkJdXJsOiB0aGlzLnVybCsnJnRpcGU9Rm9ybVRlbXBsYXRlJywNCgkJCSAgCXN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsJCQ0KCQkJCQl2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7CQ0KCQkJCQlpZiAocmVzcC5lcnIgPT0nJyl7CQkNCgkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvdmVyKS5pbm5lckhUTUwgPSByZXNwLmNvbnRlbnQ7DQoJCQkJCQkNCgkJCQkJfWVsc2V7DQoJCQkJCQlhbGVydChyZXNwLmVycik7DQoJCQkJCQlkZWxFbGVtKGNvdmVyKTsNCgkJCQkJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2F1dG8nOw0KCQkJCQl9DQoJCQkgIAl9DQoJCQl9KTsNCgkJDQoJfSwNCgkNCglQaWxpaFRlbXBsYXRlOmZ1bmN0aW9uKCl7DQoJCXZhciBlcnJtc2cgPSAnJzsNCgkJdmFyIHBpbF90ZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaWxfdGVtcGxhdGUnKS52YWx1ZTsNCgkJaWYocGlsX3RlbXBsYXRlID09ICcnKWVycm1zZyA9ICJUZW1wbGF0ZSBCZWx1bSBEaSBQaWxpaCAhIjsNCgkJDQoJCWlmKGVycm1zZyA9PScnKXsgDQoJCQl2YXIgdHVrVXJsID0gJ2NhcmlUZW1wbGF0ZSc7DQoJCQlpZihwaWxfdGVtcGxhdGUgPT0gJzEnKXR1a1VybD0ncmVmX3RlbXBsYXRlYmFyYW5nJzsNCgkJCQkJCQkJDQoJCQl2YXIgYUZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnByZWZpeCsiX2Zvcm0iKTsJCQ0KCQkJYUZvcm0uYWN0aW9uPSAicGFnZXMucGhwP1BnPSIrdHVrVXJsOwkJDQoJCQlhRm9ybS50YXJnZXQ9J19ibGFuayc7DQoJCQlhRm9ybS5zdWJtaXQoKTsJDQoJCQlhRm9ybS50YXJnZXQ9Jyc7DQoJCX1lbHNlew0KCQkJCWFsZXJ0KGVycm1zZyk7DQoJCX0JDQoJfSwNCgkNCglIaXR1bmdUb3RhbFNlbXVhOmZ1bmN0aW9uKCl7DQoJCXZhciBtZSA9IHRoaXM7DQoJCXZhciBjb3ZlciA9IHRoaXMucHJlZml4KydfZm9ybWNvdmVyX0hyZyc7DQoJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2hpZGRlbic7DQoJCWFkZENvdmVyUGFnZTIoY292ZXIsMSx0cnVlLGZhbHNlKTsNCgkJJC5hamF4KHsNCgkJCXR5cGU6J1BPU1QnLCANCgkJCWRhdGE6JCgnIycrdGhpcy5mb3JtTmFtZSkuc2VyaWFsaXplKCksDQoJCSAgCXVybDogdGhpcy51cmwrJyZ0aXBlPUhpdHVuZ1RvdGFsU2VtdWEnLA0KCQkgIAlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQl2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7DQoJCQkJZGVsRWxlbShjb3Zlcik7DQoJCQkJZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdz0nYXV0byc7DQoJCQkJaWYocmVzcC5lcnIgPT0gJycpew0KCQkJCQkkKCIjVG90X0JhcmFuZyIpLmh0bWwocmVzcC5jb250ZW50LlRvdF9CYXJhbmcpOw0KCQkJCQkkKCIjVG90X1JlayIpLmh0bWwocmVzcC5jb250ZW50LlRvdF9SZWspOw0KCQkJCQkkKCIjVG90X0JlbGkiKS5odG1sKHJlc3AuY29udGVudC5Ub3RfQmVsaSk7DQoJCQkJCSQoIiNUb3RfQXRyaWJ1c2kiKS5odG1sKHJlc3AuY29udGVudC5Ub3RfQXRyaWJ1c2kpOw0KCQkJCQkkKCIjVG90X1Blcm9sZWhhbiIpLmh0bWwocmVzcC5jb250ZW50LlRvdF9QZXJvbGVoYW4pOw0KCQkJCX1lbHNlew0KCQkJCQlhbGVydChyZXNwLmVycik7DQoJCQkJfQkNCgkJICAJfQ0KCQl9KTsNCgl9LA0KCQ0KCVByb3Nlc19KU1ZhbGlkYXNpOmZ1bmN0aW9uKGNiKXsNCgkJdmFyIG1lPXRoaXM7DQoJCXZhciBzYXlhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobWUucHJlZml4KyJfY2IiK2NiKTsNCgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobWUucHJlZml4KyJfdG9nZ2xlIikuY2hlY2tlZCA9IGZhbHNlOw0KCQljaGVja0FsbDMoMjUsbWUucHJlZml4KydfY2InLG1lLnByZWZpeCsnX3RvZ2dsZScsbWUucHJlZml4Kydfam1sY2VrJyk7DQoJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1lLnByZWZpeCsiX2NiIitjYikuY2hlY2tlZCA9IHRydWU7DQoJCWlzQ2hlY2tlZDIoc2F5YS5jaGVja2VkLG1lLnByZWZpeCsnX2ptbGNlaycpOw0KCQltZS5jYnhQaWxpaChzYXlhKSANCgkJbWUuVmFsaWRhc2koMSk7DQoJfSwNCgkNCglDbG9zZVZhbGlkYXNpOmZ1bmN0aW9uKCl7DQoJCXZhciBtZT10aGlzOw0KCQlkZWxFbGVtKG1lLnByZWZpeCsiX2Zvcm1jb3Zlcl92YWxpZGFzaSIpOw0KCQlpZihtZS5EYXJpVmFsaWRhc2kgPT0gMClkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdhdXRvJzsNCgl9LA0KCQ0KCUZuX01hcHBpbmdSZWtlbmluZ0JhcmFuZzpmdW5jdGlvbigpew0KCQl2YXIgbWUgPSB0aGlzOw0KCQl2YXIgY292ZXIgPSB0aGlzLnByZWZpeCsnX2Zvcm1jb3Zlcl9Gbl9NYXBwaW5nUmVrZW5pbmdCYXJhbmcnOw0KCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdoaWRkZW4nOw0KCQlhZGRDb3ZlclBhZ2UyKGNvdmVyLDEsdHJ1ZSxmYWxzZSk7DQoJCSQuYWpheCh7DQoJCQl0eXBlOidQT1NUJywgDQoJCQlkYXRhOiQoJyMnK3RoaXMuZm9ybU5hbWUpLnNlcmlhbGl6ZSgpLA0KCQkgIAl1cmw6IHRoaXMudXJsKycmdGlwZT1Gbl9NYXBwaW5nUmVrZW5pbmdCYXJhbmcnLA0KCQkgIAlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQl2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7DQoJCQkJZGVsRWxlbShjb3Zlcik7DQoJCQkJZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdz0nYXV0byc7DQoJCQkJYWxlcnQocmVzcC5lcnIpOw0KCQkgIAl9DQoJCX0pOw0KCX0sDQoJDQoJRm5fQ2JQT1NUOmZ1bmN0aW9uKCl7DQoJCWlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJMYmxfUG9zdCIpKXsNCgkJCVN1ZGFoUG9zdGluZ19EYXRhID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIlN1ZGFoUG9zdGluZ19EYXRhIikudmFsdWUpOw0KCQkJVG90YWxCYXJhbmcgPSBwYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidG90X2ptbGJhcmFuZyIpLnZhbHVlKTsNCgkJCQkJCQ0KCQkJaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBvc3RpbmciKS5jaGVja2VkID09IGZhbHNlICYmIHBhcnNlSW50KFN1ZGFoUG9zdGluZ19EYXRhKSA+IDApew0KCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJMYmxfUG9zdCIpLmlubmVySFRNTD0iQkFUQUwgRElQT1NUSU5HIjsNCgkJCX1lbHNlew0KCQkJCVN1ZGFoUG9zdGluZ19EYXRhID0gVG90YWxCYXJhbmcgLSBTdWRhaFBvc3RpbmdfRGF0YTsNCgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiTGJsX1Bvc3QiKS5pbm5lckhUTUw9IkFLQU4gRElQT1NUSU5HIjsNCgkJCX0NCgkJCQ0KCQkJaWYoU3VkYWhQb3N0aW5nX0RhdGEgPiAxMDAwMClTdWRhaFBvc3RpbmdfRGF0YT0xMDAwMDsNCgkJCURhdGFQZW5nYXR1cmFuLlNldF9jZWtEY0lEX3ZhbCgiam1sX2JyZ19uZXh0UE9TVCIsU3VkYWhQb3N0aW5nX0RhdGEpOw0KCQkJDQoJCX0JDQoJfSwNCgkNCglGb3JtX1BlbmNhcmlhbkRldGFpbDpmdW5jdGlvbigpew0KCQl2YXIgbWUgPSB0aGlzOw0KCQl2YXIgY292ZXIgPSB0aGlzLnByZWZpeCsnX2Zvcm1jb3Zlcl9Gb3JtX1BlbmNhcmlhbkRldGFpbCc7DQoJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2hpZGRlbic7DQoJCWFkZENvdmVyUGFnZTIoY292ZXIsMSx0cnVlLGZhbHNlKTsNCgkJJC5hamF4KHsNCgkJCXR5cGU6J1BPU1QnLCANCgkJCWRhdGE6JCgnIycrdGhpcy5wcmVmaXgrIl9Gb3JtTGloYXREYXRhIikuc2VyaWFsaXplKCksDQoJCSAgCXVybDogdGhpcy51cmwrJyZ0aXBlPUZvcm1fUGVuY2FyaWFuRGV0YWlsJywNCgkJICAJc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewkJDQoJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOw0KCQkJCWRlbEVsZW0oY292ZXIpOw0KCQkJCWlmKHJlc3AuZXJyID09ICcnKXsNCgkJCQkJJCgiI0Zvcm1fUGVuY2FyaWFuRGV0YWlsIikuaHRtbChyZXNwLmNvbnRlbnQpOw0KCQkJCX1lbHNlew0KCQkJCQlhbGVydChyZXNwLmVycik7DQoJCQkJfQkNCgkJICAJfSwNCgkJCWVycm9yOiBmdW5jdGlvbiAoeGhyLCBhamF4T3B0aW9ucywgdGhyb3duRXJyb3IpIHsNCgkJCQlkZWxFbGVtKGNvdmVyKTsNCgkJCQltZS5Gb3JtX1BlbmNhcmlhbkRldGFpbCgpOw0KCSAgICAJfQ0KCQl9KTsNCgl9LA0KCQ0KCVViYWhCYXJhbmdEZXRhaWw6ZnVuY3Rpb24oKXsNCgkJdmFyIG1lID0gdGhpczsNCgkJdmFyIGNvdmVyID0gdGhpcy5wcmVmaXgrJ19mb3JtY292ZXJfVWJhaEJhcmFuZ0RldGFpbCc7DQoJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2hpZGRlbic7DQoJCWFkZENvdmVyUGFnZTIoY292ZXIsOSx0cnVlLGZhbHNlKTsNCgkJJC5hamF4KHsNCgkJCXR5cGU6J1BPU1QnLCANCgkJCWRhdGE6JCgnIycrdGhpcy5wcmVmaXgrIl9Gb3JtTGloYXREYXRhIikuc2VyaWFsaXplKCksDQoJCSAgCXVybDogdGhpcy51cmwrJyZ0aXBlPUZvcm1fVWJhaEJhcmFuZ0RldGFpbCcsDQoJCSAgCXN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsJCQ0KCQkJCXZhciByZXNwID0gZXZhbCgnKCcgKyBkYXRhICsgJyknKTsNCgkJCQlpZihyZXNwLmVyciA9PSAnJyl7DQoJCQkJCSQoIiMiK2NvdmVyKS5odG1sKHJlc3AuY29udGVudCk7DQoJCQkJfWVsc2V7DQoJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQkJZGVsRWxlbShjb3Zlcik7DQoJCQkJfQkNCgkJICAJfSwNCgkJCWVycm9yOiBmdW5jdGlvbiAoeGhyLCBhamF4T3B0aW9ucywgdGhyb3duRXJyb3IpIHsNCgkJCQlkZWxFbGVtKGNvdmVyKTsNCgkJCQltZS5VYmFoQmFyYW5nRGV0YWlsKCk7DQoJICAgIAl9DQoJCX0pOw0KCX0sDQoJDQoJQ2xvc2VfVWJhaEJhcmFuZ0RldGFpbDpmdW5jdGlvbigpew0KCQl2YXIgbWUgPSB0aGlzOw0KCQl2YXIgY292ZXIgPSB0aGlzLnByZWZpeCsnX2Zvcm1jb3Zlcl9VYmFoQmFyYW5nRGV0YWlsJzsNCgkJZGVsRWxlbShjb3Zlcik7DQoJfSwNCgkJCQ0KCWNhcmlCYXJhbmc6ZnVuY3Rpb24oKXsNCgkJdmFyIG1lID0gdGhpczsNCgkJY2FyaUJhcmFuZy56aW5kZXg9MTE7DQoJCWNhcmlCYXJhbmcud2luZG93U2hvdyhtZS5wcmVmaXgrIl9mb3JtVWJhaERldGFpbCIpDQoJfSwNCgkNCglTaW1wYW5fVWJhaEJhcmFuZ0RldGFpbDpmdW5jdGlvbigpew0KCQl2YXIgbWUgPSB0aGlzOw0KCQl2YXIgY292ZXIgPSB0aGlzLnByZWZpeCsnX2Zvcm1jb3Zlcl9TaW1wYW5fVWJhaEJhcmFuZ0RldGFpbCc7DQoJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2hpZGRlbic7DQoJCWFkZENvdmVyUGFnZTIoY292ZXIsOSx0cnVlLGZhbHNlKTsNCgkJJC5hamF4KHsNCgkJCXR5cGU6J1BPU1QnLCANCgkJCWRhdGE6JCgnIycrdGhpcy5wcmVmaXgrIl9mb3JtVWJhaERldGFpbCIpLnNlcmlhbGl6ZSgpLA0KCQkgIAl1cmw6IHRoaXMudXJsKycmdGlwZT1TaW1wYW5fVWJhaEJhcmFuZ0RldGFpbCcsDQoJCSAgCXN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsJCQ0KCQkJCXZhciByZXNwID0gZXZhbCgnKCcgKyBkYXRhICsgJyknKTsJCQkJDQoJCQkJZGVsRWxlbShjb3Zlcik7DQoJCQkJaWYocmVzcC5lcnIgPT0gJycpew0KCQkJCQlhbGVydCgiRGF0YSBCZXJoYXNpbCBkaSBTaW1wYW4gISIpOw0KCQkJCQltZS5DbG9zZV9VYmFoQmFyYW5nRGV0YWlsKCk7DQoJCQkJCW1lLkxpaGF0RGF0YV9HZXREYXRhX0RldGFpbCgpOw0KCQkJCX1lbHNlew0KCQkJCQlhbGVydChyZXNwLmVycik7DQoJCQkJfQkNCgkJICAJfSwNCgkJCWVycm9yOiBmdW5jdGlvbiAoeGhyLCBhamF4T3B0aW9ucywgdGhyb3duRXJyb3IpIHsNCgkJCQlkZWxFbGVtKGNvdmVyKTsNCgkJCQlhbGVydCgiU2ViYWdpYW4gRGF0YSBHYWdhbCBEaSBQcm9zZXMuIE1vaG9uIFVsYW5naSBQZXJ1YmFoYW4gRGF0YSAhIik7DQoJICAgIAl9DQoJCX0pOw0KCX0sDQoJDQoJUG9zdGluZ0RldGFpbEJhcmFuZzpmdW5jdGlvbigpew0KCQl2YXIgbWUgPSB0aGlzOw0KCQl2YXIgY292ZXIgPSB0aGlzLnByZWZpeCsnX2Zvcm1jb3Zlcl9Qb3N0aW5nRGV0YWlsQmFyYW5nJzsNCgkJZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdz0naGlkZGVuJzsNCgkJYWRkQ292ZXJQYWdlMihjb3Zlciw5LHRydWUsZmFsc2UpOw0KCQkkLmFqYXgoew0KCQkJdHlwZTonUE9TVCcsIA0KCQkJZGF0YTokKCcjJyt0aGlzLnByZWZpeCsiX0Zvcm1MaWhhdERhdGEiKS5zZXJpYWxpemUoKSwNCgkJICAJdXJsOiB0aGlzLnVybCsnJnRpcGU9Rm9ybV9Qb3N0aW5nRGV0YWlsQmFyYW5nJywNCgkJICAJc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewkJDQoJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOw0KCQkJCWlmKHJlc3AuZXJyID09ICcnKXsNCgkJCQkJJCgiIyIrY292ZXIpLmh0bWwocmVzcC5jb250ZW50KTsNCgkJCQl9ZWxzZXsNCgkJCQkJYWxlcnQocmVzcC5lcnIpOw0KCQkJCQlkZWxFbGVtKGNvdmVyKTsNCgkJCQl9CQ0KCQkgIAl9LA0KCQkJZXJyb3I6IGZ1bmN0aW9uICh4aHIsIGFqYXhPcHRpb25zLCB0aHJvd25FcnJvcikgew0KCQkJCWRlbEVsZW0oY292ZXIpOw0KCQkJCW1lLlBvc3RpbmdEZXRhaWxCYXJhbmcoKTsNCgkgICAgCX0NCgkJfSk7DQoJfSwNCgkNCglDbG9zZV9Qb3N0aW5nRGV0YWlsQmFyYW5nOmZ1bmN0aW9uKCl7DQoJCXZhciBtZSA9IHRoaXM7DQoJCXZhciBjb3ZlciA9IHRoaXMucHJlZml4KydfZm9ybWNvdmVyX1Bvc3RpbmdEZXRhaWxCYXJhbmcnOw0KCQlpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb3ZlcikpZGVsRWxlbShjb3Zlcik7DQoJfSwNCgkNCglTaW1wYW5Qb3N0aW5nX1NpbmdsZTogZnVuY3Rpb24oKXsNCgkJdmFyIG1lPSB0aGlzOwkNCgkJDQoJCXRvdF9qbWxiYXJhbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG90X2ptbGJhcmFuZycpLnZhbHVlOw0KCQl2YXIgY292ZXIxID0gdGhpcy5wcmVmaXgrJ19mb3JtTXVsYWlwb3N0aW5nMSc7DQoJCWFkZENvdmVyUGFnZTIoY292ZXIxLDEwLHRydWUsZmFsc2UpOw0KCQkJCQ0KCQkkLmFqYXgoew0KCQkJdHlwZTonUE9TVCcsIA0KCQkJZGF0YTokKCcjJyt0aGlzLnByZWZpeCsiX2Zvcm1QT1NUU2luZ2xlIikuc2VyaWFsaXplKCksDQoJCQl1cmw6IHRoaXMudXJsKycmdGlwZT1QZW5nZWNla2FuUG9zdGluZ19QZW5nYWRhYW5TaW5nbGUnLA0KCQkgIAlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQl2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7DQoJCQkJZGVsRWxlbShjb3ZlcjEpOw0KCQkJCWlmKHJlc3AuZXJyPT0nJyl7DQoJCQkJCWlmKHJlc3AuY29udGVudC5rb25maXJtYXNpKXsNCgkJCQkJCWlmKHJlc3AuY29udGVudC5Ob1Bvc3Rpbmcpew0KCQkJCQkJCWFsZXJ0KHJlc3AuY29udGVudC5rb25maXJtYXNpKTsNCgkJCQkJCX1lbHNlew0KCQkJCQkJCWtvbmYgPSBjb25maXJtKHJlc3AuY29udGVudC5rb25maXJtYXNpKTsNCgkJCQkJCQlpZihrb25mID09IHRydWUpew0KCQkJCQkJCQlpZighcmVzcC5jb250ZW50LmVycil7DQoJCQkJCQkJCQltZS5TdGF0dXNQb3N0aW5nID0gMTsNCgkJCQkJCQkJCWlmKHJlc3AuY29udGVudC5rb25maXJtYXNpID09ICJCYXRhbGthbiBQb3N0aW5nIERhdGEgPyIpew0KCQkJCQkJCQkJCW1lLkJUTF9QT1NUSU5HPTA7DQoJCQkJCQkJCQkJc3RvcHdhdGNoLm5hbWUgPSAiVHVrVGltZXIiOw0KCQkJCQkJCQkJCXN0b3B3YXRjaC5NdWxhaSgpOw0KCQkJCQkJCQkJCW1lLkhhcHVzUG9zdGluZ19QZW5nYWRhYW5fU2luZ2xlKCk7DQoJCQkJCQkJCQl9ZWxzZXsNCgkJCQkJCQkJCQlpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWRiYXJhbmdueWFfMCcpKXsNCgkJCQkJCQkJCQkJaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImptbF9icmdfbmV4dFBPU1QiKSltZS5qbWxTZXRQT1NUID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImptbF9icmdfbmV4dFBPU1QiKS52YWx1ZSk7CQkJCQkJDQoJCQkJCQkJCQkJCW1lLkpNTF9QT1NUSU5HPTA7DQoJCQkJCQkJCQkJCW1lLkFkYVlhbmdUYW55YT0wOw0KCQkJCQkJCQkJCQlKYWx1clBvc3QgPSBtZS5TZXRfUG9zdFRyYWNrKCk7DQoJCQkJCQkJCQkJCXN0b3B3YXRjaC5uYW1lID0gIlR1a1RpbWVyIjsNCgkJCQkJCQkJCQkJc3RvcHdhdGNoLk11bGFpKCk7DQoJCQkJCQkJCQkJCWlmKEphbHVyUG9zdCA+IDEgJiYgSmFsdXJQb3N0IDwgNSl7DQoJCQkJCQkJCQkJCQlmb3IoaT0xO2k8PUphbHVyUG9zdDtpKyspew0KCQkJCQkJCQkJCQkJCW1lLlByb3Nlc1Bvc3RpbmdfUGVuZ2FkYWFuX1NpbmdsZSgwLGkpOw0KCQkJCQkJCQkJCQkJfQ0KCQkJCQkJCQkJCQl9ZWxzZXsNCgkJCQkJCQkJCQkJCW1lLlByb3Nlc1Bvc3RpbmdfUGVuZ2FkYWFuX1NpbmdsZSgwLDEpOw0KCQkJCQkJCQkJCQl9CQ0KCQkJCQkJCQkJCQkNCgkJCQkJCQkJCQl9DQoJCQkJCQkJCQl9DQoJCQkJCQkJCX1lbHNlew0KCQkJCQkJCQkJYWxlcnQocmVzcC5jb250ZW50LmVycik7DQoJCQkJCQkJCX0NCgkJCQkJCQl9DQoJCQkJCQl9DQoJCQkJCQkJDQoJCQkJCX0NCgkJCQkJCQkNCgkJCQl9ZWxzZXsNCgkJCQkJYWxlcnQocmVzcC5lcnIpOw0KCQkJCX0NCgkJICAJfSwNCgkJCWVycm9yOiBmdW5jdGlvbiAoeGhyLCBhamF4T3B0aW9ucywgdGhyb3duRXJyb3IpIHsNCgkJCQlkZWxFbGVtKGNvdmVyMSk7DQoJCQkJbWUuU2ltcGFuUG9zdGluZ19TaW5nbGUoKTsNCgkgICAgCX0NCgkJCX0pOwkNCgl9LA0KCQ0KCVByb3Nlc1Bvc3RpbmdfUGVuZ2FkYWFuX1NpbmdsZTogZnVuY3Rpb24odXJ1dGFuLCBKYWx1cj0xKXsNCgkJdmFyIG1lID0gdGhpczsJCQkNCgkJdmFyIGNvdmVyID0gdGhpcy5wcmVmaXgrJ19mb3JtY292ZXJfcG9zdGluZyc7DQoJCQ0KCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdoaWRkZW4nOw0KCQkNCgkJSWREZXQgPSAkKCIjaWRiYXJhbmdueWFfIit1cnV0YW4pLnZhbCgpOw0KCQlTdGF0SWREZXQgPSAkKCIjc3RhdF9wb3N0XyIrSWREZXQpLnZhbCgpOw0KCQkNCgkJaWYoU3RhdElkRGV0ID09ICIwIil7DQoJCQltZS5TZXRBamF4VGltZShKYWx1cik7DQoJCQlpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGVtYXN1a2FuX2Zvcm1jb3Zlcl9sb2FkIikpZGVsRWxlbSgicGVtYXN1a2FuX2Zvcm1jb3Zlcl9sb2FkIik7DQoJCQlpZihtZS5TdGF0dXNQb3N0aW5nID09IDEpew0KCQkJCW1lLk11bGFpUG9zdGluZ19QZW5nYWRhYW4oKTsNCgkJCQltZS5TZXRfUE9TVF9UcmFjayhKYWx1ciwgMSk7DQoJCQkJJC5hamF4KHsNCgkJCQkJdHlwZTonUE9TVCcsIA0KCQkJCQlkYXRhOiQoJyMnK3RoaXMucHJlZml4KydfZm9ybVBPU1RTaW5nbGUnKS5zZXJpYWxpemUoKSwNCgkJCQkJdXJsOiB0aGlzLnVybCsnJnRpcGU9UHJvc2VzUG9zdGluZ19QZW5nYWRhYW4mU0lOR0xFREFUQT0xJlRSQUNLPScrSmFsdXIrJyZJZFBlbkRldD0nK0lkRGV0KyImVG90YWxTdWRhaFBvc3Rpbmc9IittZS5KTUxfUE9TVElORywNCgkJCQkgIAlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQkJCXZhciByZXNwID0gZXZhbCgnKCcgKyBkYXRhICsgJyknKTsJCQkJCQ0KCQkJCQkJLy9kZWxFbGVtKGNvdmVyKTsJCQkJCQ0KCQkJCQkJbWUuU2V0X1BPU1RfVHJhY2soSmFsdXIsIDApOw0KCQkJCQkJaWYgKHJlc3AuZXJyID09Jycpew0KCQkJCQkJCW1lLlByb3Nlc1Bvc3RpbmdfUGVuZ2FkYWFuX0FmdGVyX1NpbmdsZSh1cnV0YW4sIHJlc3AuY29udGVudCk7DQoJCQkJCQkJbWUuTG9hZGluZ1Bvc3RpbmcocmVzcC5jb250ZW50KTsNCgkJCQkJCX1lbHNlew0KCQkJCQkJCW1lLlN0YXR1c1Bvc3RpbmcgPSAwOw0KCQkJCQkJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2F1dG8nOw0KCQkJCQkJCXNldFRpbWVvdXQoZnVuY3Rpb24gbXlGdW5jdGlvbigpIHsNCgkJCQkJCQkJaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBlbWFzdWthbl9mb3JtY292ZXJfbG9hZCIpKWRlbEVsZW0oInBlbWFzdWthbl9mb3JtY292ZXJfbG9hZCIpOw0KCQkJCQkJCQlpZihKYWx1ciA9PSAxICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwZW1hc3VrYW5fZm9ybWNvdmVyX1Bvc3RpbmdEZXRhaWxCYXJhbmciKSl7CQkNCgkJCQkJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQkJCQkJCXN0b3B3YXRjaC5TdG9wKCk7DQoJCQkJCQkJCQlkZWxFbGVtKCJwZW1hc3VrYW5fZm9ybWNvdmVyX1Bvc3RpbmdEZXRhaWxCYXJhbmciKTsJCQkJCQ0KCQkJCQkJCQkJbWUuUG9zdGluZ0RldGFpbEJhcmFuZygpOw0KCQkJCQkJCQl9DQoJCQkJCQkJfSwxMDAwKTsNCgkJCQkJCX0NCgkJCQkgIAl9LA0KCQkJCQllcnJvcjogZnVuY3Rpb24gKHhociwgYWpheE9wdGlvbnMsIHRocm93bkVycm9yKSB7DQoJCQkJICAgICAgICAvL2RlbEVsZW0oY292ZXIpOw0KCQkJCQkJbWUuUHJvc2VzUG9zdGluZ19QZW5nYWRhYW5fU2luZ2xlKHVydXRhbik7DQoJCQkJCQltZS5TZXRfUE9TVF9UcmFjayhKYWx1ciwgMCk7DQoJCQkgICAgCX0NCgkJCQl9KTsNCgkJCX1lbHNlew0KCQkJCW1lLkxvYWRpbmdQb3N0aW5nX0VuZF9TaW5nbGUoKTsNCgkJCX0NCgkJfQkJDQoJfSwNCgkNCglQcm9zZXNQb3N0aW5nX1BlbmdhZGFhbl9BZnRlcl9TaW5nbGU6IGZ1bmN0aW9uKHVydXRhbiwga29udGVuLCBKYWx1cil7DQoJCXZhciBtZT10aGlzOw0KCQlqbWxTZXRQT1NUID0gbWUuam1sU2V0UE9TVDsNCgkJbWUuSk1MX1BPU1RJTkcgPSBOdW1iZXIobWUuSk1MX1BPU1RJTkcpICsgTnVtYmVyKGtvbnRlbi5qbWxfcHJvc2VzKTsJDQoJCQkNCgkJbWUuZnVuY3Rpb25fcGVyc2VuYW4oa29udGVuLnBlcnNlbl9kZXQpOw0KCQkkKCIja2V0X3RvdF9qbWxfcG9zdCIpLmh0bWwoa29udGVuLmptbF9iYXJhbmdfZGV0KTsJCQ0KCQltZS5HZXRUaW1lUG9zdGluZyhKYWx1cik7CQ0KCQltZS5TZXRfRGV0YWlsRGF0YVBvc3RpbmcoKTsJCQ0KCQkJCQ0KCQlpZihrb250ZW4uc2VsZXNhaV9kZXQgPT0gMSl7DQoJCQlzdG9wd2F0Y2guU3RvcCgpOw0KCQkJY2xlYXJUaW1lb3V0KG1lLkJhbmRpbmdXYWt0dSk7DQoJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uIG15RnVuY3Rpb24oKSB7DQoJCQkJYWxlcnQoIkRhdGEgSW5pIEJlcmhhc2lsIGRpIFBvc3RpbmcgISIpOwkJCQkNCgkJCQltZS5DbG9zZV9Qb3N0aW5nRGV0YWlsQmFyYW5nKCk7DQoJCQkJbWUuTGloYXREYXRhX0dldERhdGFfRGV0YWlsKCk7CQ0KCQkJfSwxMDAwKTsJCQkJDQoJCX1lbHNlewkNCgkJCWlmKGtvbnRlbi5MYW5nc3VuZyA9PSAiMSIgfHwgbWUuSk1MX1BPU1RJTkcgPj0gam1sU2V0UE9TVCl7DQoJCQkJYWxlcnQoIkRhdGEgSW5pIEJlcmhhc2lsIGRpIFBvc3RpbmcgISIpOw0KCQkJCWlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwZW1hc3VrYW5fZm9ybWNvdmVyX2xvYWQiKSlkZWxFbGVtKCJwZW1hc3VrYW5fZm9ybWNvdmVyX2xvYWQiKTsNCgkJCQlzdG9wd2F0Y2guU3RvcCgpOw0KCQkJCWNsZWFyVGltZW91dChtZS5CYW5kaW5nV2FrdHUpOwkNCgkJCQltZS5TdGF0dXNQb3N0aW5nID0gMDsNCgkJCQltZS5Mb2FkaW5nUG9zdGluZ19FbmRfU2luZ2xlKCk7DQoJCQl9ZWxzZXsJCQkJDQoJCQkJbWUuUHJvc2VzUG9zdGluZ19QZW5nYWRhYW5fU2luZ2xlKHVydXRhbiwgSmFsdXIpOw0KCQkJfQ0KCQl9DQoJfSwNCgkNCglMb2FkaW5nUG9zdGluZ19FbmRfU2luZ2xlOiBmdW5jdGlvbigpew0KCQl2YXIgbWU9dGhpczsNCgkJaWYobWUuQ2VrX1BPU1RfVHJhY2soKSA9PSAwKXsNCgkJCWNsZWFyVGltZW91dChtZS5CYW5kaW5nV2FrdHUpOw0KCQkJaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobWUucHJlZml4KyJfZm9ybWNvdmVyX1Bvc3RpbmdEZXRhaWxCYXJhbmciKSlkZWxFbGVtKG1lLnByZWZpeCsiX2Zvcm1jb3Zlcl9Qb3N0aW5nRGV0YWlsQmFyYW5nIik7DQoJCQltZS5Qb3N0aW5nRGV0YWlsQmFyYW5nKCk7DQoJCX0JCQ0KCX0sDQoJDQoJSGFwdXNQb3N0aW5nX1BlbmdhZGFhbl9BZnRlcl9TaW5nbGU6IGZ1bmN0aW9uKHJlc3Apew0KCQl2YXIgbWU9dGhpczsNCgkJJCgiI2tldF90b3Rfam1sX3Bvc3QiKS5odG1sKHJlc3AuY29udGVudC5KdW1sYWhCYXJhbmcpOw0KCQltZS5mdW5jdGlvbl9wZXJzZW5hbihyZXNwLmNvbnRlbnQucGVyc2VuKTsNCgkJbWUuR2V0VGltZVBvc3RpbmcoMSwyKTsNCgkJbWUuU2V0X0RldGFpbERhdGFQb3N0aW5nKDIpOw0KCQlpZihyZXNwLmNvbnRlbnQuUHJvc2VzID09ICJORVhUIil7DQoJCQlpZihyZXNwLmNvbnRlbnQuSm1sUHJvc2VzKXsNCgkJCQltZS5CVExfUE9TVElORyArPSBwYXJzZUludChyZXNwLmNvbnRlbnQuSm1sUHJvc2VzKTsNCgkJCQlEYXRhUGVuZ2F0dXJhbi5TZXRfY2VrRGNJRF92YWwoIlN1ZGFoUG9zdGluZ19EYXRhIiwgcmVzcC5jb250ZW50Lkp1bWxhaEJhcmFuZyk7DQoJCQkJaWYocGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImptbF9icmdfbmV4dFBPU1QiKS52YWx1ZSkgPiBtZS5CVExfUE9TVElORyl7DQoJCQkJCW1lLkhhcHVzUG9zdGluZ19QZW5nYWRhYW5fU2luZ2xlKCk7DQoJCQkJfWVsc2V7DQoJCQkJCXN0b3B3YXRjaC5TdG9wKCk7DQoJCQkJCWNsZWFyVGltZW91dChtZS5CYW5kaW5nV2FrdHUpOw0KCQkJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uIG15RnVuY3Rpb24oKSB7DQoJCQkJCQlhbGVydCgiRGF0YSBJbmkgQmVyaGFzaWwgZGkgQmF0YWwgUG9zdGluZyAhIik7CQkJCQ0KCQkJCQkJbWUuQ2xvc2VfUG9zdGluZ0RldGFpbEJhcmFuZygpOw0KCQkJCQkJbWUuTGloYXREYXRhX0dldERhdGFfRGV0YWlsKCk7CQ0KCQkJCQl9LDEwMDApOwkJCQkJDQoJCQkJfQkJCQkJCQkNCgkJCX1lbHNlew0KCQkJCW1lLkhhcHVzUG9zdGluZ19QZW5nYWRhYW5fU2luZ2xlKCk7DQoJCQl9CQkJDQoJCQkJDQoJCX1lbHNlewkJCQkJCQkNCgkJCXNldFRpbWVvdXQoZnVuY3Rpb24gbXlGdW5jdGlvbigpIHsNCgkJCQlhbGVydCgiRGF0YSBJbmkgQmVyaGFzaWwgZGkgQmF0YWwgUG9zdGluZyAhIik7CQkJCQ0KCQkJCW1lLkNsb3NlX1Bvc3RpbmdEZXRhaWxCYXJhbmcoKTsNCgkJCQltZS5MaWhhdERhdGFfR2V0RGF0YV9EZXRhaWwoKTsJDQoJCQl9LDEwMDApOw0KCQkJbWUucmVmcmVzaExpc3QoKTsNCgkJCXN0b3B3YXRjaC5TdG9wKCk7DQoJCX0NCgl9LA0KCQ0KCUhhcHVzUG9zdGluZ19QZW5nYWRhYW5fU2luZ2xlOiBmdW5jdGlvbigpewkNCgkJdmFyIG1lPXRoaXM7CQkNCgkJaWYobWUuU3RhdHVzUG9zdGluZyA9PSAxKXsNCgkJCW1lLlNldEFqYXhUaW1lKDEpOw0KCQkJbWUuTXVsYWlQb3N0aW5nX1BlbmdhZGFhbigpOw0KCQkJbWUuTG9hZGluZ1Bvc3RpbmcoIiIpOw0KCQkJJC5hamF4KHsNCgkJCQl0eXBlOidQT1NUJywgDQoJCQkJZGF0YTokKCcjJyt0aGlzLnByZWZpeCsiX2Zvcm1QT1NUU2luZ2xlIikuc2VyaWFsaXplKCksDQoJCQkJdXJsOiB0aGlzLnVybCsnJnRpcGU9SGFwdXNQb3N0aW5nX1NpbmdsZSZCVExfSEFQVVNDRUs9JyttZS5CVExfUE9TVElORywNCgkJCQlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOw0KCQkJCQlpZihyZXNwLmVycj09Jycpew0KCQkJCQkJbWUuSGFwdXNQb3N0aW5nX1BlbmdhZGFhbl9BZnRlcl9TaW5nbGUocmVzcCk7CQkJCQkNCgkJCQkJfWVsc2V7DQoJCQkJCQlpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGVtYXN1a2FuX2Zvcm1jb3Zlcl9Qb3N0aW5nRGV0YWlsQmFyYW5nIikpewkJCQkJCQ0KCQkJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQkJCQlzdG9wd2F0Y2guU3RvcCgpOw0KCQkJCQkJCWRlbEVsZW0oInBlbWFzdWthbl9mb3JtY292ZXJfUG9zdGluZ0RldGFpbEJhcmFuZyIpOwkJCQkJDQoJCQkJCQkJbWUuUG9zdGluZ0RldGFpbEJhcmFuZygpOw0KCQkJCQkJfQ0KCQkJCQl9DQoJCQkJfSwNCgkJCQllcnJvcjogZnVuY3Rpb24gKHhociwgYWpheE9wdGlvbnMsIHRocm93bkVycm9yKSB7DQoJCQkJCW1lLkhhcHVzUG9zdGluZ19QZW5nYWRhYW5fU2luZ2xlKCk7DQoJCSAgICAJfQ0KCQkJfSk7CQ0KCQl9ZWxzZXsNCgkJCW1lLkxvYWRpbmdQb3N0aW5nX0VuZF9TaW5nbGUoKTsNCgkJfQ0KCX0sDQoNCglTaW5na3Jvbl9IYXJnYVBlbWJ1bGF0YW46IGZ1bmN0aW9uKE11bGFpPTApew0KCQl2YXIgbWU9IHRoaXM7CQ0KCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdoaWRkZW4nOw0KCQl2YXIgY292ZXIgPSB0aGlzLnByZWZpeCsnX2Zvcm1wb3N0aW5nJzsNCgkJYWRkQ292ZXJQYWdlMihjb3ZlciwxLHRydWUsZmFsc2UpOw0KCQkkLmFqYXgoew0KCQkJdHlwZTonUE9TVCcsIA0KCQkJZGF0YTokKCcjJyt0aGlzLnByZWZpeCsnX2Zvcm0nKS5zZXJpYWxpemUoKSwNCgkJCXVybDogdGhpcy51cmwrJyZ0aXBlPVNpbmdrcm9uX0hhcmdhUGVtYnVsYXRhbiZNdWxhaT0nK011bGFpLA0KCQkgIAlzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CQkNCgkJCQl2YXIgcmVzcCA9IGV2YWwoJygnICsgZGF0YSArICcpJyk7CQ0KCQkJCWRlbEVsZW0oY292ZXIpOwkNCgkJCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSdhdXRvJzsNCgkJCQlpZihyZXNwLmVycj09Jycpew0KCQkJCQltZS5TaW5na3Jvbl9IYXJnYVBlbWJ1bGF0YW4ocmVzcC5jb250ZW50Lk11bGFpKTsNCgkJCQl9ZWxzZXsNCgkJCQkJYWxlcnQocmVzcC5lcnIpOw0KCQkJCQltZS5sb2FkaW5nKCk7DQoJCQkJfQ0KCQkgIAl9LA0KCQkJZXJyb3I6IGZ1bmN0aW9uICh4aHIsIGFqYXhPcHRpb25zLCB0aHJvd25FcnJvcikgew0KCQkJCWFsZXJ0KCJHYWdhbCwgU2lsYWhrYW4gVWxhbmdpIExhZ2kiKTsNCgkgICAgCX0JCQkNCgkJfSk7CQ0KCX0sDQoNCglEYXRhTGFuanV0YW46ZnVuY3Rpb24oSWRUZXJpbWEsIEtvbG9tS2UsIE11bGFpPTUwKXsNCgkJdmFyIG1lID0gdGhpczsNCgkJdmFyIGNvdmVyID0gdGhpcy5wcmVmaXgrJ19mb3JtY292ZXJfRGF0YUxhbmp1dGFuJzsNCgkJZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdz0naGlkZGVuJzsNCgkJYWRkQ292ZXJQYWdlMihjb3ZlciwxLHRydWUsZmFsc2UpOw0KCQkkLmFqYXgoew0KCQkJdHlwZTonUE9TVCcsIA0KCQkJZGF0YTokKCcjJyt0aGlzLmZvcm1OYW1lKS5zZXJpYWxpemUoKSwNCgkJICAJdXJsOiB0aGlzLnVybCsnJnRpcGU9RGF0YUxhbmp1dGFuJywNCgkJICAJc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewkJDQoJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOw0KCQkJCWRlbEVsZW0oY292ZXIpOw0KCQkJCWRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9J2F1dG8nOw0KCQkJCWlmKHJlc3AuZXJyID09ICcnKXsNCgkJCQkJdmFyIHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm15VGFibGUiKTsNCgkJCQkgICAgdmFyIHJvdyA9IHRhYmxlLmluc2VydFJvdygxKTsNCgkJCQkgICAgdmFyIGNlbGwxID0gcm93Lmluc2VydENlbGwoMCk7DQoJCQkJICAgIHZhciBjZWxsMiA9IHJvdy5pbnNlcnRDZWxsKDEpOw0KCQkJCSAgICBjZWxsMS5pbm5lckhUTUwgPSAiTkVXIENFTEwxIjsNCgkJCQkgICAgY2VsbDIuaW5uZXJIVE1MID0gIk5FVyBDRUxMMiI7DQoJCQkJfWVsc2V7DQoJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQl9CQ0KCQkgIAl9DQoJCX0pOw0KCX0sDQoNCglQcmludEV4Y2VsOmZ1bmN0aW9uKCl7DQoJCXZhciBtZT10aGlzOw0KCQkNCgkJdmFyIGNvdmVyID0gdGhpcy5wcmVmaXgrJ19mb3JtY292ZXJfUHJpbnRMYXBvcmFuJzsNCgkJZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdz0naGlkZGVuJzsNCgkJYWRkQ292ZXJQYWdlMihjb3ZlciwyLHRydWUsZmFsc2UpOwkJCQ0KCQkkLmFqYXgoew0KCQkJdHlwZTonUE9TVCcsIA0KCQkJZGF0YTokKCcjJyt0aGlzLnByZWZpeCsnX2Zvcm0nKS5zZXJpYWxpemUoKSwNCgkJCXVybDogdGhpcy51cmwrJyZ0aXBlPVByaW50TGFwb3Jhbl9DZWsmRGF0YVByaW50PUV4Y2VsJywNCgkJICAJc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewkJDQoJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOwkNCgkJCQlkZWxFbGVtKGNvdmVyKTsJCQ0KCQkJCWlmKHJlc3AuZXJyPT0nJyl7DQoJCQkJCW1lLlByaW50RXhjZWxfR2V0KCk7DQoJCQkJfWVsc2V7CQkJCQkNCgkJCQkJYWxlcnQocmVzcC5lcnIpOw0KCQkJCX0NCgkJICAJfSwNCgkJCWVycm9yOiBmdW5jdGlvbiAoeGhyLCBhamF4T3B0aW9ucywgdGhyb3duRXJyb3IpIHsNCgkJCQlkZWxFbGVtKGNvdmVyKTsNCgkJCQltZS5QcmludExhcG9yYW4oKTsNCgkgICAgCX0NCgkJfSk7DQoJfSwNCg0KCVByaW50RXhjZWxfR2V0OmZ1bmN0aW9uKCl7DQoJCXZhciBtZT10aGlzOw0KCQkNCgkJdmFyIGNvdmVyID0gdGhpcy5wcmVmaXgrJ19mb3JtY292ZXJfUHJpbnRMYXBvcmFuJzsNCgkJZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdz0naGlkZGVuJzsNCgkJYWRkQ292ZXJQYWdlMihjb3ZlciwyLHRydWUsZmFsc2UpOwkJCQ0KCQkkLmFqYXgoew0KCQkJdHlwZTonUE9TVCcsIA0KCQkJZGF0YTokKCcjJyt0aGlzLnByZWZpeCsnX2Zvcm0nKS5zZXJpYWxpemUoKSwNCgkJCXVybDogJ3BhZ2VzLnBocD9QZz1wZW1hc3VrYW5fZXhjZWwmdGlwZT1MYXBvcmFuJywNCgkJICAJc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewkJDQoJCQkJdmFyIHJlc3AgPSBldmFsKCcoJyArIGRhdGEgKyAnKScpOwkNCgkJCQlkZWxFbGVtKGNvdmVyKTsJCQ0KCQkJCWlmKHJlc3AuZXJyPT0nJyl7DQoJCQkJCSQoIiNUdWtfQSIpLmh0bWwoIjxhIGhyZWY9JyIrcmVzcC5jb250ZW50LlBBVEgrIicgZG93bmxvYWQ9JyIrcmVzcC5jb250ZW50Lk5hbWUrIicgaWQ9J0Rvd25sb2FkRXhjZWwnPjwvYT4iKTsNCgkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0Rvd25sb2FkRXhjZWwnKS5jbGljaygpOw0KCQkJCX1lbHNlewkJCQkJDQoJCQkJCWFsZXJ0KHJlc3AuZXJyKTsNCgkJCQl9DQoJCSAgCX0sDQoJCQllcnJvcjogZnVuY3Rpb24gKHhociwgYWpheE9wdGlvbnMsIHRocm93bkVycm9yKSB7DQoJCQkJZGVsRWxlbShjb3Zlcik7DQoJCQkJYWxlcnQoIkdhZ2FsIE1lbWJ1YXQgRXhjZWwiKTsNCgkgICAgCX0NCgkJfSk7DQoJfSwNCgkNCn0pOw0K",
    "size": "62124"
}