{
    "namaFile": "pages\/admin\/menu\/assets\/js\/libs\/multi-select\/jquery.multi-select.js",
    "lastUpdate": "2018-03-22+14:23:43.80",
    "contentFile": "LyoKKiBNdWx0aVNlbGVjdCB2MC45LjExCiogQ29weXJpZ2h0IChjKSAyMDEyIExvdWlzIEN1bnkKKgoqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlLiBJdCBjb21lcyB3aXRob3V0IGFueSB3YXJyYW50eSwgdG8KKiB0aGUgZXh0ZW50IHBlcm1pdHRlZCBieSBhcHBsaWNhYmxlIGxhdy4gWW91IGNhbiByZWRpc3RyaWJ1dGUgaXQKKiBhbmQvb3IgbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRG8gV2hhdCBUaGUgRnVjayBZb3UgV2FudAoqIFRvIFB1YmxpYyBMaWNlbnNlLCBWZXJzaW9uIDIsIGFzIHB1Ymxpc2hlZCBieSBTYW0gSG9jZXZhci4gU2VlCiogaHR0cDovL3NhbS56b3kub3JnL3d0ZnBsL0NPUFlJTkcgZm9yIG1vcmUgZGV0YWlscy4KKi8KCiFmdW5jdGlvbiAoJCkgewoKICAidXNlIHN0cmljdCI7CgoKIC8qIE1VTFRJU0VMRUNUIENMQVNTIERFRklOSVRJT04KICAqID09PT09PT09PT09PT09PT09PT09PT0gKi8KCiAgdmFyIE11bHRpU2VsZWN0ID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHsKICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CiAgICB0aGlzLiRlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIHRoaXMuJGNvbnRhaW5lciA9ICQoJzxkaXYvPicsIHsgJ2NsYXNzJzogIm1zLWNvbnRhaW5lciIgfSk7CiAgICB0aGlzLiRzZWxlY3RhYmxlQ29udGFpbmVyID0gJCgnPGRpdi8+JywgeyAnY2xhc3MnOiAnbXMtc2VsZWN0YWJsZScgfSk7CiAgICB0aGlzLiRzZWxlY3Rpb25Db250YWluZXIgPSAkKCc8ZGl2Lz4nLCB7ICdjbGFzcyc6ICdtcy1zZWxlY3Rpb24nIH0pOwogICAgdGhpcy4kc2VsZWN0YWJsZVVsID0gJCgnPHVsLz4nLCB7ICdjbGFzcyc6ICJtcy1saXN0IiwgJ3RhYmluZGV4JyA6ICctMScgfSk7CiAgICB0aGlzLiRzZWxlY3Rpb25VbCA9ICQoJzx1bC8+JywgeyAnY2xhc3MnOiAibXMtbGlzdCIsICd0YWJpbmRleCcgOiAnLTEnIH0pOwogICAgdGhpcy5zY3JvbGxUbyA9IDA7CiAgICB0aGlzLmVsZW1zU2VsZWN0b3IgPSAnbGk6dmlzaWJsZTpub3QoLm1zLW9wdGdyb3VwLWxhYmVsLC5tcy1vcHRncm91cC1jb250YWluZXIsLicrb3B0aW9ucy5kaXNhYmxlZENsYXNzKycpJzsKICB9OwoKICBNdWx0aVNlbGVjdC5wcm90b3R5cGUgPSB7CiAgICBjb25zdHJ1Y3RvcjogTXVsdGlTZWxlY3QsCgogICAgaW5pdDogZnVuY3Rpb24oKXsKICAgICAgdmFyIHRoYXQgPSB0aGlzLAogICAgICAgICAgbXMgPSB0aGlzLiRlbGVtZW50OwoKICAgICAgaWYgKG1zLm5leHQoJy5tcy1jb250YWluZXInKS5sZW5ndGggPT09IDApewogICAgICAgIG1zLmNzcyh7IHBvc2l0aW9uOiAnYWJzb2x1dGUnLCBsZWZ0OiAnLTk5OTlweCcgfSk7CiAgICAgICAgbXMuYXR0cignaWQnLCBtcy5hdHRyKCdpZCcpID8gbXMuYXR0cignaWQnKSA6IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpKjEwMDApKydtdWx0aXNlbGVjdCcpOwogICAgICAgIHRoaXMuJGNvbnRhaW5lci5hdHRyKCdpZCcsICdtcy0nK21zLmF0dHIoJ2lkJykpOwogICAgICAgIHRoaXMuJGNvbnRhaW5lci5hZGRDbGFzcyh0aGF0Lm9wdGlvbnMuY3NzQ2xhc3MpOwogICAgICAgIG1zLmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24oKXsKICAgICAgICAgIHRoYXQuZ2VuZXJhdGVMaXNGcm9tT3B0aW9uKHRoaXMpOwogICAgICAgIH0pOwoKICAgICAgICB0aGlzLiRzZWxlY3Rpb25VbC5maW5kKCcubXMtb3B0Z3JvdXAtbGFiZWwnKS5oaWRlKCk7CgogICAgICAgIGlmICh0aGF0Lm9wdGlvbnMuc2VsZWN0YWJsZUhlYWRlcil7CiAgICAgICAgICB0aGF0LiRzZWxlY3RhYmxlQ29udGFpbmVyLmFwcGVuZCh0aGF0Lm9wdGlvbnMuc2VsZWN0YWJsZUhlYWRlcik7CiAgICAgICAgfQogICAgICAgIHRoYXQuJHNlbGVjdGFibGVDb250YWluZXIuYXBwZW5kKHRoYXQuJHNlbGVjdGFibGVVbCk7CiAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5zZWxlY3RhYmxlRm9vdGVyKXsKICAgICAgICAgIHRoYXQuJHNlbGVjdGFibGVDb250YWluZXIuYXBwZW5kKHRoYXQub3B0aW9ucy5zZWxlY3RhYmxlRm9vdGVyKTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGF0Lm9wdGlvbnMuc2VsZWN0aW9uSGVhZGVyKXsKICAgICAgICAgIHRoYXQuJHNlbGVjdGlvbkNvbnRhaW5lci5hcHBlbmQodGhhdC5vcHRpb25zLnNlbGVjdGlvbkhlYWRlcik7CiAgICAgICAgfQogICAgICAgIHRoYXQuJHNlbGVjdGlvbkNvbnRhaW5lci5hcHBlbmQodGhhdC4kc2VsZWN0aW9uVWwpOwogICAgICAgIGlmICh0aGF0Lm9wdGlvbnMuc2VsZWN0aW9uRm9vdGVyKXsKICAgICAgICAgIHRoYXQuJHNlbGVjdGlvbkNvbnRhaW5lci5hcHBlbmQodGhhdC5vcHRpb25zLnNlbGVjdGlvbkZvb3Rlcik7CiAgICAgICAgfQoKICAgICAgICB0aGF0LiRjb250YWluZXIuYXBwZW5kKHRoYXQuJHNlbGVjdGFibGVDb250YWluZXIpOwogICAgICAgIHRoYXQuJGNvbnRhaW5lci5hcHBlbmQodGhhdC4kc2VsZWN0aW9uQ29udGFpbmVyKTsKICAgICAgICBtcy5hZnRlcih0aGF0LiRjb250YWluZXIpOwoKICAgICAgICB0aGF0LmFjdGl2ZU1vdXNlKHRoYXQuJHNlbGVjdGFibGVVbCk7CiAgICAgICAgdGhhdC5hY3RpdmVLZXlib2FyZCh0aGF0LiRzZWxlY3RhYmxlVWwpOwoKICAgICAgICB2YXIgYWN0aW9uID0gdGhhdC5vcHRpb25zLmRibENsaWNrID8gJ2RibGNsaWNrJyA6ICdjbGljayc7CgogICAgICAgIHRoYXQuJHNlbGVjdGFibGVVbC5vbihhY3Rpb24sICcubXMtZWxlbS1zZWxlY3RhYmxlJywgZnVuY3Rpb24oKXsKICAgICAgICAgIHRoYXQuc2VsZWN0KCQodGhpcykuZGF0YSgnbXMtdmFsdWUnKSk7CiAgICAgICAgfSk7CiAgICAgICAgdGhhdC4kc2VsZWN0aW9uVWwub24oYWN0aW9uLCAnLm1zLWVsZW0tc2VsZWN0aW9uJywgZnVuY3Rpb24oKXsKICAgICAgICAgIHRoYXQuZGVzZWxlY3QoJCh0aGlzKS5kYXRhKCdtcy12YWx1ZScpKTsKICAgICAgICB9KTsKCiAgICAgICAgdGhhdC5hY3RpdmVNb3VzZSh0aGF0LiRzZWxlY3Rpb25VbCk7CiAgICAgICAgdGhhdC5hY3RpdmVLZXlib2FyZCh0aGF0LiRzZWxlY3Rpb25VbCk7CgogICAgICAgIG1zLm9uKCdmb2N1cycsIGZ1bmN0aW9uKCl7CiAgICAgICAgICB0aGF0LiRzZWxlY3RhYmxlVWwuZm9jdXMoKTsKICAgICAgICB9KQogICAgICB9CgogICAgICB2YXIgc2VsZWN0ZWRWYWx1ZXMgPSBtcy5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS5tYXAoZnVuY3Rpb24oKXsgcmV0dXJuICQodGhpcykudmFsKCk7IH0pLmdldCgpOwogICAgICB0aGF0LnNlbGVjdChzZWxlY3RlZFZhbHVlcywgJ2luaXQnKTsKCiAgICAgIGlmICh0eXBlb2YgdGhhdC5vcHRpb25zLmFmdGVySW5pdCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHRoYXQub3B0aW9ucy5hZnRlckluaXQuY2FsbCh0aGlzLCB0aGlzLiRjb250YWluZXIpOwogICAgICB9CiAgICB9LAoKICAgICdnZW5lcmF0ZUxpc0Zyb21PcHRpb24nIDogZnVuY3Rpb24ob3B0aW9uLCBpbmRleCwgJGNvbnRhaW5lcil7CiAgICAgIHZhciB0aGF0ID0gdGhpcywKICAgICAgICAgIG1zID0gdGhhdC4kZWxlbWVudCwKICAgICAgICAgIGF0dHJpYnV0ZXMgPSAiIiwKICAgICAgICAgICRvcHRpb24gPSAkKG9wdGlvbik7CgogICAgICBmb3IgKHZhciBjcHQgPSAwOyBjcHQgPCBvcHRpb24uYXR0cmlidXRlcy5sZW5ndGg7IGNwdCsrKXsKICAgICAgICB2YXIgYXR0ciA9IG9wdGlvbi5hdHRyaWJ1dGVzW2NwdF07CgogICAgICAgIGlmKGF0dHIubmFtZSAhPT0gJ3ZhbHVlJyAmJiBhdHRyLm5hbWUgIT09ICdkaXNhYmxlZCcpewogICAgICAgICAgYXR0cmlidXRlcyArPSBhdHRyLm5hbWUrJz0iJythdHRyLnZhbHVlKyciICc7CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciBzZWxlY3RhYmxlTGkgPSAkKCc8bGkgJythdHRyaWJ1dGVzKyc+PHNwYW4+Jyt0aGF0LmVzY2FwZUhUTUwoJG9wdGlvbi50ZXh0KCkpKyc8L3NwYW4+PC9saT4nKSwKICAgICAgICAgIHNlbGVjdGVkTGkgPSBzZWxlY3RhYmxlTGkuY2xvbmUoKSwKICAgICAgICAgIHZhbHVlID0gJG9wdGlvbi52YWwoKSwKICAgICAgICAgIGVsZW1lbnRJZCA9IHRoYXQuc2FuaXRpemUodmFsdWUpOwoKICAgICAgc2VsZWN0YWJsZUxpCiAgICAgICAgLmRhdGEoJ21zLXZhbHVlJywgdmFsdWUpCiAgICAgICAgLmFkZENsYXNzKCdtcy1lbGVtLXNlbGVjdGFibGUnKQogICAgICAgIC5hdHRyKCdpZCcsIGVsZW1lbnRJZCsnLXNlbGVjdGFibGUnKTsKCiAgICAgIHNlbGVjdGVkTGkKICAgICAgICAuZGF0YSgnbXMtdmFsdWUnLCB2YWx1ZSkKICAgICAgICAuYWRkQ2xhc3MoJ21zLWVsZW0tc2VsZWN0aW9uJykKICAgICAgICAuYXR0cignaWQnLCBlbGVtZW50SWQrJy1zZWxlY3Rpb24nKQogICAgICAgIC5oaWRlKCk7CgogICAgICBpZiAoJG9wdGlvbi5wcm9wKCdkaXNhYmxlZCcpIHx8IG1zLnByb3AoJ2Rpc2FibGVkJykpewogICAgICAgIHNlbGVjdGVkTGkuYWRkQ2xhc3ModGhhdC5vcHRpb25zLmRpc2FibGVkQ2xhc3MpOwogICAgICAgIHNlbGVjdGFibGVMaS5hZGRDbGFzcyh0aGF0Lm9wdGlvbnMuZGlzYWJsZWRDbGFzcyk7CiAgICAgIH0KCiAgICAgIHZhciAkb3B0Z3JvdXAgPSAkb3B0aW9uLnBhcmVudCgnb3B0Z3JvdXAnKTsKCiAgICAgIGlmICgkb3B0Z3JvdXAubGVuZ3RoID4gMCl7CiAgICAgICAgdmFyIG9wdGdyb3VwTGFiZWwgPSAkb3B0Z3JvdXAuYXR0cignbGFiZWwnKSwKICAgICAgICAgICAgb3B0Z3JvdXBJZCA9IHRoYXQuc2FuaXRpemUob3B0Z3JvdXBMYWJlbCksCiAgICAgICAgICAgICRzZWxlY3RhYmxlT3B0Z3JvdXAgPSB0aGF0LiRzZWxlY3RhYmxlVWwuZmluZCgnI29wdGdyb3VwLXNlbGVjdGFibGUtJytvcHRncm91cElkKSwKICAgICAgICAgICAgJHNlbGVjdGlvbk9wdGdyb3VwID0gdGhhdC4kc2VsZWN0aW9uVWwuZmluZCgnI29wdGdyb3VwLXNlbGVjdGlvbi0nK29wdGdyb3VwSWQpOwoKICAgICAgICBpZiAoJHNlbGVjdGFibGVPcHRncm91cC5sZW5ndGggPT09IDApewogICAgICAgICAgdmFyIG9wdGdyb3VwQ29udGFpbmVyVHBsID0gJzxsaSBjbGFzcz0ibXMtb3B0Z3JvdXAtY29udGFpbmVyIj48L2xpPicsCiAgICAgICAgICAgICAgb3B0Z3JvdXBUcGwgPSAnPHVsIGNsYXNzPSJtcy1vcHRncm91cCI+PGxpIGNsYXNzPSJtcy1vcHRncm91cC1sYWJlbCI+PHNwYW4+JytvcHRncm91cExhYmVsKyc8L3NwYW4+PC9saT48L3VsPic7CgogICAgICAgICAgJHNlbGVjdGFibGVPcHRncm91cCA9ICQob3B0Z3JvdXBDb250YWluZXJUcGwpOwogICAgICAgICAgJHNlbGVjdGlvbk9wdGdyb3VwID0gJChvcHRncm91cENvbnRhaW5lclRwbCk7CiAgICAgICAgICAkc2VsZWN0YWJsZU9wdGdyb3VwLmF0dHIoJ2lkJywgJ29wdGdyb3VwLXNlbGVjdGFibGUtJytvcHRncm91cElkKTsKICAgICAgICAgICRzZWxlY3Rpb25PcHRncm91cC5hdHRyKCdpZCcsICdvcHRncm91cC1zZWxlY3Rpb24tJytvcHRncm91cElkKTsKICAgICAgICAgICRzZWxlY3RhYmxlT3B0Z3JvdXAuYXBwZW5kKCQob3B0Z3JvdXBUcGwpKTsKICAgICAgICAgICRzZWxlY3Rpb25PcHRncm91cC5hcHBlbmQoJChvcHRncm91cFRwbCkpOwogICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5zZWxlY3RhYmxlT3B0Z3JvdXApewogICAgICAgICAgICAkc2VsZWN0YWJsZU9wdGdyb3VwLmZpbmQoJy5tcy1vcHRncm91cC1sYWJlbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgdmFyIHZhbHVlcyA9ICRvcHRncm91cC5jaGlsZHJlbignOm5vdCg6c2VsZWN0ZWQsIDpkaXNhYmxlZCknKS5tYXAoZnVuY3Rpb24oKXsgcmV0dXJuICQodGhpcykudmFsKCkgfSkuZ2V0KCk7CiAgICAgICAgICAgICAgdGhhdC5zZWxlY3QodmFsdWVzKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICRzZWxlY3Rpb25PcHRncm91cC5maW5kKCcubXMtb3B0Z3JvdXAtbGFiZWwnKS5vbignY2xpY2snLCBmdW5jdGlvbigpewogICAgICAgICAgICAgIHZhciB2YWx1ZXMgPSAkb3B0Z3JvdXAuY2hpbGRyZW4oJzpzZWxlY3RlZDpub3QoOmRpc2FibGVkKScpLm1hcChmdW5jdGlvbigpeyByZXR1cm4gJCh0aGlzKS52YWwoKSB9KS5nZXQoKTsKICAgICAgICAgICAgICB0aGF0LmRlc2VsZWN0KHZhbHVlcyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgdGhhdC4kc2VsZWN0YWJsZVVsLmFwcGVuZCgkc2VsZWN0YWJsZU9wdGdyb3VwKTsKICAgICAgICAgIHRoYXQuJHNlbGVjdGlvblVsLmFwcGVuZCgkc2VsZWN0aW9uT3B0Z3JvdXApOwogICAgICAgIH0KICAgICAgICBpbmRleCA9IGluZGV4ID09IHVuZGVmaW5lZCA\/ICRzZWxlY3RhYmxlT3B0Z3JvdXAuZmluZCgndWwnKS5jaGlsZHJlbigpLmxlbmd0aCA6IGluZGV4ICsgMTsKICAgICAgICBzZWxlY3RhYmxlTGkuaW5zZXJ0QXQoaW5kZXgsICRzZWxlY3RhYmxlT3B0Z3JvdXAuY2hpbGRyZW4oKSk7CiAgICAgICAgc2VsZWN0ZWRMaS5pbnNlcnRBdChpbmRleCwgJHNlbGVjdGlvbk9wdGdyb3VwLmNoaWxkcmVuKCkpOwogICAgICB9IGVsc2UgewogICAgICAgIGluZGV4ID0gaW5kZXggPT0gdW5kZWZpbmVkID8gdGhhdC4kc2VsZWN0YWJsZVVsLmNoaWxkcmVuKCkubGVuZ3RoIDogaW5kZXg7CgogICAgICAgIHNlbGVjdGFibGVMaS5pbnNlcnRBdChpbmRleCwgdGhhdC4kc2VsZWN0YWJsZVVsKTsKICAgICAgICBzZWxlY3RlZExpLmluc2VydEF0KGluZGV4LCB0aGF0LiRzZWxlY3Rpb25VbCk7CiAgICAgIH0KICAgIH0sCgogICAgJ2FkZE9wdGlvbicgOiBmdW5jdGlvbihvcHRpb25zKXsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwoKICAgICAgaWYgKG9wdGlvbnMudmFsdWUpIG9wdGlvbnMgPSBbb3B0aW9uc107CiAgICAgICQuZWFjaChvcHRpb25zLCBmdW5jdGlvbihpbmRleCwgb3B0aW9uKXsKICAgICAgICBpZiAob3B0aW9uLnZhbHVlICYmIHRoYXQuJGVsZW1lbnQuZmluZCgib3B0aW9uW3ZhbHVlPSciK29wdGlvbi52YWx1ZSsiJ10iKS5sZW5ndGggPT09IDApewogICAgICAgICAgdmFyICRvcHRpb24gPSAkKCc8b3B0aW9uIHZhbHVlPSInK29wdGlvbi52YWx1ZSsnIj4nK29wdGlvbi50ZXh0Kyc8L29wdGlvbj4nKSwKICAgICAgICAgICAgICBpbmRleCA9IHBhcnNlSW50KCh0eXBlb2Ygb3B0aW9uLmluZGV4ID09PSAndW5kZWZpbmVkJyA\/IHRoYXQuJGVsZW1lbnQuY2hpbGRyZW4oKS5sZW5ndGggOiBvcHRpb24uaW5kZXgpKSwKICAgICAgICAgICAgICAkY29udGFpbmVyID0gb3B0aW9uLm5lc3RlZCA9PSB1bmRlZmluZWQgPyB0aGF0LiRlbGVtZW50IDogJCgib3B0Z3JvdXBbbGFiZWw9JyIrb3B0aW9uLm5lc3RlZCsiJ10iKQoKICAgICAgICAgICRvcHRpb24uaW5zZXJ0QXQoaW5kZXgsICRjb250YWluZXIpOwogICAgICAgICAgdGhhdC5nZW5lcmF0ZUxpc0Zyb21PcHRpb24oJG9wdGlvbi5nZXQoMCksIGluZGV4LCBvcHRpb24ubmVzdGVkKTsKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgICdlc2NhcGVIVE1MJyA6IGZ1bmN0aW9uKHRleHQpewogICAgICByZXR1cm4gJCgiPGRpdj4iKS50ZXh0KHRleHQpLmh0bWwoKTsKICAgIH0sCgogICAgJ2FjdGl2ZUtleWJvYXJkJyA6IGZ1bmN0aW9uKCRsaXN0KXsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwoKICAgICAgJGxpc3Qub24oJ2ZvY3VzJywgZnVuY3Rpb24oKXsKICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdtcy1mb2N1cycpOwogICAgICB9KQogICAgICAub24oJ2JsdXInLCBmdW5jdGlvbigpewogICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ21zLWZvY3VzJyk7CiAgICAgIH0pCiAgICAgIC5vbigna2V5ZG93bicsIGZ1bmN0aW9uKGUpewogICAgICAgIHN3aXRjaCAoZS53aGljaCkgewogICAgICAgICAgY2FzZSA0MDoKICAgICAgICAgIGNhc2UgMzg6CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgdGhhdC5tb3ZlSGlnaGxpZ2h0KCQodGhpcyksIChlLndoaWNoID09PSAzOCkgPyAtMSA6IDEpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICBjYXNlIDM3OgogICAgICAgICAgY2FzZSAzOToKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICB0aGF0LnN3aXRjaExpc3QoJGxpc3QpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGlmKHRoYXQuJGVsZW1lbnQuaXMoJ1t0YWJpbmRleF0nKSl7CiAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgIHZhciB0YWJpbmRleCA9IHBhcnNlSW50KHRoYXQuJGVsZW1lbnQuYXR0cigndGFiaW5kZXgnKSwgMTApOwogICAgICAgICAgICAgIHRhYmluZGV4ID0gKGUuc2hpZnRLZXkpID8gdGFiaW5kZXgtMSA6IHRhYmluZGV4KzE7CiAgICAgICAgICAgICAgJCgnW3RhYmluZGV4PSInKyh0YWJpbmRleCkrJyJdJykuZm9jdXMoKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgIGlmKGUuc2hpZnRLZXkpewogICAgICAgICAgICAgICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKCdmb2N1cycpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZigkLmluQXJyYXkoZS53aGljaCwgdGhhdC5vcHRpb25zLmtleVNlbGVjdCkgPiAtMSl7CiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgdGhhdC5zZWxlY3RIaWdobGlnaHRlZCgkbGlzdCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgJ21vdmVIaWdobGlnaHQnOiBmdW5jdGlvbigkbGlzdCwgZGlyZWN0aW9uKXsKICAgICAgdmFyICRlbGVtcyA9ICRsaXN0LmZpbmQodGhpcy5lbGVtc1NlbGVjdG9yKSwKICAgICAgICAgICRjdXJyRWxlbSA9ICRlbGVtcy5maWx0ZXIoJy5tcy1ob3ZlcicpLAogICAgICAgICAgJG5leHRFbGVtID0gbnVsbCwKICAgICAgICAgIGVsZW1IZWlnaHQgPSAkZWxlbXMuZmlyc3QoKS5vdXRlckhlaWdodCgpLAogICAgICAgICAgY29udGFpbmVySGVpZ2h0ID0gJGxpc3QuaGVpZ2h0KCksCiAgICAgICAgICBjb250YWluZXJTZWxlY3RvciA9ICcjJyt0aGlzLiRjb250YWluZXIucHJvcCgnaWQnKTsKCiAgICAgICRlbGVtcy5yZW1vdmVDbGFzcygnbXMtaG92ZXInKTsKICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gMSl7IC8vIERPV04KCiAgICAgICAgJG5leHRFbGVtID0gJGN1cnJFbGVtLm5leHRBbGwodGhpcy5lbGVtc1NlbGVjdG9yKS5maXJzdCgpOwogICAgICAgIGlmICgkbmV4dEVsZW0ubGVuZ3RoID09PSAwKXsKICAgICAgICAgIHZhciAkb3B0Z3JvdXBVbCA9ICRjdXJyRWxlbS5wYXJlbnQoKTsKCiAgICAgICAgICBpZiAoJG9wdGdyb3VwVWwuaGFzQ2xhc3MoJ21zLW9wdGdyb3VwJykpewogICAgICAgICAgICB2YXIgJG9wdGdyb3VwTGkgPSAkb3B0Z3JvdXBVbC5wYXJlbnQoKSwKICAgICAgICAgICAgICAgICRuZXh0T3B0Z3JvdXBMaSA9ICRvcHRncm91cExpLm5leHQoJzp2aXNpYmxlJyk7CgogICAgICAgICAgICBpZiAoJG5leHRPcHRncm91cExpLmxlbmd0aCA+IDApewogICAgICAgICAgICAgICRuZXh0RWxlbSA9ICRuZXh0T3B0Z3JvdXBMaS5maW5kKHRoaXMuZWxlbXNTZWxlY3RvcikuZmlyc3QoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAkbmV4dEVsZW0gPSAkZWxlbXMuZmlyc3QoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJG5leHRFbGVtID0gJGVsZW1zLmZpcnN0KCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gLTEpeyAvLyBVUAoKICAgICAgICAkbmV4dEVsZW0gPSAkY3VyckVsZW0ucHJldkFsbCh0aGlzLmVsZW1zU2VsZWN0b3IpLmZpcnN0KCk7CiAgICAgICAgaWYgKCRuZXh0RWxlbS5sZW5ndGggPT09IDApewogICAgICAgICAgdmFyICRvcHRncm91cFVsID0gJGN1cnJFbGVtLnBhcmVudCgpOwoKICAgICAgICAgIGlmICgkb3B0Z3JvdXBVbC5oYXNDbGFzcygnbXMtb3B0Z3JvdXAnKSl7CiAgICAgICAgICAgIHZhciAkb3B0Z3JvdXBMaSA9ICRvcHRncm91cFVsLnBhcmVudCgpLAogICAgICAgICAgICAgICAgJHByZXZPcHRncm91cExpID0gJG9wdGdyb3VwTGkucHJldignOnZpc2libGUnKTsKCiAgICAgICAgICAgIGlmICgkcHJldk9wdGdyb3VwTGkubGVuZ3RoID4gMCl7CiAgICAgICAgICAgICAgJG5leHRFbGVtID0gJHByZXZPcHRncm91cExpLmZpbmQodGhpcy5lbGVtc1NlbGVjdG9yKS5sYXN0KCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgJG5leHRFbGVtID0gJGVsZW1zLmxhc3QoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJG5leHRFbGVtID0gJGVsZW1zLmxhc3QoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKCRuZXh0RWxlbS5sZW5ndGggPiAwKXsKICAgICAgICAkbmV4dEVsZW0uYWRkQ2xhc3MoJ21zLWhvdmVyJyk7CiAgICAgICAgdmFyIHNjcm9sbFRvID0gJGxpc3Quc2Nyb2xsVG9wKCkgKyAkbmV4dEVsZW0ucG9zaXRpb24oKS50b3AgLSAKICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJIZWlnaHQgLyAyICsgZWxlbUhlaWdodCAvIDI7CgogICAgICAgICRsaXN0LnNjcm9sbFRvcChzY3JvbGxUbyk7CiAgICAgIH0KICAgIH0sCgogICAgJ3NlbGVjdEhpZ2hsaWdodGVkJyA6IGZ1bmN0aW9uKCRsaXN0KXsKICAgICAgdmFyICRlbGVtcyA9ICRsaXN0LmZpbmQodGhpcy5lbGVtc1NlbGVjdG9yKSwKICAgICAgICAgICRoaWdobGlnaHRlZEVsZW0gPSAkZWxlbXMuZmlsdGVyKCcubXMtaG92ZXInKS5maXJzdCgpOwoKICAgICAgaWYgKCRoaWdobGlnaHRlZEVsZW0ubGVuZ3RoID4gMCl7CiAgICAgICAgaWYgKCRsaXN0LnBhcmVudCgpLmhhc0NsYXNzKCdtcy1zZWxlY3RhYmxlJykpewogICAgICAgICAgdGhpcy5zZWxlY3QoJGhpZ2hsaWdodGVkRWxlbS5kYXRhKCdtcy12YWx1ZScpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5kZXNlbGVjdCgkaGlnaGxpZ2h0ZWRFbGVtLmRhdGEoJ21zLXZhbHVlJykpOwogICAgICAgIH0KICAgICAgICAkZWxlbXMucmVtb3ZlQ2xhc3MoJ21zLWhvdmVyJyk7CiAgICAgIH0KICAgIH0sCgogICAgJ3N3aXRjaExpc3QnIDogZnVuY3Rpb24oJGxpc3QpewogICAgICAkbGlzdC5ibHVyKCk7CiAgICAgIHRoaXMuJGNvbnRhaW5lci5maW5kKHRoaXMuZWxlbXNTZWxlY3RvcikucmVtb3ZlQ2xhc3MoJ21zLWhvdmVyJyk7CiAgICAgIGlmICgkbGlzdC5wYXJlbnQoKS5oYXNDbGFzcygnbXMtc2VsZWN0YWJsZScpKXsKICAgICAgICB0aGlzLiRzZWxlY3Rpb25VbC5mb2N1cygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHNlbGVjdGFibGVVbC5mb2N1cygpOwogICAgICB9CiAgICB9LAoKICAgICdhY3RpdmVNb3VzZScgOiBmdW5jdGlvbigkbGlzdCl7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKCiAgICAgICQoJ2JvZHknKS5vbignbW91c2VlbnRlcicsIHRoYXQuZWxlbXNTZWxlY3RvciwgZnVuY3Rpb24oKXsKICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5tcy1jb250YWluZXInKS5maW5kKHRoYXQuZWxlbXNTZWxlY3RvcikucmVtb3ZlQ2xhc3MoJ21zLWhvdmVyJyk7CiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnbXMtaG92ZXInKTsKICAgICAgfSk7CgogICAgICAkKCdib2R5Jykub24oJ21vdXNlbGVhdmUnLCB0aGF0LmVsZW1zU2VsZWN0b3IsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICQodGhpcykucGFyZW50cygnLm1zLWNvbnRhaW5lcicpLmZpbmQodGhhdC5lbGVtc1NlbGVjdG9yKS5yZW1vdmVDbGFzcygnbXMtaG92ZXInKTs7CiAgICAgIH0pOwogICAgfSwKCiAgICAncmVmcmVzaCcgOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5kZXN0cm95KCk7CiAgICAgIHRoaXMuJGVsZW1lbnQubXVsdGlTZWxlY3QodGhpcy5vcHRpb25zKTsKICAgIH0sCgogICAgJ2Rlc3Ryb3knIDogZnVuY3Rpb24oKXsKICAgICAgJCgiI21zLSIrdGhpcy4kZWxlbWVudC5hdHRyKCJpZCIpKS5yZW1vdmUoKTsKICAgICAgdGhpcy4kZWxlbWVudC5jc3MoJ3Bvc2l0aW9uJywgJycpLmNzcygnbGVmdCcsICcnKQogICAgICB0aGlzLiRlbGVtZW50LnJlbW92ZURhdGEoJ211bHRpc2VsZWN0Jyk7CiAgICB9LAoKICAgICdzZWxlY3QnIDogZnVuY3Rpb24odmFsdWUsIG1ldGhvZCl7CiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKXsgdmFsdWUgPSBbdmFsdWVdOyB9CgogICAgICB2YXIgdGhhdCA9IHRoaXMsCiAgICAgICAgICBtcyA9IHRoaXMuJGVsZW1lbnQsCiAgICAgICAgICBtc0lkcyA9ICQubWFwKHZhbHVlLCBmdW5jdGlvbih2YWwpeyByZXR1cm4odGhhdC5zYW5pdGl6ZSh2YWwpKTsgfSksCiAgICAgICAgICBzZWxlY3RhYmxlcyA9IHRoaXMuJHNlbGVjdGFibGVVbC5maW5kKCcjJyArIG1zSWRzLmpvaW4oJy1zZWxlY3RhYmxlLCAjJykrJy1zZWxlY3RhYmxlJykuZmlsdGVyKCc6bm90KC4nK3RoYXQub3B0aW9ucy5kaXNhYmxlZENsYXNzKycpJyksCiAgICAgICAgICBzZWxlY3Rpb25zID0gdGhpcy4kc2VsZWN0aW9uVWwuZmluZCgnIycgKyBtc0lkcy5qb2luKCctc2VsZWN0aW9uLCAjJykgKyAnLXNlbGVjdGlvbicpLmZpbHRlcignOm5vdCguJyt0aGF0Lm9wdGlvbnMuZGlzYWJsZWRDbGFzcysnKScpLAogICAgICAgICAgb3B0aW9ucyA9IG1zLmZpbmQoJ29wdGlvbjpub3QoOmRpc2FibGVkKScpLmZpbHRlcihmdW5jdGlvbigpeyByZXR1cm4oJC5pbkFycmF5KHRoaXMudmFsdWUsIHZhbHVlKSA+IC0xKTsgfSk7CgogICAgICBpZiAobWV0aG9kID09PSAnaW5pdCcpewogICAgICAgIHNlbGVjdGFibGVzID0gdGhpcy4kc2VsZWN0YWJsZVVsLmZpbmQoJyMnICsgbXNJZHMuam9pbignLXNlbGVjdGFibGUsICMnKSsnLXNlbGVjdGFibGUnKSwKICAgICAgICBzZWxlY3Rpb25zID0gdGhpcy4kc2VsZWN0aW9uVWwuZmluZCgnIycgKyBtc0lkcy5qb2luKCctc2VsZWN0aW9uLCAjJykgKyAnLXNlbGVjdGlvbicpOwogICAgICB9CgogICAgICBpZiAoc2VsZWN0YWJsZXMubGVuZ3RoID4gMCl7CiAgICAgICAgc2VsZWN0YWJsZXMuYWRkQ2xhc3MoJ21zLXNlbGVjdGVkJykuaGlkZSgpOwogICAgICAgIHNlbGVjdGlvbnMuYWRkQ2xhc3MoJ21zLXNlbGVjdGVkJykuc2hvdygpOwoKICAgICAgICBvcHRpb25zLnByb3AoJ3NlbGVjdGVkJywgdHJ1ZSk7CgogICAgICAgIHRoYXQuJGNvbnRhaW5lci5maW5kKHRoYXQuZWxlbXNTZWxlY3RvcikucmVtb3ZlQ2xhc3MoJ21zLWhvdmVyJyk7CgogICAgICAgIHZhciBzZWxlY3RhYmxlT3B0Z3JvdXBzID0gdGhhdC4kc2VsZWN0YWJsZVVsLmNoaWxkcmVuKCcubXMtb3B0Z3JvdXAtY29udGFpbmVyJyk7CiAgICAgICAgaWYgKHNlbGVjdGFibGVPcHRncm91cHMubGVuZ3RoID4gMCl7CiAgICAgICAgICBzZWxlY3RhYmxlT3B0Z3JvdXBzLmVhY2goZnVuY3Rpb24oKXsKICAgICAgICAgICAgdmFyIHNlbGVjdGFibGVzTGkgPSAkKHRoaXMpLmZpbmQoJy5tcy1lbGVtLXNlbGVjdGFibGUnKTsKICAgICAgICAgICAgaWYgKHNlbGVjdGFibGVzTGkubGVuZ3RoID09PSBzZWxlY3RhYmxlc0xpLmZpbHRlcignLm1zLXNlbGVjdGVkJykubGVuZ3RoKXsKICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5tcy1vcHRncm91cC1sYWJlbCcpLmhpZGUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgICAgdmFyIHNlbGVjdGlvbk9wdGdyb3VwcyA9IHRoYXQuJHNlbGVjdGlvblVsLmNoaWxkcmVuKCcubXMtb3B0Z3JvdXAtY29udGFpbmVyJyk7CiAgICAgICAgICBzZWxlY3Rpb25PcHRncm91cHMuZWFjaChmdW5jdGlvbigpewogICAgICAgICAgICB2YXIgc2VsZWN0aW9uc0xpID0gJCh0aGlzKS5maW5kKCcubXMtZWxlbS1zZWxlY3Rpb24nKTsKICAgICAgICAgICAgaWYgKHNlbGVjdGlvbnNMaS5maWx0ZXIoJy5tcy1zZWxlY3RlZCcpLmxlbmd0aCA+IDApewogICAgICAgICAgICAgICQodGhpcykuZmluZCgnLm1zLW9wdGdyb3VwLWxhYmVsJykuc2hvdygpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5rZWVwT3JkZXIgJiYgbWV0aG9kICE9PSAnaW5pdCcpewogICAgICAgICAgICB2YXIgc2VsZWN0aW9uTGlMYXN0ID0gdGhhdC4kc2VsZWN0aW9uVWwuZmluZCgnLm1zLXNlbGVjdGVkJyk7CiAgICAgICAgICAgIGlmKChzZWxlY3Rpb25MaUxhc3QubGVuZ3RoID4gMSkgJiYgKHNlbGVjdGlvbkxpTGFzdC5sYXN0KCkuZ2V0KDApICE9IHNlbGVjdGlvbnMuZ2V0KDApKSkgewogICAgICAgICAgICAgIHNlbGVjdGlvbnMuaW5zZXJ0QWZ0ZXIoc2VsZWN0aW9uTGlMYXN0Lmxhc3QoKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKG1ldGhvZCAhPT0gJ2luaXQnKXsKICAgICAgICAgIG1zLnRyaWdnZXIoJ2NoYW5nZScpOwogICAgICAgICAgaWYgKHR5cGVvZiB0aGF0Lm9wdGlvbnMuYWZ0ZXJTZWxlY3QgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgdGhhdC5vcHRpb25zLmFmdGVyU2VsZWN0LmNhbGwodGhpcywgdmFsdWUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICAnZGVzZWxlY3QnIDogZnVuY3Rpb24odmFsdWUpewogICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyl7IHZhbHVlID0gW3ZhbHVlXTsgfQoKICAgICAgdmFyIHRoYXQgPSB0aGlzLAogICAgICAgICAgbXMgPSB0aGlzLiRlbGVtZW50LAogICAgICAgICAgbXNJZHMgPSAkLm1hcCh2YWx1ZSwgZnVuY3Rpb24odmFsKXsgcmV0dXJuKHRoYXQuc2FuaXRpemUodmFsKSk7IH0pLAogICAgICAgICAgc2VsZWN0YWJsZXMgPSB0aGlzLiRzZWxlY3RhYmxlVWwuZmluZCgnIycgKyBtc0lkcy5qb2luKCctc2VsZWN0YWJsZSwgIycpKyctc2VsZWN0YWJsZScpLAogICAgICAgICAgc2VsZWN0aW9ucyA9IHRoaXMuJHNlbGVjdGlvblVsLmZpbmQoJyMnICsgbXNJZHMuam9pbignLXNlbGVjdGlvbiwgIycpKyctc2VsZWN0aW9uJykuZmlsdGVyKCcubXMtc2VsZWN0ZWQnKS5maWx0ZXIoJzpub3QoLicrdGhhdC5vcHRpb25zLmRpc2FibGVkQ2xhc3MrJyknKSwKICAgICAgICAgIG9wdGlvbnMgPSBtcy5maW5kKCdvcHRpb24nKS5maWx0ZXIoZnVuY3Rpb24oKXsgcmV0dXJuKCQuaW5BcnJheSh0aGlzLnZhbHVlLCB2YWx1ZSkgPiAtMSk7IH0pOwoKICAgICAgaWYgKHNlbGVjdGlvbnMubGVuZ3RoID4gMCl7CiAgICAgICAgc2VsZWN0YWJsZXMucmVtb3ZlQ2xhc3MoJ21zLXNlbGVjdGVkJykuc2hvdygpOwogICAgICAgIHNlbGVjdGlvbnMucmVtb3ZlQ2xhc3MoJ21zLXNlbGVjdGVkJykuaGlkZSgpOwogICAgICAgIG9wdGlvbnMucHJvcCgnc2VsZWN0ZWQnLCBmYWxzZSk7CgogICAgICAgIHRoYXQuJGNvbnRhaW5lci5maW5kKHRoYXQuZWxlbXNTZWxlY3RvcikucmVtb3ZlQ2xhc3MoJ21zLWhvdmVyJyk7CgogICAgICAgIHZhciBzZWxlY3RhYmxlT3B0Z3JvdXBzID0gdGhhdC4kc2VsZWN0YWJsZVVsLmNoaWxkcmVuKCcubXMtb3B0Z3JvdXAtY29udGFpbmVyJyk7CiAgICAgICAgaWYgKHNlbGVjdGFibGVPcHRncm91cHMubGVuZ3RoID4gMCl7CiAgICAgICAgICBzZWxlY3RhYmxlT3B0Z3JvdXBzLmVhY2goZnVuY3Rpb24oKXsKICAgICAgICAgICAgdmFyIHNlbGVjdGFibGVzTGkgPSAkKHRoaXMpLmZpbmQoJy5tcy1lbGVtLXNlbGVjdGFibGUnKTsKICAgICAgICAgICAgaWYgKHNlbGVjdGFibGVzTGkuZmlsdGVyKCc6bm90KC5tcy1zZWxlY3RlZCknKS5sZW5ndGggPiAwKXsKICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5tcy1vcHRncm91cC1sYWJlbCcpLnNob3coKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgICAgdmFyIHNlbGVjdGlvbk9wdGdyb3VwcyA9IHRoYXQuJHNlbGVjdGlvblVsLmNoaWxkcmVuKCcubXMtb3B0Z3JvdXAtY29udGFpbmVyJyk7CiAgICAgICAgICBzZWxlY3Rpb25PcHRncm91cHMuZWFjaChmdW5jdGlvbigpewogICAgICAgICAgICB2YXIgc2VsZWN0aW9uc0xpID0gJCh0aGlzKS5maW5kKCcubXMtZWxlbS1zZWxlY3Rpb24nKTsKICAgICAgICAgICAgaWYgKHNlbGVjdGlvbnNMaS5maWx0ZXIoJy5tcy1zZWxlY3RlZCcpLmxlbmd0aCA9PT0gMCl7CiAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcubXMtb3B0Z3JvdXAtbGFiZWwnKS5oaWRlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBtcy50cmlnZ2VyKCdjaGFuZ2UnKTsKICAgICAgICBpZiAodHlwZW9mIHRoYXQub3B0aW9ucy5hZnRlckRlc2VsZWN0ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICB0aGF0Lm9wdGlvbnMuYWZ0ZXJEZXNlbGVjdC5jYWxsKHRoaXMsIHZhbHVlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgJ3NlbGVjdF9hbGwnIDogZnVuY3Rpb24oKXsKICAgICAgdmFyIG1zID0gdGhpcy4kZWxlbWVudCwKICAgICAgICAgIHZhbHVlcyA9IG1zLnZhbCgpOwoKICAgICAgbXMuZmluZCgnb3B0aW9uOm5vdCgiOmRpc2FibGVkIiknKS5wcm9wKCdzZWxlY3RlZCcsIHRydWUpOwogICAgICB0aGlzLiRzZWxlY3RhYmxlVWwuZmluZCgnLm1zLWVsZW0tc2VsZWN0YWJsZScpLmZpbHRlcignOm5vdCguJyt0aGlzLm9wdGlvbnMuZGlzYWJsZWRDbGFzcysnKScpLmFkZENsYXNzKCdtcy1zZWxlY3RlZCcpLmhpZGUoKTsKICAgICAgdGhpcy4kc2VsZWN0aW9uVWwuZmluZCgnLm1zLW9wdGdyb3VwLWxhYmVsJykuc2hvdygpOwogICAgICB0aGlzLiRzZWxlY3RhYmxlVWwuZmluZCgnLm1zLW9wdGdyb3VwLWxhYmVsJykuaGlkZSgpOwogICAgICB0aGlzLiRzZWxlY3Rpb25VbC5maW5kKCcubXMtZWxlbS1zZWxlY3Rpb24nKS5maWx0ZXIoJzpub3QoLicrdGhpcy5vcHRpb25zLmRpc2FibGVkQ2xhc3MrJyknKS5hZGRDbGFzcygnbXMtc2VsZWN0ZWQnKS5zaG93KCk7CiAgICAgIHRoaXMuJHNlbGVjdGlvblVsLmZvY3VzKCk7CiAgICAgIG1zLnRyaWdnZXIoJ2NoYW5nZScpOwogICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5hZnRlclNlbGVjdCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHZhciBzZWxlY3RlZFZhbHVlcyA9ICQuZ3JlcChtcy52YWwoKSwgZnVuY3Rpb24oaXRlbSl7CiAgICAgICAgICByZXR1cm4gJC5pbkFycmF5KGl0ZW0sIHZhbHVlcykgPCAwOwogICAgICAgIH0pOwogICAgICAgIHRoaXMub3B0aW9ucy5hZnRlclNlbGVjdC5jYWxsKHRoaXMsIHNlbGVjdGVkVmFsdWVzKTsKICAgICAgfQogICAgfSwKCiAgICAnZGVzZWxlY3RfYWxsJyA6IGZ1bmN0aW9uKCl7CiAgICAgIHZhciBtcyA9IHRoaXMuJGVsZW1lbnQsCiAgICAgICAgICB2YWx1ZXMgPSBtcy52YWwoKTsKCiAgICAgIG1zLmZpbmQoJ29wdGlvbicpLnByb3AoJ3NlbGVjdGVkJywgZmFsc2UpOwogICAgICB0aGlzLiRzZWxlY3RhYmxlVWwuZmluZCgnLm1zLWVsZW0tc2VsZWN0YWJsZScpLnJlbW92ZUNsYXNzKCdtcy1zZWxlY3RlZCcpLnNob3coKTsKICAgICAgdGhpcy4kc2VsZWN0aW9uVWwuZmluZCgnLm1zLW9wdGdyb3VwLWxhYmVsJykuaGlkZSgpOwogICAgICB0aGlzLiRzZWxlY3RhYmxlVWwuZmluZCgnLm1zLW9wdGdyb3VwLWxhYmVsJykuc2hvdygpOwogICAgICB0aGlzLiRzZWxlY3Rpb25VbC5maW5kKCcubXMtZWxlbS1zZWxlY3Rpb24nKS5yZW1vdmVDbGFzcygnbXMtc2VsZWN0ZWQnKS5oaWRlKCk7CiAgICAgIHRoaXMuJHNlbGVjdGFibGVVbC5mb2N1cygpOwogICAgICBtcy50cmlnZ2VyKCdjaGFuZ2UnKTsKICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMuYWZ0ZXJEZXNlbGVjdCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHRoaXMub3B0aW9ucy5hZnRlckRlc2VsZWN0LmNhbGwodGhpcywgdmFsdWVzKTsKICAgICAgfQogICAgfSwKCiAgICBzYW5pdGl6ZTogZnVuY3Rpb24odmFsdWUpewogICAgICB2YXIgaGFzaCA9IDAsIGksIGNoYXJhY3RlcjsKICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PSAwKSByZXR1cm4gaGFzaDsKICAgICAgdmFyIGxzID0gMDsKICAgICAgZm9yIChpID0gMCwgbHMgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsczsgaSsrKSB7CiAgICAgICAgY2hhcmFjdGVyICA9IHZhbHVlLmNoYXJDb2RlQXQoaSk7CiAgICAgICAgaGFzaCAgPSAoKGhhc2g8PDUpLWhhc2gpK2NoYXJhY3RlcjsKICAgICAgICBoYXNoIHw9IDA7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlcgogICAgICB9CiAgICAgIHJldHVybiBoYXNoOwogICAgfQogIH07CgogIC8qIE1VTFRJU0VMRUNUIFBMVUdJTiBERUZJTklUSU9OCiAgICogPT09PT09PT09PT09PT09PT09PT09PT0gKi8KCiAgJC5mbi5tdWx0aVNlbGVjdCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBvcHRpb24gPSBhcmd1bWVudHNbMF0sCiAgICAgICAgYXJncyA9IGFyZ3VtZW50czsKCiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSwKICAgICAgICAgIGRhdGEgPSAkdGhpcy5kYXRhKCdtdWx0aXNlbGVjdCcpLAogICAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCAkLmZuLm11bHRpU2VsZWN0LmRlZmF1bHRzLCAkdGhpcy5kYXRhKCksIHR5cGVvZiBvcHRpb24gPT09ICdvYmplY3QnICYmIG9wdGlvbik7CgogICAgICBpZiAoIWRhdGEpeyAkdGhpcy5kYXRhKCdtdWx0aXNlbGVjdCcsIChkYXRhID0gbmV3IE11bHRpU2VsZWN0KHRoaXMsIG9wdGlvbnMpKSk7IH0KCiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09PSAnc3RyaW5nJyl7CiAgICAgICAgZGF0YVtvcHRpb25dKGFyZ3NbMV0pOwogICAgICB9IGVsc2UgewogICAgICAgIGRhdGEuaW5pdCgpOwogICAgICB9CiAgICB9KTsKICB9OwoKICAkLmZuLm11bHRpU2VsZWN0LmRlZmF1bHRzID0gewogICAga2V5U2VsZWN0OiBbMzJdLAogICAgc2VsZWN0YWJsZU9wdGdyb3VwOiBmYWxzZSwKICAgIGRpc2FibGVkQ2xhc3MgOiAnZGlzYWJsZWQnLAogICAgZGJsQ2xpY2sgOiBmYWxzZSwKICAgIGtlZXBPcmRlcjogZmFsc2UsCiAgICBjc3NDbGFzczogJycKICB9OwoKICAkLmZuLm11bHRpU2VsZWN0LkNvbnN0cnVjdG9yID0gTXVsdGlTZWxlY3Q7CgogICQuZm4uaW5zZXJ0QXQgPSBmdW5jdGlvbihpbmRleCwgJHBhcmVudCkgewogICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHsKICAgICAgaWYgKGluZGV4ID09PSAwKSB7CiAgICAgICAgJHBhcmVudC5wcmVwZW5kKHRoaXMpOwogICAgICB9IGVsc2UgewogICAgICAgICRwYXJlbnQuY2hpbGRyZW4oKS5lcShpbmRleCAtIDEpLmFmdGVyKHRoaXMpOwogICAgICB9CiAgICB9KTsKfQoKfSh3aW5kb3cualF1ZXJ5KTs=",
    "size": "19397"
}