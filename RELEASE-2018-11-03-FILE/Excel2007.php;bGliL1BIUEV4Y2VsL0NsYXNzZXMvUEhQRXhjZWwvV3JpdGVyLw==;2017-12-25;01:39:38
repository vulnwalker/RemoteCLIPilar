{
    "namaFile": "lib\/PHPExcel\/Classes\/PHPExcel\/Writer\/Excel2007.php",
    "lastUpdate": "2017-12-25+01:39:38.00",
    "contentFile": "PD9waHAKCi8qKgogKiBQSFBFeGNlbF9Xcml0ZXJfRXhjZWwyMDA3CiAqCiAqIENvcHlyaWdodCAoYykgMjAwNiAtIDIwMTUgUEhQRXhjZWwKICoKICogVGhpcyBsaWJyYXJ5IGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vcgogKiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljCiAqIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlcgogKiB2ZXJzaW9uIDIuMSBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KICoKICogVGhpcyBsaWJyYXJ5IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUgR05VCiAqIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiAqCiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMKICogTGljZW5zZSBhbG9uZyB3aXRoIHRoaXMgbGlicmFyeTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZQogKiBGb3VuZGF0aW9uLCBJbmMuLCA1MSBGcmFua2xpbiBTdHJlZXQsIEZpZnRoIEZsb29yLCBCb3N0b24sIE1BICAwMjExMC0xMzAxICBVU0EKICoKICogQGNhdGVnb3J5ICAgUEhQRXhjZWwKICogQHBhY2thZ2UgICAgUEhQRXhjZWxfV3JpdGVyX0V4Y2VsMjAwNwogKiBAY29weXJpZ2h0ICBDb3B5cmlnaHQgKGMpIDIwMDYgLSAyMDE1IFBIUEV4Y2VsIChodHRwOi8vd3d3LmNvZGVwbGV4LmNvbS9QSFBFeGNlbCkKICogQGxpY2Vuc2UgICAgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL29sZC1saWNlbnNlcy9sZ3BsLTIuMS50eHQgICAgTEdQTAogKiBAdmVyc2lvbiAgICAjI1ZFUlNJT04jIywgIyNEQVRFIyMKICovCmNsYXNzIFBIUEV4Y2VsX1dyaXRlcl9FeGNlbDIwMDcgZXh0ZW5kcyBQSFBFeGNlbF9Xcml0ZXJfQWJzdHJhY3QgaW1wbGVtZW50cyBQSFBFeGNlbF9Xcml0ZXJfSVdyaXRlcgp7CiAgICAvKioKICAgICAqIFByZS1jYWxjdWxhdGUgZm9ybXVsYXMKICAgICAqIEZvcmNlcyBQSFBFeGNlbCB0byByZWNhbGN1bGF0ZSBhbGwgZm9ybXVsYWUgaW4gYSB3b3JrYm9vayB3aGVuIHNhdmluZywgc28gdGhhdCB0aGUgcHJlLWNhbGN1bGF0ZWQgdmFsdWVzIGFyZQogICAgICogICAgaW1tZWRpYXRlbHkgYXZhaWxhYmxlIHRvIE1TIEV4Y2VsIG9yIG90aGVyIG9mZmljZSBzcHJlYWRzaGVldCB2aWV3ZXIgd2hlbiBvcGVuaW5nIHRoZSBmaWxlCiAgICAgKgogICAgICogT3ZlcnJpZGVzIHRoZSBkZWZhdWx0IFRSVUUgZm9yIHRoaXMgc3BlY2lmaWMgd3JpdGVyIGZvciBwZXJmb3JtYW5jZSByZWFzb25zCiAgICAgKgogICAgICogQHZhciBib29sZWFuCiAgICAgKi8KICAgIHByb3RlY3RlZCAkcHJlQ2FsY3VsYXRlRm9ybXVsYXMgPSBmYWxzZTsKCiAgICAvKioKICAgICAqIE9mZmljZTIwMDMgY29tcGF0aWJpbGl0eQogICAgICoKICAgICAqIEB2YXIgYm9vbGVhbgogICAgICovCiAgICBwcml2YXRlICRvZmZpY2UyMDAzY29tcGF0aWJpbGl0eSA9IGZhbHNlOwoKICAgIC8qKgogICAgICogUHJpdmF0ZSB3cml0ZXIgcGFydHMKICAgICAqCiAgICAgKiBAdmFyIFBIUEV4Y2VsX1dyaXRlcl9FeGNlbDIwMDdfV3JpdGVyUGFydFtdCiAgICAgKi8KICAgIHByaXZhdGUgJHdyaXRlclBhcnRzICAgID0gYXJyYXkoKTsKCiAgICAvKioKICAgICAqIFByaXZhdGUgUEhQRXhjZWwKICAgICAqCiAgICAgKiBAdmFyIFBIUEV4Y2VsCiAgICAgKi8KICAgIHByaXZhdGUgJHNwcmVhZFNoZWV0OwoKICAgIC8qKgogICAgICogUHJpdmF0ZSBzdHJpbmcgdGFibGUKICAgICAqCiAgICAgKiBAdmFyIHN0cmluZ1tdCiAgICAgKi8KICAgIHByaXZhdGUgJHN0cmluZ1RhYmxlICAgID0gYXJyYXkoKTsKCiAgICAvKioKICAgICAqIFByaXZhdGUgdW5pcXVlIFBIUEV4Y2VsX1N0eWxlX0NvbmRpdGlvbmFsIEhhc2hUYWJsZQogICAgICoKICAgICAqIEB2YXIgUEhQRXhjZWxfSGFzaFRhYmxlCiAgICAgKi8KICAgIHByaXZhdGUgJHN0eWxlc0NvbmRpdGlvbmFsSGFzaFRhYmxlOwoKICAgIC8qKgogICAgICogUHJpdmF0ZSB1bmlxdWUgUEhQRXhjZWxfU3R5bGUgSGFzaFRhYmxlCiAgICAgKgogICAgICogQHZhciBQSFBFeGNlbF9IYXNoVGFibGUKICAgICAqLwogICAgcHJpdmF0ZSAkc3R5bGVIYXNoVGFibGU7CgogICAgLyoqCiAgICAgKiBQcml2YXRlIHVuaXF1ZSBQSFBFeGNlbF9TdHlsZV9GaWxsIEhhc2hUYWJsZQogICAgICoKICAgICAqIEB2YXIgUEhQRXhjZWxfSGFzaFRhYmxlCiAgICAgKi8KICAgIHByaXZhdGUgJGZpbGxIYXNoVGFibGU7CgogICAgLyoqCiAgICAgKiBQcml2YXRlIHVuaXF1ZSBQSFBFeGNlbF9TdHlsZV9Gb250IEhhc2hUYWJsZQogICAgICoKICAgICAqIEB2YXIgUEhQRXhjZWxfSGFzaFRhYmxlCiAgICAgKi8KICAgIHByaXZhdGUgJGZvbnRIYXNoVGFibGU7CgogICAgLyoqCiAgICAgKiBQcml2YXRlIHVuaXF1ZSBQSFBFeGNlbF9TdHlsZV9Cb3JkZXJzIEhhc2hUYWJsZQogICAgICoKICAgICAqIEB2YXIgUEhQRXhjZWxfSGFzaFRhYmxlCiAgICAgKi8KICAgIHByaXZhdGUgJGJvcmRlcnNIYXNoVGFibGUgOwoKICAgIC8qKgogICAgICogUHJpdmF0ZSB1bmlxdWUgUEhQRXhjZWxfU3R5bGVfTnVtYmVyRm9ybWF0IEhhc2hUYWJsZQogICAgICoKICAgICAqIEB2YXIgUEhQRXhjZWxfSGFzaFRhYmxlCiAgICAgKi8KICAgIHByaXZhdGUgJG51bUZtdEhhc2hUYWJsZTsKCiAgICAvKioKICAgICAqIFByaXZhdGUgdW5pcXVlIFBIUEV4Y2VsX1dvcmtzaGVldF9CYXNlRHJhd2luZyBIYXNoVGFibGUKICAgICAqCiAgICAgKiBAdmFyIFBIUEV4Y2VsX0hhc2hUYWJsZQogICAgICovCiAgICBwcml2YXRlICRkcmF3aW5nSGFzaFRhYmxlOwoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgbmV3IFBIUEV4Y2VsX1dyaXRlcl9FeGNlbDIwMDcKICAgICAqCiAgICAgKiBAcGFyYW0gICAgIFBIUEV4Y2VsICAgICRwUEhQRXhjZWwKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KFBIUEV4Y2VsICRwUEhQRXhjZWwgPSBudWxsKQogICAgewogICAgICAgIC8vIEFzc2lnbiBQSFBFeGNlbAogICAgICAgICR0aGlzLT5zZXRQSFBFeGNlbCgkcFBIUEV4Y2VsKTsKCiAgICAgICAgJHdyaXRlclBhcnRzQXJyYXkgPSBhcnJheSggICdzdHJpbmd0YWJsZScgICAgICAgPT4gJ1BIUEV4Y2VsX1dyaXRlcl9FeGNlbDIwMDdfU3RyaW5nVGFibGUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY29udGVudHR5cGVzJyAgICAgID0+ICdQSFBFeGNlbF9Xcml0ZXJfRXhjZWwyMDA3X0NvbnRlbnRUeXBlcycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkb2Nwcm9wcycgICAgICAgICAgPT4gJ1BIUEV4Y2VsX1dyaXRlcl9FeGNlbDIwMDdfRG9jUHJvcHMnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncmVscycgICAgICAgICAgICAgID0+ICdQSFBFeGNlbF9Xcml0ZXJfRXhjZWwyMDA3X1JlbHMnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGhlbWUnICAgICAgICAgICAgID0+ICdQSFBFeGNlbF9Xcml0ZXJfRXhjZWwyMDA3X1RoZW1lJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0eWxlJyAgICAgICAgICAgICA9PiAnUEhQRXhjZWxfV3JpdGVyX0V4Y2VsMjAwN19TdHlsZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3b3JrYm9vaycgICAgICAgICAgPT4gJ1BIUEV4Y2VsX1dyaXRlcl9FeGNlbDIwMDdfV29ya2Jvb2snLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnd29ya3NoZWV0JyAgICAgICAgID0+ICdQSFBFeGNlbF9Xcml0ZXJfRXhjZWwyMDA3X1dvcmtzaGVldCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkcmF3aW5nJyAgICAgICAgICAgPT4gJ1BIUEV4Y2VsX1dyaXRlcl9FeGNlbDIwMDdfRHJhd2luZycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjb21tZW50cycgICAgICAgICAgPT4gJ1BIUEV4Y2VsX1dyaXRlcl9FeGNlbDIwMDdfQ29tbWVudHMnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2hhcnQnICAgICAgICAgICAgID0+ICdQSFBFeGNlbF9Xcml0ZXJfRXhjZWwyMDA3X0NoYXJ0JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3JlbHN2YmEnICAgICAgICAgICA9PiAnUEhQRXhjZWxfV3JpdGVyX0V4Y2VsMjAwN19SZWxzVkJBJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3JlbHNyaWJib25vYmplY3RzJyA9PiAnUEhQRXhjZWxfV3JpdGVyX0V4Y2VsMjAwN19SZWxzUmliYm9uJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwoKICAgICAgICAvLyAgICBJbml0aWFsaXNlIHdyaXRlciBwYXJ0cwogICAgICAgIC8vICAgICAgICBhbmQgQXNzaWduIHRoZWlyIHBhcmVudCBJV3JpdGVycwogICAgICAgIGZvcmVhY2ggKCR3cml0ZXJQYXJ0c0FycmF5IGFzICR3cml0ZXIgPT4gJGNsYXNzKSB7CiAgICAgICAgICAgICR0aGlzLT53cml0ZXJQYXJ0c1skd3JpdGVyXSA9IG5ldyAkY2xhc3MoJHRoaXMpOwogICAgICAgIH0KCiAgICAgICAgJGhhc2hUYWJsZXNBcnJheSA9IGFycmF5KCAnc3R5bGVzQ29uZGl0aW9uYWxIYXNoVGFibGUnLCAgICAnZmlsbEhhc2hUYWJsZScsICAgICAgICAnZm9udEhhc2hUYWJsZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYm9yZGVyc0hhc2hUYWJsZScsICAgICAgICAgICAgICAgICdudW1GbXRIYXNoVGFibGUnLCAgICAgICAgJ2RyYXdpbmdIYXNoVGFibGUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0eWxlSGFzaFRhYmxlJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CgogICAgICAgIC8vIFNldCBIYXNoVGFibGUgdmFyaWFibGVzCiAgICAgICAgZm9yZWFjaCAoJGhhc2hUYWJsZXNBcnJheSBhcyAkdGFibGVOYW1lKSB7CiAgICAgICAgICAgICR0aGlzLT4kdGFibGVOYW1lICAgICA9IG5ldyBQSFBFeGNlbF9IYXNoVGFibGUoKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgd3JpdGVyIHBhcnQKICAgICAqCiAgICAgKiBAcGFyYW0gICAgIHN0cmluZyAgICAgJHBQYXJ0TmFtZSAgICAgICAgV3JpdGVyIHBhcnQgbmFtZQogICAgICogQHJldHVybiAgICAgUEhQRXhjZWxfV3JpdGVyX0V4Y2VsMjAwN19Xcml0ZXJQYXJ0CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRXcml0ZXJQYXJ0KCRwUGFydE5hbWUgPSAnJykKICAgIHsKICAgICAgICBpZiAoJHBQYXJ0TmFtZSAhPSAnJyAmJiBpc3NldCgkdGhpcy0+d3JpdGVyUGFydHNbc3RydG9sb3dlcigkcFBhcnROYW1lKV0pKSB7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+d3JpdGVyUGFydHNbc3RydG9sb3dlcigkcFBhcnROYW1lKV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogU2F2ZSBQSFBFeGNlbCB0byBmaWxlCiAgICAgKgogICAgICogQHBhcmFtICAgICBzdHJpbmcgICAgICAgICAkcEZpbGVuYW1lCiAgICAgKiBAdGhyb3dzICAgICBQSFBFeGNlbF9Xcml0ZXJfRXhjZXB0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBzYXZlKCRwRmlsZW5hbWUgPSBudWxsKQogICAgewogICAgICAgIGlmICgkdGhpcy0+c3ByZWFkU2hlZXQgIT09IG51bGwpIHsKICAgICAgICAgICAgLy8gZ2FyYmFnZSBjb2xsZWN0CiAgICAgICAgICAgICR0aGlzLT5zcHJlYWRTaGVldC0+Z2FyYmFnZUNvbGxlY3QoKTsKCiAgICAgICAgICAgIC8vIElmICRwRmlsZW5hbWUgaXMgcGhwOi8vb3V0cHV0IG9yIHBocDovL3N0ZG91dCwgbWFrZSBpdCBhIHRlbXBvcmFyeSBmaWxlLi4uCiAgICAgICAgICAgICRvcmlnaW5hbEZpbGVuYW1lID0gJHBGaWxlbmFtZTsKICAgICAgICAgICAgaWYgKHN0cnRvbG93ZXIoJHBGaWxlbmFtZSkgPT0gJ3BocDovL291dHB1dCcgfHwgc3RydG9sb3dlcigkcEZpbGVuYW1lKSA9PSAncGhwOi8vc3Rkb3V0JykgewogICAgICAgICAgICAgICAgJHBGaWxlbmFtZSA9IEB0ZW1wbmFtKFBIUEV4Y2VsX1NoYXJlZF9GaWxlOjpzeXNfZ2V0X3RlbXBfZGlyKCksICdwaHB4bHRtcCcpOwogICAgICAgICAgICAgICAgaWYgKCRwRmlsZW5hbWUgPT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAkcEZpbGVuYW1lID0gJG9yaWdpbmFsRmlsZW5hbWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRzYXZlRGVidWdMb2cgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbjo6Z2V0SW5zdGFuY2UoJHRoaXMtPnNwcmVhZFNoZWV0KS0+Z2V0RGVidWdMb2coKS0+Z2V0V3JpdGVEZWJ1Z0xvZygpOwogICAgICAgICAgICBQSFBFeGNlbF9DYWxjdWxhdGlvbjo6Z2V0SW5zdGFuY2UoJHRoaXMtPnNwcmVhZFNoZWV0KS0+Z2V0RGVidWdMb2coKS0+c2V0V3JpdGVEZWJ1Z0xvZyhmYWxzZSk7CiAgICAgICAgICAgICRzYXZlRGF0ZVJldHVyblR5cGUgPSBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OmdldFJldHVybkRhdGVUeXBlKCk7CiAgICAgICAgICAgIFBIUEV4Y2VsX0NhbGN1bGF0aW9uX0Z1bmN0aW9uczo6c2V0UmV0dXJuRGF0ZVR5cGUoUEhQRXhjZWxfQ2FsY3VsYXRpb25fRnVuY3Rpb25zOjpSRVRVUk5EQVRFX0VYQ0VMKTsKCiAgICAgICAgICAgIC8vIENyZWF0ZSBzdHJpbmcgbG9va3VwIHRhYmxlCiAgICAgICAgICAgICR0aGlzLT5zdHJpbmdUYWJsZSA9IGFycmF5KCk7CiAgICAgICAgICAgIGZvciAoJGkgPSAwOyAkaSA8ICR0aGlzLT5zcHJlYWRTaGVldC0+Z2V0U2hlZXRDb3VudCgpOyArKyRpKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+c3RyaW5nVGFibGUgPSAkdGhpcy0+Z2V0V3JpdGVyUGFydCgnU3RyaW5nVGFibGUnKS0+Y3JlYXRlU3RyaW5nVGFibGUoJHRoaXMtPnNwcmVhZFNoZWV0LT5nZXRTaGVldCgkaSksICR0aGlzLT5zdHJpbmdUYWJsZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIENyZWF0ZSBzdHlsZXMgZGljdGlvbmFyaWVzCiAgICAgICAgICAgICR0aGlzLT5zdHlsZUhhc2hUYWJsZS0+YWRkRnJvbVNvdXJjZSgkdGhpcy0+Z2V0V3JpdGVyUGFydCgnU3R5bGUnKS0+YWxsU3R5bGVzKCR0aGlzLT5zcHJlYWRTaGVldCkpOwogICAgICAgICAgICAkdGhpcy0+c3R5bGVzQ29uZGl0aW9uYWxIYXNoVGFibGUtPmFkZEZyb21Tb3VyY2UoJHRoaXMtPmdldFdyaXRlclBhcnQoJ1N0eWxlJyktPmFsbENvbmRpdGlvbmFsU3R5bGVzKCR0aGlzLT5zcHJlYWRTaGVldCkpOwogICAgICAgICAgICAkdGhpcy0+ZmlsbEhhc2hUYWJsZS0+YWRkRnJvbVNvdXJjZSgkdGhpcy0+Z2V0V3JpdGVyUGFydCgnU3R5bGUnKS0+YWxsRmlsbHMoJHRoaXMtPnNwcmVhZFNoZWV0KSk7CiAgICAgICAgICAgICR0aGlzLT5mb250SGFzaFRhYmxlLT5hZGRGcm9tU291cmNlKCR0aGlzLT5nZXRXcml0ZXJQYXJ0KCdTdHlsZScpLT5hbGxGb250cygkdGhpcy0+c3ByZWFkU2hlZXQpKTsKICAgICAgICAgICAgJHRoaXMtPmJvcmRlcnNIYXNoVGFibGUtPmFkZEZyb21Tb3VyY2UoJHRoaXMtPmdldFdyaXRlclBhcnQoJ1N0eWxlJyktPmFsbEJvcmRlcnMoJHRoaXMtPnNwcmVhZFNoZWV0KSk7CiAgICAgICAgICAgICR0aGlzLT5udW1GbXRIYXNoVGFibGUtPmFkZEZyb21Tb3VyY2UoJHRoaXMtPmdldFdyaXRlclBhcnQoJ1N0eWxlJyktPmFsbE51bWJlckZvcm1hdHMoJHRoaXMtPnNwcmVhZFNoZWV0KSk7CgogICAgICAgICAgICAvLyBDcmVhdGUgZHJhd2luZyBkaWN0aW9uYXJ5CiAgICAgICAgICAgICR0aGlzLT5kcmF3aW5nSGFzaFRhYmxlLT5hZGRGcm9tU291cmNlKCR0aGlzLT5nZXRXcml0ZXJQYXJ0KCdEcmF3aW5nJyktPmFsbERyYXdpbmdzKCR0aGlzLT5zcHJlYWRTaGVldCkpOwoKICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyBaSVAgZmlsZSBhbmQgb3BlbiBpdCBmb3Igd3JpdGluZwogICAgICAgICAgICAkemlwQ2xhc3MgPSBQSFBFeGNlbF9TZXR0aW5nczo6Z2V0WmlwQ2xhc3MoKTsKICAgICAgICAgICAgJG9ialppcCA9IG5ldyAkemlwQ2xhc3MoKTsKCiAgICAgICAgICAgIC8vICAgIFJldHJpZXZlIE9WRVJXUklURSBhbmQgQ1JFQVRFIGNvbnN0YW50cyBmcm9tIHRoZSBpbnN0YW50aWF0ZWQgemlwIGNsYXNzCiAgICAgICAgICAgIC8vICAgIFRoaXMgbWV0aG9kIG9mIGFjY2Vzc2luZyBjb25zdGFudCB2YWx1ZXMgZnJvbSBhIGR5bmFtaWMgY2xhc3Mgc2hvdWxkIHdvcmsgd2l0aCBhbGwgYXBwcm9wcmlhdGUgdmVyc2lvbnMgb2YgUEhQCiAgICAgICAgICAgICRybyA9IG5ldyBSZWZsZWN0aW9uT2JqZWN0KCRvYmpaaXApOwogICAgICAgICAgICAkemlwT3ZlcldyaXRlID0gJHJvLT5nZXRDb25zdGFudCgnT1ZFUldSSVRFJyk7CiAgICAgICAgICAgICR6aXBDcmVhdGUgPSAkcm8tPmdldENvbnN0YW50KCdDUkVBVEUnKTsKCiAgICAgICAgICAgIGlmIChmaWxlX2V4aXN0cygkcEZpbGVuYW1lKSkgewogICAgICAgICAgICAgICAgdW5saW5rKCRwRmlsZW5hbWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFRyeSBvcGVuaW5nIHRoZSBaSVAgZmlsZQogICAgICAgICAgICBpZiAoJG9ialppcC0+b3BlbigkcEZpbGVuYW1lLCAkemlwT3ZlcldyaXRlKSAhPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgaWYgKCRvYmpaaXAtPm9wZW4oJHBGaWxlbmFtZSwgJHppcENyZWF0ZSkgIT09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUEhQRXhjZWxfV3JpdGVyX0V4Y2VwdGlvbigiQ291bGQgbm90IG9wZW4gIiAuICRwRmlsZW5hbWUgLiAiIGZvciB3cml0aW5nLiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBBZGQgW0NvbnRlbnRfVHlwZXNdLnhtbCB0byBaSVAgZmlsZQogICAgICAgICAgICAkb2JqWmlwLT5hZGRGcm9tU3RyaW5nKCdbQ29udGVudF9UeXBlc10ueG1sJywgJHRoaXMtPmdldFdyaXRlclBhcnQoJ0NvbnRlbnRUeXBlcycpLT53cml0ZUNvbnRlbnRUeXBlcygkdGhpcy0+c3ByZWFkU2hlZXQsICR0aGlzLT5pbmNsdWRlQ2hhcnRzKSk7CgogICAgICAgICAgICAvL2lmIGhhc01hY3JvcywgYWRkIHRoZSB2YmFQcm9qZWN0LmJpbiBmaWxlLCBDZXJ0aWZpY2F0ZSBmaWxlKGlmIGV4aXN0cykKICAgICAgICAgICAgaWYgKCR0aGlzLT5zcHJlYWRTaGVldC0+aGFzTWFjcm9zKCkpIHsKICAgICAgICAgICAgICAgICRtYWNyb3NDb2RlPSR0aGlzLT5zcHJlYWRTaGVldC0+Z2V0TWFjcm9zQ29kZSgpOwogICAgICAgICAgICAgICAgaWYgKCFpc19udWxsKCRtYWNyb3NDb2RlKSkgey8vIHdlIGhhdmUgdGhlIGNvZGUgPwogICAgICAgICAgICAgICAgICAgICRvYmpaaXAtPmFkZEZyb21TdHJpbmcoJ3hsL3ZiYVByb2plY3QuYmluJywgJG1hY3Jvc0NvZGUpOy8vYWxsd2F5cyBpbiAneGwnLCBhbGx3YXlzIG5hbWVkIHZiYVByb2plY3QuYmluCiAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLT5zcHJlYWRTaGVldC0+aGFzTWFjcm9zQ2VydGlmaWNhdGUoKSkgey8vc2lnbmVkIG1hY3JvcyA\/CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFllcyA6IGFkZCB0aGUgY2VydGlmaWNhdGUgZmlsZSBhbmQgdGhlIHJlbGF0ZWQgcmVscyBmaWxlCiAgICAgICAgICAgICAgICAgICAgICAgICRvYmpaaXAtPmFkZEZyb21TdHJpbmcoJ3hsL3ZiYVByb2plY3RTaWduYXR1cmUuYmluJywgJHRoaXMtPnNwcmVhZFNoZWV0LT5nZXRNYWNyb3NDZXJ0aWZpY2F0ZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgJG9ialppcC0+YWRkRnJvbVN0cmluZygneGwvX3JlbHMvdmJhUHJvamVjdC5iaW4ucmVscycsICR0aGlzLT5nZXRXcml0ZXJQYXJ0KCdSZWxzVkJBJyktPndyaXRlVkJBUmVsYXRpb25zaGlwcygkdGhpcy0+c3ByZWFkU2hlZXQpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9hIGN1c3RvbSBVSSBpbiB0aGlzIHdvcmtib29rID8gYWRkIGl0ICgiYmFzZSIgeG1sIGFuZCBhZGRpdGlvbmFsIG9iamVjdHMgKHBpY3R1cmVzKSBhbmQgcmVscykKICAgICAgICAgICAgaWYgKCR0aGlzLT5zcHJlYWRTaGVldC0+aGFzUmliYm9uKCkpIHsKICAgICAgICAgICAgICAgICR0bXBSaWJib25UYXJnZXQ9JHRoaXMtPnNwcmVhZFNoZWV0LT5nZXRSaWJib25YTUxEYXRhKCd0YXJnZXQnKTsKICAgICAgICAgICAgICAgICRvYmpaaXAtPmFkZEZyb21TdHJpbmcoJHRtcFJpYmJvblRhcmdldCwgJHRoaXMtPnNwcmVhZFNoZWV0LT5nZXRSaWJib25YTUxEYXRhKCdkYXRhJykpOwogICAgICAgICAgICAgICAgaWYgKCR0aGlzLT5zcHJlYWRTaGVldC0+aGFzUmliYm9uQmluT2JqZWN0cygpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRtcFJvb3RQYXRoPWRpcm5hbWUoJHRtcFJpYmJvblRhcmdldCkuJy8nOwogICAgICAgICAgICAgICAgICAgICRyaWJib25CaW5PYmplY3RzPSR0aGlzLT5zcHJlYWRTaGVldC0+Z2V0UmliYm9uQmluT2JqZWN0cygnZGF0YScpOy8vdGhlIGZpbGVzIHRvIHdyaXRlCiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJHJpYmJvbkJpbk9iamVjdHMgYXMgJGFQYXRoID0+ICRhQ29udGVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAkb2JqWmlwLT5hZGRGcm9tU3RyaW5nKCR0bXBSb290UGF0aC4kYVBhdGgsICRhQ29udGVudCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vdGhlIHJlbHMgZm9yIGZpbGVzCiAgICAgICAgICAgICAgICAgICAgJG9ialppcC0+YWRkRnJvbVN0cmluZygkdG1wUm9vdFBhdGguJ19yZWxzLycuYmFzZW5hbWUoJHRtcFJpYmJvblRhcmdldCkuJy5yZWxzJywgJHRoaXMtPmdldFdyaXRlclBhcnQoJ1JlbHNSaWJib25PYmplY3RzJyktPndyaXRlUmliYm9uUmVsYXRpb25zaGlwcygkdGhpcy0+c3ByZWFkU2hlZXQpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQWRkIHJlbGF0aW9uc2hpcHMgdG8gWklQIGZpbGUKICAgICAgICAgICAgJG9ialppcC0+YWRkRnJvbVN0cmluZygnX3JlbHMvLnJlbHMnLCAkdGhpcy0+Z2V0V3JpdGVyUGFydCgnUmVscycpLT53cml0ZVJlbGF0aW9uc2hpcHMoJHRoaXMtPnNwcmVhZFNoZWV0KSk7CiAgICAgICAgICAgICRvYmpaaXAtPmFkZEZyb21TdHJpbmcoJ3hsL19yZWxzL3dvcmtib29rLnhtbC5yZWxzJywgJHRoaXMtPmdldFdyaXRlclBhcnQoJ1JlbHMnKS0+d3JpdGVXb3JrYm9va1JlbGF0aW9uc2hpcHMoJHRoaXMtPnNwcmVhZFNoZWV0KSk7CgogICAgICAgICAgICAvLyBBZGQgZG9jdW1lbnQgcHJvcGVydGllcyB0byBaSVAgZmlsZQogICAgICAgICAgICAkb2JqWmlwLT5hZGRGcm9tU3RyaW5nKCdkb2NQcm9wcy9hcHAueG1sJywgJHRoaXMtPmdldFdyaXRlclBhcnQoJ0RvY1Byb3BzJyktPndyaXRlRG9jUHJvcHNBcHAoJHRoaXMtPnNwcmVhZFNoZWV0KSk7CiAgICAgICAgICAgICRvYmpaaXAtPmFkZEZyb21TdHJpbmcoJ2RvY1Byb3BzL2NvcmUueG1sJywgJHRoaXMtPmdldFdyaXRlclBhcnQoJ0RvY1Byb3BzJyktPndyaXRlRG9jUHJvcHNDb3JlKCR0aGlzLT5zcHJlYWRTaGVldCkpOwogICAgICAgICAgICAkY3VzdG9tUHJvcGVydGllc1BhcnQgPSAkdGhpcy0+Z2V0V3JpdGVyUGFydCgnRG9jUHJvcHMnKS0+d3JpdGVEb2NQcm9wc0N1c3RvbSgkdGhpcy0+c3ByZWFkU2hlZXQpOwogICAgICAgICAgICBpZiAoJGN1c3RvbVByb3BlcnRpZXNQYXJ0ICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAkb2JqWmlwLT5hZGRGcm9tU3RyaW5nKCdkb2NQcm9wcy9jdXN0b20ueG1sJywgJGN1c3RvbVByb3BlcnRpZXNQYXJ0KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gQWRkIHRoZW1lIHRvIFpJUCBmaWxlCiAgICAgICAgICAgICRvYmpaaXAtPmFkZEZyb21TdHJpbmcoJ3hsL3RoZW1lL3RoZW1lMS54bWwnLCAkdGhpcy0+Z2V0V3JpdGVyUGFydCgnVGhlbWUnKS0+d3JpdGVUaGVtZSgkdGhpcy0+c3ByZWFkU2hlZXQpKTsKCiAgICAgICAgICAgIC8vIEFkZCBzdHJpbmcgdGFibGUgdG8gWklQIGZpbGUKICAgICAgICAgICAgJG9ialppcC0+YWRkRnJvbVN0cmluZygneGwvc2hhcmVkU3RyaW5ncy54bWwnLCAkdGhpcy0+Z2V0V3JpdGVyUGFydCgnU3RyaW5nVGFibGUnKS0+d3JpdGVTdHJpbmdUYWJsZSgkdGhpcy0+c3RyaW5nVGFibGUpKTsKCiAgICAgICAgICAgIC8vIEFkZCBzdHlsZXMgdG8gWklQIGZpbGUKICAgICAgICAgICAgJG9ialppcC0+YWRkRnJvbVN0cmluZygneGwvc3R5bGVzLnhtbCcsICR0aGlzLT5nZXRXcml0ZXJQYXJ0KCdTdHlsZScpLT53cml0ZVN0eWxlcygkdGhpcy0+c3ByZWFkU2hlZXQpKTsKCiAgICAgICAgICAgIC8vIEFkZCB3b3JrYm9vayB0byBaSVAgZmlsZQogICAgICAgICAgICAkb2JqWmlwLT5hZGRGcm9tU3RyaW5nKCd4bC93b3JrYm9vay54bWwnLCAkdGhpcy0+Z2V0V3JpdGVyUGFydCgnV29ya2Jvb2snKS0+d3JpdGVXb3JrYm9vaygkdGhpcy0+c3ByZWFkU2hlZXQsICR0aGlzLT5wcmVDYWxjdWxhdGVGb3JtdWxhcykpOwoKICAgICAgICAgICAgJGNoYXJ0Q291bnQgPSAwOwogICAgICAgICAgICAvLyBBZGQgd29ya3NoZWV0cwogICAgICAgICAgICBmb3IgKCRpID0gMDsgJGkgPCAkdGhpcy0+c3ByZWFkU2hlZXQtPmdldFNoZWV0Q291bnQoKTsgKyskaSkgewogICAgICAgICAgICAgICAgJG9ialppcC0+YWRkRnJvbVN0cmluZygneGwvd29ya3NoZWV0cy9zaGVldCcgLiAoJGkgKyAxKSAuICcueG1sJywgJHRoaXMtPmdldFdyaXRlclBhcnQoJ1dvcmtzaGVldCcpLT53cml0ZVdvcmtzaGVldCgkdGhpcy0+c3ByZWFkU2hlZXQtPmdldFNoZWV0KCRpKSwgJHRoaXMtPnN0cmluZ1RhYmxlLCAkdGhpcy0+aW5jbHVkZUNoYXJ0cykpOwogICAgICAgICAgICAgICAgaWYgKCR0aGlzLT5pbmNsdWRlQ2hhcnRzKSB7CiAgICAgICAgICAgICAgICAgICAgJGNoYXJ0cyA9ICR0aGlzLT5zcHJlYWRTaGVldC0+Z2V0U2hlZXQoJGkpLT5nZXRDaGFydENvbGxlY3Rpb24oKTsKICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQoJGNoYXJ0cykgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRjaGFydHMgYXMgJGNoYXJ0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkb2JqWmlwLT5hZGRGcm9tU3RyaW5nKCd4bC9jaGFydHMvY2hhcnQnIC4gKCRjaGFydENvdW50ICsgMSkgLiAnLnhtbCcsICR0aGlzLT5nZXRXcml0ZXJQYXJ0KCdDaGFydCcpLT53cml0ZUNoYXJ0KCRjaGFydCwgJHRoaXMtPnByZUNhbGN1bGF0ZUZvcm11bGFzKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY2hhcnRDb3VudCsrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAkY2hhcnRSZWYxID0gJGNoYXJ0UmVmMiA9IDA7CiAgICAgICAgICAgIC8vIEFkZCB3b3Jrc2hlZXQgcmVsYXRpb25zaGlwcyAoZHJhd2luZ3MsIC4uLikKICAgICAgICAgICAgZm9yICgkaSA9IDA7ICRpIDwgJHRoaXMtPnNwcmVhZFNoZWV0LT5nZXRTaGVldENvdW50KCk7ICsrJGkpIHsKICAgICAgICAgICAgICAgIC8vIEFkZCByZWxhdGlvbnNoaXBzCiAgICAgICAgICAgICAgICAkb2JqWmlwLT5hZGRGcm9tU3RyaW5nKCd4bC93b3Jrc2hlZXRzL19yZWxzL3NoZWV0JyAuICgkaSArIDEpIC4gJy54bWwucmVscycsICR0aGlzLT5nZXRXcml0ZXJQYXJ0KCdSZWxzJyktPndyaXRlV29ya3NoZWV0UmVsYXRpb25zaGlwcygkdGhpcy0+c3ByZWFkU2hlZXQtPmdldFNoZWV0KCRpKSwgKCRpICsgMSksICR0aGlzLT5pbmNsdWRlQ2hhcnRzKSk7CgogICAgICAgICAgICAgICAgJGRyYXdpbmdzID0gJHRoaXMtPnNwcmVhZFNoZWV0LT5nZXRTaGVldCgkaSktPmdldERyYXdpbmdDb2xsZWN0aW9uKCk7CiAgICAgICAgICAgICAgICAkZHJhd2luZ0NvdW50ID0gY291bnQoJGRyYXdpbmdzKTsKICAgICAgICAgICAgICAgIGlmICgkdGhpcy0+aW5jbHVkZUNoYXJ0cykgewogICAgICAgICAgICAgICAgICAgICRjaGFydENvdW50ID0gJHRoaXMtPnNwcmVhZFNoZWV0LT5nZXRTaGVldCgkaSktPmdldENoYXJ0Q291bnQoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBBZGQgZHJhd2luZyBhbmQgaW1hZ2UgcmVsYXRpb25zaGlwIHBhcnRzCiAgICAgICAgICAgICAgICBpZiAoKCRkcmF3aW5nQ291bnQgPiAwKSB8fCAoJGNoYXJ0Q291bnQgPiAwKSkgewogICAgICAgICAgICAgICAgICAgIC8vIERyYXdpbmcgcmVsYXRpb25zaGlwcwogICAgICAgICAgICAgICAgICAgICRvYmpaaXAtPmFkZEZyb21TdHJpbmcoJ3hsL2RyYXdpbmdzL19yZWxzL2RyYXdpbmcnIC4gKCRpICsgMSkgLiAnLnhtbC5yZWxzJywgJHRoaXMtPmdldFdyaXRlclBhcnQoJ1JlbHMnKS0+d3JpdGVEcmF3aW5nUmVsYXRpb25zaGlwcygkdGhpcy0+c3ByZWFkU2hlZXQtPmdldFNoZWV0KCRpKSwgJGNoYXJ0UmVmMSwgJHRoaXMtPmluY2x1ZGVDaGFydHMpKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gRHJhd2luZ3MKICAgICAgICAgICAgICAgICAgICAkb2JqWmlwLT5hZGRGcm9tU3RyaW5nKCd4bC9kcmF3aW5ncy9kcmF3aW5nJyAuICgkaSArIDEpIC4gJy54bWwnLCAkdGhpcy0+Z2V0V3JpdGVyUGFydCgnRHJhd2luZycpLT53cml0ZURyYXdpbmdzKCR0aGlzLT5zcHJlYWRTaGVldC0+Z2V0U2hlZXQoJGkpLCAkY2hhcnRSZWYyLCAkdGhpcy0+aW5jbHVkZUNoYXJ0cykpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIEFkZCBjb21tZW50IHJlbGF0aW9uc2hpcCBwYXJ0cwogICAgICAgICAgICAgICAgaWYgKGNvdW50KCR0aGlzLT5zcHJlYWRTaGVldC0+Z2V0U2hlZXQoJGkpLT5nZXRDb21tZW50cygpKSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAvLyBWTUwgQ29tbWVudHMKICAgICAgICAgICAgICAgICAgICAkb2JqWmlwLT5hZGRGcm9tU3RyaW5nKCd4bC9kcmF3aW5ncy92bWxEcmF3aW5nJyAuICgkaSArIDEpIC4gJy52bWwnLCAkdGhpcy0+Z2V0V3JpdGVyUGFydCgnQ29tbWVudHMnKS0+d3JpdGVWTUxDb21tZW50cygkdGhpcy0+c3ByZWFkU2hlZXQtPmdldFNoZWV0KCRpKSkpOwoKICAgICAgICAgICAgICAgICAgICAvLyBDb21tZW50cwogICAgICAgICAgICAgICAgICAgICRvYmpaaXAtPmFkZEZyb21TdHJpbmcoJ3hsL2NvbW1lbnRzJyAuICgkaSArIDEpIC4gJy54bWwnLCAkdGhpcy0+Z2V0V3JpdGVyUGFydCgnQ29tbWVudHMnKS0+d3JpdGVDb21tZW50cygkdGhpcy0+c3ByZWFkU2hlZXQtPmdldFNoZWV0KCRpKSkpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIEFkZCBoZWFkZXIvZm9vdGVyIHJlbGF0aW9uc2hpcCBwYXJ0cwogICAgICAgICAgICAgICAgaWYgKGNvdW50KCR0aGlzLT5zcHJlYWRTaGVldC0+Z2V0U2hlZXQoJGkpLT5nZXRIZWFkZXJGb290ZXIoKS0+Z2V0SW1hZ2VzKCkpID4gMCkgewogICAgICAgICAgICAgICAgICAgIC8vIFZNTCBEcmF3aW5ncwogICAgICAgICAgICAgICAgICAgICRvYmpaaXAtPmFkZEZyb21TdHJpbmcoJ3hsL2RyYXdpbmdzL3ZtbERyYXdpbmdIRicgLiAoJGkgKyAxKSAuICcudm1sJywgJHRoaXMtPmdldFdyaXRlclBhcnQoJ0RyYXdpbmcnKS0+d3JpdGVWTUxIZWFkZXJGb290ZXJJbWFnZXMoJHRoaXMtPnNwcmVhZFNoZWV0LT5nZXRTaGVldCgkaSkpKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gVk1MIERyYXdpbmcgcmVsYXRpb25zaGlwcwogICAgICAgICAgICAgICAgICAgICRvYmpaaXAtPmFkZEZyb21TdHJpbmcoJ3hsL2RyYXdpbmdzL19yZWxzL3ZtbERyYXdpbmdIRicgLiAoJGkgKyAxKSAuICcudm1sLnJlbHMnLCAkdGhpcy0+Z2V0V3JpdGVyUGFydCgnUmVscycpLT53cml0ZUhlYWRlckZvb3RlckRyYXdpbmdSZWxhdGlvbnNoaXBzKCR0aGlzLT5zcHJlYWRTaGVldC0+Z2V0U2hlZXQoJGkpKSk7CgogICAgICAgICAgICAgICAgICAgIC8vIE1lZGlhCiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJHRoaXMtPnNwcmVhZFNoZWV0LT5nZXRTaGVldCgkaSktPmdldEhlYWRlckZvb3RlcigpLT5nZXRJbWFnZXMoKSBhcyAkaW1hZ2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJG9ialppcC0+YWRkRnJvbVN0cmluZygneGwvbWVkaWEvJyAuICRpbWFnZS0+Z2V0SW5kZXhlZEZpbGVuYW1lKCksIGZpbGVfZ2V0X2NvbnRlbnRzKCRpbWFnZS0+Z2V0UGF0aCgpKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBBZGQgbWVkaWEKICAgICAgICAgICAgZm9yICgkaSA9IDA7ICRpIDwgJHRoaXMtPmdldERyYXdpbmdIYXNoVGFibGUoKS0+Y291bnQoKTsgKyskaSkgewogICAgICAgICAgICAgICAgaWYgKCR0aGlzLT5nZXREcmF3aW5nSGFzaFRhYmxlKCktPmdldEJ5SW5kZXgoJGkpIGluc3RhbmNlb2YgUEhQRXhjZWxfV29ya3NoZWV0X0RyYXdpbmcpIHsKICAgICAgICAgICAgICAgICAgICAkaW1hZ2VDb250ZW50cyA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgJGltYWdlUGF0aCA9ICR0aGlzLT5nZXREcmF3aW5nSGFzaFRhYmxlKCktPmdldEJ5SW5kZXgoJGkpLT5nZXRQYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cnBvcygkaW1hZ2VQYXRoLCAnemlwOi8vJykgIT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRpbWFnZVBhdGggPSBzdWJzdHIoJGltYWdlUGF0aCwgNik7CiAgICAgICAgICAgICAgICAgICAgICAgICRpbWFnZVBhdGhTcGxpdHRlZCA9IGV4cGxvZGUoJyMnLCAkaW1hZ2VQYXRoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICRpbWFnZVppcCA9IG5ldyBaaXBBcmNoaXZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICRpbWFnZVppcC0+b3BlbigkaW1hZ2VQYXRoU3BsaXR0ZWRbMF0pOwogICAgICAgICAgICAgICAgICAgICAgICAkaW1hZ2VDb250ZW50cyA9ICRpbWFnZVppcC0+Z2V0RnJvbU5hbWUoJGltYWdlUGF0aFNwbGl0dGVkWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgJGltYWdlWmlwLT5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB1bnNldCgkaW1hZ2VaaXApOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRpbWFnZUNvbnRlbnRzID0gZmlsZV9nZXRfY29udGVudHMoJGltYWdlUGF0aCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAkb2JqWmlwLT5hZGRGcm9tU3RyaW5nKCd4bC9tZWRpYS8nIC4gc3RyX3JlcGxhY2UoJyAnLCAnXycsICR0aGlzLT5nZXREcmF3aW5nSGFzaFRhYmxlKCktPmdldEJ5SW5kZXgoJGkpLT5nZXRJbmRleGVkRmlsZW5hbWUoKSksICRpbWFnZUNvbnRlbnRzKTsKICAgICAgICAgICAgICAgIH0gZWxzZWlmICgkdGhpcy0+Z2V0RHJhd2luZ0hhc2hUYWJsZSgpLT5nZXRCeUluZGV4KCRpKSBpbnN0YW5jZW9mIFBIUEV4Y2VsX1dvcmtzaGVldF9NZW1vcnlEcmF3aW5nKSB7CiAgICAgICAgICAgICAgICAgICAgb2Jfc3RhcnQoKTsKICAgICAgICAgICAgICAgICAgICBjYWxsX3VzZXJfZnVuYygKICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmdldERyYXdpbmdIYXNoVGFibGUoKS0+Z2V0QnlJbmRleCgkaSktPmdldFJlbmRlcmluZ0Z1bmN0aW9uKCksCiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLT5nZXREcmF3aW5nSGFzaFRhYmxlKCktPmdldEJ5SW5kZXgoJGkpLT5nZXRJbWFnZVJlc291cmNlKCkKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICRpbWFnZUNvbnRlbnRzID0gb2JfZ2V0X2NvbnRlbnRzKCk7CiAgICAgICAgICAgICAgICAgICAgb2JfZW5kX2NsZWFuKCk7CgogICAgICAgICAgICAgICAgICAgICRvYmpaaXAtPmFkZEZyb21TdHJpbmcoJ3hsL21lZGlhLycgLiBzdHJfcmVwbGFjZSgnICcsICdfJywgJHRoaXMtPmdldERyYXdpbmdIYXNoVGFibGUoKS0+Z2V0QnlJbmRleCgkaSktPmdldEluZGV4ZWRGaWxlbmFtZSgpKSwgJGltYWdlQ29udGVudHMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBQSFBFeGNlbF9DYWxjdWxhdGlvbl9GdW5jdGlvbnM6OnNldFJldHVybkRhdGVUeXBlKCRzYXZlRGF0ZVJldHVyblR5cGUpOwogICAgICAgICAgICBQSFBFeGNlbF9DYWxjdWxhdGlvbjo6Z2V0SW5zdGFuY2UoJHRoaXMtPnNwcmVhZFNoZWV0KS0+Z2V0RGVidWdMb2coKS0+c2V0V3JpdGVEZWJ1Z0xvZygkc2F2ZURlYnVnTG9nKTsKCiAgICAgICAgICAgIC8vIENsb3NlIGZpbGUKICAgICAgICAgICAgaWYgKCRvYmpaaXAtPmNsb3NlKCkgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUEhQRXhjZWxfV3JpdGVyX0V4Y2VwdGlvbigiQ291bGQgbm90IGNsb3NlIHppcCBmaWxlICRwRmlsZW5hbWUuIik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIElmIGEgdGVtcG9yYXJ5IGZpbGUgd2FzIHVzZWQsIGNvcHkgaXQgdG8gdGhlIGNvcnJlY3QgZmlsZSBzdHJlYW0KICAgICAgICAgICAgaWYgKCRvcmlnaW5hbEZpbGVuYW1lICE9ICRwRmlsZW5hbWUpIHsKICAgICAgICAgICAgICAgIGlmIChjb3B5KCRwRmlsZW5hbWUsICRvcmlnaW5hbEZpbGVuYW1lKSA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUEhQRXhjZWxfV3JpdGVyX0V4Y2VwdGlvbigiQ291bGQgbm90IGNvcHkgdGVtcG9yYXJ5IHppcCBmaWxlICRwRmlsZW5hbWUgdG8gJG9yaWdpbmFsRmlsZW5hbWUuIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBAdW5saW5rKCRwRmlsZW5hbWUpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFBIUEV4Y2VsX1dyaXRlcl9FeGNlcHRpb24oIlBIUEV4Y2VsIG9iamVjdCB1bmFzc2lnbmVkLiIpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEdldCBQSFBFeGNlbCBvYmplY3QKICAgICAqCiAgICAgKiBAcmV0dXJuIFBIUEV4Y2VsCiAgICAgKiBAdGhyb3dzIFBIUEV4Y2VsX1dyaXRlcl9FeGNlcHRpb24KICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldFBIUEV4Y2VsKCkKICAgIHsKICAgICAgICBpZiAoJHRoaXMtPnNwcmVhZFNoZWV0ICE9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+c3ByZWFkU2hlZXQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFBIUEV4Y2VsX1dyaXRlcl9FeGNlcHRpb24oIk5vIFBIUEV4Y2VsIG9iamVjdCBhc3NpZ25lZC4iKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgUEhQRXhjZWwgb2JqZWN0CiAgICAgKgogICAgICogQHBhcmFtICAgICBQSFBFeGNlbCAgICAgJHBQSFBFeGNlbCAgICBQSFBFeGNlbCBvYmplY3QKICAgICAqIEB0aHJvd3MgICAgUEhQRXhjZWxfV3JpdGVyX0V4Y2VwdGlvbgogICAgICogQHJldHVybiBQSFBFeGNlbF9Xcml0ZXJfRXhjZWwyMDA3CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBzZXRQSFBFeGNlbChQSFBFeGNlbCAkcFBIUEV4Y2VsID0gbnVsbCkKICAgIHsKICAgICAgICAkdGhpcy0+c3ByZWFkU2hlZXQgPSAkcFBIUEV4Y2VsOwogICAgICAgIHJldHVybiAkdGhpczsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBzdHJpbmcgdGFibGUKICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZ1tdCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRTdHJpbmdUYWJsZSgpCiAgICB7CiAgICAgICAgcmV0dXJuICR0aGlzLT5zdHJpbmdUYWJsZTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBQSFBFeGNlbF9TdHlsZSBIYXNoVGFibGUKICAgICAqCiAgICAgKiBAcmV0dXJuIFBIUEV4Y2VsX0hhc2hUYWJsZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0U3R5bGVIYXNoVGFibGUoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+c3R5bGVIYXNoVGFibGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgUEhQRXhjZWxfU3R5bGVfQ29uZGl0aW9uYWwgSGFzaFRhYmxlCiAgICAgKgogICAgICogQHJldHVybiBQSFBFeGNlbF9IYXNoVGFibGUKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldFN0eWxlc0NvbmRpdGlvbmFsSGFzaFRhYmxlKCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPnN0eWxlc0NvbmRpdGlvbmFsSGFzaFRhYmxlOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IFBIUEV4Y2VsX1N0eWxlX0ZpbGwgSGFzaFRhYmxlCiAgICAgKgogICAgICogQHJldHVybiBQSFBFeGNlbF9IYXNoVGFibGUKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldEZpbGxIYXNoVGFibGUoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+ZmlsbEhhc2hUYWJsZTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBQSFBFeGNlbF9TdHlsZV9Gb250IEhhc2hUYWJsZQogICAgICoKICAgICAqIEByZXR1cm4gUEhQRXhjZWxfSGFzaFRhYmxlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRGb250SGFzaFRhYmxlKCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmZvbnRIYXNoVGFibGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgUEhQRXhjZWxfU3R5bGVfQm9yZGVycyBIYXNoVGFibGUKICAgICAqCiAgICAgKiBAcmV0dXJuIFBIUEV4Y2VsX0hhc2hUYWJsZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0Qm9yZGVyc0hhc2hUYWJsZSgpCiAgICB7CiAgICAgICAgcmV0dXJuICR0aGlzLT5ib3JkZXJzSGFzaFRhYmxlOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IFBIUEV4Y2VsX1N0eWxlX051bWJlckZvcm1hdCBIYXNoVGFibGUKICAgICAqCiAgICAgKiBAcmV0dXJuIFBIUEV4Y2VsX0hhc2hUYWJsZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0TnVtRm10SGFzaFRhYmxlKCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPm51bUZtdEhhc2hUYWJsZTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBQSFBFeGNlbF9Xb3Jrc2hlZXRfQmFzZURyYXdpbmcgSGFzaFRhYmxlCiAgICAgKgogICAgICogQHJldHVybiBQSFBFeGNlbF9IYXNoVGFibGUKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldERyYXdpbmdIYXNoVGFibGUoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+ZHJhd2luZ0hhc2hUYWJsZTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBPZmZpY2UyMDAzIGNvbXBhdGliaWxpdHkKICAgICAqCiAgICAgKiBAcmV0dXJuIGJvb2xlYW4KICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldE9mZmljZTIwMDNDb21wYXRpYmlsaXR5KCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPm9mZmljZTIwMDNjb21wYXRpYmlsaXR5OwogICAgfQoKICAgIC8qKgogICAgICogU2V0IE9mZmljZTIwMDMgY29tcGF0aWJpbGl0eQogICAgICoKICAgICAqIEBwYXJhbSBib29sZWFuICRwVmFsdWUgICAgT2ZmaWNlMjAwMyBjb21wYXRpYmlsaXR5PwogICAgICogQHJldHVybiBQSFBFeGNlbF9Xcml0ZXJfRXhjZWwyMDA3CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBzZXRPZmZpY2UyMDAzQ29tcGF0aWJpbGl0eSgkcFZhbHVlID0gZmFsc2UpCiAgICB7CiAgICAgICAgJHRoaXMtPm9mZmljZTIwMDNjb21wYXRpYmlsaXR5ID0gJHBWYWx1ZTsKICAgICAgICByZXR1cm4gJHRoaXM7CiAgICB9Cn0K",
    "size": "21996"
}