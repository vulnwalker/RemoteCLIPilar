{
    "namaFile": "pages\/admin\/menu\/assets\/js\/libs\/DataTables\/extensions\/FixedHeader\/js\/dataTables.fixedHeader.js",
    "lastUpdate": "2018-03-22+14:27:38.82",
    "contentFile": "LyohIEZpeGVkSGVhZGVyIDIuMS4yCiAqIMKpMjAxMC0yMDE0IFNwcnlNZWRpYSBMdGQgLSBkYXRhdGFibGVzLm5ldC9saWNlbnNlCiAqLwoKLyoqCiAqIEBzdW1tYXJ5ICAgICBGaXhlZEhlYWRlcgogKiBAZGVzY3JpcHRpb24gRml4IGEgdGFibGUncyBoZWFkZXIgb3IgZm9vdGVyLCBzbyBpdCBpcyBhbHdheXMgdmlzaWJsZSB3aGlsZQogKiAgICAgICAgICAgICAgU2Nyb2xsaW5nCiAqIEB2ZXJzaW9uICAgICAyLjEuMgogKiBAZmlsZSAgICAgICAgZGF0YVRhYmxlcy5maXhlZEhlYWRlci5qcwogKiBAYXV0aG9yICAgICAgU3ByeU1lZGlhIEx0ZCAod3d3LnNwcnltZWRpYS5jby51aykKICogQGNvbnRhY3QgICAgIHd3dy5zcHJ5bWVkaWEuY28udWsvY29udGFjdAogKiBAY29weXJpZ2h0ICAgQ29weXJpZ2h0IDIwMDktMjAxNCBTcHJ5TWVkaWEgTHRkLgogKgogKiBUaGlzIHNvdXJjZSBmaWxlIGlzIGZyZWUgc29mdHdhcmUsIGF2YWlsYWJsZSB1bmRlciB0aGUgZm9sbG93aW5nIGxpY2Vuc2U6CiAqICAgTUlUIGxpY2Vuc2UgLSBodHRwOi8vZGF0YXRhYmxlcy5uZXQvbGljZW5zZS9taXQKICoKICogVGhpcyBzb3VyY2UgZmlsZSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLCBidXQKICogV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZiBNRVJDSEFOVEFCSUxJVFkKICogb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGUgbGljZW5zZSBmaWxlcyBmb3IgZGV0YWlscy4KICoKICogRm9yIGRldGFpbHMgcGxlYXNlIHJlZmVyIHRvOiBodHRwOi8vd3d3LmRhdGF0YWJsZXMubmV0CiAqLwoKLyogR2xvYmFsIHNjb3BlIGZvciBGaXhlZENvbHVtbnMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IC0gd2lsbCBiZSByZW1vdmVkCiAqIGluIGZ1dHVyZS4gTm90IGRvY3VtZW50ZWQgaW4gMS4xLnguCiAqLwoKLyogR2xvYmFsIHNjb3BlIGZvciBGaXhlZENvbHVtbnMgKi8KdmFyIEZpeGVkSGVhZGVyOwoKKGZ1bmN0aW9uKHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkgewoKCnZhciBmYWN0b3J5ID0gZnVuY3Rpb24oICQsIERhdGFUYWJsZSApIHsKInVzZSBzdHJpY3QiOwoKLyoKICogRnVuY3Rpb246IEZpeGVkSGVhZGVyCiAqIFB1cnBvc2U6ICBQcm92aWRlICdmaXhlZCcgaGVhZGVyLCBmb290ZXIgYW5kIGNvbHVtbnMgZm9yIGEgRGF0YVRhYmxlCiAqIFJldHVybnM6ICBvYmplY3Q6Rml4ZWRIZWFkZXIgLSBtdXN0IGJlIGNhbGxlZCB3aXRoICduZXcnCiAqIElucHV0czogICBtaXhlZDptVGFibGUgLSB0YXJnZXQgdGFibGUKICogIEBwYXJhbSB7b2JqZWN0fSBkdCBEYXRhVGFibGVzIGluc3RhbmNlIG9yIEhUTUwgdGFibGUgbm9kZS4gV2l0aCBEYXRhVGFibGVzCiAqICAgIDEuMTAgdGhpcyBjYW4gYWxzbyBiZSBhIGpRdWVyeSBjb2xsZWN0aW9uICh3aXRoIGp1c3QgYSBzaW5nbGUgdGFibGUgaW4gaXRzCiAqICAgIHJlc3VsdCBzZXQpLCBhIGpRdWVyeSBzZWxlY3RvciwgRGF0YVRhYmxlcyBBUEkgaW5zdGFuY2Ugb3Igc2V0dGluZ3MKICogICAgb2JqZWN0LgogKiAgQHBhcmFtIHtvYmplY3R9IFtvSW5pdF0gaW5pdGlhbGlzYXRpb24gc2V0dGluZ3MsIHdpdGggdGhlIGZvbGxvd2luZwogKiAgICBwcm9wZXJ0aWVzIChlYWNoIG9wdGlvbmFsKQogKiAgICAqIGJvb2w6dG9wIC0gICAgZml4IHRoZSBoZWFkZXIgKGRlZmF1bHQgdHJ1ZSkKICogICAgKiBib29sOmJvdHRvbSAtIGZpeCB0aGUgZm9vdGVyIChkZWZhdWx0IGZhbHNlKQogKiAgICAqIGludDpsZWZ0IC0gICAgZml4IHRoZSBsZWZ0IGNvbHVtbihzKSAoZGVmYXVsdCAwKQogKiAgICAqIGludDpyaWdodCAtICAgZml4IHRoZSByaWdodCBjb2x1bW4ocykgKGRlZmF1bHQgMCkKICogICAgKiBpbnQ6elRvcCAtICAgIGZpeGVkIGhlYWRlciB6SW5kZXgKICogICAgKiBpbnQ6ekJvdHRvbSAtIGZpeGVkIGZvb3RlciB6SW5kZXgKICogICAgKiBpbnQ6ekxlZnQgLSAgIGZpeGVkIGxlZnQgekluZGV4CiAqICAgICogaW50OnpSaWdodCAtICBmaXhlZCByaWdodCB6SW5kZXgKICovCkZpeGVkSGVhZGVyID0gZnVuY3Rpb24gKCBtVGFibGUsIG9Jbml0ICkgewoJLyogU2FuaXR5IGNoZWNrIC0geW91IGp1c3Qga25vdyBpdCB3aWxsIGhhcHBlbiAqLwoJaWYgKCAhIHRoaXMgaW5zdGFuY2VvZiBGaXhlZEhlYWRlciApCgl7CgkJYWxlcnQoICJGaXhlZEhlYWRlciB3YXJuaW5nOiBGaXhlZEhlYWRlciBtdXN0IGJlIGluaXRpYWxpc2VkIHdpdGggdGhlICduZXcnIGtleXdvcmQuIiApOwoJCXJldHVybjsKCX0KCgl2YXIgdGhhdCA9IHRoaXM7Cgl2YXIgb1NldHRpbmdzID0gewoJCSJhb0NhY2hlIjogW10sCgkJIm9TaWRlcyI6IHsKCQkJInRvcCI6IHRydWUsCgkJCSJib3R0b20iOiBmYWxzZSwKCQkJImxlZnQiOiAwLAoJCQkicmlnaHQiOiAwCgkJfSwKCQkib1pJbmRleGVzIjogewoJCQkidG9wIjogMTA0LAoJCQkiYm90dG9tIjogMTAzLAoJCQkibGVmdCI6IDEwMiwKCQkJInJpZ2h0IjogMTAxCgkJfSwKCQkib0Nsb25lT25EcmF3IjogewoJCQkidG9wIjogZmFsc2UsCgkJCSJib3R0b20iOiBmYWxzZSwKCQkJImxlZnQiOiB0cnVlLAoJCQkicmlnaHQiOiB0cnVlCgkJfSwKCQkib01lcyI6IHsKCQkJImlUYWJsZVdpZHRoIjogMCwKCQkJImlUYWJsZUhlaWdodCI6IDAsCgkJCSJpVGFibGVMZWZ0IjogMCwKCQkJImlUYWJsZVJpZ2h0IjogMCwgLyogbm90ZSB0aGlzIGlzIGxlZnQrd2lkdGgsIG5vdCBhY3R1YWxseSAicmlnaHQiICovCgkJCSJpVGFibGVUb3AiOiAwLAoJCQkiaVRhYmxlQm90dG9tIjogMCAvKiBub3RlIHRoaXMgaXMgdG9wK2hlaWdodCwgbm90IGFjdHVhbGx5ICJib3R0b20iICovCgkJfSwKCQkib09mZnNldCI6IHsKCQkJInRvcCI6IDAKCQl9LAoJCSJuVGFibGUiOiBudWxsLAoJCSJiRm9vdGVyIjogZmFsc2UsCgkJImJJbml0Q29tcGxldGUiOiBmYWxzZQoJfTsKCgkvKgoJICogRnVuY3Rpb246IGZuR2V0U2V0dGluZ3MKCSAqIFB1cnBvc2U6ICBHZXQgdGhlIHNldHRpbmdzIGZvciB0aGlzIG9iamVjdAoJICogUmV0dXJuczogIG9iamVjdDogLSBzZXR0aW5ncyBvYmplY3QKCSAqIElucHV0czogICAtCgkgKi8KCXRoaXMuZm5HZXRTZXR0aW5ncyA9IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gb1NldHRpbmdzOwoJfTsKCgkvKgoJICogRnVuY3Rpb246IGZuVXBkYXRlCgkgKiBQdXJwb3NlOiAgVXBkYXRlIHRoZSBwb3NpdGlvbmluZyBhbmQgY29waWVzIG9mIHRoZSBmaXhlZCBlbGVtZW50cwoJICogUmV0dXJuczogIC0KCSAqIElucHV0czogICAtCgkgKi8KCXRoaXMuZm5VcGRhdGUgPSBmdW5jdGlvbiAoKSB7CgkJdGhpcy5fZm5VcGRhdGVDbG9uZXMoKTsKCQl0aGlzLl9mblVwZGF0ZVBvc2l0aW9ucygpOwoJfTsKCgkvKgoJICogRnVuY3Rpb246IGZuUG9zaXRpb24KCSAqIFB1cnBvc2U6ICBVcGRhdGUgdGhlIHBvc2l0aW9uaW5nIG9mIHRoZSBmaXhlZCBlbGVtZW50cwoJICogUmV0dXJuczogIC0KCSAqIElucHV0czogICAtCgkgKi8KCXRoaXMuZm5Qb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHsKCQl0aGlzLl9mblVwZGF0ZVBvc2l0aW9ucygpOwoJfTsKCgoJdmFyIGR0ID0gJC5mbi5kYXRhVGFibGUuQXBpID8KCQluZXcgJC5mbi5kYXRhVGFibGUuQXBpKCBtVGFibGUgKS5zZXR0aW5ncygpWzBdIDoKCQltVGFibGUuZm5TZXR0aW5ncygpOwoKCWR0Ll9vUGx1Z2luRml4ZWRIZWFkZXIgPSB0aGlzOwoKCS8qIExldCdzIGRvIGl0ICovCgl0aGlzLmZuSW5pdCggZHQsIG9Jbml0ICk7Cgp9OwoKCi8qCiAqIFZhcmlhYmxlOiBGaXhlZEhlYWRlcgogKiBQdXJwb3NlOiAgUHJvdG90eXBlIGZvciBGaXhlZEhlYWRlcgogKiBTY29wZTogICAgZ2xvYmFsCiAqLwpGaXhlZEhlYWRlci5wcm90b3R5cGUgPSB7CgkvKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoKCSAqIEluaXRpYWxpc2F0aW9uCgkgKi8KCgkvKgoJICogRnVuY3Rpb246IGZuSW5pdAoJICogUHVycG9zZTogIFRoZSAiY29uc3RydWN0b3IiCgkgKiBSZXR1cm5zOiAgLQoJICogSW5wdXRzOiAgIHthcyBGaXhlZEhlYWRlciBmdW5jdGlvbn0KCSAqLwoJZm5Jbml0OiBmdW5jdGlvbiAoIG9EdFNldHRpbmdzLCBvSW5pdCApCgl7CgkJdmFyIHMgPSB0aGlzLmZuR2V0U2V0dGluZ3MoKTsKCQl2YXIgdGhhdCA9IHRoaXM7CgoJCS8qIFJlY29yZCB0aGUgdXNlciBkZWZpbmFibGUgc2V0dGluZ3MgKi8KCQl0aGlzLmZuSW5pdFNldHRpbmdzKCBzLCBvSW5pdCApOwoKCQlpZiAoIG9EdFNldHRpbmdzLm9TY3JvbGwuc1ggIT09ICIiIHx8IG9EdFNldHRpbmdzLm9TY3JvbGwuc1kgIT09ICIiICkKCQl7CgkJCWFsZXJ0KCAiRml4ZWRIZWFkZXIgMiBpcyBub3Qgc3VwcG9ydGVkIHdpdGggRGF0YVRhYmxlcycgc2Nyb2xsaW5nIG1vZGUgYXQgdGhpcyB0aW1lIiApOwoJCQlyZXR1cm47CgkJfQoKCQlzLm5UYWJsZSA9IG9EdFNldHRpbmdzLm5UYWJsZTsKCQlvRHRTZXR0aW5ncy5hb0RyYXdDYWxsYmFjay51bnNoaWZ0KCB7CgkJCSJmbiI6IGZ1bmN0aW9uICgpIHsKCQkJCUZpeGVkSGVhZGVyLmZuTWVhc3VyZSgpOwoJCQkJdGhhdC5fZm5VcGRhdGVDbG9uZXMuY2FsbCh0aGF0KTsKCQkJCXRoYXQuX2ZuVXBkYXRlUG9zaXRpb25zLmNhbGwodGhhdCk7CgkJCX0sCgkJCSJzTmFtZSI6ICJGaXhlZEhlYWRlciIKCQl9ICk7CgoJCXMuYkZvb3RlciA9ICgkKCc+dGZvb3QnLCBzLm5UYWJsZSkubGVuZ3RoID4gMCkgPyB0cnVlIDogZmFsc2U7CgoJCS8qIEFkZCB0aGUgJ3NpZGVzJyB0aGF0IGFyZSBmaXhlZCAqLwoJCWlmICggcy5vU2lkZXMudG9wICkKCQl7CgkJCXMuYW9DYWNoZS5wdXNoKCB0aGF0Ll9mbkNsb25lVGFibGUoICJmaXhlZEhlYWRlciIsICJGaXhlZEhlYWRlcl9IZWFkZXIiLCB0aGF0Ll9mbkNsb25lVGhlYWQgKSApOwoJCX0KCQlpZiAoIHMub1NpZGVzLmJvdHRvbSApCgkJewoJCQlzLmFvQ2FjaGUucHVzaCggdGhhdC5fZm5DbG9uZVRhYmxlKCAiZml4ZWRGb290ZXIiLCAiRml4ZWRIZWFkZXJfRm9vdGVyIiwgdGhhdC5fZm5DbG9uZVRmb290ICkgKTsKCQl9CgkJaWYgKCBzLm9TaWRlcy5sZWZ0ICkKCQl7CgkJCXMuYW9DYWNoZS5wdXNoKCB0aGF0Ll9mbkNsb25lVGFibGUoICJmaXhlZExlZnQiLCAiRml4ZWRIZWFkZXJfTGVmdCIsIHRoYXQuX2ZuQ2xvbmVUTGVmdCwgcy5vU2lkZXMubGVmdCApICk7CgkJfQoJCWlmICggcy5vU2lkZXMucmlnaHQgKQoJCXsKCQkJcy5hb0NhY2hlLnB1c2goIHRoYXQuX2ZuQ2xvbmVUYWJsZSggImZpeGVkUmlnaHQiLCAiRml4ZWRIZWFkZXJfUmlnaHQiLCB0aGF0Ll9mbkNsb25lVFJpZ2h0LCBzLm9TaWRlcy5yaWdodCApICk7CgkJfQoKCQkvKiBFdmVudCBsaXN0ZW5lcnMgZm9yIHdpbmRvdyBtb3ZlbWVudCAqLwoJCUZpeGVkSGVhZGVyLmFmblNjcm9sbC5wdXNoKCBmdW5jdGlvbiAoKSB7CgkJCXRoYXQuX2ZuVXBkYXRlUG9zaXRpb25zLmNhbGwodGhhdCk7CgkJfSApOwoKCQkkKHdpbmRvdykucmVzaXplKCBmdW5jdGlvbiAoKSB7CgkJCUZpeGVkSGVhZGVyLmZuTWVhc3VyZSgpOwoJCQl0aGF0Ll9mblVwZGF0ZUNsb25lcy5jYWxsKHRoYXQpOwoJCQl0aGF0Ll9mblVwZGF0ZVBvc2l0aW9ucy5jYWxsKHRoYXQpOwoJCX0gKTsKCgkJJChzLm5UYWJsZSkKCQkJLm9uKCdjb2x1bW4tcmVvcmRlci5kdCcsIGZ1bmN0aW9uICgpIHsKCQkJCUZpeGVkSGVhZGVyLmZuTWVhc3VyZSgpOwoJCQkJdGhhdC5fZm5VcGRhdGVDbG9uZXMoIHRydWUgKTsKCQkJCXRoYXQuX2ZuVXBkYXRlUG9zaXRpb25zKCk7CgkJCX0gKQoJCQkub24oJ2NvbHVtbi12aXNpYmlsaXR5LmR0JywgZnVuY3Rpb24gKCkgewoJCQkJRml4ZWRIZWFkZXIuZm5NZWFzdXJlKCk7CgkJCQl0aGF0Ll9mblVwZGF0ZUNsb25lcyggdHJ1ZSApOwoJCQkJdGhhdC5fZm5VcGRhdGVQb3NpdGlvbnMoKTsKCQkJfSApOwoKCQkvKiBHZXQgdGhpbmdzIHJpZ2h0IHRvIHN0YXJ0IHdpdGggKi8KCQlGaXhlZEhlYWRlci5mbk1lYXN1cmUoKTsKCQl0aGF0Ll9mblVwZGF0ZUNsb25lcygpOwoJCXRoYXQuX2ZuVXBkYXRlUG9zaXRpb25zKCk7CgoJCXMuYkluaXRDb21wbGV0ZSA9IHRydWU7Cgl9LAoKCgkvKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoKCSAqIFN1cHBvcnQgZnVuY3Rpb25zCgkgKi8KCgkvKgoJICogRnVuY3Rpb246IGZuSW5pdFNldHRpbmdzCgkgKiBQdXJwb3NlOiAgVGFrZSB0aGUgdXNlcidzIHNldHRpbmdzIGFuZCBjb3B5IHRoZW0gdG8gb3VyIGxvY2FsIHN0b3JlCgkgKiBSZXR1cm5zOiAgLQoJICogSW5wdXRzOiAgIG9iamVjdDpzIC0gdGhlIGxvY2FsIHNldHRpbmdzIG9iamVjdAoJICogICAgICAgICAgIG9iamVjdDpvSW5pdCAtIHRoZSB1c2VyJ3Mgc2V0dGluZ3Mgb2JqZWN0CgkgKi8KCWZuSW5pdFNldHRpbmdzOiBmdW5jdGlvbiAoIHMsIG9Jbml0ICkKCXsKCQlpZiAoIG9Jbml0ICE9PSB1bmRlZmluZWQgKQoJCXsKCQkJaWYgKCBvSW5pdC50b3AgIT09IHVuZGVmaW5lZCApIHsKCQkJCXMub1NpZGVzLnRvcCA9IG9Jbml0LnRvcDsKCQkJfQoJCQlpZiAoIG9Jbml0LmJvdHRvbSAhPT0gdW5kZWZpbmVkICkgewoJCQkJcy5vU2lkZXMuYm90dG9tID0gb0luaXQuYm90dG9tOwoJCQl9CgkJCWlmICggdHlwZW9mIG9Jbml0LmxlZnQgPT0gJ2Jvb2xlYW4nICkgewoJCQkJcy5vU2lkZXMubGVmdCA9IG9Jbml0LmxlZnQgPyAxIDogMDsKCQkJfQoJCQllbHNlIGlmICggb0luaXQubGVmdCAhPT0gdW5kZWZpbmVkICkgewoJCQkJcy5vU2lkZXMubGVmdCA9IG9Jbml0LmxlZnQ7CgkJCX0KCQkJaWYgKCB0eXBlb2Ygb0luaXQucmlnaHQgPT0gJ2Jvb2xlYW4nICkgewoJCQkJcy5vU2lkZXMucmlnaHQgPSBvSW5pdC5yaWdodCA\/IDEgOiAwOwoJCQl9CgkJCWVsc2UgaWYgKCBvSW5pdC5yaWdodCAhPT0gdW5kZWZpbmVkICkgewoJCQkJcy5vU2lkZXMucmlnaHQgPSBvSW5pdC5yaWdodDsKCQkJfQoKCQkJaWYgKCBvSW5pdC56VG9wICE9PSB1bmRlZmluZWQgKSB7CgkJCQlzLm9aSW5kZXhlcy50b3AgPSBvSW5pdC56VG9wOwoJCQl9CgkJCWlmICggb0luaXQuekJvdHRvbSAhPT0gdW5kZWZpbmVkICkgewoJCQkJcy5vWkluZGV4ZXMuYm90dG9tID0gb0luaXQuekJvdHRvbTsKCQkJfQoJCQlpZiAoIG9Jbml0LnpMZWZ0ICE9PSB1bmRlZmluZWQgKSB7CgkJCQlzLm9aSW5kZXhlcy5sZWZ0ID0gb0luaXQuekxlZnQ7CgkJCX0KCQkJaWYgKCBvSW5pdC56UmlnaHQgIT09IHVuZGVmaW5lZCApIHsKCQkJCXMub1pJbmRleGVzLnJpZ2h0ID0gb0luaXQuelJpZ2h0OwoJCQl9CgoJCQlpZiAoIG9Jbml0Lm9mZnNldFRvcCAhPT0gdW5kZWZpbmVkICkgewoJCQkJcy5vT2Zmc2V0LnRvcCA9IG9Jbml0Lm9mZnNldFRvcDsKCQkJfQoJCQlpZiAoIG9Jbml0LmFsd2F5c0Nsb25lVG9wICE9PSB1bmRlZmluZWQgKSB7CgkJCQlzLm9DbG9uZU9uRHJhdy50b3AgPSBvSW5pdC5hbHdheXNDbG9uZVRvcDsKCQkJfQoJCQlpZiAoIG9Jbml0LmFsd2F5c0Nsb25lQm90dG9tICE9PSB1bmRlZmluZWQgKSB7CgkJCQlzLm9DbG9uZU9uRHJhdy5ib3R0b20gPSBvSW5pdC5hbHdheXNDbG9uZUJvdHRvbTsKCQkJfQoJCQlpZiAoIG9Jbml0LmFsd2F5c0Nsb25lTGVmdCAhPT0gdW5kZWZpbmVkICkgewoJCQkJcy5vQ2xvbmVPbkRyYXcubGVmdCA9IG9Jbml0LmFsd2F5c0Nsb25lTGVmdDsKCQkJfQoJCQlpZiAoIG9Jbml0LmFsd2F5c0Nsb25lUmlnaHQgIT09IHVuZGVmaW5lZCApIHsKCQkJCXMub0Nsb25lT25EcmF3LnJpZ2h0ID0gb0luaXQuYWx3YXlzQ2xvbmVSaWdodDsKCQkJfQoJCX0KCX0sCgoJLyoKCSAqIEZ1bmN0aW9uOiBfZm5DbG9uZVRhYmxlCgkgKiBQdXJwb3NlOiAgQ2xvbmUgdGhlIHRhYmxlIG5vZGUgYW5kIGRvIGJhc2ljIGluaXRpYWxpc2F0aW9uCgkgKiBSZXR1cm5zOiAgLQoJICogSW5wdXRzOiAgIC0KCSAqLwoJX2ZuQ2xvbmVUYWJsZTogZnVuY3Rpb24gKCBzVHlwZSwgc0NsYXNzLCBmbkNsb25lLCBpQ2VsbHMgKQoJewoJCXZhciBzID0gdGhpcy5mbkdldFNldHRpbmdzKCk7CgkJdmFyIG5DVGFibGU7CgoJCS8qIFdlIGtub3cgdGhhdCB0aGUgdGFibGUgX01VU1RfIGhhcyBhIERJViB3cmFwcGVkIGFyb3VuZCBpdCwgYmVjYXVzZSB0aGlzIGlzIHNpbXBseSBob3cKCQkgKiBEYXRhVGFibGVzIHdvcmtzLiBUaGVyZWZvcmUsIHdlIGNhbiBzZXQgdGhpcyB0byBiZSByZWxhdGl2ZWx5IHBvc2l0aW9uIChpZiBpdCBpcyBub3QKCQkgKiBhbHJlYWR1IGFic29sdXRlLCBhbmQgdXNlIHRoaXMgYXMgdGhlIGJhc2UgcG9pbnQgZm9yIHRoZSBjbG9uZWQgaGVhZGVyCgkJICovCgkJaWYgKCAkKHMublRhYmxlLnBhcmVudE5vZGUpLmNzcygncG9zaXRpb24nKSAhPSAiYWJzb2x1dGUiICkKCQl7CgkJCXMublRhYmxlLnBhcmVudE5vZGUuc3R5bGUucG9zaXRpb24gPSAicmVsYXRpdmUiOwoJCX0KCgkJLyogSnVzdCBhIHNoYWxsb3cgY2xvbmUgd2lsbCBkbyAtIHdlIG9ubHkgd2FudCB0aGUgdGFibGUgbm9kZSAqLwoJCW5DVGFibGUgPSBzLm5UYWJsZS5jbG9uZU5vZGUoIGZhbHNlICk7CgkJbkNUYWJsZS5yZW1vdmVBdHRyaWJ1dGUoICdpZCcgKTsKCgkJdmFyIG5EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApOwoJCW5EaXYuc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwoJCW5EaXYuc3R5bGUudG9wID0gIjBweCI7CgkJbkRpdi5zdHlsZS5sZWZ0ID0gIjBweCI7CgkJbkRpdi5jbGFzc05hbWUgKz0gIiBGaXhlZEhlYWRlcl9DbG9uZWQgIitzVHlwZSsiICIrc0NsYXNzOwoKCQkvKiBTZXQgdGhlIHpJbmRleGVzICovCgkJaWYgKCBzVHlwZSA9PSAiZml4ZWRIZWFkZXIiICkKCQl7CgkJCW5EaXYuc3R5bGUuekluZGV4ID0gcy5vWkluZGV4ZXMudG9wOwoJCX0KCQlpZiAoIHNUeXBlID09ICJmaXhlZEZvb3RlciIgKQoJCXsKCQkJbkRpdi5zdHlsZS56SW5kZXggPSBzLm9aSW5kZXhlcy5ib3R0b207CgkJfQoJCWlmICggc1R5cGUgPT0gImZpeGVkTGVmdCIgKQoJCXsKCQkJbkRpdi5zdHlsZS56SW5kZXggPSBzLm9aSW5kZXhlcy5sZWZ0OwoJCX0KCQllbHNlIGlmICggc1R5cGUgPT0gImZpeGVkUmlnaHQiICkKCQl7CgkJCW5EaXYuc3R5bGUuekluZGV4ID0gcy5vWkluZGV4ZXMucmlnaHQ7CgkJfQoKCQkvKiByZW1vdmUgbWFyZ2lucyBzaW5jZSB3ZSBhcmUgZ29pbmcgdG8gcG9zaXRpb24gaXQgYWJzb2x1dGVseSAqLwoJCW5DVGFibGUuc3R5bGUubWFyZ2luID0gIjAiOwoKCQkvKiBJbnNlcnQgdGhlIG5ld2x5IGNsb25lZCB0YWJsZSBpbnRvIHRoZSBET00sIG9uIHRvcCBvZiB0aGUgInJlYWwiIGhlYWRlciAqLwoJCW5EaXYuYXBwZW5kQ2hpbGQoIG5DVGFibGUgKTsKCQlkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBuRGl2ICk7CgoJCXJldHVybiB7CgkJCSJuTm9kZSI6IG5DVGFibGUsCgkJCSJuV3JhcHBlciI6IG5EaXYsCgkJCSJzVHlwZSI6IHNUeXBlLAoJCQkic1Bvc2l0aW9uIjogIiIsCgkJCSJzVG9wIjogIiIsCgkJCSJzTGVmdCI6ICIiLAoJCQkiZm5DbG9uZSI6IGZuQ2xvbmUsCgkJCSJpQ2VsbHMiOiBpQ2VsbHMKCQl9OwoJfSwKCgkvKgoJICogRnVuY3Rpb246IF9mbk1lYXN1cmUKCSAqIFB1cnBvc2U6ICBHZXQgdGhlIGN1cnJlbnQgcG9zaXRpb25pbmcgb2YgdGhlIHRhYmxlIGluIHRoZSBET00KCSAqIFJldHVybnM6ICAtCgkgKiBJbnB1dHM6ICAgLQoJICovCglfZm5NZWFzdXJlOiBmdW5jdGlvbiAoKQoJewoJCXZhcgoJCQlzID0gdGhpcy5mbkdldFNldHRpbmdzKCksCgkJCW0gPSBzLm9NZXMsCgkJCWpxVGFibGUgPSAkKHMublRhYmxlKSwKCQkJb09mZnNldCA9IGpxVGFibGUub2Zmc2V0KCksCgkJCWlQYXJlbnRTY3JvbGxUb3AgPSB0aGlzLl9mblN1bVNjcm9sbCggcy5uVGFibGUucGFyZW50Tm9kZSwgJ3Njcm9sbFRvcCcgKSwKCQkJaVBhcmVudFNjcm9sbExlZnQgPSB0aGlzLl9mblN1bVNjcm9sbCggcy5uVGFibGUucGFyZW50Tm9kZSwgJ3Njcm9sbExlZnQnICk7CgoJCW0uaVRhYmxlV2lkdGggPSBqcVRhYmxlLm91dGVyV2lkdGgoKTsKCQltLmlUYWJsZUhlaWdodCA9IGpxVGFibGUub3V0ZXJIZWlnaHQoKTsKCQltLmlUYWJsZUxlZnQgPSBvT2Zmc2V0LmxlZnQgKyBzLm5UYWJsZS5wYXJlbnROb2RlLnNjcm9sbExlZnQ7CgkJbS5pVGFibGVUb3AgPSBvT2Zmc2V0LnRvcCArIGlQYXJlbnRTY3JvbGxUb3A7CgkJbS5pVGFibGVSaWdodCA9IG0uaVRhYmxlTGVmdCArIG0uaVRhYmxlV2lkdGg7CgkJbS5pVGFibGVSaWdodCA9IEZpeGVkSGVhZGVyLm9Eb2MuaVdpZHRoIC0gbS5pVGFibGVMZWZ0IC0gbS5pVGFibGVXaWR0aDsKCQltLmlUYWJsZUJvdHRvbSA9IEZpeGVkSGVhZGVyLm9Eb2MuaUhlaWdodCAtIG0uaVRhYmxlVG9wIC0gbS5pVGFibGVIZWlnaHQ7Cgl9LAoKCS8qCgkgKiBGdW5jdGlvbjogX2ZuU3VtU2Nyb2xsCgkgKiBQdXJwb3NlOiAgU3VtIG5vZGUgcGFyYW1ldGVycyBhbGwgdGhlIHdheSB0byB0aGUgdG9wCgkgKiBSZXR1cm5zOiAgaW50OiBzdW0KCSAqIElucHV0czogICBub2RlOm4gLSBub2RlIHRvIGNvbnNpZGVyCgkgKiAgICAgICAgICAgc3RyaW5nOnNpZGUgLSBzY3JvbGxUb3Agb3Igc2Nyb2xsTGVmdAoJICovCglfZm5TdW1TY3JvbGw6IGZ1bmN0aW9uICggbiwgc2lkZSApCgl7CgkJdmFyIGkgPSBuW3NpZGVdOwoJCXdoaWxlICggbiA9IG4ucGFyZW50Tm9kZSApCgkJewoJCQlpZiAoIG4ubm9kZU5hbWUgPT0gJ0hUTUwnIHx8IG4ubm9kZU5hbWUgPT0gJ0JPRFknICkKCQkJewoJCQkJYnJlYWs7CgkJCX0KCQkJaSA9IG5bc2lkZV07CgkJfQoJCXJldHVybiBpOwoJfSwKCgkvKgoJICogRnVuY3Rpb246IF9mblVwZGF0ZVBvc2l0aW9ucwoJICogUHVycG9zZTogIExvb3Agb3ZlciB0aGUgZml4ZWQgZWxlbWVudHMgZm9yIHRoaXMgdGFibGUgYW5kIHVwZGF0ZSB0aGVpciBwb3NpdGlvbnMKCSAqIFJldHVybnM6ICAtCgkgKiBJbnB1dHM6ICAgLQoJICovCglfZm5VcGRhdGVQb3NpdGlvbnM6IGZ1bmN0aW9uICgpCgl7CgkJdmFyIHMgPSB0aGlzLmZuR2V0U2V0dGluZ3MoKTsKCQl0aGlzLl9mbk1lYXN1cmUoKTsKCgkJZm9yICggdmFyIGk9MCwgaUxlbj1zLmFvQ2FjaGUubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkKCQl7CgkJCWlmICggcy5hb0NhY2hlW2ldLnNUeXBlID09ICJmaXhlZEhlYWRlciIgKQoJCQl7CgkJCQl0aGlzLl9mblNjcm9sbEZpeGVkSGVhZGVyKCBzLmFvQ2FjaGVbaV0gKTsKCQkJfQoJCQllbHNlIGlmICggcy5hb0NhY2hlW2ldLnNUeXBlID09ICJmaXhlZEZvb3RlciIgKQoJCQl7CgkJCQl0aGlzLl9mblNjcm9sbEZpeGVkRm9vdGVyKCBzLmFvQ2FjaGVbaV0gKTsKCQkJfQoJCQllbHNlIGlmICggcy5hb0NhY2hlW2ldLnNUeXBlID09ICJmaXhlZExlZnQiICkKCQkJewoJCQkJdGhpcy5fZm5TY3JvbGxIb3Jpem9udGFsTGVmdCggcy5hb0NhY2hlW2ldICk7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQl0aGlzLl9mblNjcm9sbEhvcml6b250YWxSaWdodCggcy5hb0NhY2hlW2ldICk7CgkJCX0KCQl9Cgl9LAoKCS8qCgkgKiBGdW5jdGlvbjogX2ZuVXBkYXRlQ2xvbmVzCgkgKiBQdXJwb3NlOiAgTG9vcCBvdmVyIHRoZSBmaXhlZCBlbGVtZW50cyBmb3IgdGhpcyB0YWJsZSBhbmQgY2FsbCB0aGVpciBjbG9uaW5nIGZ1bmN0aW9ucwoJICogUmV0dXJuczogIC0KCSAqIElucHV0czogICAtCgkgKi8KCV9mblVwZGF0ZUNsb25lczogZnVuY3Rpb24gKCBmdWxsICkKCXsKCQl2YXIgcyA9IHRoaXMuZm5HZXRTZXR0aW5ncygpOwoKCQlpZiAoIGZ1bGwgKSB7CgkJCS8vIFRoaXMgaXMgYSBsaXR0bGUgYml0IG9mIGEgaGFjayB0byBmb3JjZSBhIGZ1bGwgY2xvbmUgZHJhdy4gV2hlbgoJCQkvLyBgZnVsbGAgaXMgc2V0IHRvIHRydWUsIHdlIHdhbnQgdG8gcmVjbG9uZSB0aGUgc291cmNlIGVsZW1lbnRzLAoJCQkvLyByZWdhcmRsZXNzIG9mIHRoZSBjbG9uZS1vbi1kcmF3IHNldHRpbmdzCgkJCXMuYkluaXRDb21wbGV0ZSA9IGZhbHNlOwoJCX0KCgkJZm9yICggdmFyIGk9MCwgaUxlbj1zLmFvQ2FjaGUubGVuZ3RoIDsgaTxpTGVuIDsgaSsrICkKCQl7CgkJCXMuYW9DYWNoZVtpXS5mbkNsb25lLmNhbGwoIHRoaXMsIHMuYW9DYWNoZVtpXSApOwoJCX0KCgkJaWYgKCBmdWxsICkgewoJCQlzLmJJbml0Q29tcGxldGUgPSB0cnVlOwoJCX0KCX0sCgoKCS8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKgoJICogU2Nyb2xsaW5nIGZ1bmN0aW9ucwoJICovCgoJLyoKCSAqIEZ1bmN0aW9uOiBfZm5TY3JvbGxIb3Jpem9udGFsTGVmdAoJICogUHVycG9zZTogIFVwZGF0ZSB0aGUgcG9zaXRpb25pbmcgb2YgdGhlIHNjcm9sbGluZyBlbGVtZW50cwoJICogUmV0dXJuczogIC0KCSAqIElucHV0czogICBvYmplY3Q6b0NhY2hlIC0gdGhlIGNhY2hlZCB2YWx1ZXMgZm9yIHRoaXMgZml4ZWQgZWxlbWVudAoJICovCglfZm5TY3JvbGxIb3Jpem9udGFsUmlnaHQ6IGZ1bmN0aW9uICggb0NhY2hlICkKCXsKCQl2YXIKCQkJcyA9IHRoaXMuZm5HZXRTZXR0aW5ncygpLAoJCQlvTWVzID0gcy5vTWVzLAoJCQlvV2luID0gRml4ZWRIZWFkZXIub1dpbiwKCQkJb0RvYyA9IEZpeGVkSGVhZGVyLm9Eb2MsCgkJCW5UYWJsZSA9IG9DYWNoZS5uV3JhcHBlciwKCQkJaUZpeGVkV2lkdGggPSAkKG5UYWJsZSkub3V0ZXJXaWR0aCgpOwoKCQlpZiAoIG9XaW4uaVNjcm9sbFJpZ2h0IDwgb01lcy5pVGFibGVSaWdodCApCgkJewoJCQkvKiBGdWxseSByaWdodCBhbGlnbmVkICovCgkJCXRoaXMuX2ZuVXBkYXRlQ2FjaGUoIG9DYWNoZSwgJ3NQb3NpdGlvbicsICdhYnNvbHV0ZScsICdwb3NpdGlvbicsIG5UYWJsZS5zdHlsZSApOwoJCQl0aGlzLl9mblVwZGF0ZUNhY2hlKCBvQ2FjaGUsICdzVG9wJywgb01lcy5pVGFibGVUb3ArInB4IiwgJ3RvcCcsIG5UYWJsZS5zdHlsZSApOwoJCQl0aGlzLl9mblVwZGF0ZUNhY2hlKCBvQ2FjaGUsICdzTGVmdCcsIChvTWVzLmlUYWJsZUxlZnQrb01lcy5pVGFibGVXaWR0aC1pRml4ZWRXaWR0aCkrInB4IiwgJ2xlZnQnLCBuVGFibGUuc3R5bGUgKTsKCQl9CgkJZWxzZSBpZiAoIG9NZXMuaVRhYmxlTGVmdCA8IG9Eb2MuaVdpZHRoLW9XaW4uaVNjcm9sbFJpZ2h0LWlGaXhlZFdpZHRoICkKCQl7CgkJCS8qIE1pZGRsZSAqLwoJCQl0aGlzLl9mblVwZGF0ZUNhY2hlKCBvQ2FjaGUsICdzUG9zaXRpb24nLCAnZml4ZWQnLCAncG9zaXRpb24nLCBuVGFibGUuc3R5bGUgKTsKCQkJdGhpcy5fZm5VcGRhdGVDYWNoZSggb0NhY2hlLCAnc1RvcCcsIChvTWVzLmlUYWJsZVRvcC1vV2luLmlTY3JvbGxUb3ApKyJweCIsICd0b3AnLCBuVGFibGUuc3R5bGUgKTsKCQkJdGhpcy5fZm5VcGRhdGVDYWNoZSggb0NhY2hlLCAnc0xlZnQnLCAob1dpbi5pV2lkdGgtaUZpeGVkV2lkdGgpKyJweCIsICdsZWZ0JywgblRhYmxlLnN0eWxlICk7CgkJfQoJCWVsc2UKCQl7CgkJCS8qIEZ1bGx5IGxlZnQgYWxpZ25lZCAqLwoJCQl0aGlzLl9mblVwZGF0ZUNhY2hlKCBvQ2FjaGUsICdzUG9zaXRpb24nLCAnYWJzb2x1dGUnLCAncG9zaXRpb24nLCBuVGFibGUuc3R5bGUgKTsKCQkJdGhpcy5fZm5VcGRhdGVDYWNoZSggb0NhY2hlLCAnc1RvcCcsIG9NZXMuaVRhYmxlVG9wKyJweCIsICd0b3AnLCBuVGFibGUuc3R5bGUgKTsKCQkJdGhpcy5fZm5VcGRhdGVDYWNoZSggb0NhY2hlLCAnc0xlZnQnLCBvTWVzLmlUYWJsZUxlZnQrInB4IiwgJ2xlZnQnLCBuVGFibGUuc3R5bGUgKTsKCQl9Cgl9LAoKCS8qCgkgKiBGdW5jdGlvbjogX2ZuU2Nyb2xsSG9yaXpvbnRhbExlZnQKCSAqIFB1cnBvc2U6ICBVcGRhdGUgdGhlIHBvc2l0aW9uaW5nIG9mIHRoZSBzY3JvbGxpbmcgZWxlbWVudHMKCSAqIFJldHVybnM6ICAtCgkgKiBJbnB1dHM6ICAgb2JqZWN0Om9DYWNoZSAtIHRoZSBjYWNoZWQgdmFsdWVzIGZvciB0aGlzIGZpeGVkIGVsZW1lbnQKCSAqLwoJX2ZuU2Nyb2xsSG9yaXpvbnRhbExlZnQ6IGZ1bmN0aW9uICggb0NhY2hlICkKCXsKCQl2YXIKCQkJcyA9IHRoaXMuZm5HZXRTZXR0aW5ncygpLAoJCQlvTWVzID0gcy5vTWVzLAoJCQlvV2luID0gRml4ZWRIZWFkZXIub1dpbiwKCQkJb0RvYyA9IEZpeGVkSGVhZGVyLm9Eb2MsCgkJCW5UYWJsZSA9IG9DYWNoZS5uV3JhcHBlciwKCQkJaUNlbGxXaWR0aCA9ICQoblRhYmxlKS5vdXRlcldpZHRoKCk7CgoJCWlmICggb1dpbi5pU2Nyb2xsTGVmdCA8IG9NZXMuaVRhYmxlTGVmdCApCgkJewoJCQkvKiBGdWxseSBsZWZ0IGFsaWduICovCgkJCXRoaXMuX2ZuVXBkYXRlQ2FjaGUoIG9DYWNoZSwgJ3NQb3NpdGlvbicsICdhYnNvbHV0ZScsICdwb3NpdGlvbicsIG5UYWJsZS5zdHlsZSApOwoJCQl0aGlzLl9mblVwZGF0ZUNhY2hlKCBvQ2FjaGUsICdzVG9wJywgb01lcy5pVGFibGVUb3ArInB4IiwgJ3RvcCcsIG5UYWJsZS5zdHlsZSApOwoJCQl0aGlzLl9mblVwZGF0ZUNhY2hlKCBvQ2FjaGUsICdzTGVmdCcsIG9NZXMuaVRhYmxlTGVmdCsicHgiLCAnbGVmdCcsIG5UYWJsZS5zdHlsZSApOwoJCX0KCQllbHNlIGlmICggb1dpbi5pU2Nyb2xsTGVmdCA8IG9NZXMuaVRhYmxlTGVmdCtvTWVzLmlUYWJsZVdpZHRoLWlDZWxsV2lkdGggKQoJCXsKCQkJdGhpcy5fZm5VcGRhdGVDYWNoZSggb0NhY2hlLCAnc1Bvc2l0aW9uJywgJ2ZpeGVkJywgJ3Bvc2l0aW9uJywgblRhYmxlLnN0eWxlICk7CgkJCXRoaXMuX2ZuVXBkYXRlQ2FjaGUoIG9DYWNoZSwgJ3NUb3AnLCAob01lcy5pVGFibGVUb3Atb1dpbi5pU2Nyb2xsVG9wKSsicHgiLCAndG9wJywgblRhYmxlLnN0eWxlICk7CgkJCXRoaXMuX2ZuVXBkYXRlQ2FjaGUoIG9DYWNoZSwgJ3NMZWZ0JywgIjBweCIsICdsZWZ0JywgblRhYmxlLnN0eWxlICk7CgkJfQoJCWVsc2UKCQl7CgkJCS8qIEZ1bGx5IHJpZ2h0IGFsaWduICovCgkJCXRoaXMuX2ZuVXBkYXRlQ2FjaGUoIG9DYWNoZSwgJ3NQb3NpdGlvbicsICdhYnNvbHV0ZScsICdwb3NpdGlvbicsIG5UYWJsZS5zdHlsZSApOwoJCQl0aGlzLl9mblVwZGF0ZUNhY2hlKCBvQ2FjaGUsICdzVG9wJywgb01lcy5pVGFibGVUb3ArInB4IiwgJ3RvcCcsIG5UYWJsZS5zdHlsZSApOwoJCQl0aGlzLl9mblVwZGF0ZUNhY2hlKCBvQ2FjaGUsICdzTGVmdCcsIChvTWVzLmlUYWJsZUxlZnQrb01lcy5pVGFibGVXaWR0aC1pQ2VsbFdpZHRoKSsicHgiLCAnbGVmdCcsIG5UYWJsZS5zdHlsZSApOwoJCX0KCX0sCgoJLyoKCSAqIEZ1bmN0aW9uOiBfZm5TY3JvbGxGaXhlZEZvb3RlcgoJICogUHVycG9zZTogIFVwZGF0ZSB0aGUgcG9zaXRpb25pbmcgb2YgdGhlIHNjcm9sbGluZyBlbGVtZW50cwoJICogUmV0dXJuczogIC0KCSAqIElucHV0czogICBvYmplY3Q6b0NhY2hlIC0gdGhlIGNhY2hlZCB2YWx1ZXMgZm9yIHRoaXMgZml4ZWQgZWxlbWVudAoJICovCglfZm5TY3JvbGxGaXhlZEZvb3RlcjogZnVuY3Rpb24gKCBvQ2FjaGUgKQoJewoJCXZhcgoJCQlzID0gdGhpcy5mbkdldFNldHRpbmdzKCksCgkJCW9NZXMgPSBzLm9NZXMsCgkJCW9XaW4gPSBGaXhlZEhlYWRlci5vV2luLAoJCQlvRG9jID0gRml4ZWRIZWFkZXIub0RvYywKCQkJblRhYmxlID0gb0NhY2hlLm5XcmFwcGVyLAoJCQlpVGhlYWRIZWlnaHQgPSAkKCJ0aGVhZCIsIHMublRhYmxlKS5vdXRlckhlaWdodCgpLAoJCQlpQ2VsbEhlaWdodCA9ICQoblRhYmxlKS5vdXRlckhlaWdodCgpOwoKCQlpZiAoIG9XaW4uaVNjcm9sbEJvdHRvbSA8IG9NZXMuaVRhYmxlQm90dG9tICkKCQl7CgkJCS8qIEJlbG93ICovCgkJCXRoaXMuX2ZuVXBkYXRlQ2FjaGUoIG9DYWNoZSwgJ3NQb3NpdGlvbicsICdhYnNvbHV0ZScsICdwb3NpdGlvbicsIG5UYWJsZS5zdHlsZSApOwoJCQl0aGlzLl9mblVwZGF0ZUNhY2hlKCBvQ2FjaGUsICdzVG9wJywgKG9NZXMuaVRhYmxlVG9wK29NZXMuaVRhYmxlSGVpZ2h0LWlDZWxsSGVpZ2h0KSsicHgiLCAndG9wJywgblRhYmxlLnN0eWxlICk7CgkJCXRoaXMuX2ZuVXBkYXRlQ2FjaGUoIG9DYWNoZSwgJ3NMZWZ0Jywgb01lcy5pVGFibGVMZWZ0KyJweCIsICdsZWZ0JywgblRhYmxlLnN0eWxlICk7CgkJfQoJCWVsc2UgaWYgKCBvV2luLmlTY3JvbGxCb3R0b20gPCBvTWVzLmlUYWJsZUJvdHRvbStvTWVzLmlUYWJsZUhlaWdodC1pQ2VsbEhlaWdodC1pVGhlYWRIZWlnaHQgKQoJCXsKCQkJdGhpcy5fZm5VcGRhdGVDYWNoZSggb0NhY2hlLCAnc1Bvc2l0aW9uJywgJ2ZpeGVkJywgJ3Bvc2l0aW9uJywgblRhYmxlLnN0eWxlICk7CgkJCXRoaXMuX2ZuVXBkYXRlQ2FjaGUoIG9DYWNoZSwgJ3NUb3AnLCAob1dpbi5pSGVpZ2h0LWlDZWxsSGVpZ2h0KSsicHgiLCAndG9wJywgblRhYmxlLnN0eWxlICk7CgkJCXRoaXMuX2ZuVXBkYXRlQ2FjaGUoIG9DYWNoZSwgJ3NMZWZ0JywgKG9NZXMuaVRhYmxlTGVmdC1vV2luLmlTY3JvbGxMZWZ0KSsicHgiLCAnbGVmdCcsIG5UYWJsZS5zdHlsZSApOwoJCX0KCQllbHNlCgkJewoJCQkvKiBBYm92ZSAqLwoJCQl0aGlzLl9mblVwZGF0ZUNhY2hlKCBvQ2FjaGUsICdzUG9zaXRpb24nLCAnYWJzb2x1dGUnLCAncG9zaXRpb24nLCBuVGFibGUuc3R5bGUgKTsKCQkJdGhpcy5fZm5VcGRhdGVDYWNoZSggb0NhY2hlLCAnc1RvcCcsIChvTWVzLmlUYWJsZVRvcCtpQ2VsbEhlaWdodCkrInB4IiwgJ3RvcCcsIG5UYWJsZS5zdHlsZSApOwoJCQl0aGlzLl9mblVwZGF0ZUNhY2hlKCBvQ2FjaGUsICdzTGVmdCcsIG9NZXMuaVRhYmxlTGVmdCsicHgiLCAnbGVmdCcsIG5UYWJsZS5zdHlsZSApOwoJCX0KCX0sCgoJLyoKCSAqIEZ1bmN0aW9uOiBfZm5TY3JvbGxGaXhlZEhlYWRlcgoJICogUHVycG9zZTogIFVwZGF0ZSB0aGUgcG9zaXRpb25pbmcgb2YgdGhlIHNjcm9sbGluZyBlbGVtZW50cwoJICogUmV0dXJuczogIC0KCSAqIElucHV0czogICBvYmplY3Q6b0NhY2hlIC0gdGhlIGNhY2hlZCB2YWx1ZXMgZm9yIHRoaXMgZml4ZWQgZWxlbWVudAoJICovCglfZm5TY3JvbGxGaXhlZEhlYWRlcjogZnVuY3Rpb24gKCBvQ2FjaGUgKQoJewoJCXZhcgoJCQlzID0gdGhpcy5mbkdldFNldHRpbmdzKCksCgkJCW9NZXMgPSBzLm9NZXMsCgkJCW9XaW4gPSBGaXhlZEhlYWRlci5vV2luLAoJCQlvRG9jID0gRml4ZWRIZWFkZXIub0RvYywKCQkJblRhYmxlID0gb0NhY2hlLm5XcmFwcGVyLAoJCQlpVGJvZHlIZWlnaHQgPSAwLAoJCQlhblRib2RpZXMgPSBzLm5UYWJsZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGJvZHknKTsKCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBhblRib2RpZXMubGVuZ3RoOyArK2kpIHsKCQkJaVRib2R5SGVpZ2h0ICs9IGFuVGJvZGllc1tpXS5vZmZzZXRIZWlnaHQ7CgkJfQoKCQlpZiAoIG9NZXMuaVRhYmxlVG9wID4gb1dpbi5pU2Nyb2xsVG9wICsgcy5vT2Zmc2V0LnRvcCApCgkJewoJCQkvKiBBYm92ZSB0aGUgdGFibGUgKi8KCQkJdGhpcy5fZm5VcGRhdGVDYWNoZSggb0NhY2hlLCAnc1Bvc2l0aW9uJywgImFic29sdXRlIiwgJ3Bvc2l0aW9uJywgblRhYmxlLnN0eWxlICk7CgkJCXRoaXMuX2ZuVXBkYXRlQ2FjaGUoIG9DYWNoZSwgJ3NUb3AnLCBvTWVzLmlUYWJsZVRvcCsicHgiLCAndG9wJywgblRhYmxlLnN0eWxlICk7CgkJCXRoaXMuX2ZuVXBkYXRlQ2FjaGUoIG9DYWNoZSwgJ3NMZWZ0Jywgb01lcy5pVGFibGVMZWZ0KyJweCIsICdsZWZ0JywgblRhYmxlLnN0eWxlICk7CgkJfQoJCWVsc2UgaWYgKCBvV2luLmlTY3JvbGxUb3AgKyBzLm9PZmZzZXQudG9wID4gb01lcy5pVGFibGVUb3AraVRib2R5SGVpZ2h0ICkKCQl7CgkJCS8qIEF0IHRoZSBib3R0b20gb2YgdGhlIHRhYmxlICovCgkJCXRoaXMuX2ZuVXBkYXRlQ2FjaGUoIG9DYWNoZSwgJ3NQb3NpdGlvbicsICJhYnNvbHV0ZSIsICdwb3NpdGlvbicsIG5UYWJsZS5zdHlsZSApOwoJCQl0aGlzLl9mblVwZGF0ZUNhY2hlKCBvQ2FjaGUsICdzVG9wJywgKG9NZXMuaVRhYmxlVG9wK2lUYm9keUhlaWdodCkrInB4IiwgJ3RvcCcsIG5UYWJsZS5zdHlsZSApOwoJCQl0aGlzLl9mblVwZGF0ZUNhY2hlKCBvQ2FjaGUsICdzTGVmdCcsIG9NZXMuaVRhYmxlTGVmdCsicHgiLCAnbGVmdCcsIG5UYWJsZS5zdHlsZSApOwoJCX0KCQllbHNlCgkJewoJCQkvKiBJbiB0aGUgbWlkZGxlIG9mIHRoZSB0YWJsZSAqLwoJCQl0aGlzLl9mblVwZGF0ZUNhY2hlKCBvQ2FjaGUsICdzUG9zaXRpb24nLCAnZml4ZWQnLCAncG9zaXRpb24nLCBuVGFibGUuc3R5bGUgKTsKCQkJdGhpcy5fZm5VcGRhdGVDYWNoZSggb0NhY2hlLCAnc1RvcCcsIHMub09mZnNldC50b3ArInB4IiwgJ3RvcCcsIG5UYWJsZS5zdHlsZSApOwoJCQl0aGlzLl9mblVwZGF0ZUNhY2hlKCBvQ2FjaGUsICdzTGVmdCcsIChvTWVzLmlUYWJsZUxlZnQtb1dpbi5pU2Nyb2xsTGVmdCkrInB4IiwgJ2xlZnQnLCBuVGFibGUuc3R5bGUgKTsKCQl9Cgl9LAoKCS8qCgkgKiBGdW5jdGlvbjogX2ZuVXBkYXRlQ2FjaGUKCSAqIFB1cnBvc2U6ICBDaGVjayB0aGUgY2FjaGUgYW5kIHVwZGF0ZSBjYWNoZSBhbmQgdmFsdWUgaWYgbmVlZGVkCgkgKiBSZXR1cm5zOiAgLQoJICogSW5wdXRzOiAgIG9iamVjdDpvQ2FjaGUgLSBsb2NhbCBjYWNoZSBvYmplY3QKCSAqICAgICAgICAgICBzdHJpbmc6c0NhY2hlIC0gY2FjaGUgcHJvcGVydHkKCSAqICAgICAgICAgICBzdHJpbmc6c1NldCAtIHZhbHVlIHRvIHNldAoJICogICAgICAgICAgIHN0cmluZzpzUHJvcGVydHkgLSBvYmplY3QgcHJvcGVydHkgdG8gc2V0CgkgKiAgICAgICAgICAgb2JqZWN0Om9PYmogLSBvYmplY3QgdG8gdXBkYXRlCgkgKi8KCV9mblVwZGF0ZUNhY2hlOiBmdW5jdGlvbiAoIG9DYWNoZSwgc0NhY2hlLCBzU2V0LCBzUHJvcGVydHksIG9PYmogKQoJewoJCWlmICggb0NhY2hlW3NDYWNoZV0gIT0gc1NldCApCgkJewoJCQlvT2JqW3NQcm9wZXJ0eV0gPSBzU2V0OwoJCQlvQ2FjaGVbc0NhY2hlXSA9IHNTZXQ7CgkJfQoJfSwKCgoKCS8qKgoJICogQ29weSB0aGUgY2xhc3NlcyBvZiBhbGwgY2hpbGQgbm9kZXMgZnJvbSBvbmUgZWxlbWVudCB0byBhbm90aGVyLiBUaGlzIGltcGxpZXMKCSAqIHRoYXQgdGhlIHR3byBoYXZlIGlkZW50aWNhbCBzdHJ1Y3R1cmUgLSBubyBlcnJvciBjaGVja2luZyBpcyBwZXJmb3JtZWQgdG8gdGhhdAoJICogZmFjdC4KCSAqICBAcGFyYW0ge2VsZW1lbnR9IHNvdXJjZSBOb2RlIHRvIGNvcHkgY2xhc3NlcyBmcm9tCgkgKiAgQHBhcmFtIHtlbGVtZW50fSBkZXN0IE5vZGUgdG8gY29weSBjbGFzc2VzIHRvbwoJICovCglfZm5DbGFzc1VwZGF0ZTogZnVuY3Rpb24gKCBzb3VyY2UsIGRlc3QgKQoJewoJCXZhciB0aGF0ID0gdGhpczsKCgkJaWYgKCBzb3VyY2Uubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gIlRSIiB8fCBzb3VyY2Uubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gIlRIIiB8fAoJCQkgc291cmNlLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09ICJURCIgfHwgc291cmNlLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09ICJTUEFOIiApCgkJewoJCQlkZXN0LmNsYXNzTmFtZSA9IHNvdXJjZS5jbGFzc05hbWU7CgkJfQoKCQkkKHNvdXJjZSkuY2hpbGRyZW4oKS5lYWNoKCBmdW5jdGlvbiAoaSkgewoJCQl0aGF0Ll9mbkNsYXNzVXBkYXRlKCAkKHNvdXJjZSkuY2hpbGRyZW4oKVtpXSwgJChkZXN0KS5jaGlsZHJlbigpW2ldICk7CgkJfSApOwoJfSwKCgoJLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKgoJICogQ2xvbmluZyBmdW5jdGlvbnMKCSAqLwoKCS8qCgkgKiBGdW5jdGlvbjogX2ZuQ2xvbmVUaGVhZAoJICogUHVycG9zZTogIENsb25lIHRoZSB0aGVhZCBlbGVtZW50CgkgKiBSZXR1cm5zOiAgLQoJICogSW5wdXRzOiAgIG9iamVjdDpvQ2FjaGUgLSB0aGUgY2FjaGVkIHZhbHVlcyBmb3IgdGhpcyBmaXhlZCBlbGVtZW50CgkgKi8KCV9mbkNsb25lVGhlYWQ6IGZ1bmN0aW9uICggb0NhY2hlICkKCXsKCQl2YXIgcyA9IHRoaXMuZm5HZXRTZXR0aW5ncygpOwoJCXZhciBuVGFibGUgPSBvQ2FjaGUubk5vZGU7CgoJCWlmICggcy5iSW5pdENvbXBsZXRlICYmICFzLm9DbG9uZU9uRHJhdy50b3AgKQoJCXsKCQkJdGhpcy5fZm5DbGFzc1VwZGF0ZSggJCgndGhlYWQnLCBzLm5UYWJsZSlbMF0sICQoJ3RoZWFkJywgblRhYmxlKVswXSApOwoJCQlyZXR1cm47CgkJfQoKCQkvKiBTZXQgdGhlIHdyYXBwZXIgd2lkdGggdG8gbWF0Y2ggdGhhdCBvZiB0aGUgY2xvbmVkIHRhYmxlICovCgkJdmFyIGlEdFdpZHRoID0gJChzLm5UYWJsZSkub3V0ZXJXaWR0aCgpOwoJCW9DYWNoZS5uV3JhcHBlci5zdHlsZS53aWR0aCA9IGlEdFdpZHRoKyJweCI7CgkJblRhYmxlLnN0eWxlLndpZHRoID0gaUR0V2lkdGgrInB4IjsKCgkJLyogUmVtb3ZlIGFueSBjaGlsZHJlbiB0aGUgY2xvbmVkIHRhYmxlIGhhcyAqLwoJCXdoaWxlICggblRhYmxlLmNoaWxkTm9kZXMubGVuZ3RoID4gMCApCgkJewoJCQkkKCd0aGVhZCB0aCcsIG5UYWJsZSkudW5iaW5kKCAnY2xpY2snICk7CgkJCW5UYWJsZS5yZW1vdmVDaGlsZCggblRhYmxlLmNoaWxkTm9kZXNbMF0gKTsKCQl9CgoJCS8qIENsb25lIHRoZSBEYXRhVGFibGVzIGhlYWRlciAqLwoJCXZhciBuVGhlYWQgPSAkKCd0aGVhZCcsIHMublRhYmxlKS5jbG9uZSh0cnVlKVswXTsKCQluVGFibGUuYXBwZW5kQ2hpbGQoIG5UaGVhZCApOwoKCQkvKiBDb3B5IHRoZSB3aWR0aHMgYWNyb3NzIC0gYXBwYXJlbnRseSBhIGNsb25lIGlzbid0IGdvb2QgZW5vdWdoIGZvciB0aGlzICovCgkJdmFyIGEgPSBbXTsKCQl2YXIgYiA9IFtdOwoKCQkkKCJ0aGVhZD50ciB0aCIsIHMublRhYmxlKS5lYWNoKCBmdW5jdGlvbiAoaSkgewoJCQlhLnB1c2goICQodGhpcykud2lkdGgoKSApOwoJCX0gKTsKCgkJJCgidGhlYWQ+dHIgdGQiLCBzLm5UYWJsZSkuZWFjaCggZnVuY3Rpb24gKGkpIHsKCQkJYi5wdXNoKCAkKHRoaXMpLndpZHRoKCkgKTsKCQl9ICk7CgoJCSQoInRoZWFkPnRyIHRoIiwgcy5uVGFibGUpLmVhY2goIGZ1bmN0aW9uIChpKSB7CgkJCSQoInRoZWFkPnRyIHRoOmVxKCIraSsiKSIsIG5UYWJsZSkud2lkdGgoIGFbaV0gKTsKCQkJJCh0aGlzKS53aWR0aCggYVtpXSApOwoJCX0gKTsKCgkJJCgidGhlYWQ+dHIgdGQiLCBzLm5UYWJsZSkuZWFjaCggZnVuY3Rpb24gKGkpIHsKCQkJJCgidGhlYWQ+dHIgdGQ6ZXEoIitpKyIpIiwgblRhYmxlKS53aWR0aCggYltpXSApOwoJCQkkKHRoaXMpLndpZHRoKCBiW2ldICk7CgkJfSApOwoKCQkvLyBTdG9wIERhdGFUYWJsZXMgMS45IGZyb20gcHV0dGluZyBhIGZvY3VzIHJpbmcgb24gdGhlIGhlYWRlcnMgd2hlbgoJCS8vIGNsaWNrZWQgdG8gc29ydAoJCSQoJ3RoLnNvcnRpbmcsIHRoLnNvcnRpbmdfZGVzYywgdGguc29ydGluZ19hc2MnLCBuVGFibGUpLmJpbmQoICdjbGljaycsIGZ1bmN0aW9uICgpIHsKCQkJdGhpcy5ibHVyKCk7CgkJfSApOwoJfSwKCgkvKgoJICogRnVuY3Rpb246IF9mbkNsb25lVGZvb3QKCSAqIFB1cnBvc2U6ICBDbG9uZSB0aGUgdGZvb3QgZWxlbWVudAoJICogUmV0dXJuczogIC0KCSAqIElucHV0czogICBvYmplY3Q6b0NhY2hlIC0gdGhlIGNhY2hlZCB2YWx1ZXMgZm9yIHRoaXMgZml4ZWQgZWxlbWVudAoJICovCglfZm5DbG9uZVRmb290OiBmdW5jdGlvbiAoIG9DYWNoZSApCgl7CgkJdmFyIHMgPSB0aGlzLmZuR2V0U2V0dGluZ3MoKTsKCQl2YXIgblRhYmxlID0gb0NhY2hlLm5Ob2RlOwoKCQkvKiBTZXQgdGhlIHdyYXBwZXIgd2lkdGggdG8gbWF0Y2ggdGhhdCBvZiB0aGUgY2xvbmVkIHRhYmxlICovCgkJb0NhY2hlLm5XcmFwcGVyLnN0eWxlLndpZHRoID0gJChzLm5UYWJsZSkub3V0ZXJXaWR0aCgpKyJweCI7CgoJCS8qIFJlbW92ZSBhbnkgY2hpbGRyZW4gdGhlIGNsb25lZCB0YWJsZSBoYXMgKi8KCQl3aGlsZSAoIG5UYWJsZS5jaGlsZE5vZGVzLmxlbmd0aCA+IDAgKQoJCXsKCQkJblRhYmxlLnJlbW92ZUNoaWxkKCBuVGFibGUuY2hpbGROb2Rlc1swXSApOwoJCX0KCgkJLyogQ2xvbmUgdGhlIERhdGFUYWJsZXMgZm9vdGVyICovCgkJdmFyIG5UZm9vdCA9ICQoJ3Rmb290Jywgcy5uVGFibGUpLmNsb25lKHRydWUpWzBdOwoJCW5UYWJsZS5hcHBlbmRDaGlsZCggblRmb290ICk7CgoJCS8qIENvcHkgdGhlIHdpZHRocyBhY3Jvc3MgLSBhcHBhcmVudGx5IGEgY2xvbmUgaXNuJ3QgZ29vZCBlbm91Z2ggZm9yIHRoaXMgKi8KCQkkKCJ0Zm9vdDplcSgwKT50ciB0aCIsIHMublRhYmxlKS5lYWNoKCBmdW5jdGlvbiAoaSkgewoJCQkkKCJ0Zm9vdDplcSgwKT50ciB0aDplcSgiK2krIikiLCBuVGFibGUpLndpZHRoKCAkKHRoaXMpLndpZHRoKCkgKTsKCQl9ICk7CgoJCSQoInRmb290OmVxKDApPnRyIHRkIiwgcy5uVGFibGUpLmVhY2goIGZ1bmN0aW9uIChpKSB7CgkJCSQoInRmb290OmVxKDApPnRyIHRkOmVxKCIraSsiKSIsIG5UYWJsZSkud2lkdGgoICQodGhpcykud2lkdGgoKSApOwoJCX0gKTsKCX0sCgoJLyoKCSAqIEZ1bmN0aW9uOiBfZm5DbG9uZVRMZWZ0CgkgKiBQdXJwb3NlOiAgQ2xvbmUgdGhlIGxlZnQgY29sdW1uKHMpCgkgKiBSZXR1cm5zOiAgLQoJICogSW5wdXRzOiAgIG9iamVjdDpvQ2FjaGUgLSB0aGUgY2FjaGVkIHZhbHVlcyBmb3IgdGhpcyBmaXhlZCBlbGVtZW50CgkgKi8KCV9mbkNsb25lVExlZnQ6IGZ1bmN0aW9uICggb0NhY2hlICkKCXsKCQl2YXIgcyA9IHRoaXMuZm5HZXRTZXR0aW5ncygpOwoJCXZhciBuVGFibGUgPSBvQ2FjaGUubk5vZGU7CgkJdmFyIG5Cb2R5ID0gJCgndGJvZHknLCBzLm5UYWJsZSlbMF07CgoJCS8qIFJlbW92ZSBhbnkgY2hpbGRyZW4gdGhlIGNsb25lZCB0YWJsZSBoYXMgKi8KCQl3aGlsZSAoIG5UYWJsZS5jaGlsZE5vZGVzLmxlbmd0aCA+IDAgKQoJCXsKCQkJblRhYmxlLnJlbW92ZUNoaWxkKCBuVGFibGUuY2hpbGROb2Rlc1swXSApOwoJCX0KCgkJLyogSXMgdGhpcyB0aGUgbW9zdCBlZmZpY2llbnQgd2F5IHRvIGRvIHRoaXMgLSBpdCBsb29rcyBob3JyaWJsZS4uLiAqLwoJCW5UYWJsZS5hcHBlbmRDaGlsZCggJCgidGhlYWQiLCBzLm5UYWJsZSkuY2xvbmUodHJ1ZSlbMF0gKTsKCQluVGFibGUuYXBwZW5kQ2hpbGQoICQoInRib2R5Iiwgcy5uVGFibGUpLmNsb25lKHRydWUpWzBdICk7CgkJaWYgKCBzLmJGb290ZXIgKQoJCXsKCQkJblRhYmxlLmFwcGVuZENoaWxkKCAkKCJ0Zm9vdCIsIHMublRhYmxlKS5jbG9uZSh0cnVlKVswXSApOwoJCX0KCgkJLyogUmVtb3ZlIHVubmVlZGVkIGNlbGxzICovCgkJdmFyIHNTZWxlY3RvciA9ICdndCgnICsgKG9DYWNoZS5pQ2VsbHMgLSAxKSArICcpJzsKCQkkKCd0aGVhZCB0cicsIG5UYWJsZSkuZWFjaCggZnVuY3Rpb24gKGspIHsKCQkJJCgndGg6JyArIHNTZWxlY3RvciwgdGhpcykucmVtb3ZlKCk7CgkJfSApOwoKCQkkKCd0Zm9vdCB0cicsIG5UYWJsZSkuZWFjaCggZnVuY3Rpb24gKGspIHsKCQkJJCgndGg6JyArIHNTZWxlY3RvciwgdGhpcykucmVtb3ZlKCk7CgkJfSApOwoKCQkkKCd0Ym9keSB0cicsIG5UYWJsZSkuZWFjaCggZnVuY3Rpb24gKGspIHsKCQkJJCgndGQ6JyArIHNTZWxlY3RvciwgdGhpcykucmVtb3ZlKCk7CgkJfSApOwoKCQl0aGlzLmZuRXF1YWxpc2VIZWlnaHRzKCAndGhlYWQnLCBuQm9keS5wYXJlbnROb2RlLCBuVGFibGUgKTsKCQl0aGlzLmZuRXF1YWxpc2VIZWlnaHRzKCAndGJvZHknLCBuQm9keS5wYXJlbnROb2RlLCBuVGFibGUgKTsKCQl0aGlzLmZuRXF1YWxpc2VIZWlnaHRzKCAndGZvb3QnLCBuQm9keS5wYXJlbnROb2RlLCBuVGFibGUgKTsKCgkJdmFyIGlXaWR0aCA9IDA7CgkJZm9yICh2YXIgaSA9IDA7IGkgPCBvQ2FjaGUuaUNlbGxzOyBpKyspIHsKCQkJaVdpZHRoICs9ICQoJ3RoZWFkIHRyIHRoOmVxKCcgKyBpICsgJyknLCBzLm5UYWJsZSkub3V0ZXJXaWR0aCgpOwoJCX0KCQluVGFibGUuc3R5bGUud2lkdGggPSBpV2lkdGgrInB4IjsKCQlvQ2FjaGUubldyYXBwZXIuc3R5bGUud2lkdGggPSBpV2lkdGgrInB4IjsKCX0sCgoJLyoKCSAqIEZ1bmN0aW9uOiBfZm5DbG9uZVRSaWdodAoJICogUHVycG9zZTogIENsb25lIHRoZSByaWdodCBtb3N0IGNvbHVtbihzKQoJICogUmV0dXJuczogIC0KCSAqIElucHV0czogICBvYmplY3Q6b0NhY2hlIC0gdGhlIGNhY2hlZCB2YWx1ZXMgZm9yIHRoaXMgZml4ZWQgZWxlbWVudAoJICovCglfZm5DbG9uZVRSaWdodDogZnVuY3Rpb24gKCBvQ2FjaGUgKQoJewoJCXZhciBzID0gdGhpcy5mbkdldFNldHRpbmdzKCk7CgkJdmFyIG5Cb2R5ID0gJCgndGJvZHknLCBzLm5UYWJsZSlbMF07CgkJdmFyIG5UYWJsZSA9IG9DYWNoZS5uTm9kZTsKCQl2YXIgaUNvbHMgPSAkKCd0Ym9keSB0cjplcSgwKSB0ZCcsIHMublRhYmxlKS5sZW5ndGg7CgoJCS8qIFJlbW92ZSBhbnkgY2hpbGRyZW4gdGhlIGNsb25lZCB0YWJsZSBoYXMgKi8KCQl3aGlsZSAoIG5UYWJsZS5jaGlsZE5vZGVzLmxlbmd0aCA+IDAgKQoJCXsKCQkJblRhYmxlLnJlbW92ZUNoaWxkKCBuVGFibGUuY2hpbGROb2Rlc1swXSApOwoJCX0KCgkJLyogSXMgdGhpcyB0aGUgbW9zdCBlZmZpY2llbnQgd2F5IHRvIGRvIHRoaXMgLSBpdCBsb29rcyBob3JyaWJsZS4uLiAqLwoJCW5UYWJsZS5hcHBlbmRDaGlsZCggJCgidGhlYWQiLCBzLm5UYWJsZSkuY2xvbmUodHJ1ZSlbMF0gKTsKCQluVGFibGUuYXBwZW5kQ2hpbGQoICQoInRib2R5Iiwgcy5uVGFibGUpLmNsb25lKHRydWUpWzBdICk7CgkJaWYgKCBzLmJGb290ZXIgKQoJCXsKCQkJblRhYmxlLmFwcGVuZENoaWxkKCAkKCJ0Zm9vdCIsIHMublRhYmxlKS5jbG9uZSh0cnVlKVswXSApOwoJCX0KCQkkKCd0aGVhZCB0ciB0aDpsdCgnKyhpQ29scy1vQ2FjaGUuaUNlbGxzKSsnKScsIG5UYWJsZSkucmVtb3ZlKCk7CgkJJCgndGZvb3QgdHIgdGg6bHQoJysoaUNvbHMtb0NhY2hlLmlDZWxscykrJyknLCBuVGFibGUpLnJlbW92ZSgpOwoKCQkvKiBSZW1vdmUgdW5uZWVkZWQgY2VsbHMgKi8KCQkkKCd0Ym9keSB0cicsIG5UYWJsZSkuZWFjaCggZnVuY3Rpb24gKGspIHsKCQkJJCgndGQ6bHQoJysoaUNvbHMtb0NhY2hlLmlDZWxscykrJyknLCB0aGlzKS5yZW1vdmUoKTsKCQl9ICk7CgoJCXRoaXMuZm5FcXVhbGlzZUhlaWdodHMoICd0aGVhZCcsIG5Cb2R5LnBhcmVudE5vZGUsIG5UYWJsZSApOwoJCXRoaXMuZm5FcXVhbGlzZUhlaWdodHMoICd0Ym9keScsIG5Cb2R5LnBhcmVudE5vZGUsIG5UYWJsZSApOwoJCXRoaXMuZm5FcXVhbGlzZUhlaWdodHMoICd0Zm9vdCcsIG5Cb2R5LnBhcmVudE5vZGUsIG5UYWJsZSApOwoKCQl2YXIgaVdpZHRoID0gMDsKCQlmb3IgKHZhciBpID0gMDsgaSA8IG9DYWNoZS5pQ2VsbHM7IGkrKykgewoJCQlpV2lkdGggKz0gJCgndGhlYWQgdHIgdGg6ZXEoJysoaUNvbHMtMS1pKSsnKScsIHMublRhYmxlKS5vdXRlcldpZHRoKCk7CgkJfQoJCW5UYWJsZS5zdHlsZS53aWR0aCA9IGlXaWR0aCsicHgiOwoJCW9DYWNoZS5uV3JhcHBlci5zdHlsZS53aWR0aCA9IGlXaWR0aCsicHgiOwoJfSwKCgoJLyoqCgkgKiBFcXVhbGlzZSB0aGUgaGVpZ2h0cyBvZiB0aGUgcm93cyBpbiBhIGdpdmVuIHRhYmxlIG5vZGUgaW4gYSBjcm9zcyBicm93c2VyIHdheS4gTm90ZSB0aGF0IHRoaXMKCSAqIGlzIG1vcmUgb3IgbGVzcyBsaWZ0ZWQgYXMgaXMgZnJvbSBGaXhlZENvbHVtbnMKCSAqICBAbWV0aG9kICBmbkVxdWFsaXNlSGVpZ2h0cwoJICogIEByZXR1cm5zIHZvaWQKCSAqICBAcGFyYW0gICB7c3RyaW5nfSBwYXJlbnQgTm9kZSB0eXBlIC0gdGhlYWQsIHRib2R5IG9yIHRmb290CgkgKiAgQHBhcmFtICAge2VsZW1lbnR9IG9yaWdpbmFsIE9yaWdpbmFsIG5vZGUgdG8gdGFrZSB0aGUgaGVpZ2h0cyBmcm9tCgkgKiAgQHBhcmFtICAge2VsZW1lbnR9IGNsb25lIENvcHkgdGhlIGhlaWdodHMgdG8KCSAqICBAcHJpdmF0ZQoJICovCgkiZm5FcXVhbGlzZUhlaWdodHMiOiBmdW5jdGlvbiAoIHBhcmVudCwgb3JpZ2luYWwsIGNsb25lICkKCXsKCQl2YXIgdGhhdCA9IHRoaXM7CgkJdmFyIG9yaWdpbmFscyA9ICQocGFyZW50ICsnIHRyJywgb3JpZ2luYWwpOwoJCXZhciBoZWlnaHQ7CgoJCSQocGFyZW50KycgdHInLCBjbG9uZSkuZWFjaCggZnVuY3Rpb24gKGspIHsKCQkJaGVpZ2h0ID0gb3JpZ2luYWxzLmVxKCBrICkuY3NzKCdoZWlnaHQnKTsKCgkJCS8vIFRoaXMgaXMgbmFzdHkgOi0oLiBJRSBoYXMgYSBzdWItcGl4ZWwgZXJyb3IgZXZlbiB3aGVuIHNldHRpbmcKCQkJLy8gdGhlIGhlaWdodCBiZWxvdyAodGhlIEZpcmVmb3ggZml4KSB3aGljaCBjYXVzZXMgdGhlIGZpeGVkIGNvbHVtbgoJCQkvLyB0byBnbyBvdXQgb2YgYWxpZ25tZW50LiBOZWVkIHRvIGFkZCBhIHBpeGVsIGJlZm9yZSB0aGUgYXNzaWdubWVudAoJCQkvLyBDYW4gdGhpcyBiZSBmZWF0dXJlIGRldGVjdGVkPyBOb3Qgc3VyZSBob3cuLi4KCQkJaWYgKCBuYXZpZ2F0b3IuYXBwTmFtZSA9PSAnTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyJyApIHsKCQkJCWhlaWdodCA9IHBhcnNlSW50KCBoZWlnaHQsIDEwICkgKyAxOwoJCQl9CgoJCQkkKHRoaXMpLmNzcyggJ2hlaWdodCcsIGhlaWdodCApOwoKCQkJLy8gRm9yIEZpcmVmb3ggdG8gd29yaywgd2UgbmVlZCB0byBhbHNvIHNldCB0aGUgaGVpZ2h0IG9mIHRoZQoJCQkvLyBvcmlnaW5hbCByb3csIHRvIHRoZSB2YWx1ZSB0aGF0IHdlIHJlYWQgZnJvbSBpdCEgT3RoZXJ3aXNlIHRoZXJlCgkJCS8vIGlzIGEgc3ViLXBpeGVsIHJvdW5kaW5nIGVycm9yCgkJCW9yaWdpbmFscy5lcSggayApLmNzcyggJ2hlaWdodCcsIGhlaWdodCApOwoJCX0gKTsKCX0KfTsKCgovKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoKICogU3RhdGljIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMKICogICBXZSB1c2UgdGhlc2UgZm9yIHNwZWVkISBUaGlzIGluZm9ybWF0aW9uIGlzIGNvbW1vbiB0byBhbGwgaW5zdGFuY2VzIG9mIEZpeGVkSGVhZGVyLCBzbyBubwogKiBwb2ludCBpZiBoYXZpbmcgdGhlbSBjYWxjdWxhdGVkIGFuZCBzdG9yZWQgZm9yIGVhY2ggZGlmZmVyZW50IGluc3RhbmNlLgogKi8KCi8qCiAqIFZhcmlhYmxlOiBvV2luCiAqIFB1cnBvc2U6ICBTdG9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgd2luZG93IHBvc2l0aW9uaW5nCiAqIFNjb3BlOiAgICBGaXhlZEhlYWRlcgogKi8KRml4ZWRIZWFkZXIub1dpbiA9IHsKCSJpU2Nyb2xsVG9wIjogMCwKCSJpU2Nyb2xsUmlnaHQiOiAwLAoJImlTY3JvbGxCb3R0b20iOiAwLAoJImlTY3JvbGxMZWZ0IjogMCwKCSJpSGVpZ2h0IjogMCwKCSJpV2lkdGgiOiAwCn07CgovKgogKiBWYXJpYWJsZTogb0RvYwogKiBQdXJwb3NlOiAgU3RvcmUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGRvY3VtZW50IHNpemUKICogU2NvcGU6ICAgIEZpeGVkSGVhZGVyCiAqLwpGaXhlZEhlYWRlci5vRG9jID0gewoJImlIZWlnaHQiOiAwLAoJImlXaWR0aCI6IDAKfTsKCi8qCiAqIFZhcmlhYmxlOiBhZm5TY3JvbGwKICogUHVycG9zZTogIEFycmF5IG9mIGZ1bmN0aW9ucyB0aGF0IGFyZSB0byBiZSB1c2VkIGZvciB0aGUgc2Nyb2xsaW5nIGNvbXBvbmVudHMKICogU2NvcGU6ICAgIEZpeGVkSGVhZGVyCiAqLwpGaXhlZEhlYWRlci5hZm5TY3JvbGwgPSBbXTsKCi8qCiAqIEZ1bmN0aW9uOiBmbk1lYXN1cmUKICogUHVycG9zZTogIFVwZGF0ZSB0aGUgbWVhc3VyZW1lbnRzIGZvciB0aGUgd2luZG93IGFuZCBkb2N1bWVudAogKiBSZXR1cm5zOiAgLQogKiBJbnB1dHM6ICAgLQogKi8KRml4ZWRIZWFkZXIuZm5NZWFzdXJlID0gZnVuY3Rpb24gKCkKewoJdmFyCgkJanFXaW4gPSAkKHdpbmRvdyksCgkJanFEb2MgPSAkKGRvY3VtZW50KSwKCQlvV2luID0gRml4ZWRIZWFkZXIub1dpbiwKCQlvRG9jID0gRml4ZWRIZWFkZXIub0RvYzsKCglvRG9jLmlIZWlnaHQgPSBqcURvYy5oZWlnaHQoKTsKCW9Eb2MuaVdpZHRoID0ganFEb2Mud2lkdGgoKTsKCglvV2luLmlIZWlnaHQgPSBqcVdpbi5oZWlnaHQoKTsKCW9XaW4uaVdpZHRoID0ganFXaW4ud2lkdGgoKTsKCW9XaW4uaVNjcm9sbFRvcCA9IGpxV2luLnNjcm9sbFRvcCgpOwoJb1dpbi5pU2Nyb2xsTGVmdCA9IGpxV2luLnNjcm9sbExlZnQoKTsKCW9XaW4uaVNjcm9sbFJpZ2h0ID0gb0RvYy5pV2lkdGggLSBvV2luLmlTY3JvbGxMZWZ0IC0gb1dpbi5pV2lkdGg7CglvV2luLmlTY3JvbGxCb3R0b20gPSBvRG9jLmlIZWlnaHQgLSBvV2luLmlTY3JvbGxUb3AgLSBvV2luLmlIZWlnaHQ7Cn07CgoKRml4ZWRIZWFkZXIudmVyc2lvbiA9ICIyLjEuMiI7CgoKLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqCiAqIEdsb2JhbCBwcm9jZXNzaW5nCiAqLwoKLyoKICogSnVzdCBvbmUgJ3Njcm9sbCcgZXZlbnQgaGFuZGxlciBpbiBGaXhlZEhlYWRlciwgd2hpY2ggY2FsbHMgdGhlIHJlcXVpcmVkIGNvbXBvbmVudHMuIFRoaXMgaXMKICogZG9uZSBhcyBhbiBvcHRpbWlzYXRpb24sIHRvIHJlZHVjZSBjYWxjdWxhdGlvbiBhbmQgcHJvYWdhdGlvbiB0aW1lCiAqLwokKHdpbmRvdykuc2Nyb2xsKCBmdW5jdGlvbiAoKSB7CglGaXhlZEhlYWRlci5mbk1lYXN1cmUoKTsKCglmb3IgKCB2YXIgaT0wLCBpTGVuPUZpeGVkSGVhZGVyLmFmblNjcm9sbC5sZW5ndGggOyBpPGlMZW4gOyBpKysgKSB7CgkJRml4ZWRIZWFkZXIuYWZuU2Nyb2xsW2ldKCk7Cgl9Cn0gKTsKCgokLmZuLmRhdGFUYWJsZS5GaXhlZEhlYWRlciA9IEZpeGVkSGVhZGVyOwokLmZuLkRhdGFUYWJsZS5GaXhlZEhlYWRlciA9IEZpeGVkSGVhZGVyOwoKCnJldHVybiBGaXhlZEhlYWRlcjsKfTsgLy8gL2ZhY3RvcnkKCgovLyBEZWZpbmUgYXMgYW4gQU1EIG1vZHVsZSBpZiBwb3NzaWJsZQppZiAoIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHsKCWRlZmluZSggWydqcXVlcnknLCAnZGF0YXRhYmxlcyddLCBmYWN0b3J5ICk7Cn0KZWxzZSBpZiAoIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyApIHsKICAgIC8vIE5vZGUvQ29tbW9uSlMKICAgIGZhY3RvcnkoIHJlcXVpcmUoJ2pxdWVyeScpLCByZXF1aXJlKCdkYXRhdGFibGVzJykgKTsKfQplbHNlIGlmICggalF1ZXJ5ICYmICFqUXVlcnkuZm4uZGF0YVRhYmxlLkZpeGVkSGVhZGVyICkgewoJLy8gT3RoZXJ3aXNlIHNpbXBseSBpbml0aWFsaXNlIGFzIG5vcm1hbCwgc3RvcHBpbmcgbXVsdGlwbGUgZXZhbHVhdGlvbgoJZmFjdG9yeSggalF1ZXJ5LCBqUXVlcnkuZm4uZGF0YVRhYmxlICk7Cn0KCgp9KSh3aW5kb3csIGRvY3VtZW50KTsKCg==",
    "size": "29308"
}