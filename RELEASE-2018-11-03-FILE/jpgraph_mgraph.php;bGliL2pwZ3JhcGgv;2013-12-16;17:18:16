{
    "namaFile": "lib\/jpgraph\/jpgraph_mgraph.php",
    "lastUpdate": "2013-12-16+17:18:16.00",
    "contentFile": "PD9waHAKLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogLy8gRmlsZTogICAgICAgIEpQR1JBUEhfTUdSQVBILlBIUAogLy8gRGVzY3JpcHRpb246IENsYXNzIHRvIGhhbmRsZSBtdWx0aXBsZSBncmFwaHMgaW4gdGhlIHNhbWUgaW1hZ2UKIC8vIENyZWF0ZWQ6ICAgICAyMDA2LTAxLTE1CiAvLyBWZXI6ICAgICAgICAgJElkOiBqcGdyYXBoX21ncmFwaC5waHAgMTc3MCAyMDA5LTA4LTE3IDA2OjEwOjIyWiBsanAgJAogLy8KIC8vIENvcHlyaWdodCAoYykgQXNpYWwgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi8KCi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gQ0xBU1MgTUdyYXBoCi8vIERlc2NyaXB0aW9uOiBDcmVhdGUgYSBjb250YWluZXIgaW1hZ2UgdGhhdCBjYW4gaG9sZCBzZXZlcmFsIGdyYXBoCi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KY2xhc3MgTUdyYXBoIHsKCiAgICBwdWJsaWMgJHRpdGxlID0gbnVsbCwgJHN1YnRpdGxlID0gbnVsbCwgJHN1YnN1YnRpdGxlID0gbnVsbDsKCiAgICBwcm90ZWN0ZWQgJGltZz1OVUxMOwogICAgcHJvdGVjdGVkICRpQ250PTAsJGlHcmFwaHMgPSBhcnJheSgpOyAvLyBpbWFnZV9oYW5kbGUsIHgsIHksIGZ4LCBmeSwgc2l6ZXgsIHNpemV5CiAgICBwcm90ZWN0ZWQgJGlGaWxsQ29sb3I9J3doaXRlJywgJGlDdXJyZW50Q29sb3I9MDsKICAgIHByb3RlY3RlZCAkbG09NCwkcm09NCwkdG09NCwkYm09NDsKICAgIHByb3RlY3RlZCAkaURvRnJhbWUgPSBGQUxTRSwgJGlGcmFtZUNvbG9yID0gJ2JsYWNrJywgJGlGcmFtZVdlaWdodCA9IDE7CiAgICBwcm90ZWN0ZWQgJGlMaW5lV2VpZ2h0ID0gMTsKICAgIHByb3RlY3RlZCAkZXhwaXJlZD1mYWxzZTsKICAgIHByb3RlY3RlZCAkY2FjaGU9bnVsbCwkY2FjaGVfbmFtZSA9ICcnLCRpbmxpbmU9dHJ1ZTsKICAgIHByb3RlY3RlZCAkaW1hZ2VfZm9ybWF0PSdwbmcnLCRpbWFnZV9xdWFsaXR5PTc1OwogICAgcHJvdGVjdGVkICRpV2lkdGg9TlVMTCwkaUhlaWdodD1OVUxMOwogICAgcHJvdGVjdGVkICRiYWNrZ3JvdW5kX2ltYWdlPScnLCRiYWNrZ3JvdW5kX2ltYWdlX2NlbnRlcj10cnVlLAogICAgJGJhY2tyb3VuZF9pbWFnZV9mb3JtYXQ9JycsJGJhY2tncm91bmRfaW1hZ2VfbWl4PTEwMCwKICAgICRiYWNrZ3JvdW5kX2ltYWdlX3k9TlVMTCwgJGJhY2tncm91bmRfaW1hZ2VfeD1OVUxMOwogICAgcHJpdmF0ZSAkZG9zaGFkb3c9ZmFsc2UsICRzaGFkb3dfd2lkdGg9NCwgJHNoYWRvd19jb2xvcj0nZ3JheUAwLjUnOwogICAgcHVibGljICRmb290ZXI7CgoKICAgIC8vIENyZWF0ZSBhIG5ldyBpbnN0YW5lIG9mIHRoZSBjb21iaW5lZCBncmFwaAogICAgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGFXaWR0aD1OVUxMLCRhSGVpZ2h0PU5VTEwsJGFDYWNoZWROYW1lPScnLCRhVGltZU91dD0wLCRhSW5saW5lPXRydWUpIHsKICAgICAgICAkdGhpcy0+aVdpZHRoID0gJGFXaWR0aDsKICAgICAgICAkdGhpcy0+aUhlaWdodCA9ICRhSGVpZ2h0OwoKICAgICAgICAvLyBJZiB0aGUgY2FjaGVkIHZlcnNpb24gZXhpc3QganVzdCByZWFkIGl0IGRpcmVjdGx5IGZyb20gdGhlCiAgICAgICAgLy8gY2FjaGUsIHN0cmVhbSBpdCBiYWNrIHRvIGJyb3dzZXIgYW5kIGV4aXQKICAgICAgICBpZiggJGFDYWNoZWROYW1lIT0nJyAmJiBSRUFEX0NBQ0hFICYmICRhSW5saW5lICkgewogICAgICAgICAgICAkdGhpcy0+Y2FjaGUgPSBuZXcgSW1nU3RyZWFtQ2FjaGUoKTsKICAgICAgICAgICAgJHRoaXMtPmNhY2hlLT5TZXRUaW1lT3V0KCRhVGltZU91dCk7CiAgICAgICAgICAgICRpbWFnZSA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgICBpZiggJHRoaXMtPmNhY2hlLT5HZXRBbmRTdHJlYW0oJGltYWdlLCRhQ2FjaGVkTmFtZSkgKSB7CiAgICAgICAgICAgICAgICBleGl0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgJHRoaXMtPmlubGluZSA9ICRhSW5saW5lOwogICAgICAgICR0aGlzLT5jYWNoZV9uYW1lID0gJGFDYWNoZWROYW1lOwoKICAgICAgICAkdGhpcy0+dGl0bGUgPSBuZXcgVGV4dCgpOwogICAgICAgICR0aGlzLT50aXRsZS0+UGFyYWdyYXBoQWxpZ24oJ2NlbnRlcicpOwogICAgICAgICR0aGlzLT50aXRsZS0+U2V0Rm9udChGRl9GT05UMixGU19CT0xEKTsKICAgICAgICAkdGhpcy0+dGl0bGUtPlNldE1hcmdpbigzKTsKICAgICAgICAkdGhpcy0+dGl0bGUtPlNldEFsaWduKCdjZW50ZXInKTsKCiAgICAgICAgJHRoaXMtPnN1YnRpdGxlID0gbmV3IFRleHQoKTsKICAgICAgICAkdGhpcy0+c3VidGl0bGUtPlBhcmFncmFwaEFsaWduKCdjZW50ZXInKTsKICAgICAgICAkdGhpcy0+c3VidGl0bGUtPlNldEZvbnQoRkZfRk9OVDEsRlNfQk9MRCk7CiAgICAgICAgJHRoaXMtPnN1YnRpdGxlLT5TZXRNYXJnaW4oMyk7CiAgICAgICAgJHRoaXMtPnN1YnRpdGxlLT5TZXRBbGlnbignY2VudGVyJyk7CgogICAgICAgICR0aGlzLT5zdWJzdWJ0aXRsZSA9IG5ldyBUZXh0KCk7CiAgICAgICAgJHRoaXMtPnN1YnN1YnRpdGxlLT5QYXJhZ3JhcGhBbGlnbignY2VudGVyJyk7CiAgICAgICAgJHRoaXMtPnN1YnN1YnRpdGxlLT5TZXRGb250KEZGX0ZPTlQxLEZTX05PUk1BTCk7CiAgICAgICAgJHRoaXMtPnN1YnN1YnRpdGxlLT5TZXRNYXJnaW4oMyk7CiAgICAgICAgJHRoaXMtPnN1YnN1YnRpdGxlLT5TZXRBbGlnbignY2VudGVyJyk7CgogICAgICAgICR0aGlzLT5mb290ZXIgPSBuZXcgRm9vdGVyKCk7CgogICAgfQoKICAgIC8vIFNwZWNpZnkgYmFja2dyb3VuZCBmaWxsIGNvbG9yIGZvciB0aGUgY29tYmluZWQgZ3JhcGgKICAgIGZ1bmN0aW9uIFNldEZpbGxDb2xvcigkYUNvbG9yKSB7CiAgICAgICAgJHRoaXMtPmlGaWxsQ29sb3IgPSAkYUNvbG9yOwogICAgfQoKICAgIC8vIEFkZCBhIGZyYW1lIGFyb3VuZCB0aGUgY29tYmluZWQgZ3JhcGgKICAgIGZ1bmN0aW9uIFNldEZyYW1lKCRhRmxnLCRhQ29sb3I9J2JsYWNrJywkYVdlaWdodD0xKSB7CiAgICAgICAgJHRoaXMtPmlEb0ZyYW1lID0gJGFGbGc7CiAgICAgICAgJHRoaXMtPmlGcmFtZUNvbG9yID0gJGFDb2xvcjsKICAgICAgICAkdGhpcy0+aUZyYW1lV2VpZ2h0ID0gJGFXZWlnaHQ7CiAgICB9CgogICAgLy8gU3BlY2lmeSBhIGJhY2tncm91bmQgaW1hZ2UgYmxlbmQKICAgIGZ1bmN0aW9uIFNldEJhY2tncm91bmRJbWFnZU1peCgkYU1peCkgewogICAgICAgICR0aGlzLT5iYWNrZ3JvdW5kX2ltYWdlX21peCA9ICRhTWl4IDsKICAgIH0KCiAgICAvLyBTcGVjaWZ5IGEgYmFja2dyb3VuZCBpbWFnZQogICAgZnVuY3Rpb24gU2V0QmFja2dyb3VuZEltYWdlKCRhRmlsZU5hbWUsJGFDZW50ZXJfYVg9TlVMTCwkYVk9TlVMTCkgewogICAgICAgIC8vIFNlY29uZCBhcmd1bWVudCBjYW4gYmUgZWl0aGVyIGEgYm9vbGVhbiB2YWx1ZSBvcgogICAgICAgIC8vIGEgbnVtZXJpYwogICAgICAgICRhQ2VudGVyPVRSVUU7CiAgICAgICAgJGFYPU5VTEw7CgogICAgICAgIGlmKCBpc19udW1lcmljKCRhQ2VudGVyX2FYKSApIHsKICAgICAgICAgICAgJGFYPSRhQ2VudGVyX2FYOwogICAgICAgIH0KCiAgICAgICAgLy8gR2V0IGV4dGVuc2lvbiB0byBkZXRlcm1pbmUgaW1hZ2UgdHlwZQogICAgICAgICRlID0gZXhwbG9kZSgnLicsJGFGaWxlTmFtZSk7CiAgICAgICAgaWYoICEkZSApIHsKICAgICAgICAgICAgSnBHcmFwaEVycm9yOjpSYWlzZUwoMTIwMDIsJGFGaWxlTmFtZSk7CiAgICAgICAgICAgIC8vKCdJbmNvcnJlY3QgZmlsZSBuYW1lIGZvciBNR3JhcGg6OlNldEJhY2tncm91bmRJbWFnZSgpIDogJy4kYUZpbGVOYW1lLicgTXVzdCBoYXZlIGEgdmFsaWQgaW1hZ2UgZXh0ZW5zaW9uIChqcGcsZ2lmLHBuZykgd2hlbiB1c2luZyBhdXRvZGV0ZWN0aW9uIG9mIGltYWdlIHR5cGUnKTsKICAgICAgICB9CgogICAgICAgICR2YWxpZF9mb3JtYXRzID0gYXJyYXkoJ3BuZycsICdqcGcnLCAnZ2lmJyk7CiAgICAgICAgJGFJbWdGb3JtYXQgPSBzdHJ0b2xvd2VyKCRlW2NvdW50KCRlKS0xXSk7CiAgICAgICAgaWYgKCRhSW1nRm9ybWF0ID09ICdqcGVnJykgIHsKICAgICAgICAgICAgJGFJbWdGb3JtYXQgPSAnanBnJzsKICAgICAgICB9CiAgICAgICAgZWxzZWlmICghaW5fYXJyYXkoJGFJbWdGb3JtYXQsICR2YWxpZF9mb3JtYXRzKSApICB7CiAgICAgICAgICAgIEpwR3JhcGhFcnJvcjo6UmFpc2VMKDEyMDAzLCRhSW1nRm9ybWF0LCRhRmlsZU5hbWUpOwogICAgICAgICAgICAvLygnVW5rbm93biBmaWxlIGV4dGVuc2lvbiAoJGFJbWdGb3JtYXQpIGluIE1HcmFwaDo6U2V0QmFja2dyb3VuZEltYWdlKCkgZm9yIGZpbGVuYW1lOiAnLiRhRmlsZU5hbWUpOwogICAgICAgIH0KCiAgICAgICAgJHRoaXMtPmJhY2tncm91bmRfaW1hZ2UgPSAkYUZpbGVOYW1lOwogICAgICAgICR0aGlzLT5iYWNrZ3JvdW5kX2ltYWdlX2NlbnRlcj0kYUNlbnRlcjsKICAgICAgICAkdGhpcy0+YmFja2dyb3VuZF9pbWFnZV9mb3JtYXQ9JGFJbWdGb3JtYXQ7CiAgICAgICAgJHRoaXMtPmJhY2tncm91bmRfaW1hZ2VfeCA9ICRhWDsKICAgICAgICAkdGhpcy0+YmFja2dyb3VuZF9pbWFnZV95ID0gJGFZOwogICAgfQoKICAgIGZ1bmN0aW9uIF9zdHJva2VCYWNrZ3JvdW5kSW1hZ2UoKSB7CiAgICAgICAgaWYoICR0aGlzLT5iYWNrZ3JvdW5kX2ltYWdlID09ICcnICkgcmV0dXJuOwoKICAgICAgICAkYmtnaW1nID0gR3JhcGg6OkxvYWRCa2dJbWFnZSgnJywkdGhpcy0+YmFja2dyb3VuZF9pbWFnZSk7CgogICAgICAgIC8vIEJhY2tncm91bmQgd2lkdGggJiBIZW9naHQKICAgICAgICAkYncgPSBpbWFnZXN4KCRia2dpbWcpOwogICAgICAgICRiaCA9IGltYWdlc3koJGJrZ2ltZyk7CgogICAgICAgIC8vIENhbnZhcyB3aWR0aCBhbmQgaGVpZ2h0CiAgICAgICAgJGN3ID0gaW1hZ2VzeCgkdGhpcy0+aW1nKTsKICAgICAgICAkY2ggPSBpbWFnZXN5KCR0aGlzLT5pbWcpOwoKICAgICAgICBpZiggJHRoaXMtPmRvc2hhZG93ICkgewogICAgICAgICAgICAkY3cgLT0gJHRoaXMtPnNoYWRvd193aWR0aDsKICAgICAgICAgICAgJGNoIC09ICR0aGlzLT5zaGFkb3dfd2lkdGg7CiAgICAgICAgfQoKICAgICAgICBpZiggJHRoaXMtPmJhY2tncm91bmRfaW1hZ2VfeCA9PT0gTlVMTCB8fCAkdGhpcy0+YmFja2dyb3VuZF9pbWFnZV95ID09PSBOVUxMICkgewogICAgICAgICAgICBpZiggJHRoaXMtPmJhY2tncm91bmRfaW1hZ2VfY2VudGVyICkgewogICAgICAgICAgICAgICAgLy8gQ2VudGVyIG9yaWdpbmFsIGltYWdlIGluIHRoZSBwbG90IGFyZWEKICAgICAgICAgICAgICAgICR4ID0gcm91bmQoJGN3LzItJGJ3LzIpOyAkeSA9IHJvdW5kKCRjaC8yLSRiaC8yKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIEp1c3QgY29weSB0aGUgaW1hZ2UgZnJvbSBsZWZ0IGNvcm5lciwgbm8gcmVzaXppbmcKICAgICAgICAgICAgICAgICR4PTA7ICR5PTA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICR4ID0gJHRoaXMtPmJhY2tncm91bmRfaW1hZ2VfeDsKICAgICAgICAgICAgJHkgPSAkdGhpcy0+YmFja2dyb3VuZF9pbWFnZV95OwogICAgICAgIH0KICAgICAgICBpbWFnZWNvcHltZXJnZSgkdGhpcy0+aW1nLCRia2dpbWcsJHgsJHksMCwwLCRidywkYmgsJHRoaXMtPmJhY2tncm91bmRfaW1hZ2VfbWl4KTsKICAgIH0KCiAgICBmdW5jdGlvbiBBZGRNaXgoJGFHcmFwaCwkeD0wLCR5PTAsJG1peD0xMDAsJGZ4PTAsJGZ5PTAsJHc9MCwkaD0wKSB7CiAgICAgICAgJHRoaXMtPl9nZEltZ0hhbmRsZSgkYUdyYXBoLT5TdHJva2UoIF9JTUdfSEFORExFUiksJHgsJHksJGZ4PTAsJGZ5PTAsJHcsJGgsJG1peCk7CiAgICB9CgogICAgZnVuY3Rpb24gQWRkKCRhR3JhcGgsJHg9MCwkeT0wLCRmeD0wLCRmeT0wLCR3PTAsJGg9MCkgewogICAgICAgICR0aGlzLT5fZ2RJbWdIYW5kbGUoJGFHcmFwaC0+U3Ryb2tlKCBfSU1HX0hBTkRMRVIpLCR4LCR5LCRmeD0wLCRmeT0wLCR3LCRoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfZ2RJbWdIYW5kbGUoJGFnZENhbnZhcywkeCwkeSwkZng9MCwkZnk9MCwkdz0wLCRoPTAsJG1peD0xMDApIHsKICAgICAgICBpZiggJHcgPT0gMCApIHsKICAgICAgICAgICAgJHcgPSBAaW1hZ2VzeCgkYWdkQ2FudmFzKTsKICAgICAgICB9CiAgICAgICAgaWYoICR3ID09PSBOVUxMICkgewogICAgICAgICAgICBKcEdyYXBoRXJyb3I6OlJhaXNlTCgxMjAwNyk7CiAgICAgICAgICAgIC8vKCdBcmd1bWVudCB0byBNR3JhcGg6OkFkZCgpIGlzIG5vdCBhIHZhbGlkIEdEIGltYWdlIGhhbmRsZS4nKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiggJGggPT0gMCApIHsKICAgICAgICAgICAgJGggPSBAaW1hZ2VzeSgkYWdkQ2FudmFzKTsKICAgICAgICB9CiAgICAgICAgJHRoaXMtPmlHcmFwaHNbJHRoaXMtPmlDbnQrK10gPSBhcnJheSgkYWdkQ2FudmFzLCR4LCR5LCRmeCwkZnksJHcsJGgsJG1peCk7CiAgICB9CgogICAgZnVuY3Rpb24gU2V0TWFyZ2luKCRsbSwkcm0sJHRtLCRibSkgewogICAgICAgICR0aGlzLT5sbSA9ICRsbTsKICAgICAgICAkdGhpcy0+cm0gPSAkcm07CiAgICAgICAgJHRoaXMtPnRtID0gJHRtOwogICAgICAgICR0aGlzLT5ibSA9ICRibTsKICAgIH0KCiAgICBmdW5jdGlvbiBTZXRFeHBpcmVkKCRhRmxnPXRydWUpIHsKICAgICAgICAkdGhpcy0+ZXhwaXJlZCA9ICRhRmxnOwogICAgfQoKICAgIGZ1bmN0aW9uIFNldEltZ0Zvcm1hdCgkYUZvcm1hdCwkYVF1YWxpdHk9NzUpIHsKICAgICAgICAkdGhpcy0+aW1hZ2VfZm9ybWF0ID0gJGFGb3JtYXQ7CiAgICAgICAgJHRoaXMtPmltYWdlX3F1YWxpdHkgPSAkYVF1YWxpdHk7CiAgICB9CgogICAgLy8gU2V0IHRoZSBzaGFkb3cgYXJvdW5kIHRoZSB3aG9sZSBpbWFnZQogICAgZnVuY3Rpb24gU2V0U2hhZG93KCRhU2hvd1NoYWRvdz10cnVlLCRhU2hhZG93V2lkdGg9NCwkYVNoYWRvd0NvbG9yPSdncmF5QDAuMycpIHsKICAgICAgICAkdGhpcy0+ZG9zaGFkb3cgPSAkYVNob3dTaGFkb3c7CiAgICAgICAgJHRoaXMtPnNoYWRvd19jb2xvciA9ICRhU2hhZG93Q29sb3I7CiAgICAgICAgJHRoaXMtPnNoYWRvd193aWR0aCA9ICRhU2hhZG93V2lkdGg7CiAgICAgICAgJHRoaXMtPmZvb3Rlci0+aUJvdHRvbU1hcmdpbiArPSAkYVNoYWRvd1dpZHRoOwogICAgICAgICR0aGlzLT5mb290ZXItPmlSaWdodE1hcmdpbiArPSAkYVNoYWRvd1dpZHRoOwogICAgfQoKICAgIGZ1bmN0aW9uIFN0cm9rZVRpdGxlKCRpbWFnZSwkdywkaCkgewogICAgICAgIC8vIFN0cm9rZSB0aXRsZQogICAgICAgIGlmKCAkdGhpcy0+dGl0bGUtPnQgIT09ICcnICkgewoKICAgICAgICAgICAgJG1hcmdpbiA9IDM7CgogICAgICAgICAgICAkeSA9ICR0aGlzLT50aXRsZS0+bWFyZ2luOwogICAgICAgICAgICBpZiggJHRoaXMtPnRpdGxlLT5oYWxpZ24gPT0gJ2NlbnRlcicgKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+dGl0bGUtPkNlbnRlcigwLCR3LCR5KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlaWYoICR0aGlzLT50aXRsZS0+aGFsaWduID09ICdsZWZ0JyApIHsKICAgICAgICAgICAgICAgICR0aGlzLT50aXRsZS0+U2V0UG9zKCR0aGlzLT50aXRsZS0+bWFyZ2luKzIsJHkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2VpZiggJHRoaXMtPnRpdGxlLT5oYWxpZ24gPT0gJ3JpZ2h0JyApIHsKICAgICAgICAgICAgICAgICRpbmRlbnQgPSAwOwogICAgICAgICAgICAgICAgaWYoICR0aGlzLT5kb3NoYWRvdyApIHsKICAgICAgICAgICAgICAgICAgICAkaW5kZW50ID0gJHRoaXMtPnNoYWRvd193aWR0aCsyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJHRoaXMtPnRpdGxlLT5TZXRQb3MoJHctJHRoaXMtPnRpdGxlLT5tYXJnaW4tJGluZGVudCwkeSwncmlnaHQnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkdGhpcy0+dGl0bGUtPlN0cm9rZSgkaW1hZ2UpOwoKICAgICAgICAgICAgLy8gLi4uIGFuZCBzdWJ0aXRsZQogICAgICAgICAgICAkeSArPSAkdGhpcy0+dGl0bGUtPkdldFRleHRIZWlnaHQoJGltYWdlKSArICRtYXJnaW4gKyAkdGhpcy0+c3VidGl0bGUtPm1hcmdpbjsKICAgICAgICAgICAgaWYoICR0aGlzLT5zdWJ0aXRsZS0+aGFsaWduID09ICdjZW50ZXInICkgewogICAgICAgICAgICAgICAgJHRoaXMtPnN1YnRpdGxlLT5DZW50ZXIoMCwkdywkeSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZWlmKCAkdGhpcy0+c3VidGl0bGUtPmhhbGlnbiA9PSAnbGVmdCcgKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+c3VidGl0bGUtPlNldFBvcygkdGhpcy0+c3VidGl0bGUtPm1hcmdpbisyLCR5KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlaWYoICR0aGlzLT5zdWJ0aXRsZS0+aGFsaWduID09ICdyaWdodCcgKSB7CiAgICAgICAgICAgICAgICAkaW5kZW50ID0gMDsKICAgICAgICAgICAgICAgIGlmKCAkdGhpcy0+ZG9zaGFkb3cgKSB7CiAgICAgICAgICAgICAgICAgICAgJGluZGVudCA9ICR0aGlzLT5zaGFkb3dfd2lkdGgrMjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICR0aGlzLT5zdWJ0aXRsZS0+U2V0UG9zKCR0aGlzLT5pbWctPndpZHRoLSR0aGlzLT5zdWJ0aXRsZS0+bWFyZ2luLSRpbmRlbnQsJHksJ3JpZ2h0Jyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJHRoaXMtPnN1YnRpdGxlLT5TdHJva2UoJGltYWdlKTsKCiAgICAgICAgICAgIC8vIC4uLiBhbmQgc3Vic3VidGl0bGUKICAgICAgICAgICAgJHkgKz0gJHRoaXMtPnN1YnRpdGxlLT5HZXRUZXh0SGVpZ2h0KCRpbWFnZSkgKyAkbWFyZ2luICsgJHRoaXMtPnN1YnN1YnRpdGxlLT5tYXJnaW47CiAgICAgICAgICAgIGlmKCAkdGhpcy0+c3Vic3VidGl0bGUtPmhhbGlnbiA9PSAnY2VudGVyJyApIHsKICAgICAgICAgICAgICAgICR0aGlzLT5zdWJzdWJ0aXRsZS0+Q2VudGVyKDAsJHcsJHkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2VpZiggJHRoaXMtPnN1YnN1YnRpdGxlLT5oYWxpZ24gPT0gJ2xlZnQnICkgewogICAgICAgICAgICAgICAgJHRoaXMtPnN1YnN1YnRpdGxlLT5TZXRQb3MoJHRoaXMtPnN1YnN1YnRpdGxlLT5tYXJnaW4rMiwkeSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZWlmKCAkdGhpcy0+c3Vic3VidGl0bGUtPmhhbGlnbiA9PSAncmlnaHQnICkgewogICAgICAgICAgICAgICAgJGluZGVudCA9IDA7CiAgICAgICAgICAgICAgICBpZiggJHRoaXMtPmRvc2hhZG93ICkgewogICAgICAgICAgICAgICAgICAgICRpbmRlbnQgPSAkdGhpcy0+c2hhZG93X3dpZHRoKzI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkdGhpcy0+c3Vic3VidGl0bGUtPlNldFBvcygkdy0kdGhpcy0+c3Vic3VidGl0bGUtPm1hcmdpbi0kaW5kZW50LCR5LCdyaWdodCcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICR0aGlzLT5zdWJzdWJ0aXRsZS0+U3Ryb2tlKCRpbWFnZSk7CgogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBTdHJva2UoJGFGaWxlTmFtZT0nJykgewogICAgICAgIC8vIEZpbmQgb3V0IHRoZSBuZWNlc3Nhcnkgc2l6ZSBmb3IgdGhlIGNvbnRhaW5lciBpbWFnZQogICAgICAgICR3PTA7ICRoPTA7CiAgICAgICAgZm9yKCRpPTA7ICRpIDwgJHRoaXMtPmlDbnQ7ICsrJGkgKSB7CiAgICAgICAgICAgICRtYXh3ID0gJHRoaXMtPmlHcmFwaHNbJGldWzFdKyR0aGlzLT5pR3JhcGhzWyRpXVs1XTsKICAgICAgICAgICAgJG1heGggPSAkdGhpcy0+aUdyYXBoc1skaV1bMl0rJHRoaXMtPmlHcmFwaHNbJGldWzZdOwogICAgICAgICAgICAkdyA9IG1heCggJHcsICRtYXh3ICk7CiAgICAgICAgICAgICRoID0gbWF4KCAkaCwgJG1heGggKTsKICAgICAgICB9CiAgICAgICAgJHcgKz0gJHRoaXMtPmxtKyR0aGlzLT5ybTsKICAgICAgICAkaCArPSAkdGhpcy0+dG0rJHRoaXMtPmJtOwoKICAgICAgICAvLyBVc2VyIHNwZWNpZmllZCB3aWR0aCxoZWlnaHQgb3ZlcnJpZGVzCiAgICAgICAgaWYoICR0aGlzLT5pV2lkdGggIT09IE5VTEwgJiYgJHRoaXMtPmlXaWR0aCAhPT0gMCApICR3ID0gJHRoaXMtPmlXaWR0aDsKICAgICAgICBpZiggJHRoaXMtPmlIZWlnaHQhPT0gTlVMTCAmJiAkdGhpcy0+aUhlaWdodCAhPT0gMCkgJGggPSAkdGhpcy0+aUhlaWdodDsKCiAgICAgICAgaWYoICR0aGlzLT5kb3NoYWRvdyApIHsKICAgICAgICAgICAgJHcgKz0gJHRoaXMtPnNoYWRvd193aWR0aDsKICAgICAgICAgICAgJGggKz0gJHRoaXMtPnNoYWRvd193aWR0aDsKICAgICAgICB9CgogICAgICAgICRpbWFnZSA9IG5ldyBJbWFnZSgkdywkaCk7CiAgICAgICAgJGltYWdlLT5TZXRJbWdGb3JtYXQoICR0aGlzLT5pbWFnZV9mb3JtYXQsJHRoaXMtPmltYWdlX3F1YWxpdHkpOwoKICAgICAgICBpZiggJHRoaXMtPmRvc2hhZG93ICkgewogICAgICAgICAgICAkaW1hZ2UtPlNldENvbG9yKCR0aGlzLT5pRnJhbWVDb2xvcik7CiAgICAgICAgICAgICRpbWFnZS0+U2hhZG93UmVjdGFuZ2xlKDAsMCwkdy0xLCRoLTEsJHRoaXMtPmlGaWxsQ29sb3IsJHRoaXMtPnNoYWRvd193aWR0aCwkdGhpcy0+c2hhZG93X2NvbG9yKTsKICAgICAgICAgICAgJHcgLT0gJHRoaXMtPnNoYWRvd193aWR0aDsKICAgICAgICAgICAgJGggLT0gJHRoaXMtPnNoYWRvd193aWR0aDsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICRpbWFnZS0+U2V0Q29sb3IoJHRoaXMtPmlGaWxsQ29sb3IpOwogICAgICAgICAgICAkaW1hZ2UtPkZpbGxlZFJlY3RhbmdsZSgwLDAsJHctMSwkaC0xKTsKICAgICAgICB9CiAgICAgICAgJGltYWdlLT5TZXRFeHBpcmVkKCR0aGlzLT5leHBpcmVkKTsKCiAgICAgICAgJHRoaXMtPmltZyA9ICRpbWFnZS0+aW1nOwogICAgICAgICR0aGlzLT5fc3Ryb2tlQmFja2dyb3VuZEltYWdlKCk7CgogICAgICAgIGlmKCAkdGhpcy0+aURvRnJhbWUgJiYgISAkdGhpcy0+ZG9zaGFkb3cgKSB7CiAgICAgICAgICAgJGltYWdlLT5TZXRDb2xvcigkdGhpcy0+aUZyYW1lQ29sb3IpOwogICAgICAgICAgICRpbWFnZS0+U2V0TGluZVdlaWdodCgkdGhpcy0+aUZyYW1lV2VpZ2h0KTsKICAgICAgICAgICAkaW1hZ2UtPlJlY3RhbmdsZSgwLDAsJHctMSwkaC0xKTsKICAgICAgICB9CgogICAgICAgIC8vIENvcHkgYWxsIHN1YiBncmFwaHMgdG8gdGhlIGNvbnRhaW5lcgogICAgICAgIGZvcigkaT0wOyAkaSA8ICR0aGlzLT5pQ250OyArKyRpICkgewogICAgICAgICAgICAkaW1hZ2UtPkNvcHlNZXJnZSgkdGhpcy0+aUdyYXBoc1skaV1bMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+aUdyYXBoc1skaV1bMV0rJHRoaXMtPmxtLCR0aGlzLT5pR3JhcGhzWyRpXVsyXSskdGhpcy0+dG0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+aUdyYXBoc1skaV1bM10sJHRoaXMtPmlHcmFwaHNbJGldWzRdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmlHcmFwaHNbJGldWzVdLCR0aGlzLT5pR3JhcGhzWyRpXVs2XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xLC0xLCAvKiBGdWxsIGZyb20gd2lkdGggYW5kIGhlaWdodCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmlHcmFwaHNbJGldWzddKTsKCgogICAgICAgIH0KCiAgICAgICAgJHRoaXMtPlN0cm9rZVRpdGxlKCRpbWFnZSwkdywkaCk7CiAgICAgICAgJHRoaXMtPmZvb3Rlci0+U3Ryb2tlKCRpbWFnZSk7CgogICAgICAgIC8vIE91dHB1dCBpbWFnZQogICAgICAgIGlmKCAkYUZpbGVOYW1lID09IF9JTUdfSEFORExFUiApIHsKICAgICAgICAgICAgcmV0dXJuICRpbWFnZS0+aW1nOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgLy9GaW5hbGx5IHN0cmVhbSB0aGUgZ2VuZXJhdGVkIHBpY3R1cmUKICAgICAgICAgICAgJHRoaXMtPmNhY2hlID0gbmV3IEltZ1N0cmVhbUNhY2hlKCk7CiAgICAgICAgICAgICR0aGlzLT5jYWNoZS0+UHV0QW5kU3RyZWFtKCRpbWFnZSwkdGhpcy0+Y2FjaGVfbmFtZSwkdGhpcy0+aW5saW5lLCRhRmlsZU5hbWUpOwogICAgICAgIH0KICAgIH0KfQoKLy8gRU9GCgo\/Pgo=",
    "size": "12326"
}