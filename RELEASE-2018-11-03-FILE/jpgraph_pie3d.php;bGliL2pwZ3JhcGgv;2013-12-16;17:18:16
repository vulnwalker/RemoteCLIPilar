{
    "namaFile": "lib\/jpgraph\/jpgraph_pie3d.php",
    "lastUpdate": "2013-12-16+17:18:16.00",
    "contentFile": "PD9waHAKLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogLy8gRmlsZTogICAgICAgIEpQR1JBUEhfUElFM0QuUEhQCiAvLyBEZXNjcmlwdGlvbjogM0QgUGllIHBsb3QgZXh0ZW5zaW9uIGZvciBKcEdyYXBoCiAvLyBDcmVhdGVkOiAgICAgMjAwMS0wMy0yNAogLy8gVmVyOiAgICAgICAgICRJZDoganBncmFwaF9waWUzZC5waHAgMTMyOSAyMDA5LTA2LTIwIDE5OjIzOjMwWiBsanAgJAogLy8KIC8vIENvcHlyaWdodCAoYykgQXNpYWwgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKi8KCi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIENMQVNTIFBpZVBsb3QzRAovLyBEZXNjcmlwdGlvbjogUGxvdHMgYSAzRCBwaWUgd2l0aCBhIHNwZWNpZmllZCBwcm9qZWN0aW9uCi8vIGFuZ2xlIGJldHdlZW4gMjAgYW5kIDcwIGRlZ3JlZXMuCi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CmNsYXNzIFBpZVBsb3QzRCBleHRlbmRzIFBpZVBsb3QgewogICAgcHJpdmF0ZSAkbGFiZWxoaW50Y29sb3I9InJlZCIsJHNob3dsYWJlbGhpbnQ9dHJ1ZTsKICAgIHByaXZhdGUgJGFuZ2xlPTUwOwogICAgcHJpdmF0ZSAkZWRnZWNvbG9yPSIiLCAkZWRnZXdlaWdodD0xOwogICAgcHJpdmF0ZSAkaVRoaWNrbmVzcz1mYWxzZTsKCiAgICAvLy0tLS0tLS0tLS0tLS0tLQogICAgLy8gQ09OU1RSVUNUT1IKICAgIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRkYXRhKSB7CiAgICAgICAgJHRoaXMtPnJhZGl1cyA9IDAuNTsKICAgICAgICAkdGhpcy0+ZGF0YSA9ICRkYXRhOwogICAgICAgICR0aGlzLT50aXRsZSA9IG5ldyBUZXh0KCIiKTsKICAgICAgICAkdGhpcy0+dGl0bGUtPlNldEZvbnQoRkZfRk9OVDEsRlNfQk9MRCk7CiAgICAgICAgJHRoaXMtPnZhbHVlID0gbmV3IERpc3BsYXlWYWx1ZSgpOwogICAgICAgICR0aGlzLT52YWx1ZS0+U2hvdygpOwogICAgICAgICR0aGlzLT52YWx1ZS0+U2V0Rm9ybWF0KCclLjBmJSUnKTsKICAgIH0KCiAgICAvLy0tLS0tLS0tLS0tLS0tLQogICAgLy8gUFVCTElDIE1FVEhPRFMKCiAgICAvLyBTZXQgbGFiZWwgYXJyYXlzCiAgICBmdW5jdGlvbiBTZXRMZWdlbmRzKCRhTGVnZW5kKSB7CiAgICAgICAgJHRoaXMtPmxlZ2VuZHMgPSBhcnJheV9yZXZlcnNlKGFycmF5X3NsaWNlKCRhTGVnZW5kLDAsY291bnQoJHRoaXMtPmRhdGEpKSk7CiAgICB9CgogICAgZnVuY3Rpb24gU2V0U2xpY2VDb2xvcnMoJGFDb2xvcnMpIHsKICAgICAgICAkdGhpcy0+c2V0c2xpY2Vjb2xvcnMgPSAkYUNvbG9yczsKICAgIH0KCiAgICBmdW5jdGlvbiBMZWdlbmQoJGFHcmFwaCkgewogICAgICAgIHBhcmVudDo6TGVnZW5kKCRhR3JhcGgpOwogICAgICAgICRhR3JhcGgtPmxlZ2VuZC0+dHh0Y29sID0gYXJyYXlfcmV2ZXJzZSgkYUdyYXBoLT5sZWdlbmQtPnR4dGNvbCk7CiAgICB9CgogICAgZnVuY3Rpb24gU2V0Q1NJTVRhcmdldHMoJGFUYXJnZXRzLCRhQWx0cz0nJywkYVdpblRhcmdldHM9JycpIHsKICAgICAgICAkdGhpcy0+Y3NpbXRhcmdldHMgPSAkYVRhcmdldHM7CiAgICAgICAgJHRoaXMtPmNzaW13aW50YXJnZXRzID0gJGFXaW5UYXJnZXRzOwogICAgICAgICR0aGlzLT5jc2ltYWx0cyA9ICRhQWx0czsKICAgIH0KCiAgICAvLyBTaG91bGQgdGhlIHNsaWNlcyBiZSBzZXBhcmF0ZWQgYnkgYSBsaW5lPyBJZiBjb2xvciBpcyBzcGVjaWZpZWQgYXMgIiIgbm8gbGluZQogICAgLy8gd2lsbCBiZSB1c2VkIHRvIHNlcGFyYXRlIHBpZSBzbGljZXMuCiAgICBmdW5jdGlvbiBTZXRFZGdlKCRhQ29sb3I9J2JsYWNrJywkYVdlaWdodD0xKSB7CiAgICAgICAgJHRoaXMtPmVkZ2Vjb2xvciA9ICRhQ29sb3I7CiAgICAgICAgJHRoaXMtPmVkZ2V3ZWlnaHQgPSAkYVdlaWdodDsKICAgIH0KCiAgICAvLyBTcGVjaWZ5IHByb2plY3Rpb24gYW5nbGUgZm9yIDNEIGluIGRlZ3JlZXMKICAgIC8vIE11c3QgYmUgYmV0d2VlbiAyMCBhbmQgNzAgZGVncmVlcwogICAgZnVuY3Rpb24gU2V0QW5nbGUoJGEpIHsKICAgICAgICBpZiggJGE8NSB8fCAkYT45MCApIHsKICAgICAgICAgICAgSnBHcmFwaEVycm9yOjpSYWlzZUwoMTQwMDIpOwogICAgICAgICAgICAvLygiUGllUGxvdDNEOjpTZXRBbmdsZSgpIDNEIFBpZSBwcm9qZWN0aW9uIGFuZ2xlIG11c3QgYmUgYmV0d2VlbiA1IGFuZCA4NSBkZWdyZWVzLiIpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgJHRoaXMtPmFuZ2xlID0gJGE7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIEFkZDNEU2xpY2VUb0NTSU0oJGksJHhjLCR5YywkaGVpZ2h0LCR3aWR0aCwkdGhpY2ssJHNhLCRlYSkgeyAgLy9TbGljZSBudW1iZXIsIGVsbGlwc2UgY2VudHJlICh4LHkpLCBoZWlnaHQsIHdpZHRoLCBzdGFydCBhbmdsZSwgZW5kIGFuZ2xlCgogICAgICAgICRzYSAqPSBNX1BJLzE4MDsKICAgICAgICAkZWEgKj0gTV9QSS8xODA7CgogICAgICAgIC8vYWRkIGNvb3JkaW5hdGVzIG9mIHRoZSBjZW50cmUgdG8gdGhlIG1hcAogICAgICAgICRjb29yZHMgPSAiJHhjLCAkeWMiOwoKICAgICAgICAvL2FkZCBjb29yZGluYXRlcyBvZiB0aGUgZmlyc3QgcG9pbnQgb24gdGhlIGFyYyB0byB0aGUgbWFwCiAgICAgICAgJHhwID0gZmxvb3IoJHdpZHRoKmNvcygkc2EpLzIrJHhjKTsKICAgICAgICAkeXAgPSBmbG9vcigkeWMtJGhlaWdodCpzaW4oJHNhKS8yKTsKICAgICAgICAkY29vcmRzLj0gIiwgJHhwLCAkeXAiOwoKICAgICAgICAvL0lmIG9uIHRoZSBmcm9udCBoYWxmLCBhZGQgdGhlIHRoaWNrbmVzcyBvZmZzZXQKICAgICAgICBpZiAoJHNhID49IE1fUEkgJiYgJHNhIDw9IDIqTV9QSSoxLjAxKSB7CiAgICAgICAgICAgICR5cCA9IGZsb29yKCR5cCskdGhpY2spOwogICAgICAgICAgICAkY29vcmRzLj0gIiwgJHhwLCAkeXAiOwogICAgICAgIH0KCiAgICAgICAgLy9hZGQgY29vcmRpbmF0ZXMgZXZlcnkgMC4yIHJhZGlhbnMKICAgICAgICAkYT0kc2ErMC4yOwogICAgICAgIHdoaWxlICgkYTwkZWEpIHsKICAgICAgICAgICAgJHhwID0gZmxvb3IoJHdpZHRoKmNvcygkYSkvMiskeGMpOwogICAgICAgICAgICBpZiAoJGEgPj0gTV9QSSAmJiAkYSA8PSAyKk1fUEkqMS4wMSkgewogICAgICAgICAgICAgICAgJHlwID0gZmxvb3IoJHljLSgkaGVpZ2h0KnNpbigkYSkvMikrJHRoaWNrKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICR5cCA9IGZsb29yKCR5Yy0kaGVpZ2h0KnNpbigkYSkvMik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJGNvb3Jkcy49ICIsICR4cCwgJHlwIjsKICAgICAgICAgICAgJGEgKz0gMC4yOwogICAgICAgIH0KCiAgICAgICAgLy9BZGQgdGhlIGxhc3QgcG9pbnQgb24gdGhlIGFyYwogICAgICAgICR4cCA9IGZsb29yKCR3aWR0aCpjb3MoJGVhKS8yKyR4Yyk7CiAgICAgICAgJHlwID0gZmxvb3IoJHljLSRoZWlnaHQqc2luKCRlYSkvMik7CgoKICAgICAgICBpZiAoJGVhID49IE1fUEkgJiYgJGVhIDw9IDIqTV9QSSoxLjAxKSB7CiAgICAgICAgICAgICRjb29yZHMuPSAiLCAkeHAsICIuZmxvb3IoJHlwKyR0aGljayk7CiAgICAgICAgfQogICAgICAgICRjb29yZHMuPSAiLCAkeHAsICR5cCI7CiAgICAgICAgJGFsdD0nJzsKCiAgICAgICAgaWYoICFlbXB0eSgkdGhpcy0+Y3NpbXRhcmdldHNbJGldKSApIHsKICAgICAgICAgICAgJHRoaXMtPmNzaW1hcmVhcyAuPSAiPGFyZWEgc2hhcGU9XCJwb2x5XCIgY29vcmRzPVwiJGNvb3Jkc1wiIGhyZWY9XCIiLiR0aGlzLT5jc2ltdGFyZ2V0c1skaV0uIlwiIjsKCiAgICAgICAgICAgIGlmKCAhZW1wdHkoJHRoaXMtPmNzaW13aW50YXJnZXRzWyRpXSkgKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+Y3NpbWFyZWFzIC49ICIgdGFyZ2V0PVwiIi4kdGhpcy0+Y3NpbXdpbnRhcmdldHNbJGldLiJcIiAiOwogICAgICAgICAgICB9CiAgICAgICAgICAgICAKICAgICAgICAgICAgaWYoICFlbXB0eSgkdGhpcy0+Y3NpbWFsdHNbJGldKSApIHsKICAgICAgICAgICAgICAgICR0bXA9c3ByaW50ZigkdGhpcy0+Y3NpbWFsdHNbJGldLCR0aGlzLT5kYXRhWyRpXSk7CiAgICAgICAgICAgICAgICAkdGhpcy0+Y3NpbWFyZWFzIC49ICJhbHQ9XCIkdG1wXCIgdGl0bGU9XCIkdG1wXCIgIjsKICAgICAgICAgICAgfQogICAgICAgICAgICAkdGhpcy0+Y3NpbWFyZWFzIC49ICAiIC8+XG4iOwogICAgICAgIH0KCiAgICB9CgogICAgZnVuY3Rpb24gU2V0TGFiZWxzKCRhTGFiZWxzLCRhTGJsUG9zQWRqPSJhdXRvIikgewogICAgICAgICR0aGlzLT5sYWJlbHMgPSAkYUxhYmVsczsKICAgICAgICAkdGhpcy0+aWxhYmVscG9zYWRqPSRhTGJsUG9zQWRqOwogICAgfQoKCiAgICAvLyBEaXN0YW5jZSBmcm9tIHRoZSBwaWUgdG8gdGhlIGxhYmVscwogICAgZnVuY3Rpb24gU2V0TGFiZWxNYXJnaW4oJG0pIHsKICAgICAgICAkdGhpcy0+dmFsdWUtPlNldE1hcmdpbigkbSk7CiAgICB9CgogICAgLy8gU2hvdyBhIHRoaW4gbGluZSBmcm9tIHRoZSBwaWUgdG8gdGhlIGxhYmVsIGZvciBhIHNwZWNpZmljIHNsaWNlCiAgICBmdW5jdGlvbiBTaG93TGFiZWxIaW50KCRmPXRydWUpIHsKICAgICAgICAkdGhpcy0+c2hvd2xhYmVsaGludD0kZjsKICAgIH0KCiAgICAvLyBTZXQgY29sb3Igb2YgaGludCBsaW5lIHRvIGxhYmVsIGZvciBlYWNoIHNsaWNlCiAgICBmdW5jdGlvbiBTZXRMYWJlbEhpbnRDb2xvcigkYykgewogICAgICAgICR0aGlzLT5sYWJlbGhpbnRjb2xvcj0kYzsKICAgIH0KCiAgICBmdW5jdGlvbiBTZXRIZWlnaHQoJGFIZWlnaHQpIHsKICAgICAgICAkdGhpcy0+aVRoaWNrbmVzcyA9ICRhSGVpZ2h0OwogICAgfQoKCiAgICAvLyBOb3JtYWxpemUgQW5nbGUgYmV0d2VlbiAwLTM2MAogICAgZnVuY3Rpb24gTm9ybUFuZ2xlKCRhKSB7CiAgICAgICAgLy8gTm9ybWFsaXplIGFubGUgdG8gMCB0byAyTV9QSQogICAgICAgIC8vCiAgICAgICAgaWYoICRhID4gMCApIHsKICAgICAgICAgICAgd2hpbGUoJGEgPiAzNjApICRhIC09IDM2MDsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHdoaWxlKCRhIDwgMCkgJGEgKz0gMzYwOwogICAgICAgIH0KICAgICAgICBpZiggJGEgPCAwICkKICAgICAgICAkYSA9IDM2MCArICRhOwoKICAgICAgICBpZiggJGEgPT0gMzYwICkgJGE9MDsKICAgICAgICByZXR1cm4gJGE7CiAgICB9CgoKCiAgICAvLyBEcmF3IG9uZSAzRCBwaWUgc2xpY2UgYXQgcG9zaXRpb24gKCR4YywkeWMpIHdpdGggaGVpZ2h0ICR6CiAgICBmdW5jdGlvbiBQaWUzRFNsaWNlKCRpbWcsJHhjLCR5YywkdywkaCwkc2EsJGVhLCR6LCRmaWxsY29sb3IsJHNoYWRvdz0wLjY1KSB7CgogICAgICAgIC8vIER1ZSB0byB0aGUgd2F5IHRoZSAzRCBQaWUgYWxnb3JpdGhtIHdvcmtzIHdlIGFyZQogICAgICAgIC8vIGd1YXJhbnRlZWQgdGhhdCBhbnkgc2xpY2Ugd2UgZ2V0IGludG8gdGhpcyBtZXRob2QKICAgICAgICAvLyBiZWxvbmdzIHRvIGVpdGhlciB0aGUgbGVmdCBvciByaWdodCBzaWRlIG9mIHRoZQogICAgICAgIC8vIHBpZSBlbGxpcHNlLiBIZW5jZSwgbm8gc2xpY2Ugd2lsbCBjcm9zcyA5MCBvciAyNzAKICAgICAgICAvLyBwb2ludC4KICAgICAgICBpZiggKCRzYSA8IDkwICYmICRlYSA+IDkwKSB8fCAoICgkc2EgPiA5MCAmJiAkc2EgPCAyNzApICYmICRlYSA+IDI3MCkgKSB7CiAgICAgICAgICAgIEpwR3JhcGhFcnJvcjo6UmFpc2VMKDE0MDAzKTsvLygnSW50ZXJuYWwgYXNzZXJ0aW9uIGZhaWxlZC4gUGllM0Q6OlBpZTNEU2xpY2UnKTsKICAgICAgICAgICAgZXhpdCgxKTsKICAgICAgICB9CgogICAgICAgICRwW10gPSBhcnJheSgpOwoKICAgICAgICAvLyBTZXR1cCBwcmUtY2FsY3VsYXRlZCB2YWx1ZXMKICAgICAgICAkcnNhID0gJHNhLzE4MCpNX1BJOyAvLyB0byBSYWQKICAgICAgICAkcmVhID0gJGVhLzE4MCpNX1BJOyAvLyB0byBSYWQKICAgICAgICAkc2luc2EgPSBzaW4oJHJzYSk7CiAgICAgICAgJGNvc3NhID0gY29zKCRyc2EpOwogICAgICAgICRzaW5lYSA9IHNpbigkcmVhKTsKICAgICAgICAkY29zZWEgPSBjb3MoJHJlYSk7CgogICAgICAgIC8vIHBbXSBpcyB0aGUgcG9pbnRzIGZvciB0aGUgb3ZlcmFsbCBzbGljZSBhbmQKICAgICAgICAvLyBwdFtdIGlzIHRoZSBwb2ludHMgZm9yIHRoZSB0b3AgcGllCgogICAgICAgIC8vIEFuZ3VsYXIgc3RlcCB3aGVuIGFwcHJveGltYXRpbmcgdGhlIGFyYyB3aXRoIGEgcG9seWdvbiB0cmFpbi4KICAgICAgICAkc3RlcCA9IDAuMDU7CgogICAgICAgIGlmKCAkc2EgPj0gMjcwICkgewogICAgICAgICAgICBpZiggJGVhID4gMzYwIHx8ICgkZWEgPiAwICYmICRlYSA8PSA5MCkgKSB7CiAgICAgICAgICAgICAgICBpZiggJGVhID4gMCAmJiAkZWEgPD0gOTAgKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gQWRqdXN0IGFuZ2xlIHRvIHNpbXBsaWZ5IGNvbmRpdGlvbnMgaW4gbG9vcHMKICAgICAgICAgICAgICAgICAgICAkcmVhICs9IDIqTV9QSTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAkcCA9IGFycmF5KCR4YywkeWMsJHhjLCR5YyskeiwKICAgICAgICAgICAgICAgICR4YyskdyokY29zc2EsJHorJHljLSRoKiRzaW5zYSk7CiAgICAgICAgICAgICAgICAkcHQgPSBhcnJheSgkeGMsJHljLCR4YyskdyokY29zc2EsJHljLSRoKiRzaW5zYSk7CgogICAgICAgICAgICAgICAgZm9yKCAkYT0kcnNhOyAkYSA8IDIqTV9QSTsgJGEgKz0gJHN0ZXAgKSB7CiAgICAgICAgICAgICAgICAgICAgJHRjYSA9IGNvcygkYSk7CiAgICAgICAgICAgICAgICAgICAgJHRzYSA9IHNpbigkYSk7CiAgICAgICAgICAgICAgICAgICAgJHBbXSA9ICR4YyskdyokdGNhOwogICAgICAgICAgICAgICAgICAgICRwW10gPSAkeiskeWMtJGgqJHRzYTsKICAgICAgICAgICAgICAgICAgICAkcHRbXSA9ICR4YyskdyokdGNhOwogICAgICAgICAgICAgICAgICAgICRwdFtdID0gJHljLSRoKiR0c2E7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJHB0W10gPSAkeGMrJHc7CiAgICAgICAgICAgICAgICAkcHRbXSA9ICR5YzsKCiAgICAgICAgICAgICAgICAkcFtdID0gJHhjKyR3OwogICAgICAgICAgICAgICAgJHBbXSA9ICR6KyR5YzsKICAgICAgICAgICAgICAgICRwW10gPSAkeGMrJHc7CiAgICAgICAgICAgICAgICAkcFtdID0gJHljOwogICAgICAgICAgICAgICAgJHBbXSA9ICR4YzsKICAgICAgICAgICAgICAgICRwW10gPSAkeWM7CgogICAgICAgICAgICAgICAgZm9yKCAkYT0yKk1fUEkrJHN0ZXA7ICRhIDwgJHJlYTsgJGEgKz0gJHN0ZXAgKSB7CiAgICAgICAgICAgICAgICAgICAgJHB0W10gPSAkeGMgKyAkdypjb3MoJGEpOwogICAgICAgICAgICAgICAgICAgICRwdFtdID0gJHljIC0gJGgqc2luKCRhKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAkcHRbXSA9ICR4YyskdyokY29zZWE7CiAgICAgICAgICAgICAgICAkcHRbXSA9ICR5Yy0kaCokc2luZWE7CiAgICAgICAgICAgICAgICAkcHRbXSA9ICR4YzsKICAgICAgICAgICAgICAgICRwdFtdID0gJHljOwoKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICRwID0gYXJyYXkoJHhjLCR5YywkeGMsJHljKyR6LAogICAgICAgICAgICAgICAgJHhjKyR3KiRjb3NzYSwkeiskeWMtJGgqJHNpbnNhKTsKICAgICAgICAgICAgICAgICRwdCA9IGFycmF5KCR4YywkeWMsJHhjKyR3KiRjb3NzYSwkeWMtJGgqJHNpbnNhKTsKCiAgICAgICAgICAgICAgICAkcmVhID0gJHJlYSA9PSAwLjAgPyAyKk1fUEkgOiAkcmVhOwogICAgICAgICAgICAgICAgZm9yKCAkYT0kcnNhOyAkYSA8ICRyZWE7ICRhICs9ICRzdGVwICkgewogICAgICAgICAgICAgICAgICAgICR0Y2EgPSBjb3MoJGEpOwogICAgICAgICAgICAgICAgICAgICR0c2EgPSBzaW4oJGEpOwogICAgICAgICAgICAgICAgICAgICRwW10gPSAkeGMrJHcqJHRjYTsKICAgICAgICAgICAgICAgICAgICAkcFtdID0gJHorJHljLSRoKiR0c2E7CiAgICAgICAgICAgICAgICAgICAgJHB0W10gPSAkeGMrJHcqJHRjYTsKICAgICAgICAgICAgICAgICAgICAkcHRbXSA9ICR5Yy0kaCokdHNhOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICRwdFtdID0gJHhjKyR3KiRjb3NlYTsKICAgICAgICAgICAgICAgICRwdFtdID0gJHljLSRoKiRzaW5lYTsKICAgICAgICAgICAgICAgICRwdFtdID0gJHhjOwogICAgICAgICAgICAgICAgJHB0W10gPSAkeWM7CgogICAgICAgICAgICAgICAgJHBbXSA9ICR4YyskdyokY29zZWE7CiAgICAgICAgICAgICAgICAkcFtdID0gJHorJHljLSRoKiRzaW5lYTsKICAgICAgICAgICAgICAgICRwW10gPSAkeGMrJHcqJGNvc2VhOwogICAgICAgICAgICAgICAgJHBbXSA9ICR5Yy0kaCokc2luZWE7CiAgICAgICAgICAgICAgICAkcFtdID0gJHhjOwogICAgICAgICAgICAgICAgJHBbXSA9ICR5YzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlaWYoICRzYSA+PSAxODAgKSB7CiAgICAgICAgICAgICRwID0gYXJyYXkoJHhjLCR5YywkeGMsJHljKyR6LCR4YyskdyokY29zZWEsJHorJHljLSRoKiRzaW5lYSk7CiAgICAgICAgICAgICRwdCA9IGFycmF5KCR4YywkeWMsJHhjKyR3KiRjb3NlYSwkeWMtJGgqJHNpbmVhKTsKCiAgICAgICAgICAgIGZvciggJGE9JHJlYTsgJGE+JHJzYTsgJGEgLT0gJHN0ZXAgKSB7CiAgICAgICAgICAgICAgICAkdGNhID0gY29zKCRhKTsKICAgICAgICAgICAgICAgICR0c2EgPSBzaW4oJGEpOwogICAgICAgICAgICAgICAgJHBbXSA9ICR4YyskdyokdGNhOwogICAgICAgICAgICAgICAgJHBbXSA9ICR6KyR5Yy0kaCokdHNhOwogICAgICAgICAgICAgICAgJHB0W10gPSAkeGMrJHcqJHRjYTsKICAgICAgICAgICAgICAgICRwdFtdID0gJHljLSRoKiR0c2E7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRwdFtdID0gJHhjKyR3KiRjb3NzYTsKICAgICAgICAgICAgJHB0W10gPSAkeWMtJGgqJHNpbnNhOwogICAgICAgICAgICAkcHRbXSA9ICR4YzsKICAgICAgICAgICAgJHB0W10gPSAkeWM7CgogICAgICAgICAgICAkcFtdID0gJHhjKyR3KiRjb3NzYTsKICAgICAgICAgICAgJHBbXSA9ICR6KyR5Yy0kaCokc2luc2E7CiAgICAgICAgICAgICRwW10gPSAkeGMrJHcqJGNvc3NhOwogICAgICAgICAgICAkcFtdID0gJHljLSRoKiRzaW5zYTsKICAgICAgICAgICAgJHBbXSA9ICR4YzsKICAgICAgICAgICAgJHBbXSA9ICR5YzsKCiAgICAgICAgfQogICAgICAgIGVsc2VpZiggJHNhID49IDkwICkgewogICAgICAgICAgICBpZiggJGVhID4gMTgwICkgewogICAgICAgICAgICAgICAgJHAgPSBhcnJheSgkeGMsJHljLCR4YywkeWMrJHosJHhjKyR3KiRjb3NlYSwkeiskeWMtJGgqJHNpbmVhKTsKICAgICAgICAgICAgICAgICRwdCA9IGFycmF5KCR4YywkeWMsJHhjKyR3KiRjb3NlYSwkeWMtJGgqJHNpbmVhKTsKCiAgICAgICAgICAgICAgICBmb3IoICRhPSRyZWE7ICRhID4gTV9QSTsgJGEgLT0gJHN0ZXAgKSB7CiAgICAgICAgICAgICAgICAgICAgJHRjYSA9IGNvcygkYSk7CiAgICAgICAgICAgICAgICAgICAgJHRzYSA9IHNpbigkYSk7CiAgICAgICAgICAgICAgICAgICAgJHBbXSA9ICR4YyskdyokdGNhOwogICAgICAgICAgICAgICAgICAgICRwW10gPSAkeiArICR5YyAtICRoKiR0c2E7CiAgICAgICAgICAgICAgICAgICAgJHB0W10gPSAkeGMrJHcqJHRjYTsKICAgICAgICAgICAgICAgICAgICAkcHRbXSA9ICR5Yy0kaCokdHNhOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICRwW10gPSAkeGMtJHc7CiAgICAgICAgICAgICAgICAkcFtdID0gJHorJHljOwogICAgICAgICAgICAgICAgJHBbXSA9ICR4Yy0kdzsKICAgICAgICAgICAgICAgICRwW10gPSAkeWM7CiAgICAgICAgICAgICAgICAkcFtdID0gJHhjOwogICAgICAgICAgICAgICAgJHBbXSA9ICR5YzsKCiAgICAgICAgICAgICAgICAkcHRbXSA9ICR4Yy0kdzsKICAgICAgICAgICAgICAgICRwdFtdID0gJHorJHljOwogICAgICAgICAgICAgICAgJHB0W10gPSAkeGMtJHc7CiAgICAgICAgICAgICAgICAkcHRbXSA9ICR5YzsKCiAgICAgICAgICAgICAgICBmb3IoICRhPU1fUEktJHN0ZXA7ICRhID4gJHJzYTsgJGEgLT0gJHN0ZXAgKSB7CiAgICAgICAgICAgICAgICAgICAgJHB0W10gPSAkeGMgKyAkdypjb3MoJGEpOwogICAgICAgICAgICAgICAgICAgICRwdFtdID0gJHljIC0gJGgqc2luKCRhKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAkcHRbXSA9ICR4YyskdyokY29zc2E7CiAgICAgICAgICAgICAgICAkcHRbXSA9ICR5Yy0kaCokc2luc2E7CiAgICAgICAgICAgICAgICAkcHRbXSA9ICR4YzsKICAgICAgICAgICAgICAgICRwdFtdID0gJHljOwoKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsgLy8gJHNhID49IDkwICYmICRlYSA8PSAxODAKICAgICAgICAgICAgICAgICRwID0gYXJyYXkoJHhjLCR5YywkeGMsJHljKyR6LAogICAgICAgICAgICAgICAgJHhjKyR3KiRjb3NlYSwkeiskeWMtJGgqJHNpbmVhLAogICAgICAgICAgICAgICAgJHhjKyR3KiRjb3NlYSwkeWMtJGgqJHNpbmVhLAogICAgICAgICAgICAgICAgJHhjLCR5Yyk7CgogICAgICAgICAgICAgICAgJHB0ID0gYXJyYXkoJHhjLCR5YywkeGMrJHcqJGNvc2VhLCR5Yy0kaCokc2luZWEpOwoKICAgICAgICAgICAgICAgIGZvciggJGE9JHJlYTsgJGE+JHJzYTsgJGEgLT0gJHN0ZXAgKSB7CiAgICAgICAgICAgICAgICAgICAgJHB0W10gPSAkeGMgKyAkdypjb3MoJGEpOwogICAgICAgICAgICAgICAgICAgICRwdFtdID0gJHljIC0gJGgqc2luKCRhKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAkcHRbXSA9ICR4YyskdyokY29zc2E7CiAgICAgICAgICAgICAgICAkcHRbXSA9ICR5Yy0kaCokc2luc2E7CiAgICAgICAgICAgICAgICAkcHRbXSA9ICR4YzsKICAgICAgICAgICAgICAgICRwdFtdID0gJHljOwoKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsgLy8gc2EgPiAwICYmIGVhIDwgOTAKCiAgICAgICAgICAgICRwID0gYXJyYXkoJHhjLCR5YywkeGMsJHljKyR6LAogICAgICAgICAgICAkeGMrJHcqJGNvc3NhLCR6KyR5Yy0kaCokc2luc2EsCiAgICAgICAgICAgICR4YyskdyokY29zc2EsJHljLSRoKiRzaW5zYSwKICAgICAgICAgICAgJHhjLCR5Yyk7CgogICAgICAgICAgICAkcHQgPSBhcnJheSgkeGMsJHljLCR4YyskdyokY29zc2EsJHljLSRoKiRzaW5zYSk7CgogICAgICAgICAgICBmb3IoICRhPSRyc2E7ICRhIDwgJHJlYTsgJGEgKz0gJHN0ZXAgKSB7CiAgICAgICAgICAgICAgICAkcHRbXSA9ICR4YyArICR3KmNvcygkYSk7CiAgICAgICAgICAgICAgICAkcHRbXSA9ICR5YyAtICRoKnNpbigkYSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRwdFtdID0gJHhjKyR3KiRjb3NlYTsKICAgICAgICAgICAgJHB0W10gPSAkeWMtJGgqJHNpbmVhOwogICAgICAgICAgICAkcHRbXSA9ICR4YzsKICAgICAgICAgICAgJHB0W10gPSAkeWM7CiAgICAgICAgfQogICAgICAgICAKICAgICAgICAkaW1nLT5QdXNoQ29sb3IoJGZpbGxjb2xvci4iOiIuJHNoYWRvdyk7CiAgICAgICAgJGltZy0+RmlsbGVkUG9seWdvbigkcCk7CiAgICAgICAgJGltZy0+UG9wQ29sb3IoKTsKCiAgICAgICAgJGltZy0+UHVzaENvbG9yKCRmaWxsY29sb3IpOwogICAgICAgICRpbWctPkZpbGxlZFBvbHlnb24oJHB0KTsKICAgICAgICAkaW1nLT5Qb3BDb2xvcigpOwogICAgfQoKICAgIGZ1bmN0aW9uIFNldFN0YXJ0QW5nbGUoJGFTdGFydCkgewogICAgICAgIGlmKCAkYVN0YXJ0IDwgMCB8fCAkYVN0YXJ0ID4gMzYwICkgewogICAgICAgICAgICBKcEdyYXBoRXJyb3I6OlJhaXNlTCgxNDAwNCk7Ly8oJ1NsaWNlIHN0YXJ0IGFuZ2xlIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAzNjAgZGVncmVlcy4nKTsKICAgICAgICB9CiAgICAgICAgJHRoaXMtPnN0YXJ0YW5nbGUgPSAkYVN0YXJ0OwogICAgfQoKICAgIC8vIERyYXcgYSAzRCBQaWUKICAgIGZ1bmN0aW9uIFBpZTNEKCRhYW9wdGlvbiwkaW1nLCRkYXRhLCRjb2xvcnMsJHhjLCR5YywkZCwkYW5nbGUsJHosCiAgICAgICAgICAgICAgICAgICAkc2hhZG93PTAuNjUsJHN0YXJ0YW5nbGU9MCwkZWRnZWNvbG9yPSIiLCRlZGdld2VpZ2h0PTEpIHsKCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyBBcyB1c3VhbCB0aGUgYWxnb3JpdGhtIGdldCBtb3JlIGNvbXBsaWNhdGVkIHRoYW4gSSBvcmlnaW5hbGx5CiAgICAgICAgLy8gZW52aXNpb25lZC4gSSBiZWxpZXZlIHRoYXQgdGhpcyBpcyBhcyBzaW1wbGUgYXMgaXQgaXMgcG9zc2libGUKICAgICAgICAvLyB0byBkbyBpdCB3aXRoIHRoZSBmZWF0dXJlcyBJIHdhbnQuIEl0J3MgYSBnb29kIGV4ZXJjaXNlIHRvIHN0YXJ0CiAgICAgICAgLy8gdGhpbmtpbmcgb24gaG93IHRvIGRvIHRoaXMgdG8gY29udmluY2UgeW91ciBzZWxmIHRoYXQgYWxsIHRoaXMKICAgICAgICAvLyBpcyByZWFsbHkgbmVlZGVkIGZvciB0aGUgZ2VuZXJhbCBjYXNlLgogICAgICAgIC8vCiAgICAgICAgLy8gVGhlIGFsZ29yaXRobSB0d28gZHJhdyAzRCBwaWVzIHdpdGhvdXQgInJlYWwgM0QiIGlzIGRvbmUgaW4KICAgICAgICAvLyB0d28gc3RlcHMuCiAgICAgICAgLy8gRmlyc3QgaW1hZ2luZSB0aGUgcGllIGN1dCBpbiBoYWxmIHRocm91Z2ggYSB0aG91Z2h0IGxpbmUgYmV0d2VlbgogICAgICAgIC8vIDEyJ2EgY2xvY2sgYW5kIDYnYSBjbG9jay4gSXQgbm93IGVhc3kgdG8gaW1hZ2luZSB0aGF0IHdlIGNhbiBwbG90CiAgICAgICAgLy8gdGhlIGluZGl2aWR1YWwgc2xpY2VzIGZvciBlYWNoIGhhbGYgYnkgc3RhcnRpbmcgd2l0aCB0aGUgdG9wbW9zdAogICAgICAgIC8vIHBpZSBzbGljZSBhbmQgY29udGludWUgZG93biB0byA2J2EgY2xvY2suCiAgICAgICAgLy8KICAgICAgICAvLyBJbiB0aGUgYWxnb3J0aXRobSB0aGlzIGlzIGRvbmUgaW4gdGhyZWUgcHJpbmNpcGFsIHN0ZXBzCiAgICAgICAgLy8gU3RlcCAxLiBEbyB0aGUga25pZmUgY3V0IHRvIGVuc3VyZSBieSBzcGxpdHRpbmcgc2xpY2VzIHRoYXQgZXh0ZW5kcwogICAgICAgIC8vIG92ZXIgdGhlIGN1dCBsaW5lLiBUaGlzIGlzIGRvbmUgYnkgc3BsaXR0aW5nIHRoZSBvcmlnaW5hbCBzbGljZXMgaW50bwogICAgICAgIC8vIHVwdG8gMyBzdWJzbGljZXMuCiAgICAgICAgLy8gU3RlcCAyLiBGaW5kIHRoZSB0b3Agc2xpY2UgZm9yIGVhY2ggaGFsZgogICAgICAgIC8vIFN0ZXAgMy4gRHJhdyB0aGUgc2xpY2VzIGZyb20gdG9wIHRvIGJvdHRvbQogICAgICAgIC8vCiAgICAgICAgLy8gVGhlIHRoaW5nIHRoYXQgc2xpZ2h0bHkgY29tcGxpY2F0ZXMgdGhpcyBzY2hlbWUgd2l0aCBhbGwgdGhlCiAgICAgICAgLy8gYW5nbGUgY29tcGFyaXNvbnMgYmVsb3cgaXMgdGhhdCB3ZSBjYW4gaGF2ZSBhbiBhcmJpdHJhcnkgc3RhcnQKICAgICAgICAvLyBhbmdsZSBzbyB3ZSBtdXN0IHRha2UgaW50byBhY2NvdW50IHRoZSBkaWZmZXJlbnQgZXF1aXZhbGVuY2UgY2xhc3Nlcy4KICAgICAgICAvLyBGb3IgdGhlIHNhbWUgcmVhc29uIHdlIG11c3Qgd2FsayB0aHJvdWdoIHRoZSBhbmdsZSBhcnJheSBpbiBhCiAgICAgICAgLy8gbW9kdWxvIGZhc2hpb24uCiAgICAgICAgLy8KICAgICAgICAvLyBMaW1pdGF0aW9ucyBvZiBhbGdvcml0aG06CiAgICAgICAgLy8gKiBBIHNtYWxsIGV4cGxvZGVkIHNsaWNlIHdoaWNoIGNyb3NzZXMgdGhlIDI3MCBkZWdyZWUgcG9pbnQKICAgICAgICAvLyAgIHdpbGwgZ2V0IHNsaWdodGx5IG5hZ2dlZCBjbG9zZSB0byB0aGUgY2VudGVyIGR1ZSB0byB0aGUgZmFjdCB0aGF0CiAgICAgICAgLy8gICB3ZSBwcmludCB0aGUgc2xpY2VzIGluIFotb3JkZXIgYW5kIHRoYXQgdGhlIHNsaWNlIGxlZnQgcGFydAogICAgICAgIC8vICAgZ2V0IHByaW50ZWQgZmlyc3QgYW5kIG1pZ2h0IGdldCBzbGlnaHRseSBuYWdnZWQgYnkgYSBsYXJnZXIKICAgICAgICAvLyAgIHNsaWNlIG9uIHRoZSByaWdodCBzaWRlIGp1c3QgYmVmb3JlIHRoZSByaWdodCBwYXJ0IG9mIHRoZSBzbWFsbAogICAgICAgIC8vICAgc2xpY2UuIE5vdCBhIG1ham9yIHByb2JsZW0gdGhvdWdoLgogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGhlaWdodCBvZiB0aGUgZWxsaXBwc2Ugd2hpY2ggZ2l2ZXMgYW4KICAgICAgICAvLyBpbmRpY2F0aW9uIG9mIHRoZSBpbmNsaW5hdGlvbiBhbmdsZQogICAgICAgICRoID0gKCRhbmdsZS85MC4wKSokZDsKICAgICAgICAkc3VtID0gMDsKICAgICAgICBmb3IoJGk9MDsgJGk8Y291bnQoJGRhdGEpOyArKyRpICkgewogICAgICAgICAgICAkc3VtICs9ICRkYXRhWyRpXTsKICAgICAgICB9CgogICAgICAgIC8vIFNwZWNpYWwgb3B0aW1pemF0aW9uCiAgICAgICAgaWYoICRzdW09PTAgKSByZXR1cm47CgogICAgICAgIGlmKCAkdGhpcy0+bGFiZWx0eXBlID09IDIgKSB7CiAgICAgICAgICAgICR0aGlzLT5hZGp1c3RlZF9kYXRhID0gJHRoaXMtPkFkalBlcmNlbnRhZ2UoJGRhdGEpOwogICAgICAgIH0KCiAgICAgICAgLy8gU2V0dXAgdGhlIHN0YXJ0CiAgICAgICAgJGFjY3N1bSA9IDA7CiAgICAgICAgJGEgPSAkc3RhcnRhbmdsZTsKICAgICAgICAkYSA9ICR0aGlzLT5Ob3JtQW5nbGUoJGEpOwoKICAgICAgICAvLwogICAgICAgIC8vIFN0ZXAgMSAuIFNwbGl0IGFsbCBzbGljZXMgdGhhdCBjcm9zc2VzIDkwIG9yIDI3MAogICAgICAgIC8vCiAgICAgICAgJGlkeD0wOwogICAgICAgICRhZGpleHBsb2RlPWFycmF5KCk7CiAgICAgICAgJG51bWNvbG9ycyA9IGNvdW50KCRjb2xvcnMpOwogICAgICAgIGZvcigkaT0wOyAkaTxjb3VudCgkZGF0YSk7ICsrJGksICsrJGlkeCApIHsKICAgICAgICAgICAgJGRhID0gJGRhdGFbJGldLyRzdW0gKiAzNjA7CgogICAgICAgICAgICBpZiggZW1wdHkoJHRoaXMtPmV4cGxvZGVfcmFkaXVzWyRpXSkgKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+ZXhwbG9kZV9yYWRpdXNbJGldPTA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRleHBzY2FsZT0xOwogICAgICAgICAgICBpZiggJGFhb3B0aW9uID09IDEgKSB7CiAgICAgICAgICAgICAgICAkZXhwc2NhbGU9MjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJGxhID0gJGEgKyAkZGEvMjsKICAgICAgICAgICAgJGV4cGxvZGUgPSBhcnJheSggJHhjICsgJHRoaXMtPmV4cGxvZGVfcmFkaXVzWyRpXSpjb3MoJGxhKk1fUEkvMTgwKSokZXhwc2NhbGUsCiAgICAgICAgICAgICR5YyAtICR0aGlzLT5leHBsb2RlX3JhZGl1c1skaV0qc2luKCRsYSpNX1BJLzE4MCkgKiAoJGgvJGQpICokZXhwc2NhbGUgKTsKICAgICAgICAgICAgJGFkamV4cGxvZGVbJGlkeF0gPSAkZXhwbG9kZTsKICAgICAgICAgICAgJGxhYmVsZGF0YVskaV0gPSBhcnJheSgkbGEsJGV4cGxvZGVbMF0sJGV4cGxvZGVbMV0pOwogICAgICAgICAgICAkb3JpZ2luYWxhbmdsZXNbJGldID0gYXJyYXkoJGEsJGErJGRhKTsKCiAgICAgICAgICAgICRuZSA9ICR0aGlzLT5Ob3JtQW5nbGUoJGErJGRhKTsKICAgICAgICAgICAgaWYoICRkYSA8PSAxODAgKSB7CiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgc2xpY2Ugc2l6ZSBpcyA8PSA5MCBpdCBjYW4gYXQgbWF4aW11bSBjdXQgYWNyb3NzCiAgICAgICAgICAgICAgICAvLyBvbmUgYm91bmRhcnkgKGVpdGhlciA5MCBvciAyNzApIHdoZXJlIGl0IG5lZWRzIHRvIGJlIHNwbGl0CiAgICAgICAgICAgICAgICAkc3BsaXQ9LTE7IC8vIG5vIHNwbGl0CiAgICAgICAgICAgICAgICBpZiggKCRkYTw9OTAgJiYgKCRhIDw9IDkwICYmICRuZSA+IDkwKSkgfHwKICAgICAgICAgICAgICAgICgoJGRhIDw9IDE4MCAmJiAkZGEgPjkwKSAgJiYgKCgkYSA8IDkwIHx8ICRhID49IDI3MCkgJiYgJG5lID4gOTApKSApIHsKICAgICAgICAgICAgICAgICAgICAkc3BsaXQgPSA5MDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2VpZiggKCRkYTw9OTAgJiYgKCRhIDw9IDI3MCAmJiAkbmUgPiAyNzApKSB8fAogICAgICAgICAgICAgICAgKCgkZGE8PTE4MCAmJiAkZGE+OTApICYmICgkYSA+PSA5MCAmJiAkYSA8IDI3MCAmJiAoJGErJGRhKSA+IDI3MCApKSApIHsKICAgICAgICAgICAgICAgICAgICAkc3BsaXQgPSAyNzA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiggJHNwbGl0ID4gMCApIHsgLy8gc3BsaXQgaW4gdHdvCiAgICAgICAgICAgICAgICAgICAgJGFuZ2xlc1skaWR4XSA9IGFycmF5KCRhLCRzcGxpdCk7CiAgICAgICAgICAgICAgICAgICAgJGFkamNvbG9yc1skaWR4XSA9ICRjb2xvcnNbJGkgJSAkbnVtY29sb3JzXTsKICAgICAgICAgICAgICAgICAgICAkYWRqZXhwbG9kZVskaWR4XSA9ICRleHBsb2RlOwogICAgICAgICAgICAgICAgICAgICRhbmdsZXNbKyskaWR4XSA9IGFycmF5KCRzcGxpdCwkbmUpOwogICAgICAgICAgICAgICAgICAgICRhZGpjb2xvcnNbJGlkeF0gPSAkY29sb3JzWyRpICUgJG51bWNvbG9yc107CiAgICAgICAgICAgICAgICAgICAgJGFkamV4cGxvZGVbJGlkeF0gPSAkZXhwbG9kZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBubyBzcGxpdAogICAgICAgICAgICAgICAgICAgICRhbmdsZXNbJGlkeF0gPSBhcnJheSgkYSwkbmUpOwogICAgICAgICAgICAgICAgICAgICRhZGpjb2xvcnNbJGlkeF0gPSAkY29sb3JzWyRpICAlICRudW1jb2xvcnNdOwogICAgICAgICAgICAgICAgICAgICRhZGpleHBsb2RlWyRpZHhdID0gJGV4cGxvZGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBkYT4xODAKICAgICAgICAgICAgICAgIC8vIFNsaWNlIG1heSwgZGVwZW5kaW5nIG9uIHBvc2l0aW9uLCBjcm9zcyBvbmUgb3IgdHdvCiAgICAgICAgICAgICAgICAvLyBib251ZGFyaWVzCgogICAgICAgICAgICAgICAgaWYoICRhIDwgOTAgKSAgICAgICAgJHNwbGl0ID0gOTA7CiAgICAgICAgICAgICAgICBlbHNlaWYoICRhIDw9IDI3MCApICAkc3BsaXQgPSAyNzA7CiAgICAgICAgICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAkc3BsaXQgPSA5MDsKCiAgICAgICAgICAgICAgICAkYW5nbGVzWyRpZHhdID0gYXJyYXkoJGEsJHNwbGl0KTsKICAgICAgICAgICAgICAgICRhZGpjb2xvcnNbJGlkeF0gPSAkY29sb3JzWyRpICUgJG51bWNvbG9yc107CiAgICAgICAgICAgICAgICAkYWRqZXhwbG9kZVskaWR4XSA9ICRleHBsb2RlOwogICAgICAgICAgICAgICAgLy9pZiggJGErJGRhID4gMzYwLSRzcGxpdCApIHsKICAgICAgICAgICAgICAgIC8vIEZvciBzbGljZXMgbGFyZ2VyIHRoYW4gMjcwIGRlZ3JlZXMgd2UgbWlnaHQgY3Jvc3MKICAgICAgICAgICAgICAgIC8vIGFub3RoZXIgYm91bmRhcnkgYXMgd2VsbC4gVGhpcyBtZWFucyB0aGF0IHdlIG11c3QKICAgICAgICAgICAgICAgIC8vIHNwbGl0IHRoZSBzbGljZSBmdXJ0aGVyLiBUaGUgY29tcGFyaXNvbiBnZXRzIGEgbGl0dGxlCiAgICAgICAgICAgICAgICAvLyBiaXQgY29tcGxpY2F0ZWQgc2luY2Ugd2UgbXVzdCB0YWtlIGludG8gYWNjb3VuZCB0aGF0CiAgICAgICAgICAgICAgICAvLyBhIHBpZSBtaWdodCBoYXZlIGEgc3RhcnRhbmdsZSA+MCBhbmQgaGVuY2UgYSBzbGljZSBtaWdodAogICAgICAgICAgICAgICAgLy8gd3JhcCBhcm91bmQgdGhlIDAgYW5nbGUuCiAgICAgICAgICAgICAgICAvLyBUaHJlZSBjYXNlczoKICAgICAgICAgICAgICAgIC8vICBhKSBTbGljZSBzdGFydHMgYmVmb3JlIDkwIGFuZCBoZW5jZSBnZXRzIGEgc3BsaXQ9OTAsIGJ1dAogICAgICAgICAgICAgICAgLy8gICAgIHdlIG11c3QgYWxzbyBjaGVjayBpZiB3ZSBuZWVkIHRvIHNwbGl0IGF0IDI3MAogICAgICAgICAgICAgICAgLy8gIGIpIFNsaWNlIHN0YXJ0cyBhZnRlciA5MCBidXQgYmVmb3JlIDI3MCBhbmQgc2xpY2VzCiAgICAgICAgICAgICAgICAvLyAgICAgY3Jvc3NlcyA5MCAoYWZ0ZXIgYSB3cmFwIGFyb3VuZCBvZiAwKQogICAgICAgICAgICAgICAgLy8gIGMpIElmIHN0YXJ0IGlzID4gMjcwIChoZW5jZSB0aGUgZmlyc3RyIHNwbGl0IGlzIGF0IDkwKQogICAgICAgICAgICAgICAgLy8gICAgIGFuZCB0aGUgc2xpY2UgaXMgc28gbGFyZ2UgdGhhdCBpdCBnb2VzIGFsbCB0aGUgd2F5CiAgICAgICAgICAgICAgICAvLyAgICAgYXJvdW5kIDI3MC4KICAgICAgICAgICAgICAgIGlmKCAoJGEgPCA5MCAmJiAoJGErJGRhID4gMjcwKSkgfHwgKCRhID4gOTAgJiYgJGE8PTI3MCAmJiAoJGErJGRhPjM2MCs5MCkgKSB8fCAoJGEgPiAyNzAgJiYgJHRoaXMtPk5vcm1BbmdsZSgkYSskZGEpPjI3MCkgKSB7CiAgICAgICAgICAgICAgICAgICAgJGFuZ2xlc1srKyRpZHhdID0gYXJyYXkoJHNwbGl0LDM2MC0kc3BsaXQpOwogICAgICAgICAgICAgICAgICAgICRhZGpjb2xvcnNbJGlkeF0gPSAkY29sb3JzWyRpICUgJG51bWNvbG9yc107CiAgICAgICAgICAgICAgICAgICAgJGFkamV4cGxvZGVbJGlkeF0gPSAkZXhwbG9kZTsKICAgICAgICAgICAgICAgICAgICAkYW5nbGVzWysrJGlkeF0gPSBhcnJheSgzNjAtJHNwbGl0LCRuZSk7CiAgICAgICAgICAgICAgICAgICAgJGFkamNvbG9yc1skaWR4XSA9ICRjb2xvcnNbJGkgJSAkbnVtY29sb3JzXTsKICAgICAgICAgICAgICAgICAgICAkYWRqZXhwbG9kZVskaWR4XSA9ICRleHBsb2RlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8gSnVzdCBhIHNpbXBsZSBzcGxpdCB0byB0aGUgcHJldmlvdXMgZGVjaWRlZAogICAgICAgICAgICAgICAgICAgIC8vIGFuZ2xlLgogICAgICAgICAgICAgICAgICAgICRhbmdsZXNbKyskaWR4XSA9IGFycmF5KCRzcGxpdCwkbmUpOwogICAgICAgICAgICAgICAgICAgICRhZGpjb2xvcnNbJGlkeF0gPSAkY29sb3JzWyRpICUgJG51bWNvbG9yc107CiAgICAgICAgICAgICAgICAgICAgJGFkamV4cGxvZGVbJGlkeF0gPSAkZXhwbG9kZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAkYSArPSAkZGE7CiAgICAgICAgICAgICRhID0gJHRoaXMtPk5vcm1BbmdsZSgkYSk7CiAgICAgICAgfQoKICAgICAgICAvLyBUb3RhbCBudW1iZXIgb2Ygc2xpY2VzCiAgICAgICAgJG4gPSBjb3VudCgkYW5nbGVzKTsKCiAgICAgICAgZm9yKCRpPTA7ICRpPCRuOyArKyRpKSB7CiAgICAgICAgICAgIGxpc3QoJGRiZ3MsJGRiZ2UpID0gJGFuZ2xlc1skaV07CiAgICAgICAgfQoKICAgICAgICAvLwogICAgICAgIC8vIFN0ZXAgMi4gRmluZCBzdGFydCBpbmRleCAoZmlyc3QgcGllIHRoYXQgc3RhcnRzIGluIHVwcGVyIGxlZnQgcXVhZHJhbnQpCiAgICAgICAgLy8KICAgICAgICAkbWludmFsID0gJGFuZ2xlc1swXVswXTsKICAgICAgICAkbWluID0gMDsKICAgICAgICBmb3IoICRpPTA7ICRpPCRuOyArKyRpICkgewogICAgICAgICAgICBpZiggJGFuZ2xlc1skaV1bMF0gPCAkbWludmFsICkgewogICAgICAgICAgICAgICAgJG1pbnZhbCA9ICRhbmdsZXNbJGldWzBdOwogICAgICAgICAgICAgICAgJG1pbiA9ICRpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICRqID0gJG1pbjsKICAgICAgICAkY250ID0gMDsKICAgICAgICB3aGlsZSggJGFuZ2xlc1skal1bMV0gPD0gOTAgKSB7CiAgICAgICAgICAgICRqKys7CiAgICAgICAgICAgIGlmKCAkaj49JG4pIHsKICAgICAgICAgICAgICAgICRqPTA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoICRjbnQgPiAkbiApIHsKICAgICAgICAgICAgICAgIEpwR3JhcGhFcnJvcjo6UmFpc2VMKDE0MDA1KTsKICAgICAgICAgICAgICAgIC8vKCJQaWUzRCBJbnRlcm5hbCBlcnJvciAoIzEpLiBUcnlpbmcgdG8gd3JhcCB0d2ljZSB3aGVuIGxvb2tpbmcgZm9yIHN0YXJ0IGluZGV4Iik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgKyskY250OwogICAgICAgIH0KICAgICAgICAkc3RhcnQgPSAkajsKCiAgICAgICAgLy8KICAgICAgICAvLyBTdGVwIDMuIFByaW50IHNsaWNlcyBpbiB6LW9yZGVyCiAgICAgICAgLy8KICAgICAgICAkY250ID0gMDsKCiAgICAgICAgLy8gRmlyc3Qgc3Ryb2tlIGFsbCB0aGUgc2xpY2VzIGJldHdlZW4gOTAgYW5kIDI3MCAobGVmdCBoYWxmIGNpcmNsZSkKICAgICAgICAvLyBjb3VudGVyY2xvY2t3aXNlCiAgICAgICAgIAogICAgICAgIHdoaWxlKCAkYW5nbGVzWyRqXVswXSA8IDI3MCAgJiYgJGFhb3B0aW9uICE9PSAyICkgewoKICAgICAgICAgICAgbGlzdCgkeCwkeSkgPSAkYWRqZXhwbG9kZVskal07CgogICAgICAgICAgICAkdGhpcy0+UGllM0RTbGljZSgkaW1nLCR4LCR5LCRkLCRoLCRhbmdsZXNbJGpdWzBdLCRhbmdsZXNbJGpdWzFdLAogICAgICAgICAgICAkeiwkYWRqY29sb3JzWyRqXSwkc2hhZG93KTsKCiAgICAgICAgICAgICRsYXN0ID0gYXJyYXkoJHgsJHksJGopOwoKICAgICAgICAgICAgJGorKzsKICAgICAgICAgICAgaWYoICRqID49ICRuICkgJGo9MDsKICAgICAgICAgICAgaWYoICRjbnQgPiAkbiApIHsKICAgICAgICAgICAgICAgIEpwR3JhcGhFcnJvcjo6UmFpc2VMKDE0MDA2KTsKICAgICAgICAgICAgICAgIC8vKCJQaWUzRCBJbnRlcm5hbCBFcnJvcjogWi1Tb3J0aW5nIGFsZ29yaXRobSBmb3IgM0QgUGllcyBpcyBub3Qgd29ya2luZyBwcm9wZXJseSAoMikuIFRyeWluZyB0byB3cmFwIHR3aWNlIHdoaWxlIHN0cm9raW5nLiIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICsrJGNudDsKICAgICAgICB9CiAgICAgICAgIAogICAgICAgICRzbGljZV9sZWZ0ID0gJG4tJGNudDsKICAgICAgICAkaj0kc3RhcnQtMTsKICAgICAgICBpZigkajwwKSAkaj0kbi0xOwogICAgICAgICRjbnQgPSAwOwoKICAgICAgICAvLyBUaGUgc3Ryb2tlIGFsbCBzbGljZXMgZnJvbSA5MCB0byAtOTAgKHJpZ2h0IGhhbGYgY2lyY2xlKQogICAgICAgIC8vIGNsb2Nrd2lzZQogICAgICAgIHdoaWxlKCAkY250IDwgJHNsaWNlX2xlZnQgICYmICRhYW9wdGlvbiAhPT0gMiApIHsKCiAgICAgICAgICAgIGxpc3QoJHgsJHkpID0gJGFkamV4cGxvZGVbJGpdOwoKICAgICAgICAgICAgJHRoaXMtPlBpZTNEU2xpY2UoJGltZywkeCwkeSwkZCwkaCwkYW5nbGVzWyRqXVswXSwkYW5nbGVzWyRqXVsxXSwKICAgICAgICAgICAgJHosJGFkamNvbG9yc1skal0sJHNoYWRvdyk7CiAgICAgICAgICAgICRqLS07CiAgICAgICAgICAgIGlmKCAkY250ID4gJG4gKSB7CiAgICAgICAgICAgICAgICBKcEdyYXBoRXJyb3I6OlJhaXNlTCgxNDAwNik7CiAgICAgICAgICAgICAgICAvLygiUGllM0QgSW50ZXJuYWwgRXJyb3I6IFotU29ydGluZyBhbGdvcml0aG0gZm9yIDNEIFBpZXMgaXMgbm90IHdvcmtpbmcgcHJvcGVybHkgKDIpLiBUcnlpbmcgdG8gd3JhcCB0d2ljZSB3aGlsZSBzdHJva2luZy4iKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZigkajwwKSAkaj0kbi0xOwogICAgICAgICAgICAkY250Kys7CiAgICAgICAgfQoKICAgICAgICAvLyBOb3cgZG8gYSBzcGVjaWFsIHRoaW5nLiBTdHJva2UgdGhlIGxhc3Qgc2xpY2Ugb24gdGhlIGxlZnQKICAgICAgICAvLyBoYWxmY2lyY2xlIG9uZSBtb3JlIHRpbWUuICBUaGlzIGlzIG5lZWRlZCBpbiB0aGUgY2FzZSB3aGVyZQogICAgICAgIC8vIHRoZSBzbGljZSBjbG9zZSB0byAyNzAgaGF2ZSBiZWVuIGV4cGxvZGVkLiBJbiB0aGF0IGNhc2UgdGhlCiAgICAgICAgLy8gcGFydCBvZiB0aGUgc2xpY2UgY2xvc2UgdG8gdGhlIGNlbnRlciBvZiB0aGUgcGllIG1pZ2h0IGJlCiAgICAgICAgLy8gc2xpZ2h0bHkgbmFnZ2VkLgogICAgICAgIGlmKCAkYWFvcHRpb24gIT09IDIgKQogICAgICAgICR0aGlzLT5QaWUzRFNsaWNlKCRpbWcsJGxhc3RbMF0sJGxhc3RbMV0sJGQsJGgsJGFuZ2xlc1skbGFzdFsyXV1bMF0sCiAgICAgICAgJGFuZ2xlc1skbGFzdFsyXV1bMV0sJHosJGFkamNvbG9yc1skbGFzdFsyXV0sJHNoYWRvdyk7CgoKICAgICAgICBpZiggJGFhb3B0aW9uICE9PSAxICkgewogICAgICAgICAgICAvLyBOb3cgcHJpbnQgcG9zc2libGUgbGFiZWxzIGFuZCBhZGQgY3NpbQogICAgICAgICAgICAkdGhpcy0+dmFsdWUtPkFwcGx5Rm9udCgkaW1nKTsKICAgICAgICAgICAgJG1hcmdpbiA9ICRpbWctPkdldEZvbnRIZWlnaHQoKS8yICsgJHRoaXMtPnZhbHVlLT5tYXJnaW4gOwogICAgICAgICAgICBmb3IoJGk9MDsgJGkgPCBjb3VudCgkZGF0YSk7ICsrJGkgKSB7CiAgICAgICAgICAgICAgICAkbGEgPSAkbGFiZWxkYXRhWyRpXVswXTsKICAgICAgICAgICAgICAgICR4ID0gJGxhYmVsZGF0YVskaV1bMV0gKyBjb3MoJGxhKk1fUEkvMTgwKSooJGQrJG1hcmdpbikqJHRoaXMtPmlsYWJlbHBvc2FkajsKICAgICAgICAgICAgICAgICR5ID0gJGxhYmVsZGF0YVskaV1bMl0gLSBzaW4oJGxhKk1fUEkvMTgwKSooJGgrJG1hcmdpbikqJHRoaXMtPmlsYWJlbHBvc2FkajsKICAgICAgICAgICAgICAgIGlmKCAkdGhpcy0+aWxhYmVscG9zYWRqID49IDEuMCApIHsKICAgICAgICAgICAgICAgICAgICBpZiggJGxhID4gMTgwICYmICRsYSA8IDM2MCApICR5ICs9ICR6OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoICR0aGlzLT5sYWJlbHR5cGUgPT0gMCApIHsKICAgICAgICAgICAgICAgICAgICBpZiggJHN1bSA+IDAgKSAkbCA9IDEwMCokZGF0YVskaV0vJHN1bTsKICAgICAgICAgICAgICAgICAgICBlbHNlICRsID0gMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2VpZiggJHRoaXMtPmxhYmVsdHlwZSA9PSAxICkgewogICAgICAgICAgICAgICAgICAgICRsID0gJGRhdGFbJGldOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJGwgPSAkdGhpcy0+YWRqdXN0ZWRfZGF0YVskaV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiggaXNzZXQoJHRoaXMtPmxhYmVsc1skaV0pICYmIGlzX3N0cmluZygkdGhpcy0+bGFiZWxzWyRpXSkgKSB7CiAgICAgICAgICAgICAgICAgICAgJGw9c3ByaW50ZigkdGhpcy0+bGFiZWxzWyRpXSwkbCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJHRoaXMtPlN0cm9rZUxhYmVscygkbCwkaW1nLCRsYWJlbGRhdGFbJGldWzBdKk1fUEkvMTgwLCR4LCR5LCR6KTsKICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICR0aGlzLT5BZGQzRFNsaWNlVG9DU0lNKCRpLCRsYWJlbGRhdGFbJGldWzFdLCRsYWJlbGRhdGFbJGldWzJdLCRoKjIsJGQqMiwkeiwKICAgICAgICAgICAgICAgICRvcmlnaW5hbGFuZ2xlc1skaV1bMF0sJG9yaWdpbmFsYW5nbGVzWyRpXVsxXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vCiAgICAgICAgLy8gRmluYWxseSBhZGQgcG90ZW50aWFsIGxpbmVzIGluIHBpZQogICAgICAgIC8vCgogICAgICAgIGlmKCAkZWRnZWNvbG9yPT0iIiB8fCAkYWFvcHRpb24gIT09IDAgKSByZXR1cm47CgogICAgICAgICRhY2NzdW0gPSAwOwogICAgICAgICRhID0gJHN0YXJ0YW5nbGU7CiAgICAgICAgJGEgPSAkdGhpcy0+Tm9ybUFuZ2xlKCRhKTsKCiAgICAgICAgJGEgKj0gTV9QSS8xODAuMDsKCiAgICAgICAgJGlkeD0wOwogICAgICAgICRpbWctPlB1c2hDb2xvcigkZWRnZWNvbG9yKTsKICAgICAgICAkaW1nLT5TZXRMaW5lV2VpZ2h0KCRlZGdld2VpZ2h0KTsKCiAgICAgICAgJGZ1bGxlZGdlID0gdHJ1ZTsKICAgICAgICBmb3IoJGk9MDsgJGkgPCBjb3VudCgkZGF0YSkgJiYgJGZ1bGxlZGdlOyArKyRpICkgewogICAgICAgICAgICBpZiggZW1wdHkoJHRoaXMtPmV4cGxvZGVfcmFkaXVzWyRpXSkgKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+ZXhwbG9kZV9yYWRpdXNbJGldPTA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoICR0aGlzLT5leHBsb2RlX3JhZGl1c1skaV0gPiAwICkgewogICAgICAgICAgICAgICAgJGZ1bGxlZGdlID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgIAoKICAgICAgICBmb3IoJGk9MDsgJGkgPCBjb3VudCgkZGF0YSk7ICsrJGksICsrJGlkeCApIHsKCiAgICAgICAgICAgICRkYSA9ICRkYXRhWyRpXS8kc3VtICogMipNX1BJOwogICAgICAgICAgICAkdGhpcy0+U3Ryb2tlRnVsbFNsaWNlRnJhbWUoJGltZywkeGMsJHljLCRhLCRhKyRkYSwkZCwkaCwkeiwkZWRnZWNvbG9yLAogICAgICAgICAgICAkdGhpcy0+ZXhwbG9kZV9yYWRpdXNbJGldLCRmdWxsZWRnZSk7CiAgICAgICAgICAgICRhICs9ICRkYTsKICAgICAgICB9CiAgICAgICAgJGltZy0+UG9wQ29sb3IoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBTdHJva2VGdWxsU2xpY2VGcmFtZSgkaW1nLCR4YywkeWMsJHNhLCRlYSwkdywkaCwkeiwkZWRnZWNvbG9yLCRleHBsb2RlcmFkaXVzLCRmdWxsZWRnZSkgewogICAgICAgICRzdGVwID0gMC4wMjsKCiAgICAgICAgaWYoICRleHBsb2RlcmFkaXVzID4gMCApIHsKICAgICAgICAgICAgJGxhID0gKCRzYSskZWEpLzI7CiAgICAgICAgICAgICR4YyArPSAkZXhwbG9kZXJhZGl1cypjb3MoJGxhKTsKICAgICAgICAgICAgJHljIC09ICRleHBsb2RlcmFkaXVzKnNpbigkbGEpICogKCRoLyR3KSA7CiAgICAgICAgICAgICAKICAgICAgICB9CgogICAgICAgICRwID0gYXJyYXkoJHhjLCR5YywkeGMrJHcqY29zKCRzYSksJHljLSRoKnNpbigkc2EpKTsKCiAgICAgICAgZm9yKCRhPSRzYTsgJGEgPCAkZWE7ICRhICs9ICRzdGVwICkgewogICAgICAgICAgICAkcFtdID0gJHhjICsgJHcqY29zKCRhKTsKICAgICAgICAgICAgJHBbXSA9ICR5YyAtICRoKnNpbigkYSk7CiAgICAgICAgfQoKICAgICAgICAkcFtdID0gJHhjKyR3KmNvcygkZWEpOwogICAgICAgICRwW10gPSAkeWMtJGgqc2luKCRlYSk7CiAgICAgICAgJHBbXSA9ICR4YzsKICAgICAgICAkcFtdID0gJHljOwoKICAgICAgICAkaW1nLT5TZXRDb2xvcigkZWRnZWNvbG9yKTsKICAgICAgICAkaW1nLT5Qb2x5Z29uKCRwKTsKCiAgICAgICAgLy8gVW5mb3J0dW5hdGVseSB3ZSBjYW4ndCByZWFsbHkgZHJhdyB0aGUgZnVsbCBlZGdlIGFyb3VuZCB0aGUgd2hvbGUgb2YKICAgICAgICAvLyBvZiB0aGUgc2xpY2UgaWYgYW55IG9mIHRoZSBzbGljZXMgYXJlIGV4cGxvZGVkLiBUaGUgcmVhc29uIGlzIHRoYXQKICAgICAgICAvLyB0aGlzIGFsZ29yaXRobSBpcyB0byBzaW1wbHkuIFRoZXJlIGFyZSBjYXNlcyB3aGVyZSB0aGUgZWRnZXMgd2lsbAogICAgICAgIC8vICJvdmVyd3JpdGUiIG90aGVyIHNsaWNlcyB3aGVuIHRoZXkgaGF2ZSBiZWVuIGV4cGxvZGVkLgogICAgICAgIC8vIERvaW5nIHRoZSBmdWxsLCBwcm9wZXIgM0QgaGlkZGVuIGxpbmVzIHN0aWZmIGlzIGFjdHVhbGx5IHF1aXRlCiAgICAgICAgLy8gdHJpY2t5LiBTbyBmb3IgZXhwbG9kZWQgcGllcyB3ZSBvbmx5IGRyYXcgdGhlIHRvcCBlZGdlLiBOb3QgcGVyZmVjdAogICAgICAgIC8vIGJ1dCB0aGUgInJlYWwiIHNvbHV0aW9uIGlzIG11Y2ggbW9yZSBjb21wbGljYXRlZC4KICAgICAgICBpZiggJGZ1bGxlZGdlICYmICEoICRzYSA+IDAgJiYgJHNhIDwgTV9QSSAmJiAkZWEgPCBNX1BJKSApIHsKCiAgICAgICAgICAgIGlmKCRzYSA8IE1fUEkgJiYgJGVhID4gTV9QSSkgewogICAgICAgICAgICAgICAgJHNhID0gTV9QSTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoJHNhIDwgMipNX1BJICYmICgoJGVhID49IDIqTV9QSSkgfHwgKCRlYSA+IDAgJiYgJGVhIDwgJHNhICkgKSApIHsKICAgICAgICAgICAgICAgICRlYSA9IDIqTV9QSTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoICRzYSA+PSBNX1BJICYmICRlYSA8PSAyKk1fUEkgKSB7CiAgICAgICAgICAgICAgICAkcCA9IGFycmF5KCR4YyArICR3KmNvcygkc2EpLCR5YyAtICRoKnNpbigkc2EpLAogICAgICAgICAgICAgICAgJHhjICsgJHcqY29zKCRzYSksJHogKyAkeWMgLSAkaCpzaW4oJHNhKSk7CgogICAgICAgICAgICAgICAgZm9yKCRhPSRzYSskc3RlcDsgJGEgPCAkZWE7ICRhICs9ICRzdGVwICkgewogICAgICAgICAgICAgICAgICAgICRwW10gPSAkeGMgKyAkdypjb3MoJGEpOwogICAgICAgICAgICAgICAgICAgICRwW10gPSAkeiArICR5YyAtICRoKnNpbigkYSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkcFtdID0gJHhjICsgJHcqY29zKCRlYSk7CiAgICAgICAgICAgICAgICAkcFtdID0gJHogKyAkeWMgLSAkaCpzaW4oJGVhKTsKICAgICAgICAgICAgICAgICRwW10gPSAkeGMgKyAkdypjb3MoJGVhKTsKICAgICAgICAgICAgICAgICRwW10gPSAkeWMgLSAkaCpzaW4oJGVhKTsKICAgICAgICAgICAgICAgICRpbWctPlNldENvbG9yKCRlZGdlY29sb3IpOwogICAgICAgICAgICAgICAgJGltZy0+UG9seWdvbigkcCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gU3Ryb2tlKCRpbWcsJGFhb3B0aW9uPTApIHsKICAgICAgICAkbiA9IGNvdW50KCR0aGlzLT5kYXRhKTsKCiAgICAgICAgLy8gSWYgdXNlciBoYXNuJ3Qgc2V0IHRoZSBjb2xvcnMgdXNlIHRoZSB0aGVtZSBhcnJheQogICAgICAgIGlmKCAkdGhpcy0+c2V0c2xpY2Vjb2xvcnM9PW51bGwgKSB7CiAgICAgICAgICAgICRjb2xvcnMgPSBhcnJheV9rZXlzKCRpbWctPnJnYi0+cmdiX3RhYmxlKTsKICAgICAgICAgICAgc29ydCgkY29sb3JzKTsKICAgICAgICAgICAgJGlkeF9hPSR0aGlzLT50aGVtZWFyclskdGhpcy0+dGhlbWVdOwogICAgICAgICAgICAkY2EgPSBhcnJheSgpOwogICAgICAgICAgICAkbSA9IGNvdW50KCRpZHhfYSk7CiAgICAgICAgICAgIGZvcigkaT0wOyAkaSA8ICRtOyArKyRpKSB7CiAgICAgICAgICAgICAgICAkY2FbJGldID0gJGNvbG9yc1skaWR4X2FbJGldXTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkY2EgPSBhcnJheV9yZXZlcnNlKGFycmF5X3NsaWNlKCRjYSwwLCRuKSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICAkY2EgPSAkdGhpcy0+c2V0c2xpY2Vjb2xvcnM7CiAgICAgICAgfQoKCiAgICAgICAgaWYoICR0aGlzLT5wb3N4IDw9IDEgJiYgJHRoaXMtPnBvc3ggPiAwICkgewogICAgICAgICAgICAkeGMgPSByb3VuZCgkdGhpcy0+cG9zeCokaW1nLT53aWR0aCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICAkeGMgPSAkdGhpcy0+cG9zeCA7CiAgICAgICAgfQoKICAgICAgICBpZiggJHRoaXMtPnBvc3kgPD0gMSAmJiAkdGhpcy0+cG9zeSA+IDAgKSB7CiAgICAgICAgICAgICR5YyA9IHJvdW5kKCR0aGlzLT5wb3N5KiRpbWctPmhlaWdodCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICAkeWMgPSAkdGhpcy0+cG9zeSA7CiAgICAgICAgfQoKICAgICAgICBpZiggJHRoaXMtPnJhZGl1cyA8PSAxICkgewogICAgICAgICAgICAkd2lkdGggPSBmbG9vcigkdGhpcy0+cmFkaXVzKm1pbigkaW1nLT53aWR0aCwkaW1nLT5oZWlnaHQpKTsKICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIHBpZSBkb2Vzbid0IG92ZXJmbG93IHRoZSBpbWFnZSBib3JkZXIKICAgICAgICAgICAgLy8gVGhlIDAuOSBmYWN0b3IgaXMgc2ltcGx5IGFuIGV4dHJhIG1hcmdpbiB0byBsZWF2ZSBzb21lIHNwYWNlCiAgICAgICAgICAgIC8vIGJldHdlZW4gdGhlIHBpZSBhbiB0aGUgYm9yZGVyIG9mIHRoZSBpbWFnZS4KICAgICAgICAgICAgJHdpZHRoID0gbWluKCR3aWR0aCxtaW4oJHhjKjAuOSwoJHljKjkwLyR0aGlzLT5hbmdsZS0kd2lkdGgvNCkqMC45KSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICAkd2lkdGggPSAkdGhpcy0+cmFkaXVzICogKCRhYW9wdGlvbiA9PT0gMSA\/IDIgOiAxICkgOwogICAgICAgIH0KCiAgICAgICAgLy8gQWRkIGEgc2FuaXR5IGNoZWNrIGZvciB3aWR0aAogICAgICAgIGlmKCAkd2lkdGggPCAxICkgewogICAgICAgICAgICBKcEdyYXBoRXJyb3I6OlJhaXNlTCgxNDAwNyk7Ly8oIldpZHRoIGZvciAzRCBQaWUgaXMgMC4gU3BlY2lmeSBhIHNpemUgPiAwIik7CiAgICAgICAgfQoKICAgICAgICAvLyBFc3RhYmxpc2ggYSB0aGlja25lc3MuIEJ5IGRlZmF1bHQgdGhlIHRoaWNrbmVzcyBpcyBhIGZpZnRoIG9mIHRoZQogICAgICAgIC8vIHBpZSBzbGljZSB3aWR0aCAoPXBpZSByYWRpdXMpIGJ1dCBzaW5jZSB0aGUgcGVyc3BlY3RpdmUgZGVwZW5kcwogICAgICAgIC8vIG9uIHRoZSBpbmNsaW5hdGlvbiBhbmdsZSB3ZSB1c2Ugc29tZSBoZXVyaXN0aWNzIHRvIG1ha2UgdGhlIGVkZ2UKICAgICAgICAvLyBzbGlnaHRseSB0aGlja2VyIHRoZSBsZXNzIHRoZSBhbmdsZS4KCiAgICAgICAgLy8gSGFzIHVzZXIgc3BlY2lmaWVkIGFuIGFic29sdXRlIHRoaWNrbmVzcz8gSW4gdGhhdCBjYXNlIHVzZQogICAgICAgIC8vIHRoYXQgaW5zdGVhZAoKICAgICAgICBpZiggJHRoaXMtPmlUaGlja25lc3MgKSB7CiAgICAgICAgICAgICR0aGljayA9ICR0aGlzLT5pVGhpY2tuZXNzOwogICAgICAgICAgICAkdGhpY2sgKj0gKCRhYW9wdGlvbiA9PT0gMSA\/IDIgOiAxICk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICAkdGhpY2sgPSAkd2lkdGgvMTI7CiAgICAgICAgfQogICAgICAgICRhID0gJHRoaXMtPmFuZ2xlOwogICAgICAgIAogICAgICAgIGlmKCAkYSA8PSAzMCApICR0aGljayAqPSAxLjY7CiAgICAgICAgZWxzZWlmKCAkYSA8PSA0MCApICR0aGljayAqPSAxLjQ7CiAgICAgICAgZWxzZWlmKCAkYSA8PSA1MCApICR0aGljayAqPSAxLjI7CiAgICAgICAgZWxzZWlmKCAkYSA8PSA2MCApICR0aGljayAqPSAxLjA7CiAgICAgICAgZWxzZWlmKCAkYSA8PSA3MCApICR0aGljayAqPSAwLjg7CiAgICAgICAgZWxzZWlmKCAkYSA8PSA4MCApICR0aGljayAqPSAwLjc7CiAgICAgICAgZWxzZSAkdGhpY2sgKj0gMC42OwoKICAgICAgICAkdGhpY2sgPSBmbG9vcigkdGhpY2spOwoKICAgICAgICBpZiggJHRoaXMtPmV4cGxvZGVfYWxsICkgewogICAgICAgICAgICBmb3IoJGk9MDsgJGkgPCAkbjsgKyskaSkKICAgICAgICAgICAgICAgICR0aGlzLT5leHBsb2RlX3JhZGl1c1skaV09JHRoaXMtPmV4cGxvZGVfcjsKICAgICAgICB9CgogICAgICAgICR0aGlzLT5QaWUzRCgkYWFvcHRpb24sJGltZywkdGhpcy0+ZGF0YSwgJGNhLCAkeGMsICR5YywgJHdpZHRoLCAkdGhpcy0+YW5nbGUsCiAgICAgICAgJHRoaWNrLCAwLjY1LCAkdGhpcy0+c3RhcnRhbmdsZSwgJHRoaXMtPmVkZ2Vjb2xvciwgJHRoaXMtPmVkZ2V3ZWlnaHQpOwoKICAgICAgICAvLyBBZGp1c3QgdGl0bGUgcG9zaXRpb24KICAgICAgICBpZiggJGFhb3B0aW9uICE9IDEgKSB7CiAgICAgICAgICAgICR0aGlzLT50aXRsZS0+U2V0UG9zKCR4YywkeWMtJHRoaXMtPnRpdGxlLT5HZXRGb250SGVpZ2h0KCRpbWcpLSR3aWR0aC8yLSR0aGlzLT50aXRsZS0+bWFyZ2luLCAgICAgICAgICJjZW50ZXIiLCJib3R0b20iKTsKICAgICAgICAgICAgJHRoaXMtPnRpdGxlLT5TdHJva2UoJGltZyk7CiAgICAgICAgfQogICAgfQoKICAgIC8vLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBQUklWQVRFIE1FVEhPRFMKCiAgICAvLyBQb3NpdGlvbiB0aGUgbGFiZWxzIG9mIGVhY2ggc2xpY2UKICAgIGZ1bmN0aW9uIFN0cm9rZUxhYmVscygkbGFiZWwsJGltZywkYSwkeHAsJHlwLCR6KSB7CiAgICAgICAgJHRoaXMtPnZhbHVlLT5oYWxpZ249ImxlZnQiOwogICAgICAgICR0aGlzLT52YWx1ZS0+dmFsaWduPSJ0b3AiOwoKICAgICAgICAvLyBQb3NpdGlvbiB0aGUgYXhpcyB0aXRsZS4KICAgICAgICAvLyBkeCwgZHkgaXMgdGhlIG9mZnNldCBmcm9tIHRoZSB0b3AgbGVmdCBjb3JuZXIgb2YgdGhlIGJvdW5kaW5nIGJveCB0aGF0IHNvcnJvdW5kcyB0aGUgdGV4dAogICAgICAgIC8vIHRoYXQgaW50ZXJzZWN0cyB3aXRoIHRoZSBleHRlbnNpb24gb2YgdGhlIGNvcnJlc3BvbmRpbmcgYXhpcy4gVGhlIGNvZGUgbG9va3MgYSBsaXR0bGUKICAgICAgICAvLyBiaXQgbWVzc3kgYnV0IHRoaXMgaXMgcmVhbGx5IHRoZSBvbmx5IHdheSBvZiBoYXZpbmcgYSByZWFzb25hYmxlIHBvc2l0aW9uIG9mIHRoZQogICAgICAgIC8vIGF4aXMgdGl0bGVzLgogICAgICAgICR0aGlzLT52YWx1ZS0+QXBwbHlGb250KCRpbWcpOwogICAgICAgICRoPSRpbWctPkdldFRleHRIZWlnaHQoJGxhYmVsKTsKICAgICAgICAvLyBGb3IgbnVtZXJpYyB2YWx1ZXMgdGhlIGZvcm1hdCBvZiB0aGUgZGlzcGxheSB2YWx1ZQogICAgICAgIC8vIG11c3QgYmUgdGFrZW4gaW50byBhY2NvdW50CiAgICAgICAgaWYoIGlzX251bWVyaWMoJGxhYmVsKSApIHsKICAgICAgICAgICAgaWYoICRsYWJlbCA+PSAwICkgewogICAgICAgICAgICAgICAgJHc9JGltZy0+R2V0VGV4dFdpZHRoKHNwcmludGYoJHRoaXMtPnZhbHVlLT5mb3JtYXQsJGxhYmVsKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAkdz0kaW1nLT5HZXRUZXh0V2lkdGgoc3ByaW50ZigkdGhpcy0+dmFsdWUtPm5lZ2Zvcm1hdCwkbGFiZWwpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgJHc9JGltZy0+R2V0VGV4dFdpZHRoKCRsYWJlbCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHdoaWxlKCAkYSA+IDIqTV9QSSApIHsKICAgICAgICAgICAgJGEgLT0gMipNX1BJOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZiggJGE+PTcqTV9QSS80IHx8ICRhIDw9IE1fUEkvNCApICRkeD0wOwogICAgICAgIGlmKCAkYT49TV9QSS80ICYmICRhIDw9IDMqTV9QSS80ICkgJGR4PSgkYS1NX1BJLzQpKjIvTV9QSTsKICAgICAgICBpZiggJGE+PTMqTV9QSS80ICYmICRhIDw9IDUqTV9QSS80ICkgJGR4PTE7CiAgICAgICAgaWYoICRhPj01Kk1fUEkvNCAmJiAkYSA8PSA3Kk1fUEkvNCApICRkeD0oMS0oJGEtTV9QSSo1LzQpKjIvTV9QSSk7CgogICAgICAgIGlmKCAkYT49NypNX1BJLzQgKSAkZHk9KCgkYS1NX1BJKS0zKk1fUEkvNCkqMi9NX1BJOwogICAgICAgIGlmKCAkYTw9TV9QSS80ICkgJGR5PSgxLSRhKjIvTV9QSSk7CiAgICAgICAgaWYoICRhPj1NX1BJLzQgJiYgJGEgPD0gMypNX1BJLzQgKSAkZHk9MTsKICAgICAgICBpZiggJGE+PTMqTV9QSS80ICYmICRhIDw9IDUqTV9QSS80ICkgJGR5PSgxLSgkYS0zKk1fUEkvNCkqMi9NX1BJKTsKICAgICAgICBpZiggJGE+PTUqTV9QSS80ICYmICRhIDw9IDcqTV9QSS80ICkgJGR5PTA7CgogICAgICAgICR4ID0gcm91bmQoJHhwLSRkeCokdyk7CiAgICAgICAgJHkgPSByb3VuZCgkeXAtJGR5KiRoKTsKCiAgICAgICAgLy8gTWFyayBhbmNob3IgcG9pbnQgZm9yIGRlYnVnZ2luZwogICAgICAgIC8qCiAgICAgICAgJGltZy0+U2V0Q29sb3IoJ3JlZCcpOwogICAgICAgICRpbWctPkxpbmUoJHhwLTEwLCR5cCwkeHArMTAsJHlwKTsKICAgICAgICAkaW1nLT5MaW5lKCR4cCwkeXAtMTAsJHhwLCR5cCsxMCk7CiAgICAgICAgKi8KCiAgICAgICAgJG9sZG1hcmdpbiA9ICR0aGlzLT52YWx1ZS0+bWFyZ2luOwogICAgICAgICR0aGlzLT52YWx1ZS0+bWFyZ2luPTA7CiAgICAgICAgJHRoaXMtPnZhbHVlLT5TdHJva2UoJGltZywkbGFiZWwsJHgsJHkpOwogICAgICAgICR0aGlzLT52YWx1ZS0+bWFyZ2luPSRvbGRtYXJnaW47CgogICAgfQp9IC8vIENsYXNzCgovKiBFT0YgKi8KPz4K",
    "size": "31914"
}